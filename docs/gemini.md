# Labyrinth Academy Dating Sim 프로젝트 분석 및 제안

## 1. 프로젝트 개요

- **목표:** 마법 아카데미를 배경으로 하는 연애 시뮬레이션과 던전 탐험 RPG 요소가 결합된 비주얼 노벨 게임 개발.
- **기술 스택:** React, TypeScript, Vite, Tailwind CSS를 사용한 최신 웹 기술 기반.
- **플랫폼:** 웹 기반이며, Capacitor를 통해 안드로이드 등 모바일 앱으로 확장 가능성을 염두에 둔 구조.

## 2. 코드 리뷰

### 잘된 점 (Strengths)

- **체계적인 컴포넌트 구조:** `components` 폴더 내에 기능별로 컴포넌트가 명확하게 분리되어 있어 유지보수가 용이합니다.
- **타입스크립트 활용:** `types/game.ts`에 게임 핵심 타입을 상세히 정의하여 코드의 안정성과 예측 가능성을 높였습니다.
- **상세한 개발 기록:** `PROGRESS.md`를 통해 기능 구현 상태와 다음 단계를 명확히 추적하고 있어 협업 및 개인 프로젝트 관리에 매우 효과적입니다.
- **상태 관리 로직 분리:** `useGameState` 커스텀 훅을 통해 게임의 핵심 상태와 로직을 UI로부터 분리한 점은 좋은 시도입니다.

### 개선 제안 (Suggestions for Improvement)

- **`useGameState` 훅의 비대화:** 현재 게임의 거의 모든 상태(플레이어, 이벤트, 시간, 메시지 등)가 `useGameState` 훅 하나에 집중되어 있습니다. 이는 "God Hook"이 되어 유지보수와 테스트를 어렵게 만들 수 있습니다.
- **`App.tsx`의 역할 과다:** 라우팅 설정 외에도 로그인, 계정 생성, 캐릭터 대화 처리 등 많은 핸들러 함수들이 `App.tsx`에 위치해 있습니다. 이로 인해 컴포넌트가 비대해지고 역할이 불분명해집니다.
- **Prop Drilling:** `App.tsx`에서 하위 컴포넌트로 수많은 props가 전달되고 있습니다. 상태가 필요한 컴포넌트까지 여러 단계를 거쳐야 하므로 코드 추적이 어렵습니다.
- **느슨한 타입 사용:** `App.tsx`의 `user`, `data` 등 일부 상태에서 `any` 타입이 사용되고 있습니다. `types/game.ts`에 정의된 타입을 적극적으로 활용하여 타입 안정성을 더욱 강화할 필요가 있습니다.

## 3. 앞으로의 진행 방향 제안

### 1. 상태 관리 리팩토링 (권장)

- **분리:** `useGameState` 훅을 `usePlayerState`, `useEventSystem`, `useTimeManager` 등 기능별로 작은 훅으로 분리하는 것을 제안합니다.
- **라이브러리 도입:** `Zustand`와 같은 가벼운 상태 관리 라이브러리를 도입하여 `Prop Drilling` 문제를 해결하고, 상태 로직을 더욱 명확하게 관리할 수 있습니다. `Zustand`는 별도의 Provider 없이 훅 기반으로 간단하게 사용할 수 있어 기존 구조와 잘 어울립니다.

### 2. 라우팅 및 페이지 구조 개선

- **역할 분리:** `App.tsx`에 있는 핸들러 함수들을 각 페이지 컴포넌트나 관련 커스텀 훅으로 이동시켜 `App.tsx`는 순수하게 라우팅 설정에 집중하도록 구조를 변경합니다.
- **최신 기능 활용:** `react-router-dom`의 `loader`나 `action` 기능을 활용하여 페이지 진입 시 필요한 데이터를 미리 불러오거나, 양식 제출 로직을 처리하면 컴포넌트를 더 깔끔하게 유지할 수 있습니다.

### 3. 데이터 관리 추상화

- **API 계층 생성:** 현재는 `data/characters.json`과 같은 파일을 컴포넌트에서 직접 `import`하여 사용하고 있습니다. 향후 백엔드 API 연동을 고려하여, `services/api.ts` 같은 파일을 만들고 `getCharacters()`, `getItems()`와 같은 함수를 통해 데이터를 가져오도록 추상화 계층을 두는 것을 추천합니다.

### 4. 테스트 전략 수립

- **테스트 환경 구축:** `PROGRESS.md`에도 언급되었듯이 테스트 코드 추가가 필요합니다. Vite 환경과 잘 맞는 `Vitest`와 `React Testing Library`를 사용하여 리팩토링된 상태 관리 훅과 주요 컴포넌트에 대한 단위/통합 테스트를 작성하여 안정성을 확보합니다.
