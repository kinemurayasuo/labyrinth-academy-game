(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const m of u)if(m.type==="childList")for(const y of m.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function d(u){const m={};return u.integrity&&(m.integrity=u.integrity),u.referrerPolicy&&(m.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?m.credentials="include":u.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(u){if(u.ep)return;u.ep=!0;const m=d(u);fetch(u.href,m)}})();function m0(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Oc={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function x0(){if(ax)return Gl;ax=1;var c=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function d(o,u,m){var y=null;if(m!==void 0&&(y=""+m),u.key!==void 0&&(y=""+u.key),"key"in u){m={};for(var b in u)b!=="key"&&(m[b]=u[b])}else m=u;return u=m.ref,{$$typeof:c,type:o,key:y,ref:u!==void 0?u:null,props:m}}return Gl.Fragment=i,Gl.jsx=d,Gl.jsxs=d,Gl}var sx;function h0(){return sx||(sx=1,Oc.exports=x0()),Oc.exports}var e=h0(),Hc={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lx;function f0(){if(lx)return ge;lx=1;var c=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),p=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=p&&O[p]||O["@@iterator"],typeof O=="function"?O:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,D={};function v(O,Q,J){this.props=O,this.context=Q,this.refs=D,this.updater=J||T}v.prototype.isReactComponent={},v.prototype.setState=function(O,Q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Q,"setState")},v.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function N(){}N.prototype=v.prototype;function w(O,Q,J){this.props=O,this.context=Q,this.refs=D,this.updater=J||T}var _=w.prototype=new N;_.constructor=w,M(_,v.prototype),_.isPureReactComponent=!0;var E=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function X(O,Q,J,$,se,ie){return J=ie.ref,{$$typeof:c,type:O,key:Q,ref:J!==void 0?J:null,props:ie}}function q(O,Q){return X(O.type,Q,void 0,void 0,void 0,O.props)}function le(O){return typeof O=="object"&&O!==null&&O.$$typeof===c}function F(O){var Q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(J){return Q[J]})}var ce=/\/+/g;function I(O,Q){return typeof O=="object"&&O!==null&&O.key!=null?F(""+O.key):Q.toString(36)}function G(){}function B(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(G,G):(O.status="pending",O.then(function(Q){O.status==="pending"&&(O.status="fulfilled",O.value=Q)},function(Q){O.status==="pending"&&(O.status="rejected",O.reason=Q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function H(O,Q,J,$,se){var ie=typeof O;(ie==="undefined"||ie==="boolean")&&(O=null);var oe=!1;if(O===null)oe=!0;else switch(ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(O.$$typeof){case c:case i:oe=!0;break;case C:return oe=O._init,H(oe(O._payload),Q,J,$,se)}}if(oe)return se=se(O),oe=$===""?"."+I(O,0):$,E(se)?(J="",oe!=null&&(J=oe.replace(ce,"$&/")+"/"),H(se,Q,J,"",function(He){return He})):se!=null&&(le(se)&&(se=q(se,J+(se.key==null||O&&O.key===se.key?"":(""+se.key).replace(ce,"$&/")+"/")+oe)),Q.push(se)),1;oe=0;var we=$===""?".":$+":";if(E(O))for(var he=0;he<O.length;he++)$=O[he],ie=we+I($,he),oe+=H($,Q,J,ie,se);else if(he=A(O),typeof he=="function")for(O=he.call(O),he=0;!($=O.next()).done;)$=$.value,ie=we+I($,he++),oe+=H($,Q,J,ie,se);else if(ie==="object"){if(typeof O.then=="function")return H(B(O),Q,J,$,se);throw Q=String(O),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return oe}function f(O,Q,J){if(O==null)return O;var $=[],se=0;return H(O,$,"","",function(ie){return Q.call(J,ie,se++)}),$}function z(O){if(O._status===-1){var Q=O._result;Q=Q(),Q.then(function(J){(O._status===0||O._status===-1)&&(O._status=1,O._result=J)},function(J){(O._status===0||O._status===-1)&&(O._status=2,O._result=J)}),O._status===-1&&(O._status=0,O._result=Q)}if(O._status===1)return O._result.default;throw O._result}var V=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function ne(){}return ge.Children={map:f,forEach:function(O,Q,J){f(O,function(){Q.apply(this,arguments)},J)},count:function(O){var Q=0;return f(O,function(){Q++}),Q},toArray:function(O){return f(O,function(Q){return Q})||[]},only:function(O){if(!le(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},ge.Component=v,ge.Fragment=d,ge.Profiler=u,ge.PureComponent=w,ge.StrictMode=o,ge.Suspense=g,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ge.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},ge.cache=function(O){return function(){return O.apply(null,arguments)}},ge.cloneElement=function(O,Q,J){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var $=M({},O.props),se=O.key,ie=void 0;if(Q!=null)for(oe in Q.ref!==void 0&&(ie=void 0),Q.key!==void 0&&(se=""+Q.key),Q)!R.call(Q,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&Q.ref===void 0||($[oe]=Q[oe]);var oe=arguments.length-2;if(oe===1)$.children=J;else if(1<oe){for(var we=Array(oe),he=0;he<oe;he++)we[he]=arguments[he+2];$.children=we}return X(O.type,se,void 0,void 0,ie,$)},ge.createContext=function(O){return O={$$typeof:y,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:m,_context:O},O},ge.createElement=function(O,Q,J){var $,se={},ie=null;if(Q!=null)for($ in Q.key!==void 0&&(ie=""+Q.key),Q)R.call(Q,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(se[$]=Q[$]);var oe=arguments.length-2;if(oe===1)se.children=J;else if(1<oe){for(var we=Array(oe),he=0;he<oe;he++)we[he]=arguments[he+2];se.children=we}if(O&&O.defaultProps)for($ in oe=O.defaultProps,oe)se[$]===void 0&&(se[$]=oe[$]);return X(O,ie,void 0,void 0,null,se)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(O){return{$$typeof:b,render:O}},ge.isValidElement=le,ge.lazy=function(O){return{$$typeof:C,_payload:{_status:-1,_result:O},_init:z}},ge.memo=function(O,Q){return{$$typeof:x,type:O,compare:Q===void 0?null:Q}},ge.startTransition=function(O){var Q=k.T,J={};k.T=J;try{var $=O(),se=k.S;se!==null&&se(J,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(ne,V)}catch(ie){V(ie)}finally{k.T=Q}},ge.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ge.use=function(O){return k.H.use(O)},ge.useActionState=function(O,Q,J){return k.H.useActionState(O,Q,J)},ge.useCallback=function(O,Q){return k.H.useCallback(O,Q)},ge.useContext=function(O){return k.H.useContext(O)},ge.useDebugValue=function(){},ge.useDeferredValue=function(O,Q){return k.H.useDeferredValue(O,Q)},ge.useEffect=function(O,Q,J){var $=k.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(O,Q)},ge.useId=function(){return k.H.useId()},ge.useImperativeHandle=function(O,Q,J){return k.H.useImperativeHandle(O,Q,J)},ge.useInsertionEffect=function(O,Q){return k.H.useInsertionEffect(O,Q)},ge.useLayoutEffect=function(O,Q){return k.H.useLayoutEffect(O,Q)},ge.useMemo=function(O,Q){return k.H.useMemo(O,Q)},ge.useOptimistic=function(O,Q){return k.H.useOptimistic(O,Q)},ge.useReducer=function(O,Q,J){return k.H.useReducer(O,Q,J)},ge.useRef=function(O){return k.H.useRef(O)},ge.useState=function(O){return k.H.useState(O)},ge.useSyncExternalStore=function(O,Q,J){return k.H.useSyncExternalStore(O,Q,J)},ge.useTransition=function(){return k.H.useTransition()},ge.version="19.1.1",ge}var nx;function to(){return nx||(nx=1,Hc.exports=f0()),Hc.exports}var j=to();const at=m0(j);var Lc={exports:{}},Yl={},Bc={exports:{}},qc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function p0(){return ix||(ix=1,(function(c){function i(f,z){var V=f.length;f.push(z);e:for(;0<V;){var ne=V-1>>>1,O=f[ne];if(0<u(O,z))f[ne]=z,f[V]=O,V=ne;else break e}}function d(f){return f.length===0?null:f[0]}function o(f){if(f.length===0)return null;var z=f[0],V=f.pop();if(V!==z){f[0]=V;e:for(var ne=0,O=f.length,Q=O>>>1;ne<Q;){var J=2*(ne+1)-1,$=f[J],se=J+1,ie=f[se];if(0>u($,V))se<O&&0>u(ie,$)?(f[ne]=ie,f[se]=V,ne=se):(f[ne]=$,f[J]=V,ne=J);else if(se<O&&0>u(ie,V))f[ne]=ie,f[se]=V,ne=se;else break e}}return z}function u(f,z){var V=f.sortIndex-z.sortIndex;return V!==0?V:f.id-z.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;c.unstable_now=function(){return m.now()}}else{var y=Date,b=y.now();c.unstable_now=function(){return y.now()-b}}var g=[],x=[],C=1,p=null,A=3,T=!1,M=!1,D=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function E(f){for(var z=d(x);z!==null;){if(z.callback===null)o(x);else if(z.startTime<=f)o(x),z.sortIndex=z.expirationTime,i(g,z);else break;z=d(x)}}function k(f){if(D=!1,E(f),!M)if(d(g)!==null)M=!0,R||(R=!0,I());else{var z=d(x);z!==null&&H(k,z.startTime-f)}}var R=!1,X=-1,q=5,le=-1;function F(){return v?!0:!(c.unstable_now()-le<q)}function ce(){if(v=!1,R){var f=c.unstable_now();le=f;var z=!0;try{e:{M=!1,D&&(D=!1,w(X),X=-1),T=!0;var V=A;try{t:{for(E(f),p=d(g);p!==null&&!(p.expirationTime>f&&F());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,A=p.priorityLevel;var O=ne(p.expirationTime<=f);if(f=c.unstable_now(),typeof O=="function"){p.callback=O,E(f),z=!0;break t}p===d(g)&&o(g),E(f)}else o(g);p=d(g)}if(p!==null)z=!0;else{var Q=d(x);Q!==null&&H(k,Q.startTime-f),z=!1}}break e}finally{p=null,A=V,T=!1}z=void 0}}finally{z?I():R=!1}}}var I;if(typeof _=="function")I=function(){_(ce)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,B=G.port2;G.port1.onmessage=ce,I=function(){B.postMessage(null)}}else I=function(){N(ce,0)};function H(f,z){X=N(function(){f(c.unstable_now())},z)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(f){f.callback=null},c.unstable_forceFrameRate=function(f){0>f||125<f?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<f?Math.floor(1e3/f):5},c.unstable_getCurrentPriorityLevel=function(){return A},c.unstable_next=function(f){switch(A){case 1:case 2:case 3:var z=3;break;default:z=A}var V=A;A=z;try{return f()}finally{A=V}},c.unstable_requestPaint=function(){v=!0},c.unstable_runWithPriority=function(f,z){switch(f){case 1:case 2:case 3:case 4:case 5:break;default:f=3}var V=A;A=f;try{return z()}finally{A=V}},c.unstable_scheduleCallback=function(f,z,V){var ne=c.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ne+V:ne):V=ne,f){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=V+O,f={id:C++,callback:z,priorityLevel:f,startTime:V,expirationTime:O,sortIndex:-1},V>ne?(f.sortIndex=V,i(x,f),d(g)===null&&f===d(x)&&(D?(w(X),X=-1):D=!0,H(k,V-ne))):(f.sortIndex=O,i(g,f),M||T||(M=!0,R||(R=!0,I()))),f},c.unstable_shouldYield=F,c.unstable_wrapCallback=function(f){var z=A;return function(){var V=A;A=z;try{return f.apply(this,arguments)}finally{A=V}}}})(qc)),qc}var rx;function g0(){return rx||(rx=1,Bc.exports=p0()),Bc.exports}var Uc={exports:{}},nt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function b0(){if(cx)return nt;cx=1;var c=to();function i(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)x+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var o={d:{f:d,r:function(){throw Error(i(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},u=Symbol.for("react.portal");function m(g,x,C){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:p==null?null:""+p,children:g,containerInfo:x,implementation:C}}var y=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return nt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,nt.createPortal=function(g,x){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(i(299));return m(g,x,null,C)},nt.flushSync=function(g){var x=y.T,C=o.p;try{if(y.T=null,o.p=2,g)return g()}finally{y.T=x,o.p=C,o.d.f()}},nt.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(g,x))},nt.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},nt.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var C=x.as,p=b(C,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,T=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;C==="style"?o.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:p,integrity:A,fetchPriority:T}):C==="script"&&o.d.X(g,{crossOrigin:p,integrity:A,fetchPriority:T,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},nt.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var C=b(x.as,x.crossOrigin);o.d.M(g,{crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(g)},nt.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var C=x.as,p=b(C,x.crossOrigin);o.d.L(g,C,{crossOrigin:p,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},nt.preloadModule=function(g,x){if(typeof g=="string")if(x){var C=b(x.as,x.crossOrigin);o.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(g)},nt.requestFormReset=function(g){o.d.r(g)},nt.unstable_batchedUpdates=function(g,x){return g(x)},nt.useFormState=function(g,x,C){return y.H.useFormState(g,x,C)},nt.useFormStatus=function(){return y.H.useHostTransitionStatus()},nt.version="19.1.1",nt}var ox;function y0(){if(ox)return Uc.exports;ox=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(i){console.error(i)}}return c(),Uc.exports=b0(),Uc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function v0(){if(dx)return Yl;dx=1;var c=g0(),i=to(),d=y0();function o(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function y(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function b(t){if(m(t)!==t)throw Error(o(188))}function g(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(o(188));return a!==t?null:t}for(var s=t,l=a;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return b(n),t;if(r===l)return b(n),a;r=r.sibling}throw Error(o(188))}if(s.return!==l.return)s=n,l=r;else{for(var h=!1,S=n.child;S;){if(S===s){h=!0,s=n,l=r;break}if(S===l){h=!0,l=n,s=r;break}S=S.sibling}if(!h){for(S=r.child;S;){if(S===s){h=!0,s=r,l=n;break}if(S===l){h=!0,l=r,s=n;break}S=S.sibling}if(!h)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?t:a}function x(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=x(t),a!==null)return a;t=t.sibling}return null}var C=Object.assign,p=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var G=Symbol.for("react.client.reference");function B(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===G?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case v:return"Profiler";case D:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList";case le:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case _:return(t.displayName||"Context")+".Provider";case w:return(t._context.displayName||"Context")+".Consumer";case E:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case X:return a=t.displayName||null,a!==null?a:B(t.type)||"Memo";case q:a=t._payload,t=t._init;try{return B(t(a))}catch{}}return null}var H=Array.isArray,f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},ne=[],O=-1;function Q(t){return{current:t}}function J(t){0>O||(t.current=ne[O],ne[O]=null,O--)}function $(t,a){O++,ne[O]=t.current,t.current=a}var se=Q(null),ie=Q(null),oe=Q(null),we=Q(null);function he(t,a){switch($(oe,a),$(ie,t),$(se,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Am(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Am(a),t=Tm(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(se),$(se,t)}function He(){J(se),J(ie),J(oe)}function Qt(t){t.memoizedState!==null&&$(we,t);var a=se.current,s=Tm(a,t.type);a!==s&&($(ie,t),$(se,s))}function Dt(t){ie.current===t&&(J(se),J(ie)),we.current===t&&(J(we),Ll._currentValue=V)}var mt=Object.prototype.hasOwnProperty,Qs=c.unstable_scheduleCallback,Ye=c.unstable_cancelCallback,Xt=c.unstable_shouldYield,wi=c.unstable_requestPaint,Lt=c.unstable_now,Xx=c.unstable_getCurrentPriorityLevel,oo=c.unstable_ImmediatePriority,uo=c.unstable_UserBlockingPriority,Wl=c.unstable_NormalPriority,Vx=c.unstable_LowPriority,mo=c.unstable_IdlePriority,Zx=c.log,Kx=c.unstable_setDisableYieldValue,Xs=null,xt=null;function da(t){if(typeof Zx=="function"&&Kx(t),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Xs,t)}catch{}}var ht=Math.clz32?Math.clz32:Px,Jx=Math.log,Fx=Math.LN2;function Px(t){return t>>>=0,t===0?32:31-(Jx(t)/Fx|0)|0}var Il=256,en=4194304;function Oa(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function tn(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var n=0,r=t.suspendedLanes,h=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~r,l!==0?n=Oa(l):(h&=S,h!==0?n=Oa(h):s||(s=S&~t,s!==0&&(n=Oa(s))))):(S=l&~r,S!==0?n=Oa(S):h!==0?n=Oa(h):s||(s=l&~t,s!==0&&(n=Oa(s)))),n===0?0:a!==0&&a!==n&&(a&r)===0&&(r=n&-n,s=a&-a,r>=s||r===32&&(s&4194048)!==0)?a:n}function Vs(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Wx(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xo(){var t=Il;return Il<<=1,(Il&4194048)===0&&(Il=256),t}function ho(){var t=en;return en<<=1,(en&62914560)===0&&(en=4194304),t}function ki(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Zs(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ix(t,a,s,l,n,r){var h=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var S=t.entanglements,L=t.expirationTimes,K=t.hiddenUpdates;for(s=h&~s;0<s;){var ee=31-ht(s),ae=1<<ee;S[ee]=0,L[ee]=-1;var P=K[ee];if(P!==null)for(K[ee]=null,ee=0;ee<P.length;ee++){var W=P[ee];W!==null&&(W.lane&=-536870913)}s&=~ae}l!==0&&fo(t,l,0),r!==0&&n===0&&t.tag!==0&&(t.suspendedLanes|=r&~(h&~a))}function fo(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-ht(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function po(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-ht(s),n=1<<l;n&a|t[l]&a&&(t[l]|=a),s&=~n}}function Si(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ci(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function go(){var t=z.p;return t!==0?t:(t=window.event,t===void 0?32:Fm(t.type))}function eh(t,a){var s=z.p;try{return z.p=t,a()}finally{z.p=s}}var ua=Math.random().toString(36).slice(2),st="__reactFiber$"+ua,rt="__reactProps$"+ua,ts="__reactContainer$"+ua,Mi="__reactEvents$"+ua,th="__reactListeners$"+ua,ah="__reactHandles$"+ua,bo="__reactResources$"+ua,Ks="__reactMarker$"+ua;function Ei(t){delete t[st],delete t[rt],delete t[Mi],delete t[th],delete t[ah]}function as(t){var a=t[st];if(a)return a;for(var s=t.parentNode;s;){if(a=s[ts]||s[st]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=Om(t);t!==null;){if(s=t[st])return s;t=Om(t)}return a}t=s,s=t.parentNode}return null}function ss(t){if(t=t[st]||t[ts]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function Js(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(o(33))}function ls(t){var a=t[bo];return a||(a=t[bo]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ke(t){t[Ks]=!0}var yo=new Set,vo={};function Ha(t,a){ns(t,a),ns(t+"Capture",a)}function ns(t,a){for(vo[t]=a,t=0;t<a.length;t++)yo.add(a[t])}var sh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jo={},No={};function lh(t){return mt.call(No,t)?!0:mt.call(jo,t)?!1:sh.test(t)?No[t]=!0:(jo[t]=!0,!1)}function an(t,a,s){if(lh(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function sn(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Vt(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}var _i,wo;function is(t){if(_i===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);_i=a&&a[1]||"",wo=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_i+t+wo}var Ai=!1;function Ti(t,a){if(!t||Ai)return"";Ai=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var P=W}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(W){P=W}t.call(ae.prototype)}}else{try{throw Error()}catch(W){P=W}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&P&&typeof W.stack=="string")return[W.stack,P.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),h=r[0],S=r[1];if(h&&S){var L=h.split(`
`),K=S.split(`
`);for(n=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;n<K.length&&!K[n].includes("DetermineComponentFrameRoot");)n++;if(l===L.length||n===K.length)for(l=L.length-1,n=K.length-1;1<=l&&0<=n&&L[l]!==K[n];)n--;for(;1<=l&&0<=n;l--,n--)if(L[l]!==K[n]){if(l!==1||n!==1)do if(l--,n--,0>n||L[l]!==K[n]){var ee=`
`+L[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=n);break}}}finally{Ai=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?is(s):""}function nh(t){switch(t.tag){case 26:case 27:case 5:return is(t.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return Ti(t.type,!1);case 11:return Ti(t.type.render,!1);case 1:return Ti(t.type,!0);case 31:return is("Activity");default:return""}}function ko(t){try{var a="";do a+=nh(t),t=t.return;while(t);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Nt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function So(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ih(t){var a=So(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),l=""+t[a];if(!t.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return n.call(this)},set:function(h){l=""+h,r.call(this,h)}}),Object.defineProperty(t,a,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(h){l=""+h},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function ln(t){t._valueTracker||(t._valueTracker=ih(t))}function Co(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=So(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function nn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var rh=/[\n"\\]/g;function wt(t){return t.replace(rh,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Di(t,a,s,l,n,r,h,S){t.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?t.type=h:t.removeAttribute("type"),a!=null?h==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Nt(a)):t.value!==""+Nt(a)&&(t.value=""+Nt(a)):h!=="submit"&&h!=="reset"||t.removeAttribute("value"),a!=null?Ri(t,h,Nt(a)):s!=null?Ri(t,h,Nt(s)):l!=null&&t.removeAttribute("value"),n==null&&r!=null&&(t.defaultChecked=!!r),n!=null&&(t.checked=n&&typeof n!="function"&&typeof n!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Nt(S):t.removeAttribute("name")}function Mo(t,a,s,l,n,r,h,S){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),a!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||a!=null))return;s=s!=null?""+Nt(s):"",a=a!=null?""+Nt(a):s,S||a===t.value||(t.value=a),t.defaultValue=a}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.name=h)}function Ri(t,a,s){a==="number"&&nn(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function rs(t,a,s,l){if(t=t.options,a){a={};for(var n=0;n<s.length;n++)a["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=a.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Nt(s),a=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,l&&(t[n].defaultSelected=!0);return}a!==null||t[n].disabled||(a=t[n])}a!==null&&(a.selected=!0)}}function Eo(t,a,s){if(a!=null&&(a=""+Nt(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Nt(s):""}function _o(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(o(92));if(H(l)){if(1<l.length)throw Error(o(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=Nt(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function cs(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var ch=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ao(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||ch.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function To(t,a,s){if(a!=null&&typeof a!="object")throw Error(o(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var n in a)l=a[n],a.hasOwnProperty(n)&&s[n]!==l&&Ao(t,n,l)}else for(var r in a)a.hasOwnProperty(r)&&Ao(t,r,a[r])}function zi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rn(t){return dh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Oi=null;function Hi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var os=null,ds=null;function Do(t){var a=ss(t);if(a&&(t=a.stateNode)){var s=t[rt]||null;e:switch(t=a.stateNode,a.type){case"input":if(Di(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+wt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var n=l[rt]||null;if(!n)throw Error(o(90));Di(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&Co(l)}break e;case"textarea":Eo(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&rs(t,!!s.multiple,a,!1)}}}var Li=!1;function Ro(t,a,s){if(Li)return t(a,s);Li=!0;try{var l=t(a);return l}finally{if(Li=!1,(os!==null||ds!==null)&&(Vn(),os&&(a=os,t=ds,ds=os=null,Do(a),t)))for(a=0;a<t.length;a++)Do(t[a])}}function Fs(t,a){var s=t.stateNode;if(s===null)return null;var l=s[rt]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(o(231,a,typeof s));return s}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bi=!1;if(Zt)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Bi=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Bi=!1}var ma=null,qi=null,cn=null;function zo(){if(cn)return cn;var t,a=qi,s=a.length,l,n="value"in ma?ma.value:ma.textContent,r=n.length;for(t=0;t<s&&a[t]===n[t];t++);var h=s-t;for(l=1;l<=h&&a[s-l]===n[r-l];l++);return cn=n.slice(t,1<l?1-l:void 0)}function on(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function dn(){return!0}function Oo(){return!1}function ct(t){function a(s,l,n,r,h){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=h,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(s=t[S],this[S]=s?s(r):r[S]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?dn:Oo,this.isPropagationStopped=Oo,this}return C(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=dn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=dn)},persist:function(){},isPersistent:dn}),a}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=ct(La),Ws=C({},La,{view:0,detail:0}),uh=ct(Ws),Ui,$i,Is,mn=C({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Is&&(Is&&t.type==="mousemove"?(Ui=t.screenX-Is.screenX,$i=t.screenY-Is.screenY):$i=Ui=0,Is=t),Ui)},movementY:function(t){return"movementY"in t?t.movementY:$i}}),Ho=ct(mn),mh=C({},mn,{dataTransfer:0}),xh=ct(mh),hh=C({},Ws,{relatedTarget:0}),Gi=ct(hh),fh=C({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),ph=ct(fh),gh=C({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bh=ct(gh),yh=C({},La,{data:0}),Lo=ct(yh),vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wh(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Nh[t])?!!a[t]:!1}function Yi(){return wh}var kh=C({},Ws,{key:function(t){if(t.key){var a=vh[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=on(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yi,charCode:function(t){return t.type==="keypress"?on(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?on(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sh=ct(kh),Ch=C({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bo=ct(Ch),Mh=C({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yi}),Eh=ct(Mh),_h=C({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ah=ct(_h),Th=C({},mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dh=ct(Th),Rh=C({},La,{newState:0,oldState:0}),zh=ct(Rh),Oh=[9,13,27,32],Qi=Zt&&"CompositionEvent"in window,el=null;Zt&&"documentMode"in document&&(el=document.documentMode);var Hh=Zt&&"TextEvent"in window&&!el,qo=Zt&&(!Qi||el&&8<el&&11>=el),Uo=" ",$o=!1;function Go(t,a){switch(t){case"keyup":return Oh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var us=!1;function Lh(t,a){switch(t){case"compositionend":return Yo(a);case"keypress":return a.which!==32?null:($o=!0,Uo);case"textInput":return t=a.data,t===Uo&&$o?null:t;default:return null}}function Bh(t,a){if(us)return t==="compositionend"||!Qi&&Go(t,a)?(t=zo(),cn=qi=ma=null,us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return qo&&a.locale!=="ko"?null:a.data;default:return null}}var qh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!qh[t.type]:a==="textarea"}function Xo(t,a,s,l){os?ds?ds.push(l):ds=[l]:os=l,a=Wn(a,"onChange"),0<a.length&&(s=new un("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var tl=null,al=null;function Uh(t){Sm(t,0)}function xn(t){var a=Js(t);if(Co(a))return t}function Vo(t,a){if(t==="change")return a}var Zo=!1;if(Zt){var Xi;if(Zt){var Vi="oninput"in document;if(!Vi){var Ko=document.createElement("div");Ko.setAttribute("oninput","return;"),Vi=typeof Ko.oninput=="function"}Xi=Vi}else Xi=!1;Zo=Xi&&(!document.documentMode||9<document.documentMode)}function Jo(){tl&&(tl.detachEvent("onpropertychange",Fo),al=tl=null)}function Fo(t){if(t.propertyName==="value"&&xn(al)){var a=[];Xo(a,al,t,Hi(t)),Ro(Uh,a)}}function $h(t,a,s){t==="focusin"?(Jo(),tl=a,al=s,tl.attachEvent("onpropertychange",Fo)):t==="focusout"&&Jo()}function Gh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xn(al)}function Yh(t,a){if(t==="click")return xn(a)}function Qh(t,a){if(t==="input"||t==="change")return xn(a)}function Xh(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ft=typeof Object.is=="function"?Object.is:Xh;function sl(t,a){if(ft(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!mt.call(a,n)||!ft(t[n],a[n]))return!1}return!0}function Po(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wo(t,a){var s=Po(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Po(s)}}function Io(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Io(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function ed(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=nn(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=nn(t.document)}return a}function Zi(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Vh=Zt&&"documentMode"in document&&11>=document.documentMode,ms=null,Ki=null,ll=null,Ji=!1;function td(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ji||ms==null||ms!==nn(l)||(l=ms,"selectionStart"in l&&Zi(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&sl(ll,l)||(ll=l,l=Wn(Ki,"onSelect"),0<l.length&&(a=new un("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=ms)))}function Ba(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var xs={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionrun:Ba("Transition","TransitionRun"),transitionstart:Ba("Transition","TransitionStart"),transitioncancel:Ba("Transition","TransitionCancel"),transitionend:Ba("Transition","TransitionEnd")},Fi={},ad={};Zt&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function qa(t){if(Fi[t])return Fi[t];if(!xs[t])return t;var a=xs[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in ad)return Fi[t]=a[s];return t}var sd=qa("animationend"),ld=qa("animationiteration"),nd=qa("animationstart"),Zh=qa("transitionrun"),Kh=qa("transitionstart"),Jh=qa("transitioncancel"),id=qa("transitionend"),rd=new Map,Pi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pi.push("scrollEnd");function Rt(t,a){rd.set(t,a),Ha(a,[t])}var cd=new WeakMap;function kt(t,a){if(typeof t=="object"&&t!==null){var s=cd.get(t);return s!==void 0?s:(a={value:t,source:a,stack:ko(a)},cd.set(t,a),a)}return{value:t,source:a,stack:ko(a)}}var St=[],hs=0,Wi=0;function hn(){for(var t=hs,a=Wi=hs=0;a<t;){var s=St[a];St[a++]=null;var l=St[a];St[a++]=null;var n=St[a];St[a++]=null;var r=St[a];if(St[a++]=null,l!==null&&n!==null){var h=l.pending;h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n}r!==0&&od(s,n,r)}}function fn(t,a,s,l){St[hs++]=t,St[hs++]=a,St[hs++]=s,St[hs++]=l,Wi|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ii(t,a,s,l){return fn(t,a,s,l),pn(t)}function fs(t,a){return fn(t,null,null,a),pn(t)}function od(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var n=!1,r=t.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(n=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,n&&a!==null&&(n=31-ht(s),t=r.hiddenUpdates,l=t[n],l===null?t[n]=[a]:l.push(a),a.lane=s|536870912),r):null}function pn(t){if(50<_l)throw _l=0,nc=null,Error(o(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ps={};function Fh(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(t,a,s,l){return new Fh(t,a,s,l)}function er(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kt(t,a){var s=t.alternate;return s===null?(s=pt(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function dd(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function gn(t,a,s,l,n,r){var h=0;if(l=t,typeof t=="function")er(t)&&(h=1);else if(typeof t=="string")h=If(t,s,se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case le:return t=pt(31,s,a,n),t.elementType=le,t.lanes=r,t;case M:return Ua(s.children,n,r,a);case D:h=8,n|=24;break;case v:return t=pt(12,s,a,n|2),t.elementType=v,t.lanes=r,t;case k:return t=pt(13,s,a,n),t.elementType=k,t.lanes=r,t;case R:return t=pt(19,s,a,n),t.elementType=R,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N:case _:h=10;break e;case w:h=9;break e;case E:h=11;break e;case X:h=14;break e;case q:h=16,l=null;break e}h=29,s=Error(o(130,t===null?"null":typeof t,"")),l=null}return a=pt(h,s,a,n),a.elementType=t,a.type=l,a.lanes=r,a}function Ua(t,a,s,l){return t=pt(7,t,l,a),t.lanes=s,t}function tr(t,a,s){return t=pt(6,t,null,a),t.lanes=s,t}function ar(t,a,s){return a=pt(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var gs=[],bs=0,bn=null,yn=0,Ct=[],Mt=0,$a=null,Jt=1,Ft="";function Ga(t,a){gs[bs++]=yn,gs[bs++]=bn,bn=t,yn=a}function ud(t,a,s){Ct[Mt++]=Jt,Ct[Mt++]=Ft,Ct[Mt++]=$a,$a=t;var l=Jt;t=Ft;var n=32-ht(l)-1;l&=~(1<<n),s+=1;var r=32-ht(a)+n;if(30<r){var h=n-n%5;r=(l&(1<<h)-1).toString(32),l>>=h,n-=h,Jt=1<<32-ht(a)+n|s<<n|l,Ft=r+t}else Jt=1<<r|s<<n|l,Ft=t}function sr(t){t.return!==null&&(Ga(t,1),ud(t,1,0))}function lr(t){for(;t===bn;)bn=gs[--bs],gs[bs]=null,yn=gs[--bs],gs[bs]=null;for(;t===$a;)$a=Ct[--Mt],Ct[Mt]=null,Ft=Ct[--Mt],Ct[Mt]=null,Jt=Ct[--Mt],Ct[Mt]=null}var it=null,Be=null,Se=!1,Ya=null,Bt=!1,nr=Error(o(519));function Qa(t){var a=Error(o(418,""));throw rl(kt(a,t)),nr}function md(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[st]=t,a[rt]=l,s){case"dialog":je("cancel",a),je("close",a);break;case"iframe":case"object":case"embed":je("load",a);break;case"video":case"audio":for(s=0;s<Tl.length;s++)je(Tl[s],a);break;case"source":je("error",a);break;case"img":case"image":case"link":je("error",a),je("load",a);break;case"details":je("toggle",a);break;case"input":je("invalid",a),Mo(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ln(a);break;case"select":je("invalid",a);break;case"textarea":je("invalid",a),_o(a,l.value,l.defaultValue,l.children),ln(a)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||_m(a.textContent,s)?(l.popover!=null&&(je("beforetoggle",a),je("toggle",a)),l.onScroll!=null&&je("scroll",a),l.onScrollEnd!=null&&je("scrollend",a),l.onClick!=null&&(a.onclick=In),a=!0):a=!1,a||Qa(t)}function xd(t){for(it=t.return;it;)switch(it.tag){case 5:case 13:Bt=!1;return;case 27:case 3:Bt=!0;return;default:it=it.return}}function nl(t){if(t!==it)return!1;if(!Se)return xd(t),Se=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||jc(t.type,t.memoizedProps)),s=!s),s&&Be&&Qa(t),xd(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(a===0){Be=Ot(t.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;t=t.nextSibling}Be=null}}else a===27?(a=Be,Ea(t.type)?(t=Sc,Sc=null,Be=t):Be=a):Be=it?Ot(t.stateNode.nextSibling):null;return!0}function il(){Be=it=null,Se=!1}function hd(){var t=Ya;return t!==null&&(ut===null?ut=t:ut.push.apply(ut,t),Ya=null),t}function rl(t){Ya===null?Ya=[t]:Ya.push(t)}var ir=Q(null),Xa=null,Pt=null;function xa(t,a,s){$(ir,a._currentValue),a._currentValue=s}function Wt(t){t._currentValue=ir.current,J(ir)}function rr(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function cr(t,a,s,l){var n=t.child;for(n!==null&&(n.return=t);n!==null;){var r=n.dependencies;if(r!==null){var h=n.child;r=r.firstContext;e:for(;r!==null;){var S=r;r=n;for(var L=0;L<a.length;L++)if(S.context===a[L]){r.lanes|=s,S=r.alternate,S!==null&&(S.lanes|=s),rr(r.return,s,t),l||(h=null);break e}r=S.next}}else if(n.tag===18){if(h=n.return,h===null)throw Error(o(341));h.lanes|=s,r=h.alternate,r!==null&&(r.lanes|=s),rr(h,s,t),h=null}else h=n.child;if(h!==null)h.return=n;else for(h=n;h!==null;){if(h===t){h=null;break}if(n=h.sibling,n!==null){n.return=h.return,h=n;break}h=h.return}n=h}}function cl(t,a,s,l){t=null;for(var n=a,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var h=n.alternate;if(h===null)throw Error(o(387));if(h=h.memoizedProps,h!==null){var S=n.type;ft(n.pendingProps.value,h.value)||(t!==null?t.push(S):t=[S])}}else if(n===we.current){if(h=n.alternate,h===null)throw Error(o(387));h.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(t!==null?t.push(Ll):t=[Ll])}n=n.return}t!==null&&cr(a,t,s,l),a.flags|=262144}function vn(t){for(t=t.firstContext;t!==null;){if(!ft(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Va(t){Xa=t,Pt=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function lt(t){return fd(Xa,t)}function jn(t,a){return Xa===null&&Va(t),fd(t,a)}function fd(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Pt===null){if(t===null)throw Error(o(308));Pt=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Pt=Pt.next=a;return s}var Ph=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},Wh=c.unstable_scheduleCallback,Ih=c.unstable_NormalPriority,Ve={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function or(){return{controller:new Ph,data:new Map,refCount:0}}function ol(t){t.refCount--,t.refCount===0&&Wh(Ih,function(){t.controller.abort()})}var dl=null,dr=0,ys=0,vs=null;function ef(t,a){if(dl===null){var s=dl=[];dr=0,ys=mc(),vs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return dr++,a.then(pd,pd),a}function pd(){if(--dr===0&&dl!==null){vs!==null&&(vs.status="fulfilled");var t=dl;dl=null,ys=0,vs=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function tf(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var n=0;n<s.length;n++)(0,s[n])(a)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var gd=f.S;f.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&ef(t,a),gd!==null&&gd(t,a)};var Za=Q(null);function ur(){var t=Za.current;return t!==null?t:Re.pooledCache}function Nn(t,a){a===null?$(Za,Za.current):$(Za,a.pool)}function bd(){var t=ur();return t===null?null:{parent:Ve._currentValue,pool:t}}var ul=Error(o(460)),yd=Error(o(474)),wn=Error(o(542)),mr={then:function(){}};function vd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function kn(){}function jd(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(kn,kn),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,wd(t),t;default:if(typeof a.status=="string")a.then(kn,kn);else{if(t=Re,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var n=a;n.status="fulfilled",n.value=l}},function(l){if(a.status==="pending"){var n=a;n.status="rejected",n.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,wd(t),t}throw ml=a,ul}}var ml=null;function Nd(){if(ml===null)throw Error(o(459));var t=ml;return ml=null,t}function wd(t){if(t===ul||t===wn)throw Error(o(483))}var ha=!1;function xr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hr(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pa(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ce&2)!==0){var n=l.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),l.pending=a,a=pn(t),od(t,null,s),a}return fn(t,l,a,s),pn(t)}function xl(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,po(t,s)}}function fr(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var h={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?n=r=h:r=r.next=h,s=s.next}while(s!==null);r===null?n=r=a:r=r.next=a}else n=r=a;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var pr=!1;function hl(){if(pr){var t=vs;if(t!==null)throw t}}function fl(t,a,s,l){pr=!1;var n=t.updateQueue;ha=!1;var r=n.firstBaseUpdate,h=n.lastBaseUpdate,S=n.shared.pending;if(S!==null){n.shared.pending=null;var L=S,K=L.next;L.next=null,h===null?r=K:h.next=K,h=L;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,S=ee.lastBaseUpdate,S!==h&&(S===null?ee.firstBaseUpdate=K:S.next=K,ee.lastBaseUpdate=L))}if(r!==null){var ae=n.baseState;h=0,ee=K=L=null,S=r;do{var P=S.lane&-536870913,W=P!==S.lane;if(W?(Ne&P)===P:(l&P)===P){P!==0&&P===ys&&(pr=!0),ee!==null&&(ee=ee.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var fe=t,me=S;P=a;var Te=s;switch(me.tag){case 1:if(fe=me.payload,typeof fe=="function"){ae=fe.call(Te,ae,P);break e}ae=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,P=typeof fe=="function"?fe.call(Te,ae,P):fe,P==null)break e;ae=C({},ae,P);break e;case 2:ha=!0}}P=S.callback,P!==null&&(t.flags|=64,W&&(t.flags|=8192),W=n.callbacks,W===null?n.callbacks=[P]:W.push(P))}else W={lane:P,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ee===null?(K=ee=W,L=ae):ee=ee.next=W,h|=P;if(S=S.next,S===null){if(S=n.shared.pending,S===null)break;W=S,S=W.next,W.next=null,n.lastBaseUpdate=W,n.shared.pending=null}}while(!0);ee===null&&(L=ae),n.baseState=L,n.firstBaseUpdate=K,n.lastBaseUpdate=ee,r===null&&(n.shared.lanes=0),ka|=h,t.lanes=h,t.memoizedState=ae}}function kd(t,a){if(typeof t!="function")throw Error(o(191,t));t.call(a)}function Sd(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)kd(s[t],a)}var js=Q(null),Sn=Q(0);function Cd(t,a){t=na,$(Sn,t),$(js,a),na=t|a.baseLanes}function gr(){$(Sn,na),$(js,js.current)}function br(){na=Sn.current,J(js),J(Sn)}var ga=0,be=null,_e=null,Qe=null,Cn=!1,Ns=!1,Ka=!1,Mn=0,pl=0,ws=null,af=0;function Ue(){throw Error(o(321))}function yr(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!ft(t[s],a[s]))return!1;return!0}function vr(t,a,s,l,n,r){return ga=r,be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,f.H=t===null||t.memoizedState===null?ou:du,Ka=!1,r=s(l,n),Ka=!1,Ns&&(r=Ed(a,s,l,n)),Md(t),r}function Md(t){f.H=Rn;var a=_e!==null&&_e.next!==null;if(ga=0,Qe=_e=be=null,Cn=!1,pl=0,ws=null,a)throw Error(o(300));t===null||Je||(t=t.dependencies,t!==null&&vn(t)&&(Je=!0))}function Ed(t,a,s,l){be=t;var n=0;do{if(Ns&&(ws=null),pl=0,Ns=!1,25<=n)throw Error(o(301));if(n+=1,Qe=_e=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}f.H=df,r=a(s,l)}while(Ns);return r}function sf(){var t=f.H,a=t.useState()[0];return a=typeof a.then=="function"?gl(a):a,t=t.useState()[0],(_e!==null?_e.memoizedState:null)!==t&&(be.flags|=1024),a}function jr(){var t=Mn!==0;return Mn=0,t}function Nr(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function wr(t){if(Cn){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Cn=!1}ga=0,Qe=_e=be=null,Ns=!1,pl=Mn=0,ws=null}function ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Xe(){if(_e===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var a=Qe===null?be.memoizedState:Qe.next;if(a!==null)Qe=a,_e=t;else{if(t===null)throw be.alternate===null?Error(o(467)):Error(o(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function kr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var a=pl;return pl+=1,ws===null&&(ws=[]),t=jd(ws,t,a),a=be,(Qe===null?a.memoizedState:Qe.next)===null&&(a=a.alternate,f.H=a===null||a.memoizedState===null?ou:du),t}function En(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===_)return lt(t)}throw Error(o(438,String(t)))}function Sr(t){var a=null,s=be.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(n){return n.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=kr(),be.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=F;return a.index++,s}function It(t,a){return typeof a=="function"?a(t):a}function _n(t){var a=Xe();return Cr(a,_e,t)}function Cr(t,a,s){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=s;var n=t.baseQueue,r=l.pending;if(r!==null){if(n!==null){var h=n.next;n.next=r.next,r.next=h}a.baseQueue=n=r,l.pending=null}if(r=t.baseState,n===null)t.memoizedState=r;else{a=n.next;var S=h=null,L=null,K=a,ee=!1;do{var ae=K.lane&-536870913;if(ae!==K.lane?(Ne&ae)===ae:(ga&ae)===ae){var P=K.revertLane;if(P===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ae===ys&&(ee=!0);else if((ga&P)===P){K=K.next,P===ys&&(ee=!0);continue}else ae={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(S=L=ae,h=r):L=L.next=ae,be.lanes|=P,ka|=P;ae=K.action,Ka&&s(r,ae),r=K.hasEagerState?K.eagerState:s(r,ae)}else P={lane:ae,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(S=L=P,h=r):L=L.next=P,be.lanes|=ae,ka|=ae;K=K.next}while(K!==null&&K!==a);if(L===null?h=r:L.next=S,!ft(r,t.memoizedState)&&(Je=!0,ee&&(s=vs,s!==null)))throw s;t.memoizedState=r,t.baseState=h,t.baseQueue=L,l.lastRenderedState=r}return n===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Mr(t){var a=Xe(),s=a.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=t;var l=s.dispatch,n=s.pending,r=a.memoizedState;if(n!==null){s.pending=null;var h=n=n.next;do r=t(r,h.action),h=h.next;while(h!==n);ft(r,a.memoizedState)||(Je=!0),a.memoizedState=r,a.baseQueue===null&&(a.baseState=r),s.lastRenderedState=r}return[r,l]}function _d(t,a,s){var l=be,n=Xe(),r=Se;if(r){if(s===void 0)throw Error(o(407));s=s()}else s=a();var h=!ft((_e||n).memoizedState,s);h&&(n.memoizedState=s,Je=!0),n=n.queue;var S=Dd.bind(null,l,n,t);if(bl(2048,8,S,[t]),n.getSnapshot!==a||h||Qe!==null&&Qe.memoizedState.tag&1){if(l.flags|=2048,ks(9,An(),Td.bind(null,l,n,s,a),null),Re===null)throw Error(o(349));r||(ga&124)!==0||Ad(l,a,s)}return s}function Ad(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=be.updateQueue,a===null?(a=kr(),be.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Td(t,a,s,l){a.value=s,a.getSnapshot=l,Rd(a)&&zd(t)}function Dd(t,a,s){return s(function(){Rd(a)&&zd(t)})}function Rd(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!ft(t,s)}catch{return!0}}function zd(t){var a=fs(t,2);a!==null&&jt(a,t,2)}function Er(t){var a=ot();if(typeof t=="function"){var s=t;if(t=s(),Ka){da(!0);try{s()}finally{da(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:t},a}function Od(t,a,s,l){return t.baseState=s,Cr(t,_e,typeof l=="function"?l:It)}function lf(t,a,s,l,n){if(Dn(t))throw Error(o(485));if(t=a.action,t!==null){var r={payload:n,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){r.listeners.push(h)}};f.T!==null?s(!0):r.isTransition=!1,l(r),s=a.pending,s===null?(r.next=a.pending=r,Hd(a,r)):(r.next=s.next,a.pending=s.next=r)}}function Hd(t,a){var s=a.action,l=a.payload,n=t.state;if(a.isTransition){var r=f.T,h={};f.T=h;try{var S=s(n,l),L=f.S;L!==null&&L(h,S),Ld(t,a,S)}catch(K){_r(t,a,K)}finally{f.T=r}}else try{r=s(n,l),Ld(t,a,r)}catch(K){_r(t,a,K)}}function Ld(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Bd(t,a,l)},function(l){return _r(t,a,l)}):Bd(t,a,s)}function Bd(t,a,s){a.status="fulfilled",a.value=s,qd(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,Hd(t,s)))}function _r(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,qd(a),a=a.next;while(a!==l)}t.action=null}function qd(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Ud(t,a){return a}function $d(t,a){if(Se){var s=Re.formState;if(s!==null){e:{var l=be;if(Se){if(Be){t:{for(var n=Be,r=Bt;n.nodeType!==8;){if(!r){n=null;break t}if(n=Ot(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){Be=Ot(n.nextSibling),l=n.data==="F!";break e}}Qa(l)}l=!1}l&&(a=s[0])}}return s=ot(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ud,lastRenderedState:a},s.queue=l,s=iu.bind(null,be,l),l.dispatch=s,l=Er(!1),r=zr.bind(null,be,!1,l.queue),l=ot(),n={state:a,dispatch:null,action:t,pending:null},l.queue=n,s=lf.bind(null,be,n,r,s),n.dispatch=s,l.memoizedState=t,[a,s,!1]}function Gd(t){var a=Xe();return Yd(a,_e,t)}function Yd(t,a,s){if(a=Cr(t,a,Ud)[0],t=_n(It)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=gl(a)}catch(h){throw h===ul?wn:h}else l=a;a=Xe();var n=a.queue,r=n.dispatch;return s!==a.memoizedState&&(be.flags|=2048,ks(9,An(),nf.bind(null,n,s),null)),[l,r,t]}function nf(t,a){t.action=a}function Qd(t){var a=Xe(),s=_e;if(s!==null)return Yd(a,s,t);Xe(),a=a.memoizedState,s=Xe();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function ks(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=be.updateQueue,a===null&&(a=kr(),be.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function An(){return{destroy:void 0,resource:void 0}}function Xd(){return Xe().memoizedState}function Tn(t,a,s,l){var n=ot();l=l===void 0?null:l,be.flags|=t,n.memoizedState=ks(1|a,An(),s,l)}function bl(t,a,s,l){var n=Xe();l=l===void 0?null:l;var r=n.memoizedState.inst;_e!==null&&l!==null&&yr(l,_e.memoizedState.deps)?n.memoizedState=ks(a,r,s,l):(be.flags|=t,n.memoizedState=ks(1|a,r,s,l))}function Vd(t,a){Tn(8390656,8,t,a)}function Zd(t,a){bl(2048,8,t,a)}function Kd(t,a){return bl(4,2,t,a)}function Jd(t,a){return bl(4,4,t,a)}function Fd(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Pd(t,a,s){s=s!=null?s.concat([t]):null,bl(4,4,Fd.bind(null,a,t),s)}function Ar(){}function Wd(t,a){var s=Xe();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&yr(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function Id(t,a){var s=Xe();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&yr(a,l[1]))return l[0];if(l=t(),Ka){da(!0);try{t()}finally{da(!1)}}return s.memoizedState=[l,a],l}function Tr(t,a,s){return s===void 0||(ga&1073741824)!==0?t.memoizedState=a:(t.memoizedState=s,t=am(),be.lanes|=t,ka|=t,s)}function eu(t,a,s,l){return ft(s,a)?s:js.current!==null?(t=Tr(t,s,l),ft(t,a)||(Je=!0),t):(ga&42)===0?(Je=!0,t.memoizedState=s):(t=am(),be.lanes|=t,ka|=t,a)}function tu(t,a,s,l,n){var r=z.p;z.p=r!==0&&8>r?r:8;var h=f.T,S={};f.T=S,zr(t,!1,a,s);try{var L=n(),K=f.S;if(K!==null&&K(S,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ee=tf(L,l);yl(t,a,ee,vt(t))}else yl(t,a,l,vt(t))}catch(ae){yl(t,a,{then:function(){},status:"rejected",reason:ae},vt())}finally{z.p=r,f.T=h}}function rf(){}function Dr(t,a,s,l){if(t.tag!==5)throw Error(o(476));var n=au(t).queue;tu(t,n,a,V,s===null?rf:function(){return su(t),s(l)})}function au(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:V},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function su(t){var a=au(t).next.queue;yl(t,a,{},vt())}function Rr(){return lt(Ll)}function lu(){return Xe().memoizedState}function nu(){return Xe().memoizedState}function cf(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=vt();t=fa(s);var l=pa(a,t,s);l!==null&&(jt(l,a,s),xl(l,a,s)),a={cache:or()},t.payload=a;return}a=a.return}}function of(t,a,s){var l=vt();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Dn(t)?ru(a,s):(s=Ii(t,a,s,l),s!==null&&(jt(s,t,l),cu(s,a,l)))}function iu(t,a,s){var l=vt();yl(t,a,s,l)}function yl(t,a,s,l){var n={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Dn(t))ru(a,n);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=a.lastRenderedReducer,r!==null))try{var h=a.lastRenderedState,S=r(h,s);if(n.hasEagerState=!0,n.eagerState=S,ft(S,h))return fn(t,a,n,0),Re===null&&hn(),!1}catch{}finally{}if(s=Ii(t,a,n,l),s!==null)return jt(s,t,l),cu(s,a,l),!0}return!1}function zr(t,a,s,l){if(l={lane:2,revertLane:mc(),action:l,hasEagerState:!1,eagerState:null,next:null},Dn(t)){if(a)throw Error(o(479))}else a=Ii(t,s,l,2),a!==null&&jt(a,t,2)}function Dn(t){var a=t.alternate;return t===be||a!==null&&a===be}function ru(t,a){Ns=Cn=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function cu(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,po(t,s)}}var Rn={readContext:lt,use:En,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue},ou={readContext:lt,use:En,useCallback:function(t,a){return ot().memoizedState=[t,a===void 0?null:a],t},useContext:lt,useEffect:Vd,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,Tn(4194308,4,Fd.bind(null,a,t),s)},useLayoutEffect:function(t,a){return Tn(4194308,4,t,a)},useInsertionEffect:function(t,a){Tn(4,2,t,a)},useMemo:function(t,a){var s=ot();a=a===void 0?null:a;var l=t();if(Ka){da(!0);try{t()}finally{da(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=ot();if(s!==void 0){var n=s(a);if(Ka){da(!0);try{s(a)}finally{da(!1)}}}else n=a;return l.memoizedState=l.baseState=n,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=of.bind(null,be,t),[l.memoizedState,t]},useRef:function(t){var a=ot();return t={current:t},a.memoizedState=t},useState:function(t){t=Er(t);var a=t.queue,s=iu.bind(null,be,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Ar,useDeferredValue:function(t,a){var s=ot();return Tr(s,t,a)},useTransition:function(){var t=Er(!1);return t=tu.bind(null,be,t.queue,!0,!1),ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=be,n=ot();if(Se){if(s===void 0)throw Error(o(407));s=s()}else{if(s=a(),Re===null)throw Error(o(349));(Ne&124)!==0||Ad(l,a,s)}n.memoizedState=s;var r={value:s,getSnapshot:a};return n.queue=r,Vd(Dd.bind(null,l,r,t),[t]),l.flags|=2048,ks(9,An(),Td.bind(null,l,r,s,a),null),s},useId:function(){var t=ot(),a=Re.identifierPrefix;if(Se){var s=Ft,l=Jt;s=(l&~(1<<32-ht(l)-1)).toString(32)+s,a=""+a+"R"+s,s=Mn++,0<s&&(a+="H"+s.toString(32)),a+=""}else s=af++,a=""+a+"r"+s.toString(32)+"";return t.memoizedState=a},useHostTransitionStatus:Rr,useFormState:$d,useActionState:$d,useOptimistic:function(t){var a=ot();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=zr.bind(null,be,!0,s),s.dispatch=a,[t,a]},useMemoCache:Sr,useCacheRefresh:function(){return ot().memoizedState=cf.bind(null,be)}},du={readContext:lt,use:En,useCallback:Wd,useContext:lt,useEffect:Zd,useImperativeHandle:Pd,useInsertionEffect:Kd,useLayoutEffect:Jd,useMemo:Id,useReducer:_n,useRef:Xd,useState:function(){return _n(It)},useDebugValue:Ar,useDeferredValue:function(t,a){var s=Xe();return eu(s,_e.memoizedState,t,a)},useTransition:function(){var t=_n(It)[0],a=Xe().memoizedState;return[typeof t=="boolean"?t:gl(t),a]},useSyncExternalStore:_d,useId:lu,useHostTransitionStatus:Rr,useFormState:Gd,useActionState:Gd,useOptimistic:function(t,a){var s=Xe();return Od(s,_e,t,a)},useMemoCache:Sr,useCacheRefresh:nu},df={readContext:lt,use:En,useCallback:Wd,useContext:lt,useEffect:Zd,useImperativeHandle:Pd,useInsertionEffect:Kd,useLayoutEffect:Jd,useMemo:Id,useReducer:Mr,useRef:Xd,useState:function(){return Mr(It)},useDebugValue:Ar,useDeferredValue:function(t,a){var s=Xe();return _e===null?Tr(s,t,a):eu(s,_e.memoizedState,t,a)},useTransition:function(){var t=Mr(It)[0],a=Xe().memoizedState;return[typeof t=="boolean"?t:gl(t),a]},useSyncExternalStore:_d,useId:lu,useHostTransitionStatus:Rr,useFormState:Qd,useActionState:Qd,useOptimistic:function(t,a){var s=Xe();return _e!==null?Od(s,_e,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Sr,useCacheRefresh:nu},Ss=null,vl=0;function zn(t){var a=vl;return vl+=1,Ss===null&&(Ss=[]),jd(Ss,t,a)}function jl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function On(t,a){throw a.$$typeof===p?Error(o(525)):(t=Object.prototype.toString.call(a),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function uu(t){var a=t._init;return a(t._payload)}function mu(t){function a(Y,U){if(t){var Z=Y.deletions;Z===null?(Y.deletions=[U],Y.flags|=16):Z.push(U)}}function s(Y,U){if(!t)return null;for(;U!==null;)a(Y,U),U=U.sibling;return null}function l(Y){for(var U=new Map;Y!==null;)Y.key!==null?U.set(Y.key,Y):U.set(Y.index,Y),Y=Y.sibling;return U}function n(Y,U){return Y=Kt(Y,U),Y.index=0,Y.sibling=null,Y}function r(Y,U,Z){return Y.index=Z,t?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<U?(Y.flags|=67108866,U):Z):(Y.flags|=67108866,U)):(Y.flags|=1048576,U)}function h(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function S(Y,U,Z,te){return U===null||U.tag!==6?(U=tr(Z,Y.mode,te),U.return=Y,U):(U=n(U,Z),U.return=Y,U)}function L(Y,U,Z,te){var de=Z.type;return de===M?ee(Y,U,Z.props.children,te,Z.key):U!==null&&(U.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===q&&uu(de)===U.type)?(U=n(U,Z.props),jl(U,Z),U.return=Y,U):(U=gn(Z.type,Z.key,Z.props,null,Y.mode,te),jl(U,Z),U.return=Y,U)}function K(Y,U,Z,te){return U===null||U.tag!==4||U.stateNode.containerInfo!==Z.containerInfo||U.stateNode.implementation!==Z.implementation?(U=ar(Z,Y.mode,te),U.return=Y,U):(U=n(U,Z.children||[]),U.return=Y,U)}function ee(Y,U,Z,te,de){return U===null||U.tag!==7?(U=Ua(Z,Y.mode,te,de),U.return=Y,U):(U=n(U,Z),U.return=Y,U)}function ae(Y,U,Z){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=tr(""+U,Y.mode,Z),U.return=Y,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return Z=gn(U.type,U.key,U.props,null,Y.mode,Z),jl(Z,U),Z.return=Y,Z;case T:return U=ar(U,Y.mode,Z),U.return=Y,U;case q:var te=U._init;return U=te(U._payload),ae(Y,U,Z)}if(H(U)||I(U))return U=Ua(U,Y.mode,Z,null),U.return=Y,U;if(typeof U.then=="function")return ae(Y,zn(U),Z);if(U.$$typeof===_)return ae(Y,jn(Y,U),Z);On(Y,U)}return null}function P(Y,U,Z,te){var de=U!==null?U.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return de!==null?null:S(Y,U,""+Z,te);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return Z.key===de?L(Y,U,Z,te):null;case T:return Z.key===de?K(Y,U,Z,te):null;case q:return de=Z._init,Z=de(Z._payload),P(Y,U,Z,te)}if(H(Z)||I(Z))return de!==null?null:ee(Y,U,Z,te,null);if(typeof Z.then=="function")return P(Y,U,zn(Z),te);if(Z.$$typeof===_)return P(Y,U,jn(Y,Z),te);On(Y,Z)}return null}function W(Y,U,Z,te,de){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Y=Y.get(Z)||null,S(U,Y,""+te,de);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case A:return Y=Y.get(te.key===null?Z:te.key)||null,L(U,Y,te,de);case T:return Y=Y.get(te.key===null?Z:te.key)||null,K(U,Y,te,de);case q:var ye=te._init;return te=ye(te._payload),W(Y,U,Z,te,de)}if(H(te)||I(te))return Y=Y.get(Z)||null,ee(U,Y,te,de,null);if(typeof te.then=="function")return W(Y,U,Z,zn(te),de);if(te.$$typeof===_)return W(Y,U,Z,jn(U,te),de);On(U,te)}return null}function fe(Y,U,Z,te){for(var de=null,ye=null,ue=U,xe=U=0,Pe=null;ue!==null&&xe<Z.length;xe++){ue.index>xe?(Pe=ue,ue=null):Pe=ue.sibling;var ke=P(Y,ue,Z[xe],te);if(ke===null){ue===null&&(ue=Pe);break}t&&ue&&ke.alternate===null&&a(Y,ue),U=r(ke,U,xe),ye===null?de=ke:ye.sibling=ke,ye=ke,ue=Pe}if(xe===Z.length)return s(Y,ue),Se&&Ga(Y,xe),de;if(ue===null){for(;xe<Z.length;xe++)ue=ae(Y,Z[xe],te),ue!==null&&(U=r(ue,U,xe),ye===null?de=ue:ye.sibling=ue,ye=ue);return Se&&Ga(Y,xe),de}for(ue=l(ue);xe<Z.length;xe++)Pe=W(ue,Y,xe,Z[xe],te),Pe!==null&&(t&&Pe.alternate!==null&&ue.delete(Pe.key===null?xe:Pe.key),U=r(Pe,U,xe),ye===null?de=Pe:ye.sibling=Pe,ye=Pe);return t&&ue.forEach(function(Ra){return a(Y,Ra)}),Se&&Ga(Y,xe),de}function me(Y,U,Z,te){if(Z==null)throw Error(o(151));for(var de=null,ye=null,ue=U,xe=U=0,Pe=null,ke=Z.next();ue!==null&&!ke.done;xe++,ke=Z.next()){ue.index>xe?(Pe=ue,ue=null):Pe=ue.sibling;var Ra=P(Y,ue,ke.value,te);if(Ra===null){ue===null&&(ue=Pe);break}t&&ue&&Ra.alternate===null&&a(Y,ue),U=r(Ra,U,xe),ye===null?de=Ra:ye.sibling=Ra,ye=Ra,ue=Pe}if(ke.done)return s(Y,ue),Se&&Ga(Y,xe),de;if(ue===null){for(;!ke.done;xe++,ke=Z.next())ke=ae(Y,ke.value,te),ke!==null&&(U=r(ke,U,xe),ye===null?de=ke:ye.sibling=ke,ye=ke);return Se&&Ga(Y,xe),de}for(ue=l(ue);!ke.done;xe++,ke=Z.next())ke=W(ue,Y,xe,ke.value,te),ke!==null&&(t&&ke.alternate!==null&&ue.delete(ke.key===null?xe:ke.key),U=r(ke,U,xe),ye===null?de=ke:ye.sibling=ke,ye=ke);return t&&ue.forEach(function(u0){return a(Y,u0)}),Se&&Ga(Y,xe),de}function Te(Y,U,Z,te){if(typeof Z=="object"&&Z!==null&&Z.type===M&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:e:{for(var de=Z.key;U!==null;){if(U.key===de){if(de=Z.type,de===M){if(U.tag===7){s(Y,U.sibling),te=n(U,Z.props.children),te.return=Y,Y=te;break e}}else if(U.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===q&&uu(de)===U.type){s(Y,U.sibling),te=n(U,Z.props),jl(te,Z),te.return=Y,Y=te;break e}s(Y,U);break}else a(Y,U);U=U.sibling}Z.type===M?(te=Ua(Z.props.children,Y.mode,te,Z.key),te.return=Y,Y=te):(te=gn(Z.type,Z.key,Z.props,null,Y.mode,te),jl(te,Z),te.return=Y,Y=te)}return h(Y);case T:e:{for(de=Z.key;U!==null;){if(U.key===de)if(U.tag===4&&U.stateNode.containerInfo===Z.containerInfo&&U.stateNode.implementation===Z.implementation){s(Y,U.sibling),te=n(U,Z.children||[]),te.return=Y,Y=te;break e}else{s(Y,U);break}else a(Y,U);U=U.sibling}te=ar(Z,Y.mode,te),te.return=Y,Y=te}return h(Y);case q:return de=Z._init,Z=de(Z._payload),Te(Y,U,Z,te)}if(H(Z))return fe(Y,U,Z,te);if(I(Z)){if(de=I(Z),typeof de!="function")throw Error(o(150));return Z=de.call(Z),me(Y,U,Z,te)}if(typeof Z.then=="function")return Te(Y,U,zn(Z),te);if(Z.$$typeof===_)return Te(Y,U,jn(Y,Z),te);On(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,U!==null&&U.tag===6?(s(Y,U.sibling),te=n(U,Z),te.return=Y,Y=te):(s(Y,U),te=tr(Z,Y.mode,te),te.return=Y,Y=te),h(Y)):s(Y,U)}return function(Y,U,Z,te){try{vl=0;var de=Te(Y,U,Z,te);return Ss=null,de}catch(ue){if(ue===ul||ue===wn)throw ue;var ye=pt(29,ue,null,Y.mode);return ye.lanes=te,ye.return=Y,ye}finally{}}}var Cs=mu(!0),xu=mu(!1),Et=Q(null),qt=null;function ba(t){var a=t.alternate;$(Ze,Ze.current&1),$(Et,t),qt===null&&(a===null||js.current!==null||a.memoizedState!==null)&&(qt=t)}function hu(t){if(t.tag===22){if($(Ze,Ze.current),$(Et,t),qt===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(qt=t)}}else ya()}function ya(){$(Ze,Ze.current),$(Et,Et.current)}function ea(t){J(Et),qt===t&&(qt=null),J(Ze)}var Ze=Q(0);function Hn(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||kc(s)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Or(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:C({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Hr={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=vt(),n=fa(l);n.payload=a,s!=null&&(n.callback=s),a=pa(t,n,l),a!==null&&(jt(a,t,l),xl(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=vt(),n=fa(l);n.tag=1,n.payload=a,s!=null&&(n.callback=s),a=pa(t,n,l),a!==null&&(jt(a,t,l),xl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=vt(),l=fa(s);l.tag=2,a!=null&&(l.callback=a),a=pa(t,l,s),a!==null&&(jt(a,t,s),xl(a,t,s))}};function fu(t,a,s,l,n,r,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,r,h):a.prototype&&a.prototype.isPureReactComponent?!sl(s,l)||!sl(n,r):!0}function pu(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&Hr.enqueueReplaceState(a,a.state,null)}function Ja(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=C({},s));for(var n in t)s[n]===void 0&&(s[n]=t[n])}return s}var Ln=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function gu(t){Ln(t)}function bu(t){console.error(t)}function yu(t){Ln(t)}function Bn(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function vu(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Lr(t,a,s){return s=fa(s),s.tag=3,s.payload={element:null},s.callback=function(){Bn(t,a)},s}function ju(t){return t=fa(t),t.tag=3,t}function Nu(t,a,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;t.payload=function(){return n(r)},t.callback=function(){vu(a,s,l)}}var h=s.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(t.callback=function(){vu(a,s,l),typeof n!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function uf(t,a,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&cl(a,s,n,!0),s=Et.current,s!==null){switch(s.tag){case 13:return qt===null?rc():s.alternate===null&&qe===0&&(qe=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===mr?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),oc(t,l,n)),!1;case 22:return s.flags|=65536,l===mr?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),oc(t,l,n)),!1}throw Error(o(435,s.tag))}return oc(t,l,n),rc(),!1}if(Se)return a=Et.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=n,l!==nr&&(t=Error(o(422),{cause:l}),rl(kt(t,s)))):(l!==nr&&(a=Error(o(423),{cause:l}),rl(kt(a,s))),t=t.current.alternate,t.flags|=65536,n&=-n,t.lanes|=n,l=kt(l,s),n=Lr(t.stateNode,l,n),fr(t,n),qe!==4&&(qe=2)),!1;var r=Error(o(520),{cause:l});if(r=kt(r,s),El===null?El=[r]:El.push(r),qe!==4&&(qe=2),a===null)return!0;l=kt(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=n&-n,s.lanes|=t,t=Lr(s.stateNode,l,t),fr(s,t),!1;case 1:if(a=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Sa===null||!Sa.has(r))))return s.flags|=65536,n&=-n,s.lanes|=n,n=ju(n),Nu(n,t,s,l),fr(s,n),!1}s=s.return}while(s!==null);return!1}var wu=Error(o(461)),Je=!1;function We(t,a,s,l){a.child=t===null?xu(a,null,s,l):Cs(a,t.child,s,l)}function ku(t,a,s,l,n){s=s.render;var r=a.ref;if("ref"in l){var h={};for(var S in l)S!=="ref"&&(h[S]=l[S])}else h=l;return Va(a),l=vr(t,a,s,h,r,n),S=jr(),t!==null&&!Je?(Nr(t,a,n),ta(t,a,n)):(Se&&S&&sr(a),a.flags|=1,We(t,a,l,n),a.child)}function Su(t,a,s,l,n){if(t===null){var r=s.type;return typeof r=="function"&&!er(r)&&r.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=r,Cu(t,a,r,l,n)):(t=gn(s.type,null,l,a,a.mode,n),t.ref=a.ref,t.return=a,a.child=t)}if(r=t.child,!Xr(t,n)){var h=r.memoizedProps;if(s=s.compare,s=s!==null?s:sl,s(h,l)&&t.ref===a.ref)return ta(t,a,n)}return a.flags|=1,t=Kt(r,l),t.ref=a.ref,t.return=a,a.child=t}function Cu(t,a,s,l,n){if(t!==null){var r=t.memoizedProps;if(sl(r,l)&&t.ref===a.ref)if(Je=!1,a.pendingProps=l=r,Xr(t,n))(t.flags&131072)!==0&&(Je=!0);else return a.lanes=t.lanes,ta(t,a,n)}return Br(t,a,s,l,n)}function Mu(t,a,s){var l=a.pendingProps,n=l.children,r=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((a.flags&128)!==0){if(l=r!==null?r.baseLanes|s:s,t!==null){for(n=a.child=t.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;a.childLanes=r&~l}else a.childLanes=0,a.child=null;return Eu(t,a,l,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Nn(a,r!==null?r.cachePool:null),r!==null?Cd(a,r):gr(),hu(a);else return a.lanes=a.childLanes=536870912,Eu(t,a,r!==null?r.baseLanes|s:s,s)}else r!==null?(Nn(a,r.cachePool),Cd(a,r),ya(),a.memoizedState=null):(t!==null&&Nn(a,null),gr(),ya());return We(t,a,n,s),a.child}function Eu(t,a,s,l){var n=ur();return n=n===null?null:{parent:Ve._currentValue,pool:n},a.memoizedState={baseLanes:s,cachePool:n},t!==null&&Nn(a,null),gr(),hu(a),t!==null&&cl(t,a,l,!0),null}function qn(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function Br(t,a,s,l,n){return Va(a),s=vr(t,a,s,l,void 0,n),l=jr(),t!==null&&!Je?(Nr(t,a,n),ta(t,a,n)):(Se&&l&&sr(a),a.flags|=1,We(t,a,s,n),a.child)}function _u(t,a,s,l,n,r){return Va(a),a.updateQueue=null,s=Ed(a,l,s,n),Md(t),l=jr(),t!==null&&!Je?(Nr(t,a,r),ta(t,a,r)):(Se&&l&&sr(a),a.flags|=1,We(t,a,s,r),a.child)}function Au(t,a,s,l,n){if(Va(a),a.stateNode===null){var r=ps,h=s.contextType;typeof h=="object"&&h!==null&&(r=lt(h)),r=new s(l,r),a.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Hr,a.stateNode=r,r._reactInternals=a,r=a.stateNode,r.props=l,r.state=a.memoizedState,r.refs={},xr(a),h=s.contextType,r.context=typeof h=="object"&&h!==null?lt(h):ps,r.state=a.memoizedState,h=s.getDerivedStateFromProps,typeof h=="function"&&(Or(a,s,h,l),r.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(h=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),h!==r.state&&Hr.enqueueReplaceState(r,r.state,null),fl(a,l,r,n),hl(),r.state=a.memoizedState),typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){r=a.stateNode;var S=a.memoizedProps,L=Ja(s,S);r.props=L;var K=r.context,ee=s.contextType;h=ps,typeof ee=="object"&&ee!==null&&(h=lt(ee));var ae=s.getDerivedStateFromProps;ee=typeof ae=="function"||typeof r.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,ee||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(S||K!==h)&&pu(a,r,l,h),ha=!1;var P=a.memoizedState;r.state=P,fl(a,l,r,n),hl(),K=a.memoizedState,S||P!==K||ha?(typeof ae=="function"&&(Or(a,s,ae,l),K=a.memoizedState),(L=ha||fu(a,s,L,l,P,K,h))?(ee||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(a.flags|=4194308)):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=K),r.props=l,r.state=K,r.context=h,l=L):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{r=a.stateNode,hr(t,a),h=a.memoizedProps,ee=Ja(s,h),r.props=ee,ae=a.pendingProps,P=r.context,K=s.contextType,L=ps,typeof K=="object"&&K!==null&&(L=lt(K)),S=s.getDerivedStateFromProps,(K=typeof S=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(h!==ae||P!==L)&&pu(a,r,l,L),ha=!1,P=a.memoizedState,r.state=P,fl(a,l,r,n),hl();var W=a.memoizedState;h!==ae||P!==W||ha||t!==null&&t.dependencies!==null&&vn(t.dependencies)?(typeof S=="function"&&(Or(a,s,S,l),W=a.memoizedState),(ee=ha||fu(a,s,ee,l,P,W,L)||t!==null&&t.dependencies!==null&&vn(t.dependencies))?(K||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,W,L),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,W,L)),typeof r.componentDidUpdate=="function"&&(a.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof r.componentDidUpdate!="function"||h===t.memoizedProps&&P===t.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&P===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=W),r.props=l,r.state=W,r.context=L,l=ee):(typeof r.componentDidUpdate!="function"||h===t.memoizedProps&&P===t.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&P===t.memoizedState||(a.flags|=1024),l=!1)}return r=l,qn(t,a),l=(a.flags&128)!==0,r||l?(r=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),a.flags|=1,t!==null&&l?(a.child=Cs(a,t.child,null,n),a.child=Cs(a,null,s,n)):We(t,a,s,n),a.memoizedState=r.state,t=a.child):t=ta(t,a,n),t}function Tu(t,a,s,l){return il(),a.flags|=256,We(t,a,s,l),a.child}var qr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ur(t){return{baseLanes:t,cachePool:bd()}}function $r(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=_t),t}function Du(t,a,s){var l=a.pendingProps,n=!1,r=(a.flags&128)!==0,h;if((h=r)||(h=t!==null&&t.memoizedState===null?!1:(Ze.current&2)!==0),h&&(n=!0,a.flags&=-129),h=(a.flags&32)!==0,a.flags&=-33,t===null){if(Se){if(n?ba(a):ya(),Se){var S=Be,L;if(L=S){e:{for(L=S,S=Bt;L.nodeType!==8;){if(!S){S=null;break e}if(L=Ot(L.nextSibling),L===null){S=null;break e}}S=L}S!==null?(a.memoizedState={dehydrated:S,treeContext:$a!==null?{id:Jt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},L=pt(18,null,null,0),L.stateNode=S,L.return=a,a.child=L,it=a,Be=null,L=!0):L=!1}L||Qa(a)}if(S=a.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return kc(S)?a.lanes=32:a.lanes=536870912,null;ea(a)}return S=l.children,l=l.fallback,n?(ya(),n=a.mode,S=Un({mode:"hidden",children:S},n),l=Ua(l,n,s,null),S.return=a,l.return=a,S.sibling=l,a.child=S,n=a.child,n.memoizedState=Ur(s),n.childLanes=$r(t,h,s),a.memoizedState=qr,l):(ba(a),Gr(a,S))}if(L=t.memoizedState,L!==null&&(S=L.dehydrated,S!==null)){if(r)a.flags&256?(ba(a),a.flags&=-257,a=Yr(t,a,s)):a.memoizedState!==null?(ya(),a.child=t.child,a.flags|=128,a=null):(ya(),n=l.fallback,S=a.mode,l=Un({mode:"visible",children:l.children},S),n=Ua(n,S,s,null),n.flags|=2,l.return=a,n.return=a,l.sibling=n,a.child=l,Cs(a,t.child,null,s),l=a.child,l.memoizedState=Ur(s),l.childLanes=$r(t,h,s),a.memoizedState=qr,a=n);else if(ba(a),kc(S)){if(h=S.nextSibling&&S.nextSibling.dataset,h)var K=h.dgst;h=K,l=Error(o(419)),l.stack="",l.digest=h,rl({value:l,source:null,stack:null}),a=Yr(t,a,s)}else if(Je||cl(t,a,s,!1),h=(s&t.childLanes)!==0,Je||h){if(h=Re,h!==null&&(l=s&-s,l=(l&42)!==0?1:Si(l),l=(l&(h.suspendedLanes|s))!==0?0:l,l!==0&&l!==L.retryLane))throw L.retryLane=l,fs(t,l),jt(h,t,l),wu;S.data==="$?"||rc(),a=Yr(t,a,s)}else S.data==="$?"?(a.flags|=192,a.child=t.child,a=null):(t=L.treeContext,Be=Ot(S.nextSibling),it=a,Se=!0,Ya=null,Bt=!1,t!==null&&(Ct[Mt++]=Jt,Ct[Mt++]=Ft,Ct[Mt++]=$a,Jt=t.id,Ft=t.overflow,$a=a),a=Gr(a,l.children),a.flags|=4096);return a}return n?(ya(),n=l.fallback,S=a.mode,L=t.child,K=L.sibling,l=Kt(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,K!==null?n=Kt(K,n):(n=Ua(n,S,s,null),n.flags|=2),n.return=a,l.return=a,l.sibling=n,a.child=l,l=n,n=a.child,S=t.child.memoizedState,S===null?S=Ur(s):(L=S.cachePool,L!==null?(K=Ve._currentValue,L=L.parent!==K?{parent:K,pool:K}:L):L=bd(),S={baseLanes:S.baseLanes|s,cachePool:L}),n.memoizedState=S,n.childLanes=$r(t,h,s),a.memoizedState=qr,l):(ba(a),s=t.child,t=s.sibling,s=Kt(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(h=a.deletions,h===null?(a.deletions=[t],a.flags|=16):h.push(t)),a.child=s,a.memoizedState=null,s)}function Gr(t,a){return a=Un({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Un(t,a){return t=pt(22,t,null,a),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Yr(t,a,s){return Cs(a,t.child,null,s),t=Gr(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Ru(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),rr(t.return,a,s)}function Qr(t,a,s,l,n){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n}:(r.isBackwards=a,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=s,r.tailMode=n)}function zu(t,a,s){var l=a.pendingProps,n=l.revealOrder,r=l.tail;if(We(t,a,l.children,s),l=Ze.current,(l&2)!==0)l=l&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ru(t,s,a);else if(t.tag===19)Ru(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch($(Ze,l),n){case"forwards":for(s=a.child,n=null;s!==null;)t=s.alternate,t!==null&&Hn(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=a.child,a.child=null):(n=s.sibling,s.sibling=null),Qr(a,!1,n,s,r);break;case"backwards":for(s=null,n=a.child,a.child=null;n!==null;){if(t=n.alternate,t!==null&&Hn(t)===null){a.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}Qr(a,!0,s,null,r);break;case"together":Qr(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ta(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),ka|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(cl(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(o(153));if(a.child!==null){for(t=a.child,s=Kt(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=Kt(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function Xr(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&vn(t)))}function mf(t,a,s){switch(a.tag){case 3:he(a,a.stateNode.containerInfo),xa(a,Ve,t.memoizedState.cache),il();break;case 27:case 5:Qt(a);break;case 4:he(a,a.stateNode.containerInfo);break;case 10:xa(a,a.type,a.memoizedProps.value);break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ba(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Du(t,a,s):(ba(a),t=ta(t,a,s),t!==null?t.sibling:null);ba(a);break;case 19:var n=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(cl(t,a,s,!1),l=(s&a.childLanes)!==0),n){if(l)return zu(t,a,s);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),$(Ze,Ze.current),l)break;return null;case 22:case 23:return a.lanes=0,Mu(t,a,s);case 24:xa(a,Ve,t.memoizedState.cache)}return ta(t,a,s)}function Ou(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)Je=!0;else{if(!Xr(t,s)&&(a.flags&128)===0)return Je=!1,mf(t,a,s);Je=(t.flags&131072)!==0}else Je=!1,Se&&(a.flags&1048576)!==0&&ud(a,yn,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var l=a.elementType,n=l._init;if(l=n(l._payload),a.type=l,typeof l=="function")er(l)?(t=Ja(l,t),a.tag=1,a=Au(null,a,l,t,s)):(a.tag=0,a=Br(null,a,l,t,s));else{if(l!=null){if(n=l.$$typeof,n===E){a.tag=11,a=ku(null,a,l,t,s);break e}else if(n===X){a.tag=14,a=Su(null,a,l,t,s);break e}}throw a=B(l)||l,Error(o(306,a,""))}}return a;case 0:return Br(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,n=Ja(l,a.pendingProps),Au(t,a,l,n,s);case 3:e:{if(he(a,a.stateNode.containerInfo),t===null)throw Error(o(387));l=a.pendingProps;var r=a.memoizedState;n=r.element,hr(t,a),fl(a,l,null,s);var h=a.memoizedState;if(l=h.cache,xa(a,Ve,l),l!==r.cache&&cr(a,[Ve],s,!0),hl(),l=h.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:h.cache},a.updateQueue.baseState=r,a.memoizedState=r,a.flags&256){a=Tu(t,a,l,s);break e}else if(l!==n){n=kt(Error(o(424)),a),rl(n),a=Tu(t,a,l,s);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Be=Ot(t.firstChild),it=a,Se=!0,Ya=null,Bt=!0,s=xu(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(il(),l===n){a=ta(t,a,s);break e}We(t,a,l,s)}a=a.child}return a;case 26:return qn(t,a),t===null?(s=qm(a.type,null,a.pendingProps,null))?a.memoizedState=s:Se||(s=a.type,t=a.pendingProps,l=ei(oe.current).createElement(s),l[st]=a,l[rt]=t,et(l,s,t),Ke(l),a.stateNode=l):a.memoizedState=qm(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Qt(a),t===null&&Se&&(l=a.stateNode=Hm(a.type,a.pendingProps,oe.current),it=a,Bt=!0,n=Be,Ea(a.type)?(Sc=n,Be=Ot(l.firstChild)):Be=n),We(t,a,a.pendingProps.children,s),qn(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Se&&((n=l=Be)&&(l=Uf(l,a.type,a.pendingProps,Bt),l!==null?(a.stateNode=l,it=a,Be=Ot(l.firstChild),Bt=!1,n=!0):n=!1),n||Qa(a)),Qt(a),n=a.type,r=a.pendingProps,h=t!==null?t.memoizedProps:null,l=r.children,jc(n,r)?l=null:h!==null&&jc(n,h)&&(a.flags|=32),a.memoizedState!==null&&(n=vr(t,a,sf,null,null,s),Ll._currentValue=n),qn(t,a),We(t,a,l,s),a.child;case 6:return t===null&&Se&&((t=s=Be)&&(s=$f(s,a.pendingProps,Bt),s!==null?(a.stateNode=s,it=a,Be=null,t=!0):t=!1),t||Qa(a)),null;case 13:return Du(t,a,s);case 4:return he(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Cs(a,null,l,s):We(t,a,l,s),a.child;case 11:return ku(t,a,a.type,a.pendingProps,s);case 7:return We(t,a,a.pendingProps,s),a.child;case 8:return We(t,a,a.pendingProps.children,s),a.child;case 12:return We(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,xa(a,a.type,l.value),We(t,a,l.children,s),a.child;case 9:return n=a.type._context,l=a.pendingProps.children,Va(a),n=lt(n),l=l(n),a.flags|=1,We(t,a,l,s),a.child;case 14:return Su(t,a,a.type,a.pendingProps,s);case 15:return Cu(t,a,a.type,a.pendingProps,s);case 19:return zu(t,a,s);case 31:return l=a.pendingProps,s=a.mode,l={mode:l.mode,children:l.children},t===null?(s=Un(l,s),s.ref=a.ref,a.child=s,s.return=a,a=s):(s=Kt(t.child,l),s.ref=a.ref,a.child=s,s.return=a,a=s),a;case 22:return Mu(t,a,s);case 24:return Va(a),l=lt(Ve),t===null?(n=ur(),n===null&&(n=Re,r=or(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=s),n=r),a.memoizedState={parent:l,cache:n},xr(a),xa(a,Ve,n)):((t.lanes&s)!==0&&(hr(t,a),fl(a,null,null,s),hl()),n=t.memoizedState,r=a.memoizedState,n.parent!==l?(n={parent:l,cache:l},a.memoizedState=n,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=n),xa(a,Ve,l)):(l=r.cache,xa(a,Ve,l),l!==n.cache&&cr(a,[Ve],s,!0))),We(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function aa(t){t.flags|=4}function Hu(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Qm(a)){if(a=Et.current,a!==null&&((Ne&4194048)===Ne?qt!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||a!==qt))throw ml=mr,yd;t.flags|=8192}}function $n(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?ho():536870912,t.lanes|=a,As|=a)}function Nl(t,a){if(!Se)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Le(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function xf(t,a,s){var l=a.pendingProps;switch(lr(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(a),null;case 1:return Le(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Wt(Ve),He(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(nl(a)?aa(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,hd())),Le(a),null;case 26:return s=a.memoizedState,t===null?(aa(a),s!==null?(Le(a),Hu(a,s)):(Le(a),a.flags&=-16777217)):s?s!==t.memoizedState?(aa(a),Le(a),Hu(a,s)):(Le(a),a.flags&=-16777217):(t.memoizedProps!==l&&aa(a),Le(a),a.flags&=-16777217),null;case 27:Dt(a),s=oe.current;var n=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Le(a),null}t=se.current,nl(a)?md(a):(t=Hm(n,l,s),a.stateNode=t,aa(a))}return Le(a),null;case 5:if(Dt(a),s=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return Le(a),null}if(t=se.current,nl(a))md(a);else{switch(n=ei(oe.current),t){case 1:t=n.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=n.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=n.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?n.createElement(s,{is:l.is}):n.createElement(s)}}t[st]=a,t[rt]=l;e:for(n=a.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}a.stateNode=t;e:switch(et(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&aa(a)}}return Le(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(o(166));if(t=oe.current,nl(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,n=it,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}t[st]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||_m(t.nodeValue,s)),t||Qa(a)}else t=ei(t).createTextNode(l),t[st]=a,a.stateNode=t}return Le(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(n=nl(a),l!==null&&l.dehydrated!==null){if(t===null){if(!n)throw Error(o(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));n[st]=a}else il(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Le(a),n=!1}else n=hd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),n=!0;if(!n)return a.flags&256?(ea(a),a):(ea(a),null)}if(ea(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=a.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var r=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)}return s!==t&&s&&(a.child.flags|=8192),$n(a,a.updateQueue),Le(a),null;case 4:return He(),t===null&&pc(a.stateNode.containerInfo),Le(a),null;case 10:return Wt(a.type),Le(a),null;case 19:if(J(Ze),n=a.memoizedState,n===null)return Le(a),null;if(l=(a.flags&128)!==0,r=n.rendering,r===null)if(l)Nl(n,!1);else{if(qe!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(r=Hn(t),r!==null){for(a.flags|=128,Nl(n,!1),t=r.updateQueue,a.updateQueue=t,$n(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)dd(s,t),s=s.sibling;return $(Ze,Ze.current&1|2),a.child}t=t.sibling}n.tail!==null&&Lt()>Qn&&(a.flags|=128,l=!0,Nl(n,!1),a.lanes=4194304)}else{if(!l)if(t=Hn(r),t!==null){if(a.flags|=128,l=!0,t=t.updateQueue,a.updateQueue=t,$n(a,t),Nl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!Se)return Le(a),null}else 2*Lt()-n.renderingStartTime>Qn&&s!==536870912&&(a.flags|=128,l=!0,Nl(n,!1),a.lanes=4194304);n.isBackwards?(r.sibling=a.child,a.child=r):(t=n.last,t!==null?t.sibling=r:a.child=r,n.last=r)}return n.tail!==null?(a=n.tail,n.rendering=a,n.tail=a.sibling,n.renderingStartTime=Lt(),a.sibling=null,t=Ze.current,$(Ze,l?t&1|2:t&1),a):(Le(a),null);case 22:case 23:return ea(a),br(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(Le(a),a.subtreeFlags&6&&(a.flags|=8192)):Le(a),s=a.updateQueue,s!==null&&$n(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&J(Za),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Wt(Ve),Le(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function hf(t,a){switch(lr(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Wt(Ve),He(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Dt(a),null;case 13:if(ea(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(o(340));il()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return J(Ze),null;case 4:return He(),null;case 10:return Wt(a.type),null;case 22:case 23:return ea(a),br(),t!==null&&J(Za),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Wt(Ve),null;case 25:return null;default:return null}}function Lu(t,a){switch(lr(a),a.tag){case 3:Wt(Ve),He();break;case 26:case 27:case 5:Dt(a);break;case 4:He();break;case 13:ea(a);break;case 19:J(Ze);break;case 10:Wt(a.type);break;case 22:case 23:ea(a),br(),t!==null&&J(Za);break;case 24:Wt(Ve)}}function wl(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&t)===t){l=void 0;var r=s.create,h=s.inst;l=r(),h.destroy=l}s=s.next}while(s!==n)}}catch(S){De(a,a.return,S)}}function va(t,a,s){try{var l=a.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&t)===t){var h=l.inst,S=h.destroy;if(S!==void 0){h.destroy=void 0,n=a;var L=s,K=S;try{K()}catch(ee){De(n,L,ee)}}}l=l.next}while(l!==r)}}catch(ee){De(a,a.return,ee)}}function Bu(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Sd(a,s)}catch(l){De(t,t.return,l)}}}function qu(t,a,s){s.props=Ja(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){De(t,a,l)}}function kl(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(n){De(t,a,n)}}function Ut(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){De(t,a,n)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){De(t,a,n)}else s.current=null}function Uu(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){De(t,t.return,n)}}function Vr(t,a,s){try{var l=t.stateNode;Of(l,t.type,s,a),l[rt]=a}catch(n){De(t,t.return,n)}}function $u(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ea(t.type)||t.tag===4}function Zr(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$u(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ea(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kr(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=In));else if(l!==4&&(l===27&&Ea(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(Kr(t,a,s),t=t.sibling;t!==null;)Kr(t,a,s),t=t.sibling}function Gn(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&Ea(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Gn(t,a,s),t=t.sibling;t!==null;)Gn(t,a,s),t=t.sibling}function Gu(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);et(a,l,s),a[st]=t,a[rt]=s}catch(r){De(t,t.return,r)}}var sa=!1,$e=!1,Jr=!1,Yu=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function ff(t,a){if(t=t.containerInfo,yc=ii,t=ed(t),Zi(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var h=0,S=-1,L=-1,K=0,ee=0,ae=t,P=null;t:for(;;){for(var W;ae!==s||n!==0&&ae.nodeType!==3||(S=h+n),ae!==r||l!==0&&ae.nodeType!==3||(L=h+l),ae.nodeType===3&&(h+=ae.nodeValue.length),(W=ae.firstChild)!==null;)P=ae,ae=W;for(;;){if(ae===t)break t;if(P===s&&++K===n&&(S=h),P===r&&++ee===l&&(L=h),(W=ae.nextSibling)!==null)break;ae=P,P=ae.parentNode}ae=W}s=S===-1||L===-1?null:{start:S,end:L}}else s=null}s=s||{start:0,end:0}}else s=null;for(vc={focusedElem:t,selectionRange:s},ii=!1,Fe=a;Fe!==null;)if(a=Fe,t=a.child,(a.subtreeFlags&1024)!==0&&t!==null)t.return=a,Fe=t;else for(;Fe!==null;){switch(a=Fe,r=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,s=a,n=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var fe=Ja(s.type,n,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(fe,r),l.__reactInternalSnapshotBeforeUpdate=t}catch(me){De(s,s.return,me)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)wc(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":wc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=a.sibling,t!==null){t.return=a.return,Fe=t;break}Fe=a.return}}function Qu(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ja(t,s),l&4&&wl(5,s);break;case 1:if(ja(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(h){De(s,s.return,h)}else{var n=Ja(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(n,a,t.__reactInternalSnapshotBeforeUpdate)}catch(h){De(s,s.return,h)}}l&64&&Bu(s),l&512&&kl(s,s.return);break;case 3:if(ja(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Sd(t,a)}catch(h){De(s,s.return,h)}}break;case 27:a===null&&l&4&&Gu(s);case 26:case 5:ja(t,s),a===null&&l&4&&Uu(s),l&512&&kl(s,s.return);break;case 12:ja(t,s);break;case 13:ja(t,s),l&4&&Zu(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=kf.bind(null,s),Gf(t,s))));break;case 22:if(l=s.memoizedState!==null||sa,!l){a=a!==null&&a.memoizedState!==null||$e,n=sa;var r=$e;sa=l,($e=a)&&!r?Na(t,s,(s.subtreeFlags&8772)!==0):ja(t,s),sa=n,$e=r}break;case 30:break;default:ja(t,s)}}function Xu(t){var a=t.alternate;a!==null&&(t.alternate=null,Xu(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ei(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ze=null,dt=!1;function la(t,a,s){for(s=s.child;s!==null;)Vu(t,a,s),s=s.sibling}function Vu(t,a,s){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Xs,s)}catch{}switch(s.tag){case 26:$e||Ut(s,a),la(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:$e||Ut(s,a);var l=ze,n=dt;Ea(s.type)&&(ze=s.stateNode,dt=!1),la(t,a,s),Rl(s.stateNode),ze=l,dt=n;break;case 5:$e||Ut(s,a);case 6:if(l=ze,n=dt,ze=null,la(t,a,s),ze=l,dt=n,ze!==null)if(dt)try{(ze.nodeType===9?ze.body:ze.nodeName==="HTML"?ze.ownerDocument.body:ze).removeChild(s.stateNode)}catch(r){De(s,a,r)}else try{ze.removeChild(s.stateNode)}catch(r){De(s,a,r)}break;case 18:ze!==null&&(dt?(t=ze,zm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),$l(t)):zm(ze,s.stateNode));break;case 4:l=ze,n=dt,ze=s.stateNode.containerInfo,dt=!0,la(t,a,s),ze=l,dt=n;break;case 0:case 11:case 14:case 15:$e||va(2,s,a),$e||va(4,s,a),la(t,a,s);break;case 1:$e||(Ut(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&qu(s,a,l)),la(t,a,s);break;case 21:la(t,a,s);break;case 22:$e=(l=$e)||s.memoizedState!==null,la(t,a,s),$e=l;break;default:la(t,a,s)}}function Zu(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$l(t)}catch(s){De(a,a.return,s)}}function pf(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Yu),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Yu),a;default:throw Error(o(435,t.tag))}}function Fr(t,a){var s=pf(t);a.forEach(function(l){var n=Sf.bind(null,t,l);s.has(l)||(s.add(l),l.then(n,n))})}function gt(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],r=t,h=a,S=h;e:for(;S!==null;){switch(S.tag){case 27:if(Ea(S.type)){ze=S.stateNode,dt=!1;break e}break;case 5:ze=S.stateNode,dt=!1;break e;case 3:case 4:ze=S.stateNode.containerInfo,dt=!0;break e}S=S.return}if(ze===null)throw Error(o(160));Vu(r,h,n),ze=null,dt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Ku(a,t),a=a.sibling}var zt=null;function Ku(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gt(a,t),bt(t),l&4&&(va(3,t,t.return),wl(3,t),va(5,t,t.return));break;case 1:gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),l&64&&sa&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=zt;if(gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[Ks]||r[st]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),et(r,l,s),r[st]=t,Ke(r),l=r;break e;case"link":var h=Gm("link","href",n).get(l+(s.href||""));if(h){for(var S=0;S<h.length;S++)if(r=h[S],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){h.splice(S,1);break t}}r=n.createElement(l),et(r,l,s),n.head.appendChild(r);break;case"meta":if(h=Gm("meta","content",n).get(l+(s.content||""))){for(S=0;S<h.length;S++)if(r=h[S],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){h.splice(S,1);break t}}r=n.createElement(l),et(r,l,s),n.head.appendChild(r);break;default:throw Error(o(468,l))}r[st]=t,Ke(r),l=r}t.stateNode=l}else Ym(n,t.type,t.stateNode);else t.stateNode=$m(n,l,t.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?Ym(n,t.type,t.stateNode):$m(n,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Vr(t,t.memoizedProps,s.memoizedProps)}break;case 27:gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),s!==null&&l&4&&Vr(t,t.memoizedProps,s.memoizedProps);break;case 5:if(gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),t.flags&32){n=t.stateNode;try{cs(n,"")}catch(W){De(t,t.return,W)}}l&4&&t.stateNode!=null&&(n=t.memoizedProps,Vr(t,n,s!==null?s.memoizedProps:n)),l&1024&&(Jr=!0);break;case 6:if(gt(a,t),bt(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(W){De(t,t.return,W)}}break;case 3:if(si=null,n=zt,zt=ti(a.containerInfo),gt(a,t),zt=n,bt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{$l(a.containerInfo)}catch(W){De(t,t.return,W)}Jr&&(Jr=!1,Ju(t));break;case 4:l=zt,zt=ti(t.stateNode.containerInfo),gt(a,t),bt(t),zt=l;break;case 12:gt(a,t),bt(t);break;case 13:gt(a,t),bt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ac=Lt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Fr(t,l)));break;case 22:n=t.memoizedState!==null;var L=s!==null&&s.memoizedState!==null,K=sa,ee=$e;if(sa=K||n,$e=ee||L,gt(a,t),$e=ee,sa=K,bt(t),l&8192)e:for(a=t.stateNode,a._visibility=n?a._visibility&-2:a._visibility|1,n&&(s===null||L||sa||$e||Fa(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){L=s=a;try{if(r=L.stateNode,n)h=r.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{S=L.stateNode;var ae=L.memoizedProps.style,P=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;S.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(W){De(L,L.return,W)}}}else if(a.tag===6){if(s===null){L=a;try{L.stateNode.nodeValue=n?"":L.memoizedProps}catch(W){De(L,L.return,W)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Fr(t,s))));break;case 19:gt(a,t),bt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Fr(t,l)));break;case 30:break;case 21:break;default:gt(a,t),bt(t)}}function bt(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if($u(l)){s=l;break}l=l.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var n=s.stateNode,r=Zr(t);Gn(t,r,n);break;case 5:var h=s.stateNode;s.flags&32&&(cs(h,""),s.flags&=-33);var S=Zr(t);Gn(t,S,h);break;case 3:case 4:var L=s.stateNode.containerInfo,K=Zr(t);Kr(t,K,L);break;default:throw Error(o(161))}}catch(ee){De(t,t.return,ee)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Ju(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Ju(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ja(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Qu(t,a.alternate,a),a=a.sibling}function Fa(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:va(4,a,a.return),Fa(a);break;case 1:Ut(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&qu(a,a.return,s),Fa(a);break;case 27:Rl(a.stateNode);case 26:case 5:Ut(a,a.return),Fa(a);break;case 22:a.memoizedState===null&&Fa(a);break;case 30:Fa(a);break;default:Fa(a)}t=t.sibling}}function Na(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,n=t,r=a,h=r.flags;switch(r.tag){case 0:case 11:case 15:Na(n,r,s),wl(4,r);break;case 1:if(Na(n,r,s),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(K){De(l,l.return,K)}if(l=r,n=l.updateQueue,n!==null){var S=l.stateNode;try{var L=n.shared.hiddenCallbacks;if(L!==null)for(n.shared.hiddenCallbacks=null,n=0;n<L.length;n++)kd(L[n],S)}catch(K){De(l,l.return,K)}}s&&h&64&&Bu(r),kl(r,r.return);break;case 27:Gu(r);case 26:case 5:Na(n,r,s),s&&l===null&&h&4&&Uu(r),kl(r,r.return);break;case 12:Na(n,r,s);break;case 13:Na(n,r,s),s&&h&4&&Zu(n,r);break;case 22:r.memoizedState===null&&Na(n,r,s),kl(r,r.return);break;case 30:break;default:Na(n,r,s)}a=a.sibling}}function Pr(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&ol(s))}function Wr(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ol(t))}function $t(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Fu(t,a,s,l),a=a.sibling}function Fu(t,a,s,l){var n=a.flags;switch(a.tag){case 0:case 11:case 15:$t(t,a,s,l),n&2048&&wl(9,a);break;case 1:$t(t,a,s,l);break;case 3:$t(t,a,s,l),n&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ol(t)));break;case 12:if(n&2048){$t(t,a,s,l),t=a.stateNode;try{var r=a.memoizedProps,h=r.id,S=r.onPostCommit;typeof S=="function"&&S(h,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){De(a,a.return,L)}}else $t(t,a,s,l);break;case 13:$t(t,a,s,l);break;case 23:break;case 22:r=a.stateNode,h=a.alternate,a.memoizedState!==null?r._visibility&2?$t(t,a,s,l):Sl(t,a):r._visibility&2?$t(t,a,s,l):(r._visibility|=2,Ms(t,a,s,l,(a.subtreeFlags&10256)!==0)),n&2048&&Pr(h,a);break;case 24:$t(t,a,s,l),n&2048&&Wr(a.alternate,a);break;default:$t(t,a,s,l)}}function Ms(t,a,s,l,n){for(n=n&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var r=t,h=a,S=s,L=l,K=h.flags;switch(h.tag){case 0:case 11:case 15:Ms(r,h,S,L,n),wl(8,h);break;case 23:break;case 22:var ee=h.stateNode;h.memoizedState!==null?ee._visibility&2?Ms(r,h,S,L,n):Sl(r,h):(ee._visibility|=2,Ms(r,h,S,L,n)),n&&K&2048&&Pr(h.alternate,h);break;case 24:Ms(r,h,S,L,n),n&&K&2048&&Wr(h.alternate,h);break;default:Ms(r,h,S,L,n)}a=a.sibling}}function Sl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,n=l.flags;switch(l.tag){case 22:Sl(s,l),n&2048&&Pr(l.alternate,l);break;case 24:Sl(s,l),n&2048&&Wr(l.alternate,l);break;default:Sl(s,l)}a=a.sibling}}var Cl=8192;function Es(t){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)Pu(t),t=t.sibling}function Pu(t){switch(t.tag){case 26:Es(t),t.flags&Cl&&t.memoizedState!==null&&t0(zt,t.memoizedState,t.memoizedProps);break;case 5:Es(t);break;case 3:case 4:var a=zt;zt=ti(t.stateNode.containerInfo),Es(t),zt=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Cl,Cl=16777216,Es(t),Cl=a):Es(t));break;default:Es(t)}}function Wu(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ml(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Fe=l,em(l,t)}Wu(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Iu(t),t=t.sibling}function Iu(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&va(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Yn(t)):Ml(t);break;default:Ml(t)}}function Yn(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Fe=l,em(l,t)}Wu(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:va(8,a,a.return),Yn(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Yn(a));break;default:Yn(a)}t=t.sibling}}function em(t,a){for(;Fe!==null;){var s=Fe;switch(s.tag){case 0:case 11:case 15:va(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ol(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Fe=l;else e:for(s=t;Fe!==null;){l=Fe;var n=l.sibling,r=l.return;if(Xu(l),l===s){Fe=null;break e}if(n!==null){n.return=r,Fe=n;break e}Fe=r}}}var gf={getCacheForType:function(t){var a=lt(Ve),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s}},bf=typeof WeakMap=="function"?WeakMap:Map,Ce=0,Re=null,ve=null,Ne=0,Me=0,yt=null,wa=!1,_s=!1,Ir=!1,na=0,qe=0,ka=0,Pa=0,ec=0,_t=0,As=0,El=null,ut=null,tc=!1,ac=0,Qn=1/0,Xn=null,Sa=null,Ie=0,Ca=null,Ts=null,Ds=0,sc=0,lc=null,tm=null,_l=0,nc=null;function vt(){if((Ce&2)!==0&&Ne!==0)return Ne&-Ne;if(f.T!==null){var t=ys;return t!==0?t:mc()}return go()}function am(){_t===0&&(_t=(Ne&536870912)===0||Se?xo():536870912);var t=Et.current;return t!==null&&(t.flags|=32),_t}function jt(t,a,s){(t===Re&&(Me===2||Me===9)||t.cancelPendingCommit!==null)&&(Rs(t,0),Ma(t,Ne,_t,!1)),Zs(t,s),((Ce&2)===0||t!==Re)&&(t===Re&&((Ce&2)===0&&(Pa|=s),qe===4&&Ma(t,Ne,_t,!1)),Gt(t))}function sm(t,a,s){if((Ce&6)!==0)throw Error(o(327));var l=!s&&(a&124)===0&&(a&t.expiredLanes)===0||Vs(t,a),n=l?jf(t,a):cc(t,a,!0),r=l;do{if(n===0){_s&&!l&&Ma(t,a,0,!1);break}else{if(s=t.current.alternate,r&&!yf(s)){n=cc(t,a,!1),r=!1;continue}if(n===2){if(r=a,t.errorRecoveryDisabledLanes&r)var h=0;else h=t.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){a=h;e:{var S=t;n=El;var L=S.current.memoizedState.isDehydrated;if(L&&(Rs(S,h).flags|=256),h=cc(S,h,!1),h!==2){if(Ir&&!L){S.errorRecoveryDisabledLanes|=r,Pa|=r,n=4;break e}r=ut,ut=n,r!==null&&(ut===null?ut=r:ut.push.apply(ut,r))}n=h}if(r=!1,n!==2)continue}}if(n===1){Rs(t,0),Ma(t,a,0,!0);break}e:{switch(l=t,r=n,r){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:Ma(l,a,_t,!wa);break e;case 2:ut=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(n=ac+300-Lt(),10<n)){if(Ma(l,a,_t,!wa),tn(l,0,!0)!==0)break e;l.timeoutHandle=Dm(lm.bind(null,l,s,ut,Xn,tc,a,_t,Pa,As,wa,r,2,-0,0),n);break e}lm(l,s,ut,Xn,tc,a,_t,Pa,As,wa,r,0,-0,0)}}break}while(!0);Gt(t)}function lm(t,a,s,l,n,r,h,S,L,K,ee,ae,P,W){if(t.timeoutHandle=-1,ae=a.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:e0},Pu(a),ae=a0(),ae!==null)){t.cancelPendingCommit=ae(um.bind(null,t,a,r,s,l,n,h,S,L,ee,1,P,W)),Ma(t,r,h,!K);return}um(t,a,r,s,l,n,h,S,L)}function yf(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],r=n.getSnapshot;n=n.value;try{if(!ft(r(),n))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ma(t,a,s,l){a&=~ec,a&=~Pa,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var n=a;0<n;){var r=31-ht(n),h=1<<r;l[r]=-1,n&=~h}s!==0&&fo(t,s,a)}function Vn(){return(Ce&6)===0?(Al(0),!1):!0}function ic(){if(ve!==null){if(Me===0)var t=ve.return;else t=ve,Pt=Xa=null,wr(t),Ss=null,vl=0,t=ve;for(;t!==null;)Lu(t.alternate,t),t=t.return;ve=null}}function Rs(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Lf(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),ic(),Re=t,ve=s=Kt(t.current,null),Ne=a,Me=0,yt=null,wa=!1,_s=Vs(t,a),Ir=!1,As=_t=ec=Pa=ka=qe=0,ut=El=null,tc=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var n=31-ht(l),r=1<<n;a|=t[n],l&=~r}return na=a,hn(),s}function nm(t,a){be=null,f.H=Rn,a===ul||a===wn?(a=Nd(),Me=3):a===yd?(a=Nd(),Me=4):Me=a===wu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,yt=a,ve===null&&(qe=1,Bn(t,kt(a,t.current)))}function im(){var t=f.H;return f.H=Rn,t===null?Rn:t}function rm(){var t=f.A;return f.A=gf,t}function rc(){qe=4,wa||(Ne&4194048)!==Ne&&Et.current!==null||(_s=!0),(ka&134217727)===0&&(Pa&134217727)===0||Re===null||Ma(Re,Ne,_t,!1)}function cc(t,a,s){var l=Ce;Ce|=2;var n=im(),r=rm();(Re!==t||Ne!==a)&&(Xn=null,Rs(t,a)),a=!1;var h=qe;e:do try{if(Me!==0&&ve!==null){var S=ve,L=yt;switch(Me){case 8:ic(),h=6;break e;case 3:case 2:case 9:case 6:Et.current===null&&(a=!0);var K=Me;if(Me=0,yt=null,zs(t,S,L,K),s&&_s){h=0;break e}break;default:K=Me,Me=0,yt=null,zs(t,S,L,K)}}vf(),h=qe;break}catch(ee){nm(t,ee)}while(!0);return a&&t.shellSuspendCounter++,Pt=Xa=null,Ce=l,f.H=n,f.A=r,ve===null&&(Re=null,Ne=0,hn()),h}function vf(){for(;ve!==null;)cm(ve)}function jf(t,a){var s=Ce;Ce|=2;var l=im(),n=rm();Re!==t||Ne!==a?(Xn=null,Qn=Lt()+500,Rs(t,a)):_s=Vs(t,a);e:do try{if(Me!==0&&ve!==null){a=ve;var r=yt;t:switch(Me){case 1:Me=0,yt=null,zs(t,a,r,1);break;case 2:case 9:if(vd(r)){Me=0,yt=null,om(a);break}a=function(){Me!==2&&Me!==9||Re!==t||(Me=7),Gt(t)},r.then(a,a);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:vd(r)?(Me=0,yt=null,om(a)):(Me=0,yt=null,zs(t,a,r,7));break;case 5:var h=null;switch(ve.tag){case 26:h=ve.memoizedState;case 5:case 27:var S=ve;if(!h||Qm(h)){Me=0,yt=null;var L=S.sibling;if(L!==null)ve=L;else{var K=S.return;K!==null?(ve=K,Zn(K)):ve=null}break t}}Me=0,yt=null,zs(t,a,r,5);break;case 6:Me=0,yt=null,zs(t,a,r,6);break;case 8:ic(),qe=6;break e;default:throw Error(o(462))}}Nf();break}catch(ee){nm(t,ee)}while(!0);return Pt=Xa=null,f.H=l,f.A=n,Ce=s,ve!==null?0:(Re=null,Ne=0,hn(),qe)}function Nf(){for(;ve!==null&&!Xt();)cm(ve)}function cm(t){var a=Ou(t.alternate,t,na);t.memoizedProps=t.pendingProps,a===null?Zn(t):ve=a}function om(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=_u(s,a,a.pendingProps,a.type,void 0,Ne);break;case 11:a=_u(s,a,a.pendingProps,a.type.render,a.ref,Ne);break;case 5:wr(a);default:Lu(s,a),a=ve=dd(a,na),a=Ou(s,a,na)}t.memoizedProps=t.pendingProps,a===null?Zn(t):ve=a}function zs(t,a,s,l){Pt=Xa=null,wr(a),Ss=null,vl=0;var n=a.return;try{if(uf(t,n,a,s,Ne)){qe=1,Bn(t,kt(s,t.current)),ve=null;return}}catch(r){if(n!==null)throw ve=n,r;qe=1,Bn(t,kt(s,t.current)),ve=null;return}a.flags&32768?(Se||l===1?t=!0:_s||(Ne&536870912)!==0?t=!1:(wa=t=!0,(l===2||l===9||l===3||l===6)&&(l=Et.current,l!==null&&l.tag===13&&(l.flags|=16384))),dm(a,t)):Zn(a)}function Zn(t){var a=t;do{if((a.flags&32768)!==0){dm(a,wa);return}t=a.return;var s=xf(a.alternate,a,na);if(s!==null){ve=s;return}if(a=a.sibling,a!==null){ve=a;return}ve=a=t}while(a!==null);qe===0&&(qe=5)}function dm(t,a){do{var s=hf(t.alternate,t);if(s!==null){s.flags&=32767,ve=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){ve=t;return}ve=t=s}while(t!==null);qe=6,ve=null}function um(t,a,s,l,n,r,h,S,L){t.cancelPendingCommit=null;do Kn();while(Ie!==0);if((Ce&6)!==0)throw Error(o(327));if(a!==null){if(a===t.current)throw Error(o(177));if(r=a.lanes|a.childLanes,r|=Wi,Ix(t,s,r,h,S,L),t===Re&&(ve=Re=null,Ne=0),Ts=a,Ca=t,Ds=s,sc=r,lc=n,tm=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Cf(Wl,function(){return pm(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=f.T,f.T=null,n=z.p,z.p=2,h=Ce,Ce|=4;try{ff(t,a,s)}finally{Ce=h,z.p=n,f.T=l}}Ie=1,mm(),xm(),hm()}}function mm(){if(Ie===1){Ie=0;var t=Ca,a=Ts,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=f.T,f.T=null;var l=z.p;z.p=2;var n=Ce;Ce|=4;try{Ku(a,t);var r=vc,h=ed(t.containerInfo),S=r.focusedElem,L=r.selectionRange;if(h!==S&&S&&S.ownerDocument&&Io(S.ownerDocument.documentElement,S)){if(L!==null&&Zi(S)){var K=L.start,ee=L.end;if(ee===void 0&&(ee=K),"selectionStart"in S)S.selectionStart=K,S.selectionEnd=Math.min(ee,S.value.length);else{var ae=S.ownerDocument||document,P=ae&&ae.defaultView||window;if(P.getSelection){var W=P.getSelection(),fe=S.textContent.length,me=Math.min(L.start,fe),Te=L.end===void 0?me:Math.min(L.end,fe);!W.extend&&me>Te&&(h=Te,Te=me,me=h);var Y=Wo(S,me),U=Wo(S,Te);if(Y&&U&&(W.rangeCount!==1||W.anchorNode!==Y.node||W.anchorOffset!==Y.offset||W.focusNode!==U.node||W.focusOffset!==U.offset)){var Z=ae.createRange();Z.setStart(Y.node,Y.offset),W.removeAllRanges(),me>Te?(W.addRange(Z),W.extend(U.node,U.offset)):(Z.setEnd(U.node,U.offset),W.addRange(Z))}}}}for(ae=[],W=S;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ae.length;S++){var te=ae[S];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}ii=!!yc,vc=yc=null}finally{Ce=n,z.p=l,f.T=s}}t.current=a,Ie=2}}function xm(){if(Ie===2){Ie=0;var t=Ca,a=Ts,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=f.T,f.T=null;var l=z.p;z.p=2;var n=Ce;Ce|=4;try{Qu(t,a.alternate,a)}finally{Ce=n,z.p=l,f.T=s}}Ie=3}}function hm(){if(Ie===4||Ie===3){Ie=0,wi();var t=Ca,a=Ts,s=Ds,l=tm;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ie=5:(Ie=0,Ts=Ca=null,fm(t,t.pendingLanes));var n=t.pendingLanes;if(n===0&&(Sa=null),Ci(s),a=a.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Xs,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=f.T,n=z.p,z.p=2,f.T=null;try{for(var r=t.onRecoverableError,h=0;h<l.length;h++){var S=l[h];r(S.value,{componentStack:S.stack})}}finally{f.T=a,z.p=n}}(Ds&3)!==0&&Kn(),Gt(t),n=t.pendingLanes,(s&4194090)!==0&&(n&42)!==0?t===nc?_l++:(_l=0,nc=t):_l=0,Al(0)}}function fm(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,ol(a)))}function Kn(t){return mm(),xm(),hm(),pm()}function pm(){if(Ie!==5)return!1;var t=Ca,a=sc;sc=0;var s=Ci(Ds),l=f.T,n=z.p;try{z.p=32>s?32:s,f.T=null,s=lc,lc=null;var r=Ca,h=Ds;if(Ie=0,Ts=Ca=null,Ds=0,(Ce&6)!==0)throw Error(o(331));var S=Ce;if(Ce|=4,Iu(r.current),Fu(r,r.current,h,s),Ce=S,Al(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Xs,r)}catch{}return!0}finally{z.p=n,f.T=l,fm(t,a)}}function gm(t,a,s){a=kt(s,a),a=Lr(t.stateNode,a,2),t=pa(t,a,2),t!==null&&(Zs(t,2),Gt(t))}function De(t,a,s){if(t.tag===3)gm(t,t,s);else for(;a!==null;){if(a.tag===3){gm(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Sa===null||!Sa.has(l))){t=kt(s,t),s=ju(2),l=pa(a,s,2),l!==null&&(Nu(s,l,a,t),Zs(l,2),Gt(l));break}}a=a.return}}function oc(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new bf;var n=new Set;l.set(a,n)}else n=l.get(a),n===void 0&&(n=new Set,l.set(a,n));n.has(s)||(Ir=!0,n.add(s),t=wf.bind(null,t,a,s),a.then(t,t))}function wf(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Re===t&&(Ne&s)===s&&(qe===4||qe===3&&(Ne&62914560)===Ne&&300>Lt()-ac?(Ce&2)===0&&Rs(t,0):ec|=s,As===Ne&&(As=0)),Gt(t)}function bm(t,a){a===0&&(a=ho()),t=fs(t,a),t!==null&&(Zs(t,a),Gt(t))}function kf(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),bm(t,s)}function Sf(t,a){var s=0;switch(t.tag){case 13:var l=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(a),bm(t,s)}function Cf(t,a){return Qs(t,a)}var Jn=null,Os=null,dc=!1,Fn=!1,uc=!1,Wa=0;function Gt(t){t!==Os&&t.next===null&&(Os===null?Jn=Os=t:Os=Os.next=t),Fn=!0,dc||(dc=!0,Ef())}function Al(t,a){if(!uc&&Fn){uc=!0;do for(var s=!1,l=Jn;l!==null;){if(t!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var h=l.suspendedLanes,S=l.pingedLanes;r=(1<<31-ht(42|t)+1)-1,r&=n&~(h&~S),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,Nm(l,r))}else r=Ne,r=tn(l,l===Re?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||Vs(l,r)||(s=!0,Nm(l,r));l=l.next}while(s);uc=!1}}function Mf(){ym()}function ym(){Fn=dc=!1;var t=0;Wa!==0&&(Hf()&&(t=Wa),Wa=0);for(var a=Lt(),s=null,l=Jn;l!==null;){var n=l.next,r=vm(l,a);r===0?(l.next=null,s===null?Jn=n:s.next=n,n===null&&(Os=s)):(s=l,(t!==0||(r&3)!==0)&&(Fn=!0)),l=n}Al(t)}function vm(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,n=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var h=31-ht(r),S=1<<h,L=n[h];L===-1?((S&s)===0||(S&l)!==0)&&(n[h]=Wx(S,a)):L<=a&&(t.expiredLanes|=S),r&=~S}if(a=Re,s=Ne,s=tn(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(Me===2||Me===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ye(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Vs(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&Ye(l),Ci(s)){case 2:case 8:s=uo;break;case 32:s=Wl;break;case 268435456:s=mo;break;default:s=Wl}return l=jm.bind(null,t),s=Qs(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&Ye(l),t.callbackPriority=2,t.callbackNode=null,2}function jm(t,a){if(Ie!==0&&Ie!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Kn()&&t.callbackNode!==s)return null;var l=Ne;return l=tn(t,t===Re?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(sm(t,l,a),vm(t,Lt()),t.callbackNode!=null&&t.callbackNode===s?jm.bind(null,t):null)}function Nm(t,a){if(Kn())return null;sm(t,a,!0)}function Ef(){Bf(function(){(Ce&6)!==0?Qs(oo,Mf):ym()})}function mc(){return Wa===0&&(Wa=xo()),Wa}function wm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:rn(""+t)}function km(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function _f(t,a,s,l,n){if(a==="submit"&&s&&s.stateNode===n){var r=wm((n[rt]||null).action),h=l.submitter;h&&(a=(a=h[rt]||null)?wm(a.formAction):h.getAttribute("formAction"),a!==null&&(r=a,h=null));var S=new un("action","action",null,l,n);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wa!==0){var L=h?km(n,h):new FormData(n);Dr(s,{pending:!0,data:L,method:n.method,action:r},null,L)}}else typeof r=="function"&&(S.preventDefault(),L=h?km(n,h):new FormData(n),Dr(s,{pending:!0,data:L,method:n.method,action:r},r,L))},currentTarget:n}]})}}for(var xc=0;xc<Pi.length;xc++){var hc=Pi[xc],Af=hc.toLowerCase(),Tf=hc[0].toUpperCase()+hc.slice(1);Rt(Af,"on"+Tf)}Rt(sd,"onAnimationEnd"),Rt(ld,"onAnimationIteration"),Rt(nd,"onAnimationStart"),Rt("dblclick","onDoubleClick"),Rt("focusin","onFocus"),Rt("focusout","onBlur"),Rt(Zh,"onTransitionRun"),Rt(Kh,"onTransitionStart"),Rt(Jh,"onTransitionCancel"),Rt(id,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),Ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ha("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Df=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function Sm(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],n=l.event;l=l.listeners;e:{var r=void 0;if(a)for(var h=l.length-1;0<=h;h--){var S=l[h],L=S.instance,K=S.currentTarget;if(S=S.listener,L!==r&&n.isPropagationStopped())break e;r=S,n.currentTarget=K;try{r(n)}catch(ee){Ln(ee)}n.currentTarget=null,r=L}else for(h=0;h<l.length;h++){if(S=l[h],L=S.instance,K=S.currentTarget,S=S.listener,L!==r&&n.isPropagationStopped())break e;r=S,n.currentTarget=K;try{r(n)}catch(ee){Ln(ee)}n.currentTarget=null,r=L}}}}function je(t,a){var s=a[Mi];s===void 0&&(s=a[Mi]=new Set);var l=t+"__bubble";s.has(l)||(Cm(a,t,2,!1),s.add(l))}function fc(t,a,s){var l=0;a&&(l|=4),Cm(s,t,l,a)}var Pn="_reactListening"+Math.random().toString(36).slice(2);function pc(t){if(!t[Pn]){t[Pn]=!0,yo.forEach(function(s){s!=="selectionchange"&&(Df.has(s)||fc(s,!1,t),fc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Pn]||(a[Pn]=!0,fc("selectionchange",!1,a))}}function Cm(t,a,s,l){switch(Fm(a)){case 2:var n=n0;break;case 8:n=i0;break;default:n=Ac}s=n.bind(null,a,s,t),n=void 0,!Bi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),l?n!==void 0?t.addEventListener(a,s,{capture:!0,passive:n}):t.addEventListener(a,s,!0):n!==void 0?t.addEventListener(a,s,{passive:n}):t.addEventListener(a,s,!1)}function gc(t,a,s,l,n){var r=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var S=l.stateNode.containerInfo;if(S===n)break;if(h===4)for(h=l.return;h!==null;){var L=h.tag;if((L===3||L===4)&&h.stateNode.containerInfo===n)return;h=h.return}for(;S!==null;){if(h=as(S),h===null)return;if(L=h.tag,L===5||L===6||L===26||L===27){l=r=h;continue e}S=S.parentNode}}l=l.return}Ro(function(){var K=r,ee=Hi(s),ae=[];e:{var P=rd.get(t);if(P!==void 0){var W=un,fe=t;switch(t){case"keypress":if(on(s)===0)break e;case"keydown":case"keyup":W=Sh;break;case"focusin":fe="focus",W=Gi;break;case"focusout":fe="blur",W=Gi;break;case"beforeblur":case"afterblur":W=Gi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Ho;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=xh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Eh;break;case sd:case ld:case nd:W=ph;break;case id:W=Ah;break;case"scroll":case"scrollend":W=uh;break;case"wheel":W=Dh;break;case"copy":case"cut":case"paste":W=bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Bo;break;case"toggle":case"beforetoggle":W=zh}var me=(a&4)!==0,Te=!me&&(t==="scroll"||t==="scrollend"),Y=me?P!==null?P+"Capture":null:P;me=[];for(var U=K,Z;U!==null;){var te=U;if(Z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||Z===null||Y===null||(te=Fs(U,Y),te!=null&&me.push(Dl(U,te,Z))),Te)break;U=U.return}0<me.length&&(P=new W(P,fe,null,s,ee),ae.push({event:P,listeners:me}))}}if((a&7)===0){e:{if(P=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",P&&s!==Oi&&(fe=s.relatedTarget||s.fromElement)&&(as(fe)||fe[ts]))break e;if((W||P)&&(P=ee.window===ee?ee:(P=ee.ownerDocument)?P.defaultView||P.parentWindow:window,W?(fe=s.relatedTarget||s.toElement,W=K,fe=fe?as(fe):null,fe!==null&&(Te=m(fe),me=fe.tag,fe!==Te||me!==5&&me!==27&&me!==6)&&(fe=null)):(W=null,fe=K),W!==fe)){if(me=Ho,te="onMouseLeave",Y="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(me=Bo,te="onPointerLeave",Y="onPointerEnter",U="pointer"),Te=W==null?P:Js(W),Z=fe==null?P:Js(fe),P=new me(te,U+"leave",W,s,ee),P.target=Te,P.relatedTarget=Z,te=null,as(ee)===K&&(me=new me(Y,U+"enter",fe,s,ee),me.target=Z,me.relatedTarget=Te,te=me),Te=te,W&&fe)t:{for(me=W,Y=fe,U=0,Z=me;Z;Z=Hs(Z))U++;for(Z=0,te=Y;te;te=Hs(te))Z++;for(;0<U-Z;)me=Hs(me),U--;for(;0<Z-U;)Y=Hs(Y),Z--;for(;U--;){if(me===Y||Y!==null&&me===Y.alternate)break t;me=Hs(me),Y=Hs(Y)}me=null}else me=null;W!==null&&Mm(ae,P,W,me,!1),fe!==null&&Te!==null&&Mm(ae,Te,fe,me,!0)}}e:{if(P=K?Js(K):window,W=P.nodeName&&P.nodeName.toLowerCase(),W==="select"||W==="input"&&P.type==="file")var de=Vo;else if(Qo(P))if(Zo)de=Qh;else{de=Gh;var ye=$h}else W=P.nodeName,!W||W.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?K&&zi(K.elementType)&&(de=Vo):de=Yh;if(de&&(de=de(t,K))){Xo(ae,de,s,ee);break e}ye&&ye(t,P,K),t==="focusout"&&K&&P.type==="number"&&K.memoizedProps.value!=null&&Ri(P,"number",P.value)}switch(ye=K?Js(K):window,t){case"focusin":(Qo(ye)||ye.contentEditable==="true")&&(ms=ye,Ki=K,ll=null);break;case"focusout":ll=Ki=ms=null;break;case"mousedown":Ji=!0;break;case"contextmenu":case"mouseup":case"dragend":Ji=!1,td(ae,s,ee);break;case"selectionchange":if(Vh)break;case"keydown":case"keyup":td(ae,s,ee)}var ue;if(Qi)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else us?Go(t,s)&&(xe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(xe="onCompositionStart");xe&&(qo&&s.locale!=="ko"&&(us||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&us&&(ue=zo()):(ma=ee,qi="value"in ma?ma.value:ma.textContent,us=!0)),ye=Wn(K,xe),0<ye.length&&(xe=new Lo(xe,t,null,s,ee),ae.push({event:xe,listeners:ye}),ue?xe.data=ue:(ue=Yo(s),ue!==null&&(xe.data=ue)))),(ue=Hh?Lh(t,s):Bh(t,s))&&(xe=Wn(K,"onBeforeInput"),0<xe.length&&(ye=new Lo("onBeforeInput","beforeinput",null,s,ee),ae.push({event:ye,listeners:xe}),ye.data=ue)),_f(ae,t,K,s,ee)}Sm(ae,a)})}function Dl(t,a,s){return{instance:t,listener:a,currentTarget:s}}function Wn(t,a){for(var s=a+"Capture",l=[];t!==null;){var n=t,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=Fs(t,s),n!=null&&l.unshift(Dl(t,n,r)),n=Fs(t,a),n!=null&&l.push(Dl(t,n,r))),t.tag===3)return l;t=t.return}return[]}function Hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Mm(t,a,s,l,n){for(var r=a._reactName,h=[];s!==null&&s!==l;){var S=s,L=S.alternate,K=S.stateNode;if(S=S.tag,L!==null&&L===l)break;S!==5&&S!==26&&S!==27||K===null||(L=K,n?(K=Fs(s,r),K!=null&&h.unshift(Dl(s,K,L))):n||(K=Fs(s,r),K!=null&&h.push(Dl(s,K,L)))),s=s.return}h.length!==0&&t.push({event:a,listeners:h})}var Rf=/\r\n?/g,zf=/\u0000|\uFFFD/g;function Em(t){return(typeof t=="string"?t:""+t).replace(Rf,`
`).replace(zf,"")}function _m(t,a){return a=Em(a),Em(t)===a}function In(){}function Ae(t,a,s,l,n,r){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||cs(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&cs(t,""+l);break;case"className":sn(t,"class",l);break;case"tabIndex":sn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(t,s,l);break;case"style":To(t,l,r);break;case"data":if(a!=="object"){sn(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=rn(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(a!=="input"&&Ae(t,a,"name",n.name,n,null),Ae(t,a,"formEncType",n.formEncType,n,null),Ae(t,a,"formMethod",n.formMethod,n,null),Ae(t,a,"formTarget",n.formTarget,n,null)):(Ae(t,a,"encType",n.encType,n,null),Ae(t,a,"method",n.method,n,null),Ae(t,a,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=rn(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=In);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=rn(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":je("beforetoggle",t),je("toggle",t),an(t,"popover",l);break;case"xlinkActuate":Vt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":an(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=oh.get(s)||s,an(t,s,l))}}function bc(t,a,s,l,n,r){switch(s){case"style":To(t,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"children":typeof l=="string"?cs(t,l):(typeof l=="number"||typeof l=="bigint")&&cs(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=In);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),a=s.slice(2,n?s.length-7:void 0),r=t[rt]||null,r=r!=null?r[s]:null,typeof r=="function"&&t.removeEventListener(a,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,n);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):an(t,s,l)}}}function et(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,n=!1,r;for(r in s)if(s.hasOwnProperty(r)){var h=s[r];if(h!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Ae(t,a,r,h,s,null)}}n&&Ae(t,a,"srcSet",s.srcSet,s,null),l&&Ae(t,a,"src",s.src,s,null);return;case"input":je("invalid",t);var S=r=h=n=null,L=null,K=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":n=ee;break;case"type":h=ee;break;case"checked":L=ee;break;case"defaultChecked":K=ee;break;case"value":r=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,a));break;default:Ae(t,a,l,ee,s,null)}}Mo(t,r,S,L,K,h,n,!1),ln(t);return;case"select":je("invalid",t),l=h=r=null;for(n in s)if(s.hasOwnProperty(n)&&(S=s[n],S!=null))switch(n){case"value":r=S;break;case"defaultValue":h=S;break;case"multiple":l=S;default:Ae(t,a,n,S,s,null)}a=r,s=h,t.multiple=!!l,a!=null?rs(t,!!l,a,!1):s!=null&&rs(t,!!l,s,!0);return;case"textarea":je("invalid",t),r=n=l=null;for(h in s)if(s.hasOwnProperty(h)&&(S=s[h],S!=null))switch(h){case"value":l=S;break;case"defaultValue":n=S;break;case"children":r=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:Ae(t,a,h,S,s,null)}_o(t,l,n,r),ln(t);return;case"option":for(L in s)if(s.hasOwnProperty(L)&&(l=s[L],l!=null))switch(L){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ae(t,a,L,l,s,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Tl.length;l++)je(Tl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in s)if(s.hasOwnProperty(K)&&(l=s[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Ae(t,a,K,l,s,null)}return;default:if(zi(a)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&bc(t,a,ee,l,s,void 0));return}}for(S in s)s.hasOwnProperty(S)&&(l=s[S],l!=null&&Ae(t,a,S,l,s,null))}function Of(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,h=null,S=null,L=null,K=null,ee=null;for(W in s){var ae=s[W];if(s.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":L=ae;default:l.hasOwnProperty(W)||Ae(t,a,W,null,l,ae)}}for(var P in l){var W=l[P];if(ae=s[P],l.hasOwnProperty(P)&&(W!=null||ae!=null))switch(P){case"type":r=W;break;case"name":n=W;break;case"checked":K=W;break;case"defaultChecked":ee=W;break;case"value":h=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,a));break;default:W!==ae&&Ae(t,a,P,W,l,ae)}}Di(t,h,S,L,K,ee,r,n);return;case"select":W=h=S=P=null;for(r in s)if(L=s[r],s.hasOwnProperty(r)&&L!=null)switch(r){case"value":break;case"multiple":W=L;default:l.hasOwnProperty(r)||Ae(t,a,r,null,l,L)}for(n in l)if(r=l[n],L=s[n],l.hasOwnProperty(n)&&(r!=null||L!=null))switch(n){case"value":P=r;break;case"defaultValue":S=r;break;case"multiple":h=r;default:r!==L&&Ae(t,a,n,r,l,L)}a=S,s=h,l=W,P!=null?rs(t,!!s,P,!1):!!l!=!!s&&(a!=null?rs(t,!!s,a,!0):rs(t,!!s,s?[]:"",!1));return;case"textarea":W=P=null;for(S in s)if(n=s[S],s.hasOwnProperty(S)&&n!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ae(t,a,S,null,l,n)}for(h in l)if(n=l[h],r=s[h],l.hasOwnProperty(h)&&(n!=null||r!=null))switch(h){case"value":P=n;break;case"defaultValue":W=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(o(91));break;default:n!==r&&Ae(t,a,h,n,l,r)}Eo(t,P,W);return;case"option":for(var fe in s)if(P=s[fe],s.hasOwnProperty(fe)&&P!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ae(t,a,fe,null,l,P)}for(L in l)if(P=l[L],W=s[L],l.hasOwnProperty(L)&&P!==W&&(P!=null||W!=null))switch(L){case"selected":t.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Ae(t,a,L,P,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in s)P=s[me],s.hasOwnProperty(me)&&P!=null&&!l.hasOwnProperty(me)&&Ae(t,a,me,null,l,P);for(K in l)if(P=l[K],W=s[K],l.hasOwnProperty(K)&&P!==W&&(P!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,a));break;default:Ae(t,a,K,P,l,W)}return;default:if(zi(a)){for(var Te in s)P=s[Te],s.hasOwnProperty(Te)&&P!==void 0&&!l.hasOwnProperty(Te)&&bc(t,a,Te,void 0,l,P);for(ee in l)P=l[ee],W=s[ee],!l.hasOwnProperty(ee)||P===W||P===void 0&&W===void 0||bc(t,a,ee,P,l,W);return}}for(var Y in s)P=s[Y],s.hasOwnProperty(Y)&&P!=null&&!l.hasOwnProperty(Y)&&Ae(t,a,Y,null,l,P);for(ae in l)P=l[ae],W=s[ae],!l.hasOwnProperty(ae)||P===W||P==null&&W==null||Ae(t,a,ae,P,l,W)}var yc=null,vc=null;function ei(t){return t.nodeType===9?t:t.ownerDocument}function Am(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tm(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function jc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Nc=null;function Hf(){var t=window.event;return t&&t.type==="popstate"?t===Nc?!1:(Nc=t,!0):(Nc=null,!1)}var Dm=typeof setTimeout=="function"?setTimeout:void 0,Lf=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,Bf=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(t){return Rm.resolve(null).then(t).catch(qf)}:Dm;function qf(t){setTimeout(function(){throw t})}function Ea(t){return t==="head"}function zm(t,a){var s=a,l=0,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(0<l&&8>l){s=l;var h=t.ownerDocument;if(s&1&&Rl(h.documentElement),s&2&&Rl(h.body),s&4)for(s=h.head,Rl(s),h=s.firstChild;h;){var S=h.nextSibling,L=h.nodeName;h[Ks]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=S}}if(n===0){t.removeChild(r),$l(a);return}n--}else s==="$"||s==="$?"||s==="$!"?n++:l=s.charCodeAt(0)-48;else l=0;s=r}while(s);$l(a)}function wc(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":wc(s),Ei(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Uf(t,a,s,l){for(;t.nodeType===1;){var n=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ks])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==n.rel||t.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||t.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||t.getAttribute("title")!==(n.title==null?null:n.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(n.src==null?null:n.src)||t.getAttribute("type")!==(n.type==null?null:n.type)||t.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Ot(t.nextSibling),t===null)break}return null}function $f(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ot(t.nextSibling),t===null))return null;return t}function kc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Gf(t,a){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ot(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}var Sc=null;function Om(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return t;a--}else s==="/$"&&a++}t=t.previousSibling}return null}function Hm(t,a,s){switch(a=ei(s),t){case"html":if(t=a.documentElement,!t)throw Error(o(452));return t;case"head":if(t=a.head,!t)throw Error(o(453));return t;case"body":if(t=a.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Rl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ei(t)}var At=new Map,Lm=new Set;function ti(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ia=z.d;z.d={f:Yf,r:Qf,D:Xf,C:Vf,L:Zf,m:Kf,X:Ff,S:Jf,M:Pf};function Yf(){var t=ia.f(),a=Vn();return t||a}function Qf(t){var a=ss(t);a!==null&&a.tag===5&&a.type==="form"?su(a):ia.r(t)}var Ls=typeof document>"u"?null:document;function Bm(t,a,s){var l=Ls;if(l&&typeof a=="string"&&a){var n=wt(a);n='link[rel="'+t+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),Lm.has(n)||(Lm.add(n),t={rel:t,crossOrigin:s,href:a},l.querySelector(n)===null&&(a=l.createElement("link"),et(a,"link",t),Ke(a),l.head.appendChild(a)))}}function Xf(t){ia.D(t),Bm("dns-prefetch",t,null)}function Vf(t,a){ia.C(t,a),Bm("preconnect",t,a)}function Zf(t,a,s){ia.L(t,a,s);var l=Ls;if(l&&t&&a){var n='link[rel="preload"][as="'+wt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+wt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+wt(s.imageSizes)+'"]')):n+='[href="'+wt(t)+'"]';var r=n;switch(a){case"style":r=Bs(t);break;case"script":r=qs(t)}At.has(r)||(t=C({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),At.set(r,t),l.querySelector(n)!==null||a==="style"&&l.querySelector(zl(r))||a==="script"&&l.querySelector(Ol(r))||(a=l.createElement("link"),et(a,"link",t),Ke(a),l.head.appendChild(a)))}}function Kf(t,a){ia.m(t,a);var s=Ls;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",n='link[rel="modulepreload"][as="'+wt(l)+'"][href="'+wt(t)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=qs(t)}if(!At.has(r)&&(t=C({rel:"modulepreload",href:t},a),At.set(r,t),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ol(r)))return}l=s.createElement("link"),et(l,"link",t),Ke(l),s.head.appendChild(l)}}}function Jf(t,a,s){ia.S(t,a,s);var l=Ls;if(l&&t){var n=ls(l).hoistableStyles,r=Bs(t);a=a||"default";var h=n.get(r);if(!h){var S={loading:0,preload:null};if(h=l.querySelector(zl(r)))S.loading=5;else{t=C({rel:"stylesheet",href:t,"data-precedence":a},s),(s=At.get(r))&&Cc(t,s);var L=h=l.createElement("link");Ke(L),et(L,"link",t),L._p=new Promise(function(K,ee){L.onload=K,L.onerror=ee}),L.addEventListener("load",function(){S.loading|=1}),L.addEventListener("error",function(){S.loading|=2}),S.loading|=4,ai(h,a,l)}h={type:"stylesheet",instance:h,count:1,state:S},n.set(r,h)}}}function Ff(t,a){ia.X(t,a);var s=Ls;if(s&&t){var l=ls(s).hoistableScripts,n=qs(t),r=l.get(n);r||(r=s.querySelector(Ol(n)),r||(t=C({src:t,async:!0},a),(a=At.get(n))&&Mc(t,a),r=s.createElement("script"),Ke(r),et(r,"link",t),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function Pf(t,a){ia.M(t,a);var s=Ls;if(s&&t){var l=ls(s).hoistableScripts,n=qs(t),r=l.get(n);r||(r=s.querySelector(Ol(n)),r||(t=C({src:t,async:!0,type:"module"},a),(a=At.get(n))&&Mc(t,a),r=s.createElement("script"),Ke(r),et(r,"link",t),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function qm(t,a,s,l){var n=(n=oe.current)?ti(n):null;if(!n)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Bs(s.href),s=ls(n).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Bs(s.href);var r=ls(n).hoistableStyles,h=r.get(t);if(h||(n=n.ownerDocument||n,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,h),(r=n.querySelector(zl(t)))&&!r._p&&(h.instance=r,h.state.loading=5),At.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},At.set(t,s),r||Wf(n,t,s,h.state))),a&&l===null)throw Error(o(528,""));return h}if(a&&l!==null)throw Error(o(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=qs(s),s=ls(n).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Bs(t){return'href="'+wt(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function Um(t){return C({},t,{"data-precedence":t.precedence,precedence:null})}function Wf(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),et(a,"link",s),Ke(a),t.head.appendChild(a))}function qs(t){return'[src="'+wt(t)+'"]'}function Ol(t){return"script[async]"+t}function $m(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+wt(s.href)+'"]');if(l)return a.instance=l,Ke(l),l;var n=C({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ke(l),et(l,"style",n),ai(l,s.precedence,t),a.instance=l;case"stylesheet":n=Bs(s.href);var r=t.querySelector(zl(n));if(r)return a.state.loading|=4,a.instance=r,Ke(r),r;l=Um(s),(n=At.get(n))&&Cc(l,n),r=(t.ownerDocument||t).createElement("link"),Ke(r);var h=r;return h._p=new Promise(function(S,L){h.onload=S,h.onerror=L}),et(r,"link",l),a.state.loading|=4,ai(r,s.precedence,t),a.instance=r;case"script":return r=qs(s.src),(n=t.querySelector(Ol(r)))?(a.instance=n,Ke(n),n):(l=s,(n=At.get(r))&&(l=C({},s),Mc(l,n)),t=t.ownerDocument||t,n=t.createElement("script"),Ke(n),et(n,"link",l),t.head.appendChild(n),a.instance=n);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,ai(l,s.precedence,t));return a.instance}function ai(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,h=0;h<l.length;h++){var S=l[h];if(S.dataset.precedence===a)r=S;else if(r!==n)break}r?r.parentNode.insertBefore(t,r.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Cc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Mc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var si=null;function Gm(t,a,s){if(si===null){var l=new Map,n=si=new Map;n.set(s,l)}else n=si,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),n=0;n<s.length;n++){var r=s[n];if(!(r[Ks]||r[st]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var h=r.getAttribute(a)||"";h=t+h;var S=l.get(h);S?S.push(r):l.set(h,[r])}}return l}function Ym(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function If(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Qm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Hl=null;function e0(){}function t0(t,a,s){if(Hl===null)throw Error(o(475));var l=Hl;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var n=Bs(s.href),r=t.querySelector(zl(n));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=li.bind(l),t.then(l,l)),a.state.loading|=4,a.instance=r,Ke(r);return}r=t.ownerDocument||t,s=Um(s),(n=At.get(n))&&Cc(s,n),r=r.createElement("link"),Ke(r);var h=r;h._p=new Promise(function(S,L){h.onload=S,h.onerror=L}),et(r,"link",s),a.instance=r}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(l.count++,a=li.bind(l),t.addEventListener("load",a),t.addEventListener("error",a))}}function a0(){if(Hl===null)throw Error(o(475));var t=Hl;return t.stylesheets&&t.count===0&&Ec(t,t.stylesheets),0<t.count?function(a){var s=setTimeout(function(){if(t.stylesheets&&Ec(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(s)}}:null}function li(){if(this.count--,this.count===0){if(this.stylesheets)Ec(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ni=null;function Ec(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ni=new Map,a.forEach(s0,t),ni=null,li.call(t))}function s0(t,a){if(!(a.state.loading&4)){var s=ni.get(t);if(s)var l=s.get(null);else{s=new Map,ni.set(t,s);for(var n=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var h=n[r];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(s.set(h.dataset.precedence,h),l=h)}l&&s.set(null,l)}n=a.instance,h=n.getAttribute("data-precedence"),r=s.get(h)||l,r===l&&s.set(null,n),s.set(h,n),this.count++,l=li.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(n,t.firstChild)),a.state.loading|=4}}var Ll={$$typeof:_,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function l0(t,a,s,l,n,r,h,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ki(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ki(0),this.hiddenUpdates=ki(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Xm(t,a,s,l,n,r,h,S,L,K,ee,ae){return t=new l0(t,a,s,h,S,L,K,ae),a=1,r===!0&&(a|=24),r=pt(3,null,null,a),t.current=r,r.stateNode=t,a=or(),a.refCount++,t.pooledCache=a,a.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:a},xr(r),t}function Vm(t){return t?(t=ps,t):ps}function Zm(t,a,s,l,n,r){n=Vm(n),l.context===null?l.context=n:l.pendingContext=n,l=fa(a),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=pa(t,l,a),s!==null&&(jt(s,t,a),xl(s,t,a))}function Km(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function _c(t,a){Km(t,a),(t=t.alternate)&&Km(t,a)}function Jm(t){if(t.tag===13){var a=fs(t,67108864);a!==null&&jt(a,t,67108864),_c(t,67108864)}}var ii=!0;function n0(t,a,s,l){var n=f.T;f.T=null;var r=z.p;try{z.p=2,Ac(t,a,s,l)}finally{z.p=r,f.T=n}}function i0(t,a,s,l){var n=f.T;f.T=null;var r=z.p;try{z.p=8,Ac(t,a,s,l)}finally{z.p=r,f.T=n}}function Ac(t,a,s,l){if(ii){var n=Tc(l);if(n===null)gc(t,a,l,ri,s),Pm(t,l);else if(c0(n,t,a,s,l))l.stopPropagation();else if(Pm(t,l),a&4&&-1<r0.indexOf(t)){for(;n!==null;){var r=ss(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var h=Oa(r.pendingLanes);if(h!==0){var S=r;for(S.pendingLanes|=2,S.entangledLanes|=2;h;){var L=1<<31-ht(h);S.entanglements[1]|=L,h&=~L}Gt(r),(Ce&6)===0&&(Qn=Lt()+500,Al(0))}}break;case 13:S=fs(r,2),S!==null&&jt(S,r,2),Vn(),_c(r,2)}if(r=Tc(l),r===null&&gc(t,a,l,ri,s),r===n)break;n=r}n!==null&&l.stopPropagation()}else gc(t,a,l,null,s)}}function Tc(t){return t=Hi(t),Dc(t)}var ri=null;function Dc(t){if(ri=null,t=as(t),t!==null){var a=m(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=y(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return ri=t,null}function Fm(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xx()){case oo:return 2;case uo:return 8;case Wl:case Vx:return 32;case mo:return 268435456;default:return 32}default:return 32}}var Rc=!1,_a=null,Aa=null,Ta=null,Bl=new Map,ql=new Map,Da=[],r0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pm(t,a){switch(t){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Bl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ql.delete(a.pointerId)}}function Ul(t,a,s,l,n,r){return t===null||t.nativeEvent!==r?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},a!==null&&(a=ss(a),a!==null&&Jm(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),t)}function c0(t,a,s,l,n){switch(a){case"focusin":return _a=Ul(_a,t,a,s,l,n),!0;case"dragenter":return Aa=Ul(Aa,t,a,s,l,n),!0;case"mouseover":return Ta=Ul(Ta,t,a,s,l,n),!0;case"pointerover":var r=n.pointerId;return Bl.set(r,Ul(Bl.get(r)||null,t,a,s,l,n)),!0;case"gotpointercapture":return r=n.pointerId,ql.set(r,Ul(ql.get(r)||null,t,a,s,l,n)),!0}return!1}function Wm(t){var a=as(t.target);if(a!==null){var s=m(a);if(s!==null){if(a=s.tag,a===13){if(a=y(s),a!==null){t.blockedOn=a,eh(t.priority,function(){if(s.tag===13){var l=vt();l=Si(l);var n=fs(s,l);n!==null&&jt(n,s,l),_c(s,l)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ci(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=Tc(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Oi=l,s.target.dispatchEvent(l),Oi=null}else return a=ss(s),a!==null&&Jm(a),t.blockedOn=s,!1;a.shift()}return!0}function Im(t,a,s){ci(t)&&s.delete(a)}function o0(){Rc=!1,_a!==null&&ci(_a)&&(_a=null),Aa!==null&&ci(Aa)&&(Aa=null),Ta!==null&&ci(Ta)&&(Ta=null),Bl.forEach(Im),ql.forEach(Im)}function oi(t,a){t.blockedOn===a&&(t.blockedOn=null,Rc||(Rc=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,o0)))}var di=null;function ex(t){di!==t&&(di=t,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){di===t&&(di=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],n=t[a+2];if(typeof l!="function"){if(Dc(l||s)===null)continue;break}var r=ss(s);r!==null&&(t.splice(a,3),a-=3,Dr(r,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function $l(t){function a(L){return oi(L,t)}_a!==null&&oi(_a,t),Aa!==null&&oi(Aa,t),Ta!==null&&oi(Ta,t),Bl.forEach(a),ql.forEach(a);for(var s=0;s<Da.length;s++){var l=Da[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Da.length&&(s=Da[0],s.blockedOn===null);)Wm(s),s.blockedOn===null&&Da.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],r=s[l+1],h=n[rt]||null;if(typeof r=="function")h||ex(s);else if(h){var S=null;if(r&&r.hasAttribute("formAction")){if(n=r,h=r[rt]||null)S=h.formAction;else if(Dc(n)!==null)continue}else S=h.action;typeof S=="function"?s[l+1]=S:(s.splice(l,3),l-=3),ex(s)}}}function zc(t){this._internalRoot=t}ui.prototype.render=zc.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(o(409));var s=a.current,l=vt();Zm(s,l,t,a,null,null)},ui.prototype.unmount=zc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Zm(t.current,2,null,t,null,null),Vn(),a[ts]=null}};function ui(t){this._internalRoot=t}ui.prototype.unstable_scheduleHydration=function(t){if(t){var a=go();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Da.length&&a!==0&&a<Da[s].priority;s++);Da.splice(s,0,t),s===0&&Wm(t)}};var tx=i.version;if(tx!=="19.1.1")throw Error(o(527,tx,"19.1.1"));z.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=g(a),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var d0={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:f,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{Xs=mi.inject(d0),xt=mi}catch{}}return Yl.createRoot=function(t,a){if(!u(t))throw Error(o(299));var s=!1,l="",n=gu,r=bu,h=yu,S=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(n=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(h=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks)),a=Xm(t,1,!1,null,null,s,l,n,r,h,S,null),t[ts]=a.current,pc(t),new zc(a)},Yl.hydrateRoot=function(t,a,s){if(!u(t))throw Error(o(299));var l=!1,n="",r=gu,h=bu,S=yu,L=null,K=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(L=s.unstable_transitionCallbacks),s.formState!==void 0&&(K=s.formState)),a=Xm(t,1,!0,a,s??null,l,n,r,h,S,L,K),a.context=Vm(null),s=a.current,l=vt(),l=Si(l),n=fa(l),n.callback=null,pa(s,n,l),s=l,a.current.lanes=s,Zs(a,s),Gt(a),t[ts]=a.current,pc(t),new ui(a)},Yl.version="19.1.1",Yl}var ux;function j0(){if(ux)return Lc.exports;ux=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(i){console.error(i)}}return c(),Lc.exports=v0(),Lc.exports}var N0=j0();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mx="popstate";function w0(c={}){function i(o,u){let{pathname:m,search:y,hash:b}=o.location;return Wc("",{pathname:m,search:y,hash:b},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function d(o,u){return typeof u=="string"?u:Jl(u)}return S0(i,d,null,c)}function Oe(c,i){if(c===!1||c===null||typeof c>"u")throw new Error(i)}function Tt(c,i){if(!c){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function k0(){return Math.random().toString(36).substring(2,10)}function xx(c,i){return{usr:c.state,key:c.key,idx:i}}function Wc(c,i,d=null,o){return{pathname:typeof c=="string"?c:c.pathname,search:"",hash:"",...typeof i=="string"?$s(i):i,state:d,key:i&&i.key||o||k0()}}function Jl({pathname:c="/",search:i="",hash:d=""}){return i&&i!=="?"&&(c+=i.charAt(0)==="?"?i:"?"+i),d&&d!=="#"&&(c+=d.charAt(0)==="#"?d:"#"+d),c}function $s(c){let i={};if(c){let d=c.indexOf("#");d>=0&&(i.hash=c.substring(d),c=c.substring(0,d));let o=c.indexOf("?");o>=0&&(i.search=c.substring(o),c=c.substring(0,o)),c&&(i.pathname=c)}return i}function S0(c,i,d,o={}){let{window:u=document.defaultView,v5Compat:m=!1}=o,y=u.history,b="POP",g=null,x=C();x==null&&(x=0,y.replaceState({...y.state,idx:x},""));function C(){return(y.state||{idx:null}).idx}function p(){b="POP";let v=C(),N=v==null?null:v-x;x=v,g&&g({action:b,location:D.location,delta:N})}function A(v,N){b="PUSH";let w=Wc(D.location,v,N);x=C()+1;let _=xx(w,x),E=D.createHref(w);try{y.pushState(_,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;u.location.assign(E)}m&&g&&g({action:b,location:D.location,delta:1})}function T(v,N){b="REPLACE";let w=Wc(D.location,v,N);x=C();let _=xx(w,x),E=D.createHref(w);y.replaceState(_,"",E),m&&g&&g({action:b,location:D.location,delta:0})}function M(v){return C0(v)}let D={get action(){return b},get location(){return c(u,y)},listen(v){if(g)throw new Error("A history only accepts one active listener");return u.addEventListener(mx,p),g=v,()=>{u.removeEventListener(mx,p),g=null}},createHref(v){return i(u,v)},createURL:M,encodeLocation(v){let N=M(v);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:A,replace:T,go(v){return y.go(v)}};return D}function C0(c,i=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),Oe(d,"No window.location.(origin|href) available to create URL");let o=typeof c=="string"?c:Jl(c);return o=o.replace(/ $/,"%20"),!i&&o.startsWith("//")&&(o=d+o),new URL(o,d)}function wx(c,i,d="/"){return M0(c,i,d,!1)}function M0(c,i,d,o){let u=typeof i=="string"?$s(i):i,m=ca(u.pathname||"/",d);if(m==null)return null;let y=kx(c);E0(y);let b=null;for(let g=0;b==null&&g<y.length;++g){let x=q0(m);b=L0(y[g],x,o)}return b}function kx(c,i=[],d=[],o="",u=!1){let m=(y,b,g=u,x)=>{let C={relativePath:x===void 0?y.path||"":x,caseSensitive:y.caseSensitive===!0,childrenIndex:b,route:y};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(o)&&g)return;Oe(C.relativePath.startsWith(o),`Absolute route path "${C.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(o.length)}let p=ra([o,C.relativePath]),A=d.concat(C);y.children&&y.children.length>0&&(Oe(y.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),kx(y.children,i,A,p,g)),!(y.path==null&&!y.index)&&i.push({path:p,score:O0(p,y.index),routesMeta:A})};return c.forEach((y,b)=>{if(y.path===""||!y.path?.includes("?"))m(y,b);else for(let g of Sx(y.path))m(y,b,!0,g)}),i}function Sx(c){let i=c.split("/");if(i.length===0)return[];let[d,...o]=i,u=d.endsWith("?"),m=d.replace(/\?$/,"");if(o.length===0)return u?[m,""]:[m];let y=Sx(o.join("/")),b=[];return b.push(...y.map(g=>g===""?m:[m,g].join("/"))),u&&b.push(...y),b.map(g=>c.startsWith("/")&&g===""?"/":g)}function E0(c){c.sort((i,d)=>i.score!==d.score?d.score-i.score:H0(i.routesMeta.map(o=>o.childrenIndex),d.routesMeta.map(o=>o.childrenIndex)))}var _0=/^:[\w-]+$/,A0=3,T0=2,D0=1,R0=10,z0=-2,hx=c=>c==="*";function O0(c,i){let d=c.split("/"),o=d.length;return d.some(hx)&&(o+=z0),i&&(o+=T0),d.filter(u=>!hx(u)).reduce((u,m)=>u+(_0.test(m)?A0:m===""?D0:R0),o)}function H0(c,i){return c.length===i.length&&c.slice(0,-1).every((o,u)=>o===i[u])?c[c.length-1]-i[i.length-1]:0}function L0(c,i,d=!1){let{routesMeta:o}=c,u={},m="/",y=[];for(let b=0;b<o.length;++b){let g=o[b],x=b===o.length-1,C=m==="/"?i:i.slice(m.length)||"/",p=yi({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},C),A=g.route;if(!p&&x&&d&&!o[o.length-1].route.index&&(p=yi({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},C)),!p)return null;Object.assign(u,p.params),y.push({params:u,pathname:ra([m,p.pathname]),pathnameBase:Y0(ra([m,p.pathnameBase])),route:A}),p.pathnameBase!=="/"&&(m=ra([m,p.pathnameBase]))}return y}function yi(c,i){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[d,o]=B0(c.path,c.caseSensitive,c.end),u=i.match(d);if(!u)return null;let m=u[0],y=m.replace(/(.)\/+$/,"$1"),b=u.slice(1);return{params:o.reduce((x,{paramName:C,isOptional:p},A)=>{if(C==="*"){let M=b[A]||"";y=m.slice(0,m.length-M.length).replace(/(.)\/+$/,"$1")}const T=b[A];return p&&!T?x[C]=void 0:x[C]=(T||"").replace(/%2F/g,"/"),x},{}),pathname:m,pathnameBase:y,pattern:c}}function B0(c,i=!1,d=!0){Tt(c==="*"||!c.endsWith("*")||c.endsWith("/*"),`Route path "${c}" will be treated as if it were "${c.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${c.replace(/\*$/,"/*")}".`);let o=[],u="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,b,g)=>(o.push({paramName:b,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return c.endsWith("*")?(o.push({paramName:"*"}),u+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?u+="\\/*$":c!==""&&c!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,i?void 0:"i"),o]}function q0(c){try{return c.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Tt(!1,`The URL path "${c}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),c}}function ca(c,i){if(i==="/")return c;if(!c.toLowerCase().startsWith(i.toLowerCase()))return null;let d=i.endsWith("/")?i.length-1:i.length,o=c.charAt(d);return o&&o!=="/"?null:c.slice(d)||"/"}function U0(c,i="/"){let{pathname:d,search:o="",hash:u=""}=typeof c=="string"?$s(c):c;return{pathname:d?d.startsWith("/")?d:$0(d,i):i,search:Q0(o),hash:X0(u)}}function $0(c,i){let d=i.replace(/\/+$/,"").split("/");return c.split("/").forEach(u=>{u===".."?d.length>1&&d.pop():u!=="."&&d.push(u)}),d.length>1?d.join("/"):"/"}function $c(c,i,d,o){return`Cannot include a '${c}' character in a manually specified \`to.${i}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function G0(c){return c.filter((i,d)=>d===0||i.route.path&&i.route.path.length>0)}function ao(c){let i=G0(c);return i.map((d,o)=>o===i.length-1?d.pathname:d.pathnameBase)}function so(c,i,d,o=!1){let u;typeof c=="string"?u=$s(c):(u={...c},Oe(!u.pathname||!u.pathname.includes("?"),$c("?","pathname","search",u)),Oe(!u.pathname||!u.pathname.includes("#"),$c("#","pathname","hash",u)),Oe(!u.search||!u.search.includes("#"),$c("#","search","hash",u)));let m=c===""||u.pathname==="",y=m?"/":u.pathname,b;if(y==null)b=d;else{let p=i.length-1;if(!o&&y.startsWith("..")){let A=y.split("/");for(;A[0]==="..";)A.shift(),p-=1;u.pathname=A.join("/")}b=p>=0?i[p]:"/"}let g=U0(u,b),x=y&&y!=="/"&&y.endsWith("/"),C=(m||y===".")&&d.endsWith("/");return!g.pathname.endsWith("/")&&(x||C)&&(g.pathname+="/"),g}var ra=c=>c.join("/").replace(/\/\/+/g,"/"),Y0=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),Q0=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,X0=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function V0(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}var Cx=["POST","PUT","PATCH","DELETE"];new Set(Cx);var Z0=["GET",...Cx];new Set(Z0);var Gs=j.createContext(null);Gs.displayName="DataRouter";var ji=j.createContext(null);ji.displayName="DataRouterState";j.createContext(!1);var Mx=j.createContext({isTransitioning:!1});Mx.displayName="ViewTransition";var K0=j.createContext(new Map);K0.displayName="Fetchers";var J0=j.createContext(null);J0.displayName="Await";var Ht=j.createContext(null);Ht.displayName="Navigation";var Fl=j.createContext(null);Fl.displayName="Location";var Yt=j.createContext({outlet:null,matches:[],isDataRoute:!1});Yt.displayName="Route";var lo=j.createContext(null);lo.displayName="RouteError";function F0(c,{relative:i}={}){Oe(Ys(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:o}=j.useContext(Ht),{hash:u,pathname:m,search:y}=Pl(c,{relative:i}),b=m;return d!=="/"&&(b=m==="/"?d:ra([d,m])),o.createHref({pathname:b,search:y,hash:u})}function Ys(){return j.useContext(Fl)!=null}function oa(){return Oe(Ys(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Fl).location}var Ex="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _x(c){j.useContext(Ht).static||j.useLayoutEffect(c)}function Ee(){let{isDataRoute:c}=j.useContext(Yt);return c?op():P0()}function P0(){Oe(Ys(),"useNavigate() may be used only in the context of a <Router> component.");let c=j.useContext(Gs),{basename:i,navigator:d}=j.useContext(Ht),{matches:o}=j.useContext(Yt),{pathname:u}=oa(),m=JSON.stringify(ao(o)),y=j.useRef(!1);return _x(()=>{y.current=!0}),j.useCallback((g,x={})=>{if(Tt(y.current,Ex),!y.current)return;if(typeof g=="number"){d.go(g);return}let C=so(g,JSON.parse(m),u,x.relative==="path");c==null&&i!=="/"&&(C.pathname=C.pathname==="/"?i:ra([i,C.pathname])),(x.replace?d.replace:d.push)(C,x.state,x)},[i,d,m,u,c])}j.createContext(null);function Pl(c,{relative:i}={}){let{matches:d}=j.useContext(Yt),{pathname:o}=oa(),u=JSON.stringify(ao(d));return j.useMemo(()=>so(c,JSON.parse(u),o,i==="path"),[c,u,o,i])}function W0(c,i){return Ax(c,i)}function Ax(c,i,d,o,u){Oe(Ys(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=j.useContext(Ht),{matches:y}=j.useContext(Yt),b=y[y.length-1],g=b?b.params:{},x=b?b.pathname:"/",C=b?b.pathnameBase:"/",p=b&&b.route;{let w=p&&p.path||"";Tx(x,!p||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let A=oa(),T;if(i){let w=typeof i=="string"?$s(i):i;Oe(C==="/"||w.pathname?.startsWith(C),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${w.pathname}" was given in the \`location\` prop.`),T=w}else T=A;let M=T.pathname||"/",D=M;if(C!=="/"){let w=C.replace(/^\//,"").split("/");D="/"+M.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=wx(c,{pathname:D});Tt(p||v!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Tt(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=sp(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},g,w.params),pathname:ra([C,m.encodeLocation?m.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?C:ra([C,m.encodeLocation?m.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),y,d,o,u);return i&&N?j.createElement(Fl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},N):N}function I0(){let c=cp(),i=V0(c)?`${c.status} ${c.statusText}`:c instanceof Error?c.message:JSON.stringify(c),d=c instanceof Error?c.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},m={padding:"2px 4px",backgroundColor:o},y=null;return console.error("Error handled by React Router default ErrorBoundary:",c),y=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:m},"ErrorBoundary")," or"," ",j.createElement("code",{style:m},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},i),d?j.createElement("pre",{style:u},d):null,y)}var ep=j.createElement(I0,null),tp=class extends j.Component{constructor(c){super(c),this.state={location:c.location,revalidation:c.revalidation,error:c.error}}static getDerivedStateFromError(c){return{error:c}}static getDerivedStateFromProps(c,i){return i.location!==c.location||i.revalidation!=="idle"&&c.revalidation==="idle"?{error:c.error,location:c.location,revalidation:c.revalidation}:{error:c.error!==void 0?c.error:i.error,location:i.location,revalidation:c.revalidation||i.revalidation}}componentDidCatch(c,i){this.props.unstable_onError?this.props.unstable_onError(c,i):console.error("React Router caught the following error during render",c)}render(){return this.state.error!==void 0?j.createElement(Yt.Provider,{value:this.props.routeContext},j.createElement(lo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ap({routeContext:c,match:i,children:d}){let o=j.useContext(Gs);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),j.createElement(Yt.Provider,{value:c},d)}function sp(c,i=[],d=null,o=null,u=null){if(c==null){if(!d)return null;if(d.errors)c=d.matches;else if(i.length===0&&!d.initialized&&d.matches.length>0)c=d.matches;else return null}let m=c,y=d?.errors;if(y!=null){let x=m.findIndex(C=>C.route.id&&y?.[C.route.id]!==void 0);Oe(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),m=m.slice(0,Math.min(m.length,x+1))}let b=!1,g=-1;if(d)for(let x=0;x<m.length;x++){let C=m[x];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(g=x),C.route.id){let{loaderData:p,errors:A}=d,T=C.route.loader&&!p.hasOwnProperty(C.route.id)&&(!A||A[C.route.id]===void 0);if(C.route.lazy||T){b=!0,g>=0?m=m.slice(0,g+1):m=[m[0]];break}}}return m.reduceRight((x,C,p)=>{let A,T=!1,M=null,D=null;d&&(A=y&&C.route.id?y[C.route.id]:void 0,M=C.route.errorElement||ep,b&&(g<0&&p===0?(Tx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,D=null):g===p&&(T=!0,D=C.route.hydrateFallbackElement||null)));let v=i.concat(m.slice(0,p+1)),N=()=>{let w;return A?w=M:T?w=D:C.route.Component?w=j.createElement(C.route.Component,null):C.route.element?w=C.route.element:w=x,j.createElement(ap,{match:C,routeContext:{outlet:x,matches:v,isDataRoute:d!=null},children:w})};return d&&(C.route.ErrorBoundary||C.route.errorElement||p===0)?j.createElement(tp,{location:d.location,revalidation:d.revalidation,component:M,error:A,children:N(),routeContext:{outlet:null,matches:v,isDataRoute:!0},unstable_onError:o}):N()},null)}function no(c){return`${c} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lp(c){let i=j.useContext(Gs);return Oe(i,no(c)),i}function np(c){let i=j.useContext(ji);return Oe(i,no(c)),i}function ip(c){let i=j.useContext(Yt);return Oe(i,no(c)),i}function io(c){let i=ip(c),d=i.matches[i.matches.length-1];return Oe(d.route.id,`${c} can only be used on routes that contain a unique "id"`),d.route.id}function rp(){return io("useRouteId")}function cp(){let c=j.useContext(lo),i=np("useRouteError"),d=io("useRouteError");return c!==void 0?c:i.errors?.[d]}function op(){let{router:c}=lp("useNavigate"),i=io("useNavigate"),d=j.useRef(!1);return _x(()=>{d.current=!0}),j.useCallback(async(u,m={})=>{Tt(d.current,Ex),d.current&&(typeof u=="number"?c.navigate(u):await c.navigate(u,{fromRouteId:i,...m}))},[c,i])}var fx={};function Tx(c,i,d){!i&&!fx[c]&&(fx[c]=!0,Tt(!1,d))}j.memo(dp);function dp({routes:c,future:i,state:d,unstable_onError:o}){return Ax(c,void 0,d,o,i)}function up({to:c,replace:i,state:d,relative:o}){Oe(Ys(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=j.useContext(Ht);Tt(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=j.useContext(Yt),{pathname:y}=oa(),b=Ee(),g=so(c,ao(m),y,o==="path"),x=JSON.stringify(g);return j.useEffect(()=>{b(JSON.parse(x),{replace:i,state:d,relative:o})},[b,x,o,i,d]),null}function pe(c){Oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mp({basename:c="/",children:i=null,location:d,navigationType:o="POP",navigator:u,static:m=!1}){Oe(!Ys(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=c.replace(/^\/*/,"/"),b=j.useMemo(()=>({basename:y,navigator:u,static:m,future:{}}),[y,u,m]);typeof d=="string"&&(d=$s(d));let{pathname:g="/",search:x="",hash:C="",state:p=null,key:A="default"}=d,T=j.useMemo(()=>{let M=ca(g,y);return M==null?null:{location:{pathname:M,search:x,hash:C,state:p,key:A},navigationType:o}},[y,g,x,C,p,A,o]);return Tt(T!=null,`<Router basename="${y}"> is not able to match the URL "${g}${x}${C}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:j.createElement(Ht.Provider,{value:b},j.createElement(Fl.Provider,{children:i,value:T}))}function xp({children:c,location:i}){return W0(Ic(c),i)}function Ic(c,i=[]){let d=[];return j.Children.forEach(c,(o,u)=>{if(!j.isValidElement(o))return;let m=[...i,u];if(o.type===j.Fragment){d.push.apply(d,Ic(o.props.children,m));return}Oe(o.type===pe,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let y={id:o.props.id||m.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(y.children=Ic(o.props.children,m)),d.push(y)}),d}var gi="get",bi="application/x-www-form-urlencoded";function Ni(c){return c!=null&&typeof c.tagName=="string"}function hp(c){return Ni(c)&&c.tagName.toLowerCase()==="button"}function fp(c){return Ni(c)&&c.tagName.toLowerCase()==="form"}function pp(c){return Ni(c)&&c.tagName.toLowerCase()==="input"}function gp(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function bp(c,i){return c.button===0&&(!i||i==="_self")&&!gp(c)}function eo(c=""){return new URLSearchParams(typeof c=="string"||Array.isArray(c)||c instanceof URLSearchParams?c:Object.keys(c).reduce((i,d)=>{let o=c[d];return i.concat(Array.isArray(o)?o.map(u=>[d,u]):[[d,o]])},[]))}function yp(c,i){let d=eo(c);return i&&i.forEach((o,u)=>{d.has(u)||i.getAll(u).forEach(m=>{d.append(u,m)})}),d}var xi=null;function vp(){if(xi===null)try{new FormData(document.createElement("form"),0),xi=!1}catch{xi=!0}return xi}var jp=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gc(c){return c!=null&&!jp.has(c)?(Tt(!1,`"${c}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bi}"`),null):c}function Np(c,i){let d,o,u,m,y;if(fp(c)){let b=c.getAttribute("action");o=b?ca(b,i):null,d=c.getAttribute("method")||gi,u=Gc(c.getAttribute("enctype"))||bi,m=new FormData(c)}else if(hp(c)||pp(c)&&(c.type==="submit"||c.type==="image")){let b=c.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=c.getAttribute("formaction")||b.getAttribute("action");if(o=g?ca(g,i):null,d=c.getAttribute("formmethod")||b.getAttribute("method")||gi,u=Gc(c.getAttribute("formenctype"))||Gc(b.getAttribute("enctype"))||bi,m=new FormData(b,c),!vp()){let{name:x,type:C,value:p}=c;if(C==="image"){let A=x?`${x}.`:"";m.append(`${A}x`,"0"),m.append(`${A}y`,"0")}else x&&m.append(x,p)}}else{if(Ni(c))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=gi,o=null,u=bi,y=c}return m&&u==="text/plain"&&(y=m,m=void 0),{action:o,method:d.toLowerCase(),encType:u,formData:m,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ro(c,i){if(c===!1||c===null||typeof c>"u")throw new Error(i)}function wp(c,i,d){let o=typeof c=="string"?new URL(c,typeof window>"u"?"server://singlefetch/":window.location.origin):c;return o.pathname==="/"?o.pathname=`_root.${d}`:i&&ca(o.pathname,i)==="/"?o.pathname=`${i.replace(/\/$/,"")}/_root.${d}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${d}`,o}async function kp(c,i){if(c.id in i)return i[c.id];try{let d=await import(c.module);return i[c.id]=d,d}catch(d){return console.error(`Error loading route module \`${c.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Sp(c){return c==null?!1:c.href==null?c.rel==="preload"&&typeof c.imageSrcSet=="string"&&typeof c.imageSizes=="string":typeof c.rel=="string"&&typeof c.href=="string"}async function Cp(c,i,d){let o=await Promise.all(c.map(async u=>{let m=i.routes[u.route.id];if(m){let y=await kp(m,d);return y.links?y.links():[]}return[]}));return Ap(o.flat(1).filter(Sp).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function px(c,i,d,o,u,m){let y=(g,x)=>d[x]?g.route.id!==d[x].route.id:!0,b=(g,x)=>d[x].pathname!==g.pathname||d[x].route.path?.endsWith("*")&&d[x].params["*"]!==g.params["*"];return m==="assets"?i.filter((g,x)=>y(g,x)||b(g,x)):m==="data"?i.filter((g,x)=>{let C=o.routes[g.route.id];if(!C||!C.hasLoader)return!1;if(y(g,x)||b(g,x))return!0;if(g.route.shouldRevalidate){let p=g.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(c,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Mp(c,i,{includeHydrateFallback:d}={}){return Ep(c.map(o=>{let u=i.routes[o.route.id];if(!u)return[];let m=[u.module];return u.clientActionModule&&(m=m.concat(u.clientActionModule)),u.clientLoaderModule&&(m=m.concat(u.clientLoaderModule)),d&&u.hydrateFallbackModule&&(m=m.concat(u.hydrateFallbackModule)),u.imports&&(m=m.concat(u.imports)),m}).flat(1))}function Ep(c){return[...new Set(c)]}function _p(c){let i={},d=Object.keys(c).sort();for(let o of d)i[o]=c[o];return i}function Ap(c,i){let d=new Set;return new Set(i),c.reduce((o,u)=>{let m=JSON.stringify(_p(u));return d.has(m)||(d.add(m),o.push({key:m,link:u})),o},[])}function Dx(){let c=j.useContext(Gs);return ro(c,"You must render this element inside a <DataRouterContext.Provider> element"),c}function Tp(){let c=j.useContext(ji);return ro(c,"You must render this element inside a <DataRouterStateContext.Provider> element"),c}var co=j.createContext(void 0);co.displayName="FrameworkContext";function Rx(){let c=j.useContext(co);return ro(c,"You must render this element inside a <HydratedRouter> element"),c}function Dp(c,i){let d=j.useContext(co),[o,u]=j.useState(!1),[m,y]=j.useState(!1),{onFocus:b,onBlur:g,onMouseEnter:x,onMouseLeave:C,onTouchStart:p}=i,A=j.useRef(null);j.useEffect(()=>{if(c==="render"&&y(!0),c==="viewport"){let D=N=>{N.forEach(w=>{y(w.isIntersecting)})},v=new IntersectionObserver(D,{threshold:.5});return A.current&&v.observe(A.current),()=>{v.disconnect()}}},[c]),j.useEffect(()=>{if(o){let D=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(D)}}},[o]);let T=()=>{u(!0)},M=()=>{u(!1),y(!1)};return d?c!=="intent"?[m,A,{}]:[m,A,{onFocus:Ql(b,T),onBlur:Ql(g,M),onMouseEnter:Ql(x,T),onMouseLeave:Ql(C,M),onTouchStart:Ql(p,T)}]:[!1,A,{}]}function Ql(c,i){return d=>{c&&c(d),d.defaultPrevented||i(d)}}function Rp({page:c,...i}){let{router:d}=Dx(),o=j.useMemo(()=>wx(d.routes,c,d.basename),[d.routes,c,d.basename]);return o?j.createElement(Op,{page:c,matches:o,...i}):null}function zp(c){let{manifest:i,routeModules:d}=Rx(),[o,u]=j.useState([]);return j.useEffect(()=>{let m=!1;return Cp(c,i,d).then(y=>{m||u(y)}),()=>{m=!0}},[c,i,d]),o}function Op({page:c,matches:i,...d}){let o=oa(),{manifest:u,routeModules:m}=Rx(),{basename:y}=Dx(),{loaderData:b,matches:g}=Tp(),x=j.useMemo(()=>px(c,i,g,u,o,"data"),[c,i,g,u,o]),C=j.useMemo(()=>px(c,i,g,u,o,"assets"),[c,i,g,u,o]),p=j.useMemo(()=>{if(c===o.pathname+o.search+o.hash)return[];let M=new Set,D=!1;if(i.forEach(N=>{let w=u.routes[N.route.id];!w||!w.hasLoader||(!x.some(_=>_.route.id===N.route.id)&&N.route.id in b&&m[N.route.id]?.shouldRevalidate||w.hasClientLoader?D=!0:M.add(N.route.id))}),M.size===0)return[];let v=wp(c,y,"data");return D&&M.size>0&&v.searchParams.set("_routes",i.filter(N=>M.has(N.route.id)).map(N=>N.route.id).join(",")),[v.pathname+v.search]},[y,b,o,u,x,i,c,m]),A=j.useMemo(()=>Mp(C,u),[C,u]),T=zp(C);return j.createElement(j.Fragment,null,p.map(M=>j.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...d})),A.map(M=>j.createElement("link",{key:M,rel:"modulepreload",href:M,...d})),T.map(({key:M,link:D})=>j.createElement("link",{key:M,nonce:d.nonce,...D})))}function Hp(...c){return i=>{c.forEach(d=>{typeof d=="function"?d(i):d!=null&&(d.current=i)})}}var zx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zx&&(window.__reactRouterVersion="7.9.1")}catch{}function Lp({basename:c,children:i,window:d}){let o=j.useRef();o.current==null&&(o.current=w0({window:d,v5Compat:!0}));let u=o.current,[m,y]=j.useState({action:u.action,location:u.location}),b=j.useCallback(g=>{j.startTransition(()=>y(g))},[y]);return j.useLayoutEffect(()=>u.listen(b),[u,b]),j.createElement(mp,{basename:c,children:i,location:m.location,navigationType:m.action,navigator:u})}var Ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hx=j.forwardRef(function({onClick:i,discover:d="render",prefetch:o="none",relative:u,reloadDocument:m,replace:y,state:b,target:g,to:x,preventScrollReset:C,viewTransition:p,...A},T){let{basename:M}=j.useContext(Ht),D=typeof x=="string"&&Ox.test(x),v,N=!1;if(typeof x=="string"&&D&&(v=x,zx))try{let le=new URL(window.location.href),F=x.startsWith("//")?new URL(le.protocol+x):new URL(x),ce=ca(F.pathname,M);F.origin===le.origin&&ce!=null?x=ce+F.search+F.hash:N=!0}catch{Tt(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=F0(x,{relative:u}),[_,E,k]=Dp(o,A),R=$p(x,{replace:y,state:b,target:g,preventScrollReset:C,relative:u,viewTransition:p});function X(le){i&&i(le),le.defaultPrevented||R(le)}let q=j.createElement("a",{...A,...k,href:v||w,onClick:N||m?i:X,ref:Hp(T,E),target:g,"data-discover":!D&&d==="render"?"true":void 0});return _&&!D?j.createElement(j.Fragment,null,q,j.createElement(Rp,{page:w})):q});Hx.displayName="Link";var Bp=j.forwardRef(function({"aria-current":i="page",caseSensitive:d=!1,className:o="",end:u=!1,style:m,to:y,viewTransition:b,children:g,...x},C){let p=Pl(y,{relative:x.relative}),A=oa(),T=j.useContext(ji),{navigator:M,basename:D}=j.useContext(Ht),v=T!=null&&Zp(p)&&b===!0,N=M.encodeLocation?M.encodeLocation(p).pathname:p.pathname,w=A.pathname,_=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;d||(w=w.toLowerCase(),_=_?_.toLowerCase():null,N=N.toLowerCase()),_&&D&&(_=ca(_,D)||_);const E=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let k=w===N||!u&&w.startsWith(N)&&w.charAt(E)==="/",R=_!=null&&(_===N||!u&&_.startsWith(N)&&_.charAt(N.length)==="/"),X={isActive:k,isPending:R,isTransitioning:v},q=k?i:void 0,le;typeof o=="function"?le=o(X):le=[o,k?"active":null,R?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let F=typeof m=="function"?m(X):m;return j.createElement(Hx,{...x,"aria-current":q,className:le,ref:C,style:F,to:y,viewTransition:b},typeof g=="function"?g(X):g)});Bp.displayName="NavLink";var qp=j.forwardRef(({discover:c="render",fetcherKey:i,navigate:d,reloadDocument:o,replace:u,state:m,method:y=gi,action:b,onSubmit:g,relative:x,preventScrollReset:C,viewTransition:p,...A},T)=>{let M=Xp(),D=Vp(b,{relative:x}),v=y.toLowerCase()==="get"?"get":"post",N=typeof b=="string"&&Ox.test(b),w=_=>{if(g&&g(_),_.defaultPrevented)return;_.preventDefault();let E=_.nativeEvent.submitter,k=E?.getAttribute("formmethod")||y;M(E||_.currentTarget,{fetcherKey:i,method:k,navigate:d,replace:u,state:m,relative:x,preventScrollReset:C,viewTransition:p})};return j.createElement("form",{ref:T,method:v,action:D,onSubmit:o?g:w,...A,"data-discover":!N&&c==="render"?"true":void 0})});qp.displayName="Form";function Up(c){return`${c} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Lx(c){let i=j.useContext(Gs);return Oe(i,Up(c)),i}function $p(c,{target:i,replace:d,state:o,preventScrollReset:u,relative:m,viewTransition:y}={}){let b=Ee(),g=oa(),x=Pl(c,{relative:m});return j.useCallback(C=>{if(bp(C,i)){C.preventDefault();let p=d!==void 0?d:Jl(g)===Jl(x);b(c,{replace:p,state:o,preventScrollReset:u,relative:m,viewTransition:y})}},[g,b,x,d,o,i,c,u,m,y])}function Gp(c){Tt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=j.useRef(eo(c)),d=j.useRef(!1),o=oa(),u=j.useMemo(()=>yp(o.search,d.current?null:i.current),[o.search]),m=Ee(),y=j.useCallback((b,g)=>{const x=eo(typeof b=="function"?b(new URLSearchParams(u)):b);d.current=!0,m("?"+x,g)},[m,u]);return[u,y]}var Yp=0,Qp=()=>`__${String(++Yp)}__`;function Xp(){let{router:c}=Lx("useSubmit"),{basename:i}=j.useContext(Ht),d=rp();return j.useCallback(async(o,u={})=>{let{action:m,method:y,encType:b,formData:g,body:x}=Np(o,i);if(u.navigate===!1){let C=u.fetcherKey||Qp();await c.fetch(C,d,u.action||m,{preventScrollReset:u.preventScrollReset,formData:g,body:x,formMethod:u.method||y,formEncType:u.encType||b,flushSync:u.flushSync})}else await c.navigate(u.action||m,{preventScrollReset:u.preventScrollReset,formData:g,body:x,formMethod:u.method||y,formEncType:u.encType||b,replace:u.replace,state:u.state,fromRouteId:d,flushSync:u.flushSync,viewTransition:u.viewTransition})},[c,i,d])}function Vp(c,{relative:i}={}){let{basename:d}=j.useContext(Ht),o=j.useContext(Yt);Oe(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),m={...Pl(c||".",{relative:i})},y=oa();if(c==null){m.search=y.search;let b=new URLSearchParams(m.search),g=b.getAll("index");if(g.some(C=>C==="")){b.delete("index"),g.filter(p=>p).forEach(p=>b.append("index",p));let C=b.toString();m.search=C?`?${C}`:""}}return(!c||c===".")&&u.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(m.pathname=m.pathname==="/"?d:ra([d,m.pathname])),Jl(m)}function Zp(c,{relative:i}={}){let d=j.useContext(Mx);Oe(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Lx("useViewTransitionState"),u=Pl(c,{relative:i});if(!d.isTransitioning)return!1;let m=ca(d.currentLocation.pathname,o)||d.currentLocation.pathname,y=ca(d.nextLocation.pathname,o)||d.nextLocation.pathname;return yi(u.pathname,y)!=null||yi(u.pathname,m)!=null}const gx=c=>{let i;const d=new Set,o=(x,C)=>{const p=typeof x=="function"?x(i):x;if(!Object.is(p,i)){const A=i;i=C??(typeof p!="object"||p===null)?p:Object.assign({},i,p),d.forEach(T=>T(i,A))}},u=()=>i,b={setState:o,getState:u,getInitialState:()=>g,subscribe:x=>(d.add(x),()=>d.delete(x))},g=i=c(o,u,b);return b},Kp=(c=>c?gx(c):gx),Jp=c=>c;function Fp(c,i=Jp){const d=at.useSyncExternalStore(c.subscribe,at.useCallback(()=>i(c.getState()),[c,i]),at.useCallback(()=>i(c.getInitialState()),[c,i]));return at.useDebugValue(d),d}const bx=c=>{const i=Kp(c),d=o=>Fp(i,o);return Object.assign(d,i),d},Pp=(c=>c?bx(c):bx),Wp={id:"sakura",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["",""],baseText:"  .    .",dialogues:{0:"...   ?",20:"  .",40:"    .",60:" ...  .",80:"     ...",100:"      ."},sprite:"",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},Ip={id:"yuki",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["",""],baseText:"  .    .",dialogues:{0:"... ...",20:" ...  ?",40:"   .",60:" ...   .",80:" ... ?",100:"    ."},sprite:"",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},eg={id:"luna",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["",""],baseText:" .      .",dialogues:{0:"!  ? !",20:"   !",40:"      .",60:"     .",80:"    .",100:"  .  ."},sprite:"",image:"https://images.unsplash.com/photo-1727466443068-779e1f8fe8e8?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjdXRlJTIwYW5pbWUlMjBib3klMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDExOTQyfDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},tg={id:"mystery",name:"???",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["",""],baseText:" .      .",dialogues:{0:"... ?",20:" .",40:"   .",60:" ...   ?",80:"...   .",100:"   ."},sprite:"",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",unlockCondition:{day:10,totalAffection:150}},ag={id:"akane",name:"",role:"",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:[""," ",""],baseText:"  .   .",dialogues:{0:".   ?",20:"   .",40:"  ...   .",60:"      .",80:" ...    ...",100:"  ... ."},sprite:"",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080"},sg={id:"hana",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:[" ","",""],baseText:"   .   .",dialogues:{0:" ?    ?",20:"    .",40:"    .",60:"    .",80:"    .",100:"    ."},sprite:"",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080"},lg={id:"rin",name:"",role:" ",affectionStart:0,affectionMax:100,likes:[""," "," "],dislikes:["  ","",""],baseText:"  .     .",dialogues:{0:"!   ?",20:"     !",40:"     .",60:"   .",80:" ...   .",100:"   ."},sprite:"",image:"https://images.unsplash.com/photo-1727466443068-779e1f8fe8e8?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjdXRlJTIwYW5pbWUlMjBib3klMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDExOTQyfDA&ixlib=rb-4.1.0&q=80&w=1080"},ng={id:"mei",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["","","  "],baseText:"   .   .",dialogues:{0:"...  ?",20:"  ?",40:"  .",60:"   .",80:"   .",100:"   ."},sprite:"",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080"},ig={id:"sora",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:[""," ",""],baseText:" .   .",dialogues:{0:"  .",20:"  .",40:"...    .",60:"     .",80:"    .",100:"    ."},sprite:"",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080"},za={sakura:Wp,yuki:Ip,luna:eg,mystery:tg,akane:ag,hana:sg,rin:lg,mei:ng,sora:ig},rg=[{id:"sakura_training",name:" ",trigger:{location:"training",character:"sakura",minAffection:20,chance:.5},description:"   .",choices:[{text:",  !",effects:{affection:{sakura:10},stats:{stamina:2},text:"    ."}},{text:"  ...",effects:{affection:{sakura:-5},text:"   ."}}]},{id:"yuki_library",name:" ",trigger:{location:"library",character:"yuki",minAffection:30,chance:.4},description:"    .",choices:[{text:" !",effects:{affection:{yuki:15},stats:{intelligence:3},text:"    ."}},{text:",   .",effects:{affection:{yuki:-3},text:"   ."}}]},{id:"luna_magic",name:" ",trigger:{location:"classroom",character:"luna",minAffection:15,chance:.6},description:"    .",choices:[{text:"!  !",effects:{affection:{luna:12},stats:{intelligence:2,charm:1},text:"   ."}},{text:"  ?",effects:{affection:{luna:5},text:"  ."}}]},{id:"random_exam",name:" ",trigger:{location:"classroom",minDay:5,chance:.2},description:"  !",choices:[{text:" ",condition:{minIntelligence:15},effects:{stats:{intelligence:2,charm:1},text:"  !  ."}},{text:" ",effects:{stats:{stamina:-1},text:" ..."}}]},{id:"confession_sakura",name:" ",trigger:{character:"sakura",minAffection:80,minDay:20,once:!0},description:"   ...",choices:[{text:" ",effects:{affection:{sakura:20},flag:"sakura_route",text:"  !"}},{text:",  ",effects:{affection:{sakura:-30},text:"    ."}}]},{id:"mystery_encounter",name:" ",trigger:{minDay:10,totalAffection:150,chance:.1,once:!0},description:"   ...",choices:[{text:"?",effects:{unlockCharacter:"mystery",text:"  !"}}]},{id:"sakura_secret_garden",name:"   ",trigger:{location:"secretGarden",character:"sakura",minAffection:50,chance:.6},description:"       .    .",choices:[{text:"  ?",effects:{affection:{sakura:20},stats:{stamina:3,charm:2},text:"      .     ."}},{text:" ",effects:{affection:{sakura:15},stats:{charm:1},text:"   .    ."}},{text:"  ",effects:{text:"  ."}}]},{id:"yuki_secret_garden",name:"   ",trigger:{location:"secretGarden",character:"yuki",minAffection:50,chance:.6},description:"      .       .",choices:[{text:"   ",effects:{affection:{yuki:20},stats:{intelligence:3,charm:2},text:"     .   ."}},{text:"  ",effects:{affection:{yuki:15},stats:{intelligence:2,charm:1},text:"     .    ."}},{text:"  ",effects:{affection:{yuki:5},text:"      ."}}]},{id:"luna_secret_garden",name:"   ",trigger:{location:"secretGarden",character:"luna",minAffection:50,chance:.6},description:"        .      .",choices:[{text:" ",condition:{minIntelligence:15},effects:{affection:{luna:25},stats:{intelligence:2,charm:3,luck:1},text:"     .       ."}},{text:" ",effects:{affection:{luna:15},stats:{charm:2},text:"    .     ."}},{text:" ",effects:{text:"      ."}}]},{id:"secret_garden_stargazing",name:"  ",trigger:{location:"secretGarden",time:"night",minAffection:30,chance:.4},description:"     ,   .",choices:[{text:"   ",effects:{stats:{charm:2,luck:1},text:"     ."}},{text:"  ",effects:{stats:{intelligence:2,charm:1},text:"     ."}}]},{id:"secret_garden_confession",name:"  ",trigger:{location:"secretGarden",minAffection:80,chance:.3,once:!0},description:"       .      .",choices:[{text:"  ",effects:{flag:"secret_garden_confession",text:"    .   ."}},{text:"    ",effects:{text:"  ,    ."}}]}],cg={events:rg},vi=za,og=cg,dg=Object.keys(vi).reduce((c,i)=>(c[i]=vi[i].affectionStart||0,c),{}),hi={name:"",level:1,experience:0,hp:100,maxHp:100,mp:50,maxMp:50,stamina:100,maxStamina:100,stats:{intelligence:10,charm:10,strength:10,agility:10,luck:10},inventory:[],equipment:{},affection:dg,location:"classroom",day:1,timeOfDay:"morning",money:1e3,flags:{},dungeonProgress:{currentFloor:1,maxFloorReached:1,position:{x:0,y:0}},achievements:[],achievementPoints:0,statistics:{monstersDefeated:0,treasuresFound:0,quizStreak:0,bestCardTime:1/0,loginStreak:1},metHeroines:[],defeatedMonsterTypes:[],defeatedBosses:[],collectedItems:[],unlockedEndings:[],participatedEvents:[]},Yc=["morning","noon","afternoon","evening","night"],ug=30,re=Pp((c,i)=>({player:hi,unlockedCharacters:["sakura","yuki","luna","mystery","akane","hana","rin","mei","sora"],completedEvents:[],currentEvent:null,gameMessage:"  !",gameEnding:null,gameDate:{year:2024,month:4,day:1},lastActivity:null,dailyActivitiesCount:0,metCharacters:[],actions:{loadInitialGame:()=>{const d=localStorage.getItem("academyDatingSim");if(d){const o=JSON.parse(d);c({player:o.player,unlockedCharacters:o.unlockedCharacters,completedEvents:o.completedEvents})}},saveGame:()=>{const{player:d,unlockedCharacters:o,completedEvents:u}=i(),m={player:d,unlockedCharacters:o,completedEvents:u,timestamp:Date.now(),version:"1.0.0"};localStorage.setItem("academyDatingSim",JSON.stringify(m)),c({gameMessage:" !"})},loadGame:()=>{const d=localStorage.getItem("academyDatingSim");if(d){const o=JSON.parse(d);c({player:o.player,unlockedCharacters:o.unlockedCharacters,completedEvents:o.completedEvents,gameMessage:" !"})}else c({gameMessage:"  ."})},resetGame:d=>{const o={...hi,name:d?.playerName||hi.name,stats:d?.startingStats||{...hi.stats},affection:Object.keys(vi).reduce((u,m)=>(u[m]=vi[m].affectionStart||0,u),{})};c({player:o,unlockedCharacters:["sakura","yuki","luna","mystery","akane","hana","rin","mei","sora"],completedEvents:[],currentEvent:null,gameEnding:null,gameMessage:d?`${o.name}   !`:"  !",lastActivity:null}),localStorage.removeItem("academyDatingSim")},updateStats:d=>c(o=>({player:{...o.player,stats:{...o.player.stats,...d}}})),updateHpMp:(d,o)=>c(u=>({player:{...u.player,hp:Math.min(u.player.maxHp,u.player.hp+d),mp:Math.min(u.player.maxMp,u.player.mp+o)}})),updateAffection:(d,o)=>{c(u=>({player:{...u.player,affection:{...u.player.affection,[d]:Math.max(0,Math.min(100,(u.player.affection[d]||0)+o))}}})),o>0&&i().actions.gainExperience(o*2)},moveToLocation:d=>{c(o=>({player:{...o.player,location:d}})),i().actions.checkForEvents(d)},advanceTime:()=>{c(d=>{const u=Yc.indexOf(d.player.timeOfDay)+1;if(u>=Yc.length){const b=d.player.day+1;return b>ug?(i().actions.checkEnding(),{}):{player:{...d.player,day:b,timeOfDay:"morning",location:"dormitory",hp:Math.min(d.player.hp+20,d.player.maxHp),mp:Math.min(d.player.mp+10,d.player.maxMp),stamina:d.player.maxStamina},dailyActivitiesCount:0,gameMessage:"  .  ."}}const m=Yc[u],y=m==="night"&&d.player.location!=="dormitory";return{player:{...d.player,timeOfDay:m,location:y?"dormitory":d.player.location},gameMessage:y?"   .":d.gameMessage}})},checkForEvents:d=>{const{player:o,completedEvents:u}=i(),m=d||o.location,y=og.events.filter(b=>!(b.trigger.location&&b.trigger.location!==m||b.trigger.once&&u.includes(b.id)||b.trigger.minDay&&o.day<b.trigger.minDay||b.trigger.character&&b.trigger.minAffection&&(o.affection[b.trigger.character]||0)<b.trigger.minAffection||b.trigger.totalAffection&&Object.values(o.affection).reduce((x,C)=>x+C,0)<b.trigger.totalAffection||b.trigger.chance&&Math.random()>b.trigger.chance));if(y.length>0){const b=y[Math.floor(Math.random()*y.length)];c({currentEvent:b})}},handleEventChoice:(d,o)=>{const u=d.choices[o],{player:m,actions:y}=i();if(u.condition?.minIntelligence&&m.stats.intelligence<u.condition.minIntelligence){c({gameMessage:" !"});return}u.effects.affection&&Object.entries(u.effects.affection).forEach(([b,g])=>y.updateAffection(b,g)),u.effects.stats&&y.updateStats(u.effects.stats),u.effects.item&&y.addItem(u.effects.item),u.effects.money&&c(b=>({player:{...b.player,money:b.player.money+u.effects.money}})),u.effects.flag&&c(b=>({player:{...b.player,flags:{...b.player.flags,[u.effects.flag]:!0}}})),u.effects.unlockCharacter&&c(b=>({unlockedCharacters:[...b.unlockedCharacters,u.effects.unlockCharacter]})),c({gameMessage:u.effects.text}),d.trigger.once&&c(b=>({completedEvents:[...b.completedEvents,d.id]})),c({currentEvent:null})},addItem:d=>c(o=>({player:{...o.player,inventory:[...o.player.inventory,d]}})),buyItem:d=>{i().actions.addItem(d)},updateMoney:d=>{c(o=>({player:{...o.player,money:o.player.money+d}}))},sellItem:(d,o)=>{const{player:u}=i(),m=u.inventory.indexOf(d);if(m>-1){const y=[...u.inventory];return y.splice(m,1),c(b=>({player:{...b.player,inventory:y,money:b.player.money+o}})),c({gameMessage:`${d}() .`}),!0}return c({gameMessage:"  ."}),!1},purchaseItem:(d,o)=>{const{player:u}=i();return u.money>=o?(c(m=>({player:{...m.player,inventory:[...m.player.inventory,d],money:m.player.money-o}})),!0):!1},useItem:(d,o)=>{const{player:u}=i(),m=u.inventory.indexOf(d);if(m===-1){c({gameMessage:"   ."});return}switch(d){case"healingPotion":if(u.hp>=u.maxHp){c({gameMessage:"HP  .    ."});return}break;case"manaPotion":if(u.mp>=u.maxMp){c({gameMessage:"MP  .    ."});return}break}const y=[...u.inventory];y.splice(m,1);let b={...u,inventory:y},g=`${d}() .`;switch(d){case"healingPotion":const x=Math.min(50,b.maxHp-b.hp);b.hp=Math.min(b.hp+50,b.maxHp),g=`  . HP +${x}`;break;case"manaPotion":const C=Math.min(30,b.maxMp-b.mp);b.mp=Math.min(b.mp+30,b.maxMp),g=`  . MP +${C}`;break;case"energyDrink":b.stats.stamina+=2,g="  .  +2";break;default:if(o){const p=d.includes("flower")?10:5;b.affection={...b.affection,[o]:Math.min((b.affection[o]||0)+p,100)},g=`${o} ${d}() .  +${p}`}break}c({player:b,gameMessage:g})},performActivity:(d,o)=>{const{player:u,dailyActivitiesCount:m}=i(),y=i().actions;if(m>=2&&![""," ",""," "].includes(d)){c({gameMessage:"     .    ."});return}const g={:20,:30,:15,:25,:10,:15,:10,:25,:5,:5,:0,:5," ":30}[d]||10;if(u.stamina<g&&d!==""){c({gameMessage:` . (: ${g}, : ${u.stamina})`});return}let x={...u},C="",p=!0;switch(d!==""&&(x.stamina=Math.max(0,x.stamina-g)),d){case"":x.stats.intelligence+=2,C=" .  +2",y.gainExperience(15);break;case"":x.stats.strength+=3,x.stats.agility+=1,C=" .  +3,  +1",y.gainExperience(20);break;case"":x.stats.charm+=2,x.stats.luck+=1,C=" .  +2,  +1",y.gainExperience(15);break;case"":x.money+=500,x.stats.strength+=1,C=" . 500 ,  +1",y.gainExperience(10);break;case"":x.mp=Math.min(x.mp+20,x.maxMp),x.stats.intelligence+=1,C=" . MP +20,  +1",y.gainExperience(10);break;case"":x.stats.charm+=1,x.stats.agility+=1,C=" .  +1,  +1",y.gainExperience(10);break;case"":x.stats.intelligence+=3,C=" .  +3",y.gainExperience(12);break;case"":x.stats.agility+=3,x.maxStamina=Math.min(x.maxStamina+2,200),C=" .  +3,   +2",y.gainExperience(15);break;case"":x.stats.luck+=2,C=" .  +2",y.gainExperience(5);break;case"":x.stats.charm+=1,x.hp=Math.min(x.hp+10,x.maxHp),C=" .  +1, HP +10",y.gainExperience(5);break;case"":x.hp=Math.min(x.hp+20,x.maxHp),x.mp=Math.min(x.mp+10,x.maxMp),x.stamina=Math.min(x.stamina+40,x.maxStamina),C=" . HP +20, MP +10,  +40";break;case"":if(o){c({gameMessage:" ..."}),o("/shopping");return}C=" .",p=!1;break;case" ":if(o){c({gameMessage:" ..."}),o("/dungeon");return}C="  .",p=!1;break;default:C=`${d}() .`;break}let A=m;["","","","","","","","","",""].includes(d)&&A++,c({player:x,gameMessage:C,lastActivity:d,dailyActivitiesCount:A}),p&&(y.advanceTime(),y.checkForEvents())},checkEnding:()=>{const{player:d}=i(),o=Object.entries(d.affection).reduce((u,[m,y])=>y>u.value?{char:m,value:y}:u,{char:"",value:0});o.value>=80?d.flags[`${o.char}_route`]?c({gameEnding:o.char}):c({gameEnding:"good"}):o.value>=50?c({gameEnding:"normal"}):c({gameEnding:"solo"})},setCurrentEvent:d=>c({currentEvent:d}),updatePlayer:d=>c(o=>({player:{...o.player,...d}})),goToNextFloor:()=>c(d=>{const o=d.player.dungeonProgress.currentFloor+1;return{player:{...d.player,dungeonProgress:{...d.player.dungeonProgress,currentFloor:o,maxFloorReached:Math.max(d.player.dungeonProgress.maxFloorReached,o),position:{x:1,y:1}}}}}),gainExperience:d=>c(o=>{let u=o.player.experience+d,m=o.player.level,y=!1;for(;u>=m*100;)u-=m*100,m++,y=!0;const b={...o.player,experience:u,level:m};return y&&(b.maxHp=100+(m-1)*10,b.maxMp=50+(m-1)*5,b.hp=b.maxHp,b.mp=b.maxMp,b.stats={...b.stats,intelligence:b.stats.intelligence+1,charm:b.stats.charm+1,strength:b.stats.strength+1,agility:b.stats.agility+1,luck:b.stats.luck+1},b.maxStamina=Math.min(b.maxStamina+5,200),b.stamina=b.maxStamina),{player:b,gameMessage:y?`! Lv.${m} ! HP/MP .   +1`:` ${d} . (${u}/${m*100})`}}),addGold:d=>c(o=>({player:{...o.player,money:o.player.money+d}})),clearLastActivity:()=>c({lastActivity:null}),markCharacterAsMet:d=>{const{metCharacters:o}=i();o.includes(d)||c({metCharacters:[...o,d]})}}})),Bx=at.memo(()=>{const c=re(T=>T.player),i=Ee(),d=j.useCallback((T,M=20)=>{const D=T/M*100;return D>=75?"text-green-500":D>=50?"text-yellow-500":D>=25?"text-orange-500":"text-red-500"},[]),o=j.useCallback((T,M=20)=>Math.min(T/M*100,100),[]),u=j.useMemo(()=>({morning:"",noon:"",afternoon:"",evening:"",night:""}),[]),m=j.useCallback(T=>u[T]||T,[u]),y=j.useMemo(()=>({sakura:"",yuki:"",haruka:"",ayumi:"",miku:"",rina:"",luna:"",nova:"",aria:""}),[]),{currentHP:b,maxHP:g,currentMP:x,maxMP:C,hpPercentage:p,mpPercentage:A}=j.useMemo(()=>{const T=c.hp??100,M=c.maxHp??100,D=c.mp??50,v=c.maxMp??50;return{currentHP:T,maxHP:M,currentMP:D,maxMP:v,hpPercentage:T/M*100,mpPercentage:D/v*100}},[c.hp,c.maxHp,c.mp,c.maxMp]);return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border text-text-primary p-6 mb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 to-red-800/20 p-4 rounded-xl border border-red-500/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:""})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold text-red-400",children:""}),e.jsx("div",{className:"text-xs text-red-300",children:"Health Points"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-3xl font-bold text-red-400",children:b}),e.jsxs("span",{className:"text-red-300 text-xl",children:["/",g]}),e.jsxs("div",{className:"text-xs text-red-300",children:[Math.round(p),"%"]})]})]}),e.jsx("div",{className:"w-full bg-red-950/50 rounded-full h-4 shadow-inner",role:"progressbar","aria-valuenow":b,"aria-valuemin":0,"aria-valuemax":g,"aria-label":"",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 via-red-400 to-red-300 h-4 rounded-full transition-all duration-500 shadow-sm",style:{width:`${p}%`}})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-blue-800/20 p-4 rounded-xl border border-blue-500/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:""})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold text-blue-400",children:""}),e.jsx("div",{className:"text-xs text-blue-300",children:"Magic Points"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-400",children:x}),e.jsxs("span",{className:"text-blue-300 text-xl",children:["/",C]}),e.jsxs("div",{className:"text-xs text-blue-300",children:[Math.round(A),"%"]})]})]}),e.jsx("div",{className:"w-full bg-blue-950/50 rounded-full h-4 shadow-inner",role:"progressbar","aria-valuenow":x,"aria-valuemin":0,"aria-valuemax":C,"aria-label":"",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-blue-400 to-cyan-400 h-4 rounded-full transition-all duration-500 shadow-sm",style:{width:`${A}%`}})})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-xl font-bold text-pink-200",children:c.name}),e.jsxs("div",{className:"text-sm bg-purple-900/50 px-3 py-1 rounded-full",children:[" ",c.level,"  ",c.day,"  ",m(c.timeOfDay)]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-900/30 px-4 py-2 rounded-lg border border-green-500/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-300",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-green-950/50 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-400 h-2 rounded-full transition-all duration-300",style:{width:`${c.stamina/c.maxStamina*100}%`}})}),e.jsxs("span",{className:"text-xs font-bold text-green-400",children:[c.stamina,"/",c.maxStamina]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-600/20 px-3 py-1 rounded-full",children:[e.jsx("span",{className:"text-yellow-300",children:""}),e.jsxs("span",{className:"font-semibold text-yellow-200",children:[c.money.toLocaleString(),""]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-purple-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-300",children:""}),e.jsxs("span",{className:"text-sm font-medium text-purple-200",children:[" (Lv.",c.level,")"]})]}),e.jsxs("span",{className:"font-bold text-purple-200",children:[c.experience,"/",c.level*100]})]}),e.jsx("div",{className:"w-full bg-purple-950/50 rounded-full h-2",role:"progressbar","aria-valuenow":c.experience,"aria-valuemin":0,"aria-valuemax":c.level*100,"aria-label":"",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 h-2 rounded-full transition-all duration-300",style:{width:`${c.experience/(c.level*100)*100}%`}})})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mt-4",children:[e.jsxs("div",{className:"bg-blue-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-blue-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(c.stats.intelligence)}`,children:c.stats.intelligence})]}),e.jsx("div",{className:"w-full bg-blue-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":c.stats.intelligence,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(c.stats.intelligence,50)}%`}})})]}),e.jsxs("div",{className:"bg-pink-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-pink-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-pink-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(c.stats.charm)}`,children:c.stats.charm})]}),e.jsx("div",{className:"w-full bg-pink-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":c.stats.charm,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-rose-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(c.stats.charm,50)}%`}})})]}),e.jsxs("div",{className:"bg-green-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-green-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(c.stats.stamina)}`,children:c.stats.stamina})]}),e.jsx("div",{className:"w-full bg-green-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":c.stats.stamina,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(c.stats.stamina,50)}%`}})})]}),e.jsxs("div",{className:"bg-orange-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-orange-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(c.stats.strength)}`,children:c.stats.strength})]}),e.jsx("div",{className:"w-full bg-orange-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":c.stats.strength,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(c.stats.strength,50)}%`}})})]}),e.jsxs("div",{className:"bg-cyan-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-cyan-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(c.stats.agility)}`,children:c.stats.agility})]}),e.jsx("div",{className:"w-full bg-cyan-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":c.stats.agility,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-teal-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(c.stats.agility,50)}%`}})})]}),e.jsxs("div",{className:"bg-yellow-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-yellow-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(c.stats.luck)}`,children:c.stats.luck})]}),e.jsx("div",{className:"w-full bg-yellow-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":c.stats.luck,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(c.stats.luck,50)}%`}})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-purple-300",children:" "}),e.jsx("button",{onClick:()=>i("/heroines"),className:"text-xs text-purple-400 hover:text-purple-300 transition-colors",children:"  "})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-2",children:Object.entries(c.affection).map(([T,M])=>{const D=y[T]||T,v=M>=80?"":M>=60?"":M>=40?"":M>=20?"":"";return e.jsx("button",{onClick:()=>i("/heroines"),className:"bg-gradient-to-br from-purple-900/40 to-pink-900/40 hover:from-purple-800/50 hover:to-pink-800/50 p-2 rounded-lg transition-all transform hover:scale-105 border border-purple-500/20 hover:border-purple-400/40",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg mb-1",children:v}),e.jsx("div",{className:"text-xs font-bold text-purple-200",children:D}),e.jsxs("div",{className:"text-xs text-purple-300",children:[M,"%"]}),e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"w-full bg-purple-950/50 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-1 rounded-full transition-all duration-300",style:{width:`${M}%`}})})})]})},T)})})]})]})});Bx.displayName="StatusBar";const mg=({currentLocation:c,player:i,onPerformActivity:d,onMoveToLocation:o,availableLocations:u,characters:m,onInteractCharacter:y})=>{const b=p=>({:"",:"",:"",:"",:"",:"",:""," ":"",:"",:"",:""," ":""})[p]||"",g=p=>({classroom:"",library:"",cafeteria:"",gym:"",garden:"",shopping:"",secret:""})[p]||"",x=p=>p.time!=="any"&&p.time!==i.timeOfDay?!1:p.name===""||p.name===""||p.name===""||p.name===""||p.name===" "?!0:i.stats.stamina>0,C=p=>p.unlockCondition?!(p.unlockCondition.item&&!i.inventory.includes(p.unlockCondition.item)||p.unlockCondition.flag&&!i.flags[p.unlockCondition.flag]):!0;return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md text-text-primary rounded-lg shadow-lg p-6 border border-border",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:g(c.id)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary",children:c.name}),e.jsx("p",{className:"text-text-secondary text-sm",children:c.description})]})]}),e.jsxs("div",{className:"text-sm text-text-secondary italic",children:[i.timeOfDay==="morning"&&"   .",i.timeOfDay==="noon"&&"  .",i.timeOfDay==="afternoon"&&"    .",i.timeOfDay==="evening"&&"   .",i.timeOfDay==="night"&&"   ."]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-purple-900/40 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-pink-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""}),""]}),c.activities.length>0?e.jsx("div",{className:"space-y-3",children:c.activities.map((p,A)=>{const T=x(p);return e.jsx("button",{onClick:()=>d(p.name),disabled:!T,className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${T?"bg-purple-800/60 hover:bg-purple-700/60 hover:scale-105 cursor-pointer":"bg-gray-800/40 cursor-not-allowed opacity-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:b(p.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:p.name}),e.jsx("div",{className:"text-xs text-purple-300",children:p.time!=="any"&&`${p.time} `})]})]}),e.jsx("div",{className:"text-xs space-y-1",children:Object.entries(p.effect).map(([M,D])=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:D>0?"text-green-400":"text-red-400",children:[D>0?"+":"",D]}),e.jsx("span",{className:"text-purple-300 capitalize",children:M})]},M))})]})},A)})}):e.jsx("p",{className:"text-purple-400 text-sm italic",children:"     ."})]}),e.jsxs("div",{className:"bg-purple-900/40 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-pink-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""}),""]}),e.jsx("div",{className:"space-y-3",children:Object.entries(u).filter(([p])=>p!==c.id).map(([p,A])=>{const T=C(A);return e.jsx("button",{onClick:()=>o(p),disabled:!T,className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${T?"bg-purple-800/60 hover:bg-purple-700/60 hover:scale-105 cursor-pointer":"bg-gray-800/40 cursor-not-allowed opacity-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:g(p)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:A.name}),e.jsx("div",{className:"text-xs text-purple-300",children:!T&&A.unlockCondition&&e.jsxs("span",{className:"text-red-400",children:[A.unlockCondition.item&&" ",A.unlockCondition.flag&&" "]})})]})]})},p)})})]})]}),(()=>{const p=c.characterSchedule?c.characterSchedule[i.timeOfDay]||[]:c.characters||[];return p.length>0&&e.jsxs("div",{className:"mt-6 bg-black/20 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-secondary mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""}),"  "]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:p.map(A=>{const T=m[A];return T?e.jsxs("button",{onClick:()=>y?.(A),className:"bg-primary/20 px-4 py-2 rounded-full text-sm font-medium text-text-primary border border-border flex items-center gap-2 hover:bg-primary/30 hover:scale-105 transition-all duration-200 cursor-pointer",children:[e.jsx("span",{className:"text-xl",children:T.sprite}),e.jsx("span",{children:T.name}),e.jsx("span",{className:"text-xs text-pink-300",children:""})]},A):null})})]})})(),e.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs text-text-secondary",children:[e.jsx("div",{children:i.stats.stamina<=2&&e.jsx("span",{className:"text-red-400 font-medium",children:"  !"})}),e.jsx("div",{children:"   "})]})]})},xg=({characters:c,items:i})=>{const{player:d,unlockedCharacters:o}=re(),u=re(E=>E.actions.useItem),m=re(E=>E.actions.updateAffection),[y,b]=j.useState(null),[g,x]=j.useState(!1),[C,p]=j.useState({active:!1,messages:[]}),A=E=>({sakura:"",yuki:"",luna:"",mystery:"",akane:"",hana:"",rin:"",mei:"",sora:""})[E]||"",T=E=>E>=80?{level:" ",color:"text-pink-400",bgColor:"bg-pink-500/20"}:E>=60?{level:"",color:"text-purple-400",bgColor:"bg-purple-500/20"}:E>=40?{level:"",color:"text-blue-400",bgColor:"bg-blue-500/20"}:E>=20?{level:"",color:"text-green-400",bgColor:"bg-green-500/20"}:{level:"",color:"text-gray-400",bgColor:"bg-gray-500/20"},M=(E,k)=>{const R={low:[{heroine:`... ${d.name}?`,choices:[{text:"!   ?",affectionChange:2},{text:"... ",affectionChange:0},{text:" ",affectionChange:-3}]},{heroine:"  ...",choices:[{text:" !  ?",affectionChange:3},{text:",  ",affectionChange:1},{text:"  ?",affectionChange:-2}]}],medium:[{heroine:`${d.name}!  !`,choices:[{text:"   !",affectionChange:4},{text:",  ",affectionChange:2},{text:"  ",affectionChange:-2}]},{heroine:"  ?",choices:[{text:"  !",affectionChange:5},{text:"  ...",affectionChange:2},{text:"   ?",affectionChange:-3}]}],high:[{heroine:`${d.name}...  ...`,choices:[{text:"   . ",affectionChange:6},{text:"  ",affectionChange:3},{text:"... ",affectionChange:-1}]},{heroine:"   ...",choices:[{text:" .  ",affectionChange:5},{text:" ?",affectionChange:2},{text:" ",affectionChange:-2}]}]};let X;return k<30?X=R.low:k<70?X=R.medium:X=R.high,X[Math.floor(Math.random()*X.length)]},D=E=>{const k=d.affection[E.id]||0,R=M(E,k);p({active:!0,messages:[{speaker:E.name,text:R.heroine,isPlayer:!1}],choices:R.choices})},v=E=>{y&&(p(k=>({...k,messages:[...k.messages,{speaker:d.name,text:E.text,isPlayer:!0}],choices:void 0})),E.affectionChange!==0&&m(y.id,E.affectionChange),setTimeout(()=>{let k;E.affectionChange>3?k=" ! ":E.affectionChange>0?k="... ":E.affectionChange<0?k="  ... ":k="... .",p(R=>({...R,messages:[...R.messages,{speaker:y.name,text:k,isPlayer:!1}]})),setTimeout(()=>{p({active:!1,messages:[]})},2e3)},1e3))},N=(E,k)=>{u(k,E.id),x(!1)},w=d.inventory.map(E=>i[E]).filter(E=>E&&E.type==="gift"),_=E=>({sakura:"from-pink-600 via-rose-500 to-pink-600",yuki:"from-blue-600 via-cyan-500 to-blue-600",luna:"from-purple-600 via-indigo-500 to-purple-600",mystery:"from-gray-600 via-slate-500 to-gray-600",akane:"from-red-600 via-orange-500 to-red-600",hana:"from-yellow-500 via-amber-400 to-yellow-500",rin:"from-violet-600 via-purple-500 to-violet-600",mei:"from-emerald-600 via-green-500 to-emerald-600",sora:"from-sky-500 via-blue-400 to-sky-500"})[E]||"from-purple-600 via-pink-500 to-purple-600";return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md text-text-primary rounded-lg shadow-lg p-6 border border-border",children:[e.jsxs("h2",{className:"text-2xl font-bold text-pink-200 mb-6 flex items-center gap-2",children:[e.jsx("span",{children:""})," "]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:o.map(E=>{const k=c[E];if(!k)return null;const R=d.affection[E]||0,X=T(R);return e.jsx("button",{onClick:()=>b(k),className:`p-4 rounded-lg transition-all duration-200 hover:scale-105 bg-gradient-to-br ${_(E)} hover:brightness-110`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:A(E)}),e.jsx("h3",{className:"font-bold text-lg text-white",children:k.name}),e.jsx("p",{className:"text-xs text-gray-200 mb-2",children:k.role}),e.jsxs("div",{className:`text-xs px-2 py-1 rounded-full ${X.bgColor} ${X.color} font-medium`,children:[X.level," (",R,"/100)"]}),e.jsx("div",{className:"w-full bg-black/20 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-purple-400 h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})})]})},E)})}),C.active&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 rounded-xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:" ..."})}),e.jsx("div",{className:"space-y-3 mb-4",children:C.messages.map((E,k)=>e.jsxs("div",{className:`p-3 rounded-lg ${E.isPlayer?"bg-blue-600/50 ml-8 text-right":"bg-purple-600/50 mr-8"}`,children:[e.jsx("div",{className:"font-semibold text-white mb-1",children:E.speaker}),e.jsx("div",{className:"text-gray-100",children:E.text})]},k))}),C.choices&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-300 mb-2",children:" :"}),C.choices.map((E,k)=>e.jsxs("button",{onClick:()=>v(E),className:"w-full p-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white text-left transition-all duration-200 hover:scale-[1.02]",children:[E.text,E.affectionChange>0&&e.jsxs("span",{className:"ml-2 text-xs text-green-300",children:["( +",E.affectionChange,")"]}),E.affectionChange<0&&e.jsxs("span",{className:"ml-2 text-xs text-red-300",children:["( ",E.affectionChange,")"]})]},k))]}),!C.choices&&C.messages.length>1&&e.jsx("button",{onClick:()=>p({active:!1,messages:[]}),className:"mt-4 w-full bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-white transition-all duration-200",children:" "})]})}),y&&!C.active&&e.jsxs("div",{className:`bg-gradient-to-r ${_(y.id)} rounded-lg p-6 shadow-inner`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-3",children:A(y.id)}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:y.name}),e.jsx("p",{className:"text-gray-200",children:y.role})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-sm text-gray-200 mb-3",children:y.baseText}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-300 mb-1",children:" :"}),e.jsx("div",{className:"space-y-1",children:y.likes.map((E,k)=>e.jsxs("div",{className:"text-green-200",children:[" ",E]},k))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-300 mb-1",children:" :"}),e.jsx("div",{className:"space-y-1",children:y.dislikes.map((E,k)=>e.jsxs("div",{className:"text-red-200",children:[" ",E]},k))})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsxs("button",{onClick:()=>D(y),className:"bg-blue-600/80 hover:bg-blue-500/80 px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center gap-2",children:[e.jsx("span",{children:""}),""]}),e.jsxs("button",{onClick:()=>x(!g),disabled:w.length===0,className:`px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center gap-2 ${w.length>0?"bg-pink-600/80 hover:bg-pink-500/80":"bg-gray-600/50 cursor-not-allowed opacity-50"}`,children:[e.jsx("span",{children:""})," (",w.length,")"]})]}),g&&w.length>0&&e.jsxs("div",{className:"mt-4 bg-black/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-pink-200 mb-3",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:w.map(E=>{const k=E.preferredBy?.includes(y.id);return e.jsx("button",{onClick:()=>N(y,E.id),className:`p-3 rounded-lg text-left transition-all duration-200 hover:scale-105 ${k?"bg-yellow-600/60 hover:bg-yellow-500/60 border border-yellow-400/50":"bg-purple-800/60 hover:bg-purple-700/60"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:E.name}),e.jsx("div",{className:"text-xs text-gray-300",children:E.description}),k&&e.jsx("div",{className:"text-xs text-yellow-300 font-medium mt-1",children:"  !"})]}),e.jsx("div",{className:"text-lg",children:""})]})},E.id)})}),e.jsx("button",{onClick:()=>x(!1),className:"mt-3 w-full bg-gray-600/60 hover:bg-gray-500/60 px-4 py-2 rounded-lg text-sm transition-all duration-200",children:""})]})]}),!y&&e.jsxs("div",{className:"text-center text-purple-300 py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("p",{children:"  "})]})]})},qx=({event:c,character:i,player:d,onChoice:o,onClose:u})=>{const[m,y]=j.useState(""),[b,g]=j.useState(!0),[x,C]=j.useState(!1);j.useEffect(()=>{y(""),g(!0),C(!1);let M=0;const D=c.description,v=setInterval(()=>{M<D.length?(y(D.substring(0,M+1)),M++):(g(!1),C(!0),clearInterval(v))},30);return()=>clearInterval(v)},[c]);const p=()=>{y(c.description),g(!1),C(!0)},A=M=>{const D=c.choices[M];if(D.condition){if(D.condition.minIntelligence&&d.stats.intelligence<D.condition.minIntelligence){alert(" !");return}if(D.condition.minCharm&&d.stats.charm<D.condition.minCharm){alert(" !");return}if(D.condition.minStamina&&d.stats.stamina<D.condition.minStamina){alert(" !");return}}o(c,M)},T=()=>{const M={classroom:"https://images.unsplash.com/photo-1580582932707-520aed937b7b",library:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570",garden:"https://images.unsplash.com/photo-1585320806297-9794b3e4eeae",dormitory:"https://images.unsplash.com/photo-1555854877-bab0e564b8d5",cafeteria:"https://images.unsplash.com/photo-1567521464027-f127ff144326",training_ground:"https://images.unsplash.com/photo-1569163139394-de4798aa62b6"};return M[c.trigger.location||"classroom"]||M.classroom};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:p,children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-1000",style:{backgroundImage:`url(${T()})`,filter:"blur(8px) brightness(0.7)"}}),i&&e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 h-full w-full flex items-end justify-center",children:e.jsx("img",{src:i.image,alt:i.name,className:"h-5/6 object-contain"})}),e.jsx("div",{className:"relative w-full max-w-4xl mx-auto mb-4 z-10",children:e.jsxs("div",{className:"bg-background/80 backdrop-blur-md rounded-xl shadow-2xl border border-border",children:[i&&e.jsx("div",{className:"px-6 py-2 bg-primary/50 rounded-t-xl",children:e.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:i.name})}),e.jsxs("div",{className:"p-6 min-h-[120px] text-xl text-text-primary leading-relaxed",children:[m,b&&e.jsx("span",{className:"animate-pulse",children:"|"})]}),x&&c.choices.length>0&&e.jsx("div",{className:"p-4 grid grid-cols-1 gap-3",children:c.choices.map((M,D)=>e.jsxs("button",{onClick:()=>A(D),disabled:!!(M.condition?.minIntelligence&&d.stats.intelligence<M.condition.minIntelligence)||!!(M.condition?.minCharm&&d.stats.charm<M.condition.minCharm)||!!(M.condition?.minStamina&&d.stats.stamina<M.condition.minStamina),className:"w-full text-left p-4 rounded-lg bg-primary/20 hover:bg-primary/40 text-text-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[M.text,M.condition&&e.jsxs("span",{className:"text-xs text-yellow-400 ml-2",children:["(:",M.condition.minIntelligence&&`  ${M.condition.minIntelligence}`,M.condition.minCharm&&`  ${M.condition.minCharm}`,M.condition.minStamina&&`  ${M.condition.minStamina}`,")"]})]},D))})]})})]})},hg=JSON.parse('{"flower":{"id":"flower","name":"","description":"      . , ,       .","detailedDescription":"         .","usage":"     ","useLocation":"   ","usableBy":"   ","lore":"          ,    .","type":"gift","rarity":"common","value":100,"effect":{"affection":10},"preferredBy":["sakura","luna"],"icon":"","category":""},"book":{"id":"book","name":" ","description":"     .            .","detailedDescription":"        .       .","usage":"   ,      ","useLocation":",  ,  ","usableBy":" ,   ","lore":"        ,     .","type":"gift","rarity":"uncommon","value":200,"effect":{"affection":15},"preferredBy":["yuki"],"icon":"","category":""},"charm":{"id":"charm","name":" ","description":"     .        .","detailedDescription":"    ,       .","usage":"  ,        ","useLocation":", ,  ","usableBy":",      ","lore":"     ,  10%    .","type":"gift","rarity":"rare","value":300,"effect":{"affection":12},"preferredBy":["luna","mystery"],"icon":"","category":""},"studyGuide":{"id":"studyGuide","name":" ","description":"       .           .","detailedDescription":"    ,        .","usage":"    ,     ","useLocation":",  , ","usableBy":"  ","lore":"     ,     .","type":"consumable","rarity":"common","value":150,"effect":{"intelligence":5},"icon":"","category":""},"energyDrink":{"id":"energyDrink","name":" ","description":"      .         ,    .","detailedDescription":"        .","usage":" HP       ","useLocation":"  ,  ","usableBy":" ","lore":"    ,       .","type":"consumable","rarity":"common","value":50,"effect":{"stamina":3,"hp":20},"icon":"","category":""},"mirror":{"id":"mirror","name":" ","description":"       .         .","detailedDescription":"   ,       .","usage":"       ","useLocation":", ,  ","usableBy":" ","lore":"      ,    .","type":"consumable","rarity":"uncommon","value":120,"effect":{"charm":3},"icon":"","category":""},"lunchbox":{"id":"lunchbox","name":"","description":"    .              .","detailedDescription":"          .","usage":"   ,    ","useLocation":" ,  ,  ","usableBy":"  ","lore":"     ,       .","type":"gift","rarity":"common","value":80,"effect":{"affection":8,"stamina":2},"preferredBy":["sakura","yuki","luna"],"icon":"","category":""},"trainingGear":{"id":"trainingGear","name":" ","description":"      . , ,    ,     .","detailedDescription":"        .","usage":"     ,    ","useLocation":" , ","usableBy":" ,   ","lore":"     ,   .","type":"gift","rarity":"rare","value":500,"effect":{"affection":20},"preferredBy":["sakura"],"icon":"","category":""},"mysteryKey":{"id":"mysteryKey","name":" ","description":"      .           ,     .","detailedDescription":"  ,      .","usage":"   ,   ,    ","useLocation":" ,  ,  ","usableBy":" ,    ","lore":"       ,    .","type":"special","rarity":"legendary","value":1000,"effect":{"unlockSecret":true},"icon":"","category":""},"basicSword":{"id":"basicSword","name":" ","description":"      .   ,      .      .","detailedDescription":"    ,     .","usage":" ,  ,    ","useLocation":" , , ","usableBy":" 1   ","lore":"       .     .","type":"weapon","rarity":"common","value":200,"effect":{"strength":5,"agility":2},"requirements":{"level":1},"icon":"","category":""},"steelSword":{"id":"steelSword","name":" ","description":"     .     ,     .    .","detailedDescription":"       .","usage":"   ,    ,  ","useLocation":"  , ,   ","usableBy":" 5 ,  15  ","lore":"    ,       .","type":"weapon","rarity":"uncommon","value":800,"effect":{"strength":12,"agility":5},"requirements":{"level":5,"stats":{"strength":15}},"icon":"","category":""},"mysticStaff":{"id":"mysticStaff","name":" ","description":"      .    ,       .      .","detailedDescription":"      .","usage":"   ,  ,    ","useLocation":",  , ","usableBy":" 8 ,  20    ","lore":"    ,    .","type":"weapon","rarity":"rare","value":1200,"effect":{"intelligence":15,"mp":30,"charm":8},"requirements":{"level":8,"stats":{"intelligence":20}},"icon":"","category":""},"leatherArmor":{"id":"leatherArmor","name":" ","description":"       .      ,      .","detailedDescription":"     .","usage":"  ,   ,  ","useLocation":", ,  ","usableBy":" 2   ","lore":"           .","type":"armor","rarity":"common","value":300,"effect":{"hp":20,"agility":3},"requirements":{"level":2},"icon":"","category":""},"plateArmor":{"id":"plateArmor","name":"","description":"    .       ,     .  .","detailedDescription":"    ,   .","usage":" ,  ,  ","useLocation":" ,   ","usableBy":" 6 ,  18    ","lore":"    ,     .","type":"armor","rarity":"uncommon","value":1000,"effect":{"hp":50,"strength":8},"requirements":{"level":6,"stats":{"strength":18}},"icon":"","category":""},"mageRobe":{"id":"mageRobe","name":" ","description":"        .         ,     .","detailedDescription":"       .","usage":"  ,  ,   ","useLocation":",  ,  ","usableBy":" 7 ,  22    ","lore":"    ,     .","type":"armor","rarity":"rare","value":1500,"effect":{"mp":40,"intelligence":12,"charm":10},"requirements":{"level":7,"stats":{"intelligence":22}},"icon":"","category":""},"luckRing":{"id":"luckRing","name":" ","description":"    .    ,    .      .","detailedDescription":"    ,    .","usage":"    ,   ,      ","useLocation":", ,   ","usableBy":" 3   ","lore":"         .","type":"accessory","rarity":"uncommon","value":600,"effect":{"luck":10,"charm":5},"requirements":{"level":3},"icon":"","category":""},"strengthAmulet":{"id":"strengthAmulet","name":" ","description":"    .       ,     .      .","detailedDescription":"    ,      .","usage":" ,   ,   ","useLocation":", ,  ","usableBy":" 5 ,   ","lore":"       ,       .","type":"accessory","rarity":"rare","value":900,"effect":{"strength":8,"stamina":6,"hp":25},"requirements":{"level":5},"icon":"","category":""},"wisdomPendant":{"id":"wisdomPendant","name":" ","description":"       .     ,     .   .","detailedDescription":"       .","usage":"   ,  ,   ","useLocation":" ,   ,  ","usableBy":" 10 ,  25    ","lore":"    ,       .","type":"accessory","rarity":"epic","value":1800,"effect":{"intelligence":15,"mp":35,"experience":50},"requirements":{"level":10,"stats":{"intelligence":25}},"icon":"","category":""},"healingPotion":{"id":"healingPotion","name":" ","description":"     .     ,          .","detailedDescription":"    ,       .","usage":"      ,    ","useLocation":",  ,  ","usableBy":" ","lore":"          .","type":"consumable","rarity":"common","value":100,"effect":{"hp":50},"icon":"","category":""},"manaPotion":{"id":"manaPotion","name":" ","description":"     .     ,      .      .","detailedDescription":"    ,     .","usage":"     ,    ","useLocation":"  ,  ,  ","usableBy":"   ","lore":"    ,     .","type":"consumable","rarity":"common","value":120,"effect":{"mp":40},"icon":"","category":""},"experienceScroll":{"id":"experienceScroll","name":" ","description":"      .          ,    .","detailedDescription":"       .","usage":"    ,     ","useLocation":",  ,  ","usableBy":" ","lore":"         .","type":"consumable","rarity":"uncommon","value":250,"effect":{"experience":100},"icon":"","category":""},"statBooster":{"id":"statBooster","name":" ","description":"     .      ,     .        .","detailedDescription":"   ,   .","usage":"   ,     ","useLocation":"  ,   ,   ","usableBy":"  (,   )","lore":"         ,    .","type":"consumable","rarity":"rare","value":500,"effect":{"intelligence":3,"charm":3,"stamina":3,"strength":3,"agility":3,"luck":3},"icon":"","category":""},"chocolateBox":{"id":"chocolateBox","name":"  ","description":"     .      12     ,     .","detailedDescription":"      .","usage":"    ,    ","useLocation":",  ,  ","usableBy":",     ","lore":"        .","type":"gift","rarity":"uncommon","value":350,"effect":{"affection":18},"preferredBy":["yuki","luna"],"icon":"","category":""},"jewelryBox":{"id":"jewelryBox","name":"","description":"      . , ,              .","detailedDescription":"      ,    .","usage":"       ","useLocation":" ,  ","usableBy":",      ","lore":"        ,       .","type":"gift","rarity":"epic","value":1200,"effect":{"affection":35},"preferredBy":["luna","mystery"],"icon":"","category":""}}'),Ux={items:hg},fg=({onClose:c})=>{const{player:i,unlockedCharacters:d}=re(),o=re(q=>q.actions.useItem),u=Ux.items,m=za,[y,b]=j.useState(null),[g,x]=j.useState(null),[C,p]=j.useState(!1),[A,T]=j.useState("all"),[M,D]=j.useState(new Set),v=q=>{const le={common:{color:"border-gray-400 bg-gray-500/10",text:"text-gray-400",name:""},uncommon:{color:"border-green-400 bg-green-500/10",text:"text-green-400",name:""},rare:{color:"border-blue-400 bg-blue-500/10",text:"text-blue-400",name:""},epic:{color:"border-purple-400 bg-purple-500/10",text:"text-purple-400",name:""},legendary:{color:"border-yellow-400 bg-yellow-500/10",text:"text-yellow-400",name:""}};return q.rarity?le[q.rarity]:le.common},N=i.inventory.reduce((q,le)=>(u[le]&&(q[le]?q[le].count++:q[le]={item:u[le],count:1}),q),{}),w=Object.values(N).filter(({item:q})=>A==="all"?!0:q.type===A),_=q=>{q.type==="gift"?(b(q),p(!0)):["weapon","armor","accessory"].includes(q.type)?E(q)?(o(q.id),b(null)):alert("    ."):(o(q.id),b(null))},E=q=>{if(!q.requirements)return!0;if(q.requirements.level&&i.level<q.requirements.level)return!1;if(q.requirements.stats){for(const[le,F]of Object.entries(q.requirements.stats))if(i.stats[le]<F)return!1}return!0},k=q=>{y&&(o(y.id,q),b(null),p(!1))},R=q=>({intelligence:"",charm:"",stamina:"",strength:"",agility:"",luck:""})[q]||q,X=q=>({sakura:"",yuki:"",luna:"",mystery:""})[q]||"";return e.jsxs("div",{className:"bg-background text-text-primary rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-secondary flex items-center gap-2",children:[e.jsx("span",{children:""}),""]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[" ",Object.values(N).reduce((q,{count:le})=>q+le,0)," "]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:[{key:"all",label:"",icon:""},{key:"gift",label:"",icon:""},{key:"consumable",label:"",icon:""},{key:"weapon",label:"",icon:""},{key:"armor",label:"",icon:""},{key:"accessory",label:"",icon:""},{key:"special",label:"",icon:""}].map(({key:q,label:le,icon:F})=>e.jsxs("button",{onClick:()=>T(q),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${A===q?"bg-primary text-white shadow-lg":"bg-black/30 text-text-secondary hover:bg-primary/50"}`,children:[e.jsx("span",{children:F}),le]},q))}),Object.keys(N).length===0?e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("p",{children:" "})]}):w.length===0?e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("p",{children:"   "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(({item:q,count:le})=>{const F=v(q);return e.jsxs("div",{onClick:()=>{D(ce=>new Set(ce).add(q.id)),x(q)},className:`bg-black/30 rounded-lg p-4 border transition-all duration-200 hover:scale-105 cursor-pointer ${F.color}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:q.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-text-primary",children:q.name}),e.jsx("p",{className:`text-xs ${F.text} capitalize`,children:q.type})]})]}),le>1&&e.jsxs("div",{className:"bg-primary text-white text-xs px-2 py-1 rounded-full font-bold",children:["",le]})]}),M.has(q.id)?e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:q.description}):e.jsx("p",{className:"text-sm text-text-secondary mb-4 italic opacity-60",children:"   ..."}),M.has(q.id)&&e.jsxs("div",{className:"space-y-1 mb-4",children:[q.effect.affection&&e.jsxs("div",{className:"text-xs text-pink-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.affection]})]}),q.effect.hp&&e.jsxs("div",{className:"text-xs text-red-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.hp]})]}),q.effect.mp&&e.jsxs("div",{className:"text-xs text-blue-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.mp]})]}),q.effect.intelligence&&e.jsxs("div",{className:"text-xs text-blue-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.intelligence]})]}),q.effect.charm&&e.jsxs("div",{className:"text-xs text-pink-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.charm]})]}),q.effect.stamina&&e.jsxs("div",{className:"text-xs text-green-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.stamina]})]}),q.effect.strength&&e.jsxs("div",{className:"text-xs text-orange-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.strength]})]}),q.effect.agility&&e.jsxs("div",{className:"text-xs text-cyan-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.agility]})]}),q.effect.luck&&e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.luck]})]}),q.effect.experience&&e.jsxs("div",{className:"text-xs text-purple-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",q.effect.experience]})]}),q.effect.unlockSecret&&e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:[" ",e.jsx("span",{children:" "})]})]}),M.has(q.id)&&q.requirements&&e.jsxs("div",{className:"mb-4 p-2 bg-red-900/20 rounded border border-red-500/30",children:[e.jsx("div",{className:"text-xs text-red-300 font-medium mb-1",children:" :"}),e.jsxs("div",{className:"space-y-1",children:[q.requirements.level&&e.jsxs("div",{className:"text-xs text-red-400",children:[" ",q.requirements.level," "]}),q.requirements.stats&&Object.entries(q.requirements.stats).map(([ce,I])=>e.jsxs("div",{className:"text-xs text-red-400",children:[R(ce)," ",I," "]},ce))]})]}),q.value&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[": ",q.value," "]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:`text-xs font-medium ${F.text}`,children:[": ",F.name]})}),q.preferredBy&&q.preferredBy.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-yellow-300 mb-1",children:"  :"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:q.preferredBy.map(ce=>e.jsx("span",{className:"text-xs bg-yellow-600/20 text-yellow-200 px-2 py-1 rounded-full",children:m[ce]?.name||ce},ce))})]}),e.jsx("button",{onClick:()=>_(q),disabled:!E(q),className:`w-full py-2 rounded-lg text-sm font-medium transition-all duration-200 ${E(q)?q.type==="gift"?"bg-secondary hover:bg-secondary/80 text-white":q.type==="consumable"?"bg-green-600/80 hover:bg-green-500/80 text-white":["weapon","armor","accessory"].includes(q.type)?"bg-blue-600/80 hover:bg-blue-500/80 text-white":"bg-yellow-600/80 hover:bg-yellow-500/80 text-white":"bg-gray-600/50 text-gray-400 cursor-not-allowed"}`,children:q.type==="gift"?"":q.type==="consumable"?"":["weapon","armor","accessory"].includes(q.type)?"":""})]},q.id)})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsx("div",{className:"bg-background rounded-lg shadow-2xl max-w-md w-full border border-border",onClick:q=>q.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-secondary",children:" "}),e.jsx("button",{onClick:()=>x(null),className:"text-text-secondary hover:text-text-primary text-2xl transition-colors duration-200",children:""})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:g.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-text-primary",children:g.name}),e.jsx("div",{className:"text-sm text-text-secondary",children:g.description})]})]})})]})})}),C&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-background rounded-lg shadow-2xl max-w-md w-full border border-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-secondary",children:"  "}),e.jsx("button",{onClick:()=>p(!1),className:"text-text-secondary hover:text-text-primary text-2xl transition-colors duration-200",children:""})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:y.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-text-primary",children:y.name}),e.jsx("div",{className:"text-sm text-text-secondary",children:y.description})]})]})}),e.jsx("div",{className:"space-y-3",children:d.map(q=>{const le=m[q];if(!le)return null;const F=y.preferredBy?.includes(q);return e.jsxs("button",{onClick:()=>k(q),className:`w-full p-3 rounded-lg text-left transition-all duration-200 hover:scale-105 flex items-center gap-3 ${F?"bg-accent/60 hover:bg-accent/50 border border-accent/50":"bg-primary/60 hover:bg-primary/50"}`,children:[e.jsx("span",{className:"text-2xl",children:X(q)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:le.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:le.role}),F&&e.jsx("div",{className:"text-xs text-accent font-medium",children:"  !"})]})]},q)})})]})})})]})},pg={conversations:[{id:"sakura_first_meeting",requiredAffection:0,dialogue:["   .         .","    .    .","    .    .","...  . .","    .","  . 2    .","    ...  .","     .","...    ?  .","      .   .","  ."," ... ,    .","   ?    ?"],choices:[{text:"  .    ?",affectionChange:7,response:`  .
? !      .
   .
  .     .
...      .`},{text:"   .   .",affectionChange:5,response:`     .   .
, ?     ...
   .
...   .  ?`},{text:"   ?   .",affectionChange:2,response:`    .
...    .  .
       .
   . ...   .`}]},{id:"sakura_training_together",requiredAffection:15,dialogue:["   .     ."," !  .","    .    .","    .    .","    .      .","   .    ."," ,  ,    .","     .     .","...  , ...","      .","...  ? , !","    .  .","...      .","      ...","   .     ."],choices:[{text:"     .    .",affectionChange:10,response:`  .    .
...  ?
...      .
    .
...  . ,   ...`},{text:"   .  .",affectionChange:6,response:`    .
!   .
       .
      .  .`},{text:"     ?",affectionChange:3,response:`  .
... .  .
   .  ...
     .`}]},{id:"sakura_secret_revealed",requiredAffection:40,dialogue:[" ,    .    .","! !","        .","...    .","    .    .","   .      .","       .","  ."," .   ...   .","  .    ...","  ,      .","....   .","      .","...  .   .","  .   .","     ..."],choices:[{text:"    .  .",affectionChange:15,response:`   .
...    ...
    .
. ...  .
...       .
    .
.   .    .`},{text:" .   .",affectionChange:8,response:`  .
 ... .   .
...    .
.    . .`},{text:" .     .",affectionChange:5,response:`  . ...
      .
  .      .`}]},{id:"sakura_confession",requiredAffection:70,dialogue:["   ,  .    .","     .   .","...       ...","   .       .","    ?    ."," ...    .","   .     .","      ...","       .","    ,    .","      ."," ...       ..."," .","     ."," ...  ?"," , ,     ."],choices:[{text:"  .  .",affectionChange:25,response:`   .    .
... ?  ?
    .
...    ?
    .  ...
    .
... ,  .`},{text:"  .     .",affectionChange:0,response:`   .
...   .
. .    ...
     . .`},{text:"...   .",affectionChange:-20,response:`   .    .
... .  .
    .
...     ...
. ...  .
  .    .`}]}]},gg={conversations:[{id:"yuki_library_encounter",requiredAffection:0,dialogue:["   ,    .     .","         .   .","    .    .","...?     ?","   .   .","     . ?",",   .  .","    .  .","...      .","  .     .","   ' ' .   .","    ."," ...  . ?","   ? ...","   ?"],choices:[{text:"    .",affectionChange:8,response:`  .    .
...?   ...
  .
...    ...
   .
.     .
.     .`},{text:"   .   ?",affectionChange:5,response:`  .
?  .
     .
 ...  .
.   .    .`},{text:" .   .",affectionChange:-2,response:`   .
.   ...
      .
    .
   . .`}]},{id:"yuki_magic_lesson",requiredAffection:20,dialogue:[" .     .    .",".      .","       .","    .","      .","   .     .",", , ...        .","    .    .","    ...  .","  ."," ,    .","  .  ...","  .","  .  ...","     .","    .   ."],choices:[{text:"   .   .",affectionChange:12,response:`  .
...  ?
    .
...        .
   .    .
   . ...   ...`},{text:"  .   .",affectionChange:7,response:`   .
.  .
  .      .
 ...     .`},{text:"    .",affectionChange:-3,response:`   .
....   .
  .
  . .`}]},{id:"yuki_forbidden_magic",requiredAffection:45,dialogue:[",     .     .","     .","      .","...    .","     .   ."," .  ,    ."," ...     .     .","   .","  .   ."," .     ...","    .","  ...  ."," ...      .","     .    ."," ...    .","? ...  ."],choices:[{text:" .   .",affectionChange:18,response:`    .    .
...      ?
... .  .
...    .
    .
  .   .   .`},{text:"  .     .",affectionChange:10,response:`    .
 ...  ?
...     ...
.    .   ...`},{text:" .      .",affectionChange:-5,response:`  .
...  .
.     .
    .`}]},{id:"yuki_true_feelings",requiredAffection:75,dialogue:["   .   ,    .","     .","   .   .","   .   .","    .","5   , 10   .","   ...    .","   ."," .  ,  ,   .","  ...      .","    ."," .      ...","       ...","     .","   .","...  ."," ...  .","      ...   ."],choices:[{text:"  .    .",affectionChange:30,response:`   .    .
  ...   ...
...  .
    .   .
     .
    .
  .      .`},{text:" .     .",affectionChange:5,response:`    .
...   .
         .
.      .`},{text:"...    .",affectionChange:-25,response:`   .   .
....  .
   ...   .
     .
. ...   .
  .    .`}]}]},bg={conversations:[{id:"luna_moonlight_meeting",requiredAffection:0,dialogue:["  .     .","         .","       .","....","  .    .","   ...   ?","    .",".    ."," .  ."," ... '' .","   .","   .   ...",".     .","   .   ."," . ?","   ...   ."],choices:[{text:"     .",affectionChange:10,response:`     .
...?
     .
...  ?
   .
 .     .
.    '' .`},{text:"  ,   .",affectionChange:6,response:`  .
 ... .  .
     .
    .`},{text:"... ?",affectionChange:3,response:`  .
...  .
.   .   .
   ...  ,  ?`}]},{id:"luna_blood_moon",requiredAffection:30,dialogue:["   .     .","  ...   ?","      .","...    .","     .","    .","500 ...      ."," ...  .","  .    ."," ...  .",".    ...","    .   .","...     ...","...   .","  .","  ...  .","...      ."],choices:[{text:"   .  .",affectionChange:20,response:`   .
...      ?
   ...   .
    .
...     ...
     .
... ...    .
    .   .
...    .`},{text:"  .  ...",affectionChange:8,response:`  .
 ...  .
   ... .
.   .  ...`},{text:"    .",affectionChange:5,response:` ...  .
    .
 .   ...`}]},{id:"luna_past_revealed",requiredAffection:55,dialogue:["     .","...    .","   .    .","300 ,    ."," ,   ...","    .","     ...","  ...   ..."," .    .","   .","   . 300 ."," ,  .","...  .","  ."," ...       .",", , ... .","  .    .","...   ?"],choices:[{text:"  .   .",affectionChange:25,response:`    .
300 ...  .
    ...
   .
  .    ...
   .
   ... ,  ...`},{text:" .   .",affectionChange:15,response:`     .
...   ?
300     ?
 ...  .`},{text:"  .",affectionChange:5,response:`...     .
   ...
 .   .`}]},{id:"luna_eternal_love",requiredAffection:80,dialogue:["  .     .","  .    .","   .       .","...    .","   .   .","' '.       .","  ...    .","     .  ,  ...","    .","500 ...       .","      .","     ."," ...      ..."," .  ,   .","      .","?   ..."],choices:[{text:"   .   .",affectionChange:35,response:`  . 500   .
...    .
 .     .
...  .  !
    .
  .  ...
  .   .
...   60 ...   .`},{text:"  .   .",affectionChange:10,response:`  .
  . ...
      .
   .    .`},{text:"  .   .",affectionChange:-30,response:`  .
... ?
 500   ...
    .
...   ...
   .
...   .`}]}]},$x={sakura:pg,yuki:gg,luna:bg},yg={classroom:{id:"classroom",name:"",description:"  .   .",activities:[{name:" ",effect:{intelligence:2,stamina:-1},time:"morning"},{name:"",effect:{intelligence:1},time:"any"}],characterSchedule:{morning:["luna","yuki"],noon:[],afternoon:["luna"],evening:[],night:[]},sprite:""},library:{id:"library",name:"",description:"  .   .",activities:[{name:" ",effect:{intelligence:3,charm:1},time:"any"},{name:" ",effect:{stamina:2},time:"any"}],characterSchedule:{morning:[],noon:["yuki"],afternoon:["yuki","luna"],evening:["yuki"],night:[]},sprite:""},training:{id:"training",name:"",description:" .    .",activities:[{name:"",effect:{stamina:3,intelligence:-1},time:"any"},{name:" ",effect:{stamina:2,charm:1},time:"afternoon"}],characterSchedule:{morning:["sakura"],noon:[],afternoon:["sakura"],evening:["sakura"],night:[]},sprite:""},cafeteria:{id:"cafeteria",name:"",description:"   .  .",activities:[{name:"",effect:{stamina:3},time:"noon"},{name:" ",effect:{charm:2},time:"any"}],characterSchedule:{morning:[],noon:["luna","yuki","sakura"],afternoon:[],evening:["luna"],night:[]},sprite:""},garden:{id:"garden",name:"",description:"   . .",activities:[{name:"",effect:{stamina:1,charm:1},time:"any"},{name:" ",effect:{charm:2},time:"afternoon"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:["yuki"],night:["luna","sakura"]},sprite:""},dormitory:{id:"dormitory",name:"",description:"  .",activities:[{name:"",effect:{stamina:5},time:"evening"},{name:" ",effect:{charm:1,intelligence:1},time:"night"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:[],night:["yuki","sakura"]},sprite:""},shop:{id:"shop",name:"",description:"      .",activities:[{name:"",effect:{},time:"any",special:"shop"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:[],night:[]},sprite:""},secretGarden:{id:"secretGarden",name:" ",description:"  .      .",activities:[{name:" ",effect:{charm:5},time:"any"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:["mystery"],night:["mystery"]},sprite:"",unlockCondition:{item:"mysteryKey"}}},vg={locations:yg},Ia=za,yx=vg,jg=()=>{const c=Ee(),i=re($=>$.player);re($=>$.unlockedCharacters);const d=re($=>$.currentEvent),o=re($=>$.gameMessage),u=re($=>$.dailyActivitiesCount||0),m=re($=>$.metCharacters||[]),{saveGame:y,loadGame:b,performActivity:g,moveToLocation:x,advanceTime:C,handleEventChoice:p,updateAffection:A}=re($=>$.actions),T=j.useMemo(()=>yx.locations[i.location],[i.location]),[M,D]=at.useState(!1),[v,N]=at.useState("location"),[w,_]=at.useState(!1),[E,k]=at.useState(null),[R,X]=at.useState(!1),[q,le]=at.useState(null),[F,ce]=at.useState(0),[I,G]=at.useState(null),[B,H]=at.useState(!1),[f,z]=at.useState([]),V=j.useCallback($=>{if(!Ia[$])return;if(!m.includes($)){c(`/character-meeting?character=${$}&location=${i.location}`);return}const ie=i.affection[$]||0,oe=$x[$]?.conversations||[];let we=oe[0];for(const he of oe)if(he.requiredAffection<=ie)we=he;else break;we&&(G(we),z(we.dialogue),ce(0),H(!1)),le($),X(!0)},[i.affection]),ne=j.useCallback(()=>{if(!I){X(!1),le(null);return}B||(F<f.length-1?ce($=>$+1):I.choices&&I.choices.length>0?H(!0):(I.effects?.affection&&q&&A(q,I.effects.affection),X(!1),le(null),ce(0),G(null),z([])))},[I,F,f,B,q,A]),O=j.useCallback($=>{$.effects?.affection&&q&&A(q,$.effects.affection),$.response?(G(null),z([$.response]),ce(0),H(!1)):(X(!1),le(null),ce(0),G(null),z([]))},[q,A]);j.useCallback($=>{c("/heroines")},[c]);const Q=u<2,J=i.timeOfDay==="evening"||i.timeOfDay==="night";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Labyrinth Academy"}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsx("button",{onClick:()=>c("/game-menu"),className:"px-4 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"  ",role:"button",children:" "}),e.jsx("button",{onClick:()=>c("/heroines"),className:"px-4 py-2 bg-pink-500 text-white rounded-xl hover:bg-pink-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:"  "}),e.jsx("button",{onClick:()=>c("/quests"),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" "}),e.jsx("button",{onClick:()=>c("/dungeon-selection"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" "}),e.jsx("button",{onClick:()=>c("/shopping"),className:"px-4 py-2 bg-yellow-500 text-white rounded-xl hover:bg-yellow-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"",role:"button",children:" "}),e.jsx("button",{onClick:()=>c("/pets"),className:"px-4 py-2 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" "}),e.jsx("button",{onClick:()=>c("/diary"),className:"px-4 py-2 bg-pink-500 text-white rounded-xl hover:bg-pink-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"",role:"button",children:" "}),e.jsx("button",{onClick:()=>c("/heroine-stories"),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-red-500 text-white rounded-xl hover:from-pink-600 hover:to-red-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" "}),e.jsx("div",{className:"border-l border-border mx-2 h-10","aria-hidden":"true"}),e.jsx("button",{onClick:()=>c("/save-load"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" /"}),e.jsx("button",{onClick:()=>D(!M),className:"px-4 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":M?" ":" ","aria-expanded":M,role:"button",children:" "})]})]})}),e.jsx(Bx,{}),e.jsx("div",{className:"bg-black/20 border border-border rounded-2xl p-4 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:""}),e.jsx("p",{className:"font-medium text-text-primary flex-1",children:o})]})}),e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-600/50 rounded-2xl p-4 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-yellow-400 text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-yellow-300",children:" "}),e.jsxs("p",{className:"text-sm text-yellow-200",children:[u,"/2  ",u>=2&&" -     "]})]})]}),e.jsx("div",{className:"text-yellow-400",children:J?" . .":" "})]})}),e.jsxs("div",{className:`grid grid-cols-1 ${M?"lg:grid-cols-5":"lg:grid-cols-3"} gap-6`,children:[e.jsxs("div",{className:"lg:col-span-3 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex gap-3 mb-6",role:"tablist","aria-label":"  ",children:[e.jsx("button",{onClick:()=>N("location"),disabled:!Q&&i.location!=="dormitory",className:`px-6 py-3 rounded-xl transition-all duration-200 font-medium ${v==="location"?"bg-black/50 backdrop-blur-md text-text-primary shadow-lg transform scale-105 border border-primary/50":!Q&&i.location!=="dormitory"?"bg-black/30 backdrop-blur-md text-gray-500 opacity-50 cursor-not-allowed border border-border":"bg-black/30 backdrop-blur-md hover:bg-black/40 text-text-secondary hover:scale-105 border border-border"}`,role:"tab","aria-selected":v==="location","aria-controls":"location-panel",tabIndex:v==="location"?0:-1,children:"  "}),e.jsx("button",{onClick:()=>N("characters"),className:`px-6 py-3 rounded-xl transition-all duration-200 font-medium ${v==="characters"?"bg-black/50 backdrop-blur-md text-text-primary shadow-lg transform scale-105 border border-primary/50":"bg-black/30 backdrop-blur-md hover:bg-black/40 text-text-secondary hover:scale-105 border border-border"}`,role:"tab","aria-selected":v==="characters","aria-controls":"characters-panel",tabIndex:v==="characters"?0:-1,children:" "})]}),e.jsx("div",{id:v==="location"?"location-panel":"characters-panel",role:"tabpanel","aria-labelledby":v==="location"?"location-tab":"characters-tab",children:v==="location"?e.jsx(mg,{currentLocation:T,player:i,onPerformActivity:$=>g($,c),onMoveToLocation:$=>{!Q&&$!=="dormitory"||x($)},availableLocations:yx.locations,characters:Ia,onInteractCharacter:V,canPerformActivity:Q}):e.jsx(xg,{characters:Ia,items:{}})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:""}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-black/20 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-text-primary mb-1",children:["Day ",i.day]}),e.jsxs("div",{className:"text-lg text-text-secondary",children:[Ng(i.timeOfDay)," ",wg(i.timeOfDay)]})]}),e.jsx("button",{onClick:C,className:"w-full px-4 py-3 bg-primary text-white rounded-xl hover:bg-secondary transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium","aria-label":"    ",role:"button",children:"  "})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-secondary rounded-full flex items-center justify-center text-white text-sm",children:""}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:" "})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:""}),e.jsxs("span",{className:"font-bold text-yellow-400",children:["Lv.",i.level]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:""}),e.jsxs("span",{className:"font-bold text-green-400",children:[i.money,"G"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:""}),e.jsxs("span",{className:"font-bold text-red-400",children:[i.hp,"/",i.maxHp]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:""}),e.jsxs("span",{className:"font-bold text-blue-400",children:[i.mp,"/",i.maxMp]})]})]})]})]})]}),M&&e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border h-full",children:[e.jsxs("div",{className:"sticky top-0 bg-background/80 backdrop-blur-md border-b border-border p-4 flex justify-between items-center",children:[e.jsx("h2",{id:"inventory-title",className:"text-2xl font-bold text-text-primary",children:" "}),e.jsx("button",{onClick:()=>D(!1),className:"text-text-secondary hover:text-text-primary text-2xl","aria-label":"  ",role:"button",children:""})]}),e.jsx("div",{className:"p-4 max-h-[calc(100vh-120px)] overflow-y-auto",children:e.jsx(fg,{onClose:()=>D(!1)})})]})})]}),d&&e.jsx(qx,{event:d,character:d.trigger.character?Ia[d.trigger.character]:void 0,player:i,onChoice:p,onClose:()=>{console.log("Closing event dialog")}}),R&&q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:e.jsx("div",{className:"max-w-4xl w-full mx-4 bg-background/95 backdrop-blur-lg rounded-2xl shadow-2xl border border-primary/20 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[e.jsx("div",{className:"text-6xl",children:Ia[q]?.sprite||""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:Ia[q]?.name||"Unknown"}),e.jsx("div",{className:"text-text-secondary",children:Ia[q]?.role||""})]})]}),e.jsx("div",{className:"bg-black/30 rounded-xl p-6 mb-6 min-h-[150px]",children:e.jsx("p",{className:"text-lg text-text-primary leading-relaxed",children:f[F]||"..."})}),B&&I?.choices&&e.jsx("div",{className:"space-y-3 mb-6",children:I.choices.map(($,se)=>e.jsx("button",{onClick:()=>O($),className:"w-full text-left bg-primary/20 hover:bg-primary/30 border border-primary/30 p-4 rounded-lg transition-all duration-200",children:$.text},se))}),!B&&I&&e.jsx("button",{onClick:ne,className:"bg-primary hover:bg-secondary px-6 py-2 rounded-full text-white font-medium transition-all duration-200",children:F<f.length-1?"":I?.choices?" ":" "}),!I&&e.jsx("button",{onClick:()=>{X(!1),le(null),ce(0),z([])},className:"bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-full text-white font-medium transition-all duration-200",children:""})]})})})]})})},Ng=c=>({morning:"",noon:"",afternoon:"",evening:"",night:""})[c]||"",wg=c=>({morning:"",noon:"",afternoon:"",evening:"",night:""})[c]||c,kg=({onRestart:c,onMainMenu:i})=>{const{player:d,gameEnding:o}=re(),u=o;if(!u)return e.jsx("div",{children:"  ..."});const[m,y]=j.useState(!1),[b,g]=j.useState(0),C=(D=>{switch(D){case"true":return{title:" ",description:"     .     .",background:"from-yellow-400 via-pink-500 to-purple-600",emoji:"",message:"!   !",achievement:" True Ending Master"};case"good":return{title:" ",description:"      .      .",background:"from-pink-400 via-purple-500 to-blue-500",emoji:"",message:" !",achievement:" Happy Life"};case"sakura":return{title:" ",description:"     .        .",background:"from-pink-300 via-pink-500 to-rose-600",emoji:"",message:': "   !"',achievement:" Cherry Blossom Love"};case"yuki":return{title:" ",description:"        .      .",background:"from-blue-300 via-cyan-500 to-blue-700",emoji:"",message:': "    ..."',achievement:" Winter Romance"};case"luna":return{title:" ",description:"     .      .",background:"from-purple-400 via-indigo-500 to-purple-700",emoji:"",message:': "    ..."',achievement:" Moonlight Mystery"};case"mystery":return{title:" ",description:"      .      .",background:"from-gray-400 via-purple-500 to-black",emoji:"",message:'???: "   ..."',achievement:" Truth Seeker"};case"normal":return{title:" ",description:"   .   ,    .",background:"from-gray-400 via-purple-400 to-gray-500",emoji:"",message:"    .",achievement:" Student Life"};case"bad":return{title:" ",description:"         ...    .",background:"from-red-400 via-orange-500 to-red-600",emoji:"",message:"    !",achievement:" Learning Experience"};case"solo":return{title:"",description:"   .      .",background:"from-blue-400 via-teal-500 to-green-500",emoji:"",message:"     .",achievement:" Self Growth"};default:return{title:" ",description:"  .     .",background:"from-purple-400 via-pink-500 to-purple-600",emoji:"",message:"   !"}}})(u);j.useEffect(()=>{const D=setTimeout(()=>g(1),500),v=setTimeout(()=>g(2),1500),N=setTimeout(()=>g(3),2500);return()=>{clearTimeout(D),clearTimeout(v),clearTimeout(N)}},[]);const A=(()=>{const D=Object.values(d.affection).reduce((N,w)=>N+w,0),v=Object.entries(d.affection).reduce((N,[w,_])=>_>N.value?{char:w,value:_}:N,{char:"",value:0});return{totalAffection:D,maxAffection:v,totalStats:d.stats.intelligence+d.stats.charm+d.stats.stamina,inventoryCount:d.inventory.length,moneyEarned:d.money}})(),M=u==="true"?{grade:"S+",color:"text-yellow-400"}:u==="good"||["sakura","yuki","luna","mystery"].includes(u)?{grade:"A",color:"text-pink-400"}:u==="normal"?{grade:"B",color:"text-blue-400"}:u==="solo"?{grade:"C",color:"text-green-400"}:{grade:"D",color:"text-red-400"};return e.jsxs("div",{className:`min-h-screen bg-gradient-to-br ${C.background} flex items-center justify-center p-4 relative overflow-hidden`,children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:[...Array(20)].map((D,v)=>e.jsx("div",{className:"absolute animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${3+Math.random()*2}s`},children:C.emoji},v))}),e.jsx("div",{className:"max-w-4xl w-full relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`transition-all duration-1000 ${b>=1?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[e.jsx("div",{className:"text-8xl mb-6 animate-bounce",children:C.emoji}),e.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-4 drop-shadow-lg",children:C.title}),e.jsxs("div",{className:`text-2xl font-bold mb-8 ${M.color}`,children:["GRADE: ",M.grade]})]}),e.jsx("div",{className:`transition-all duration-1000 delay-500 ${b>=2?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-white/20",children:[e.jsx("p",{className:"text-lg md:text-xl text-white leading-relaxed mb-6",children:C.description}),e.jsx("div",{className:"bg-white/10 rounded-lg p-4",children:e.jsxs("p",{className:"text-yellow-200 font-medium italic",children:['"',C.message,'"']})})]})}),C.achievement&&e.jsx("div",{className:`transition-all duration-1000 delay-1000 ${b>=3?"opacity-100 scale-100":"opacity-0 scale-90"}`,children:e.jsx("div",{className:"bg-yellow-500/20 border-2 border-yellow-400/50 rounded-xl p-4 mb-8 backdrop-blur-sm",children:e.jsxs("div",{className:"text-yellow-300 font-bold text-lg",children:["  : ",C.achievement]})})}),e.jsx("div",{className:`transition-all duration-1000 delay-1500 ${b>=3?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>y(!m),className:"bg-blue-600/80 hover:bg-blue-500/80 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center gap-2",children:[e.jsx("span",{children:""}),m?" ":" "]}),e.jsxs("button",{onClick:c,className:"bg-green-600/80 hover:bg-green-500/80 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center gap-2",children:[e.jsx("span",{children:""})," "]}),e.jsxs("button",{onClick:i,className:"bg-purple-600/80 hover:bg-purple-500/80 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center gap-2",children:[e.jsx("span",{children:""})," "]})]})}),m&&e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm rounded-2xl p-6 border border-white/20 animate-fadeIn",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("h4",{className:"text-pink-200 font-semibold mb-3",children:" "}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-300",children:" "}),e.jsx("span",{className:"text-white font-medium",children:d.stats.intelligence})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-pink-300",children:" "}),e.jsx("span",{className:"text-white font-medium",children:d.stats.charm})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-300",children:" "}),e.jsx("span",{className:"text-white font-medium",children:d.stats.stamina})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t border-white/20 pt-2",children:[e.jsx("span",{className:"text-yellow-300",children:""}),e.jsx("span",{className:"text-white",children:A.totalStats})]})]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("h4",{className:"text-pink-200 font-semibold mb-3",children:""}),e.jsxs("div",{className:"space-y-2 text-sm",children:[Object.entries(d.affection).map(([D,v])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-300 capitalize",children:D}),e.jsx("span",{className:"text-white font-medium",children:v})]},D)),e.jsxs("div",{className:"flex justify-between font-bold border-t border-white/20 pt-2",children:[e.jsx("span",{className:"text-yellow-300",children:""}),e.jsx("span",{className:"text-white",children:A.totalAffection})]}),e.jsxs("div",{className:"text-xs text-purple-300 mt-2",children:[": ",A.maxAffection.char," (",A.maxAffection.value,")"]})]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("h4",{className:"text-pink-200 font-semibold mb-3",children:" "}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-300",children:"  "}),e.jsxs("span",{className:"text-white font-medium",children:[d.day,"/30"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-300",children:"  "}),e.jsxs("span",{className:"text-white font-medium",children:[A.moneyEarned.toLocaleString(),""]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-300",children:"  "}),e.jsxs("span",{className:"text-white font-medium",children:[A.inventoryCount,""]})]})]})]})]})]})]})}),e.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          25% { transform: translateY(-10px) rotate(5deg); }
          50% { transform: translateY(-5px) rotate(-5deg); }
          75% { transform: translateY(-15px) rotate(3deg); }
        }
        .animate-float {
          animation: float 4s ease-in-out infinite;
        }
        .animate-fadeIn {
          animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]})},Kl=({characterId:c,emotion:i="neutral",size:d="medium",className:o=""})=>{const u={small:"w-16 h-16",medium:"w-24 h-24",large:"w-32 h-32"},m=p=>{const A="#FFE5B4",T="#2C1810";let M="",D="";switch(p){case"happy":M='<circle cx="40" cy="45" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="2" fill="#000" opacity="0.8"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"sad":M='<circle cx="40" cy="47" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="47" r="2" fill="#000" opacity="0.8"/>',D='<path d="M 45 60 Q 50 55 55 60" stroke="#4A90E2" stroke-width="2" fill="none"/>';break;case"angry":M='<line x1="35" y1="42" x2="45" y2="47" stroke="#000" stroke-width="2"/> <line x1="55" y1="47" x2="65" y2="42" stroke="#000" stroke-width="2"/>',D='<line x1="45" y1="58" x2="55" y2="58" stroke="#FF0000" stroke-width="2"/>';break;case"surprised":M='<circle cx="40" cy="45" r="3" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="3" fill="#000" opacity="0.8"/>',D='<ellipse cx="50" cy="58" rx="3" ry="5" fill="#000" opacity="0.6"/>';break;case"love":M='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:M='<circle cx="40" cy="45" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="2" fill="#000" opacity="0.8"/>',D='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #FF6B9D, #C44569)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 20 40 Q 50 15 80 40 Q 75 30 50 25 Q 25 30 20 40" fill="${T}"/>
        <path d="M 15 45 Q 20 35 30 40 Q 25 50 15 55 Z" fill="${T}"/>
        <path d="M 70 40 Q 80 35 85 45 Q 75 50 85 55 Z" fill="${T}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="25" ry="30" fill="${A}"/>

        <!-- Eyes -->
        ${M}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${D}

        <!-- Blush -->
        <circle cx="30" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>
        <circle cx="70" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>

        <!-- Hair accessories -->
        <circle cx="25" cy="35" r="2" fill="#FF4757"/>
        <circle cx="75" cy="35" r="2" fill="#FF4757"/>
      </svg>
    `},y=p=>{const A="#FFEEE6",T="#4A4A4A";let M="",D="";switch(p){case"happy":M='<circle cx="40" cy="45" r="2" fill="#4A90E2"/> <circle cx="60" cy="45" r="2" fill="#4A90E2"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"sad":M='<circle cx="40" cy="47" r="2" fill="#4A90E2"/> <circle cx="60" cy="47" r="2" fill="#4A90E2"/>',D='<path d="M 45 60 Q 50 55 55 60" stroke="#4A90E2" stroke-width="2" fill="none"/>';break;case"love":M='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:M='<circle cx="40" cy="45" r="2" fill="#4A90E2"/> <circle cx="60" cy="45" r="2" fill="#4A90E2"/>',D='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #A8E6CF, #7FCDCD)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 25 35 Q 50 20 75 35 Q 70 25 50 22 Q 30 25 25 35" fill="${T}"/>
        <rect x="45" y="22" width="10" height="25" fill="${T}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="23" ry="28" fill="${A}"/>

        <!-- Eyes -->
        ${M}

        <!-- Glasses -->
        <circle cx="40" cy="45" r="8" fill="none" stroke="#333" stroke-width="1"/>
        <circle cx="60" cy="45" r="8" fill="none" stroke="#333" stroke-width="1"/>
        <line x1="48" y1="45" x2="52" y2="45" stroke="#333" stroke-width="1"/>

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${D}

        <!-- Blush -->
        <circle cx="28" cy="52" r="2" fill="#FFB6C1" opacity="0.4"/>
        <circle cx="72" cy="52" r="2" fill="#FFB6C1" opacity="0.4"/>

        <!-- Book -->
        <rect x="15" y="70" width="12" height="8" fill="#8B4513" rx="1"/>
        <line x1="21" y1="70" x2="21" y2="78" stroke="#654321" stroke-width="1"/>
      </svg>
    `},b=p=>{const A="#FFE8D6",T="#FFD700";let M="",D="";switch(p){case"happy":M='<circle cx="40" cy="45" r="2" fill="#9B59B6"/> <circle cx="60" cy="45" r="2" fill="#9B59B6"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"love":M='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:M='<circle cx="40" cy="45" r="2" fill="#9B59B6"/> <circle cx="60" cy="45" r="2" fill="#9B59B6"/>',D='<path d="M 45 55 Q 50 58 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #FFB347, #FFCC5C)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 20 38 Q 50 18 80 38 Q 75 28 50 23 Q 25 28 20 38" fill="${T}"/>
        <path d="M 15 42 Q 25 32 35 38 Q 30 48 20 52" fill="${T}"/>
        <path d="M 65 38 Q 75 32 85 42 Q 80 48 70 52" fill="${T}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="24" ry="29" fill="${A}"/>

        <!-- Eyes -->
        ${M}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${D}

        <!-- Blush -->
        <circle cx="29" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>
        <circle cx="71" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>

        <!-- Magic sparkles -->
        <circle cx="20" cy="25" r="1" fill="#FFD700"/>
        <circle cx="80" cy="30" r="1" fill="#FFD700"/>
        <circle cx="85" cy="60" r="1" fill="#FFD700"/>
        <circle cx="15" cy="65" r="1" fill="#FFD700"/>

        <!-- Star accessory -->
        <path d="M 70 30 L 72 35 L 77 35 L 73 38 L 75 43 L 70 40 L 65 43 L 67 38 L 63 35 L 68 35 Z" fill="#9B59B6"/>
      </svg>
    `},g=p=>{const A="#F5F5DC",T="#2C2C2C";let M="",D="";switch(p){case"happy":M='<circle cx="40" cy="45" r="2" fill="#8E44AD"/> <circle cx="60" cy="45" r="2" fill="#8E44AD"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#666" stroke-width="2" fill="none"/>';break;case"love":M='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:M='<circle cx="40" cy="45" r="2" fill="#8E44AD"/> <circle cx="60" cy="45" r="2" fill="#8E44AD"/>',D='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #2C3E50, #34495E)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 18 40 Q 50 15 82 40 Q 77 25 50 20 Q 23 25 18 40" fill="${T}"/>
        <path d="M 12 48 Q 18 38 28 42 Q 23 52 12 58" fill="${T}"/>
        <path d="M 72 42 Q 82 38 88 48 Q 77 52 88 58" fill="${T}"/>

        <!-- Face (partially in shadow) -->
        <ellipse cx="50" cy="55" rx="25" ry="30" fill="${A}"/>
        <path d="M 25 45 Q 35 40 50 45 L 50 85 Q 35 80 25 75 Z" fill="#000" opacity="0.3"/>

        <!-- Eyes -->
        ${M}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${D}

        <!-- Mystery mask -->
        <path d="M 35 35 Q 50 32 65 35 Q 60 42 50 40 Q 40 42 35 35" fill="#000" opacity="0.7"/>

        <!-- Mysterious aura -->
        <circle cx="30" cy="20" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="70" cy="25" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="85" cy="70" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="15" cy="75" r="1" fill="#9B59B6" opacity="0.8"/>
      </svg>
    `},x=p=>{const A="#FDBCB4",T="#8B4513";let M="",D="";switch(p){case"happy":M='<circle cx="40" cy="45" r="2" fill="#654321"/> <circle cx="60" cy="45" r="2" fill="#654321"/>',D='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"determined":M='<line x1="35" y1="42" x2="45" y2="47" stroke="#654321" stroke-width="2"/> <line x1="55" y1="47" x2="65" y2="42" stroke="#654321" stroke-width="2"/>',D='<line x1="45" y1="58" x2="55" y2="58" stroke="#333" stroke-width="2"/>';break;default:M='<circle cx="40" cy="45" r="2" fill="#654321"/> <circle cx="60" cy="45" r="2" fill="#654321"/>',D='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #3498DB, #2980B9)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 22 38 Q 50 18 78 38 Q 73 28 50 23 Q 27 28 22 38" fill="${T}"/>
        <path d="M 18 45 Q 28 35 38 40 Q 33 50 23 55" fill="${T}"/>
        <path d="M 62 40 Q 72 35 82 45 Q 77 50 67 55" fill="${T}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="24" ry="29" fill="${A}"/>

        <!-- Eyes -->
        ${M}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.7"/>

        <!-- Mouth -->
        ${D}

        <!-- Sword emblem -->
        <rect x="75" y="15" width="2" height="15" fill="#C0C0C0"/>
        <rect x="73" y="12" width="6" height="3" fill="#FFD700"/>
      </svg>
    `},C=()=>{switch(c){case"sakura":return e.jsx("div",{dangerouslySetInnerHTML:{__html:m(i)}});case"yuki":return e.jsx("div",{dangerouslySetInnerHTML:{__html:y(i)}});case"luna":return e.jsx("div",{dangerouslySetInnerHTML:{__html:b(i)}});case"mystery":return e.jsx("div",{dangerouslySetInnerHTML:{__html:g(i)}});case"hero":return e.jsx("div",{dangerouslySetInnerHTML:{__html:x(i)}});default:return e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center text-white text-2xl",children:"?"})}};return e.jsx("div",{className:`${u[d]} ${o} rounded-full overflow-hidden shadow-lg border-2 border-white/20`,children:C()})},Gx=at.memo(({isLoggedIn:c,user:i,onLogout:d})=>{const o=Ee(),{resetGame:u,loadGame:m}=re(N=>N.actions),[y,b]=j.useState(0),[g,x]=j.useState(!1);j.useEffect(()=>{const N=localStorage.getItem("academyDatingSim");x(!!N)},[]);const C=j.useCallback(()=>{d(),window.location.reload()},[d]);j.useEffect(()=>{const N=setInterval(()=>{b(w=>(w+1)%4)},2e3);return()=>clearInterval(N)},[]);const p=j.useCallback(()=>{u(),o("/character-creation")},[u,o]),A=j.useCallback(()=>{m(),o("/game")},[m,o]),T=j.useCallback(()=>{o("/account-creation")},[o]),M=j.useCallback(()=>{o("/login")},[o]),D=j.useCallback(()=>{o("/game-info")},[o]),v=j.useMemo(()=>Array.from({length:20},(N,w)=>e.jsx("div",{className:"absolute animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`},"aria-hidden":"true",children:e.jsx("div",{className:"w-2 h-2 bg-white/20 rounded-full"})},w)),[]);return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden","aria-hidden":"true",children:v}),e.jsxs("div",{className:"relative z-10 max-w-6xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-gradient mb-4 animate-pulse-glow",children:"Labyrinth Academy"}),e.jsx("h2",{className:"text-2xl md:text-3xl text-text-primary mb-2",children:"  "}),e.jsx("p",{className:"text-lg text-text-secondary",children:"      "})]}),e.jsxs("div",{className:"flex justify-center items-center gap-8 mb-12",children:[e.jsxs("div",{className:`transition-all duration-1000 ${y===0?"scale-110":"scale-100"}`,children:[e.jsx(Kl,{characterId:"sakura",emotion:y===0?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:""}),e.jsx("div",{className:"text-text-secondary text-sm",children:" "})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${y===1?"scale-110":"scale-100"}`,children:[e.jsx(Kl,{characterId:"yuki",emotion:y===1?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:""}),e.jsx("div",{className:"text-text-secondary text-sm",children:" "})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${y===2?"scale-110":"scale-100"}`,children:[e.jsx(Kl,{characterId:"luna",emotion:y===2?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:""}),e.jsx("div",{className:"text-text-secondary text-sm",children:" "})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${y===3?"scale-110":"scale-100"}`,children:[e.jsx(Kl,{characterId:"mystery",emotion:y===3?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:"???"}),e.jsx("div",{className:"text-text-secondary text-sm",children:" "})]})]})]}),e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:" "}),c&&i&&e.jsxs("div",{className:"glass-card p-3 mb-4 border-accent/30",children:[e.jsx("div",{className:"text-accent text-sm",children:""}),e.jsx("div",{className:"text-text-primary font-medium",children:i.username})]}),e.jsx("button",{onClick:p,disabled:!c,className:`w-full py-4 px-6 font-bold rounded-xl transition-all duration-300 transform ${c?"btn-primary hover:scale-105":"bg-gray-500 cursor-not-allowed opacity-50 text-gray-300"}`,"aria-label":c?"  ":"    ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:c?"  ":"   "})]})}),g&&e.jsx("button",{onClick:A,className:"w-full py-4 px-6 btn-glass font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"  ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:" "})]})}),e.jsx("button",{onClick:T,className:"w-full py-4 px-6 btn-accent font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"  ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:" "})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:" "}),c?e.jsx("button",{onClick:C,className:"w-full py-4 px-6 btn-secondary font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":" ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:""})]})}):e.jsx("button",{onClick:M,className:"w-full py-4 px-6 btn-secondary font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":" ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:""})]})}),e.jsx("button",{onClick:D,className:"w-full py-4 px-6 btn-glass font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"   ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:" "})]})})]})]}),e.jsxs("div",{className:"mt-8 border-t border-border pt-6",children:[e.jsx("h4",{className:"text-lg font-bold text-text-primary mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:""}),e.jsx("div",{className:"text-text-primary font-semibold",children:""}),e.jsx("div",{className:"text-text-secondary text-sm",children:"   "})]}),e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:""}),e.jsx("div",{className:"text-text-primary font-semibold",children:" "}),e.jsx("div",{className:"text-text-secondary text-sm",children:"  "})]}),e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:""}),e.jsx("div",{className:"text-text-primary font-semibold",children:" "}),e.jsx("div",{className:"text-text-secondary text-sm",children:"  "})]})]})]})]}),e.jsx("div",{className:"text-center mt-8 text-text-secondary",children:e.jsx("p",{children:" 2024 Labyrinth Academy Dating Sim. Made with "})})]})]})});Gx.displayName="Homepage";const Sg=({onLogin:c})=>{const[i,d]=j.useState(""),[o,u]=j.useState(""),[m,y]=j.useState(!1),[b,g]=j.useState(""),x=Ee(),C=async p=>{p.preventDefault(),y(!0),g("");try{await new Promise(T=>setTimeout(T,1e3)),c(i,o)?x("/"):g("   .")}catch{g("   .")}finally{y(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:""}),e.jsx("p",{className:"text-purple-200",children:"   "})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"text",value:i,onChange:p=>d(p.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"password",value:o,onChange:p=>u(p.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:" ",required:!0})]}),b&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:b})}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:" ..."})]}):""})]}),e.jsxs("div",{className:"mt-6 text-center space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-px bg-white/20"}),e.jsx("span",{className:"text-white/50 text-sm",children:""}),e.jsx("div",{className:"flex-1 h-px bg-white/20"})]}),e.jsx("button",{onClick:()=>x("/character-creation"),className:"w-full py-3 px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105",children:"  "}),e.jsx("button",{onClick:()=>x("/"),className:"w-full py-2 px-4 text-purple-300 hover:text-white transition-colors",children:" "}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{className:"text-purple-300 hover:text-white text-sm transition-colors",children:" ?"})})]}),e.jsxs("div",{className:"mt-6 bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-300 font-semibold mb-2",children:" "}),e.jsxs("div",{className:"text-blue-200 text-sm space-y-1",children:[e.jsx("p",{children:": demo"}),e.jsx("p",{children:": password"})]})]})]})})},Cg=({onCancel:c})=>{const i=Ee(),{resetGame:d}=re(k=>k.actions),[o,u]=j.useState(1),[m,y]=j.useState(!1),[b,g]=j.useState(""),[x,C]=j.useState({playerName:"",startingStats:{intelligence:10,charm:10,stamina:10,strength:10,agility:10,luck:10}}),p=Object.values(x.startingStats).reduce((k,R)=>k+R,0),A=80,T=A-p,M=(k,R)=>{C(X=>({...X,[k]:R}))},D=(k,R)=>{const X=Math.max(5,Math.min(20,R));Object.values(x.startingStats).reduce((F,ce)=>F+ce,0)-x.startingStats[k]+X<=A&&C(F=>({...F,startingStats:{...F.startingStats,[k]:X}}))},v=()=>x.playerName.trim()?x.playerName.length<2?"   2  .":null:"  .",N=()=>{if(g(""),o===1){const k=v();if(k){g(k);return}}u(k=>k+1)},w=async()=>{g(""),y(!0);try{await new Promise(k=>setTimeout(k,1e3)),d(x),i("/game")}catch{g("    .")}finally{y(!1)}},_=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" "}),e.jsx("p",{className:"text-purple-200",children:"    "})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsx(Kl,{characterId:"hero",size:"large"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:" "}),e.jsx("input",{type:"text",value:x.playerName,onChange:k=>M("playerName",k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 text-center",placeholder:"  "})]}),e.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-300 font-semibold mb-2",children:" "}),e.jsxs("div",{className:"text-blue-200 text-sm space-y-1",children:[e.jsx("p",{children:"   "}),e.jsx("p",{children:"       "}),e.jsx("p",{children:"        "})]})]})]}),E=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" "}),e.jsxs("p",{className:"text-purple-200",children:[" ",A,"    ( : ",T,")"]})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(x.startingStats).map(([k,R])=>{const q={intelligence:{name:"",icon:"",color:"blue"},charm:{name:"",icon:"",color:"pink"},stamina:{name:"",icon:"",color:"green"},strength:{name:"",icon:"",color:"orange"},agility:{name:"",icon:"",color:"cyan"},luck:{name:"",icon:"",color:"yellow"}}[k];return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-24",children:[e.jsx("span",{className:"text-lg",children:q.icon}),e.jsx("span",{className:"text-white font-medium",children:q.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("button",{onClick:()=>D(k,R-1),disabled:R<=5,className:"w-8 h-8 bg-red-500/50 hover:bg-red-500/70 disabled:bg-gray-500/30 disabled:cursor-not-allowed text-white rounded-full flex items-center justify-center transition-colors",children:"-"}),e.jsxs("div",{className:"flex-1 mx-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-white",children:R}),e.jsxs("span",{className:"text-gray-400",children:[R,"/20"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`bg-gradient-to-r from-${q.color}-400 to-${q.color}-600 h-2 rounded-full transition-all duration-300`,style:{width:`${R/20*100}%`}})})]}),e.jsx("button",{onClick:()=>D(k,R+1),disabled:R>=20||T<=0,className:"w-8 h-8 bg-green-500/50 hover:bg-green-500/70 disabled:bg-gray-500/30 disabled:cursor-not-allowed text-white rounded-full flex items-center justify-center transition-colors",children:"+"})]})]},k)})}),e.jsxs("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-300 font-semibold mb-2",children:" "}),e.jsxs("div",{className:"text-purple-200 text-sm space-y-1",children:[e.jsx("p",{children:" :      "}),e.jsx("p",{children:" :    "}),e.jsx("p",{children:" :      "}),e.jsx("p",{children:" :    "}),e.jsx("p",{children:" :    "}),e.jsx("p",{children:" :    "})]})]})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-lg w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between text-sm text-purple-300 mb-2",children:[e.jsxs("span",{children:[" ",o,"/2"]}),e.jsxs("span",{children:[Math.round(o/2*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${o/2*100}%`}})})]}),o===1&&_(),o===2&&E(),b&&e.jsx("div",{className:"mt-6 bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:b})}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[o>1&&e.jsx("button",{onClick:()=>u(k=>k-1),className:"flex-1 py-3 px-6 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition-colors",children:""}),o<2?e.jsx("button",{onClick:N,className:"flex-1 py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105",children:""}):e.jsx("button",{onClick:w,disabled:m||T!==0,className:"flex-1 py-3 px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:" ..."})]}):" "})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>c?c():i("/"),className:"text-purple-300 hover:text-white text-sm transition-colors",children:c?"":" "})})]})})},Mg=[{id:1,name:" ",description:"    .     .",layout:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,2,0,1,0,3,1],[1,0,0,0,1,0,0,1],[1,1,0,1,1,1,0,1],[1,0,0,0,0,0,0,1],[1,0,4,0,0,0,5,1],[1,1,1,1,1,1,1,1]],enemies:[{id:"dustBunny",name:" ",hp:15,maxHp:15,attack:5,defense:2,agility:8,experience:10,drops:[{itemId:"energyDrink",chance:.3,quantity:1}],sprite:"",description:"     .  ."}],treasures:[{id:"chest1",position:{x:2,y:2},contents:[{itemId:"healingPotion",chance:1,quantity:2},{itemId:"flower",chance:.5,quantity:1}],opened:!1},{id:"chest2",position:{x:6,y:2},contents:[{itemId:"studyGuide",chance:1,quantity:1}],opened:!1}],nextFloorRequirement:{bossDefeated:!1}},{id:2,name:" ",description:"  .    .",layout:[[1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,1,0,0,0,1],[1,0,2,0,0,0,0,3,0,1],[1,0,0,0,1,1,0,0,0,1],[1,1,0,1,1,1,1,0,1,1],[1,0,0,0,0,0,0,0,0,1],[1,0,4,0,1,1,0,5,0,1],[1,0,0,0,0,0,0,0,0,1],[1,0,0,0,1,1,0,0,6,1],[1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"magicBook",name:"",hp:25,maxHp:25,attack:8,defense:4,agility:6,experience:20,drops:[{itemId:"manaPotion",chance:.4,quantity:1},{itemId:"mirror",chance:.2,quantity:1}],sprite:"",description:"  .   ."}],treasures:[{id:"magicChest1",position:{x:2,y:2},contents:[{itemId:"manaPotion",chance:1,quantity:3},{itemId:"charm",chance:.3,quantity:1}],opened:!1},{id:"magicChest2",position:{x:7,y:2},contents:[{itemId:"mysticStaff",chance:.8,quantity:1}],opened:!1},{id:"secretChest",position:{x:8,y:8},contents:[{itemId:"mysteryKey",chance:1,quantity:1}],opened:!1}],boss:{id:"shadowMage",name:" ",hp:80,maxHp:80,attack:15,defense:8,agility:10,experience:100,drops:[{itemId:"mageRobe",chance:.8,quantity:1},{itemId:"wisdomPendant",chance:.3,quantity:1},{itemId:"experienceScroll",chance:1,quantity:3}],sprite:"",description:"    .    ."},nextFloorRequirement:{bossDefeated:!0}},{id:3,name:" ",description:"     .   .",layout:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,2,0,1,1,1,1,0,3,0,1],[1,0,0,0,1,0,0,1,0,0,0,1],[1,0,1,0,1,0,0,1,0,1,0,1],[1,0,1,0,0,0,0,0,0,1,0,1],[1,0,1,1,1,0,0,1,1,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,4,0,1,1,1,1,0,5,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,6,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"ancientGuardian",name:" ",hp:50,maxHp:50,attack:12,defense:10,agility:4,experience:40,drops:[{itemId:"strengthAmulet",chance:.2,quantity:1},{itemId:"plateArmor",chance:.1,quantity:1}],sprite:"",description:"    .  ."}],treasures:[{id:"ancientChest1",position:{x:2,y:2},contents:[{itemId:"steelSword",chance:.7,quantity:1},{itemId:"healingPotion",chance:1,quantity:5}],opened:!1},{id:"ancientChest2",position:{x:9,y:2},contents:[{itemId:"luckRing",chance:.6,quantity:1}],opened:!1},{id:"sacredAltar",position:{x:6,y:10},contents:[{itemId:"jewelryBox",chance:1,quantity:1},{itemId:"statBooster",chance:.5,quantity:1}],opened:!1}],boss:{id:"ancientDragon",name:" ",hp:150,maxHp:150,attack:25,defense:15,agility:8,experience:200,drops:[{itemId:"wisdomPendant",chance:1,quantity:1},{itemId:"jewelryBox",chance:.8,quantity:1},{itemId:"experienceScroll",chance:1,quantity:5}],sprite:"",description:"   .   ."},nextFloorRequirement:{bossDefeated:!0,itemRequired:"mysteryKey"}},{id:4,name:" ",description:"  .    .",layout:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,2,0,0,0,1,1,0,0,0,3,1],[1,0,1,1,0,0,0,0,1,1,0,1],[1,0,0,1,0,5,5,0,1,0,0,1],[1,1,0,1,0,0,0,0,1,0,1,1],[1,0,0,0,0,4,4,0,0,0,0,1],[1,0,1,1,0,0,0,0,1,1,0,1],[1,0,0,1,0,5,5,0,1,0,0,1],[1,1,0,1,0,0,0,0,1,0,1,1],[1,0,0,0,0,1,1,0,0,0,0,1],[1,0,0,0,0,0,6,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"iceGolem",name:" ",hp:80,maxHp:80,attack:18,defense:15,agility:3,experience:60,gold:80,drops:[{itemId:"iceShard",chance:.3,quantity:1}],sprite:"",description:"   "},{id:"frostSprite",name:" ",hp:45,maxHp:45,attack:22,defense:8,agility:12,experience:45,gold:60,sprite:"",description:"   "}],treasures:[{id:"iceChest1",position:{x:5,y:5},contents:[{itemId:"frostArmor",chance:.8,quantity:1}],opened:!1},{id:"iceChest2",position:{x:6,y:5},contents:[{itemId:"healingPotion",chance:1,quantity:10}],opened:!1}],boss:{id:"iceQueen",name:" ",hp:250,maxHp:250,attack:35,defense:20,agility:10,experience:300,gold:500,drops:[{itemId:"iceQueenCrown",chance:.7,quantity:1},{itemId:"experienceScroll",chance:1,quantity:10}],sprite:"",description:"   "},nextFloorRequirement:{bossDefeated:!0}},{id:5,name:" ",description:"    .    .",layout:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,0,0,0,0,1,1,0,0,0,0,3,1],[1,0,1,1,1,0,0,0,0,1,1,1,0,1],[1,0,0,0,0,0,5,5,0,0,0,0,0,1],[1,1,1,0,1,1,0,0,1,1,0,1,1,1],[1,0,0,0,0,0,4,4,0,0,0,0,0,1],[1,0,1,1,1,0,0,0,0,1,1,1,0,1],[1,0,0,0,0,0,5,5,0,0,0,0,0,1],[1,1,1,0,1,1,0,0,1,1,0,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,1,1,6,6,1,1,1,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"lavaSerpent",name:" ",hp:90,maxHp:90,attack:28,defense:10,agility:15,experience:80,gold:100,sprite:"",description:"    "},{id:"fireElemental",name:" ",hp:70,maxHp:70,attack:32,defense:5,agility:8,experience:70,gold:90,sprite:"",description:"   "}],treasures:[{id:"lavaChest1",position:{x:6,y:5},contents:[{itemId:"fireResistRing",chance:.9,quantity:1}],opened:!1},{id:"lavaChest2",position:{x:7,y:5},contents:[{itemId:"phoenixFeather",chance:.5,quantity:1}],opened:!1}],boss:{id:"firedragon",name:" ",hp:400,maxHp:400,attack:45,defense:25,agility:12,experience:500,gold:1e3,drops:[{itemId:"dragonScale",chance:.8,quantity:1},{itemId:"legendaryWeapon",chance:.3,quantity:1}],sprite:"",description:"  ,   "},nextFloorRequirement:{bossDefeated:!0,levelRequired:30}}],Xl={floors:Mg},Eg={fireball:{id:"fireball",name:"",description:"   ",icon:"",type:"attack",element:"fire",mpCost:10,damage:30,cooldown:0,level:1,requiredLevel:1,requiredInt:15},heal:{id:"heal",name:"",description:"HP ",icon:"",type:"heal",element:"light",mpCost:15,healAmount:50,cooldown:2,level:1,requiredLevel:1,requiredInt:10},lightning:{id:"lightning",name:"",description:"  ",icon:"",type:"attack",element:"electric",mpCost:25,damage:50,cooldown:1,level:1,requiredLevel:10,requiredInt:25},ice_shard:{id:"ice_shard",name:" ",description:"  ",icon:"",type:"attack",element:"ice",mpCost:20,damage:35,freezeChance:.3,cooldown:1,level:1,requiredLevel:5,requiredInt:20},shield:{id:"shield",name:"",description:"  ",icon:"",type:"buff",element:"neutral",mpCost:20,defenseBoost:20,duration:3,cooldown:3,level:1,requiredLevel:8},berserk:{id:"berserk",name:"",description:" ,  ",icon:"",type:"buff",element:"neutral",mpCost:15,attackBoost:50,defenseReduce:20,duration:5,cooldown:5,level:1,requiredLevel:12,requiredStrength:30},poison_blade:{id:"poison_blade",name:"",description:"  ",icon:"",type:"attack",element:"poison",mpCost:15,damage:25,poisonDamage:5,poisonDuration:5,cooldown:2,level:1,requiredLevel:7},teleport:{id:"teleport",name:"",description:"   ",icon:"",type:"utility",element:"space",mpCost:30,cooldown:10,level:1,requiredLevel:15,requiredInt:35},summon_familiar:{id:"summon_familiar",name:" ",description:"   ",icon:"",type:"summon",element:"spirit",mpCost:40,familiarHp:50,familiarAttack:15,duration:10,cooldown:15,level:1,requiredLevel:20,requiredInt:40},meteor:{id:"meteor",name:"",description:"   ",icon:"",type:"attack",element:"fire",mpCost:50,damage:100,aoe:!0,cooldown:5,level:1,requiredLevel:25,requiredInt:50}},_g={skills:Eg},es=_g.skills,Ag=({enemy:c,onVictory:i,onDefeat:d,onFlee:o})=>{const u=re(I=>I.player),{updateHpMp:m,gainExperience:y,addItem:b,updateMoney:g}=re(I=>I.actions),[x,C]=j.useState({playerHp:u.hp,playerMp:u.mp,enemyHp:c.hp||c.maxHp,enemyMp:c.mp||50,turn:"player",battleLog:[`${c.name}()  !`],playerEffects:[],enemyEffects:[],turnCount:0,skillCooldowns:{},isAnimating:!1,currentAnimation:null}),[p,A]=j.useState(null),[T,M]=j.useState(!1),D=[es.fireball,es.heal,es.lightning,es.ice_shard,es.shield,es.poison_blade].filter(I=>I&&u.level>=(I.requiredLevel||1)),v=I=>{C(G=>({...G,battleLog:[...G.battleLog.slice(-4),I]}))},N=(I,G)=>{C(B=>{const H=I==="player"?"playerEffects":"enemyEffects";return B[H].find(z=>z.name===G.name)?{...B,[H]:B[H].map(z=>z.name===G.name?{...z,duration:G.duration}:z)}:{...B,[H]:[...B[H],G]}})},w=I=>{C(G=>{const B=I==="player"?"playerEffects":"enemyEffects",H=I==="player"?"playerHp":"enemyHp";let f=G[H],z=[];const V=G[B].reduce((ne,O)=>{if(O.effect.dotDamage&&(f-=O.effect.dotDamage,z.push(`${I==="player"?"":c.name} ${O.name} ${O.effect.dotDamage}  !`)),O.effect.healOverTime){const J=I==="player"?u.maxHp:c.maxHp;f=Math.min(J,f+O.effect.healOverTime),z.push(`${I==="player"?"":c.name} ${O.name} ${O.effect.healOverTime} HP !`)}const Q=O.duration-1;return Q>0?ne.push({...O,duration:Q}):z.push(`${O.name}  .`),ne},[]);return z.forEach(ne=>v(ne)),{...G,[B]:V,[H]:Math.max(0,f)}})},_=(I,G)=>{const B=G==="player"?x.playerEffects:x.enemyEffects,H=G==="player"?x.enemyEffects:x.playerEffects;let f=I;return B.forEach(z=>{z.effect.attack&&(f+=z.effect.attack)}),H.forEach(z=>{z.effect.defense&&(f=Math.max(1,f-z.effect.defense))}),f=Math.floor(f*(.9+Math.random()*.2)),Math.max(1,f)},E=()=>{if(x.isAnimating||T)return;C(B=>({...B,isAnimating:!0,currentAnimation:"attack"}));const I=u.stats?.strength||10,G=_(I,"player");setTimeout(()=>{C(B=>({...B,enemyHp:Math.max(0,B.enemyHp-G),isAnimating:!1,currentAnimation:null})),v(` ! ${c.name} ${G} !`),x.enemyHp-G<=0?le():X()},500)},k=I=>{if(x.isAnimating||T)return;const G=es[I];if(G){if(x.playerMp<G.mpCost){v("MP !");return}if(x.skillCooldowns[I]>0){v(`${G.name}()   ! (${x.skillCooldowns[I]})`);return}C(B=>({...B,isAnimating:!0,currentAnimation:`skill-${G.element}`,playerMp:B.playerMp-G.mpCost,skillCooldowns:{...B.skillCooldowns,[I]:G.cooldown||0}})),setTimeout(()=>{let B=`${G.name} !`;if(G.type==="attack"){const H=_(G.damage||20,"player");C(f=>({...f,enemyHp:Math.max(0,f.enemyHp-H)})),B+=` ${c.name} ${H} ${G.element} !`,G.element==="fire"&&Math.random()<.3?(N("enemy",{name:"",icon:"",duration:3,type:"debuff",effect:{dotDamage:5}}),B+="   !"):G.element==="ice"&&Math.random()<.3?(N("enemy",{name:"",icon:"",duration:2,type:"debuff",effect:{speed:-5}}),B+="   !"):G.element==="electric"&&Math.random()<.3&&(N("enemy",{name:"",icon:"",duration:2,type:"debuff",effect:{attack:-3,defense:-3}}),B+="   !")}else if(G.type==="heal"){const H=G.healAmount||30;C(f=>({...f,playerHp:Math.min(u.maxHp,f.playerHp+H)})),B+=` HP ${H} !`}else G.type==="buff"&&(N("player",{name:G.name,icon:G.icon,duration:G.duration||3,type:"buff",effect:G.effect||{}}),B+="   !");v(B),C(H=>({...H,isAnimating:!1,currentAnimation:null})),x.enemyHp<=0?le():X()},800)}},R=()=>{x.isAnimating||T||(N("player",{name:" ",icon:"",duration:1,type:"buff",effect:{defense:10}}),C(I=>({...I,playerMp:Math.min(u.maxMp,I.playerMp+5)})),v(" !   MP 5 ."),X())},X=()=>{w("player"),C(I=>({...I,skillCooldowns:Object.entries(I.skillCooldowns).reduce((G,[B,H])=>(G[B]=Math.max(0,H-1),G),{}),turn:"enemy",turnCount:I.turnCount+1})),setTimeout(()=>q(),1e3)},q=()=>{if(T)return;C(G=>({...G,isAnimating:!0,currentAnimation:"enemy-attack"}));const I=Math.random();setTimeout(()=>{if(I<.6){const G=_(c.attack||5,"enemy");C(B=>({...B,playerHp:Math.max(0,B.playerHp-G)})),v(`${c.name} ! ${G}  !`)}else if(I<.9&&x.enemyMp>=10){const G=_((c.attack||5)*1.5,"enemy");C(B=>({...B,playerHp:Math.max(0,B.playerHp-G),enemyMp:B.enemyMp-10})),v(`${c.name}  ! ${G}   !`),Math.random()<.3&&(N("player",{name:"",icon:"",duration:2,type:"debuff",effect:{attack:-3}}),v("  !"))}else C(G=>({...G,enemyHp:Math.min(c.maxHp,G.enemyHp+10)})),v(`${c.name}() !`);w("enemy"),C(G=>({...G,isAnimating:!1,currentAnimation:null,turn:"player"})),x.playerHp<=0&&F()},800)},le=()=>{M(!0),v(`! ${c.name}() !`);const I=c.experience||10,G=c.gold||Math.floor(Math.random()*20)+10;if(y(I),g(G),c.drops&&Math.random()<.5){const B=c.drops[Math.floor(Math.random()*c.drops.length)];B&&(b(B.itemId),v(`${B.itemId}() !`))}v(` +${I},  +${G}`),m(x.playerHp,x.playerMp),setTimeout(()=>{i()},2e3)},F=()=>{M(!0),v("...");const I=Math.floor(u.money*.1);g(-I),m(1,u.mp),v(` ${I} .`),setTimeout(()=>{d()},2e3)},ce=()=>{if(x.isAnimating||T)return;const I=.6+(u.stats?.agility||10)*.02;Math.random()<I?(v("!"),m(x.playerHp,x.playerMp),setTimeout(()=>o(),1e3)):(v(" !"),X())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:e.jsxs("div",{className:"w-full max-w-6xl h-full max-h-[90vh] glass-card p-6 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-primary mb-2",children:[u.name," (Lv.",u.level,")"]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.playerHp,"/",u.maxHp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${x.playerHp/u.maxHp*100}%`}})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-blue-400",children:"MP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.playerMp,"/",u.maxMp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:`${x.playerMp/u.maxMp*100}%`}})})]}),x.playerEffects.length>0&&e.jsx("div",{className:"flex gap-2 mt-2",children:x.playerEffects.map((I,G)=>e.jsxs("div",{className:`badge ${I.type==="buff"?"badge-success":"badge-error"}`,title:I.name,children:[I.icon," ",I.duration]},G))})]}),e.jsx("div",{className:`h-48 flex items-center justify-center ${x.currentAnimation==="attack"?"animate-pulse":""}`,children:e.jsx("div",{className:"text-8xl",children:""})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-2",children:c.name}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.enemyHp,"/",c.maxHp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${x.enemyHp/c.maxHp*100}%`}})})]}),x.enemyEffects.length>0&&e.jsx("div",{className:"flex gap-2 mt-2",children:x.enemyEffects.map((I,G)=>e.jsxs("div",{className:`badge ${I.type==="buff"?"badge-success":"badge-error"}`,title:I.name,children:[I.icon," ",I.duration]},G))})]}),e.jsx("div",{className:`h-48 flex items-center justify-center ${x.currentAnimation==="enemy-attack"?"animate-bounce":""}`,children:e.jsx("div",{className:"text-8xl",children:c.icon||""})})]})]}),e.jsx("div",{className:"glass-card p-3 h-24 mb-4 overflow-y-auto",children:x.battleLog.map((I,G)=>e.jsx("div",{className:"text-sm text-text-secondary",children:I},G))}),e.jsx("div",{className:"glass-card p-4",children:x.turn==="player"&&!T?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("button",{onClick:E,disabled:x.isAnimating,className:"btn-primary px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:" "}),e.jsx("button",{onClick:()=>A(p?null:"skills"),disabled:x.isAnimating,className:"btn-accent px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:" "}),e.jsx("button",{onClick:R,disabled:x.isAnimating,className:"btn-secondary px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:" "}),e.jsx("button",{onClick:ce,disabled:x.isAnimating,className:"btn-ghost px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:" "})]}),p==="skills"&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3 p-3 bg-background-dark rounded-lg",children:D.map(I=>{const G=x.skillCooldowns[I.id]>0,B=x.playerMp<I.mpCost;return e.jsx("button",{onClick:()=>k(I.id),disabled:x.isAnimating||G||B,className:`p-3 rounded-lg text-left transition-all ${G||B?"bg-gray-700 opacity-50 cursor-not-allowed":"bg-primary/20 hover:bg-primary/30"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:I.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-text-primary",children:I.name}),e.jsxs("div",{className:"text-xs text-text-secondary",children:["MP: ",I.mpCost,G&&` (CD: ${x.skillCooldowns[I.id]})`]})]})]})},I.id)})})]}):x.turn==="enemy"&&!T?e.jsx("div",{className:"text-center text-text-secondary py-4",children:e.jsx("div",{className:"animate-pulse",children:" ..."})}):T?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-2xl font-bold text-text-primary mb-2",children:" !"}),e.jsx("button",{onClick:x.playerHp>0?i:d,className:"btn-primary px-6 py-3 rounded-lg font-semibold",children:""})]}):null})]})})},Qc=0,fi=1,Xc=2,vx=3,jx=4,Vc=5,Zc=6,Tg=()=>{const c=Ee(),i=re(Q=>Q.player),{updatePlayer:d,updateHpMp:o,addItem:u,updateMoney:m,gainExperience:y}=re(Q=>Q.actions),b=(i.dungeonProgress?.currentFloor||1)-1,g=Xl.floors[b]||Xl.floors[0],[x,C]=j.useState(!1),[p,A]=j.useState(null),T=Q=>{for(let J=0;J<Q.length;J++)for(let $=0;$<Q[J].length;$++)if(Q[J][$]===Xc)return{x:$,y:J};for(let J=0;J<Q.length;J++)for(let $=0;$<Q[J].length;$++)if(Q[J][$]===Qc)return{x:$,y:J};return{x:1,y:1}},[M,D]=j.useState(()=>g.layout.map(Q=>[...Q])),[v,N]=j.useState(()=>{const Q=i.dungeonProgress?.position;return Q&&Q.x!==void 0&&Q.y!==void 0&&M[Q.y]&&M[Q.y][Q.x]!==fi?Q:T(M)}),[w,_]=j.useState(()=>{const Q=v;return new Set([`${Q.x},${Q.y}`])}),[E,k]=j.useState(" !"),[R,X]=j.useState(new Set),[q,le]=j.useState(new Set),[F,ce]=j.useState(new Map);j.useEffect(()=>{const Q=new Map;if(g.enemies&&g.enemies.length>0){const J=[];for(let se=0;se<M.length;se++)for(let ie=0;ie<M[se].length;ie++)if(M[se][ie]===Qc){const oe={x:ie,y:se},we=T(M);Math.abs(oe.x-we.x)+Math.abs(oe.y-we.y)>2&&J.push(oe)}const $=Math.min(J.length,3+Math.floor(Math.random()*3));for(let se=0;se<$;se++)if(J.length>0){const ie=Math.floor(Math.random()*J.length),oe=J[ie],we=g.enemies[Math.floor(Math.random()*g.enemies.length)];Q.set(`${oe.x},${oe.y}`,{...we}),J.splice(ie,1)}}ce(Q)},[g]),j.useEffect(()=>{d({dungeonProgress:{...i.dungeonProgress,position:v}})},[v]),j.useEffect(()=>{const Q=new Set(w);for(let J=-1;J<=1;J++)for(let $=-1;$<=1;$++){const se=v.x+$,ie=v.y+J;se>=0&&ie>=0&&ie<M.length&&se<M[0].length&&Q.add(`${se},${ie}`)}_(Q)},[v]);const I=j.useCallback((Q,J)=>{const $=v.x+Q,se=v.y+J;if($<0||se<0||se>=M.length||$>=M[0].length){k(" !");return}const ie=M[se][$];if(ie===fi){k(" !");return}N({x:$,y:se}),G($,se,ie)},[v,M]),G=(Q,J,$)=>{const se=`${Q},${J}`;if(F.has(se)&&!q.has(se)){const ie=F.get(se);A(ie),C(!0),k(`${ie.name}() !`);return}switch($){case Qc:case Xc:k("  ...");break;case vx:R.has(se)?k("  ."):B(Q,J);break;case jx:H();break;case Vc:f();break;case Zc:q.has(se)?k("  ."):z();break}},B=(Q,J)=>{const $=g.treasures||[{name:" ",effect:"HP +20",value:20},{name:"",effect:"Gold +50",value:50},{name:" ",effect:"MP +10",value:10}],se=$[Math.floor(Math.random()*$.length)];k(` ! ${se.name}() !`),se.effect.includes("HP")?o(Math.min(i.maxHp,i.hp+se.value),i.mp):se.effect.includes("MP")?o(i.hp,Math.min(i.maxMp,i.mp+se.value)):se.effect.includes("Gold")&&m(se.value),X(ie=>new Set(ie).add(`${Q},${J}`))},H=()=>{const Q=Math.floor(Math.random()*10)+5;k(` ! ${Q}  !`),o(Math.max(1,i.hp-Q),i.mp)},f=()=>{b<Xl.floors.length-1?(k("  !"),d({dungeonProgress:{...i.dungeonProgress,currentFloor:b+2,position:{x:1,y:1}}}),D(Xl.floors[b+1].layout),N(T(Xl.floors[b+1].layout)),_(new Set),X(new Set),le(new Set)):(k("!  !"),y(100),m(500),c("/game"))},z=(Q,J)=>{const $=g.boss;if(!$){k(" .");return}A($),C(!0),k(` ${$.name}()  !`)},V=()=>{const Q=`${v.x},${v.y}`;le(J=>new Set([...J,Q])),C(!1),A(null),k(" !")},ne=()=>{C(!1),A(null);const Q=T(M);N(Q),o(Math.floor(i.maxHp*.5),i.mp),k(" .   .")},O=()=>{C(!1),A(null);const Q=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(const J of Q){const $=v.x+J.dx,se=v.y+J.dy;if($>=0&&se>=0&&se<M.length&&$<M[0].length&&M[se][$]!==fi){N({x:$,y:se});break}}k(" .")};return j.useEffect(()=>{const Q=J=>{if(!x)switch(J.key){case"ArrowUp":case"w":I(0,-1);break;case"ArrowDown":case"s":I(0,1);break;case"ArrowLeft":case"a":I(-1,0);break;case"ArrowRight":case"d":I(1,0);break}};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[I,x]),x&&p?e.jsx(Ag,{enemy:p,onVictory:V,onDefeat:ne,onFlee:O}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:["  - ",g.name]}),e.jsxs("p",{className:"text-text-secondary",children:[": ",g.id," | : (",v.x,", ",v.y,")"]})]}),e.jsx("button",{onClick:()=>c("/game"),className:"btn-secondary px-6 py-3 rounded-xl font-semibold",children:""})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("div",{className:"grid grid-cols-8 gap-1 mb-4",children:M.map((Q,J)=>Q.map(($,se)=>{const ie=`${se},${J}`,oe=w.has(ie),we=se===v.x&&J===v.y,he=F.has(ie)&&!q.has(ie);return e.jsx("div",{className:`
                          aspect-square flex items-center justify-center rounded
                          ${oe?$===fi?"bg-gray-700":$===Xc?"bg-green-800":$===Vc?"bg-yellow-800":$===Zc?"bg-red-900":"bg-gray-600":"bg-gray-800"}
                          ${we?"ring-2 ring-primary animate-pulse":""}
                        `,children:oe&&e.jsx(e.Fragment,{children:we?e.jsx("div",{className:"text-2xl",children:""}):e.jsxs("div",{className:"text-xl",children:[$===vx&&!R.has(ie)&&"",$===Vc&&"",$===Zc&&!q.has(ie)&&"",$===jx&&"",he&&e.jsx("span",{className:"animate-pulse",children:F.get(ie)?.icon||""})]})})},ie)}))}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("p",{className:"text-text-secondary text-center mb-3",children:"  WASD "}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 max-w-xs mx-auto",children:[e.jsx("div",{}),e.jsx("button",{onClick:()=>I(0,-1),className:"btn-primary p-3 rounded-lg",children:""}),e.jsx("div",{}),e.jsx("button",{onClick:()=>I(-1,0),className:"btn-primary p-3 rounded-lg",children:""}),e.jsx("button",{onClick:()=>I(0,1),className:"btn-primary p-3 rounded-lg",children:""}),e.jsx("button",{onClick:()=>I(1,0),className:"btn-primary p-3 rounded-lg",children:""})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:" "}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[i.hp,"/",i.maxHp]})]}),e.jsx("div",{className:"w-full h-2 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${i.hp/i.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-blue-400",children:"MP"}),e.jsxs("span",{className:"text-text-secondary",children:[i.mp,"/",i.maxMp]})]}),e.jsx("div",{className:"w-full h-2 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:`${i.mp/i.maxMp*100}%`}})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-background-dark p-2 rounded",children:[e.jsx("span",{className:"text-yellow-400",children:""}),e.jsx("span",{className:"float-right text-text-primary",children:i.level})]}),e.jsxs("div",{className:"bg-background-dark p-2 rounded",children:[e.jsx("span",{className:"text-green-400",children:""}),e.jsx("span",{className:"float-right text-text-primary",children:i.money})]})]})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:""}),e.jsx("div",{className:"bg-background-dark p-3 rounded-lg h-32 overflow-y-auto",children:e.jsx("p",{className:"text-text-secondary",children:E})})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:""}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]})]})]})]})]})]})})},Dg=()=>{const c=Ee(),i=re(p=>p.player),[d,o]=j.useState(null),[u,m]=j.useState(!1),y=[{id:"forest",name:" ",description:"     .",icon:"",difficulty:1,recommendedLevel:1,rewards:[" "," "," "],unlocked:!0,theme:"nature",boss:" "},{id:"crystal_cave",name:" ",description:"    .",icon:"",difficulty:2,recommendedLevel:5,rewards:[" ",""," "],unlocked:i.level>=3,theme:"crystal",boss:" "},{id:"ancient_ruins",name:" ",description:"    .",icon:"",difficulty:3,recommendedLevel:10,rewards:[" "," "," "],unlocked:i.level>=8,theme:"ancient",boss:" "},{id:"ice_palace",name:" ",description:"    .",icon:"",difficulty:4,recommendedLevel:15,rewards:[" "," "," "],unlocked:i.level>=12,theme:"ice",boss:" "},{id:"volcano",name:" ",description:"    .",icon:"",difficulty:5,recommendedLevel:20,rewards:[""," "," "],unlocked:i.level>=18,theme:"fire",boss:" "},{id:"shadow_realm",name:" ",description:"     .",icon:"",difficulty:6,recommendedLevel:25,rewards:[" "," "," "],unlocked:i.level>=22,theme:"shadow",boss:" "},{id:"celestial_tower",name:" ",description:"    .",icon:"",difficulty:7,recommendedLevel:30,rewards:[" "," "," "],unlocked:i.level>=28,theme:"celestial",boss:" "}],b=p=>{const A=y.find(T=>T.id===p);A&&A.unlocked&&(o(p),m(!0))},g=()=>{d&&(re.setState(p=>({player:{...p.player,currentDungeon:d,dungeonProgress:{...p.player.dungeonProgress,currentFloor:1,position:{x:1,y:1}}}})),c("/dungeon"))},x=p=>"".repeat(p)+"".repeat(7-p),C=p=>{const A=["from-green-500 to-green-700","from-blue-500 to-blue-700","from-purple-500 to-purple-700","from-yellow-500 to-yellow-700","from-orange-500 to-orange-700","from-red-500 to-red-700","from-pink-500 to-pink-700"];return A[p-1]||A[0]};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"  .      ."})]}),e.jsx("button",{onClick:()=>c("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-yellow-400",children:""})," : ",i.level]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-red-400",children:""})," HP: ",i.hp,"/",i.maxHp]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-blue-400",children:""})," MP: ",i.mp,"/",i.maxMp]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-yellow-400",children:""})," : ",i.gold]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.map(p=>e.jsxs("div",{className:`relative transform transition-all duration-300 ${p.unlocked?"hover:scale-105":""}`,children:[e.jsxs("div",{onClick:()=>b(p.id),className:`bg-black/50 backdrop-blur-md rounded-xl border-2 overflow-hidden cursor-pointer ${p.unlocked?"border-border hover:border-primary hover:shadow-xl hover:shadow-primary/20":"border-gray-700 opacity-60 cursor-not-allowed"} ${d===p.id?"border-accent shadow-lg shadow-accent/30":""}`,children:[e.jsx("div",{className:`p-4 bg-gradient-to-r ${C(p.difficulty)}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-2",children:p.icon}),e.jsx("h3",{className:"text-xl font-bold text-white",children:p.unlocked?p.name:"???"})]})}),e.jsx("div",{className:"p-4",children:p.unlocked?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-text-secondary mb-3",children:p.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:""}),e.jsx("div",{className:"text-yellow-400",children:x(p.difficulty)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:" "}),e.jsxs("div",{className:`font-bold ${i.level>=p.recommendedLevel?"text-green-400":"text-red-400"}`,children:["Lv.",p.recommendedLevel,"+"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:""}),e.jsx("div",{className:"text-text-primary font-semibold",children:p.boss})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.rewards.map((A,T)=>e.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:A},T))})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsxs("p",{className:"text-gray-400",children:[" ",y.find(A=>A.id===p.id)?.recommendedLevel-2,"  "]})]})}),p.unlocked&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("button",{className:`w-full py-2 rounded-lg font-bold transition ${d===p.id?"bg-accent text-background":"bg-primary hover:bg-secondary text-white"}`,children:d===p.id?" ":""})})]}),!p.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-2",children:""}),e.jsx("div",{className:"text-gray-300 font-bold",children:""})]})})]},p.id))}),u&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-xl p-8 max-w-md w-full border border-border",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"  "}),e.jsxs("p",{className:"text-text-secondary mb-6",children:[y.find(p=>p.id===d)?.name," ?",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-400 text-sm",children:"      ."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:g,className:"flex-1 px-4 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:""}),e.jsx("button",{onClick:()=>{m(!1),o(null)},className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})})]})})},Rg=()=>{const c=Ee(),i=re(f=>f.player),[d,o]=j.useState([]),[u,m]=j.useState(!1),[y,b]=j.useState(null),[g,x]=j.useState(""),[C,p]=j.useState(null),[A,T]=j.useState(""),[M,D]=j.useState(""),[v,N]=j.useState(""),[w,_]=j.useState([]),[E,k]=j.useState([]),R=[{id:"happy",label:"",emoji:""},{id:"excited",label:"",emoji:""},{id:"peaceful",label:"",emoji:""},{id:"romantic",label:"",emoji:""},{id:"sad",label:"",emoji:""},{id:"confused",label:"",emoji:""},{id:"determined",label:"",emoji:""},{id:"nostalgic",label:"",emoji:""}],X=()=>{const f=["","","","",""];return Object.keys(i.affection).forEach(z=>{(i.affection[z]||0)>0&&f.push(z)}),i.location&&f.push(i.location),[...new Set(f)]};j.useEffect(()=>{const f=localStorage.getItem("diaryEntries");f&&o(JSON.parse(f))},[]);const q=f=>{localStorage.setItem("diaryEntries",JSON.stringify(f)),o(f)},le=()=>{if(!A.trim()||!M.trim()){alert("  !");return}const z=[{id:`diary-${Date.now()}`,date:new Date().toLocaleDateString("ko-KR"),day:i.day,timeOfDay:i.timeOfDay,title:A,content:M,mood:v,tags:w,memories:E,createdAt:Date.now()},...d];q(z),T(""),D(""),N(""),_([]),k([]),m(!1);const{addExperience:V}=re.getState().actions;V(5)},F=f=>{if(confirm("  ?")){const z=d.filter(V=>V.id!==f);q(z),b(null)}},ce=f=>{w.includes(f)||_([...w,f])},I=f=>{_(w.filter(z=>z!==f))},G=()=>{const f=[];return i.level>1&&f.push(`  ${i.level} !`),Object.keys(i.affection).forEach(z=>{(i.affection[z]||0)>=20&&f.push(`${z}   .`)}),f},B=d.filter(f=>{const z=!g||f.title.toLowerCase().includes(g.toLowerCase())||f.content.toLowerCase().includes(g.toLowerCase()),V=!C||f.tags.includes(C);return z&&V}),H=[...new Set(d.flatMap(f=>f.tags))];return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"   "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-primary hover:bg-secondary text-white rounded-lg transition font-bold",children:"  "}),e.jsx("button",{onClick:()=>c("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-text-primary",children:["  : ",e.jsx("span",{className:"font-bold text-accent",children:d.length}),""]}),e.jsxs("div",{className:"text-text-primary",children:[" Day ",i.day," - ",zg(i.timeOfDay)]}),e.jsxs("div",{className:"text-text-primary",children:[" ",i.location||""]})]})})}),!u&&!y&&e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:" ...",value:g,onChange:f=>x(f.target.value),className:"flex-1 px-4 py-2 bg-black/50 border border-border rounded-lg text-text-primary"}),e.jsxs("select",{value:C||"",onChange:f=>p(f.target.value||null),className:"px-4 py-2 bg-black/50 border border-border rounded-lg text-text-primary",children:[e.jsx("option",{value:"",children:" "}),H.map(f=>e.jsx("option",{value:f,children:f},f))]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[!u&&!y&&e.jsx(e.Fragment,{children:B.length>0?B.map(f=>e.jsxs("div",{onClick:()=>b(f),className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-border hover:border-primary cursor-pointer transition-all hover:scale-105",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-1",children:f.title}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Day ",f.day," - ",f.date]})]}),e.jsx("span",{className:"text-2xl",children:R.find(z=>z.label===f.mood)?.emoji||""})]}),e.jsx("p",{className:"text-text-secondary line-clamp-3 mb-3",children:f.content}),f.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:f.tags.map((z,V)=>e.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:["#",z]},V))})]},f.id)):e.jsxs("div",{className:"col-span-3 text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-text-secondary text-lg",children:g||C?"  .":"   .   !"})]})}),u&&e.jsxs("div",{className:"lg:col-span-3 bg-black/50 backdrop-blur-md rounded-lg p-8 border border-border",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"  "}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:""}),e.jsx("input",{type:"text",value:A,onChange:f=>T(f.target.value),placeholder:"  ...",className:"w-full px-4 py-3 bg-black/50 border border-border rounded-lg text-text-primary"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:" "}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:R.map(f=>e.jsxs("button",{onClick:()=>N(f.label),className:`px-4 py-3 rounded-lg border-2 transition ${v===f.label?"border-primary bg-primary/20":"border-border hover:border-primary/50"}`,children:[e.jsx("span",{className:"text-2xl mr-2",children:f.emoji}),e.jsx("span",{className:"text-text-primary",children:f.label})]},f.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:""}),e.jsx("textarea",{value:M,onChange:f=>D(f.target.value),placeholder:"    ...",rows:10,className:"w-full px-4 py-3 bg-black/50 border border-border rounded-lg text-text-primary"}),G().length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:" :"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:G().map((f,z)=>e.jsxs("button",{onClick:()=>D(V=>V+`
`+f),className:"text-xs bg-purple-600/20 text-purple-400 px-2 py-1 rounded hover:bg-purple-600/30",children:["+ ",f]},z))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:w.map(f=>e.jsxs("span",{className:"bg-primary/20 text-primary px-3 py-1 rounded-full text-sm flex items-center gap-2",children:["#",f,e.jsx("button",{onClick:()=>I(f),className:"text-red-400 hover:text-red-300",children:""})]},f))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:X().map(f=>!w.includes(f)&&e.jsxs("button",{onClick:()=>ce(f),className:"text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-gray-600",children:["+ ",f]},f))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:le,className:"flex-1 px-6 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:" "}),e.jsx("button",{onClick:()=>{m(!1),T(""),D(""),N(""),_([])},className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]}),y&&e.jsxs("div",{className:"lg:col-span-3 bg-black/50 backdrop-blur-md rounded-lg p-8 border border-border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:y.title}),e.jsxs("div",{className:"flex gap-4 text-text-secondary",children:[e.jsxs("span",{children:[" Day ",y.day]}),e.jsxs("span",{children:[" ",y.date]}),e.jsxs("span",{children:[R.find(f=>f.label===y.mood)?.emoji," ",y.mood]})]})]}),e.jsx("button",{onClick:()=>b(null),className:"text-2xl text-text-secondary hover:text-text-primary",children:""})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-6 mb-6",children:e.jsx("p",{className:"text-text-primary whitespace-pre-wrap leading-relaxed",children:y.content})}),y.tags.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.tags.map((f,z)=>e.jsxs("span",{className:"bg-primary/20 text-primary px-3 py-1 rounded-full",children:["#",f]},z))})]}),y.memories&&y.memories.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:" "}),e.jsx("div",{className:"space-y-2",children:y.memories.map((f,z)=>e.jsxs("div",{className:"bg-purple-600/20 text-purple-300 px-4 py-2 rounded-lg",children:[" ",f]},z))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>F(y.id),className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition",children:" "}),e.jsx("button",{onClick:()=>b(null),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})]})]})})},zg=c=>({morning:"",noon:"",afternoon:"",evening:"",night:""})[c]||c,Og=()=>{const c=Ee(),i=re(R=>R.player),d=re(R=>R.actions.updateAffection),o=re(R=>R.actions.addExperience),u=re(R=>R.actions.addGold),[m,y]=j.useState(null),[b,g]=j.useState(null),[x,C]=j.useState(0),[p,A]=j.useState({}),[T,M]=j.useState(!1),D=[{heroineId:"sakura",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"sakura-1-1",requiredAffection:0,title:" ",description:"  ",dialogue:["(      )",': "...?    ."',': ", . ..."',': ",    ?"'],choices:[{text:"  ",affectionChange:5,response:': "...   ."'},{text:" ",affectionChange:0,response:': "...   ."'}],rewards:{exp:10}},{id:"sakura-1-2",requiredAffection:10,title:" ",description:"    ",dialogue:[': ",   ."',"(   )",': "  ..."',': "? !"',': "...  .  ."'],rewards:{exp:15,gold:50}}]},{id:2,title:" ",requiredAffection:30,events:[{id:"sakura-2-1",requiredAffection:30,title:" ",description:"      ",dialogue:[': "...     ?"',': "   ."',': "...!"',"(  )",': "...     ."',': "  ..."'],choices:[{text:"  ",affectionChange:10,response:': "...  ."'},{text:" ",affectionChange:8,response:': "....     ."'}],rewards:{exp:25,gold:100}}]},{id:3,title:" ",requiredAffection:60,events:[{id:"sakura-3-1",requiredAffection:60,title:"",description:"  ",dialogue:["(  )",': "...   ."',': "    ..."',': "...      ."',': "...  ."'],choices:[{text:" ",affectionChange:20,response:': "? ...  !"'},{text:"()",affectionChange:25,response:': "...! ( )"'}],rewards:{exp:50,gold:200}}]}]},{heroineId:"yuki",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"yuki-1-1",requiredAffection:0,title:" ",description:"   ",dialogue:["(     )",': "... ..."',"(  )",': "  ?"',': "   ...  ?"'],choices:[{text:" ",affectionChange:5,response:': "?  ?"'},{text:" ",affectionChange:2,response:': "  ...   ."'}],rewards:{exp:10}}]},{id:2,title:"  ",requiredAffection:25,events:[{id:"yuki-2-1",requiredAffection:25,title:" ",description:"    ",dialogue:[': " ...  ."',"(    )",': "    ."',': "  ...  ."',': "    ."'],choices:[{text:"",affectionChange:8,response:': " ...  ."'},{text:"    ",affectionChange:12,response:': "....  ."'}],rewards:{exp:20,gold:80}}]}]},{heroineId:"luna",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"luna-1-1",requiredAffection:0,title:" ",description:"   ",dialogue:["(     )",': "!  ? !"',': "...  !"',': ",   !"',': "   ?"'],choices:[{text:"?",affectionChange:5,response:': "!  !"'},{text:"   ",affectionChange:3,response:': "    ! !"'}],rewards:{exp:10}}]}]},{heroineId:"haruka",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"haruka-1-1",requiredAffection:0,title:"  ",description:"   ",dialogue:["(    )",': "!  ?"',': " !  !"',': ", ..."',': " ?   !"'],choices:[{text:", !",affectionChange:5,response:': "! !"'},{text:" ",affectionChange:1,response:': "    !"'}],rewards:{exp:10}}]}]},{heroineId:"miku",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"miku-1-1",requiredAffection:0,title:" ",description:"   ",dialogue:["(   )","(     )",': "!   ?"',': ",  ..."',': "... ."'],choices:[{text:" ?",affectionChange:5,response:': "? !  !"'},{text:" ",affectionChange:2,response:': ".   ."'}],rewards:{exp:10}}]}]},{heroineId:"rina",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"rina-1-1",requiredAffection:0,title:" ",description:"  ",dialogue:["(    )",': "! ! ..."',': " !"',': "!  ?  !"',': "   !"'],choices:[{text:"  ",affectionChange:6,response:': " !  !"'},{text:" ",affectionChange:2,response:': "   !"'}],rewards:{exp:10}}]}]},{heroineId:"ayumi",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"ayumi-1-1",requiredAffection:0,title:" ",description:"  ",dialogue:["(       )",': "...   ."',': " ?"',': " .    ..."',': "  ?"'],choices:[{text:"",affectionChange:5,response:': " ...   ."'},{text:"   ",affectionChange:4,response:': " .   ."'}],rewards:{exp:10}}]}]}];j.useEffect(()=>{const R=localStorage.getItem("completedStoryEvents");R&&A(JSON.parse(R))},[]);const v=R=>{localStorage.setItem("completedStoryEvents",JSON.stringify(R)),A(R)},N=()=>{b&&(x<b.dialogue.length-1?C(x+1):b.choices&&b.choices.length>0||_())},w=R=>{!b||!m||(d(m,R.affectionChange),alert(R.response),_())},_=()=>{if(!b||!m)return;const R=p[m]||[];if(!R.includes(b.id)){const X={...p,[m]:[...R,b.id]};v(X)}b.rewards&&(b.rewards.exp&&o(b.rewards.exp),b.rewards.gold&&u(b.rewards.gold)),M(!0),setTimeout(()=>{g(null),C(0),M(!1)},2e3)},E=R=>{const X=D.find(ce=>ce.heroineId===R);if(!X)return[];const q=i.affection[R]||0,le=p[R]||[],F=[];for(const ce of X.chapters)if(q>=ce.requiredAffection)for(const I of ce.events)q>=I.requiredAffection&&!le.includes(I.id)&&F.push(I);return F},k=R=>{const X=D.find(F=>F.heroineId===R);if(!X)return{completed:0,total:0};const q=p[R]?.length||0,le=X.chapters.reduce((F,ce)=>F+ce.events.length,0);return{completed:q,total:le}};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-red-500 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"    "})]}),e.jsx("button",{onClick:()=>c("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),!b&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:D.map(R=>{const X=i.affection[R.heroineId]||0,q=E(R.heroineId),le=k(R.heroineId),F=X<=0;return e.jsxs("div",{onClick:()=>!F&&y(R.heroineId),className:`bg-black/50 backdrop-blur-md rounded-lg p-6 border-2 transition-all ${F?"border-gray-700 opacity-60 cursor-not-allowed":"border-border hover:border-primary cursor-pointer hover:scale-105"}`,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:F?"":R.sprite}),e.jsx("h3",{className:"text-xl font-bold text-text-primary",children:F?"???":R.name})]}),!F&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:""}),e.jsx("div",{className:"bg-black/50 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-red-500 h-3 rounded-full",style:{width:`${Math.min(X,100)}%`}})}),e.jsxs("div",{className:"text-center text-sm text-text-primary mt-1",children:[X,"/100"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsxs("div",{className:"text-center text-text-primary",children:[le.completed,"/",le.total," "]})]}),q.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"text-sm text-accent font-bold",children:["   ",q.length,""]})})]})]},R.heroineId)})}),m&&!b&&e.jsxs("div",{className:"mt-6",children:[e.jsx("button",{onClick:()=>y(null),className:"mb-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[E(m).map(R=>e.jsxs("div",{onClick:()=>{g(R),C(0)},className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-border hover:border-primary cursor-pointer transition-all hover:scale-[1.02]",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-2",children:R.title}),e.jsx("p",{className:"text-text-secondary",children:R.description}),R.rewards&&e.jsxs("div",{className:"mt-3 flex gap-4 text-sm",children:[R.rewards.exp&&e.jsxs("span",{className:"text-yellow-400",children:[" EXP +",R.rewards.exp]}),R.rewards.gold&&e.jsxs("span",{className:"text-yellow-400",children:[" Gold +",R.rewards.gold]})]})]},R.id)),E(m).length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-text-secondary",children:["    .",e.jsx("br",{}),"  !"]})})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 rounded-xl p-8 max-w-3xl w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:b.title}),e.jsx("div",{className:"bg-black/30 rounded-lg p-6 mb-6 min-h-[200px]",children:e.jsx("p",{className:"text-lg text-white leading-relaxed",children:b.dialogue[x]})}),x===b.dialogue.length-1&&b.choices?e.jsx("div",{className:"space-y-3",children:b.choices.map((R,X)=>e.jsxs("button",{onClick:()=>w(R),className:"w-full p-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg text-white transition-all hover:scale-[1.02]",children:[R.text,R.affectionChange>0&&e.jsxs("span",{className:"ml-2 text-sm opacity-80",children:["( +",R.affectionChange,")"]})]},X))}):e.jsx("button",{onClick:N,className:"w-full p-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white font-bold transition-all",children:x<b.dialogue.length-1?" ":""})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-60 pointer-events-none",children:e.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl p-8 animate-bounce",children:e.jsx("h2",{className:"text-3xl font-bold text-white text-center",children:"  ! "})})})]})})},Hg=()=>{const c=Ee(),i=re(B=>B.player),d=re(B=>B.unlockedCharacters),o=re(B=>B.completedEvents),{saveGame:u,loadGame:m}=re(B=>B.actions),[y,b]=j.useState([]),[g,x]=j.useState(null),[C,p]=j.useState(null),[A,T]=j.useState(!1),[M,D]=j.useState(()=>{}),[v,N]=j.useState(""),w=6;j.useEffect(()=>{_()},[]);const _=()=>{const B=[];for(let H=1;H<=w;H++){const f=`academyDatingSim_slot${H}`,z=localStorage.getItem(f);if(z){const V=JSON.parse(z);B.push({id:H,isEmpty:!1,data:{playerName:V.player.name,level:V.player.level,day:V.player.day,timeOfDay:V.player.timeOfDay,location:V.player.location,affectionSummary:V.player.affection||{},saveDate:V.saveDate||new Date().toLocaleString(),playTime:V.playTime||0}})}else B.push({id:H,isEmpty:!0})}b(B)},E=B=>{const H=y.find(f=>f.id===B);H&&!H.isEmpty?(N(` ${B}   ?`),D(()=>()=>k(B)),T(!0)):k(B)},k=B=>{const H=`academyDatingSim_slot${B}`,f={player:i,unlockedCharacters:d,completedEvents:o,saveDate:new Date().toLocaleString(),playTime:F()};localStorage.setItem(H,JSON.stringify(f)),localStorage.setItem("currentSaveSlot",B.toString()),_(),T(!1),alert(`  ${B} !`)},R=B=>{const H=y.find(f=>f.id===B);H&&!H.isEmpty&&(N(` ${B}  ?
    .`),D(()=>()=>X(B)),T(!0))},X=B=>{const H=`academyDatingSim_slot${B}`,f=localStorage.getItem(H);if(f){const z=JSON.parse(f);localStorage.setItem("academyDatingSim",JSON.stringify({player:z.player,unlockedCharacters:z.unlockedCharacters,completedEvents:z.completedEvents})),localStorage.setItem("currentSaveSlot",B.toString()),m(),T(!1),c("/game")}},q=B=>{N(` ${B}  ?
    .`),D(()=>()=>le(B)),T(!0)},le=B=>{const H=`academyDatingSim_slot${B}`;localStorage.removeItem(H),_(),T(!1),alert(` ${B}  .`)},F=()=>i.day*60+(i.timeOfDay==="noon"?30:0),ce=B=>{const H=Math.floor(B/60),f=B%60;return`${H} ${f}`},I=B=>({morning:"",noon:"",afternoon:"",evening:"",night:""})[B]||"",G=B=>{const H=Object.entries(B);return H.length===0?null:H.reduce((z,[V,ne])=>ne>z.value?{char:V,value:ne}:z,{char:H[0][0],value:H[0][1]})};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-2",children:"  & "}),e.jsxs("p",{className:"text-text-secondary",children:[" ",w,"     "]})]}),e.jsx("button",{onClick:()=>c("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>p("save"),className:`px-6 py-3 rounded-lg font-bold transition ${C==="save"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:" "}),e.jsx("button",{onClick:()=>p("load"),className:`px-6 py-3 rounded-lg font-bold transition ${C==="load"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:" "})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(B=>e.jsxs("div",{className:`bg-black/50 backdrop-blur-md rounded-lg border-2 transition-all hover:scale-[1.02] ${g===B.id?"border-accent shadow-xl":"border-border hover:border-primary"} ${B.isEmpty?"opacity-60":""}`,children:[e.jsx("div",{className:`p-4 bg-gradient-to-r ${B.isEmpty?"from-gray-700 to-gray-600":"from-purple-700 to-blue-700"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:[" ",B.id]}),!B.isEmpty&&e.jsx("button",{onClick:()=>q(B.id),className:"text-red-400 hover:text-red-300 text-sm",children:" "})]})}),e.jsxs("div",{className:"p-4",children:[B.isEmpty?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2 opacity-50",children:""}),e.jsx("p",{className:"text-text-secondary",children:" "})]}):B.data&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:":"}),e.jsx("span",{className:"text-text-primary font-bold",children:B.data.playerName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:":"}),e.jsxs("span",{className:"text-yellow-400 font-bold",children:["Lv.",B.data.level]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:":"}),e.jsxs("span",{className:"text-text-primary",children:["Day ",B.data.day," - ",I(B.data.timeOfDay)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:":"}),e.jsx("span",{className:"text-text-primary",children:B.data.location})]}),Object.keys(B.data.affectionSummary).length>0&&e.jsxs("div",{className:"bg-pink-900/20 rounded p-2 border border-pink-500/30",children:[e.jsx("div",{className:"text-xs text-pink-300 mb-1",children:" :"}),(()=>{const H=G(B.data.affectionSummary);return H?e.jsxs("div",{className:"text-sm text-pink-200",children:[H.char," - ",H.value,"%"]}):null})()]}),e.jsxs("div",{className:"pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-text-secondary",children:" :"}),e.jsx("span",{className:"text-text-primary",children:B.data.saveDate})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-text-secondary",children:" :"}),e.jsx("span",{className:"text-text-primary",children:ce(B.data.playTime)})]})]})]}),C&&e.jsx("button",{onClick:()=>{C==="save"?E(B.id):C==="load"&&!B.isEmpty&&R(B.id)},disabled:C==="load"&&B.isEmpty,className:`w-full mt-4 py-3 rounded-lg font-bold transition ${C==="save"?"bg-blue-600 hover:bg-blue-700 text-white":C==="load"&&!B.isEmpty?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:C==="save"?"   ":"   "})]})]},B.id))}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-xl p-8 max-w-md w-full border border-border",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary mb-4",children:""}),e.jsx("p",{className:"text-text-secondary mb-6 whitespace-pre-line",children:v}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:M,className:"flex-1 px-4 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:""}),e.jsx("button",{onClick:()=>T(!1),className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})}),!C&&e.jsxs("div",{className:"mt-8 bg-black/30 backdrop-blur-md rounded-lg p-6 border border-border",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-text-secondary",children:[e.jsx("li",{children:'  ""  ""  '}),e.jsx("li",{children:" :      "}),e.jsx("li",{children:" :     "}),e.jsx("li",{children:"    ,    "})]})]})]})})},Kc=Ux.items,Lg=()=>{const c=Ee(),i=re(k=>k.player),{buyItem:d,updateMoney:o,sellItem:u}=re(k=>k.actions),[m,y]=j.useState("buy"),[b,g]=j.useState(null),[x,C]=j.useState(""),p=Object.values(Kc).filter(k=>k.type==="gift"||k.type==="consumable"),A=["","","",""],T=p.filter(k=>x===""?!0:x===""?k.category==="":x===""?k.category==="":x===""?k.rarity==="rare"||k.rarity==="legendary":!0),M=re(k=>k.player.inventory),D=j.useMemo(()=>{const k=M.reduce((R,X)=>(R[X]=(R[X]||0)+1,R),{});return Object.entries(k).map(([R,X])=>({...Kc[R],count:X}))},[M]),v=k=>{if(i.money<k.value){alert(" !");return}o(-k.value),d(k.id),alert(`${k.name}() !`)},N=k=>{const R=Math.floor(k.value/2);u(k.id,R),alert(`${k.name}() ${R}G !`),g(null)},w=k=>{y(k),g(null)},_=k=>{switch(k){case"common":return"";case"uncommon":return"";case"rare":return"";case"epic":return"";case"legendary":return"";default:return""}},E=b?Kc[b]:null;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 to-purple-200 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"  "}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-yellow-600",children:""}),e.jsxs("span",{className:"font-semibold text-gray-800",children:[i.money," "]})]})]}),e.jsx("button",{onClick:()=>c("/game"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold hover:shadow-lg transition",children:" "})]})}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-1 rounded-xl shadow-md",children:[e.jsxs("button",{onClick:()=>w("buy"),className:`px-8 py-3 text-lg font-bold rounded-lg transition-all duration-300 ${m==="buy"?"bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("span",{role:"img","aria-label":"buy",children:""})," "]}),e.jsxs("button",{onClick:()=>w("sell"),className:`px-8 py-3 text-lg font-bold rounded-lg transition-all duration-300 ${m==="sell"?"bg-gradient-to-r from-green-500 to-teal-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("span",{role:"img","aria-label":"sell",children:""})," "]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:m==="buy"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-4",children:A.map(k=>e.jsx("button",{onClick:()=>C(k),className:`px-4 py-2 rounded-lg font-medium transition ${x===k?"bg-gradient-to-r from-pink-500 to-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:k},k))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[600px] overflow-y-auto pr-2",children:T.map(k=>e.jsx("div",{onClick:()=>g(k.id),className:`p-4 rounded-xl cursor-pointer transition border-2 ${b===k.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:k.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:k.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${k.rarity==="legendary"?"bg-yellow-100 text-yellow-800":k.rarity==="epic"?"bg-purple-100 text-purple-800":k.rarity==="rare"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:_(k.rarity)}),e.jsxs("span",{className:"font-bold text-yellow-700",children:[k.value," G"]})]})]})]})},k.id))})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[600px] overflow-y-auto pr-2",children:D.length>0?D.map(k=>e.jsx("div",{onClick:()=>g(k.id),className:`p-4 rounded-xl cursor-pointer transition border-2 ${b===k.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:k.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-gray-800",children:[k.name," ",e.jsxs("span",{className:"text-sm text-gray-500",children:["x",k.count]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${k.rarity==="legendary"?"bg-yellow-100 text-yellow-800":k.rarity==="epic"?"bg-purple-100 text-purple-800":k.rarity==="rare"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:_(k.rarity)}),e.jsxs("span",{className:"font-bold text-green-700",children:[": ",Math.floor(k.value/2)," G"]})]})]})]})},k.id)):e.jsxs("div",{className:"col-span-full text-center text-gray-500 py-8",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:""}),e.jsx("p",{children:"  ."})]})})}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),E?e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:E.icon}),e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:E.name})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:""}),e.jsx("p",{className:"text-sm text-gray-600",children:E.description})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:""}),e.jsx("div",{className:"space-y-1 text-sm",children:E.effects?.map((k,R)=>e.jsxs("div",{className:"text-gray-600",children:[" ",k.type,": ",k.value]},R))})]})]}),e.jsx("div",{className:"border-t pt-3",children:m==="buy"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-600",children:""}),e.jsxs("span",{className:"font-bold text-yellow-800",children:[E.value," "]})]})]}),e.jsx("button",{onClick:()=>v(E),disabled:i.money<E.value,className:`w-full py-3 rounded-lg font-bold transition ${i.money>=E.value?"bg-emerald-500 hover:bg-emerald-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i.money>=E.value?"":" "})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium",children:" "}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-600",children:""}),e.jsxs("span",{className:"font-bold text-green-800",children:[Math.floor(E.value/2)," "]})]})]}),e.jsx("button",{onClick:()=>N(E),className:"w-full py-3 rounded-lg font-bold transition bg-red-500 hover:bg-red-600 text-white",children:""})]})})]}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:""}),e.jsx("p",{children:"      ."})]})]})]})]})})},Bg={fullName:"  ( )",age:18,birthday:"4 5",height:"165cm",bloodType:"O",hobby:[" ","  "," "],favorite:["",""," "],dislike:["",""," "],background:"   '' . 5   ,     3   .       .",secretStory:"        .       ,       .",personality:"  .       .      .",relationships:{yuki:"  .   .",luna:"    ."},specialSkills:["  "," "," "],weakness:"  .     .",dream:"   ,      "},qg={fullName:"  ( )",age:17,birthday:"12 24",height:"158cm",bloodType:"AB",hobby:[" "," "," "],favorite:[""," ","  "],dislike:[" ",""," "],background:"     . 10    ,    .       .",secretStory:"       .       ,       .",personality:" .   ,      .",relationships:{sakura:"   .",luna:"    ."},specialSkills:["  "," "," "],weakness:" ,    .     .",dream:"   ,     "},Ug={fullName:"  (Luna Crimson)",age:"???",birthday:"10 31",height:"162cm",bloodType:"",hobby:["  ","  "," "],favorite:[""," "," "],dislike:["","","(?)"],background:"  .   ,    .     ,      .",secretStory:"500     ,    .        .     ,          .",personality:" ,     .         .",relationships:{sakura:"   .",yuki:"      ."},specialSkills:[" "," "," "," "],weakness:"    .   .",dream:"      ,     "},$g={fullName:"??? ()",age:"",birthday:"",height:"",bloodType:"",hobby:[""," "," "],favorite:["","  "," "],dislike:["  ",""," "],background:"    .  ,  ,   .   .",secretStory:"    .        .      .",personality:"  ,      .",relationships:{all:"   ."},specialSkills:[" "," ","   "],weakness:"    .",dream:"    . ... ?"},Gg={fullName:"  ( )",age:18,birthday:"9 15",height:"168cm",bloodType:"A",hobby:[" "," "," "],favorite:[""," "," "],dislike:["",""," "],background:"  .    ,   .      .",secretStory:"      .        .",personality:"   .       .",relationships:{hana:" .   .",rin:"  .",mei:"   ."},specialSkills:[" ","  "," "],weakness:"  .    .",dream:"         "},Yg={fullName:"  ( )",age:17,birthday:"3 8",height:"160cm",bloodType:"B",hobby:[" "," "," "],favorite:[""," ","  "],dislike:[" "," "," "],background:"       .      .",secretStory:"     ,     .         .",personality:"    .   .",relationships:{akane:"   .   .",rin:"    .",sora:"    ."},specialSkills:["  "," "," "],weakness:"     .    .",dream:"        "},Qg={fullName:"  ( )",age:16,birthday:"7 21",height:"163cm",bloodType:"O",hobby:[" "," "," "],favorite:[""," "," "],dislike:["  ",""," "],background:"   .       .",secretStory:"       .       .     .",personality:"  .    .",relationships:{sakura:"  .",hana:"   .",sora:"   ."},specialSkills:[" "," "," "],weakness:"   .    .",dream:"   ,      "},Xg={fullName:"  ( )",age:17,birthday:"11 3",height:"155cm",bloodType:"AB",hobby:[" "," "," "],favorite:["",""," "],dislike:[" ","","  "],background:"     .     .",secretStory:"     .      .       .",personality:" .      .",relationships:{luna:"   .",akane:"    .",sora:"    ."},specialSkills:["  ","  "," "],weakness:" .     .",dream:"     ,     "},Vg={fullName:"  ( )",age:16,birthday:"2 14",height:"152cm",bloodType:"B",hobby:["",""," "],favorite:["","",""],dislike:["","",""],background:"IQ 180  . 12  , 15  .       .",secretStory:"    ,    .       .",personality:" .      .",relationships:{yuki:"  .",hana:"   .",mei:"    ."},specialSkills:[" ","  "," "],weakness:"   .   .",dream:"   ,     "},Yx={sakura:Bg,yuki:qg,luna:Ug,mystery:$g,akane:Gg,hana:Yg,rin:Qg,mei:Xg,sora:Vg},Zg=({currentCharacter:c,onCharacterSelect:i})=>{const d=Yx,o=d[c];if(!o||!o.relationships)return null;const u={sakura:"",yuki:"",luna:"",mystery:"",akane:"",hana:"",rin:"",mei:"",sora:""},m={sakura:"",yuki:"",luna:"",mystery:"",akane:"",hana:"",rin:"",mei:"",sora:""};return e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-3 text-secondary flex items-center gap-2",children:"  "}),e.jsx("div",{className:"space-y-3",children:Object.entries(o.relationships).map(([y,b])=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-black/30 rounded-lg hover:bg-black/40 transition-colors",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center text-xl border-2 border-primary/30 ${i?"cursor-pointer hover:scale-110 transition-transform":""}`,onClick:()=>i?.(y),children:u[y]||""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-accent",children:m[y]||y}),i&&e.jsx("button",{onClick:()=>i(y),className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded hover:bg-primary/30 transition-colors",children:""})]}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:b})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-pink-400 to-red-400 rounded-full animate-pulse"})})]},y))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/30",children:[e.jsx("h6",{className:"text-sm font-medium text-text-secondary mb-2",children:"  "}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.keys(o.relationships).map(y=>{const g=d[y]?.relationships?.[c];return g?e.jsxs("div",{className:"flex items-center gap-2 text-xs p-2 bg-black/20 rounded",children:[e.jsxs("span",{className:"text-accent",children:[m[y]," :"]}),e.jsx("span",{className:"text-text-primary flex-1",children:g})]},y):null})})]})]})},Jc=za,tt=Yx,Qx=at.memo(()=>{const c=Ee(),i=re(E=>E.player),d=re(E=>E.unlockedCharacters),o=j.useMemo(()=>Object.keys(Jc),[]),u=j.useMemo(()=>o.filter(E=>(i.affection[E]||0)>0),[o,i.affection]),[m,y]=j.useState(u[0]||d[0]||"sakura"),b=j.useMemo(()=>({sakura:"",yuki:"",luna:"",mystery:"???"}),[]),g=j.useMemo(()=>({morning:"  ",noon:"",afternoon:" ",evening:"",night:" "}),[]),x=j.useCallback(E=>{const k=i.affection[E]||0;return{poise:Math.max(60+Math.floor(k/5),0),stress:Math.max(40-Math.floor(k/3),0),arousal:Math.min(20+Math.floor(k/8),100),affection:k}},[i.affection]),C=j.useCallback(E=>b[E]||" ",[b]),p=j.useCallback(E=>(i.affection[E]||0)>=70?"  ":g[i.timeOfDay]||" ",[i.affection,i.timeOfDay,g]),A=j.useCallback(E=>{const k=i.affection[E]||0;return k>=80?" ":k>=60?" ":k>=40?"  ()":" "},[i.affection]),T=j.useCallback(E=>{const k=i.affection[E]||0;return k>=90?"":k>=75?" ":k>=60?" ":k>=40?"":k>=20?"":" "},[i.affection]),M=j.useCallback((E,k)=>{const R=i.affection[k]||0;if(R===0)return"  .  .";const X=Object.keys(E.dialogues).map(Number).sort((q,le)=>le-q);for(const q of X)if(R>=q)return E.dialogues[q.toString()]||"  .  .";return E.dialogues[0]||"  .  ."},[i.affection]),D=j.useMemo(()=>({morning:"8:30 AM",noon:"12:00 PM",afternoon:"3:00 PM",evening:"6:30 PM",night:"10:00 PM"}),[]),v=j.useCallback(()=>D[i.timeOfDay]||"Unknown",[i.timeOfDay,D]),N=j.useMemo(()=>{const E=new Date,k=E.getMonth()+1,R=E.getDate(),q=["","","","","","",""][E.getDay()];return`${E.getFullYear()}-${k.toString().padStart(2,"0")}-${R.toString().padStart(2,"0")} ${q}`},[]),w=j.useMemo(()=>Jc[m],[m]),_=j.useCallback(()=>{c("/game")},[c]);return e.jsx("div",{className:"min-h-screen bg-background p-4 text-text-primary",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg shadow-lg p-4 mb-4 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"  "}),e.jsx("button",{onClick:_,className:"px-4 py-2 bg-primary hover:bg-secondary text-white rounded-lg transition","aria-label":"   ",role:"button",children:"  "})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:e.jsxs("div",{className:"lg:col-span-4",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-t-lg shadow-lg p-4 border-b border-border",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-text-primary text-center",children:" "}),e.jsx("div",{className:"flex gap-4 justify-center overflow-x-auto pb-2",children:o.map(E=>{const k=Jc[E];if(!k)return null;const X=!((i.affection[E]||0)>0);return e.jsxs("button",{onClick:()=>{X||y(E)},disabled:X,className:`px-6 py-3 rounded-lg transition-all border-2 flex flex-col items-center gap-2 min-w-[120px] relative ${X?"border-gray-600 bg-gray-900/50 opacity-60 cursor-not-allowed":m===E?"border-primary bg-primary/20 scale-105 shadow-lg":"border-border hover:border-primary hover:bg-primary/10 hover:shadow-md"}`,"aria-label":`${X?" ":k.name+"  "}`,"aria-pressed":!X&&m===E,role:"button",children:[X&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg bg-black/60",children:e.jsx("span",{className:"text-4xl",children:""})}),e.jsx("span",{className:"text-3xl","aria-hidden":"true",children:X?"":k.sprite}),e.jsx("div",{className:"font-bold text-text-primary text-sm whitespace-nowrap",children:X?"???":k.name})]},E)})})]}),w&&!((i.affection[m]||0)<=0)?e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-b-2xl shadow-2xl overflow-hidden border border-border border-t-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 min-h-[700px]",children:[e.jsxs("div",{className:"bg-black/20 p-8 flex flex-col items-center justify-center relative",children:["                    ",e.jsx("div",{className:"absolute top-4 right-4 text-6xl opacity-10",children:w.sprite}),e.jsxs("div",{className:"w-56 h-56 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-8xl mb-6 shadow-xl border-4 border-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"}),e.jsx("span",{className:"relative z-10",children:w.sprite})]}),e.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2 text-center",children:w.name}),e.jsx("p",{className:"text-secondary font-medium text-lg mb-4",children:w.role}),e.jsx("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-secondary",children:x(m).affection}),e.jsx("div",{className:"text-sm text-text-secondary",children:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:T(m)}),e.jsx("div",{className:"text-sm text-text-secondary",children:""})]})]})})]}),e.jsxs("div",{className:"lg:col-span-2 p-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:C(m)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:A(m)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:p(m)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:T(m)})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:" "}),e.jsx("div",{className:"space-y-4",children:Object.entries(x(m)).map(([E,k])=>{const X={poise:{icon:"",label:"",color:"from-blue-400 to-blue-600"},stress:{icon:"",label:"",color:"from-orange-400 to-orange-600"},arousal:{icon:"",label:"",color:"from-pink-400 to-pink-600"},affection:{icon:"",label:"",color:"from-red-400 to-red-600"}}[E];return X?e.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2 text-text-primary",children:[e.jsx("span",{className:"text-xl",children:X.icon}),e.jsx("span",{children:X.label})]}),e.jsxs("span",{className:"font-bold text-lg text-text-primary",children:[k,"%"]})]}),e.jsx("div",{className:"w-full bg-black/50 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-4 rounded-full bg-gradient-to-r ${X.color} transition-all duration-1000 ease-out relative`,style:{width:`${Math.max(k,0)}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent rounded-full"})})})]},E):null})})]}),tt[m]&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"  "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:":"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].fullName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:":"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].age})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:":"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].birthday})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:":"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].bloodType})]})]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:""}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:tt[m].background})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:""}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:tt[m].personality})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:" & "}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].hobby?.map((E,k)=>e.jsx("span",{className:"bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs",children:E},k))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:" :"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].favorite?.map((E,k)=>e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs",children:[" ",E]},k))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:" :"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].dislike?.map((E,k)=>e.jsxs("span",{className:"bg-red-500/20 text-red-400 px-2 py-1 rounded text-xs",children:[" ",E]},k))})]})]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:tt[m].specialSkills?.map((E,k)=>e.jsxs("span",{className:"bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full text-sm font-medium border border-purple-500/30",children:[" ",E]},k))})]}),tt[m].weakness&&e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:""}),e.jsxs("p",{className:"text-sm text-text-primary leading-relaxed",children:[" ",tt[m].weakness]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:" "}),e.jsxs("p",{className:"text-sm text-text-primary leading-relaxed",children:[" ",tt[m].dream]})]}),tt[m].secretStory&&i.affection[m]>=50&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/30 to-pink-900/30 backdrop-blur-sm rounded-lg p-4 border border-purple-500/30",children:[e.jsxs("h5",{className:"text-md font-semibold mb-2 text-purple-300 flex items-center gap-2",children:["  ",e.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-300 px-2 py-1 rounded",children:" 50+ "})]}),e.jsx("p",{className:"text-sm text-purple-100 leading-relaxed",children:tt[m].secretStory})]}),tt[m].secretStory&&i.affection[m]<50&&e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 border border-gray-600/30",children:[e.jsxs("h5",{className:"text-md font-semibold mb-2 text-gray-400 flex items-center gap-2",children:["  ",e.jsx("span",{className:"text-xs bg-gray-600/20 text-gray-400 px-2 py-1 rounded",children:" 50 "})]}),e.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:"        ..."})]}),e.jsx(Zg,{currentCharacter:m,onCharacterSelect:E=>{d.includes(E)&&y(E)}})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"  "}),e.jsx("div",{className:"bg-black/20 rounded-lg p-6 border-l-4 border-primary",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:w.sprite}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-primary mb-2",children:w.name}),e.jsxs("p",{className:"text-text-secondary italic leading-relaxed",children:['"',M(w,m),'"']})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"  "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.likes?.slice(0,8).map((E,k)=>e.jsx("span",{className:"bg-primary/20 text-primary px-4 py-2 rounded-full text-sm font-medium border border-primary/50",children:E},k))})]}),e.jsxs("div",{className:"border-t border-border pt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:N})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:v()})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"bg-accent text-background px-3 py-1 rounded-full text-sm font-medium",children:["Day ",i.day]})})]})]})]})}):e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-b-2xl shadow-2xl overflow-hidden border border-border border-t-0",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-16",children:[e.jsx("div",{className:"text-8xl mb-6",children:""}),e.jsx("h2",{className:"text-3xl font-bold text-gray-400 mb-4",children:" "}),e.jsxs("p",{className:"text-gray-500 text-center max-w-md",children:["       .",e.jsx("br",{}),e.jsx("br",{}),":       ."]})]})})]})})]})})});Qx.displayName="CharacterCardPage";const Kg=({onCreateAccount:c})=>{const i=Ee(),[d,o]=j.useState(!1),[u,m]=j.useState(""),[y,b]=j.useState({username:"",email:"",password:"",confirmPassword:""}),g=(p,A)=>{b(T=>({...T,[p]:A}))},x=()=>y.username.trim()?y.username.length<3?"  3  .":y.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y.email)?y.password.trim()?y.password.length<6?"  6  .":y.password!==y.confirmPassword?"  .":null:" .":"   .":" .":" .",C=async p=>{p.preventDefault(),m("");const A=x();if(A){m(A);return}o(!0);try{await new Promise(M=>setTimeout(M,2e3)),c(y)?(alert("  !"),i("/login")):m("    .")}catch{m("    .")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-2",children:" "}),e.jsx("p",{className:"text-purple-200",children:"Labyrinth Academy   "})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"text",value:y.username,onChange:p=>g("username",p.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"  (3 )",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"email",value:y.email,onChange:p=>g("email",p.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"password",value:y.password,onChange:p=>g("password",p.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"  (6 )",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:" "}),e.jsx("input",{type:"password",value:y.confirmPassword,onChange:p=>g("confirmPassword",p.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"  ",required:!0})]}),u&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:u})}),e.jsxs("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-300 font-semibold mb-2",children:" "}),e.jsxs("div",{className:"text-purple-200 text-sm space-y-1",children:[e.jsx("p",{children:"   18   "}),e.jsx("p",{children:"     "}),e.jsx("p",{children:"    "})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:d?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"  ..."})]}):" "})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6 text-sm",children:[e.jsx("button",{onClick:()=>i("/"),className:"text-purple-300 hover:text-white transition-colors",children:"  "}),e.jsx("button",{onClick:()=>i("/login"),className:"text-purple-300 hover:text-white transition-colors",children:"  ?  "})]})]})})},Jg=()=>{const c=Ee();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:" "}),e.jsx("button",{onClick:()=>c("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:" "})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Labyrinth Academy"}),"         ."]}),e.jsx("p",{children:"       ,  ,    ."}),e.jsx("p",{children:" 30         !"})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"   "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-purple-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:" "}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),"     "]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:" :"}),' " "  ']}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),"    "]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),"     "]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:" "}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"/:"}),"   "]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),"    "]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),' " "  ']}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:" :"}),"    "]})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-pink-300 mb-3",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-2",children:[e.jsx("p",{children:"      "}),e.jsx("p",{children:"      "}),e.jsx("p",{children:"       "})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-3",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-purple-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Intelligence)"}),e.jsx("div",{className:"text-sm",children:"   "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Charm)"}),e.jsx("div",{className:"text-sm",children:"  "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Stamina)"}),e.jsx("div",{className:"text-sm",children:"  "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Strength)"}),e.jsx("div",{className:"text-sm",children:"   "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Agility)"}),e.jsx("div",{className:"text-sm",children:"  "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Luck)"}),e.jsx("div",{className:"text-sm",children:"  "})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-3",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-2",children:[e.jsx("p",{children:"  5  : , , , , "}),e.jsx("p",{children:"        "}),e.jsx("p",{children:"  30      "})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-pink-500/20 p-4 rounded-lg border border-pink-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:""}),e.jsx("p",{className:"text-pink-300",children:" "})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"    .      ."})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-lg border border-blue-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:""}),e.jsx("p",{className:"text-blue-300",children:" "})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"    .      ."})]}),e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg border border-purple-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:""}),e.jsx("p",{className:"text-purple-300",children:" "})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"  .        ."})]}),e.jsxs("div",{className:"bg-gray-500/20 p-4 rounded-lg border border-gray-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"???"}),e.jsx("p",{className:"text-gray-300",children:" "})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"     .     ."})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"     .   !"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"         ."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"       ."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"     ,   ."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"   .   !"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"       ."})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsx("p",{children:"     :"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-pink-500/20 p-3 rounded border border-pink-400/30",children:[e.jsx("div",{className:"font-semibold text-pink-300",children:"  "}),e.jsx("div",{className:"text-sm",children:"    "})]}),e.jsxs("div",{className:"bg-green-500/20 p-3 rounded border border-green-400/30",children:[e.jsx("div",{className:"font-semibold text-green-300",children:"  "}),e.jsx("div",{className:"text-sm",children:"   "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-3 rounded border border-blue-400/30",children:[e.jsx("div",{className:"font-semibold text-blue-300",children:"  "}),e.jsx("div",{className:"text-sm",children:"   "})]}),e.jsxs("div",{className:"bg-gray-500/20 p-3 rounded border border-gray-400/30",children:[e.jsx("div",{className:"font-semibold text-gray-300",children:"  "}),e.jsx("div",{className:"text-sm",children:"   "})]})]})]})]})]})})},pi={masterVolume:80,musicVolume:70,soundVolume:80,voiceVolume:80,difficulty:"normal",autoSave:!0,fastText:!1,skipRead:!1,fullscreen:!1,animations:!0},Fg=()=>{const c=Ee(),[i,d]=j.useState(pi),[o,u]=j.useState(!1);j.useEffect(()=>{const p=localStorage.getItem("academyDatingSimSettings");if(p)try{const A=JSON.parse(p);d({...pi,...A})}catch(A){console.error("Failed to load settings:",A)}},[]);const m=(p,A)=>{d(T=>({...T,[p]:A})),u(!0)},y=()=>{localStorage.setItem("academyDatingSimSettings",JSON.stringify(i)),u(!1),alert(" !")},b=()=>{confirm("   ?")&&(d(pi),u(!0))},g=()=>{const p=JSON.stringify(i,null,2),A=new Blob([p],{type:"application/json"}),T=URL.createObjectURL(A),M=document.createElement("a");M.href=T,M.download="academy-dating-sim-settings.json",M.click(),URL.revokeObjectURL(T)},x=p=>{const A=p.target.files?.[0];if(A){const T=new FileReader;T.onload=M=>{try{const D=JSON.parse(M.target?.result);d({...pi,...D}),u(!0),alert(" !")}catch{alert("    .")}},T.readAsText(A)}},C=()=>{confirm("    ?     .")&&confirm(" ?  ,     .")&&(localStorage.removeItem("academyDatingSim"),localStorage.removeItem("academyDatingSimSettings"),alert("  ."),c("/"))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:" "}),e.jsxs("div",{className:"flex gap-2",children:[o&&e.jsx("button",{onClick:y,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition",children:" "}),e.jsx("button",{onClick:()=>c("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:" "})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:[" : ",i.masterVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.masterVolume,onChange:p=>m("masterVolume",parseInt(p.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:[" : ",i.musicVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.musicVolume,onChange:p=>m("musicVolume",parseInt(p.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:[" : ",i.soundVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.soundVolume,onChange:p=>m("soundVolume",parseInt(p.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:[" : ",i.voiceVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.voiceVolume,onChange:p=>m("voiceVolume",parseInt(p.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["easy","normal","hard"].map(p=>e.jsxs("button",{onClick:()=>m("difficulty",p),className:`p-3 rounded-lg border transition ${i.difficulty===p?"bg-purple-600 border-purple-400 text-white":"bg-purple-800/30 border-purple-600/30 text-purple-200 hover:bg-purple-700/40"}`,children:[p==="easy"&&" ",p==="normal"&&" ",p==="hard"&&" "]},p))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.autoSave,onChange:p=>m("autoSave",p.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:" "})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.fastText,onChange:p=>m("fastText",p.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:" "})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.skipRead,onChange:p=>m("skipRead",p.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:"  "})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.animations,onChange:p=>m("animations",p.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:" "})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"  "}),e.jsx("div",{className:"space-y-4",children:e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.fullscreen,onChange:p=>m("fullscreen",p.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:" "})]})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("button",{onClick:g,className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:"  "}),e.jsxs("label",{className:"px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition flex items-center justify-center gap-2 cursor-pointer",children:["  ",e.jsx("input",{type:"file",accept:".json",onChange:x,className:"hidden"})]}),e.jsx("button",{onClick:b,className:"px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:" "}),e.jsx("button",{onClick:C,className:"px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:"   "})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:" /"}),e.jsxs("div",{className:"text-purple-200 space-y-4",children:[e.jsx("p",{children:"       ."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:" "}),e.jsx("p",{className:"text-sm",children:"    ."})]}),e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:" "}),e.jsx("p",{className:"text-sm",children:"        ."})]})]})]})]}),o&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-orange-600 text-white p-4 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"   "}),e.jsx("button",{onClick:y,className:"ml-2 px-3 py-1 bg-white text-orange-600 rounded hover:bg-gray-100 transition",children:""})]})})]})})},Pg=()=>{const{player:c}=re(),[i,d]=j.useState("heroines"),o={heroines:c.metHeroines||[],monsters:c.defeatedMonsterTypes||[],items:c.collectedItems||[],endings:c.unlockedEndings||[]},u=[{id:"heroines",name:"",icon:""},{id:"monsters",name:"",icon:""},{id:"items",name:"",icon:""},{id:"endings",name:"",icon:""}],m=Object.entries(za).map(([M,D])=>({id:M,name:D.name,description:D.role||"",icon:D.sprite||"",category:"heroines",unlocked:o.heroines.includes(M),affection:c.affection?.[M]||0})),y=[{id:"slime",name:"",description:" ",icon:""},{id:"goblin",name:"",description:"  ",icon:""},{id:"skeleton",name:"",description:" ",icon:""},{id:"orc",name:"",description:" ",icon:""},{id:"ghost",name:"",description:" ",icon:""},{id:"vampire",name:"",description:"  ",icon:""},{id:"ice_golem",name:" ",description:"  ",icon:""},{id:"frost_spirit",name:" ",description:" ",icon:""},{id:"lava_serpent",name:" ",description:" ",icon:""},{id:"flame_elemental",name:" ",description:" ",icon:""},{id:"dark_knight",name:" ",description:"  ()",icon:""},{id:"lich_king",name:" ",description:"  ()",icon:""},{id:"ice_queen",name:" ",description:"  ()",icon:""},{id:"fire_dragon",name:" ",description:"  ()",icon:""}].map(M=>({...M,category:"monsters",unlocked:o.monsters.includes(M.id)})),b=[{id:"health_potion",name:" ",description:"HP ",icon:"",rarity:"common"},{id:"mana_potion",name:" ",description:"MP ",icon:"",rarity:"common"},{id:"sword",name:"",description:" ",icon:"",rarity:"common"},{id:"shield",name:"",description:"",icon:"",rarity:"common"},{id:"magic_staff",name:" ",description:"  ",icon:"",rarity:"rare"},{id:"dragon_scale",name:" ",description:" ",icon:"",rarity:"legendary"},{id:"phoenix_feather",name:" ",description:" ",icon:"",rarity:"legendary"},{id:"crystal_heart",name:" ",description:"  ",icon:"",rarity:"epic"},{id:"ancient_tome",name:" ",description:" ",icon:"",rarity:"epic"},{id:"golden_apple",name:" ",description:" ",icon:"",rarity:"legendary"}].map(M=>({...M,category:"items",unlocked:o.items.includes(M.id)})),g=[{id:"true_end_luna",name:"  ",description:"  ",icon:""},{id:"true_end_sakura",name:"  ",description:"  ",icon:""},{id:"true_end_ice",name:"  ",description:"  ",icon:""},{id:"true_end_rose",name:"  ",description:"  ",icon:""},{id:"true_end_star",name:"  ",description:"  ",icon:""},{id:"harem_ending",name:" ",description:"  ",icon:""},{id:"normal_ending",name:" ",description:"  ",icon:""},{id:"bad_ending",name:" ",description:" ",icon:""},{id:"secret_ending",name:" ",description:" ",icon:""},{id:"legend_ending",name:" ",description:" ",icon:""}].map(M=>({...M,category:"endings",unlocked:o.endings.includes(M.id)})),C=(()=>{switch(i){case"heroines":return m;case"monsters":return y;case"items":return b;case"endings":return g;default:return[]}})(),p=C.filter(M=>M.unlocked).length,A=Math.floor(p/C.length*100),T=M=>{switch(M){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"font-bold",children:[p," / ",C.length]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-400 h-full rounded-full transition-all",style:{width:`${A}%`}})}),e.jsxs("div",{className:"text-center mt-2 text-xl font-bold",children:[A,"%"]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(M=>e.jsxs("button",{onClick:()=>d(M.id),className:`px-4 py-2 rounded-lg transition-all ${i===M.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("span",{className:"mr-2",children:M.icon}),M.name]},M.id))})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:C.map(M=>e.jsxs("div",{className:`relative rounded-xl p-4 transition-all ${M.unlocked?"bg-gradient-to-br from-white/20 to-white/10 border-2 border-white/30":"bg-black/30 border-2 border-white/5"}`,children:[M.rarity&&M.unlocked&&e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-bold text-white bg-gradient-to-r ${T(M.rarity)}`,children:M.rarity.toUpperCase()}),e.jsx("div",{className:`text-5xl text-center mb-3 ${M.unlocked?"":"grayscale opacity-30"}`,children:M.unlocked?M.icon:""}),e.jsx("h3",{className:`font-bold text-center ${M.unlocked?"text-white":"text-white/30"}`,children:M.unlocked?M.name:"???"}),M.unlocked&&e.jsx("p",{className:"text-xs text-white/70 text-center mt-2",children:M.description}),M.category==="heroines"&&M.unlocked&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:""}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-red-400 h-full rounded-full",style:{width:`${Math.min(M.affection,100)}%`}})}),e.jsxs("div",{className:"text-xs text-center text-white/80 mt-1",children:[M.affection,"/100"]})]}),!M.unlocked&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-3xl opacity-20",children:""})})]},M.id))}),C.length===0&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 text-center text-white",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl",children:"   ."}),e.jsx("p",{className:"text-white/70 mt-2",children:"    !"})]})]})})};class Us{constructor(){this.bgmAudio=null,this.sfxVolume=.5,this.bgmVolume=.3,this.isMuted=!1,this.bgmTracks={menu:"/sounds/bgm/menu.mp3",game:"/sounds/bgm/game.mp3",battle:"/sounds/bgm/battle.mp3",dungeon:"/sounds/bgm/dungeon.mp3",victory:"/sounds/bgm/victory.mp3",romantic:"/sounds/bgm/romantic.mp3"},this.sfxTracks={click:"/sounds/sfx/click.mp3",hover:"/sounds/sfx/hover.mp3",success:"/sounds/sfx/success.mp3",error:"/sounds/sfx/error.mp3",levelUp:"/sounds/sfx/levelup.mp3",attack:"/sounds/sfx/attack.mp3",damage:"/sounds/sfx/damage.mp3",heal:"/sounds/sfx/heal.mp3",coin:"/sounds/sfx/coin.mp3",open:"/sounds/sfx/open.mp3",close:"/sounds/sfx/close.mp3",notification:"/sounds/sfx/notification.mp3"};const i=localStorage.getItem("soundSettings");if(i){const d=JSON.parse(i);this.sfxVolume=d.sfxVolume??.5,this.bgmVolume=d.bgmVolume??.3,this.isMuted=d.isMuted??!1}}static getInstance(){return Us.instance||(Us.instance=new Us),Us.instance}playBGM(i){try{this.bgmAudio&&(this.bgmAudio.pause(),this.bgmAudio.currentTime=0),this.bgmAudio=new Audio(this.bgmTracks[i]),this.bgmAudio.volume=this.isMuted?0:this.bgmVolume,this.bgmAudio.loop=!0;const d=this.bgmAudio.play();d!==void 0&&d.catch(o=>{console.log("BGM autoplay prevented:",o)})}catch(d){console.error("Error playing BGM:",d)}}stopBGM(){this.bgmAudio&&(this.bgmAudio.pause(),this.bgmAudio.currentTime=0)}pauseBGM(){this.bgmAudio&&this.bgmAudio.pause()}resumeBGM(){this.bgmAudio&&!this.isMuted&&this.bgmAudio.play().catch(i=>{console.log("BGM resume prevented:",i)})}playSFX(i){if(!this.isMuted)try{const d=new Audio(this.sfxTracks[i]);d.volume=this.sfxVolume;const o=d.play();o!==void 0&&o.catch(u=>{console.log("SFX play prevented:",u)})}catch(d){console.error("Error playing SFX:",d)}}setSFXVolume(i){this.sfxVolume=Math.max(0,Math.min(1,i)),this.saveSettings()}setBGMVolume(i){this.bgmVolume=Math.max(0,Math.min(1,i)),this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings()}toggleMute(){return this.isMuted=!this.isMuted,this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings(),this.isMuted}setMute(i){this.isMuted=i,this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings()}getSFXVolume(){return this.sfxVolume}getBGMVolume(){return this.bgmVolume}isMutedStatus(){return this.isMuted}saveSettings(){const i={sfxVolume:this.sfxVolume,bgmVolume:this.bgmVolume,isMuted:this.isMuted};localStorage.setItem("soundSettings",JSON.stringify(i))}playClickSound(){this.playSFX("click")}playHoverSound(){this.playSFX("hover")}playSuccessSound(){this.playSFX("success")}playErrorSound(){this.playSFX("error")}playLevelUpSound(){this.playSFX("levelUp")}playCoinSound(){this.playSFX("coin")}playNotificationSound(){this.playSFX("notification")}playAttackSound(){this.playSFX("attack")}playDamageSound(){this.playSFX("damage")}playHealSound(){this.playSFX("heal")}}const Ge=Us.getInstance(),Wg=()=>{const{player:c,updatePlayer:i}=re(),[d,o]=j.useState([]),[u,m]=j.useState("daily"),[y,b]=j.useState(null),g=[{id:"daily_talk",title:" ",description:" 3 ",icon:"",requirement:{type:"talk",target:3},reward:{gold:500,exp:100}},{id:"daily_battle",title:" ",description:" 5 ",icon:"",requirement:{type:"battle",target:5},reward:{gold:800,exp:150}},{id:"daily_dungeon",title:" ",description:" 1 ",icon:"",requirement:{type:"dungeon",target:1},reward:{gold:1e3,exp:200}},{id:"daily_shop",title:"",description:"  ",icon:"",requirement:{type:"shop",target:1},reward:{gold:300,exp:50}},{id:"daily_minigame",title:" ",description:" 2 ",icon:"",requirement:{type:"minigame",target:2},reward:{gold:600,exp:120}}],x=[{id:"weekly_affection",title:"",description:"  50 ",icon:"",requirement:{type:"affection",target:50},reward:{gold:5e3,exp:1e3,achievementPoints:10}},{id:"weekly_monster",title:" ",description:" 50 ",icon:"",requirement:{type:"monster",target:50},reward:{gold:8e3,exp:1500,items:["rare_weapon"]}},{id:"weekly_level",title:" ",description:" 5 ",icon:"",requirement:{type:"level",target:5},reward:{gold:1e4,exp:2e3,achievementPoints:20}}],C=[{id:"special_boss",title:" ",description:"  ",icon:"",requirement:{type:"boss",target:1},reward:{gold:2e4,exp:5e3,items:["legendary_item"]}},{id:"special_perfect",title:" ",description:"   ",icon:"",requirement:{type:"all_daily",target:5},reward:{gold:15e3,achievementPoints:50}}];j.useEffect(()=>{const v=new Date().toDateString();if(localStorage.getItem("lastQuestDate")!==v){const w=g.map(X=>({...X,type:"daily",requirement:{...X.requirement,current:0},completed:!1,claimed:!1})),E=new Date().getDay()===1?x.map(X=>({...X,type:"weekly",requirement:{...X.requirement,current:0},completed:!1,claimed:!1})):p("weekly"),k=C.map(X=>({...X,type:"special",requirement:{...X.requirement,current:0},completed:!1,claimed:!1})),R=[...w,...E,...k];o(R),localStorage.setItem("lastQuestDate",v),localStorage.setItem("dailyQuests",JSON.stringify(R))}else{const w=localStorage.getItem("dailyQuests");w&&o(JSON.parse(w))}},[]);const p=v=>{const N=localStorage.getItem("dailyQuests");return N?JSON.parse(N).filter(_=>_.type===v):[]},A=v=>{if(!v.completed||v.claimed)return;const N=v.reward;let w={...c};N.gold&&(w.gold=c.gold+N.gold),N.exp&&(w.experience=c.experience+N.exp),N.achievementPoints&&(w.achievementPoints=(c.achievementPoints||0)+N.achievementPoints),i(w);const _=d.map(E=>E.id===v.id?{...E,claimed:!0}:E);o(_),localStorage.setItem("dailyQuests",JSON.stringify(_)),b(v),Ge.playCoinSound(),setTimeout(()=>{b(null)},2e3)},T=d.filter(v=>v.type===u),M=T.filter(v=>v.completed).length,D=T.length;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-800 to-pink-900 p-4",children:[y&&e.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-bounce-in",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white p-4 rounded-lg shadow-2xl",children:[e.jsx("div",{className:"font-bold text-lg mb-2",children:" !"}),e.jsxs("div",{className:"flex items-center gap-3",children:[y.reward.gold&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["+",y.reward.gold]})]}),y.reward.exp&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["+",y.reward.exp," EXP"]})]})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-2",children:[e.jsx("span",{children:" "}),e.jsxs("span",{children:[M," / ",D]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-400 h-full rounded-full transition-all",style:{width:`${M/D*100}%`}})})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex gap-2",children:["daily","weekly","special"].map(v=>e.jsxs("button",{onClick:()=>m(v),className:`px-4 py-2 rounded-lg transition-all flex-1 ${u===v?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[v==="daily"&&"",v==="weekly"&&"",v==="special"&&""]},v))})}),e.jsx("div",{className:"space-y-4",children:T.map(v=>e.jsx("div",{className:`bg-black/30 backdrop-blur rounded-xl p-4 transition-all ${v.completed?"border-2 border-green-400/50":"border-2 border-white/10"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`text-4xl ${v.completed?"":"opacity-50"}`,children:v.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`font-bold text-lg ${v.completed?"text-green-400":"text-white"}`,children:v.title}),v.completed&&!v.claimed&&e.jsx("span",{className:"bg-green-400 text-black text-xs px-2 py-1 rounded-full font-bold",children:"!"}),v.claimed&&e.jsx("span",{className:"bg-gray-500 text-white text-xs px-2 py-1 rounded-full",children:" "})]}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:v.description}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[v.requirement.current," / ",v.requirement.target]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-full rounded-full transition-all ${v.completed?"bg-gradient-to-r from-green-400 to-emerald-400":"bg-gradient-to-r from-blue-400 to-purple-400"}`,style:{width:`${v.requirement.current/v.requirement.target*100}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-sm",children:[e.jsx("span",{className:"text-white/60",children:":"}),v.reward.gold&&e.jsxs("span",{className:"text-yellow-400",children:[" ",v.reward.gold]}),v.reward.exp&&e.jsxs("span",{className:"text-blue-400",children:[" ",v.reward.exp," EXP"]}),v.reward.achievementPoints&&e.jsxs("span",{className:"text-purple-400",children:[" ",v.reward.achievementPoints,"P"]})]})]}),v.completed&&!v.claimed&&e.jsx("button",{onClick:()=>A(v),className:"bg-gradient-to-r from-green-400 to-emerald-400 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg transition-all animate-pulse",children:""})]})},v.id))}),T.length===0&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 text-center text-white",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl",children:"    ."})]})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes bounce-in {
          0% {
            transform: translateX(-50%) scale(0.5);
            opacity: 0;
          }
          50% {
            transform: translateX(-50%) scale(1.1);
          }
          100% {
            transform: translateX(-50%) scale(1);
            opacity: 1;
          }
        }

        .animate-bounce-in {
          animation: bounce-in 0.5s ease-out;
        }
      `})]})},Ig=()=>{const{player:c,gameDate:i,updatePlayer:d}=re(),[o,u]=j.useState(i.month),[m,y]=j.useState(null),[b,g]=j.useState(c.participatedEvents||[]),x=["1","2","3","4","5","6","7","8","9","10","11","12"],C=[{id:"cherry_blossom",name:" ",description:"    !    .",icon:"",type:"festival",date:15,month:4,duration:3,rewards:{affection:{sakura:20,luna:10,ice:10,rose:10,star:10}}},{id:"spring_sports",name:" ",description:"   !   !",icon:"",type:"competition",date:25,month:5,duration:2,rewards:{gold:5e3,exp:1e3,items:["trophy"]},requirements:{level:10}},{id:"summer_festival",name:" ",description:"   !   .",icon:"",type:"festival",date:20,month:7,duration:3,rewards:{affection:{luna:15,sakura:15,ice:15,rose:15,star:15}}},{id:"beach_event",name:" ",description:"  !   .",icon:"",type:"special",date:10,month:8,duration:7,rewards:{gold:3e3,affection:{ice:20,rose:20}}},{id:"harvest_festival",name:" ",description:"   .   !",icon:"",type:"festival",date:15,month:10,duration:3,rewards:{gold:4e3,items:["harvest_basket"]}},{id:"halloween",name:" ",description:"  !   .",icon:"",type:"special",date:31,month:10,duration:1,rewards:{exp:2e3,items:["halloween_costume"],affection:{star:25}}},{id:"culture_festival",name:"",description:"   !     .",icon:"",type:"festival",date:20,month:11,duration:5,rewards:{gold:1e4,exp:3e3,affection:{luna:20,sakura:20,ice:20,rose:20,star:20}},requirements:{level:15}},{id:"christmas",name:"",description:" !   .",icon:"",type:"special",date:24,month:12,duration:2,rewards:{items:["christmas_gift"],affection:{luna:30,sakura:30,ice:30,rose:30,star:30}}},{id:"new_year",name:" ",description:"  !   .",icon:"",type:"seasonal",date:1,month:1,duration:3,rewards:{gold:8888,exp:2e3,items:["lucky_charm"]}},{id:"valentines",name:" ",description:"  !  .",icon:"",type:"special",date:14,month:2,duration:1,rewards:{affection:{luna:50,sakura:50,ice:50,rose:50,star:50},items:["chocolate"]},requirements:{affection:{luna:30}}},{id:"midterm_exam",name:"",description:"   .    !",icon:"",type:"competition",date:15,month:6,duration:3,rewards:{gold:3e3,exp:1500,items:["study_guide"]},requirements:{level:5}},{id:"final_exam",name:"",description:"   .   !",icon:"",type:"competition",date:15,month:12,duration:3,rewards:{gold:5e3,exp:2500,items:["diploma"]},requirements:{level:20}}],p=N=>C.filter(w=>w.month===N),A=N=>{if(N.requirements){if(N.requirements.level&&c.level<N.requirements.level){alert(` ${N.requirements.level}    .`);return}if(N.requirements.affection){for(const[E,k]of Object.entries(N.requirements.affection))if((c.affection?.[E]||0)<k){alert(`${E}  ${k}    .`);return}}}if(b.includes(N.id)){alert("  !");return}let w={...c};if(N.rewards.gold&&(w.gold=c.gold+N.rewards.gold),N.rewards.exp&&(w.experience=c.experience+N.rewards.exp),N.rewards.affection){w.affection={...c.affection};for(const[E,k]of Object.entries(N.rewards.affection))w.affection[E]=(w.affection[E]||0)+k}N.rewards.items&&(w.inventory=[...c.inventory||[],...N.rewards.items.map(E=>({id:E,quantity:1}))]);const _=[...b,N.id];g(_),w.participatedEvents=_,d(w),Ge.playSuccessSound(),alert(`${N.name} !  .`),y(null)},M=(()=>{const N=new Date(i.year,o-1,1).getDay(),w=new Date(i.year,o,0).getDate(),_=[];for(let E=0;E<N;E++)_.push(null);for(let E=1;E<=w;E++)_.push(E);return _})(),D=p(o),v=N=>N?D.find(w=>N>=w.date&&N<w.date+w.duration):null;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-white",children:[e.jsx("div",{className:"text-sm opacity-80",children:" "}),e.jsxs("div",{className:"text-xl font-bold",children:[i.year," ",i.month," ",i.day,""]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsx("button",{onClick:()=>u(o===1?12:o-1),className:"p-2 hover:bg-white/20 rounded-lg transition-all",children:""}),e.jsx("h2",{className:"text-2xl font-bold",children:x[o-1]}),e.jsx("button",{onClick:()=>u(o===12?1:o+1),className:"p-2 hover:bg-white/20 rounded-lg transition-all",children:""})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 text-white mb-2",children:["","","","","","",""].map(N=>e.jsx("div",{className:"text-center font-bold text-sm opacity-80",children:N},N))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:M.map((N,w)=>{const _=v(N),E=N===i.day&&o===i.month;return e.jsx("div",{onClick:()=>_&&y(_),className:`
                      aspect-square rounded-lg p-2 flex flex-col items-center justify-center
                      ${N?"bg-white/10 hover:bg-white/20 cursor-pointer":""}
                      ${E?"ring-2 ring-yellow-400":""}
                      ${_?"bg-gradient-to-br from-purple-500/30 to-pink-500/30":""}
                      transition-all
                    `,children:N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-white ${E?"font-bold":""}`,children:N}),_&&e.jsx("div",{className:"text-2xl mt-1",children:_.icon})]})},w)})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"space-y-3",children:[D.map(N=>{const w=b.includes(N.id);return e.jsx("div",{onClick:()=>y(N),className:`
                      bg-white/10 rounded-lg p-3 cursor-pointer transition-all
                      ${w?"opacity-50":"hover:bg-white/20"}
                    `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:N.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:N.name}),e.jsxs("div",{className:"text-xs text-white/70",children:[N.month," ",N.date," (",N.duration,")"]}),w&&e.jsx("div",{className:"text-xs text-green-400 mt-1",children:"  "})]})]})},N.id)}),D.length===0&&e.jsx("div",{className:"text-white/50 text-center py-4",children:"  ."})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full border-2 border-white/20",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-5xl mb-3",children:m.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:m.name}),e.jsxs("div",{className:"text-white/70 text-sm mt-2",children:[m.month," ",m.date," ~ ",m.date+m.duration-1,""]})]}),e.jsx("p",{className:"text-white/90 mb-4",children:m.description}),m.requirements&&e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:" "}),m.requirements.level&&e.jsxs("div",{className:"text-white/70 text-sm",children:[" ",m.requirements.level," "]}),m.requirements.affection&&e.jsx("div",{className:"text-white/70 text-sm",children:"  "})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:""}),e.jsxs("div",{className:"space-y-1",children:[m.rewards.gold&&e.jsxs("div",{className:"text-yellow-400 text-sm",children:[" ",m.rewards.gold," "]}),m.rewards.exp&&e.jsxs("div",{className:"text-blue-400 text-sm",children:[" ",m.rewards.exp," EXP"]}),m.rewards.affection&&e.jsx("div",{className:"text-pink-400 text-sm",children:"  "}),m.rewards.items&&e.jsx("div",{className:"text-green-400 text-sm",children:"  "})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>A(m),disabled:b.includes(m.id),className:`
                    flex-1 py-3 rounded-lg font-bold transition-all
                    ${b.includes(m.id)?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg"}
                  `,children:b.includes(m.id)?" ":""}),e.jsx("button",{onClick:()=>y(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-lg font-bold transition-all",children:""})]})]})})]})})},eb=()=>{const{player:c,updatePlayer:i}=re(),[d,o]=j.useState("all"),[u,m]=j.useState(null),y=[{id:"health_potion_large",name:"  ",description:"HP 100 ",result:{id:"health_potion_large",quantity:1},materials:[{id:"health_potion",quantity:3},{id:"herb",quantity:2}],category:"consumable",requiredLevel:5,icon:""},{id:"iron_sword",name:"",description:"  ",result:{id:"iron_sword",quantity:1},materials:[{id:"iron_ore",quantity:5},{id:"wood",quantity:2}],category:"weapon",requiredLevel:3,icon:""},{id:"magic_staff",name:" ",description:"  ",result:{id:"magic_staff",quantity:1},materials:[{id:"magic_crystal",quantity:3},{id:"ancient_wood",quantity:2},{id:"gold",quantity:100}],category:"weapon",requiredLevel:10,icon:""},{id:"leather_armor",name:" ",description:" ",result:{id:"leather_armor",quantity:1},materials:[{id:"leather",quantity:5},{id:"thread",quantity:3}],category:"armor",requiredLevel:5,icon:""},{id:"crystal_ring",name:" ",description:" ",result:{id:"crystal_ring",quantity:1},materials:[{id:"crystal",quantity:2},{id:"silver",quantity:3}],category:"accessory",requiredLevel:8,icon:""},{id:"dragon_scale_armor",name:"  ",description:" ",result:{id:"dragon_scale_armor",quantity:1},materials:[{id:"dragon_scale",quantity:10},{id:"mythril",quantity:5},{id:"gold",quantity:1e3}],category:"armor",requiredLevel:25,icon:""},{id:"phoenix_feather_accessory",name:"  ",description:"    ",result:{id:"phoenix_feather_accessory",quantity:1},materials:[{id:"phoenix_feather",quantity:1},{id:"holy_water",quantity:5}],category:"accessory",requiredLevel:20,icon:""},{id:"elixir",name:"",description:"HP MP  ",result:{id:"elixir",quantity:1},materials:[{id:"health_potion_large",quantity:2},{id:"mana_potion_large",quantity:2},{id:"unicorn_horn",quantity:1}],category:"consumable",requiredLevel:15,icon:""}],b=[{id:"all",name:"",icon:""},{id:"weapon",name:"",icon:""},{id:"armor",name:"",icon:""},{id:"accessory",name:"",icon:""},{id:"consumable",name:"",icon:""}],g=p=>p.materials.every(A=>{const T=c.inventory?.find(M=>M.id===A.id);return T&&T.quantity>=A.quantity}),x=p=>{if(c.level<p.requiredLevel){alert(` ${p.requiredLevel}    .`);return}if(!g(p)){alert(" !");return}let A=[...c.inventory||[]];p.materials.forEach(M=>{const D=A.findIndex(v=>v.id===M.id);D!==-1&&(A[D].quantity-=M.quantity,A[D].quantity<=0&&A.splice(D,1))});const T=A.find(M=>M.id===p.result.id);T?T.quantity+=p.result.quantity:A.push({...p.result}),i({inventory:A}),Ge.playSuccessSound(),alert(`${p.name}() !`)},C=d==="all"?y:y.filter(p=>p.category===d);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 via-brown-800 to-orange-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex gap-4",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("span",{className:"text-sm opacity-80",children:""}),e.jsx("div",{className:"font-bold",children:c.level})]}),e.jsxs("div",{className:"text-yellow-400",children:[e.jsx("span",{className:"text-sm opacity-80",children:""}),e.jsx("div",{className:"font-bold",children:c.gold||0})]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(p=>e.jsxs("button",{onClick:()=>o(p.id),className:`px-4 py-2 rounded-lg transition-all ${d===p.id?"bg-gradient-to-r from-amber-500 to-orange-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("span",{className:"mr-2",children:p.icon}),p.name]},p.id))})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(p=>{const A=c.level>=p.requiredLevel&&g(p);return e.jsxs("div",{className:`bg-black/30 backdrop-blur rounded-xl p-4 transition-all ${A?"border-2 border-amber-400/50 hover:border-amber-400":"border-2 border-white/10 opacity-75"}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"text-4xl",children:p.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-white",children:p.name}),e.jsx("p",{className:"text-sm text-white/70",children:p.description}),e.jsxs("div",{className:"text-xs text-amber-400 mt-1",children:["Lv.",p.requiredLevel," "]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2 mb-3",children:[e.jsx("div",{className:"text-sm font-bold text-white/80 mb-1",children:""}),e.jsx("div",{className:"space-y-1",children:p.materials.map(T=>{const M=c.inventory?.find(v=>v.id===T.id),D=M&&M.quantity>=T.quantity;return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:D?"text-green-400":"text-red-400",children:T.id}),e.jsxs("span",{className:D?"text-green-400":"text-red-400",children:[M?.quantity||0," / ",T.quantity]})]},T.id)})})]}),e.jsx("button",{onClick:()=>x(p),disabled:!A,className:`w-full py-2 rounded-lg font-bold transition-all ${A?"bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:A?"":c.level<p.requiredLevel?" ":" "})]},p.id)})})]})})},tb=()=>{const{player:c,updatePlayer:i}=re(),[d,o]=j.useState("overview"),[u,m]=j.useState(null),[y,b]=j.useState(!1),[g,x]=j.useState(""),C=[{id:"crimson_phoenix",name:" ",description:"  ",icon:"",level:15,exp:8500,maxExp:1e4,members:[],maxMembers:50,benefits:[" +10%","  +20%","  +15%"],treasury:15e4,ranking:1},{id:"azure_dragon",name:" ",description:"   ",icon:"",level:12,exp:6e3,maxExp:8e3,members:[],maxMembers:40,benefits:[" +20%","  -10%","  +25%"],treasury:12e4,ranking:2},{id:"golden_merchant",name:" ",description:"   ",icon:"",level:10,exp:4500,maxExp:6e3,members:[],maxMembers:60,benefits:["  20%","  +15%","  "],treasury:5e5,ranking:3}],p=[{id:"daily_dungeon",name:"  ",description:"  10 ",reward:{guildExp:100,treasury:5e3},requirement:" 10 ",difficulty:"easy",progress:3,maxProgress:10},{id:"boss_raid",name:" ",description:"  ",reward:{guildExp:500,treasury:2e4,items:["legendary_weapon"]},requirement:"  ",difficulty:"hard",progress:0,maxProgress:1},{id:"guild_war",name:"  ",description:"   ",reward:{guildExp:1e3,treasury:5e4},requirement:" ",difficulty:"legendary",progress:0,maxProgress:1},{id:"resource_gathering",name:" ",description:"   ",reward:{guildExp:200,treasury:1e4},requirement:" 100 ",difficulty:"medium",progress:45,maxProgress:100}],A=[{id:"guild_blessing",name:" ",description:"  +10 (24)",cost:1e4,icon:""},{id:"guild_teleport",name:"  ",description:"   ",cost:1e3,icon:""},{id:"guild_exp_boost",name:" ",description:" +50% (1)",cost:5e3,icon:""},{id:"guild_weapon",name:"  ",description:"    ",cost:5e4,icon:""},{id:"guild_mount",name:" ",description:" +100%",cost:1e5,icon:""}],T=()=>{if(!g){alert("  .");return}if((c.gold||0)<5e4){alert("  50,000  .");return}const v={id:`guild_${Date.now()}`,name:g,description:"  ",icon:"",level:1,exp:0,maxExp:1e3,members:[{id:c.id||"player",name:c.name,role:"leader",level:c.level,contribution:0,joinDate:new Date().toISOString(),avatar:""}],maxMembers:20,benefits:["  "],treasury:0,ranking:999};m(v),i({gold:(c.gold||0)-5e4}),Ge.playSuccessSound(),b(!1)},M=v=>{const N={id:c.id||"player",name:c.name,role:"member",level:c.level,contribution:0,joinDate:new Date().toISOString(),avatar:""};v.members.push(N),m(v),Ge.playSuccessSound(),alert(`${v.name}  !`)},D=v=>{switch(v){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";case"legendary":return"text-purple-400";default:return"text-white"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]})}),u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"text-6xl",children:u.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:u.name}),e.jsx("p",{className:"text-white/70",children:u.description}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",u.level]}),e.jsxs("span",{className:"text-blue-400",children:[" #",u.ranking]}),e.jsxs("span",{className:"text-green-400",children:[" ",u.members.length,"/",u.maxMembers]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white/80",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[u.treasury.toLocaleString()," G"]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:" "}),e.jsxs("span",{children:[u.exp," / ",u.maxExp]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-full rounded-full",style:{width:`${u.exp/u.maxExp*100}%`}})})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:e.jsx("div",{className:"flex gap-2",children:["overview","members","quests","shop"].map(v=>e.jsxs("button",{onClick:()=>o(v),className:`px-4 py-2 rounded-lg transition-all ${d===v?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[v==="overview"&&" ",v==="members"&&" ",v==="quests"&&" ",v==="shop"&&" "]},v))})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[d==="overview"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"grid gap-2",children:u.benefits.map((v,N)=>e.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-purple-300",children:[" ",v]},N))})]}),d==="members"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"space-y-2",children:u.members.map(v=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:v.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:v.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",v.level," | ",v.role==="leader"?" ":v.role==="officer"?" ":" "]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/60",children:""}),e.jsx("div",{className:"text-yellow-400 font-bold",children:v.contribution})]})]},v.id))})]}),d==="quests"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"grid gap-3",children:p.map(v=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:v.name}),e.jsx("div",{className:"text-sm text-white/70",children:v.description}),e.jsxs("div",{className:`text-sm mt-1 ${D(v.difficulty)}`,children:[": ",v.difficulty.toUpperCase()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/60",children:""}),e.jsxs("div",{className:"text-yellow-400",children:["+",v.reward.guildExp," EXP"]}),e.jsxs("div",{className:"text-green-400",children:["+",v.reward.treasury," G"]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[v.progress," / ",v.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-cyan-400 h-full rounded-full",style:{width:`${v.progress/v.maxProgress*100}%`}})})]})]},v.id))})]}),d==="shop"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:A.map(v=>e.jsx("div",{className:"bg-white/10 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:v.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:v.name}),e.jsx("div",{className:"text-sm text-white/70",children:v.description}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[v.cost," G"]}),e.jsx("button",{className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg text-sm font-bold hover:shadow-lg transition-all",children:""})]})]})]})},v.id))})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" /"}),e.jsx("button",{onClick:()=>b(!0),className:"w-full mb-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"   (50,000 )"}),e.jsx("div",{className:"grid gap-4",children:C.map(v=>e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-5xl",children:v.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:v.name}),e.jsx("p",{className:"text-white/70 mb-2",children:v.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[e.jsxs("div",{className:"text-white/80",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",v.level]})," |",e.jsxs("span",{className:"text-blue-400",children:["  #",v.ranking]})]}),e.jsxs("div",{className:"text-white/80",children:[": ",v.members.length,"/",v.maxMembers]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:v.benefits.map((N,w)=>e.jsx("span",{className:"bg-purple-500/30 px-2 py-1 rounded text-xs text-purple-300",children:N},w))}),e.jsx("button",{onClick:()=>M(v),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:""})]})]})},v.id))})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("input",{type:"text",value:g,onChange:v=>x(v.target.value),placeholder:"  ",className:"w-full p-3 rounded-lg bg-black/30 text-white placeholder-white/50 mb-4",maxLength:20}),e.jsxs("div",{className:"text-white/70 mb-4",children:[e.jsx("p",{children:"  : 50,000 "}),e.jsx("p",{children:"   : 20"}),e.jsx("p",{children:"    "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:T,className:"flex-1 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold",children:""}),e.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-2 bg-gray-600 text-white rounded-lg font-bold",children:""})]})]})})]})]})})},ab=()=>{const{player:c,updatePlayer:i}=re(),[d,o]=j.useState(null),[u,m]=j.useState(!1),[y,b]=j.useState([]),[g,x]=j.useState("care"),C=[{id:"cat_1",name:"",species:" ",icon:"",level:1,exp:0,maxExp:100,happiness:100,hunger:80,stats:{attack:10,defense:8,speed:15,intelligence:12},skills:["",""],rarity:"common"},{id:"dog_1",name:"",species:" ",icon:"",level:1,exp:0,maxExp:100,happiness:100,hunger:70,stats:{attack:12,defense:10,speed:10,intelligence:8},skills:["",""],rarity:"common"},{id:"dragon_1",name:"",species:" ",icon:"",level:1,exp:0,maxExp:150,happiness:80,hunger:60,stats:{attack:20,defense:15,speed:12,intelligence:18},skills:[" ",""],evolution:"adult_dragon",rarity:"legendary"},{id:"fox_1",name:"",species:"",icon:"",level:1,exp:0,maxExp:120,happiness:90,hunger:75,stats:{attack:15,defense:12,speed:18,intelligence:20},skills:["",""],rarity:"epic"},{id:"bird_1",name:"",species:"",icon:"",level:1,exp:0,maxExp:130,happiness:85,hunger:65,stats:{attack:18,defense:10,speed:25,intelligence:15},skills:["",""],rarity:"epic"},{id:"rabbit_1",name:"",species:"",icon:"",level:1,exp:0,maxExp:90,happiness:95,hunger:85,stats:{attack:8,defense:6,speed:20,intelligence:10},skills:["",""],rarity:"rare"}],p=[{id:"basic_food",name:" ",icon:"",hungerRestore:20,happinessBonus:5,cost:50},{id:"premium_food",name:" ",icon:"",hungerRestore:40,happinessBonus:15,cost:200},{id:"treat",name:" ",icon:"",hungerRestore:10,happinessBonus:30,cost:150},{id:"magic_food",name:" ",icon:"",hungerRestore:50,happinessBonus:25,cost:500}],A=[{id:"attack_training",name:" ",stat:"attack",cost:200,expGain:20,icon:""},{id:"defense_training",name:" ",stat:"defense",cost:200,expGain:20,icon:""},{id:"speed_training",name:" ",stat:"speed",cost:200,expGain:20,icon:""},{id:"intelligence_training",name:" ",stat:"intelligence",cost:200,expGain:20,icon:""}];j.useEffect(()=>{const w=localStorage.getItem("myPets");if(w)try{const E=JSON.parse(w);Array.isArray(E)&&b(E)}catch(E){console.error("Failed to load pets:",E)}const _=setInterval(()=>{b(E=>{const k=E.map(R=>({...R,hunger:Math.max(0,R.hunger-1),happiness:Math.max(0,R.happiness-.5)}));return localStorage.setItem("myPets",JSON.stringify(k)),k})},3e4);return()=>clearInterval(_)},[]);const T=w=>{const _=w.rarity==="legendary"?5e3:w.rarity==="epic"?2e3:w.rarity==="rare"?800:300;if((c.money||0)<_){alert(`${_}  !  : ${c.money}`);return}if(y.length>=6){alert(" 6   !");return}const E={...w,id:`${w.id}_${Date.now()}`},k=[...y,E];b(k),localStorage.setItem("myPets",JSON.stringify(k));const R=(c.money||0)-_;i({money:R}),Ge.playSuccessSound(),alert(`${w.name}() ! (${_} )`),m(!1)},M=(w,_)=>{if((c.money||0)<_.cost){alert(" !");return}const E=y.map(k=>k.id===w.id?{...k,hunger:Math.min(100,k.hunger+_.hungerRestore),happiness:Math.min(100,k.happiness+_.happinessBonus)}:k);b(E),i({money:(c.money||0)-_.cost}),Ge.playSuccessSound()},D=(w,_)=>{if((c.money||0)<_.cost){alert(" !");return}const E=y.map(k=>{if(k.id===w.id){const R=k.exp+_.expGain,X=R>=k.maxExp;return{...k,exp:X?R-k.maxExp:R,level:X?k.level+1:k.level,maxExp:X?k.maxExp*1.5:k.maxExp,stats:{...k.stats,[_.stat]:k.stats[_.stat]+(X?5:2)}}}return k});b(E),i({money:(c.money||0)-_.cost}),Ge.playSuccessSound()},v=w=>{if(!w.evolution||w.level<10){alert(" 10    !");return}const _={...w,species:" "+w.species,icon:"",stats:{attack:w.stats.attack*2,defense:w.stats.defense*2,speed:w.stats.speed*1.5,intelligence:w.stats.intelligence*2},skills:[...w.skills," "],evolution:void 0},E=y.map(k=>k.id===w.id?_:k);b(E),Ge.playLevelUpSound(),alert(`${w.name}() !`)},N=w=>{switch(w){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-emerald-800 to-teal-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg transition-all",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-white/70",children:"  .   !"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(w=>e.jsx("div",{onClick:()=>o(w),className:`bg-gradient-to-br ${N(w.rarity)} p-0.5 rounded-xl cursor-pointer hover:scale-105 transition-all`,children:e.jsxs("div",{className:"bg-black/80 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-4xl",children:w.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsx("div",{className:"text-sm text-white/70",children:w.species}),e.jsxs("div",{className:"text-xs text-yellow-400",children:["Lv.",w.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/80 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[Math.floor(w.happiness),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-red-400 h-full rounded-full",style:{width:`${w.happiness}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/80 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[Math.floor(w.hunger),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-400 h-full rounded-full",style:{width:`${w.hunger}%`}})})]})]})]})},w.id))})]}),d&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[e.jsx("div",{className:"text-8xl",children:d.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:d.name}),e.jsx("p",{className:"text-white/70",children:d.species}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",d.level]}),e.jsxs("span",{className:"text-blue-400",children:["EXP: ",d.exp,"/",d.maxExp]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:""}),e.jsxs("div",{className:"text-white font-bold",children:[" ",d.stats.attack]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:""}),e.jsxs("div",{className:"text-white font-bold",children:[" ",d.stats.defense]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:""}),e.jsxs("div",{className:"text-white font-bold",children:[" ",d.stats.speed]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:""}),e.jsxs("div",{className:"text-white font-bold",children:[" ",d.stats.intelligence]})]})]})]})]}),e.jsx("div",{className:"flex gap-2 mb-4",children:["care","train","battle","evolve"].map(w=>e.jsxs("button",{onClick:()=>x(w),className:`px-4 py-2 rounded-lg transition-all ${g===w?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[w==="care"&&" ",w==="train"&&" ",w==="battle"&&" ",w==="evolve"&&" "]},w))}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[g==="care"&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.map(w=>e.jsx("button",{onClick:()=>M(d,w),className:"bg-black/30 rounded-lg p-3 hover:bg-black/40 transition-all text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:w.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsxs("div",{className:"text-xs text-white/60",children:[" +",w.hungerRestore," |  +",w.happinessBonus]}),e.jsxs("div",{className:"text-sm text-yellow-400",children:[w.cost," G"]})]})]})},w.id))}),g==="train"&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.map(w=>e.jsx("button",{onClick:()=>D(d,w),className:"bg-black/30 rounded-lg p-3 hover:bg-black/40 transition-all text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:w.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsxs("div",{className:"text-xs text-white/60",children:["+",w.expGain," EXP"]}),e.jsxs("div",{className:"text-sm text-yellow-400",children:[w.cost," G"]})]})]})},w.id))}),g==="battle"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:""}),e.jsx("p",{className:"text-white/70",children:"    ..."})]}),g==="evolve"&&e.jsx("div",{className:"text-center py-8",children:d.evolution?e.jsxs("div",{children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-white mb-4",children:" 10  !"}),e.jsx("button",{onClick:()=>v(d),disabled:d.level<10,className:`px-6 py-3 rounded-lg font-bold ${d.level>=10?"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:""})]}):e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-4",children:""}),e.jsx("p",{className:"text-white/70",children:"    ."})]})})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900 to-emerald-900 rounded-xl p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>m(!1),className:"text-white hover:text-red-400 text-2xl",children:""})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(w=>{const _=w.rarity==="legendary"?5e3:w.rarity==="epic"?2e3:w.rarity==="rare"?800:300;return e.jsx("div",{className:`bg-gradient-to-br ${N(w.rarity)} p-0.5 rounded-xl`,children:e.jsx("div",{className:"bg-black/80 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-5xl",children:w.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsx("div",{className:"text-sm text-white/70",children:w.species}),e.jsx("div",{className:"text-xs text-yellow-400 uppercase",children:w.rarity}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:w.skills.map(E=>e.jsx("span",{className:"bg-white/20 px-2 py-1 rounded text-xs text-white",children:E},E))}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[_," G"]}),e.jsx("button",{onClick:()=>T(w),className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:""})]})]})]})})},w.id)})})]})})]})})},sb=()=>{const{player:c,updatePlayer:i}=re(),[d,o]=j.useState(!1),[u,m]=j.useState(!1),[y,b]=j.useState(null),[g,x]=j.useState(50),[C,p]=j.useState(!1),[A,T]=j.useState(50),[M,D]=j.useState([]),[v,N]=j.useState("basic"),[w,_]=j.useState("wooden");j.useRef(null);const E=[{id:"minnow",name:"",icon:"",rarity:"common",size:5,value:50,difficulty:10},{id:"carp",name:"",icon:"",rarity:"common",size:15,value:100,difficulty:20},{id:"bass",name:"",icon:"",rarity:"common",size:20,value:150,difficulty:25},{id:"salmon",name:"",icon:"",rarity:"rare",size:30,value:300,difficulty:40},{id:"tuna",name:"",icon:"",rarity:"rare",size:40,value:500,difficulty:50},{id:"eel",name:"",icon:"",rarity:"rare",size:25,value:400,difficulty:45},{id:"swordfish",name:"",icon:"",rarity:"epic",size:60,value:1e3,difficulty:70},{id:"shark",name:"",icon:"",rarity:"epic",size:80,value:1500,difficulty:80},{id:"octopus",name:"",icon:"",rarity:"epic",size:35,value:800,difficulty:60},{id:"golden_fish",name:" ",icon:"",rarity:"legendary",size:50,value:5e3,difficulty:90},{id:"dragon_fish",name:" ",icon:"",rarity:"legendary",size:100,value:1e4,difficulty:95},{id:"mermaid_tear",name:" ",icon:"",rarity:"legendary",size:1,value:2e4,difficulty:100}],k={basic:{name:" ",cost:10,bonus:0,icon:""},premium:{name:" ",cost:50,bonus:20,icon:""},special:{name:" ",cost:200,bonus:50,icon:""}},R={wooden:{name:" ",power:1,cost:0,icon:""},iron:{name:" ",power:1.5,cost:1e3,icon:""},golden:{name:" ",power:2,cost:5e3,icon:""}};j.useEffect(()=>{let H;if(d&&!u){const z=20+k[v].bonus;H=setInterval(()=>{if(Math.random()*100<z){const V=X();b(V),m(!0),Ge.playNotificationSound()}},1e3)}return()=>clearInterval(H)},[d,u,v]),j.useEffect(()=>{let H;return C&&y&&(H=setInterval(()=>{const f=y.difficulty/100;R[w].power,T(z=>{const V=z+(Math.random()-.5)*f*20;return Math.max(0,Math.min(100,V))}),x(z=>{const V=f*2,ne=z-V;return ne<=0?(p(!1),m(!1),b(null),x(50),alert(" !"),50):ne})},100)),()=>clearInterval(H)},[C,y,w]);const X=()=>{const H=Math.random()*100;let f;return v==="special"?H<10?f=E.filter(z=>z.rarity==="legendary"):H<30?f=E.filter(z=>z.rarity==="epic"):H<60?f=E.filter(z=>z.rarity==="rare"):f=E.filter(z=>z.rarity==="common"):v==="premium"?H<5?f=E.filter(z=>z.rarity==="legendary"):H<20?f=E.filter(z=>z.rarity==="epic"):H<50?f=E.filter(z=>z.rarity==="rare"):f=E.filter(z=>z.rarity==="common"):H<1?f=E.filter(z=>z.rarity==="legendary"):H<10?f=E.filter(z=>z.rarity==="epic"):H<30?f=E.filter(z=>z.rarity==="rare"):f=E.filter(z=>z.rarity==="common"),f[Math.floor(Math.random()*f.length)]},q=()=>{const H=k[v].cost;if((c.gold||0)<H){alert("   !");return}i({gold:(c.gold||0)-H}),o(!0),m(!1),x(50)},le=()=>{o(!1),m(!1),b(null),p(!1),x(50)},F=()=>{!u||!y||p(!0)},ce=()=>{if(!C||!y)return;const f=10*R[w].power;x(z=>Math.min(100,z+f)),g>80&&Math.abs(A-50)<20&&I(y)},I=H=>{D([...M,H]),i({gold:(c.gold||0)+H.value,experience:c.experience+H.size*10}),Ge.playSuccessSound(),alert(`${H.name}() ! +${H.value} `),p(!1),m(!1),b(null),x(50),o(!1)},G=H=>{const f=R[H];if((c.gold||0)<f.cost){alert(" !");return}i({gold:(c.gold||0)-f.cost}),_(H),Ge.playSuccessSound()},B=H=>{switch(H){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 via-blue-700 to-cyan-600 p-4",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-b from-cyan-600/50 to-blue-800/50 rounded-xl overflow-hidden mb-4",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"wave wave1"}),e.jsx("div",{className:"wave wave2"})]}),d&&e.jsxs("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2",children:[e.jsx("div",{className:"w-0.5 h-48 bg-white/50"}),e.jsx("div",{className:"text-2xl transform -translate-x-1/2",children:u?"":""})]}),u&&y&&e.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"text-4xl animate-pulse",children:y.icon})})]}),C&&y&&e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"mb-2 text-white font-bold",children:[y.name,"()  !"]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[Math.floor(g),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4 relative",children:e.jsx("div",{className:`h-full rounded-full transition-all ${g>80?"bg-green-500":g>30?"bg-yellow-500":"bg-red-500"}`,style:{width:`${g}%`}})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm text-white/80 mb-1",children:" "}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 relative",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-full bg-green-500/30"}),e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 text-2xl",style:{left:`${A}%`},children:""})]})]}),e.jsx("button",{onClick:ce,className:"w-full py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"! ()"})]}),d?e.jsxs("div",{className:"space-y-3",children:[u&&!C&&e.jsx("button",{onClick:F,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-bold text-xl hover:shadow-lg transition-all animate-pulse",children:" !"}),e.jsx("button",{onClick:le,className:"w-full py-3 bg-gray-600 text-white rounded-lg font-bold hover:bg-gray-700 transition-all",children:""})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold mb-2",children:" "}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.keys(k).map(H=>e.jsxs("button",{onClick:()=>N(H),className:`p-3 rounded-lg transition-all ${v===H?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:k[H].icon}),e.jsx("div",{className:"text-sm",children:k[H].name}),e.jsxs("div",{className:"text-xs opacity-80",children:[k[H].cost," G"]})]},H))})]}),e.jsx("button",{onClick:q,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold text-xl hover:shadow-lg transition-all",children:"  "})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${w==="iron"?"border-2 border-green-400":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:" "}),e.jsx("div",{className:"text-sm text-white/70",children:" +50%"}),e.jsx("div",{className:"text-yellow-400",children:"1,000 G"})]}),w!=="iron"&&w!=="golden"&&e.jsx("button",{onClick:()=>G("iron"),className:"px-3 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-bold",children:""})]})}),e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${w==="golden"?"border-2 border-yellow-400":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:" "}),e.jsx("div",{className:"text-sm text-white/70",children:" +100%"}),e.jsx("div",{className:"text-yellow-400",children:"5,000 G"})]}),w!=="golden"&&e.jsx("button",{onClick:()=>G("golden"),className:"px-3 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-bold",children:""})]})})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"  "}),M.length===0?e.jsx("p",{className:"text-white/70 text-center py-4",children:"   ."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:M.map((H,f)=>e.jsx("div",{className:`bg-gradient-to-br ${B(H.rarity)} p-0.5 rounded-lg`,children:e.jsxs("div",{className:"bg-black/80 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-3xl mb-1",children:H.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:H.name}),e.jsxs("div",{className:"text-xs text-yellow-400",children:[H.size,"cm"]})]})},f))}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("div",{className:"text-white/80",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[M.reduce((H,f)=>H+f.value,0)," G"]})]})]})]}),e.jsx("style",{jsx:!0,children:`
        .wave {
          position: absolute;
          width: 200%;
          height: 100%;
          background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.1), transparent);
          animation: wave 3s linear infinite;
        }

        .wave1 {
          animation-delay: 0s;
        }

        .wave2 {
          animation-delay: 1.5s;
        }

        @keyframes wave {
          0% {
            transform: translateX(-50%);
          }
          100% {
            transform: translateX(0);
          }
        }
      `})]})},lb=()=>{const{player:c,updatePlayer:i}=re(),[d,o]=j.useState(()=>{const N=[];for(let w=0;w<12;w++)N.push({id:w,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null,isUnlocked:w<4});return N}),[u,m]=j.useState(null),[y,b]=j.useState(Date.now()),g=[{id:"wheat",name:"",icon:"",seedCost:50,growthTime:60,sellPrice:150,waterNeeded:2},{id:"carrot",name:"",icon:"",seedCost:100,growthTime:120,sellPrice:350,waterNeeded:3},{id:"tomato",name:"",icon:"",seedCost:150,growthTime:180,sellPrice:500,waterNeeded:4},{id:"corn",name:"",icon:"",seedCost:200,growthTime:240,sellPrice:700,waterNeeded:5},{id:"pumpkin",name:"",icon:"",seedCost:300,growthTime:300,sellPrice:1e3,waterNeeded:6},{id:"watermelon",name:"",icon:"",seedCost:400,growthTime:360,sellPrice:1500,waterNeeded:7},{id:"strawberry",name:"",icon:"",seedCost:500,growthTime:150,sellPrice:800,waterNeeded:4},{id:"grapes",name:"",icon:"",seedCost:600,growthTime:400,sellPrice:2e3,waterNeeded:8},{id:"apple",name:"",icon:"",seedCost:800,growthTime:600,sellPrice:3e3,waterNeeded:10},{id:"golden_apple",name:"",icon:"",seedCost:5e3,growthTime:1200,sellPrice:2e4,waterNeeded:20}];j.useEffect(()=>{const N=setInterval(()=>{b(Date.now()),x()},1e3);return()=>clearInterval(N)},[d]);const x=()=>{o(N=>N.map(w=>{if(!w.crop||!w.plantedAt)return w;const E=(Date.now()-w.plantedAt)/1e3/w.crop.growthTime,k=w.lastWateredAt?(Date.now()-w.lastWateredAt)/1e3:1/0;let R=w.crop.stage;return k>120&&w.crop.stage!=="dead"?R="dead":E>=1&&w.wateredTimes>=w.crop.waterNeeded?R="mature":E>=.66?R="growing":E>=.33&&(R="sprout"),{...w,crop:{...w.crop,stage:R}}}))},C=N=>{if(!u){alert("  !");return}const w=g.find(E=>E.id===u);if(!w)return;if((c.gold||0)<w.seedCost){alert(" !");return}const _={...w,stage:"seed"};o(E=>E.map(k=>k.id===N?{...k,crop:_,plantedAt:Date.now(),wateredTimes:0,lastWateredAt:null}:k)),i({gold:(c.gold||0)-w.seedCost}),Ge.playSuccessSound()},p=N=>{const w=d.find(E=>E.id===N);if(!w||!w.crop)return;if(w.crop.stage==="dead"){alert("     !");return}if(w.crop.stage==="mature"){alert("  !");return}if((w.lastWateredAt?(Date.now()-w.lastWateredAt)/1e3:1/0)<30){alert("    ! 30   .");return}o(E=>E.map(k=>k.id===N?{...k,wateredTimes:k.wateredTimes+1,lastWateredAt:Date.now()}:k)),Ge.playSuccessSound()},A=N=>{const w=d.find(E=>E.id===N);if(!w||!w.crop)return;if(w.crop.stage!=="mature"){alert("   !");return}const _=w.crop.sellPrice;i({gold:(c.gold||0)+_,experience:c.experience+Math.floor(_/10)}),o(E=>E.map(k=>k.id===N?{...k,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null}:k)),Ge.playSuccessSound(),alert(`${w.crop.name}() ! +${_} `)},T=N=>{o(w=>w.map(_=>_.id===N?{..._,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null}:_))},M=N=>{const w=1e3*(N-2);if((c.gold||0)<w){alert(`${w}  !`);return}o(_=>_.map(E=>E.id===N?{...E,isUnlocked:!0}:E)),i({gold:(c.gold||0)-w}),Ge.playSuccessSound()},D=N=>{if(!N.crop)return"";switch(N.crop.stage){case"seed":return"";case"sprout":return"";case"growing":return"";case"mature":return N.crop.icon;case"dead":return"";default:return""}},v=N=>{if(!N.crop||!N.plantedAt)return 0;const w=(y-N.plantedAt)/1e3;return Math.min(100,w/N.crop.growthTime*100)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-700 via-green-600 to-yellow-600 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("span",{className:"text-yellow-400",children:""})," ",c.gold||0," G"]}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"  "}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:g.map(N=>e.jsxs("button",{onClick:()=>m(N.id),className:`p-3 rounded-lg transition-all ${u===N.id?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:N.icon}),e.jsx("div",{className:"text-sm font-bold",children:N.name}),e.jsxs("div",{className:"text-xs",children:[": ",N.seedCost,"G"]}),e.jsxs("div",{className:"text-xs",children:[": ",N.sellPrice,"G"]}),e.jsxs("div",{className:"text-xs opacity-70",children:[N.growthTime,""]})]},N.id))})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"  "}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:d.map(N=>e.jsx("div",{className:`relative aspect-square rounded-lg p-4 ${N.isUnlocked?"bg-gradient-to-b from-amber-700 to-amber-900":"bg-gray-800"}`,children:N.isUnlocked?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-5xl text-center mb-2",children:D(N)}),N.crop&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-white font-bold",children:N.crop.name}),N.crop.stage!=="dead"&&N.crop.stage!=="mature"&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-400 h-full rounded-full",style:{width:`${v(N)}%`}})})}),N.crop.stage!=="dead"&&N.crop.stage!=="mature"&&e.jsxs("div",{className:"text-xs text-blue-300 mt-1",children:[" ",N.wateredTimes,"/",N.crop.waterNeeded]}),N.crop.stage==="mature"&&e.jsx("div",{className:"text-xs text-green-400 font-bold mt-1",children:" !"}),N.crop.stage==="dead"&&e.jsx("div",{className:"text-xs text-red-400 font-bold mt-1",children:""})]}),e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 flex gap-1",children:[!N.crop&&e.jsx("button",{onClick:()=>C(N.id),className:"flex-1 py-1 px-2 bg-green-500 text-white text-xs rounded hover:bg-green-600",children:""}),N.crop&&N.crop.stage!=="mature"&&N.crop.stage!=="dead"&&e.jsx("button",{onClick:()=>p(N.id),className:"flex-1 py-1 px-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",children:""}),N.crop&&N.crop.stage==="mature"&&e.jsx("button",{onClick:()=>A(N.id),className:"flex-1 py-1 px-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600",children:""}),N.crop&&N.crop.stage==="dead"&&e.jsx("button",{onClick:()=>T(N.id),className:"flex-1 py-1 px-2 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:""})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsxs("button",{onClick:()=>M(N.id),className:"px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600",children:[" (",1e3*(N.id-2),"G)"]})]})},N.id))}),e.jsxs("div",{className:"mt-6 bg-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-2",children:" "}),e.jsxs("ul",{className:"text-sm text-white/80 space-y-1",children:[e.jsx("li",{children:"      (30)"}),e.jsx("li",{children:"  2     "}),e.jsx("li",{children:"      "}),e.jsx("li",{children:"    !"})]})]})]})]})})},nb=()=>{const{player:c,updatePlayer:i}=re(),[d,o]=j.useState({id:"starter_room",name:" ",size:"small",furniture:[],wallpaper:"basic",flooring:"wood",comfort:0,style:0,maxFurniture:10}),[u,m]=j.useState("room"),[y,b]=j.useState(null),g=[{id:"basic_bed",name:" ",icon:"",category:"bed",cost:500,comfort:10,style:5},{id:"luxury_bed",name:" ",icon:"",category:"bed",cost:2e3,comfort:30,style:20},{id:"royal_bed",name:" ",icon:"",category:"bed",cost:1e4,comfort:100,style:80},{id:"wooden_chair",name:" ",icon:"",category:"chair",cost:200,comfort:5,style:3},{id:"gaming_chair",name:" ",icon:"",category:"chair",cost:1500,comfort:25,style:15},{id:"throne",name:"",icon:"",category:"chair",cost:8e3,comfort:50,style:70},{id:"study_desk",name:"",icon:"",category:"table",cost:300,comfort:5,style:5},{id:"dining_table",name:"",icon:"",category:"table",cost:800,comfort:10,style:10},{id:"magic_table",name:" ",icon:"",category:"table",cost:5e3,comfort:20,style:50},{id:"plant",name:"",icon:"",category:"decoration",cost:100,comfort:3,style:5},{id:"painting",name:"",icon:"",category:"decoration",cost:500,comfort:5,style:15},{id:"chandelier",name:"",icon:"",category:"decoration",cost:3e3,comfort:15,style:40},{id:"aquarium",name:"",icon:"",category:"decoration",cost:1200,comfort:20,style:25},{id:"fireplace",name:"",icon:"",category:"decoration",cost:2500,comfort:35,style:30},{id:"bookshelf",name:"",icon:"",category:"storage",cost:600,comfort:8,style:12},{id:"wardrobe",name:"",icon:"",category:"storage",cost:900,comfort:10,style:10},{id:"treasure_chest",name:"",icon:"",category:"storage",cost:4e3,comfort:5,style:35},{id:"piano",name:"",icon:"",category:"special",cost:7e3,comfort:40,style:60},{id:"telescope",name:"",icon:"",category:"special",cost:3500,comfort:15,style:30},{id:"gaming_setup",name:" ",icon:"",category:"special",cost:1e4,comfort:60,style:45},{id:"magic_crystal",name:" ",icon:"",category:"special",cost:15e3,comfort:50,style:100}],x=[{id:"basic",name:" ",cost:0,style:0,icon:""},{id:"floral",name:" ",cost:500,style:10,icon:""},{id:"starry",name:" ",cost:1e3,style:20,icon:""},{id:"royal",name:" ",cost:3e3,style:50,icon:""},{id:"magical",name:" ",cost:5e3,style:80,icon:""}],C=[{id:"wood",name:" ",cost:0,style:5,icon:""},{id:"carpet",name:"",cost:800,style:15,icon:""},{id:"marble",name:"",cost:2e3,style:35,icon:""},{id:"crystal",name:" ",cost:6e3,style:70,icon:""}],p=[{size:"medium",name:" ",cost:5e3,maxFurniture:20},{size:"large",name:" ",cost:15e3,maxFurniture:35},{size:"mansion",name:"",cost:5e4,maxFurniture:50}],A=_=>{if((c.gold||0)<_.cost){alert(" !");return}if(d.furniture.length>=d.maxFurniture){alert("      !");return}const E={..._,position:{x:50,y:50}};o(k=>({...k,furniture:[...k.furniture,E],comfort:k.comfort+_.comfort,style:k.style+_.style})),i({gold:(c.gold||0)-_.cost}),Ge.playSuccessSound()},T=_=>{const E=d.furniture.find(R=>R.id===_);if(!E)return;const k=Math.floor(E.cost*.5);o(R=>({...R,furniture:R.furniture.filter(X=>X.id!==_),comfort:R.comfort-E.comfort,style:R.style-E.style})),i({gold:(c.gold||0)+k}),Ge.playCoinSound()},M=_=>{const E=x.find(k=>k.id===_);if(E){if((c.gold||0)<E.cost){alert(" !");return}o(k=>({...k,wallpaper:_,style:k.style+E.style})),i({gold:(c.gold||0)-E.cost}),Ge.playSuccessSound()}},D=_=>{const E=C.find(k=>k.id===_);if(E){if((c.gold||0)<E.cost){alert(" !");return}o(k=>({...k,flooring:_,style:k.style+E.style})),i({gold:(c.gold||0)-E.cost}),Ge.playSuccessSound()}},v=_=>{const E=p.find(k=>k.size===_);if(E){if((c.gold||0)<E.cost){alert(" !");return}o(k=>({...k,size:_,maxFurniture:E.maxFurniture})),i({gold:(c.gold||0)-E.cost}),Ge.playLevelUpSound()}},w=(()=>{const _=Math.floor(d.comfort/10),E=Math.floor(d.style/10);return{happiness:_*2,charm:E,dailyGold:(_+E)*10}})();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[" ",d.comfort]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[" ",d.style]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[" ",d.furniture.length,"/",d.maxFurniture]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[" ",d.size]})]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex gap-2",children:["room","furniture","customize","upgrade"].map(_=>e.jsxs("button",{onClick:()=>m(_),className:`px-4 py-2 rounded-lg transition-all ${u===_?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[_==="room"&&"  ",_==="furniture"&&"  ",_==="customize"&&" ",_==="upgrade"&&" "]},_))})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[u==="room"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"bg-gradient-to-b from-gray-700 to-gray-800 rounded-xl h-64 mb-4 relative overflow-hidden",children:[d.furniture.map((_,E)=>e.jsx("div",{className:"absolute text-4xl cursor-pointer hover:scale-110 transition-all",style:{left:`${_.position?.x||50}%`,top:`${_.position?.y||50}%`,transform:"translate(-50%, -50%)"},onClick:()=>T(_.id),title:`${_.name} ( )`,children:_.icon},E)),d.furniture.length===0&&e.jsx("div",{className:"flex items-center justify-center h-full text-white/50",children:"   !"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-pink-400",children:[" +",w.happiness]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-purple-400",children:[" +",w.charm]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-yellow-400",children:["  +",w.dailyGold]})})]})]})]}),u==="furniture"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:g.map(_=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl text-center mb-2",children:_.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:_.name}),e.jsx("div",{className:"text-xs text-white/70",children:_.category}),e.jsxs("div",{className:"flex justify-between text-xs mt-2",children:[e.jsxs("span",{className:"text-blue-400",children:[" +",_.comfort]}),e.jsxs("span",{className:"text-purple-400",children:[" +",_.style]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[_.cost," G"]}),e.jsx("button",{onClick:()=>A(_),className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded text-sm font-bold hover:shadow-lg transition-all",children:""})]})]},_.id))})]}),u==="customize"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:x.map(_=>e.jsxs("button",{onClick:()=>M(_.id),className:`p-3 rounded-lg transition-all ${d.wallpaper===_.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:_.icon}),e.jsx("div",{className:"text-xs",children:_.name}),e.jsxs("div",{className:"text-xs",children:[_.cost," G"]})]},_.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:C.map(_=>e.jsxs("button",{onClick:()=>D(_.id),className:`p-3 rounded-lg transition-all ${d.flooring===_.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:_.icon}),e.jsx("div",{className:"text-xs",children:_.name}),e.jsxs("div",{className:"text-xs",children:[_.cost," G"]})]},_.id))})]})]}),u==="upgrade"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"grid gap-4",children:p.map(_=>e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${d.size===_.size?"border-2 border-green-400":""}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white",children:_.name}),e.jsxs("div",{className:"text-sm text-white/70",children:[" : ",_.maxFurniture,""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-yellow-400 font-bold text-xl",children:[_.cost," G"]}),d.size!==_.size&&e.jsx("button",{onClick:()=>v(_.size),className:"mt-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:""})]})]})},_.size))})]})]})]})})},ib=()=>{const c=Ee(),i=re(o=>o.player),d=[{title:"  ",items:[{name:" ",icon:"",path:"/dungeon",color:"from-red-500 to-red-600"},{name:"",icon:"",path:"/shopping",color:"from-yellow-500 to-yellow-600"},{name:" ",icon:"",path:"/characters",color:"from-blue-500 to-blue-600"},{name:" ",icon:"",path:"/heroines",color:"from-pink-500 to-pink-600"}]},{title:"  & ",items:[{name:"",icon:"",path:"/achievements",color:"from-yellow-500 to-orange-500"},{name:"",icon:"",path:"/collection",color:"from-purple-500 to-purple-600"},{name:" ",icon:"",path:"/quests",color:"from-green-500 to-green-600"},{name:" ",icon:"",path:"/calendar",color:"from-pink-500 to-pink-600"}]},{title:"  & ",items:[{name:"",icon:"",path:"/clubs",color:"from-purple-500 to-indigo-600"},{name:"",icon:"",path:"/guild",color:"from-indigo-500 to-indigo-600"},{name:" ",icon:"",path:"/pets",color:"from-emerald-500 to-emerald-600"}]},{title:"  & ",items:[{name:"",icon:"",path:"/fishing",color:"from-cyan-500 to-cyan-600"},{name:"",icon:"",path:"/farming",color:"from-green-600 to-green-700"},{name:" ",icon:"",path:"/card-matching",color:"from-purple-600 to-pink-600"},{name:" ",icon:"",path:"/quiz-game",color:"from-orange-500 to-red-500"}]},{title:"  ",items:[{name:"",icon:"",path:"/housing",color:"from-purple-600 to-pink-600"},{name:"",icon:"",path:"/crafting",color:"from-amber-500 to-amber-600"}]}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>c("/game"),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all",children:" "})]})}),e.jsx("div",{className:"space-y-6",children:d.map((o,u)=>e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:o.title}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.items.map((m,y)=>e.jsxs("button",{onClick:()=>c(m.path),className:`bg-gradient-to-r ${m.color} p-4 rounded-xl hover:scale-105 transition-all shadow-lg hover:shadow-xl`,children:[e.jsx("div",{className:"text-4xl mb-2",children:m.icon}),e.jsx("div",{className:"text-white font-bold",children:m.name})]},y))})]},u))}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mt-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["Day ",i.day]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["Lv.",i.level]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[i.money||0," G"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.achievementPoints||0})]})]})]})]})})},rb=({onComplete:c,onSkip:i})=>{const d=Ee(),[o,u]=j.useState(0),[m,y]=j.useState(!1),b=[{id:1,title:"    !",content:"     .    .",image:""},{id:2,title:" ",content:"   . , ,       .",image:"",highlightElement:".character-creation"},{id:3,title:" ",content:"(HP), (MP), , , ,     .      .",image:""},{id:4,title:" ",content:"5     .      .",image:""},{id:5,title:" ",content:", ,       .     .",image:""},{id:6,title:" ",content:" , ,   .       .",image:""},{id:7,title:" ",content:"        .    .",image:""},{id:8,title:" ",content:"    .    !",image:"",highlightElement:".dungeon-button"},{id:9,title:" ",content:"       .    .",image:""},{id:10,title:"",content:"    . , ,       .",image:"",highlightElement:".shop-button"},{id:11,title:"",content:" ,       .    !",image:""},{id:12,title:"",content:"       .      .",image:""},{id:13,title:" & ",content:"       .    .",image:""},{id:14,title:"",content:`   
   
    
   `,image:""},{id:15,title:" !",content:"      .  !",image:"",action:()=>{c(),d("/character-creation")}}],g=()=>{o<b.length-1?(y(!0),setTimeout(()=>{u(o+1),y(!1)},300)):b[o].action?.()},x=()=>{o>0&&(y(!0),setTimeout(()=>{u(o-1),y(!1)},300))},C=()=>{window.confirm(" ?      .")&&(i(),d("/character-creation"))};return j.useEffect(()=>{const p=b[o];if(p.highlightElement){const A=document.querySelector(p.highlightElement);if(A)return A.classList.add("tutorial-highlight"),()=>{A.classList.remove("tutorial-highlight")}}},[o]),e.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gray-200 h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-full transition-all duration-500",style:{width:`${(o+1)/b.length*100}%`}})}),e.jsxs("div",{className:`p-8 transition-opacity duration-300 ${m?"opacity-0":"opacity-100"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-500",children:[" ",o+1," / ",b.length]}),e.jsx("button",{onClick:C,className:"text-sm text-gray-500 hover:text-gray-700 underline",children:""})]}),e.jsxs("div",{className:"text-center mb-8",children:[b[o].image&&e.jsx("div",{className:"text-6xl mb-6 animate-bounce",children:b[o].image}),e.jsx("h2",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:b[o].title}),e.jsx("p",{className:"text-lg text-gray-700 whitespace-pre-line leading-relaxed",children:b[o].content})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:x,disabled:o===0,className:`
                px-6 py-3 rounded-lg font-semibold transition-all
                ${o===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}
              `,children:""}),e.jsx("div",{className:"flex gap-2",children:b.map((p,A)=>e.jsx("button",{onClick:()=>{A<=o&&u(A)},className:`
                    w-2 h-2 rounded-full transition-all
                    ${A===o?"w-8 bg-gradient-to-r from-purple-500 to-pink-500":A<o?"bg-purple-300 cursor-pointer hover:bg-purple-400":"bg-gray-300"}
                  `},A))}),e.jsx("button",{onClick:g,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all transform hover:scale-105",children:o===b.length-1?"":""})]})]})]}),e.jsx("style",{children:`
        .tutorial-highlight {
          position: relative;
          z-index: 51;
          box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          animation: pulse 2s infinite;
        }

        @keyframes pulse {
          0% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          }
          50% {
            box-shadow: 0 0 20px 9999px rgba(0, 0, 0, 0.3);
          }
          100% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          }
        }
      `})]})},cb=()=>{const[c,i]=j.useState([]),[d,o]=j.useState([]),[u,m]=j.useState(0),[y,b]=j.useState(0),[g,x]=j.useState(!1),C=["","","","","","","",""];j.useEffect(()=>{p()},[]);const p=()=>{const T=[...C,...C].map((M,D)=>({id:D,value:M,isFlipped:!1,isMatched:!1})).sort(()=>Math.random()-.5);i(T),o([]),m(0),b(0),x(!1)},A=T=>{if(d.length===2||d.includes(T)||c[T].isMatched)return;const M=[...d,T];if(o(M),M.length===2){b(y+1);const[D,v]=M;c[D].value===c[v].value?setTimeout(()=>{i(w=>w.map(_=>_.id===D||_.id===v?{..._,isMatched:!0}:_)),o([]),m(u+10),c.map(w=>w.id===D||w.id===v?{...w,isMatched:!0}:w).every(w=>w.isMatched)&&x(!0)},1e3):setTimeout(()=>{o([])},1e3)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-900 via-purple-900 to-indigo-900 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-xl p-8 border border-white/20",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6 text-center",children:"   "}),e.jsxs("div",{className:"flex justify-center gap-8 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u}),e.jsx("div",{className:"text-sm text-gray-300",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:y}),e.jsx("div",{className:"text-sm text-gray-300",children:" "})]})]}),g&&e.jsxs("div",{className:"bg-green-600/20 border border-green-500 rounded-lg p-4 mb-6 text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-green-400 mb-2",children:"  !"}),e.jsxs("p",{className:"text-green-200",children:[y,"  ",u," !"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6 max-w-md mx-auto",children:c.map(T=>e.jsx("div",{onClick:()=>A(T.id),className:`
                  aspect-square bg-white/10 rounded-lg border-2 border-white/20 
                  flex items-center justify-center text-3xl cursor-pointer
                  transition-all duration-300 hover:scale-105
                  ${d.includes(T.id)||T.isMatched?"bg-white/20 border-yellow-400":"hover:bg-white/15"}
                  ${T.isMatched?"opacity-50":""}
                `,children:d.includes(T.id)||T.isMatched?T.value:""},T.id))}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("button",{onClick:p,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all transform hover:scale-105",children:" "}),e.jsx("div",{className:"text-gray-300 text-sm",children:"    !"}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-all",children:""})]})]})})})},ob=({onComplete:c})=>{const{updateStats:i,updateMoney:d,gainExperience:o}=re(R=>R.actions),u=[{id:1,question:"   ?",options:["1850","1900","1925","1950"],correctAnswer:2,category:" "},{id:2,question:"  ?",options:["","","",""],correctAnswer:2,category:""},{id:3,question:"  ?",options:[" "," "," "," "],correctAnswer:2,category:""},{id:4,question:"    ?",options:["","","",""],correctAnswer:1,category:""},{id:5,question:"    ?",options:["","","",""],correctAnswer:0,category:""}],[m,y]=j.useState(0),[b,g]=j.useState(null),[x,C]=j.useState(0),[p,A]=j.useState(15),[T,M]=j.useState(!1),[D,v]=j.useState(!1);j.useEffect(()=>{if(p>0&&!D&&!T){const R=setTimeout(()=>A(p-1),1e3);return()=>clearTimeout(R)}else p===0&&!D&&N()},[p,D,T]);const N=()=>{v(!0),setTimeout(()=>_(),2e3)},w=R=>{if(!D){if(g(R),v(!0),R===u[m].correctAnswer){const X=Math.max(50,100-(15-p)*5);C(x+X)}setTimeout(()=>_(),2e3)}},_=()=>{m+1<u.length?(y(m+1),g(null),v(!1),A(15)):E()},E=()=>{M(!0);const R=Math.floor(x/20),X=Math.floor(x/10),q=Math.floor(x/100);d(R),o(X),q>0&&i({intelligence:q}),c(x)},k=R=>D?R===u[m].correctAnswer?"bg-green-500 text-white border-2 border-green-600":b===R&&R!==u[m].correctAnswer?"bg-red-500 text-white border-2 border-red-600":"bg-gray-200 text-gray-500 border-2 border-gray-300":"bg-white hover:bg-purple-50 border-2 border-purple-300 text-gray-800";return T?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:"  !"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-6xl mb-4",children:x>=400?"":x>=300?"":x>=200?"":""}),e.jsx("p",{className:"text-2xl font-bold mb-2",children:" "}),e.jsx("p",{className:"text-4xl font-bold text-purple-600 mb-6",children:x}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:" :"}),e.jsxs("p",{className:"font-semibold",children:[" ",Math.floor(x/20)," "]}),e.jsxs("p",{className:"font-semibold",children:[" ",Math.floor(x/10)," "]}),Math.floor(x/100)>0&&e.jsxs("p",{className:"font-semibold",children:["  +",Math.floor(x/100)]})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-bold hover:shadow-lg transition",children:" "})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-2xl w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-600",children:[" ",m+1," / ",u.length]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-600",children:[": ",x]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${(m+1)/u.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-xs px-3 py-1 bg-purple-100 text-purple-700 rounded-full font-semibold",children:u[m].category}),e.jsxs("div",{className:`text-2xl font-bold ${p<=5?"text-red-500 animate-pulse":"text-gray-700"}`,children:[" ",p,""]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:u[m].question}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:u[m].options.map((R,X)=>e.jsxs("button",{onClick:()=>w(X),disabled:D,className:`
                  p-4 rounded-lg font-semibold text-left transition-all
                  ${k(X)}
                  ${D?"":"hover:scale-102 active:scale-98"}
                `,children:[e.jsxs("span",{className:"mr-3",children:[String.fromCharCode(65+X),"."]}),R,D&&X===u[m].correctAnswer&&e.jsx("span",{className:"ml-2",children:""}),D&&b===X&&X!==u[m].correctAnswer&&e.jsx("span",{className:"ml-2",children:""})]},X))})]}),D&&e.jsx("div",{className:`text-center font-bold text-lg ${b===u[m].correctAnswer?"text-green-600":"text-red-600"}`,children:b===u[m].correctAnswer?`! +${Math.max(50,100-(15-p)*5)} `:"!"})]})})},db=()=>{re(J=>J.player);const{updateStats:c,addItem:i,updateAffection:d}=re(J=>J.actions),[o,u]=j.useState(null),[m,y]=j.useState("menu"),[b,g]=j.useState(0),[x,C]=j.useState(0),[p,A]=j.useState(0),[T,M]=j.useState(100),[D,v]=j.useState(0),[N,w]=j.useState(0),[_,E]=j.useState(0),[k,R]=j.useState(0),[X,q]=j.useState([]),[le,F]=j.useState(0),[ce,I]=j.useState([]),G=j.useRef(null),B=j.useRef(),H=j.useRef(0),f=[{id:"sakura_theme",name:" ",artist:"",difficulty:3,bpm:128,duration:120,notes:z(120,128,3),perfectScore:1e4},{id:"yuki_theme",name:"  ",artist:"",difficulty:2,bpm:100,duration:90,notes:z(90,100,2),perfectScore:7500},{id:"luna_theme",name:" ",artist:"",difficulty:4,bpm:140,duration:150,notes:z(150,140,4),perfectScore:15e3},{id:"school_festival",name:" ",artist:"Various",difficulty:1,bpm:120,duration:60,notes:z(60,120,1),perfectScore:5e3}];function z(J,$,se){const ie=[],oe=6e4/$,we=se*.5;let he=0;for(let He=2e3;He<J*1e3;He+=oe/we){const Qt=Math.floor(Math.random()*4),Dt=Math.random()<.1?"special":Math.random()<.2?"long":"normal";if(ie.push({id:he++,lane:Qt,time:He,hit:!1,type:Dt}),se>2&&Math.random()<(se-2)*.1){const mt=(Qt+Math.floor(Math.random()*3)+1)%4;ie.push({id:he++,lane:mt,time:He,hit:!1,type:"normal"})}}return ie}const V=j.useCallback(J=>{if(m!=="playing")return;const se=["d","f","j","k"].indexOf(J.key.toLowerCase());if(se===-1)return;const ie=150,oe=50,we=100,he=X.filter(He=>He.lane===se&&!He.hit&&Math.abs(He.time-le)<ie);if(he.length>0){const He=he.reduce((Ye,Xt)=>Math.abs(Xt.time-le)<Math.abs(Ye.time-le)?Xt:Ye),Qt=Math.abs(He.time-le);He.hit=!0;let Dt="miss",mt=0;Qt<oe?(Dt="perfect",mt=100,v(Ye=>Ye+1)):Qt<we?(Dt="great",mt=75,w(Ye=>Ye+1)):(Dt="good",mt=50,E(Ye=>Ye+1)),He.type==="special"&&(mt*=2);const Qs=Math.min(1+x*.01,2);mt=Math.floor(mt*Qs),g(Ye=>Ye+mt),C(Ye=>{const Xt=Ye+1;return A(wi=>Math.max(wi,Xt)),Xt}),I(Ye=>[...Ye,{id:He.id,type:Dt,lane:se}]),setTimeout(()=>{I(Ye=>Ye.filter(Xt=>Xt.id!==He.id))},500)}},[X,le,x,m]),ne=j.useCallback(()=>{if(m!=="playing"||!o)return;const $=Date.now()-H.current;F($);const se=3e3,ie=o.notes.filter(he=>he.time>=$-200&&he.time<=$+se);q(ie);const oe=ie.filter(he=>!he.hit&&he.time<$-150);oe.length>0&&(R(he=>he+oe.length),C(0),oe.forEach(he=>he.hit=!0));const we=D+N+_+k;if(we>0){const he=(D*100+N*75+_*50)/(we*100)*100;M(Math.round(he))}if($>=o.duration*1e3){Q();return}B.current=requestAnimationFrame(ne)},[m,o,D,N,_,k]),O=J=>{u(J),y("playing"),g(0),C(0),A(0),M(100),v(0),w(0),E(0),R(0),q([]),F(0),H.current=Date.now(),J.notes.forEach($=>$.hit=!1)},Q=()=>{if(y("results"),B.current&&cancelAnimationFrame(B.current),o&&b>0){const J=b/o.perfectScore;c({agility:Math.floor(J*5)}),T===100&&k===0&&(i("musicNote"),d(o.artist,10))}};return j.useEffect(()=>(m==="playing"&&(window.addEventListener("keydown",V),B.current=requestAnimationFrame(ne)),()=>{window.removeEventListener("keydown",V),B.current&&cancelAnimationFrame(B.current)}),[m,V,ne]),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-black p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-4 mb-4 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",children:"  "}),m==="playing"&&e.jsxs("div",{className:"flex gap-6 text-white",children:[e.jsxs("div",{children:[": ",b]}),e.jsxs("div",{children:[": ",x,"x"]}),e.jsxs("div",{children:[": ",T,"%"]})]})]})}),m==="menu"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(J=>e.jsxs("button",{onClick:()=>O(J),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg p-6 text-left transition-all hover:scale-[1.02]",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:["by ",J.artist]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-yellow-400",children:["".repeat(J.difficulty),"".repeat(5-J.difficulty)]}),e.jsxs("div",{className:"text-sm text-gray-300",children:[Math.floor(J.duration/60),":",(J.duration%60).toString().padStart(2,"0")]})]})]},J.id))}),e.jsxs("div",{className:"mt-8 bg-purple-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:""}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"D"}),e.jsx("div",{className:"text-xs",children:"Lane 1"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"F"}),e.jsx("div",{className:"text-xs",children:"Lane 2"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"J"}),e.jsx("div",{className:"text-xs",children:"Lane 3"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"K"}),e.jsx("div",{className:"text-xs",children:"Lane 4"})]})]})]})]}),m==="playing"&&o&&e.jsxs("div",{className:"relative bg-black/70 backdrop-blur-md rounded-lg border border-purple-500 overflow-hidden",style:{height:"600px"},children:[e.jsxs("div",{className:"absolute inset-0",ref:G,children:[e.jsx("div",{className:"absolute inset-0 flex",children:[0,1,2,3].map(J=>e.jsxs("div",{className:"flex-1 border-x border-purple-500/30 relative",children:[e.jsx("div",{className:"absolute bottom-20 left-0 right-0 h-2 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-50"}),X.filter($=>$.lane===J&&!$.hit).map($=>{const ie=(1-($.time-le)/3e3)*100;return e.jsx("div",{className:`absolute left-2 right-2 h-8 rounded transition-all ${$.type==="special"?"bg-yellow-500":$.type==="long"?"bg-blue-500":"bg-purple-500"}`,style:{top:`${ie}%`,transform:"translateY(-50%)"}},$.id)}),ce.filter($=>$.lane===J).map($=>e.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 animate-ping",children:e.jsx("div",{className:`text-2xl font-bold ${$.type==="perfect"?"text-yellow-400":$.type==="great"?"text-green-400":$.type==="good"?"text-blue-400":"text-red-400"}`,children:$.type==="perfect"?"PERFECT!":$.type==="great"?"GREAT!":$.type==="good"?"GOOD":"MISS"})},$.id)),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2",children:e.jsx("div",{className:"w-12 h-12 bg-purple-700 rounded-lg flex items-center justify-center text-white font-bold text-xl border-2 border-purple-400",children:["D","F","J","K"][J]})})]},J))}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-black/50",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500",style:{width:`${le/(o.duration*1e3)*100}%`}})})]}),e.jsx("button",{onClick:()=>y("paused"),className:"absolute top-4 right-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg",children:" "})]}),m==="results"&&o&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:""}),e.jsxs("div",{className:"bg-purple-900/50 rounded-lg p-6 mb-6",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("div",{className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:b>=o.perfectScore*.95?"S":b>=o.perfectScore*.85?"A":b>=o.perfectScore*.75?"B":b>=o.perfectScore*.6?"C":b>=o.perfectScore*.4?"D":"F"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsx("div",{className:"text-2xl font-bold",children:b})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-2xl font-bold",children:[p,"x"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:""}),e.jsxs("div",{className:"text-2xl font-bold",children:[T,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Perfect/Great/Good/Miss"}),e.jsxs("div",{className:"text-lg font-bold",children:[D,"/",N,"/",_,"/",k]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>O(o),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:" "}),e.jsx("button",{onClick:()=>y("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:" "})]})]}),m==="paused"&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-purple-900 rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:""}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>y("playing"),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:""}),e.jsx("button",{onClick:()=>{y("menu"),B.current&&cancelAnimationFrame(B.current)},className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:""})]})]})})]})})},ub=()=>{const{updateStats:c,addItem:i,gainExperience:d,addGold:o}=re(B=>B.actions),[u,m]=j.useState(null),[y,b]=j.useState([]),[g,x]=j.useState(0),[C,p]=j.useState(0),[A,T]=j.useState("menu"),[M,D]=j.useState(null),[v,N]=j.useState(!1),[w,_]=j.useState(0),[E,k]=j.useState(0),R=[{id:"sakura_portrait",name:" ",image:"",gridSize:3,timeLimit:180,difficulty:1,rewards:{exp:50,money:30,item:"puzzlePiece"}},{id:"school_emblem",name:" ",image:"",gridSize:4,timeLimit:240,difficulty:2,rewards:{exp:100,money:50}},{id:"magical_artifact",name:" ",image:"",gridSize:5,timeLimit:300,difficulty:3,rewards:{exp:150,money:75,item:"magicGem"}},{id:"heroines_group",name:" ",image:"",gridSize:6,timeLimit:360,difficulty:4,rewards:{exp:200,money:100,item:"memoryAlbum"}}],X=B=>{const H=B.gridSize*B.gridSize,f=[];for(let V=0;V<H;V++)f.push({id:V,currentPos:V,correctPos:V,isCorrect:!0});let z=[...f];for(let V=0;V<H*10;V++){const ne=z.findIndex(Q=>Q.id===H-1),O=q(ne,B.gridSize);if(O.length>0){const Q=O[Math.floor(Math.random()*O.length)];le(z,ne,Q)}}z=z.map((V,ne)=>({...V,currentPos:ne,isCorrect:ne===V.correctPos})),b(z)},q=(B,H)=>{const f=[],z=Math.floor(B/H),V=B%H;return z>0&&f.push(B-H),z<H-1&&f.push(B+H),V>0&&f.push(B-1),V<H-1&&f.push(B+1),f},le=(B,H,f)=>{const z=B[H];B[H]=B[f],B[f]=z},F=B=>{if(A!=="playing"||!u)return;const H=y.find(V=>V.id===u.gridSize*u.gridSize-1);if(!H)return;const f=H.currentPos;if(q(f,u.gridSize).includes(B)){const V=[...y],ne=V[B],O=V.findIndex(J=>J.id===H.id);V[B]=H,V[O]=ne;const Q=V.map((J,$)=>({...J,currentPos:$,isCorrect:J.correctPos===$}));b(Q),x(J=>J+1),Q.every(J=>J.isCorrect)&&I()}},ce=B=>{m(B),T("playing"),x(0),p(B.timeLimit),_(0),N(!1),X(B)},I=()=>{if(!u)return;T("completed");const B=Math.max(0,C*10),H=Math.max(0,(100-g)*5),f=w*50,z=Math.max(0,1e3+B+H-f);k(z),d(u.rewards.exp),o(u.rewards.money),u.rewards.item&&i(u.rewards.item),w===0&&g<u.gridSize*u.gridSize*3&&c({intelligence:2})};j.useEffect(()=>{if(A==="playing"&&C>0){const B=setTimeout(()=>{p(H=>H-1)},1e3);return()=>clearTimeout(B)}else A==="playing"&&C===0&&T("failed")},[A,C]);const G=(B,H)=>{if(!u)return null;const f=B.id===u.gridSize*u.gridSize-1,z=Math.floor(B.correctPos/u.gridSize),V=B.correctPos%u.gridSize,ne=(z*u.gridSize+V)*(360/(u.gridSize*u.gridSize));return e.jsx("button",{onClick:()=>F(H),className:`
          aspect-square rounded-lg transition-all duration-200
          ${f?"bg-gray-800 cursor-default":"hover:scale-105 cursor-pointer"}
          ${B.isCorrect&&!f?"ring-2 ring-green-500":""}
          ${v&&!B.isCorrect&&!f?"animate-pulse":""}
        `,style:{backgroundColor:f?void 0:`hsl(${ne}, 70%, 50%)`,opacity:f?.3:1},children:!f&&e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("span",{className:"text-2xl font-bold text-white drop-shadow-lg",children:B.id+1})})},B.id)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-4 mb-4 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"  "}),A==="playing"&&e.jsxs("div",{className:"flex gap-4 text-white",children:[e.jsxs("div",{children:[": ",g]}),e.jsxs("div",{children:[": ",Math.floor(C/60),":",(C%60).toString().padStart(2,"0")]}),e.jsxs("div",{children:[": ",w,"/3"]})]})]})}),A==="menu"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(B=>e.jsxs("button",{onClick:()=>ce(B),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg p-6 text-left transition-all hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:B.image}),e.jsx("div",{className:"text-xl font-bold text-white",children:B.name}),e.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[B.gridSize,"x",B.gridSize," "]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-yellow-400",children:"".repeat(B.difficulty)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Math.floor(B.timeLimit/60),""]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/20",children:e.jsxs("div",{className:"text-sm text-gray-300",children:[": ",B.rewards.exp," EXP, ",B.rewards.money," Gold",B.rewards.item&&`, ${B.rewards.item}`]})})]},B.id))}),e.jsxs("div",{className:"mt-8 bg-blue-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:" "}),e.jsxs("ul",{className:"text-gray-300 space-y-1",children:[e.jsx("li",{children:"      "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"  3   ( )"})]})]})]}),A==="playing"&&u&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("div",{className:"grid gap-2 mb-6 mx-auto",style:{gridTemplateColumns:`repeat(${u.gridSize}, 1fr)`,maxWidth:`${u.gridSize*100}px`},children:y.map((B,H)=>G(B,H))}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>{w<3&&(N(!0),_(B=>B+1),setTimeout(()=>N(!1),3e3))},disabled:w>=3,className:"px-6 py-3 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 text-white rounded-lg font-bold transition",children:["  (",3-w,"/3)"]}),e.jsx("button",{onClick:()=>X(u),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition",children:" "}),e.jsx("button",{onClick:()=>T("menu"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:" "})]})]}),A==="completed"&&u&&e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:" !"}),e.jsxs("div",{className:"bg-purple-900/50 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"text-4xl font-bold text-yellow-400 mb-4",children:[": ",E]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsx("div",{className:"text-xl font-bold",children:g})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold",children:[Math.floor(C/60),":",(C%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold",children:[w,"/3"]})]})]})]}),e.jsxs("div",{className:"bg-green-900/50 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"text-lg text-white",children:" "}),e.jsxs("div",{className:"text-sm text-gray-300 mt-2",children:[u.rewards.exp," EXP | ",u.rewards.money," Gold",u.rewards.item&&` | ${u.rewards.item}`]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>ce(u),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:" "}),e.jsx("button",{onClick:()=>T("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:""})]})]})}),A==="failed"&&e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:" !"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"     ."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>u&&ce(u),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:" "}),e.jsx("button",{onClick:()=>T("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:""})]})]})})]})})},mb=()=>{const{player:c}=re(),[i,d]=j.useState(null),[o,u]=j.useState(!1),[m,y]=j.useState(null),[b,g]=j.useState([]),[x,C]=j.useState("ranked"),p=[{id:"opponent1",name:"Shadow Knight",level:15,hp:200,maxHp:200,mp:50,maxMp:50,attack:40,defense:30,speed:25,skills:["slash","shadowstrike"],ranking:1500,wins:45,losses:12,streak:5,avatar:""},{id:"opponent2",name:"Fire Mage",level:14,hp:150,maxHp:150,mp:100,maxMp:100,attack:50,defense:20,speed:30,skills:["fireball","meteor"],ranking:1450,wins:38,losses:15,streak:3,avatar:""},{id:"opponent3",name:"Holy Priest",level:16,hp:180,maxHp:180,mp:80,maxMp:80,attack:30,defense:40,speed:20,skills:["heal","holylight"],ranking:1600,wins:52,losses:8,streak:8,avatar:""},{id:"opponent4",name:"Assassin",level:13,hp:140,maxHp:140,mp:40,maxMp:40,attack:55,defense:15,speed:40,skills:["backstab","poisondagger"],ranking:1400,wins:30,losses:20,streak:1,avatar:""},{id:"opponent5",name:"Tank Warrior",level:17,hp:250,maxHp:250,mp:30,maxMp:30,attack:35,defense:50,speed:15,skills:["shieldbash","ironwall"],ranking:1550,wins:40,losses:10,streak:4,avatar:""}],A={slash:{name:"",damage:35,mpCost:5,description:" "},fireball:{name:"",damage:45,mpCost:10,description:" "},heal:{name:"",damage:-40,mpCost:15,description:"HP "},backstab:{name:"",damage:60,mpCost:8,description:" "},shieldbash:{name:" ",damage:25,mpCost:5,description:" "},shadowstrike:{name:" ",damage:50,mpCost:12,description:" "},meteor:{name:"",damage:70,mpCost:20,description:" "},holylight:{name:" ",damage:40,mpCost:10,description:" "},poisondagger:{name:"",damage:30,mpCost:6,description:" "},ironwall:{name:"",damage:0,mpCost:10,description:" "}};j.useEffect(()=>{const v=[...p].sort((N,w)=>w.ranking-N.ranking);g(v)},[]);const T=()=>{u(!0),setTimeout(()=>{const v=p[Math.floor(Math.random()*p.length)],N={id:"player",name:c.name,level:c.level||10,hp:100+(c.level||10)*10,maxHp:100+(c.level||10)*10,mp:50+(c.level||10)*5,maxMp:50+(c.level||10)*5,attack:20+(c.level||10)*2,defense:15+(c.level||10),speed:20+Math.floor((c.level||10)/2),skills:["slash","fireball","heal"],ranking:1200,wins:0,losses:0,streak:0,avatar:""};d({player:N,opponent:{...v},turn:N.speed>=v.speed?"player":"opponent",logs:[],status:"preparing"}),u(!1),setTimeout(()=>{d(w=>w?{...w,status:"battling"}:null)},2e3)},2e3)},M=v=>{if(!i||i.status!=="battling"||i.turn!=="player")return;const N=A[v];if(!N||N.mpCost>i.player.mp)return;let w=N.damage;w>0&&(w=Math.max(1,w+i.player.attack-i.opponent.defense));const _=w>0?Math.max(0,i.opponent.hp-w):i.opponent.hp,E=w<0?Math.min(i.player.maxHp,i.player.hp-w):i.player.hp,k={attacker:c.name,action:N.name,damage:Math.abs(w),effect:w<0?"heal":"damage",timestamp:Date.now()};if(d({...i,player:{...i.player,mp:i.player.mp-N.mpCost,hp:E},opponent:{...i.opponent,hp:_},turn:"opponent",logs:[...i.logs,k]}),_<=0){setTimeout(()=>{d(R=>R?{...R,status:"victory"}:null)},1e3);return}setTimeout(()=>{D()},1500)},D=()=>{if(!i||i.status!=="battling")return;const v=i.opponent.skills.filter(X=>{const q=A[X];return q&&q.mpCost<=i.opponent.mp});if(v.length===0)return;const N=v[Math.floor(Math.random()*v.length)],w=A[N];let _=w.damage;_>0&&(_=Math.max(1,_+i.opponent.attack-i.player.defense));const E=_>0?Math.max(0,i.player.hp-_):i.player.hp,k=_<0?Math.min(i.opponent.maxHp,i.opponent.hp-_):i.opponent.hp,R={attacker:i.opponent.name,action:w.name,damage:Math.abs(_),effect:_<0?"heal":"damage",timestamp:Date.now()};d({...i,opponent:{...i.opponent,mp:i.opponent.mp-w.mpCost,hp:k},player:{...i.player,hp:E},turn:"player",logs:[...i.logs,R]}),E<=0&&setTimeout(()=>{d(X=>X?{...X,status:"defeat"}:null)},1e3)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-purple-800 to-blue-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:" PvP  "}),e.jsx("div",{className:"flex gap-2",children:["ranked","casual","tournament"].map(v=>e.jsx("button",{onClick:()=>C(v),className:`px-4 py-2 rounded-lg font-bold transition-all ${x===v?"bg-gradient-to-r from-red-500 to-orange-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:v==="ranked"?"":v==="casual"?"":""},v))})]})}),i?e.jsx(e.Fragment,{children:i.status==="preparing"?e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),e.jsx("div",{className:"text-3xl font-bold text-white mb-4",children:"VS"}),e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:i.player.avatar}),e.jsx("div",{className:"text-xl font-bold text-white",children:i.player.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",i.player.level]})]}),e.jsx("div",{className:"text-4xl text-yellow-400",children:"VS"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:i.opponent.avatar}),e.jsx("div",{className:"text-xl font-bold text-white",children:i.opponent.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",i.opponent.level]})]})]})]})}):i.status==="battling"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:`${i.turn==="player"?"ring-4 ring-green-400":""} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-3xl",children:i.player.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-bold",children:i.player.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",i.player.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"HP"}),e.jsxs("span",{children:[i.player.hp,"/",i.player.maxHp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-400 h-full transition-all",style:{width:`${i.player.hp/i.player.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"MP"}),e.jsxs("span",{children:[i.player.mp,"/",i.player.maxMp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-full transition-all",style:{width:`${i.player.mp/i.player.maxMp*100}%`}})})]})]})]}),e.jsxs("div",{className:`${i.turn==="opponent"?"ring-4 ring-red-400":""} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-3xl",children:i.opponent.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-bold",children:i.opponent.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",i.opponent.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"HP"}),e.jsxs("span",{children:[i.opponent.hp,"/",i.opponent.maxHp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-400 h-full transition-all",style:{width:`${i.opponent.hp/i.opponent.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"MP"}),e.jsxs("span",{children:[i.opponent.mp,"/",i.opponent.maxMp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 h-full transition-all",style:{width:`${i.opponent.mp/i.opponent.maxMp*100}%`}})})]})]})]})]}),i.turn==="player"&&e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:" !"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:i.player.skills.map(v=>{const N=A[v],w=N&&N.mpCost<=i.player.mp;return e.jsxs("button",{onClick:()=>w&&M(v),disabled:!w,className:`p-3 rounded-lg font-bold transition-all ${w?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("div",{children:N?.name}),e.jsxs("div",{className:"text-xs",children:["MP: ",N?.mpCost]})]},v)})})]}),i.turn==="opponent"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("div",{className:"text-white/70",children:" ..."})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:" "}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:i.logs.slice(-5).map((v,N)=>e.jsxs("div",{className:"text-sm text-white/80",children:[e.jsx("span",{className:"font-bold",children:v.attacker}),"",e.jsxs("span",{className:"text-yellow-400",children:[" ",v.action]}),"!",v.effect==="damage"&&e.jsxs("span",{className:"text-red-400",children:[" -",v.damage," "]}),v.effect==="heal"&&e.jsxs("span",{className:"text-green-400",children:[" +",v.damage," "]})]},N))})]})]}):e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:i.status==="victory"?"":""}),e.jsx("div",{className:"text-4xl font-bold text-white mb-4",children:i.status==="victory"?"VICTORY!":"DEFEAT"}),e.jsx("div",{className:"text-white/70 mb-6",children:i.status==="victory"?`${i.opponent.name}() !`:`${i.opponent.name} ...`}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:" "}),e.jsx("div",{className:"space-y-1 text-white/80",children:i.status==="victory"?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"  : +25 RP"}),e.jsx("div",{children:" : +100 G"}),e.jsx("div",{children:" : +50 EXP"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"  : -10 RP"}),e.jsx("div",{children:" : +25 G"}),e.jsx("div",{children:" : +10 EXP"})]})})]}),e.jsx("button",{onClick:()=>d(null),className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-bold hover:scale-105 transition-all",children:" "})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 mb-6",children:e.jsx("div",{className:"text-center",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:""}),e.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:" ..."}),e.jsx("div",{className:"text-white/70",children:"  "})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("div",{className:"text-2xl font-bold text-white mb-4",children:"  !"}),e.jsx("button",{onClick:T,className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-8 py-4 rounded-xl text-xl font-bold hover:scale-105 transition-all",children:" "}),e.jsxs("div",{className:"mt-4 text-white/70",children:[" : #",c.pvpRanking||1e3," | : ",c.pvpWins||0,"W ",c.pvpLosses||0,"L"]})]})})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:b.map((v,N)=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:N===0?"":N===1?"":N===2?"":`#${N+1}`}),e.jsx("div",{className:"text-2xl",children:v.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:v.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",v.level]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-white font-bold",children:[v.ranking," RP"]}),e.jsxs("div",{className:"text-sm text-white/70",children:[v.wins,"W ",v.losses,"L"]}),v.streak>0&&e.jsxs("div",{className:"text-sm text-orange-400",children:[" ",v.streak," "]})]})]},v.id))})]})]})]})})},xb=()=>{const{player:c}=re(),[i,d]=j.useState("friends"),[o,u]=j.useState([]),[m,y]=j.useState([]),[b,g]=j.useState(null),[x,C]=j.useState([]),[p,A]=j.useState(""),[T,M]=j.useState(""),[D,v]=j.useState(!1),N=[{id:"flower",name:"",icon:"",friendshipPoints:10,cost:50},{id:"chocolate",name:"",icon:"",friendshipPoints:15,cost:75},{id:"gem",name:"",icon:"",friendshipPoints:30,cost:150},{id:"letter",name:"",icon:"",friendshipPoints:20,cost:100},{id:"trophy",name:"",icon:"",friendshipPoints:50,cost:300}],w=[{id:"1",name:"Luna",level:15,status:"online",lastSeen:new Date,friendshipLevel:85,avatar:"",mutualGuilds:["Starlight"],achievements:24,message:"   ~"},{id:"2",name:"Phoenix",level:22,status:"busy",lastSeen:new Date,friendshipLevel:70,avatar:"",mutualGuilds:["Blaze","Starlight"],achievements:45,message:" "},{id:"3",name:"Crystal",level:18,status:"offline",lastSeen:new Date(Date.now()-36e5),friendshipLevel:60,avatar:"",mutualGuilds:[],achievements:31},{id:"4",name:"Shadow",level:25,status:"away",lastSeen:new Date,friendshipLevel:45,avatar:"",mutualGuilds:["DarkKnights"],achievements:67,message:"AFK"},{id:"5",name:"Aurora",level:20,status:"online",lastSeen:new Date,friendshipLevel:92,avatar:"",mutualGuilds:["Starlight"],achievements:38,message:"  "}],_=[{id:"6",name:"Blade",level:30,status:"online",lastSeen:new Date,friendshipLevel:0,avatar:"",mutualGuilds:[],achievements:89},{id:"7",name:"Rose",level:16,status:"online",lastSeen:new Date,friendshipLevel:0,avatar:"",mutualGuilds:[],achievements:22}];j.useEffect(()=>{u(w.slice(0,3)),y(w.slice(3,4))},[]);const E=()=>{if(!p.trim()||!b)return;const F={id:Date.now().toString(),sender:c.name,content:p,timestamp:new Date,type:"text"};C([...x,F]),A("")},k=F=>{if(!b)return;const ce={id:Date.now().toString(),sender:c.name,content:`${F.icon} ${F.name}() !`,timestamp:new Date,type:"gift"};C([...x,ce]),u(o.map(I=>I.id===b.id?{...I,friendshipLevel:Math.min(100,I.friendshipLevel+F.friendshipPoints/5)}:I)),v(!1)},R=F=>{u([...o,F]),y(m.filter(ce=>ce.id!==F.id))},X=F=>{alert(`${F.name}   !`)},q=F=>{switch(F){case"online":return"bg-green-500";case"busy":return"bg-red-500";case"away":return"bg-yellow-500";default:return"bg-gray-500"}},le=F=>F>=90?"":F>=70?" ":F>=50?"":F>=30?" ":" ";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"  "}),e.jsx("div",{className:"flex gap-2 mt-4",children:["friends","chat","search","requests"].map(F=>e.jsxs("button",{onClick:()=>d(F),className:`px-4 py-2 rounded-lg font-bold transition-all ${i===F?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[F==="friends"&&" ",F==="chat"&&"",F==="search"&&" ",F==="requests"&&`  ${m.length>0?`(${m.length})`:""}`]},F))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[i==="friends"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["  (",o.length,")"]}),e.jsx("div",{className:"space-y-2",children:o.map(F=>e.jsx("div",{onClick:()=>g(F),className:`bg-white/10 rounded-lg p-3 cursor-pointer hover:bg-white/20 transition-all ${b?.id===F.id?"ring-2 ring-pink-500":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-2xl",children:F.avatar}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 ${q(F.status)} rounded-full border-2 border-black`})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:F.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",F.level]}),F.message&&e.jsx("div",{className:"text-xs text-white/50 italic",children:F.message})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-white/70",children:le(F.friendshipLevel)}),e.jsx("div",{className:"w-16 bg-gray-700 rounded-full h-1 mt-1",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-full rounded-full",style:{width:`${F.friendshipLevel}%`}})})]})]})},F.id))})]}),i==="search"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("input",{type:"text",value:T,onChange:F=>M(F.target.value),placeholder:"  ...",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 mb-4"}),e.jsx("div",{className:"space-y-2",children:_.filter(F=>F.name.toLowerCase().includes(T.toLowerCase())).map(F=>e.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:F.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:F.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",F.level,"  ",F.achievements," "]})]})]}),e.jsx("button",{onClick:()=>X(F),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-3 py-1 rounded text-sm font-bold hover:scale-105 transition-all",children:" "})]})},F.id))})]}),i==="requests"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),m.length>0?e.jsx("div",{className:"space-y-2",children:m.map(F=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:F.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:F.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",F.level]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R(F),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-1 rounded text-sm font-bold",children:""}),e.jsx("button",{onClick:()=>y(m.filter(ce=>ce.id!==F.id)),className:"flex-1 bg-red-500/20 text-red-400 py-1 rounded text-sm font-bold",children:""})]})]},F.id))}):e.jsx("div",{className:"text-center text-white/50 py-8",children:"   "})]})]}),e.jsx("div",{className:"lg:col-span-2",children:(i==="friends"||i==="chat")&&b?e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 h-[600px] flex flex-col",children:[e.jsx("div",{className:"bg-white/10 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl",children:b.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-white",children:b.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",b.level,"  ",le(b.friendshipLevel)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:`w-2 h-2 ${q(b.status)} rounded-full`}),e.jsx("span",{className:"text-sm text-white/50",children:b.status})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(!0),className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 py-2 rounded-lg font-bold hover:scale-105 transition-all",children:" "}),e.jsx("button",{className:"bg-white/10 text-white px-4 py-2 rounded-lg font-bold hover:bg-white/20 transition-all",children:" "})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:x.map(F=>e.jsx("div",{className:`flex ${F.sender===c.name?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg ${F.sender===c.name?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white"}`,children:[F.type==="gift"&&e.jsx("div",{className:"text-2xl mb-1 text-center",children:""}),e.jsx("div",{className:"text-sm",children:F.content}),e.jsx("div",{className:"text-xs opacity-70 mt-1",children:new Date(F.timestamp).toLocaleTimeString()})]})},F.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:p,onChange:F=>A(F.target.value),onKeyPress:F=>F.key==="Enter"&&E(),placeholder:" ...",className:"flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50"}),e.jsx("button",{onClick:E,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg font-bold hover:scale-105 transition-all",children:""})]})]}):e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center text-white/50",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("div",{className:"text-xl",children:"   "})]})})})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:N.map(F=>e.jsxs("button",{onClick:()=>k(F),className:"bg-white/10 rounded-lg p-4 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-3xl mb-2",children:F.icon}),e.jsx("div",{className:"text-sm text-white font-bold",children:F.name}),e.jsxs("div",{className:"text-xs text-white/70",children:[F.cost," G"]}),e.jsxs("div",{className:"text-xs text-green-400",children:["+",F.friendshipPoints," "]})]},F.id))}),e.jsx("button",{onClick:()=>v(!1),className:"w-full mt-4 bg-white/10 text-white py-2 rounded-lg font-bold hover:bg-white/20 transition-all",children:""})]})})]})})},hb=()=>{const{player:c}=re(),[i,d]=j.useState(null),[o,u]=j.useState([]),[m,y]=j.useState(!1),[b,g]=j.useState(null),x=[{id:"1",name:" ",type:"weapon",icon:"",level:0,maxLevel:15,rarity:"common",baseStats:{attack:10},enhancedStats:{attack:10},enhancementCost:100,successRate:95},{id:"2",name:" ",type:"armor",icon:"",level:3,maxLevel:15,rarity:"rare",baseStats:{defense:15,hp:50},enhancedStats:{defense:20,hp:65},enhancementCost:200,successRate:80},{id:"3",name:" ",type:"accessory",icon:"",level:5,maxLevel:20,rarity:"epic",baseStats:{mp:30,speed:5},enhancedStats:{mp:45,speed:8},enhancementCost:500,successRate:65},{id:"4",name:" ",type:"weapon",icon:"",level:7,maxLevel:25,rarity:"legendary",baseStats:{attack:50,speed:10},enhancedStats:{attack:85,speed:17},enhancementCost:1e3,successRate:45},{id:"5",name:" ",type:"accessory",icon:"",level:1,maxLevel:15,rarity:"rare",baseStats:{hp:30,mp:20},enhancedStats:{hp:35,mp:23},enhancementCost:150,successRate:88}],C=[{id:"blessing",name:" ",icon:"",successBonus:10,protectItem:!1,quantity:5},{id:"protection",name:" ",icon:"",successBonus:0,protectItem:!0,quantity:3},{id:"lucky",name:" ",icon:"",successBonus:20,protectItem:!1,quantity:2},{id:"master",name:" ",icon:"",successBonus:30,protectItem:!0,quantity:1}],p=()=>{if(!i)return 0;let v=i.successRate-i.level*5;v=Math.max(10,v);const N=o.reduce((w,_)=>w+_.successBonus,0);return Math.min(100,v+N)},A=()=>i?i.enhancementCost*(i.level+1):0,T=()=>{!i||m||(y(!0),g(null),setTimeout(()=>{const v=p();if(Math.random()*100<v){const _=i.level+1,E=Math.floor(_/3+1);d({...i,level:_,enhancedStats:{attack:i.baseStats.attack?i.baseStats.attack+E*3:void 0,defense:i.baseStats.defense?i.baseStats.defense+E*2:void 0,hp:i.baseStats.hp?i.baseStats.hp+E*10:void 0,mp:i.baseStats.mp?i.baseStats.mp+E*5:void 0,speed:i.baseStats.speed?i.baseStats.speed+E:void 0}}),g({success:!0,newLevel:_})}else{const _=o.some(E=>E.protectItem);!_&&i.level>=10?(g({success:!1,destroyed:!0}),d(null)):!_&&i.level>=5?(d({...i,level:Math.max(0,i.level-1)}),g({success:!1,newLevel:Math.max(0,i.level-1)})):g({success:!1})}y(!1),u([])},2e3))},M=v=>{switch(v){case"legendary":return"from-yellow-500 to-orange-500";case"epic":return"from-purple-500 to-pink-500";case"rare":return"from-blue-500 to-cyan-500";default:return"from-gray-500 to-gray-600"}},D=v=>{switch(v){case"legendary":return"text-yellow-400";case"epic":return"text-purple-400";case"rare":return"text-blue-400";default:return"text-gray-400"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"  "}),e.jsx("div",{className:"mt-2 text-white/70",children:"    !      ."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:x.map(v=>e.jsx("button",{onClick:()=>d(v),className:`w-full bg-white/10 rounded-lg p-3 hover:bg-white/20 transition-all text-left ${i?.id===v.id?"ring-2 ring-yellow-400":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:v.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:`font-bold ${D(v.rarity)}`,children:[v.name," ",v.level>0&&`+${v.level}`]}),e.jsx("div",{className:"text-xs text-white/60",children:v.type==="weapon"?"":v.type==="armor"?"":""})]})]}),v.level===v.maxLevel&&e.jsx("div",{className:"text-xs text-yellow-400 font-bold",children:"MAX"})]})},v.id))})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),i?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`bg-gradient-to-r ${M(i.rarity)} p-4 rounded-lg`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:i.icon}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[i.name," +",i.level]}),e.jsxs("div",{className:"text-white/80",children:[i.level," / ",i.maxLevel]})]})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:" "}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(i.enhancedStats).map(([v,N])=>N&&e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:v==="attack"?"":v==="defense"?"":v.toUpperCase()}),e.jsxs("span",{className:"text-green-400",children:["+",N]})]},v))})]}),i.level<i.maxLevel&&e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm font-bold text-white mb-2",children:["  (+",i.level+1,")"]}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(i.enhancedStats).map(([v,N])=>{if(!N)return null;const w=Math.floor((i.level+1)/3+1)*(v==="attack"?3:v==="defense"?2:v==="hp"?10:v==="mp"?5:1);return e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:v==="attack"?"":v==="defense"?"":v.toUpperCase()}),e.jsxs("span",{className:"text-yellow-400",children:["+",N+w-N," ( ",N+w-N,")"]})]},v)})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:" "}),e.jsxs("span",{className:`font-bold ${p()>=70?"text-green-400":p()>=40?"text-yellow-400":"text-red-400"}`,children:[p(),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:" "}),e.jsxs("span",{className:"text-yellow-400",children:[A()," G"]})]}),i.level>=5&&e.jsxs("div",{className:"text-xs text-red-400",children:["   ",i.level>=10?"   ":"    "]})]})]}):e.jsx("div",{className:"text-center text-white/50 py-8",children:"  "})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2 mb-4",children:C.map(v=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:v.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-sm",children:v.name}),e.jsxs("div",{className:"text-xs text-white/60",children:[v.successBonus>0&&` +${v.successBonus}%`,v.protectItem&&" "]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/70 text-sm",children:["x",v.quantity]}),v.quantity>0&&e.jsx("button",{onClick:()=>{o.find(N=>N.id===v.id)?u(o.filter(N=>N.id!==v.id)):u([...o,v])},className:`px-2 py-1 rounded text-xs font-bold transition-all ${o.find(N=>N.id===v.id)?"bg-green-500 text-white":"bg-white/20 text-white/70 hover:bg-white/30"}`,children:o.find(N=>N.id===v.id)?"":""})]})]},v.id))}),o.length>0&&e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:" "}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:o.map(v=>e.jsxs("div",{className:"bg-white/20 rounded px-2 py-1 text-xs text-white flex items-center gap-1",children:[e.jsx("span",{children:v.icon}),e.jsx("span",{children:v.name})]},v.id))})]}),i&&i.level<i.maxLevel&&e.jsx("button",{onClick:T,disabled:m||(c.gold||0)<A(),className:`w-full py-4 rounded-lg font-bold text-lg transition-all ${m?"bg-gray-600 text-gray-400 cursor-not-allowed":(c.gold||0)<A()?"bg-red-600/50 text-red-300 cursor-not-allowed":"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:scale-105"}`,children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin",children:""})," ..."]}):(c.gold||0)<A()?" ":" "}),b&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg text-center ${b.success?"bg-green-500/20":"bg-red-500/20"}`,children:[e.jsx("div",{className:"text-3xl mb-2",children:b.success?"":b.destroyed?"":""}),e.jsx("div",{className:"text-white font-bold",children:b.success?` ! (+${b.newLevel})`:b.destroyed?" ...":b.newLevel!==void 0?` ... (+${b.newLevel})`:" "})]})]})]})]})})},fb="http://localhost:9000";class pb{constructor(i=fb){this.baseUrl=i}async healthCheck(){try{return await(await fetch(`${this.baseUrl}/health`)).json()}catch(i){throw console.error("Health check failed:",i),i}}async testApi(){try{return await(await fetch(`${this.baseUrl}/api/test`)).json()}catch(i){throw console.error("API test failed:",i),i}}async login(i,d){try{return await(await fetch(`${this.baseUrl}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:d})})).json()}catch(o){throw console.error("Login failed:",o),o}}async register(i,d,o){try{return await(await fetch(`${this.baseUrl}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,username:d,password:o})})).json()}catch(u){throw console.error("Registration failed:",u),u}}async saveGame(i){try{return await(await fetch(`${this.baseUrl}/api/game/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`},body:JSON.stringify(i)})).json()}catch(d){throw console.error("Save game failed:",d),d}}async loadGame(){try{return await(await fetch(`${this.baseUrl}/api/game/load`,{headers:{Authorization:`Bearer ${this.getToken()}`}})).json()}catch(i){throw console.error("Load game failed:",i),i}}getToken(){return localStorage.getItem("authToken")}setToken(i){localStorage.setItem("authToken",i)}removeToken(){localStorage.removeItem("authToken")}}const Fc=new pb,gb=()=>{const[c,i]=j.useState(null),[d,o]=j.useState(null),[u,m]=j.useState(!1),[y,b]=j.useState(null);j.useEffect(()=>{g()},[]);const g=async()=>{m(!0),b(null);try{const p=await Fc.healthCheck();i(p)}catch(p){b("  : "+p.message)}finally{m(!1)}},x=async()=>{m(!0),b(null);try{const p=await Fc.testApi();o(p)}catch(p){b("API  : "+p.message)}finally{m(!1)}},C=async()=>{m(!0),b(null);try{const p=await Fc.login("demo@academy-dating-sim.com","demo123");console.log("Login result:",p),alert("    ")}catch(p){b("  : "+p.message)}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-xl p-8 border border-white/20",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-8 text-center",children:"  API  "}),y&&e.jsxs("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6 text-red-200",children:[e.jsx("strong",{children:":"})," ",y]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:" Health Check"}),e.jsx("button",{onClick:g,disabled:u,className:"w-full mb-4 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?" ...":"  "}),c&&e.jsx("div",{className:"bg-black/50 rounded p-3 text-sm",children:e.jsx("pre",{className:"text-green-300 whitespace-pre-wrap",children:JSON.stringify(c,null,2)})})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:" API "}),e.jsx("button",{onClick:x,disabled:u,className:"w-full mb-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?" ...":"API  "}),d&&e.jsx("div",{className:"bg-black/50 rounded p-3 text-sm",children:e.jsx("pre",{className:"text-blue-300 whitespace-pre-wrap",children:JSON.stringify(d,null,2)})})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"  "}),e.jsx("button",{onClick:C,disabled:u,className:"w-full mb-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?" ...":"  (demo )"}),e.jsx("p",{className:"text-gray-300 text-xs",children:" : demo@academy-dating-sim.com / demo123"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"  "}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:":"}),e.jsx("span",{className:"text-green-400",children:" http://localhost:5173"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:":"}),e.jsxs("span",{className:c?"text-green-400":"text-red-400",children:[c?"":""," http://localhost:3001"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:":"}),e.jsx("span",{className:"text-green-400",children:" Supabase PostgreSQL"})]})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-all",children:" "})})]})})})},bb=[{id:"kendo",name:"",description:"    ",leader:"sakura",members:["sakura","npc_kendo_1","npc_kendo_2"],maxMembers:20,requirements:{stats:{strength:15,stamina:10},level:5},schedule:{monday:{time:"afternoon",activity:"training"},wednesday:{time:"afternoon",activity:"training"},friday:{time:"afternoon",activity:"sparring"},saturday:{time:"morning",activity:"tournament"}},benefits:{daily:{stats:{strength:1,stamina:1},exp:50},weekly:{items:["training_sword"],money:500},rank:{beginner:{title:"",bonus:{strength:5}},intermediate:{title:"",bonus:{strength:10,stamina:5}},advanced:{title:"",bonus:{strength:15,stamina:10,agility:5}},master:{title:"",bonus:{strength:25,stamina:15,agility:10}}}},activities:[{id:"daily_training",name:" ",description:"  ",rewards:{exp:30,stats:{strength:1}}},{id:"sparring_match",name:"",description:"  ",rewards:{exp:50,stats:{strength:2,agility:1}}},{id:"tournament",name:"",description:"  ",rewards:{exp:100,money:1e3,item:"trophy"}}],events:[{id:"kendo_festival",name:" ",description:"  ",date:{month:6,day:15},rewards:{affinity:{sakura:20},item:"special_sword"}}],reputation:0,level:1,exp:0},{id:"library",name:"",description:"   ",leader:"yuki",members:["yuki","npc_library_1","npc_library_2"],maxMembers:15,requirements:{stats:{intelligence:20},level:3},schedule:{tuesday:{time:"afternoon",activity:"reading"},thursday:{time:"afternoon",activity:"discussion"},saturday:{time:"noon",activity:"book_club"}},benefits:{daily:{stats:{intelligence:2},exp:40},weekly:{items:["rare_book"],money:300},rank:{member:{title:"",bonus:{intelligence:5}},librarian:{title:"",bonus:{intelligence:10,exp_gain:10}},scholar:{title:"",bonus:{intelligence:20,exp_gain:20}},sage:{title:"",bonus:{intelligence:30,all_stats:5}}}},activities:[{id:"quiet_reading",name:" ",description:"  ",rewards:{exp:25,stats:{intelligence:1}}},{id:"book_discussion",name:" ",description:"  ",rewards:{exp:40,stats:{intelligence:2,charm:1}}},{id:"write_review",name:" ",description:"   ",rewards:{exp:60,money:200}}],events:[{id:"book_fair",name:" ",description:"  ",date:{month:9,day:20},rewards:{affinity:{yuki:15},item:"ancient_tome"}}],reputation:0,level:1,exp:0},{id:"magic",name:" ",description:"   ",leader:"luna",members:["luna","npc_magic_1","npc_magic_2","npc_magic_3"],maxMembers:12,requirements:{stats:{intelligence:25,luck:10},level:10},schedule:{monday:{time:"evening",activity:"theory"},wednesday:{time:"evening",activity:"practice"},friday:{time:"night",activity:"ritual"}},benefits:{daily:{stats:{intelligence:1,luck:1},mp:5,exp:60},weekly:{items:["mana_potion","spell_scroll"],money:800},rank:{apprentice:{title:" ",bonus:{mp:10,intelligence:5}},adept:{title:" ",bonus:{mp:20,intelligence:10,luck:5}},wizard:{title:"",bonus:{mp:40,intelligence:20,luck:10}},archmage:{title:"",bonus:{mp:60,all_stats:10}}}},activities:[{id:"spell_practice",name:" ",description:"  ",rewards:{exp:40,mp:5}},{id:"enchantment",name:" ",description:"  ",rewards:{exp:70,item:"enchanted_item"}},{id:"summoning",name:"",description:"  ",rewards:{exp:100,stats:{luck:2}}}],reputation:0,level:1,exp:0},{id:"track",name:"",description:"    ",leader:"rin",members:["rin","npc_track_1","npc_track_2"],maxMembers:25,requirements:{stats:{stamina:20,agility:15},level:5},schedule:{daily:{time:"morning",activity:"morning_run"},weekend:{time:"afternoon",activity:"competition"}},benefits:{daily:{stats:{stamina:2,agility:1},exp:45},weekly:{items:["energy_drink","running_shoes"],money:400}},activities:[{id:"morning_jog",name:" ",description:"  ",rewards:{exp:30,stats:{stamina:2}}},{id:"sprint_training",name:" ",description:"  ",rewards:{exp:50,stats:{agility:2,stamina:1}}}],reputation:0,level:1,exp:0},{id:"art",name:"",description:"   ",leader:"mei",members:["mei","npc_art_1","npc_art_2"],maxMembers:18,requirements:{stats:{charm:15},level:4},schedule:{tuesday:{time:"afternoon",activity:"sketching"},thursday:{time:"afternoon",activity:"painting"},sunday:{time:"noon",activity:"exhibition"}},benefits:{daily:{stats:{charm:2},exp:35},weekly:{items:["art_supplies","canvas"],money:600}},activities:[{id:"sketching",name:"",description:"  ",rewards:{exp:30,stats:{charm:1}}},{id:"painting",name:" ",description:"  ",rewards:{exp:50,item:"painting",money:300}}],reputation:0,level:1,exp:0},{id:"cooking",name:"",description:"   ",leader:"hana",members:["hana","npc_cooking_1","npc_cooking_2"],maxMembers:20,requirements:{stats:{stamina:10},level:2},schedule:{monday:{time:"noon",activity:"basic_cooking"},wednesday:{time:"noon",activity:"baking"},friday:{time:"noon",activity:"special_menu"}},benefits:{daily:{stats:{stamina:1,charm:1},exp:30,items:["lunch_box"]},weekly:{items:["special_recipe","ingredients"],money:350}},activities:[{id:"cooking_practice",name:" ",description:"  ",rewards:{exp:25,item:"homemade_meal"}},{id:"bake_dessert",name:" ",description:"  ",rewards:{exp:40,item:"dessert",affinity_all:2}}],reputation:0,level:1,exp:0},{id:"science",name:"",description:"    ",leader:"sora",members:["sora","npc_science_1","npc_science_2"],maxMembers:16,requirements:{stats:{intelligence:30},level:8},schedule:{tuesday:{time:"evening",activity:"experiment"},thursday:{time:"evening",activity:"research"},saturday:{time:"afternoon",activity:"invention"}},benefits:{daily:{stats:{intelligence:3},exp:55},weekly:{items:["research_notes","invention"],money:1e3}},activities:[{id:"experiment",name:"",description:"  ",rewards:{exp:45,stats:{intelligence:2}}},{id:"invention",name:"",description:"  ",rewards:{exp:80,item:"invention",money:500}}],reputation:0,level:1,exp:0},{id:"student_council",name:"",description:"   ",leader:"akane",members:["akane","npc_council_1","npc_council_2","npc_council_3"],maxMembers:10,requirements:{stats:{intelligence:25,charm:20},level:15,reputation:500},schedule:{daily:{time:"afternoon",activity:"meeting"},friday:{time:"evening",activity:"event_planning"}},benefits:{daily:{stats:{charm:2,intelligence:1},exp:70,reputation:5},weekly:{money:1500,items:["council_badge"]},rank:{member:{title:" ",bonus:{charm:5,reputation_gain:10}},secretary:{title:"",bonus:{charm:10,intelligence:5,reputation_gain:20}},vice_president:{title:"",bonus:{all_stats:10,reputation_gain:30}},president:{title:"",bonus:{all_stats:20,reputation_gain:50}}}},activities:[{id:"council_meeting",name:"",description:"  ",rewards:{exp:50,reputation:10}},{id:"event_organization",name:" ",description:"  ",rewards:{exp:100,reputation:20,money:500}}],reputation:0,level:1,exp:0},{id:"occult",name:" ",description:"     ",leader:"mystery",members:["mystery","npc_occult_1"],maxMembers:7,requirements:{stats:{intelligence:20,luck:20},level:20,flags:["discovered_secret"],affinity:{mystery:50}},secret:!0,schedule:{midnight:{time:"night",activity:"ritual"}},benefits:{daily:{stats:{luck:3,intelligence:2},exp:100},weekly:{items:["mysterious_artifact","forbidden_knowledge"],money:2e3}},activities:[{id:"sance",name:"",description:" ",rewards:{exp:100,stats:{luck:5}}},{id:"dimension_research",name:" ",description:"  ",rewards:{exp:200,unlock:"special_ending"}}],reputation:0,level:1,exp:0}],yb={clubs:bb},Vl=yb.clubs,Nx=za,vb=()=>{const c=Ee(),i=re(N=>N.player),{updateStats:d,updatePlayer:o,addItem:u,updateMoney:m}=re(N=>N.actions),[y,b]=j.useState(null),[g,x]=j.useState(i.currentClub||null),[C,p]=j.useState({}),A=N=>{if(g||N.requirements.level&&i.level<N.requirements.level)return!1;if(N.requirements.stats){for(const[w,_]of Object.entries(N.requirements.stats))if(i.stats[w]<_)return!1}return!0},T=N=>{const w=Vl.find(_=>_.id===N);!w||!A(w)||(x(N),o({currentClub:N,clubJoinDate:i.day}),alert(`${w.name} !`))},M=()=>{g&&confirm("  ?")&&(x(null),o({currentClub:null,clubJoinDate:null}),alert(" ."))},D=(N,w)=>{const _=Vl.find(R=>R.id===N),E=_?.activities.find(R=>R.id===w);if(!_||!E)return;const k=`${N}_${w}_${i.day}`;if(C[k]){alert("    !");return}E.rewards.exp&&o({experience:i.experience+E.rewards.exp}),E.rewards.stats&&d(E.rewards.stats),E.rewards.money&&m(E.rewards.money),E.rewards.item&&u(E.rewards.item),p(R=>({...R,[k]:!0})),alert(`${E.name}  !`)},v=N=>{const w=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],_=(i.day-1)%7,E=w[_],k=N.schedule[E];return k?`${k.time} ${k.activity}`:null};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 to-indigo-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"    !"}),g&&e.jsxs("div",{className:"mt-2 badge badge-primary",children:[" : ",Vl.find(N=>N.id===g)?.name]})]}),e.jsx("button",{onClick:()=>c("/game"),className:"btn-ghost px-6 py-3 rounded-xl font-semibold",children:""})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:" "}),Vl.map(N=>{const w=g===N.id,_=A(N),E=Nx[N.leader];return e.jsxs("div",{className:`glass-card p-6 cursor-pointer transition-all duration-300 ${y===N.id?"ring-2 ring-primary":""} ${w?"border-2 border-accent":""}`,onClick:()=>b(N.id),children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[N.name,w&&e.jsx("span",{className:"badge badge-accent",children:" "})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:N.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-text-secondary",children:""}),e.jsx("div",{className:"font-medium text-text-primary",children:E?.name||N.leader})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:" "}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.requirements.level&&e.jsxs("span",{className:`badge ${i.level>=N.requirements.level?"badge-success":"badge-error"}`,children:[" ",N.requirements.level]}),N.requirements.stats&&Object.entries(N.requirements.stats).map(([k,R])=>e.jsxs("span",{className:`badge ${i.stats[k]>=R?"badge-success":"badge-error"}`,children:[k," ",R]},k))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-sm text-text-secondary",children:[": ",N.members.length,"/",N.maxMembers,""]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[N.members.slice(0,5).map(k=>{const R=Nx[k];return R?e.jsx("span",{className:"badge badge-primary",children:R.name},k):null}),N.members.length>5&&e.jsxs("span",{className:"badge",children:["+",N.members.length-5]})]})]}),v(N)&&e.jsxs("div",{className:"mb-4 p-3 bg-primary/20 rounded-lg",children:[e.jsx("div",{className:"text-sm font-semibold text-primary",children:" "}),e.jsx("div",{className:"text-text-primary",children:v(N)})]}),e.jsxs("div",{className:"flex gap-2",children:[!g&&e.jsx("button",{onClick:k=>{k.stopPropagation(),T(N.id)},disabled:!_,className:`btn ${_?"btn-primary":"btn-ghost opacity-50"} px-4 py-2`,children:""}),w&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:k=>{k.stopPropagation(),M()},className:"btn btn-secondary px-4 py-2",children:""})})]})]},N.id)})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:" "}),y?(()=>{const N=Vl.find(w=>w.id===y);return N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:""}),e.jsxs("div",{className:"space-y-2 text-sm",children:[N.benefits.daily&&e.jsxs("div",{className:"p-2 bg-surface/50 rounded",children:[e.jsx("div",{className:"font-medium text-accent",children:" "}),N.benefits.daily.exp&&e.jsxs("div",{children:[" +",N.benefits.daily.exp]}),N.benefits.daily.stats&&Object.entries(N.benefits.daily.stats).map(([w,_])=>e.jsxs("div",{children:[w," +",_]},w))]}),N.benefits.weekly&&e.jsxs("div",{className:"p-2 bg-surface/50 rounded",children:[e.jsx("div",{className:"font-medium text-accent",children:" "}),N.benefits.weekly.money&&e.jsxs("div",{children:[" +",N.benefits.weekly.money]}),N.benefits.weekly.items&&N.benefits.weekly.items.map(w=>e.jsx("div",{children:w},w))]})]})]}),g===y&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:""}),e.jsx("div",{className:"space-y-2",children:N.activities.map(w=>{const _=C[`${N.id}_${w.id}_${i.day}`];return e.jsxs("div",{className:"p-3 bg-surface/50 rounded",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:w.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:w.description})]}),_&&e.jsx("span",{className:"badge badge-success",children:""})]}),!_&&e.jsx("button",{onClick:()=>D(N.id,w.id),className:"btn btn-primary btn-sm w-full",children:""})]},w.id)})})]})]}):null})():e.jsx("p",{className:"text-text-secondary",children:" "})]})]})]})})},Pc=za,jb=$x,Nb=()=>{const c=Ee(),i=re(M=>M.player),d=re(M=>M.unlockedCharacters),[o,u]=j.useState(null),[m,y]=j.useState("gallery"),b=M=>({sakura:"",yuki:"",luna:"",mystery:"",akane:"",hana:"",rin:"",mei:"",sora:""})[M]||"",g=M=>({sakura:"from-pink-600 via-rose-500 to-pink-600",yuki:"from-blue-600 via-cyan-500 to-blue-600",luna:"from-purple-600 via-indigo-500 to-purple-600",mystery:"from-gray-600 via-slate-500 to-gray-600",akane:"from-red-600 via-orange-500 to-red-600",hana:"from-yellow-500 via-amber-400 to-yellow-500",rin:"from-violet-600 via-purple-500 to-violet-600",mei:"from-emerald-600 via-green-500 to-emerald-600",sora:"from-sky-500 via-blue-400 to-sky-500"})[M]||"from-purple-600 via-pink-500 to-purple-600",x=M=>M>=80?{level:"",color:"text-pink-400",stars:""}:M>=60?{level:"",color:"text-purple-400",stars:""}:M>=40?{level:"",color:"text-blue-400",stars:""}:M>=20?{level:"",color:"text-green-400",stars:""}:{level:"",color:"text-gray-400",stars:""},C=M=>{if(!d.includes(M)){const D=Pc[M];return D?.unlockCondition?{locked:!0,reason:`Day ${D.unlockCondition.day||0} ,   ${D.unlockCondition.totalAffection||0} `}:{locked:!0,reason:"  "}}return{locked:!1}},p=o?Pc[o]:null,A=o&&i.affection[o]||0,T=o?jb[o]?.conversations:[];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gradient mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"    "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(m==="gallery"?"detail":"gallery"),className:"btn-secondary px-6 py-3 rounded-xl font-semibold",children:m==="gallery"?" ":" "}),e.jsx("button",{onClick:()=>c("/game"),className:"btn-primary px-6 py-3 rounded-xl font-semibold",children:" "})]})]})}),m==="gallery"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(Pc).map(M=>{const D=i.affection[M.id]||0,v=x(D),N=C(M.id),w=d.includes(M.id);return e.jsxs("div",{onClick:()=>{w&&(u(M.id),y("detail"))},className:`glass-card p-6 transition-all duration-300 ${w?"hover:scale-105 cursor-pointer":"opacity-50"}`,children:[e.jsx("div",{className:`bg-gradient-to-br ${g(M.id)} p-4 rounded-xl mb-4`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-2",children:b(M.id)}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:M.name}),e.jsx("p",{className:"text-white/80",children:M.role})]})}),w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:""}),e.jsx("span",{className:`font-bold ${v.color}`,children:v.level})]}),e.jsx("div",{className:"w-full bg-background-dark rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-500",style:{width:`${D}%`}})}),e.jsx("div",{className:"text-center mt-2 text-yellow-400 text-lg",children:v.stars})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-background-dark p-2 rounded-lg",children:[e.jsx("div",{className:"text-xs text-text-secondary",children:" "}),e.jsx("div",{className:"text-lg font-bold text-text-primary",children:i.metHeroines?.filter(_=>_===M.id).length||0})]}),e.jsxs("div",{className:"bg-background-dark p-2 rounded-lg",children:[e.jsx("div",{className:"text-xs text-text-secondary",children:""}),e.jsxs("div",{className:"text-lg font-bold text-text-primary",children:[D,"/100"]})]})]}),e.jsx("p",{className:"text-sm text-text-secondary mb-4 line-clamp-2",children:M.baseText}),e.jsx("button",{className:"w-full btn-primary py-2 rounded-lg font-semibold",children:"  "})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("p",{className:"text-text-secondary font-semibold",children:" "}),e.jsx("p",{className:"text-xs text-text-secondary mt-2",children:N.reason})]})]},M.id)})}):p&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-card p-6 sticky top-4",children:[e.jsx("div",{className:`bg-gradient-to-br ${g(o)} p-6 rounded-xl mb-6`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-8xl mb-3",children:b(o)}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:p.name}),e.jsx("p",{className:"text-xl text-white/90",children:p.role})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:" "}),e.jsxs("span",{className:"text-sm font-bold text-text-primary",children:[A,"/100"]})]}),e.jsx("div",{className:"w-full bg-background-dark rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-500",style:{width:`${A}%`}})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:`text-2xl font-bold ${x(A).color}`,children:x(A).level}),e.jsx("div",{className:"text-yellow-400 text-xl mt-1",children:x(A).stars})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.likes.map((M,D)=>e.jsx("span",{className:"badge badge-success",children:M},D))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-400 mb-2",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.dislikes.map((M,D)=>e.jsx("span",{className:"badge badge-error",children:M},D))})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:" "}),e.jsxs("div",{className:"prose prose-invert max-w-none",children:[e.jsx("p",{className:"text-text-secondary leading-relaxed",children:p.baseText}),p.backstory&&e.jsxs("div",{className:"mt-4 p-4 bg-background-dark rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-text-primary mb-2",children:" "}),e.jsx("p",{className:"text-text-secondary",children:p.backstory})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:" "}),e.jsx("div",{className:"space-y-3",children:p.dialogues&&Object.entries(p.dialogues).map(([M,D])=>{const v=parseInt(M),N=A>=v;return e.jsxs("div",{className:`p-4 rounded-lg transition-all ${N?"bg-background-dark border border-primary/30":"bg-background-dark/50 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-primary",children:[" ",M]}),N?e.jsx("span",{className:"badge badge-success",children:""}):e.jsx("span",{className:"badge",children:" "})]}),e.jsxs("p",{className:`text-text-secondary ${!N&&"blur-sm"}`,children:['"',N?D:"???",'"']})]},M)})})]}),T&&T.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:T.map((M,D)=>{const v=A>=(M.requiredAffection||0);return e.jsxs("div",{className:`p-4 rounded-lg border ${v?"bg-gradient-to-br from-primary/20 to-accent/20 border-primary/50":"bg-background-dark/50 border-border opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:M.title||` ${D+1}`}),v?e.jsx("span",{className:"text-green-400",children:""}):e.jsx("span",{className:"text-gray-400",children:""})]}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[" : ",M.requiredAffection||0]})]},D)})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{c("/game")},className:"flex-1 btn-primary px-6 py-3 rounded-xl font-semibold",children:"  "}),e.jsx("button",{onClick:()=>y("gallery"),className:"flex-1 btn-secondary px-6 py-3 rounded-xl font-semibold",children:" "})]})]})]})]})})},wb=()=>{const c=Ee(),i=re(g=>g.player),[d,o]=j.useState(0),u=[{title:" ",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg",children:"   ''  ."}),e.jsx("p",{className:"text-lg",children:"      ,      ."}),e.jsxs("div",{className:"bg-purple-900/30 p-4 rounded-lg mt-4",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" : 100 "}),e.jsx("li",{children:" :   "}),e.jsx("li",{children:"  :  1,000"}),e.jsx("li",{children:" :    "})]})]})]}),emoji:""},{title:" ",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg font-bold text-yellow-300",children:"30       :"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-pink-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" 9  "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"  80  "}),e.jsx("li",{children:"   "})]})]}),e.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"  "}),e.jsx("li",{children:"  20 "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "})]})]}),e.jsxs("div",{className:"bg-green-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"  "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"  "})]})]}),e.jsxs("div",{className:"bg-yellow-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"   "}),e.jsx("li",{children:"  "}),e.jsx("li",{children:" 10,000 "}),e.jsx("li",{children:"   "})]})]})]})]}),emoji:""},{title:" ",content:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"  30  "}),e.jsx("li",{children:"  2  "}),e.jsx("li",{children:" /  "}),e.jsx("li",{children:"   "})]})]}),e.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"    "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "})]})]}),e.jsxs("div",{className:"bg-green-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" :  "}),e.jsx("li",{children:" : "}),e.jsx("li",{children:" :  "}),e.jsx("li",{children:" :  "}),e.jsx("li",{children:" :  "})]})]}),e.jsxs("div",{className:"bg-pink-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"   "}),e.jsx("li",{children:"  "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "})]})]})]})}),emoji:""},{title:" ",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg",children:"9    !"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "}].map(g=>e.jsxs("div",{className:"bg-pink-900/30 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-3xl mb-1",children:g.emoji}),e.jsx("div",{className:"font-bold",children:g.name}),e.jsx("div",{className:"text-xs text-pink-300",children:g.type})]},g.name))}),e.jsx("p",{className:"text-sm text-yellow-300 text-center",children:"     !"})]}),emoji:""},{title:" ",content:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:"    "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"    "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"     "})]})]}),e.jsxs("div",{className:"bg-red-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:" "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" 30   "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"       "})]})]})]}),emoji:""}],m=()=>{d<u.length-1?o(d+1):c("/game")},y=()=>{d>0&&o(d-1)},b=()=>{c("/game")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-4xl w-full",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-lg rounded-2xl p-8 shadow-2xl",children:[e.jsx("div",{className:"flex justify-between mb-6",children:u.map((g,x)=>e.jsx("div",{className:`flex-1 h-2 mx-1 rounded-full transition-all ${x<=d?"bg-gradient-to-r from-purple-400 to-pink-400":"bg-gray-600"}`},x))}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:u[d].emoji}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:u[d].title}),e.jsx("div",{className:"text-gray-100",children:u[d].content})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:y,disabled:d===0,className:`px-6 py-3 rounded-lg font-bold transition-all ${d===0?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-lg"}`,children:""}),e.jsx("button",{onClick:b,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:""}),e.jsx("button",{onClick:m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:d===u.length-1?" !":""})]})]}),e.jsx("div",{className:"mt-4 text-center text-white/70",children:e.jsxs("p",{children:[": ",i.name," | Day ",i.day,"/30"]})})]})})},kb=()=>{const c=Ee(),[i]=Gp();re(v=>v.player);const{updateAffection:d,markCharacterAsMet:o}=re(v=>v.actions),[u,m]=j.useState(null),[y,b]=j.useState(0),[g,x]=j.useState(!1),[C,p]=j.useState(!1),A=[{id:"sakura_training",characterId:"sakura",title:" ",description:"    ",location:"gym",dialogue:["(      )","   .",'???: "?    ."',"(   )",'???: " .  ."'],initialAffection:5,initialState:{mood:"cautious",relationship:"stranger",specialFlag:"met_at_training"},choices:[{text:",  ...",affectionBonus:3,response:': "...    ?"',stateChange:{mood:"curious"}},{text:"  ",affectionBonus:5,response:': "....   ."',stateChange:{mood:"pleased"}},{text:"   ",affectionBonus:7,response:': "...   ."',stateChange:{relationship:"potential_student"}}]},{id:"sakura_accident",characterId:"sakura",title:" ",description:"  ",location:"classroom",dialogue:["(    )","  .",'???: "! !"',"(     )",'???: " ... ?"'],initialAffection:0,initialState:{mood:"annoyed",relationship:"accident_meet"},choices:[{text:"!  ",affectionBonus:5,response:': ".... ."',stateChange:{mood:"neutral"}},{text:" ?",affectionBonus:8,response:': "...  .   ."',stateChange:{mood:"surprised",relationship:"caring_stranger"}}]},{id:"yuki_library",characterId:"yuki",title:"  ",description:"    ",location:"library",dialogue:["(     )","     .","(    )",'???: "... ..."','???: " . ."'],initialAffection:3,initialState:{mood:"shy",relationship:"library_acquaintance"},choices:[{text:"   ?",affectionBonus:4,response:': "   ...  ?"',stateChange:{mood:"hopeful"}},{text:" ",affectionBonus:2,response:': "...   ."',stateChange:{mood:"gentle"}},{text:"  ?",affectionBonus:6,response:': "? ...  ."',stateChange:{relationship:"reading_partner"}}]},{id:"luna_magic_show",characterId:"luna",title:" ",description:"    ",location:"classroom",dialogue:["(     )","     .",'???: "? ?"',"(    )",'???: " !  !"'],initialAffection:5,initialState:{mood:"excited",relationship:"impressed_viewer",specialFlag:"saw_magic_show"},choices:[{text:" !",affectionBonus:5,response:': ", !  ?"',stateChange:{mood:"happy"}},{text:"    ?",affectionBonus:7,response:': "!  !"',stateChange:{relationship:"magic_student"}}]},{id:"haruka_welcome",characterId:"haruka",title:" ",description:"   ",location:"classroom",dialogue:["(    )",'???: "! !"',"(    )",'???: " ! !"',': " ?   !"'],initialAffection:10,initialState:{mood:"cheerful",relationship:"friendly_guide"},choices:[{text:"! ",affectionBonus:5,response:': "! !  !"',stateChange:{relationship:"tour_guide"}},{text:"  ",affectionBonus:7,response:': "~  !"',stateChange:{mood:"delighted"}}]},{id:"miku_concert",characterId:"miku",title:" ",description:"   ",location:"classroom",dialogue:["(   )","     .","(    )",'???: "!  ?"','???: " ... ."'],initialAffection:4,initialState:{mood:"embarrassed",relationship:"secret_listener"},choices:[{text:"  ",affectionBonus:8,response:': "?  !"',stateChange:{mood:"happy"}},{text:",  ",affectionBonus:3,response:': ".   ."',stateChange:{mood:"understanding"}},{text:"   ?",affectionBonus:6,response:': "!  !"',stateChange:{relationship:"regular_listener"}}]},{id:"rina_sparring",characterId:"rina",title:" ",description:"  ",location:"gym",dialogue:["(    )",'???: "!   ?"',"(   )",'???: " !  ?"'],initialAffection:5,initialState:{mood:"energetic",relationship:"sparring_partner"},choices:[{text:"!  ",affectionBonus:8,response:': "!   !"',stateChange:{relationship:"rival"}},{text:" ...",affectionBonus:4,response:': "!  !"',stateChange:{relationship:"trainer"}}]},{id:"ayumi_fortune",characterId:"ayumi",title:" ",description:"   ",location:"classroom",dialogue:["(    )",'???: "."',"(     )",'???: "...    ."','???: " .   ."'],initialAffection:6,initialState:{mood:"mysterious",relationship:"fated_meeting",specialFlag:"destiny_revealed"},choices:[{text:"  ?",affectionBonus:5,response:': "...    ."',stateChange:{mood:"prophetic"}},{text:"   ",affectionBonus:7,response:': " ...   ."',stateChange:{mood:"intrigued"}}]}];j.useEffect(()=>{const v=i.get("character"),N=i.get("location");if(v&&N){const w=A.find(_=>_.characterId===v&&_.location===N);if(w)m(w),b(0);else{const _={id:`${v}_default`,characterId:v,title:" ",description:"  ",location:N,dialogue:["(  )",'???: "?"',`???: " ${v}."`],initialAffection:5,initialState:{mood:"neutral",relationship:"just_met"},choices:[{text:"",affectionBonus:3,response:"  .",stateChange:{mood:"friendly"}},{text:" ",affectionBonus:2,response:"  .",stateChange:{mood:"neutral"}}]};m(_),b(0)}}},[i]);const T=()=>{u&&(y<u.dialogue.length-1?b(y+1):g||x(!0))},M=v=>{if(!u||C)return;const N=u.choices[v];if(!N)return;const w=u.initialAffection+N.affectionBonus;d(u.characterId,w);const _=JSON.parse(localStorage.getItem("characterStates")||"{}");_[u.characterId]={...u.initialState,...N.stateChange,meetingScenario:u.id,firstChoice:N.text},localStorage.setItem("characterStates",JSON.stringify(_)),o(u.characterId),p(!0),setTimeout(()=>{c("/game")},2e3)};if(!u)return e.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Loading..."}),e.jsx("p",{className:"text-text-secondary",children:"    ..."})]})});const D=g?u.choices.map((v,N)=>({text:v.text,callback:()=>M(N)})):void 0;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(qx,{character:u.characterId,dialogue:u.dialogue,onNext:T,choices:D,showSpeaker:!1}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-800 rounded-xl p-6 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-white mb-2",children:[" ",u.characterId,"() !"]}),e.jsx("div",{className:"text-lg text-gray-200",children:" "})]})})]})},Sb=()=>{const c=Ee(),i=re(g=>g.player),[d,o]=j.useState(null),u=[{id:"card_matching",name:" ",description:"     .   !",icon:"",route:"/card-matching",difficulty:2,rewards:"EXP +50, Gold +30,  ",unlocked:!0,dailyLimit:5,playsToday:i.statistics?.cardMatchingPlays||0,highScore:i.statistics?.cardMatchingHighScore||0},{id:"quiz",name:" ",description:"    .   !",icon:"",route:"/quiz",difficulty:3,rewards:"EXP +75, Intelligence +2,  ",unlocked:!0,dailyLimit:3,playsToday:i.statistics?.quizPlays||0,highScore:i.statistics?.quizHighScore||0},{id:"fishing",name:"",description:"      .",icon:"",route:"/fishing",difficulty:1,rewards:" , Gold,  ",unlocked:!0,dailyLimit:10,playsToday:i.statistics?.fishingPlays||0},{id:"rhythm",name:" ",description:"   .    !",icon:"",route:"/rhythm",difficulty:4,rewards:"EXP +100, Agility +3,  ",unlocked:i.level>=5,requiredLevel:5,dailyLimit:5,playsToday:i.statistics?.rhythmPlays||0,highScore:i.statistics?.rhythmHighScore||0},{id:"puzzle",name:"",description:"   .   !",icon:"",route:"/puzzle",difficulty:3,rewards:"EXP +80, Intelligence +2,  ",unlocked:i.level>=3,requiredLevel:3,dailyLimit:5,playsToday:i.statistics?.puzzlePlays||0},{id:"farming",name:" ",description:"    .     !",icon:"",route:"/farming",difficulty:2,rewards:", Gold,  ",unlocked:i.level>=7,requiredLevel:7}],m=[{id:"rhythm_tournament",name:"  ",game:"rhythm",endDate:"3 ",prize:" , 1000 Gold",participants:234,yourRank:45},{id:"quiz_tournament",name:" ",game:"quiz",endDate:"5 ",prize:" , 500 Gold",participants:156,yourRank:12}],y=[{id:"daily_card",name:"  10",game:"card_matching",progress:3,target:10,reward:"EXP +200"},{id:"daily_fish",name:"  3 ",game:"fishing",progress:1,target:3,reward:" "},{id:"daily_combo",name:"  100 ",game:"rhythm",progress:0,target:100,reward:"  x5"}],b=g=>{if(!g.unlocked){alert(` ${g.requiredLevel}  !`);return}if(g.dailyLimit&&g.playsToday&&g.playsToday>=g.dailyLimit){alert(`    ! (${g.playsToday}/${g.dailyLimit})`);return}c(g.route)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-pink-500 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"    !"})]}),e.jsx("button",{onClick:()=>c("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(g=>e.jsxs("div",{className:`bg-gradient-to-br ${g.unlocked?"from-purple-800 to-blue-800 hover:from-purple-700 hover:to-blue-700":"from-gray-800 to-gray-700"} rounded-lg p-4 transition-all ${g.unlocked?"hover:scale-[1.02] cursor-pointer":"opacity-60"}`,onClick:()=>g.unlocked&&o(g),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"text-4xl",children:g.icon}),e.jsx("div",{className:"text-yellow-400 text-sm",children:"".repeat(g.difficulty)})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:g.name}),e.jsx("p",{className:"text-xs text-gray-300 mb-3",children:g.description}),!g.unlocked&&g.requiredLevel&&e.jsxs("div",{className:"text-red-400 text-sm mb-2",children:[" Lv.",g.requiredLevel," "]}),g.dailyLimit&&e.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[" : ",g.playsToday||0,"/",g.dailyLimit]}),g.highScore!==void 0&&g.highScore>0&&e.jsxs("div",{className:"text-xs text-yellow-300",children:[" : ",g.highScore]}),e.jsx("button",{onClick:x=>{x.stopPropagation(),b(g)},disabled:!g.unlocked,className:`w-full mt-3 py-2 rounded font-bold transition ${g.unlocked?"bg-purple-600 hover:bg-purple-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:g.unlocked?"":""})]},g.id))})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-yellow-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:y.map(g=>e.jsxs("div",{className:"bg-yellow-900/20 rounded-lg p-4 border border-yellow-600/30",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:g.name}),e.jsx("p",{className:"text-xs text-gray-400",children:u.find(x=>x.id===g.game)?.name})]}),e.jsxs("div",{className:"text-xs text-yellow-400",children:[": ",g.reward]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-2 rounded-full transition-all",style:{width:`${g.progress/g.target*100}%`}})}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1 text-right",children:[g.progress,"/",g.target]})]},g.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-green-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:m.map(g=>e.jsxs("div",{className:"bg-green-900/20 rounded-lg p-4 border border-green-600/30",children:[e.jsx("h3",{className:"font-bold text-white mb-1",children:g.name}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("div",{children:[": ",g.endDate]}),e.jsxs("div",{children:[": ",g.participants,""]}),e.jsxs("div",{className:"text-green-400",children:[" : ",g.yourRank,""]})]}),e.jsxs("div",{className:"mt-2 text-xs text-yellow-300",children:[" ",g.prize]})]},g.id))})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-400 mb-4",children:"  "}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"  "}),e.jsxs("span",{children:[i.statistics?.totalMinigameTime||0,""]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"  EXP"}),e.jsxs("span",{className:"text-yellow-400",children:["+",i.statistics?.todayMinigameExp||0]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"  Gold"}),e.jsxs("span",{className:"text-yellow-400",children:["+",i.statistics?.todayMinigameGold||0]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:" "}),e.jsxs("span",{className:"text-green-400",children:[i.statistics?.minigameStreak||0,""]})]})]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-600/30",children:[e.jsx("h3",{className:"text-sm font-bold text-purple-300 mb-2",children:" "}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("li",{children:"        !"}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"        "}),e.jsx("li",{children:"      "})]})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-xl p-6 max-w-md w-full border border-purple-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:d.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:d.name})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:d.description}),e.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{className:"text-yellow-400",children:"".repeat(d.difficulty)})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{className:"text-green-400 text-xs",children:d.rewards})]}),d.dailyLimit&&e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:" "}),e.jsxs("span",{children:[d.playsToday||0,"/",d.dailyLimit]})]}),d.highScore!==void 0&&e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:" "}),e.jsx("span",{className:"text-yellow-300",children:d.highScore})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>b(d),className:"flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded-lg font-bold transition",children:" "}),e.jsx("button",{onClick:()=>o(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})})]})})},Cb=()=>{const c=Ee(),i=re(H=>H.player),d=re(H=>H.gameDate),{updateStats:o,advanceTime:u,updateAffection:m,addItem:y,gainExperience:b,addGold:g}=re(H=>H.actions),[x,C]=j.useState(null),[p,A]=j.useState([]),[T,M]=j.useState([]),[D,v]=j.useState(null),[N,w]=j.useState({type:"",count:0}),[_,E]=j.useState(!0),k={sunny:{id:"sunny",name:"",icon:"",description:" .    .",effects:{moodModifier:10,staminaDrain:-5,encounterRate:1.2,combatModifier:5},activities:["","","","",""],bgFilter:"brightness(1.1) contrast(1.05) saturate(1.1)"},cloudy:{id:"cloudy",name:"",icon:"",description:"  .   .",effects:{moodModifier:0,staminaDrain:0},activities:["","","",""],bgFilter:"brightness(0.9) contrast(0.95)"},rainy:{id:"rainy",name:"",icon:"",description:"  .   .",effects:{movementSpeed:-20,moodModifier:-5,encounterRate:.7,cropGrowth:1.5,combatModifier:-10},particleEffect:"rain",activities:[""," ","","",""],blockedActivities:["","",""],bgFilter:"brightness(0.7) contrast(1.1) saturate(0.8)"},stormy:{id:"stormy",name:"",icon:"",description:"   .  .",effects:{movementSpeed:-50,moodModifier:-15,staminaDrain:20,encounterRate:.3,combatModifier:-25},particleEffect:"rain",activities:["","","",""],blockedActivities:["","","","",""],specialEvents:["",""],bgFilter:"brightness(0.5) contrast(1.2) saturate(0.6)"},snowy:{id:"snowy",name:"",icon:"",description:"  .   .",effects:{movementSpeed:-15,moodModifier:15,encounterRate:.8,cropGrowth:.3,fishingBonus:-20},particleEffect:"snow",activities:[" ",""," ","",""],specialEvents:[" ",""],bgFilter:"brightness(1.2) contrast(0.9) saturate(0.7)"},foggy:{id:"foggy",name:"",icon:"",description:"  .  .",effects:{movementSpeed:-10,encounterRate:1.5,moodModifier:5,combatModifier:-15},particleEffect:"fog",activities:[" "," ",""],specialEvents:[" "],bgFilter:"brightness(0.8) contrast(0.7) blur(0.5px)"},windy:{id:"windy",name:"",icon:"",description:"   .",effects:{staminaDrain:10,fishingBonus:-20,movementSpeed:-5},particleEffect:"leaves",activities:["","",""],bgFilter:"contrast(1.05)"},rainbow:{id:"rainbow",name:"",icon:"",description:"     !",effects:{moodModifier:25,encounterRate:2,fishingBonus:30},activities:["","","",""],specialEvents:[" "],bgFilter:"brightness(1.15) contrast(1.1) saturate(1.3)"},sakura:{id:"sakura",name:"",icon:"",description:" .     .",effects:{moodModifier:20,encounterRate:1.5},particleEffect:"petals",activities:[" ","","",""],specialEvents:[""," "],bgFilter:"brightness(1.1) saturate(1.2) hue-rotate(5deg)"},meteor:{id:"meteor",name:"",icon:"",description:"  .  !",effects:{moodModifier:30,encounterRate:3},activities:[" ",""," "," "],specialEvents:[" "," "],bgFilter:"brightness(0.6) contrast(1.3) saturate(1.5)"},heatwave:{id:"heatwave",name:"",icon:"",description:"  .    !",effects:{staminaDrain:25,moodModifier:-10,combatModifier:-20},activities:["",""," ",""],blockedActivities:["",""],bgFilter:"brightness(1.2) contrast(1.1) saturate(0.9) sepia(0.1)"},aurora:{id:"aurora",name:"",icon:"",description:"   .",effects:{moodModifier:35,encounterRate:2.5},activities:[" ",""," "],specialEvents:[" "," "],bgFilter:"brightness(0.7) contrast(1.2) saturate(1.5) hue-rotate(180deg)"}},R={rainbowBlessing:{id:"rainbowBlessing",name:" ",description:"     !",duration:1,effects:{luck:10},rewards:{exp:100,money:200,affection:[{character:"sakura",amount:5},{character:"luna",amount:5}]}},sakuraFestival:{id:"sakuraFestival",name:" ",description:"   !",duration:3,effects:{charm:5},rewards:{exp:200,items:["sakuraPetal","festivalTicket"],affection:[{character:"sakura",amount:10},{character:"yuki",amount:7}]}},meteorShower:{id:"meteorShower",name:" ",description:"  ?",duration:1,effects:{luck:15,intelligence:3},rewards:{exp:150,items:["starFragment"],affection:[{character:"luna",amount:15}]}},snowFestival:{id:"snowFestival",name:" ",description:"  !",duration:2,effects:{agility:3},rewards:{exp:180,money:150,items:["snowflake"],affection:[{character:"yuki",amount:12}]}}},X={spring:{season:"spring",commonWeathers:["sunny","cloudy","rainy","windy"],rareWeathers:["rainbow","sakura","foggy"],specialEvents:[""," "],seasonalBonus:{stat:"charm",value:2}},summer:{season:"summer",commonWeathers:["sunny","heatwave","cloudy","stormy"],rareWeathers:["rainbow","meteor"],specialEvents:["",""," "],seasonalBonus:{stat:"stamina",value:5}},autumn:{season:"autumn",commonWeathers:["cloudy","windy","foggy","rainy"],rareWeathers:["rainbow","aurora"],specialEvents:["","",""],seasonalBonus:{stat:"intelligence",value:2}},winter:{season:"winter",commonWeathers:["snowy","cloudy","foggy","stormy"],rareWeathers:["sunny","meteor","aurora"],specialEvents:["","",""],seasonalBonus:{stat:"defense",value:3}}},q=()=>{const H=d?.month||4;return H>=3&&H<=5?"spring":H>=6&&H<=8?"summer":H>=9&&H<=11?"autumn":"winter"},le=j.useCallback(()=>{const H=q(),f=X[H];if(N.count>=3&&Math.random()<.7){const V=Object.keys(k).filter(O=>O!==N.type),ne=V[Math.floor(Math.random()*V.length)];return k[ne]}if(Math.random()<.1){const V=f.rareWeathers[Math.floor(Math.random()*f.rareWeathers.length)];return k[V]}const z=f.commonWeathers[Math.floor(Math.random()*f.commonWeathers.length)];return k[z]},[N,q]),F=j.useCallback(()=>{const H=[];x?.id;for(let f=0;f<7;f++){const z=le();H.push(z),z.id}A(H)},[x,le]),ce=j.useCallback(H=>{const f=H.effects;if(f.moodModifier&&f.moodModifier>0){const z=["sakura","yuki","luna","akane","hana","rin","mei","sora"],V=z[Math.floor(Math.random()*z.length)];m(V,Math.floor(f.moodModifier/5))}H.specialEvents&&H.specialEvents.forEach(z=>{if(Math.random()<.3){const V=Object.values(R).find(ne=>ne.name===z);V&&v(V)}}),w(z=>({type:H.id,count:z.type===H.id?z.count+1:1})),M(z=>[...z.slice(-6),H.id])},[m]),I=j.useCallback(H=>{if(!x)return;let f={},z=[];switch(H){case" ":f={charm:2,intelligence:1},z=[{character:"sakura",amount:10}];break;case" ":f={agility:1,strength:1},z=[{character:"yuki",amount:8}];break;case" ":f={intelligence:3},z=[{character:"luna",amount:12}];break;case"":f={luck:5};break;case"":f={stamina:3,agility:2};break;case"":f={intelligence:2,maxMp:5};break;case"":f={charm:2},z=[{character:"mei",amount:5}];break;default:f={charm:1}}const V=X[q()];V.seasonalBonus&&(f[V.seasonalBonus.stat]=(f[V.seasonalBonus.stat]||0)+V.seasonalBonus.value),o(f),z.forEach(ne=>m(ne.character,ne.amount)),b(20+Math.floor(Math.random()*30)),u()},[x,q,o,m,b,u]),G=j.useCallback(()=>{D&&(D.rewards&&(D.rewards.exp&&b(D.rewards.exp),D.rewards.money&&g(D.rewards.money),D.rewards.items&&D.rewards.items.forEach(H=>y(H)),D.rewards.affection&&D.rewards.affection.forEach(H=>m(H.character,H.amount))),D.effects&&o(D.effects),v(null))},[D,b,g,y,m,o]);j.useEffect(()=>{const H=le();C(H),F(),ce(H)},[i.day]);const B=()=>{if(!x?.particleEffect||!_)return null;const H=50,f=[];for(let z=0;z<H;z++){const V=Math.random()*5,ne=3+Math.random()*2,O=Math.random()*20+10,J={position:"absolute",left:`${Math.random()*100}%`,top:"-20px",animation:`fall ${ne}s linear ${V}s infinite`};switch(x.particleEffect){case"rain":f.push(e.jsx("div",{style:{...J,width:"2px",height:`${O}px`,background:"linear-gradient(to bottom, transparent, #6B7FD7)",opacity:.3}},z));break;case"snow":f.push(e.jsx("div",{style:{...J,fontSize:`${O}px`,opacity:.7,animation:`fall ${ne*2}s linear ${V}s infinite`},children:""},z));break;case"petals":f.push(e.jsx("div",{style:{...J,fontSize:`${O}px`,color:"#FFC0CB",opacity:.6,animation:`fall-rotate ${ne*1.5}s linear ${V}s infinite`},children:""},z));break;case"leaves":f.push(e.jsx("div",{style:{...J,fontSize:`${O}px`,color:"#FF8C00",opacity:.5,animation:`fall-rotate ${ne*1.5}s linear ${V}s infinite`},children:""},z));break}}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none z-40 overflow-hidden",children:f}),e.jsx("style",{children:`
          @keyframes fall {
            to {
              transform: translateY(100vh);
            }
          }
          @keyframes fall-rotate {
            to {
              transform: translateY(100vh) rotate(360deg);
            }
          }
        `})]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 via-blue-800 to-background p-4",style:{filter:x?.bgFilter},children:[B(),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-2",children:"  &  "}),e.jsx("p",{className:"text-text-secondary",children:"     !"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>E(!_),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:_?"  ON":"  OFF"}),e.jsx("button",{onClick:()=>c("/game"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})]})}),D&&e.jsx("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 rounded-lg p-4 mb-6 animate-pulse",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h2",{className:"text-2xl font-bold",children:D.name}),e.jsx("p",{children:D.description})]}),e.jsx("button",{onClick:G,className:"px-6 py-3 bg-white text-orange-600 rounded-lg font-bold hover:bg-yellow-100 transition",children:""})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[x&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-800/50 to-purple-800/50 backdrop-blur-md rounded-xl p-6 border border-blue-400",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-7xl",children:x.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:x.name}),e.jsx("p",{className:"text-gray-300",children:x.description}),e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[q()==="spring"&&" ",q()==="summer"&&" ",q()==="autumn"&&" ",q()==="winter"&&" ","  Day ",i.day]})]})]}),N.count>=3&&e.jsx("div",{className:"bg-purple-500/20 rounded-lg px-3 py-1 border border-purple-500/50",children:e.jsxs("span",{className:"text-purple-300 text-sm",children:[N.count," "]})})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:Object.entries(x.effects).map(([H,f])=>{const z={moodModifier:" ",movementSpeed:" ",staminaDrain:" ",encounterRate:"  ",cropGrowth:"  ",fishingBonus:" ",combatModifier:" "};return e.jsxs("div",{className:"flex items-center justify-between bg-blue-900/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-gray-300",children:z[H]}),e.jsxs("span",{className:f>0?"text-green-400 font-bold":f<0?"text-red-400 font-bold":"text-gray-400",children:[f>0?"+":"",typeof f=="number"?f:`x${f}`,H.includes("Bonus")||H.includes("Speed")||H.includes("Rate")?"%":""]})]},H)})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"  "}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:x.activities.map(H=>e.jsx("button",{onClick:()=>I(H),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white transition-all hover:scale-105",children:H},H))})]}),x.blockedActivities&&x.blockedActivities.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"  "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.blockedActivities.map(H=>e.jsx("div",{className:"px-4 py-2 bg-red-900/30 rounded-lg text-red-400 line-through",children:H},H))})]})]})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[T.filter(H=>H==="sunny").length,""]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[T.filter(H=>H==="rainy").length,""]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[T.filter(H=>["rainbow","sakura","meteor","aurora"].includes(H)).length,""]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-yellow-400",children:[N.count,""]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-400 mb-4",children:"  "}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:p.map((H,f)=>e.jsxs("div",{className:`flex items-center justify-between bg-blue-900/30 rounded-lg p-2 ${["rainbow","sakura","meteor","aurora"].includes(H.id)?"ring-2 ring-yellow-400":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:H.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white",children:H.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Day ",i.day+f+1]})]})]}),["rainbow","sakura","meteor","aurora"].includes(H.id)&&e.jsx("span",{className:"text-xs bg-yellow-500/20 px-2 py-1 rounded text-yellow-300",children:""})]},f))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/50 to-pink-900/50 rounded-lg p-6 border border-purple-400",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:[q()==="spring"&&" ",q()==="summer"&&" ",q()==="autumn"&&" ",q()==="winter"&&" "]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("div",{className:"font-bold text-white mb-1",children:" "}),e.jsxs("div",{className:"bg-black/30 rounded px-2 py-1",children:[X[q()].seasonalBonus.stat," +",X[q()].seasonalBonus.value]})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("div",{className:"font-bold text-white mb-1",children:" "}),X[q()].specialEvents.map(H=>e.jsxs("div",{className:"bg-black/30 rounded px-2 py-1 mb-1",children:[" ",H]},H))]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-900/50 to-blue-900/50 rounded-lg p-4 border border-green-400",children:[e.jsx("h3",{className:"text-lg font-bold text-green-400 mb-3",children:"  "}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-2",children:[e.jsx("li",{children:"       "}),e.jsx("li",{children:"         "}),e.jsx("li",{children:"   3     "}),e.jsx("li",{children:"      "}),e.jsx("li",{children:" , ,    "})]})]})]})]})]})]})},Mb=()=>{const c=Ee(),i=re(G=>G.player),{updateStats:d,addItem:o,gainExperience:u,addGold:m,updatePlayer:y}=re(G=>G.actions),[b,g]=j.useState([]),[x,C]=j.useState("all"),[p,A]=j.useState(null),[T,M]=j.useState(!1),[D,v]=j.useState(0),[N,w]=j.useState(""),[_,E]=j.useState([]),[k,R]=j.useState("all"),X=[{id:"first_meeting",name:" ",description:"  ",icon:"",category:"story",tier:"bronze",progress:i.metHeroines?.length||0,maxProgress:1,completed:(i.metHeroines?.length||0)>=1,claimedReward:!1,reward:{exp:50,points:10},condition:{type:"meet_heroine",value:1}},{id:"all_heroines_met",name:" ",description:"  ",icon:"",category:"story",tier:"gold",progress:i.metHeroines?.length||0,maxProgress:9,completed:(i.metHeroines?.length||0)>=9,claimedReward:!1,reward:{exp:500,money:1e3,title:"",points:100},condition:{type:"meet_heroine",value:9}},{id:"true_love",name:" ",description:"     ",icon:"",category:"story",tier:"platinum",progress:Math.max(...Object.values(i.affection||{})),maxProgress:100,completed:Math.max(...Object.values(i.affection||{}))>=100,claimedReward:!1,reward:{exp:1e3,items:["loveRing"],title:"",points:200},condition:{type:"max_affection",value:100}},{id:"harem_master",name:" ",description:"5   80 ",icon:"",category:"story",tier:"diamond",progress:Object.values(i.affection||{}).filter(G=>G>=80).length,maxProgress:5,completed:Object.values(i.affection||{}).filter(G=>G>=80).length>=5,claimedReward:!1,reward:{exp:2e3,money:5e3,title:"",skin:"golden_uniform",points:500},condition:{type:"multiple_affection",value:5},hiddenUntilProgress:3},{id:"first_victory",name:" ",description:"  ",icon:"",category:"combat",tier:"bronze",progress:i.statistics?.monstersDefeated||0,maxProgress:1,completed:(i.statistics?.monstersDefeated||0)>=1,claimedReward:!1,reward:{exp:30,money:50,points:10},condition:{type:"defeat_monster",value:1}},{id:"monster_hunter",name:" ",description:"100  ",icon:"",category:"combat",tier:"silver",progress:i.statistics?.monstersDefeated||0,maxProgress:100,completed:(i.statistics?.monstersDefeated||0)>=100,claimedReward:!1,reward:{exp:300,items:["hunterBadge"],points:50},condition:{type:"defeat_monster",value:100}},{id:"boss_slayer",name:" ",description:"10   ",icon:"",category:"combat",tier:"gold",progress:i.defeatedBosses?.length||0,maxProgress:10,completed:(i.defeatedBosses?.length||0)>=10,claimedReward:!1,reward:{exp:800,items:["legendaryWeapon"],title:"",points:100},condition:{type:"defeat_boss",value:10}},{id:"undefeated",name:" ",description:" 50",icon:"",category:"combat",tier:"platinum",progress:i.statistics?.winStreak||0,maxProgress:50,completed:(i.statistics?.winStreak||0)>=50,claimedReward:!1,reward:{exp:1500,stats:{strength:10,defense:10},title:"",points:200},condition:{type:"win_streak",value:50}},{id:"popular",name:"",description:"  300 ",icon:"",category:"social",tier:"silver",progress:Object.values(i.affection||{}).reduce((G,B)=>G+B,0),maxProgress:300,completed:Object.values(i.affection||{}).reduce((G,B)=>G+B,0)>=300,claimedReward:!1,reward:{exp:200,stats:{charm:5},points:50},condition:{type:"total_affection",value:300}},{id:"gift_giver",name:" ",description:"50  ",icon:"",category:"social",tier:"silver",progress:i.statistics?.giftsGiven||0,maxProgress:50,completed:(i.statistics?.giftsGiven||0)>=50,claimedReward:!1,reward:{exp:250,money:500,points:50},condition:{type:"give_gifts",value:50}},{id:"club_president",name:" ",description:"3  ",icon:"",category:"social",tier:"gold",progress:i.joinedClubs?.length||0,maxProgress:3,completed:(i.joinedClubs?.length||0)>=3,claimedReward:!1,reward:{exp:400,stats:{intelligence:5,charm:3},points:100},condition:{type:"join_clubs",value:3}},{id:"explorer",name:"",description:"  ",icon:"",category:"exploration",tier:"silver",progress:i.visitedLocations?.length||0,maxProgress:15,completed:(i.visitedLocations?.length||0)>=15,claimedReward:!1,reward:{exp:300,items:["explorerMap"],points:50},condition:{type:"visit_locations",value:15}},{id:"dungeon_master",name:" ",description:"  ",icon:"",category:"exploration",tier:"gold",progress:i.dungeonProgress?.maxFloorReached||1,maxProgress:50,completed:(i.dungeonProgress?.maxFloorReached||1)>=50,claimedReward:!1,reward:{exp:1e3,items:["dungeonKey"],title:" ",points:100},condition:{type:"dungeon_floor",value:50}},{id:"treasure_hunter",name:" ",description:"30   ",icon:"",category:"exploration",tier:"silver",progress:i.statistics?.treasuresFound||0,maxProgress:30,completed:(i.statistics?.treasuresFound||0)>=30,claimedReward:!1,reward:{exp:400,money:1e3,points:50},condition:{type:"find_treasure",value:30}},{id:"collector",name:"",description:"50  ",icon:"",category:"collection",tier:"silver",progress:i.collectedItems?.length||0,maxProgress:50,completed:(i.collectedItems?.length||0)>=50,claimedReward:!1,reward:{exp:350,items:["collectorBadge"],points:50},condition:{type:"collect_items",value:50}},{id:"fashion_master",name:" ",description:"10  ",icon:"",category:"collection",tier:"gold",progress:i.collectedOutfits?.length||0,maxProgress:10,completed:(i.collectedOutfits?.length||0)>=10,claimedReward:!1,reward:{exp:500,skin:"designer_outfit",points:100},condition:{type:"collect_outfits",value:10}},{id:"card_master",name:" ",description:"   ",icon:"",category:"collection",tier:"platinum",progress:i.collectedCards?.length||0,maxProgress:45,completed:(i.collectedCards?.length||0)>=45,claimedReward:!1,reward:{exp:1200,items:["goldenCard"],title:" ",points:200},condition:{type:"collect_cards",value:45}},{id:"perfect_day",name:" ",description:"   ",icon:"",category:"special",tier:"gold",progress:i.statistics?.perfectDays||0,maxProgress:1,completed:(i.statistics?.perfectDays||0)>=1,claimedReward:!1,reward:{exp:600,stats:{luck:10},points:100},condition:{type:"perfect_day",value:1}},{id:"minigame_champion",name:" ",description:"    ",icon:"",category:"special",tier:"platinum",progress:i.statistics?.minigameHighScores||0,maxProgress:6,completed:(i.statistics?.minigameHighScores||0)>=6,claimedReward:!1,reward:{exp:1500,money:2e3,title:" ",points:200},condition:{type:"minigame_master",value:6}},{id:"true_ending",name:"",description:"  ",icon:"",category:"special",tier:"diamond",progress:i.unlockedEndings?.includes("true")?1:0,maxProgress:1,completed:i.unlockedEndings?.includes("true")||!1,claimedReward:!1,reward:{exp:5e3,items:["infinityGem"],title:"",skin:"legendary_outfit",points:500},condition:{type:"true_ending",value:1},hiddenUntilProgress:1},{id:"all_endings",name:" ",description:"  ",icon:"",category:"special",tier:"diamond",progress:i.unlockedEndings?.length||0,maxProgress:10,completed:(i.unlockedEndings?.length||0)>=10,claimedReward:!1,reward:{exp:3e3,items:["memoryBook"],title:"",points:500},condition:{type:"all_endings",value:10},hiddenUntilProgress:5},{id:"speedrun",name:"",description:"15   ",icon:"",category:"special",tier:"platinum",progress:i.speedrunDays||999,maxProgress:15,completed:(i.speedrunDays||999)<=15,claimedReward:!1,reward:{exp:2e3,stats:{agility:20},title:"",points:200},condition:{type:"speedrun",value:15}}],q=[{id:"all",name:"",icon:"",color:"gray",achievements:X},{id:"story",name:"",icon:"",color:"purple",achievements:X.filter(G=>G.category==="story")},{id:"combat",name:"",icon:"",color:"red",achievements:X.filter(G=>G.category==="combat")},{id:"social",name:"",icon:"",color:"pink",achievements:X.filter(G=>G.category==="social")},{id:"exploration",name:"",icon:"",color:"blue",achievements:X.filter(G=>G.category==="exploration")},{id:"collection",name:"",icon:"",color:"yellow",achievements:X.filter(G=>G.category==="collection")},{id:"special",name:"",icon:"",color:"orange",achievements:X.filter(G=>G.category==="special")}],le=G=>G>=5e3?"":G>=3e3?"":G>=2e3?"":G>=1e3?"":G>=500?"":G>=200?"":G>=50?"":"",F=G=>{switch(G){case"bronze":return"from-orange-600 to-orange-400";case"silver":return"from-gray-400 to-gray-300";case"gold":return"from-yellow-500 to-yellow-400";case"platinum":return"from-blue-400 to-blue-300";case"diamond":return"from-purple-500 to-pink-500";default:return"from-gray-600 to-gray-500"}},ce=G=>{if(!G.completed||G.claimedReward)return;M(!0);const B=G.reward;B.exp&&u(B.exp),B.money&&m(B.money),B.items&&B.items.forEach(f=>o(f)),B.stats&&d(B.stats),B.title&&y({currentTitle:B.title}),B.skin&&y({unlockedSkins:[...i.unlockedSkins||[],B.skin]});const H=b.map(f=>f.id===G.id?{...f,claimedReward:!0}:f);g(H),v(f=>f+B.points),setTimeout(()=>{M(!1),A(null)},2e3)};j.useEffect(()=>{const G=[];X.forEach(H=>{H.completed&&!i.achievements?.includes(H.id)&&G.push(H.id)}),E(G),g(X);const B=X.filter(H=>H.completed&&H.claimedReward).reduce((H,f)=>H+f.reward.points,0);v(i.achievementPoints||B),w(le(i.achievementPoints||B))},[i]);const I=()=>{let B=q.find(H=>H.id===x)?.achievements||[];return k==="completed"?B=B.filter(H=>H.completed):k==="incomplete"&&(B=B.filter(H=>!H.completed)),B=B.filter(H=>H.hiddenUntilProgress?H.progress>=H.hiddenUntilProgress:!0),B};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent mb-2",children:"  & "}),e.jsx("p",{className:"text-text-secondary",children:"     !"})]}),e.jsx("button",{onClick:()=>c("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-800/50 to-blue-800/50 backdrop-blur-md rounded-lg p-6 mb-6 border border-purple-400",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:D}),e.jsx("div",{className:"text-sm text-gray-300",children:" "})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:N}),e.jsx("div",{className:"text-sm text-gray-300",children:" "})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:[b.filter(G=>G.completed).length,"/",b.length]}),e.jsx("div",{className:"text-sm text-gray-300",children:" "})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:[Math.round(b.filter(G=>G.completed).length/b.length*100),"%"]}),e.jsx("div",{className:"text-sm text-gray-300",children:""})]})]})}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-4 mb-6 border border-purple-500",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:q.map(G=>e.jsxs("button",{onClick:()=>C(G.id),className:`px-4 py-2 rounded-lg font-bold transition ${x===G.id?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[G.icon," ",G.name,e.jsxs("span",{className:"ml-2 text-xs",children:["(",G.achievements.filter(B=>B.completed).length,"/",G.achievements.length,")"]})]},G.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>R("all"),className:`px-3 py-1 rounded text-sm ${k==="all"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>R("completed"),className:`px-3 py-1 rounded text-sm ${k==="completed"?"bg-green-600 text-white":"bg-gray-700 text-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>R("incomplete"),className:`px-3 py-1 rounded text-sm ${k==="incomplete"?"bg-red-600 text-white":"bg-gray-700 text-gray-300"}`,children:""})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I().map(G=>e.jsxs("div",{className:`bg-gradient-to-br ${G.completed?"from-green-900/50 to-blue-900/50":"from-gray-900/50 to-gray-800/50"} backdrop-blur-md rounded-lg p-4 border ${G.completed?"border-green-500":"border-gray-600"} ${_.includes(G.id)?"animate-pulse ring-2 ring-yellow-400":""}
              hover:scale-[1.02] transition-all cursor-pointer`,onClick:()=>A(G),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"text-4xl",children:G.icon}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold bg-gradient-to-r ${F(G.tier)} text-white`,children:G.tier.toUpperCase()})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:G.name}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:G.description}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[G.progress,"/",G.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${G.completed?"bg-gradient-to-r from-green-500 to-blue-500":"bg-gradient-to-r from-yellow-500 to-orange-500"}`,style:{width:`${Math.min(G.progress/G.maxProgress*100,100)}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["+",G.reward.points," pts"]}),G.completed&&!G.claimedReward&&e.jsx("button",{onClick:B=>{B.stopPropagation(),ce(G)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-xs rounded font-bold animate-bounce",children:" "}),G.completed&&G.claimedReward&&e.jsx("span",{className:"text-xs text-green-400",children:"  "})]})]},G.id))}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`bg-gradient-to-br from-purple-900 to-blue-900 rounded-xl p-6 max-w-md w-full border-2 ${p.completed?"border-green-500":"border-gray-500"}`,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:p.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:p.name}),e.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm font-bold bg-gradient-to-r ${F(p.tier)} text-white mt-2`,children:p.tier.toUpperCase()})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:p.description}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-white mb-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"font-bold",children:[p.progress,"/",p.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${p.completed?"bg-gradient-to-r from-green-500 to-blue-500":"bg-gradient-to-r from-yellow-500 to-orange-500"}`,style:{width:`${Math.min(p.progress/p.maxProgress*100,100)}%`}})})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:""}),e.jsxs("div",{className:"space-y-1 text-sm",children:[p.reward.exp&&e.jsxs("div",{className:"text-yellow-300",children:["  +",p.reward.exp]}),p.reward.money&&e.jsxs("div",{className:"text-green-300",children:["  +",p.reward.money]}),p.reward.items&&e.jsxs("div",{className:"text-blue-300",children:[" : ",p.reward.items.join(", ")]}),p.reward.stats&&e.jsxs("div",{className:"text-purple-300",children:["  : ",Object.entries(p.reward.stats).map(([G,B])=>`${G} +${B}`).join(", ")]}),p.reward.title&&e.jsxs("div",{className:"text-pink-300",children:[" : ",p.reward.title]}),p.reward.skin&&e.jsxs("div",{className:"text-orange-300",children:[" : ",p.reward.skin]}),e.jsxs("div",{className:"text-white font-bold",children:["   +",p.reward.points]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[p.completed&&!p.claimedReward?e.jsx("button",{onClick:()=>ce(p),className:"flex-1 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white rounded-lg font-bold transition animate-pulse",children:" "}):p.completed?e.jsx("div",{className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-bold text-center",children:"  "}):e.jsx("div",{className:"flex-1 py-3 bg-gray-600 text-gray-400 rounded-lg font-bold text-center",children:""}),e.jsx("button",{onClick:()=>A(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[60] pointer-events-none",children:e.jsx("div",{className:"text-6xl animate-bounce",children:""})})]})})},Eb={greetings:{morning:[" !    ."," , ?"," ?     .","  .   ?"],afternoon:["  .  ?"," ?   .","   ...   ."],evening:[" .  .","  .","  ... ,  !"],night:["    ?"," ?  .","  .  ?"]},mood_dialogues:{happy:["   !  .","   !","    !"],sad:["...   .","    .","  ..."],angry:["   .","  !","   ?"],shy:["...   ?"," ...","   !"],love:["  .","   .","...    ?"]},activity_responses:{study:["    !","   .","   ?"],training:["!   !","    .","  !"],date:[", ...?  ... , .","   . .","...     ."],gift:["...   ? !","  .   ."," .  ."]},special_events:{birthday:"    ... .",festival:" ...   .",confession:"...   . , .",first_kiss:"...  ...   ."}},_b={greetings:{morning:[" ~    ?","  . ?"," !    .","  .    ."],afternoon:["  ...   .","  ?  ~","   ..."],evening:["  .","  .","      ."],night:["  . ?"," .   ?","  ...  ?"]},mood_dialogues:{happy:["     !","   !","  ~"],sad:["    ...","    ...","...?"],angry:["   !"," ... ...","   ?"],shy:[", ...    .","  ...?","    !"],love:["    .","  .","    ."]},activity_responses:{study:["  ?  !","   !","   ."],training:[" ? ! !","  !","   !"],date:["   !","  ... .","    ."],gift:["!  ! !","     ?"," !  !"]},special_events:{birthday:"    !",festival:"    . ?",confession:"  ... .",first_kiss:"...  ?"}},Ab={greetings:{morning:["...  ... ..."," ... ...","...  ...","   ..."],afternoon:["  ...","   ...","  ... Zzz..."],evening:["    .","   .","  ... ."],night:["  ."," ...  ?","  .  ?"]},mood_dialogues:{happy:["  ...  .","     .","...   ."],sad:[" ...","...   .","   ..."],angry:["... .","     ?","  ..."],shy:[", ...  ...","   ...?","   ..."],love:[" ...   .","...  .","...   ."]},activity_responses:{study:["... ...  ...","  .","  ..."],training:[" ... .","  ."," ..."],date:["...  ...","  .","     ."],gift:["... .  .","...  ."," ... ."]},special_events:{birthday:"...   .",festival:"...   .",confession:"...   .",first_kiss:"...  ..."}},Tb={greetings:{morning:[" !  !","  !","   ?","    !"],afternoon:[" ?  !"," !","?   !"],evening:["   !","  ?"," !"],night:["   !","  ?","  !"]},mood_dialogues:{happy:[" ! !","   !","  !"],sad:["...  .","   .","...?"],angry:[" !","  !","  !"],shy:[", ... !"," ?","    ?"],love:["   !","   ?"," !"]}},Db={greetings:{morning:[" ~   ?","   ."," .","   ."]},mood_dialogues:{happy:["   .","   ."," ."]}},Rb={greetings:{morning:[",  .","   .","    ?"]},mood_dialogues:{happy:["   . .","  ?"," ,  ."]}},zb={greetings:{morning:[" !   ?"," !","  ?"]},mood_dialogues:{happy:["    !","     !","  !"]}},Ob={greetings:{morning:["    ."," ... .","   ?"]},mood_dialogues:{happy:["  !","   ."," ."]}},Hb={weather_reactions:{sunny:["  !","   !"," ."],rainy:["     ."," ?","   ."],snowy:["! !","   ."," ?"]},item_reactions:{flower:"!  !",chocolate:"!  !",book:"!  ?",accessory:"?  !",food:" !  !"},relationship_milestones:{10:"  . .",25:"  .",50:"    .",75:"  .",90:"...  .",100:".  ."}},Zl={sakura:Eb,yuki:_b,luna:Ab,akane:Tb,hana:Db,rin:Rb,mei:zb,sora:Ob,common:Hb},Lb=()=>{const c=Ee(),i=re(f=>f.player),d=re(f=>f.currentWeather),{updateAffection:o,advanceTime:u,addItem:m,updateStats:y}=re(f=>f.actions),[b,g]=j.useState(null),[x,C]=j.useState(""),[p,A]=j.useState([]),[T,M]=j.useState("neutral"),[D,v]=j.useState([]),[N,w]=j.useState(null),[_,E]=j.useState(""),[k,R]=j.useState(!1),X=za,q=j.useCallback(f=>{const z=i.affection[f]||0,V=D.filter(O=>O.characterId===f&&O.dialogue.includes("")).slice(-1)[0],ne=D.filter(O=>O.characterId===f&&new Date().getTime()-new Date(O.timestamp).getTime()<864e5);return z>=80?"love":z>=60&&ne.length>3?"happy":V&&new Date().getTime()-new Date(V.timestamp).getTime()<36e5?"shy":ne.length===0?"sad":z>=40?"happy":(z<20,"neutral")},[i.affection,D]),le=j.useCallback(f=>{const z=Zl[f.characterId];if(!z)return"...";let V=[];if(f.specialEvent&&z.special_events?.[f.specialEvent])return z.special_events[f.specialEvent];f.mood&&z.mood_dialogues?.[f.mood]&&(V=[...z.mood_dialogues[f.mood]]),z.greetings?.[f.timeOfDay]&&(V=[...V,...z.greetings[f.timeOfDay]]),f.weather&&Zl.common?.weather_reactions?.[f.weather]&&(V=[...V,...Zl.common.weather_reactions[f.weather]]);const ne=Zl.common?.relationship_milestones;if(ne){const O=Object.keys(ne).map(Number).sort((Q,J)=>J-Q);for(const Q of O)if(f.affection>=Q){V.push(ne[Q]);break}}return V.length===0&&(V=Object.values(z.greetings||{}).flat()),V[Math.floor(Math.random()*V.length)]||"..."},[]),F=j.useCallback((f,z)=>{const V=[];return V.push({text:",  ?",response:",   .",affectionChange:1}),V.push({text:"  ?",response:"  .",affectionChange:2}),z>=20&&V.push({text:" ?",response:",  .",affectionChange:3,unlockCondition:{minAffection:20}}),z>=40&&V.push({text:"  .",response:",   ?",affectionChange:5,moodChange:"shy",unlockCondition:{minAffection:40}}),z>=60&&V.push({text:"!",response:",  ?",affectionChange:7,moodChange:"happy",unlockCondition:{minAffection:60}}),z>=80&&V.push({text:"",response:"... .",affectionChange:10,moodChange:"love",unlockCondition:{minAffection:80}}),i.inventory?.includes("flower")&&V.push({text:"  ",response:",  ! !",affectionChange:8,moodChange:"happy",unlockCondition:{item:"flower"}}),i.inventory?.includes("chocolate")&&V.push({text:"  ",response:"  !  ?",affectionChange:10,moodChange:"love",unlockCondition:{item:"chocolate"}}),i.stats?.charm>=30&&V.push({text:"() ",response:",    ?",affectionChange:6,moodChange:"shy",unlockCondition:{minStat:{stat:"charm",value:30}}}),i.stats?.intelligence>=30&&V.push({text:"()  ",response:"...  .",affectionChange:7,moodChange:"happy",unlockCondition:{minStat:{stat:"intelligence",value:30}}}),V},[i]),ce=j.useCallback(f=>{if(!b)return;if(f.unlockCondition){if(f.unlockCondition.minAffection&&(i.affection[b]||0)<f.unlockCondition.minAffection){C("(  )");return}if(f.unlockCondition.minStat&&i.stats[f.unlockCondition.minStat.stat]<f.unlockCondition.minStat.value){C(`(${f.unlockCondition.minStat.stat}() )`);return}if(f.unlockCondition.item&&!i.inventory?.includes(f.unlockCondition.item)){C("(  )");return}}o(b,f.affectionChange),f.moodChange&&(M(f.moodChange),w(f.moodChange),setTimeout(()=>w(null),2e3)),f.unlockCondition?.item;const z={characterId:b,dialogue:f.text,response:f.response,timestamp:new Date,affectionChange:f.affectionChange};v(ne=>[...ne,z]),C(f.response);const V=(i.affection[b]||0)+f.affectionChange;I(b,V),u()},[b,i,o,u]),I=j.useCallback((f,z)=>{const V=[10,25,50,75,90,100],ne=i.affection[f]||0;for(const O of V)if(ne<O&&z>=O){R(!0),C(Zl.common.relationship_milestones[O]),O===50?m(`${f}_photo`):O===100&&(m(`${f}_ring`),y({charm:10,luck:10}));break}},[i.affection,m,y]),G=j.useCallback(f=>f>=100?" ":f>=90?"  ":f>=75?" ":f>=50?"  ":f>=25?" ":f>=10?"  ":"  ",[]),B=j.useCallback(f=>{g(f);const z={characterId:f,timeOfDay:i.timeOfDay,weather:d,location:i.location,affection:i.affection[f]||0,mood:q(f),playerStats:i.stats},V=le(z);C(V),M(z.mood||"neutral"),E(G(z.affection)),A(F(f,z.affection))},[i,d,q,le,G,F]),H=({emotion:f})=>{const z={happy:"",sad:"",angry:"",shy:"",love:"",neutral:""};return e.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 text-5xl animate-bounce",children:z[f]})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-900 via-purple-900 to-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-pink-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:"  "}),e.jsx("button",{onClick:()=>c("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-pink-500",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.entries(X).map(([f,z])=>{const V=i.affection[f]||0;return i.unlockedCharacters?.includes(f)?e.jsx("button",{onClick:()=>B(f),className:`w-full p-3 rounded-lg transition ${b===f?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:z.icon}),e.jsx("span",{className:"font-bold",children:z.name})]}),e.jsx("div",{className:"text-sm",children:e.jsxs("div",{className:"text-pink-300",children:[" ",V]})})]})},f):null})})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:" "}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:D.slice(-5).reverse().map((f,z)=>e.jsxs("div",{className:"text-sm bg-purple-900/30 rounded p-2",children:[e.jsxs("div",{className:"text-gray-400 text-xs",children:[X[f.characterId]?.name," - ",new Date(f.timestamp).toLocaleTimeString()]}),e.jsx("div",{className:"text-white",children:f.dialogue}),f.affectionChange&&e.jsxs("div",{className:"text-pink-300 text-xs",children:[" +",f.affectionChange]})]},z))})]})]}),e.jsx("div",{className:"lg:col-span-2",children:b?e.jsxs("div",{className:"bg-gradient-to-br from-pink-800/50 to-purple-800/50 backdrop-blur-md rounded-lg p-6 border border-pink-400",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-6xl",children:X[b].icon}),N&&e.jsx(H,{emotion:N})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:X[b].name}),e.jsx("div",{className:"text-sm text-gray-300",children:X[b].title}),e.jsx("div",{className:"text-sm text-pink-300 mt-1",children:_})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg text-pink-400",children:[" ",i.affection[b]||0,"/100"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[": ",T]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-6 mb-6 min-h-[150px]",children:[e.jsx("p",{className:"text-lg text-white leading-relaxed",children:x}),k&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-500/20 rounded border border-yellow-500",children:e.jsx("span",{className:"text-yellow-300 font-bold",children:"  !"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:""}),p.map((f,z)=>{const V=f.unlockCondition&&(f.unlockCondition.minAffection&&(i.affection[b]||0)<f.unlockCondition.minAffection||f.unlockCondition.minStat&&i.stats[f.unlockCondition.minStat.stat]<f.unlockCondition.minStat.value||f.unlockCondition.item&&!i.inventory?.includes(f.unlockCondition.item));return e.jsx("button",{onClick:()=>!V&&ce(f),className:`w-full p-3 rounded-lg text-left transition ${V?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white"}`,disabled:V,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:f.text}),e.jsxs("div",{className:"text-sm",children:[f.unlockCondition&&e.jsxs("span",{className:"text-xs",children:[f.unlockCondition.minAffection&&` ${f.unlockCondition.minAffection}`,f.unlockCondition.minStat&&` ${f.unlockCondition.minStat.stat} ${f.unlockCondition.minStat.value}`,f.unlockCondition.item&&` ${f.unlockCondition.item}`]}),e.jsxs("span",{className:"ml-2 text-pink-300",children:["+",f.affectionChange]})]})]})},z)})]})]}):e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-12 border border-pink-500 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" "}),e.jsx("p",{className:"text-gray-400",children:"       ."})]})})]})]})})},Bb=()=>{const c=Ee(),i=re(R=>R.player),{updateAffection:d,updateMoney:o,advanceTime:u,addItem:m}=re(R=>R.actions),[y,b]=j.useState(null),[g,x]=j.useState(null),[C,p]=j.useState([]),[A,T]=j.useState(null),[M,D]=j.useState({}),v=[{id:"rose",name:"",icon:"",description:" ",category:"flower",price:50,rarity:"common"},{id:"sakura_petal",name:"",icon:"",description:" ",category:"flower",price:60,rarity:"uncommon"},{id:"sunflower",name:"",icon:"",description:" ",category:"flower",price:40,rarity:"common"},{id:"blue_rose",name:" ",icon:"",description:" ",category:"flower",price:200,rarity:"rare"},{id:"rainbow_flower",name:" ",icon:"",description:"  ",category:"flower",price:500,rarity:"legendary"},{id:"chocolate",name:"",icon:"",description:" ",category:"food",price:30,rarity:"common"},{id:"cake",name:"",icon:"",description:"  ",category:"food",price:80,rarity:"uncommon"},{id:"cookies",name:"",icon:"",description:" ",category:"food",price:25,rarity:"common"},{id:"tea_set",name:" ",icon:"",description:"  ",category:"food",price:150,rarity:"uncommon"},{id:"bento",name:"",icon:"",description:" ",category:"food",price:45,rarity:"common"},{id:"rare_wine",name:" ",icon:"",description:"100 ",category:"food",price:1e3,rarity:"legendary"},{id:"necklace",name:"",icon:"",description:" ",category:"accessory",price:200,rarity:"uncommon"},{id:"bracelet",name:"",icon:"",description:" ",category:"accessory",price:150,rarity:"uncommon"},{id:"earrings",name:"",icon:"",description:" ",category:"accessory",price:180,rarity:"uncommon"},{id:"hair_pin",name:"",icon:"",description:" ",category:"accessory",price:60,rarity:"common"},{id:"ring",name:"",icon:"",description:"  ",category:"accessory",price:500,rarity:"rare"},{id:"crown",name:"",icon:"",description:" ",category:"accessory",price:2e3,rarity:"legendary"},{id:"novel",name:"",icon:"",description:" ",category:"book",price:40,rarity:"common"},{id:"manga",name:"",icon:"",description:" ",category:"book",price:35,rarity:"common"},{id:"poetry",name:"",icon:"",description:" ",category:"book",price:45,rarity:"common"},{id:"magic_tome",name:"",icon:"",description:" ",category:"book",price:300,rarity:"rare"},{id:"diary",name:"",icon:"",description:"  ",category:"book",price:70,rarity:"uncommon"},{id:"teddy_bear",name:"",icon:"",description:" ",category:"toy",price:50,rarity:"common"},{id:"doll",name:"",icon:"",description:" ",category:"toy",price:80,rarity:"uncommon"},{id:"puzzle",name:"",icon:"",description:"1000 ",category:"toy",price:60,rarity:"common"},{id:"music_box",name:"",icon:"",description:"  ",category:"toy",price:150,rarity:"uncommon"},{id:"crystal_ball",name:"",icon:"",description:" ",category:"toy",price:250,rarity:"rare"},{id:"love_letter",name:"",icon:"",description:"  ",category:"special",price:0,rarity:"uncommon",obtainMethod:" "},{id:"photo_album",name:"",icon:"",description:"  ",category:"special",price:100,rarity:"uncommon"},{id:"handmade_gift",name:" ",icon:"",description:"  ",category:"special",price:0,rarity:"rare",obtainMethod:""},{id:"promise_ring",name:" ",icon:"",description:"  ",category:"special",price:1e3,rarity:"legendary"},{id:"star_fragment",name:"",icon:"",description:"  ",category:"special",price:0,rarity:"legendary",obtainMethod:" "}],N=[{characterId:"sakura",loves:["rose","ring","promise_ring","handmade_gift"],likes:["sunflower","chocolate","hair_pin","teddy_bear"],neutral:["novel","cookies","bracelet"],dislikes:["magic_tome","crystal_ball","rare_wine"],hates:["doll","poetry"],specialReactions:{sakura_petal:"...?   .    ?",blue_rose:" ...    ?",love_letter:"...  ? ... ."},birthdayGift:"cake"},{characterId:"yuki",loves:["magic_tome","crystal_ball","blue_rose","star_fragment"],likes:["chocolate","music_box","necklace","tea_set"],neutral:["novel","puzzle","earrings"],dislikes:["sunflower","bento","teddy_bear"],hates:["rare_wine","crown"],specialReactions:{rainbow_flower:" !   !",diary:"?    !",handmade_gift:"  ?   ..."},birthdayGift:"magic_tome"},{characterId:"luna",loves:["poetry","music_box","star_fragment","diary"],likes:["tea_set","novel","earrings","blue_rose"],neutral:["chocolate","necklace","doll"],dislikes:["sunflower","bento","puzzle"],hates:["rare_wine","crown"],specialReactions:{teddy_bear:"...    .",love_letter:"...  .  .",photo_album:"...   . ."},birthdayGift:"poetry"},{characterId:"akane",loves:["sunflower","cookies","teddy_bear","photo_album"],likes:["chocolate","cake","hair_pin","puzzle"],neutral:["novel","bracelet","rose"],dislikes:["poetry","rare_wine","crown"],hates:["magic_tome","crystal_ball"],specialReactions:{bento:"!  !  !",handmade_gift:"!   ? !",promise_ring:"...   ?"},birthdayGift:"cake"},{characterId:"hana",loves:["sakura_petal","sunflower","rainbow_flower","tea_set"],likes:["rose","poetry","music_box","diary"],neutral:["chocolate","necklace","novel"],dislikes:["rare_wine","crown","puzzle"],hates:["doll","crystal_ball"],specialReactions:{blue_rose:" ...   . .",handmade_gift:" .  .",star_fragment:"       ."},birthdayGift:"rainbow_flower"},{characterId:"rin",loves:["crystal_ball","magic_tome","crown","star_fragment"],likes:["rare_wine","necklace","poetry","blue_rose"],neutral:["chocolate","novel","earrings"],dislikes:["sunflower","cookies","teddy_bear"],hates:["bento","puzzle"],specialReactions:{promise_ring:"...  .",diary:"  ...    ?",love_letter:"...   ."},birthdayGift:"crystal_ball"},{characterId:"mei",loves:["bento","cake","cookies","chocolate"],likes:["tea_set","recipe_book","hair_pin","photo_album"],neutral:["rose","bracelet","novel"],dislikes:["magic_tome","crystal_ball","crown"],hates:["rare_wine","poetry"],specialReactions:{handmade_gift:"!   !",rare_wine:" ...  ...",love_letter:"   ?"},birthdayGift:"cake"},{characterId:"sora",loves:["novel","poetry","diary","magic_tome"],likes:["tea_set","music_box","earrings","blue_rose"],neutral:["chocolate","necklace","puzzle"],dislikes:["sunflower","bento","teddy_bear"],hates:["crown","rare_wine"],specialReactions:{manga:"  .",photo_album:"  ... .",love_letter:"...   ."},birthdayGift:"novel"}],w=(R,X)=>{const q=N.find(le=>le.characterId===R);return q?q.specialReactions[X]?{change:15,reaction:q.specialReactions[X]}:q.loves.includes(X)?{change:20,reaction:"!   !  ?"}:q.likes.includes(X)?{change:10,reaction:"!  !"}:q.dislikes.includes(X)?{change:-5,reaction:"...  ..."}:q.hates.includes(X)?{change:-10,reaction:"... ..."}:{change:5,reaction:".  ."}:{change:5,reaction:"."}},_=()=>{if(!y||!g)return;if(!i.inventory?.includes(g.id)){if(g.price>0&&i.money<g.price){T(" !");return}g.price>0&&o(-g.price)}const{change:R,reaction:X}=w(y,g.id);d(y,R),T(X);const q={characterId:y,giftId:g.id,date:Date.now(),reaction:X,affectionChange:R};p(F=>[...F,q]),N.find(F=>F.characterId===y)&&D(F=>({...F,[y]:new Set([...F[y]||[],g.id])})),setTimeout(()=>{T(null),x(null)},3e3),u()},E=(R,X)=>{const q=N.find(le=>le.characterId===R);return q?q.loves.includes(X)?"":q.likes.includes(X)?"":q.dislikes.includes(X)?"":q.hates.includes(X)?"":"":""},k=R=>{switch(R){case"common":return"from-gray-600 to-gray-500";case"uncommon":return"from-green-600 to-green-500";case"rare":return"from-blue-600 to-blue-500";case"legendary":return"from-purple-600 to-pink-600";default:return"from-gray-600 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-900 via-purple-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-pink-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"      !"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl text-yellow-400",children:[" ",i.money]}),e.jsx("button",{onClick:()=>c("/game"),className:"mt-2 px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:""})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["all","flower","food","accessory","book","toy","special"].map(R=>e.jsx("button",{className:"px-3 py-1 bg-purple-700 hover:bg-purple-600 rounded text-white text-sm",children:R==="all"?"":R==="flower"?" ":R==="food"?" ":R==="accessory"?" ":R==="book"?" ":R==="toy"?" ":" "},R))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-[600px] overflow-y-auto",children:v.map(R=>e.jsxs("button",{onClick:()=>x(R),className:`relative p-4 rounded-lg border transition-all hover:scale-105 ${g?.id===R.id?"border-pink-500 bg-pink-900/50":"border-gray-600 bg-gray-800/50 hover:border-purple-500"}`,children:[e.jsx("div",{className:`absolute top-1 right-1 px-2 py-1 rounded text-xs text-white bg-gradient-to-r ${k(R.rarity)}`,children:R.rarity}),e.jsx("div",{className:"text-3xl mb-2",children:R.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:R.name}),e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:R.description}),e.jsx("div",{className:"text-sm text-yellow-400",children:R.price>0?` ${R.price}`:R.obtainMethod}),y&&M[y]?.has(R.id)&&e.jsx("div",{className:"absolute bottom-1 left-1 text-lg",children:E(y,R.id)})]},R.id))})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-pink-500",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.keys(i.affection||{}).map(R=>e.jsx("button",{onClick:()=>b(R),className:`w-full p-3 rounded-lg transition ${y===R?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:R}),e.jsxs("span",{className:"text-pink-300",children:[" ",i.affection[R]]})]})},R))})]}),y&&g&&e.jsxs("div",{className:"bg-gradient-to-br from-pink-800/50 to-purple-800/50 backdrop-blur-md rounded-lg p-6 border border-pink-400",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-4xl mb-2",children:g.icon}),e.jsx("div",{className:"text-white font-bold",children:g.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:[" ",y]})]}),e.jsx("button",{onClick:_,className:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white rounded-lg font-bold transition",children:""})]}),A&&e.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500 rounded-lg p-4 animate-bounce",children:e.jsx("div",{className:"text-yellow-300 text-center font-bold",children:A})}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-3",children:" "}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:C.slice(-5).reverse().map((R,X)=>e.jsxs("div",{className:"text-sm bg-purple-900/30 rounded p-2",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{children:R.characterId}),e.jsxs("span",{className:R.affectionChange>0?"text-green-400":"text-red-400",children:[R.affectionChange>0?"+":"",R.affectionChange]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:v.find(q=>q.id===R.giftId)?.name})]},X))})]})]})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:" "}),e.jsx("div",{className:"text-xs text-green-400",children:"+20"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:""}),e.jsx("div",{className:"text-xs text-green-400",children:"+10"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:""}),e.jsx("div",{className:"text-xs text-gray-400",children:"+5"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:""}),e.jsx("div",{className:"text-xs text-red-400",children:"-5"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:" "}),e.jsx("div",{className:"text-xs text-red-400",children:"-10"})]})]})]})]})})};function qb(){const[c,i]=j.useState(!1),[d,o]=j.useState(null),u=re(g=>g.gameEnding);j.useEffect(()=>{const g=localStorage.getItem("user");g&&(o(JSON.parse(g)),i(!0))},[]);const m=(g,x)=>{if(g==="demo"&&x==="password"){const C={username:g,email:"demo@example.com"};return i(!0),o(C),localStorage.setItem("user",JSON.stringify(C)),!0}return!1},y=g=>{const x={username:g.username,email:g.email};return i(!0),o(x),localStorage.setItem("user",JSON.stringify(x)),!0},b=()=>{i(!1),o(null),localStorage.removeItem("user")};return e.jsx(Lp,{children:e.jsx("div",{className:"min-h-screen",children:e.jsxs(xp,{children:[e.jsx(pe,{path:"/",element:e.jsx(Gx,{isLoggedIn:c,user:d,onLogout:b})}),e.jsx(pe,{path:"/login",element:e.jsx(Sg,{onLogin:m})}),e.jsx(pe,{path:"/account-creation",element:e.jsx(Kg,{onCreateAccount:y})}),e.jsx(pe,{path:"/character-creation",element:e.jsx(Cg,{})}),e.jsx(pe,{path:"/game-info",element:e.jsx(Jg,{})}),e.jsx(pe,{path:"/game-intro",element:e.jsx(wb,{})}),e.jsx(pe,{path:"/settings",element:e.jsx(Fg,{})}),e.jsx(pe,{path:"/api-test",element:e.jsx(gb,{})}),e.jsx(pe,{path:"/dungeon-selection",element:e.jsx(Dg,{})}),e.jsx(pe,{path:"/dungeon",element:e.jsx(Tg,{})}),e.jsx(pe,{path:"/diary",element:e.jsx(Rg,{})}),e.jsx(pe,{path:"/heroine-stories",element:e.jsx(Og,{})}),e.jsx(pe,{path:"/save-load",element:e.jsx(Hg,{})}),e.jsx(pe,{path:"/shopping",element:e.jsx(Lg,{})}),e.jsx(pe,{path:"/characters",element:e.jsx(Qx,{})}),e.jsx(pe,{path:"/achievements",element:e.jsx(Mb,{})}),e.jsx(pe,{path:"/collection",element:e.jsx(Pg,{})}),e.jsx(pe,{path:"/quests",element:e.jsx(Wg,{})}),e.jsx(pe,{path:"/calendar",element:e.jsx(Ig,{})}),e.jsx(pe,{path:"/crafting",element:e.jsx(eb,{})}),e.jsx(pe,{path:"/guild",element:e.jsx(tb,{})}),e.jsx(pe,{path:"/pets",element:e.jsx(ab,{})}),e.jsx(pe,{path:"/fishing",element:e.jsx(sb,{})}),e.jsx(pe,{path:"/farming",element:e.jsx(lb,{})}),e.jsx(pe,{path:"/housing",element:e.jsx(nb,{})}),e.jsx(pe,{path:"/game-menu",element:e.jsx(ib,{})}),e.jsx(pe,{path:"/tutorial",element:e.jsx(rb,{onComplete:()=>{},onSkip:()=>{}})}),e.jsx(pe,{path:"/card-matching",element:e.jsx(cb,{})}),e.jsx(pe,{path:"/quiz",element:e.jsx(ob,{onComplete:g=>console.log("Quiz completed with score:",g)})}),e.jsx(pe,{path:"/rhythm",element:e.jsx(db,{})}),e.jsx(pe,{path:"/puzzle",element:e.jsx(ub,{})}),e.jsx(pe,{path:"/pvp",element:e.jsx(mb,{})}),e.jsx(pe,{path:"/social",element:e.jsx(xb,{})}),e.jsx(pe,{path:"/enhancement",element:e.jsx(hb,{})}),e.jsx(pe,{path:"/clubs",element:e.jsx(vb,{})}),e.jsx(pe,{path:"/heroines",element:e.jsx(Nb,{})}),e.jsx(pe,{path:"/character-meeting",element:e.jsx(kb,{})}),e.jsx(pe,{path:"/minigames",element:e.jsx(Sb,{})}),e.jsx(pe,{path:"/weather",element:e.jsx(Cb,{})}),e.jsx(pe,{path:"/dialogue",element:e.jsx(Lb,{})}),e.jsx(pe,{path:"/gifts",element:e.jsx(Bb,{})}),e.jsx(pe,{path:"/game",element:u?e.jsx(kg,{}):e.jsx(jg,{})}),e.jsx(pe,{path:"*",element:e.jsx(up,{to:"/",replace:!0})})]})})})}N0.createRoot(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(qb,{})}));
