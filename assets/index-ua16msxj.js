(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const m of u)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function d(u){const m={};return u.integrity&&(m.integrity=u.integrity),u.referrerPolicy&&(m.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?m.credentials="include":u.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(u){if(u.ep)return;u.ep=!0;const m=d(u);fetch(u.href,m)}})();function y0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hc={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function v0(){if(cx)return Gl;cx=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function d(o,u,m){var g=null;if(m!==void 0&&(g=""+m),u.key!==void 0&&(g=""+u.key),"key"in u){m={};for(var y in u)y!=="key"&&(m[y]=u[y])}else m=u;return u=m.ref,{$$typeof:r,type:o,key:g,ref:u!==void 0?u:null,props:m}}return Gl.Fragment=i,Gl.jsx=d,Gl.jsxs=d,Gl}var ox;function j0(){return ox||(ox=1,Hc.exports=v0()),Hc.exports}var e=j0(),Lc={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function N0(){if(dx)return ge;dx=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.iterator;function D(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,z={};function j(L,Z,P){this.props=L,this.context=Z,this.refs=z,this.updater=P||O}j.prototype.isReactComponent={},j.prototype.setState=function(L,Z){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Z,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function N(){}N.prototype=j.prototype;function w(L,Z,P){this.props=L,this.context=Z,this.refs=z,this.updater=P||O}var T=w.prototype=new N;T.constructor=w,C(T,j.prototype),T.isPureReactComponent=!0;var A=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function Y(L,Z,P,X,ne,ce){return P=ce.ref,{$$typeof:r,type:L,key:Z,ref:P!==void 0?P:null,props:ce}}function B(L,Z){return Y(L.type,Z,void 0,void 0,void 0,L.props)}function ae(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function G(L){var Z={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(P){return Z[P]})}var le=/\/+/g;function E(L,Z){return typeof L=="object"&&L!==null&&L.key!=null?G(""+L.key):Z.toString(36)}function U(){}function R(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(U,U):(L.status="pending",L.then(function(Z){L.status==="pending"&&(L.status="fulfilled",L.value=Z)},function(Z){L.status==="pending"&&(L.status="rejected",L.reason=Z)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function q(L,Z,P,X,ne){var ce=typeof L;(ce==="undefined"||ce==="boolean")&&(L=null);var oe=!1;if(L===null)oe=!0;else switch(ce){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(L.$$typeof){case r:case i:oe=!0;break;case S:return oe=L._init,q(oe(L._payload),Z,P,X,ne)}}if(oe)return ne=ne(L),oe=X===""?"."+E(L,0):X,A(ne)?(P="",oe!=null&&(P=oe.replace(le,"$&/")+"/"),q(ne,Z,P,"",function(ze){return ze})):ne!=null&&(ae(ne)&&(ne=B(ne,P+(ne.key==null||L&&L.key===ne.key?"":(""+ne.key).replace(le,"$&/")+"/")+oe)),Z.push(ne)),1;oe=0;var we=X===""?".":X+":";if(A(L))for(var he=0;he<L.length;he++)X=L[he],ce=we+E(X,he),oe+=q(X,Z,P,ce,ne);else if(he=D(L),typeof he=="function")for(L=he.call(L),he=0;!(X=L.next()).done;)X=X.value,ce=we+E(X,he++),oe+=q(X,Z,P,ce,ne);else if(ce==="object"){if(typeof L.then=="function")return q(R(L),Z,P,X,ne);throw Z=String(L),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return oe}function h(L,Z,P){if(L==null)return L;var X=[],ne=0;return q(L,X,"","",function(ce){return Z.call(P,ce,ne++)}),X}function H(L){if(L._status===-1){var Z=L._result;Z=Z(),Z.then(function(P){(L._status===0||L._status===-1)&&(L._status=1,L._result=P)},function(P){(L._status===0||L._status===-1)&&(L._status=2,L._result=P)}),L._status===-1&&(L._status=0,L._result=Z)}if(L._status===1)return L._result.default;throw L._result}var J=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function ie(){}return ge.Children={map:h,forEach:function(L,Z,P){h(L,function(){Z.apply(this,arguments)},P)},count:function(L){var Z=0;return h(L,function(){Z++}),Z},toArray:function(L){return h(L,function(Z){return Z})||[]},only:function(L){if(!ae(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ge.Component=j,ge.Fragment=d,ge.Profiler=u,ge.PureComponent=w,ge.StrictMode=o,ge.Suspense=p,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ge.__COMPILER_RUNTIME={__proto__:null,c:function(L){return k.H.useMemoCache(L)}},ge.cache=function(L){return function(){return L.apply(null,arguments)}},ge.cloneElement=function(L,Z,P){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var X=C({},L.props),ne=L.key,ce=void 0;if(Z!=null)for(oe in Z.ref!==void 0&&(ce=void 0),Z.key!==void 0&&(ne=""+Z.key),Z)!M.call(Z,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&Z.ref===void 0||(X[oe]=Z[oe]);var oe=arguments.length-2;if(oe===1)X.children=P;else if(1<oe){for(var we=Array(oe),he=0;he<oe;he++)we[he]=arguments[he+2];X.children=we}return Y(L.type,ne,void 0,void 0,ce,X)},ge.createContext=function(L){return L={$$typeof:g,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:m,_context:L},L},ge.createElement=function(L,Z,P){var X,ne={},ce=null;if(Z!=null)for(X in Z.key!==void 0&&(ce=""+Z.key),Z)M.call(Z,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ne[X]=Z[X]);var oe=arguments.length-2;if(oe===1)ne.children=P;else if(1<oe){for(var we=Array(oe),he=0;he<oe;he++)we[he]=arguments[he+2];ne.children=we}if(L&&L.defaultProps)for(X in oe=L.defaultProps,oe)ne[X]===void 0&&(ne[X]=oe[X]);return Y(L,ce,void 0,void 0,null,ne)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(L){return{$$typeof:y,render:L}},ge.isValidElement=ae,ge.lazy=function(L){return{$$typeof:S,_payload:{_status:-1,_result:L},_init:H}},ge.memo=function(L,Z){return{$$typeof:x,type:L,compare:Z===void 0?null:Z}},ge.startTransition=function(L){var Z=k.T,P={};k.T=P;try{var X=L(),ne=k.S;ne!==null&&ne(P,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(ie,J)}catch(ce){J(ce)}finally{k.T=Z}},ge.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ge.use=function(L){return k.H.use(L)},ge.useActionState=function(L,Z,P){return k.H.useActionState(L,Z,P)},ge.useCallback=function(L,Z){return k.H.useCallback(L,Z)},ge.useContext=function(L){return k.H.useContext(L)},ge.useDebugValue=function(){},ge.useDeferredValue=function(L,Z){return k.H.useDeferredValue(L,Z)},ge.useEffect=function(L,Z,P){var X=k.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(L,Z)},ge.useId=function(){return k.H.useId()},ge.useImperativeHandle=function(L,Z,P){return k.H.useImperativeHandle(L,Z,P)},ge.useInsertionEffect=function(L,Z){return k.H.useInsertionEffect(L,Z)},ge.useLayoutEffect=function(L,Z){return k.H.useLayoutEffect(L,Z)},ge.useMemo=function(L,Z){return k.H.useMemo(L,Z)},ge.useOptimistic=function(L,Z){return k.H.useOptimistic(L,Z)},ge.useReducer=function(L,Z,P){return k.H.useReducer(L,Z,P)},ge.useRef=function(L){return k.H.useRef(L)},ge.useState=function(L){return k.H.useState(L)},ge.useSyncExternalStore=function(L,Z,P){return k.H.useSyncExternalStore(L,Z,P)},ge.useTransition=function(){return k.H.useTransition()},ge.version="19.1.1",ge}var ux;function ro(){return ux||(ux=1,Lc.exports=N0()),Lc.exports}var v=ro();const at=y0(v);var Bc={exports:{}},Yl={},Uc={exports:{}},$c={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function w0(){return mx||(mx=1,(function(r){function i(h,H){var J=h.length;h.push(H);e:for(;0<J;){var ie=J-1>>>1,L=h[ie];if(0<u(L,H))h[ie]=H,h[J]=L,J=ie;else break e}}function d(h){return h.length===0?null:h[0]}function o(h){if(h.length===0)return null;var H=h[0],J=h.pop();if(J!==H){h[0]=J;e:for(var ie=0,L=h.length,Z=L>>>1;ie<Z;){var P=2*(ie+1)-1,X=h[P],ne=P+1,ce=h[ne];if(0>u(X,J))ne<L&&0>u(ce,X)?(h[ie]=ce,h[ne]=J,ie=ne):(h[ie]=X,h[P]=J,ie=P);else if(ne<L&&0>u(ce,J))h[ie]=ce,h[ne]=J,ie=ne;else break e}}return H}function u(h,H){var J=h.sortIndex-H.sortIndex;return J!==0?J:h.id-H.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;r.unstable_now=function(){return m.now()}}else{var g=Date,y=g.now();r.unstable_now=function(){return g.now()-y}}var p=[],x=[],S=1,b=null,D=3,O=!1,C=!1,z=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(h){for(var H=d(x);H!==null;){if(H.callback===null)o(x);else if(H.startTime<=h)o(x),H.sortIndex=H.expirationTime,i(p,H);else break;H=d(x)}}function k(h){if(z=!1,A(h),!C)if(d(p)!==null)C=!0,M||(M=!0,E());else{var H=d(x);H!==null&&q(k,H.startTime-h)}}var M=!1,Y=-1,B=5,ae=-1;function G(){return j?!0:!(r.unstable_now()-ae<B)}function le(){if(j=!1,M){var h=r.unstable_now();ae=h;var H=!0;try{e:{C=!1,z&&(z=!1,w(Y),Y=-1),O=!0;var J=D;try{t:{for(A(h),b=d(p);b!==null&&!(b.expirationTime>h&&G());){var ie=b.callback;if(typeof ie=="function"){b.callback=null,D=b.priorityLevel;var L=ie(b.expirationTime<=h);if(h=r.unstable_now(),typeof L=="function"){b.callback=L,A(h),H=!0;break t}b===d(p)&&o(p),A(h)}else o(p);b=d(p)}if(b!==null)H=!0;else{var Z=d(x);Z!==null&&q(k,Z.startTime-h),H=!1}}break e}finally{b=null,D=J,O=!1}H=void 0}}finally{H?E():M=!1}}}var E;if(typeof T=="function")E=function(){T(le)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,R=U.port2;U.port1.onmessage=le,E=function(){R.postMessage(null)}}else E=function(){N(le,0)};function q(h,H){Y=N(function(){h(r.unstable_now())},H)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(h){h.callback=null},r.unstable_forceFrameRate=function(h){0>h||125<h?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<h?Math.floor(1e3/h):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(h){switch(D){case 1:case 2:case 3:var H=3;break;default:H=D}var J=D;D=H;try{return h()}finally{D=J}},r.unstable_requestPaint=function(){j=!0},r.unstable_runWithPriority=function(h,H){switch(h){case 1:case 2:case 3:case 4:case 5:break;default:h=3}var J=D;D=h;try{return H()}finally{D=J}},r.unstable_scheduleCallback=function(h,H,J){var ie=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,h){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=J+L,h={id:S++,callback:H,priorityLevel:h,startTime:J,expirationTime:L,sortIndex:-1},J>ie?(h.sortIndex=J,i(x,h),d(p)===null&&h===d(x)&&(z?(w(Y),Y=-1):z=!0,q(k,J-ie))):(h.sortIndex=L,i(p,h),C||O||(C=!0,M||(M=!0,E()))),h},r.unstable_shouldYield=G,r.unstable_wrapCallback=function(h){var H=D;return function(){var J=D;D=H;try{return h.apply(this,arguments)}finally{D=J}}}})($c)),$c}var xx;function k0(){return xx||(xx=1,Uc.exports=w0()),Uc.exports}var Gc={exports:{}},nt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function S0(){if(hx)return nt;hx=1;var r=ro();function i(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)x+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var o={d:{f:d,r:function(){throw Error(i(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},u=Symbol.for("react.portal");function m(p,x,S){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:p,containerInfo:x,implementation:S}}var g=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return nt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,nt.createPortal=function(p,x){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(i(299));return m(p,x,null,S)},nt.flushSync=function(p){var x=g.T,S=o.p;try{if(g.T=null,o.p=2,p)return p()}finally{g.T=x,o.p=S,o.d.f()}},nt.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(p,x))},nt.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},nt.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var S=x.as,b=y(S,x.crossOrigin),D=typeof x.integrity=="string"?x.integrity:void 0,O=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;S==="style"?o.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:D,fetchPriority:O}):S==="script"&&o.d.X(p,{crossOrigin:b,integrity:D,fetchPriority:O,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},nt.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var S=y(x.as,x.crossOrigin);o.d.M(p,{crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(p)},nt.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var S=x.as,b=y(S,x.crossOrigin);o.d.L(p,S,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},nt.preloadModule=function(p,x){if(typeof p=="string")if(x){var S=y(x.as,x.crossOrigin);o.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(p)},nt.requestFormReset=function(p){o.d.r(p)},nt.unstable_batchedUpdates=function(p,x){return p(x)},nt.useFormState=function(p,x,S){return g.H.useFormState(p,x,S)},nt.useFormStatus=function(){return g.H.useHostTransitionStatus()},nt.version="19.1.1",nt}var fx;function C0(){if(fx)return Gc.exports;fx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),Gc.exports=S0(),Gc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function _0(){if(px)return Yl;px=1;var r=k0(),i=ro(),d=C0();function o(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function g(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function y(t){if(m(t)!==t)throw Error(o(188))}function p(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(o(188));return a!==t?null:t}for(var s=t,l=a;;){var n=s.return;if(n===null)break;var c=n.alternate;if(c===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===c.child){for(c=n.child;c;){if(c===s)return y(n),t;if(c===l)return y(n),a;c=c.sibling}throw Error(o(188))}if(s.return!==l.return)s=n,l=c;else{for(var f=!1,_=n.child;_;){if(_===s){f=!0,s=n,l=c;break}if(_===l){f=!0,l=n,s=c;break}_=_.sibling}if(!f){for(_=c.child;_;){if(_===s){f=!0,s=c,l=n;break}if(_===l){f=!0,l=c,s=n;break}_=_.sibling}if(!f)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?t:a}function x(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=x(t),a!==null)return a;t=t.sibling}return null}var S=Object.assign,b=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function E(t){return t===null||typeof t!="object"?null:(t=le&&t[le]||t["@@iterator"],typeof t=="function"?t:null)}var U=Symbol.for("react.client.reference");function R(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===U?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case k:return"Suspense";case M:return"SuspenseList";case ae:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case T:return(t.displayName||"Context")+".Provider";case w:return(t._context.displayName||"Context")+".Consumer";case A:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return a=t.displayName||null,a!==null?a:R(t.type)||"Memo";case B:a=t._payload,t=t._init;try{return R(t(a))}catch{}}return null}var q=Array.isArray,h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ie=[],L=-1;function Z(t){return{current:t}}function P(t){0>L||(t.current=ie[L],ie[L]=null,L--)}function X(t,a){L++,ie[L]=t.current,t.current=a}var ne=Z(null),ce=Z(null),oe=Z(null),we=Z(null);function he(t,a){switch(X(oe,a),X(ce,t),X(ne,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?zm(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=zm(a),t=Hm(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(ne),X(ne,t)}function ze(){P(ne),P(ce),P(oe)}function Qt(t){t.memoizedState!==null&&X(we,t);var a=ne.current,s=Hm(a,t.type);a!==s&&(X(ce,t),X(ne,s))}function Dt(t){ce.current===t&&(P(ne),P(ce)),we.current===t&&(P(we),Hl._currentValue=J)}var mt=Object.prototype.hasOwnProperty,Qs=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Xt=r.unstable_shouldYield,Si=r.unstable_requestPaint,Ht=r.unstable_now,Wx=r.unstable_getCurrentPriorityLevel,po=r.unstable_ImmediatePriority,go=r.unstable_UserBlockingPriority,en=r.unstable_NormalPriority,Ix=r.unstable_LowPriority,bo=r.unstable_IdlePriority,eh=r.log,th=r.unstable_setDisableYieldValue,Xs=null,xt=null;function da(t){if(typeof eh=="function"&&th(t),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Xs,t)}catch{}}var ht=Math.clz32?Math.clz32:lh,ah=Math.log,sh=Math.LN2;function lh(t){return t>>>=0,t===0?32:31-(ah(t)/sh|0)|0}var tn=256,an=4194304;function Oa(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function sn(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var n=0,c=t.suspendedLanes,f=t.pingedLanes;t=t.warmLanes;var _=l&134217727;return _!==0?(l=_&~c,l!==0?n=Oa(l):(f&=_,f!==0?n=Oa(f):s||(s=_&~t,s!==0&&(n=Oa(s))))):(_=l&~c,_!==0?n=Oa(_):f!==0?n=Oa(f):s||(s=l&~t,s!==0&&(n=Oa(s)))),n===0?0:a!==0&&a!==n&&(a&c)===0&&(c=n&-n,s=a&-a,c>=s||c===32&&(s&4194048)!==0)?a:n}function Vs(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function nh(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yo(){var t=tn;return tn<<=1,(tn&4194048)===0&&(tn=256),t}function vo(){var t=an;return an<<=1,(an&62914560)===0&&(an=4194304),t}function Ci(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Zs(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ih(t,a,s,l,n,c){var f=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var _=t.entanglements,$=t.expirationTimes,F=t.hiddenUpdates;for(s=f&~s;0<s;){var ee=31-ht(s),se=1<<ee;_[ee]=0,$[ee]=-1;var W=F[ee];if(W!==null)for(F[ee]=null,ee=0;ee<W.length;ee++){var I=W[ee];I!==null&&(I.lane&=-536870913)}s&=~se}l!==0&&jo(t,l,0),c!==0&&n===0&&t.tag!==0&&(t.suspendedLanes|=c&~(f&~a))}function jo(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-ht(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function No(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-ht(s),n=1<<l;n&a|t[l]&a&&(t[l]|=a),s&=~n}}function _i(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ei(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function wo(){var t=H.p;return t!==0?t:(t=window.event,t===void 0?32:ax(t.type))}function rh(t,a){var s=H.p;try{return H.p=t,a()}finally{H.p=s}}var ua=Math.random().toString(36).slice(2),st="__reactFiber$"+ua,rt="__reactProps$"+ua,ts="__reactContainer$"+ua,Mi="__reactEvents$"+ua,ch="__reactListeners$"+ua,oh="__reactHandles$"+ua,ko="__reactResources$"+ua,Js="__reactMarker$"+ua;function Ai(t){delete t[st],delete t[rt],delete t[Mi],delete t[ch],delete t[oh]}function as(t){var a=t[st];if(a)return a;for(var s=t.parentNode;s;){if(a=s[ts]||s[st]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=$m(t);t!==null;){if(s=t[st])return s;t=$m(t)}return a}t=s,s=t.parentNode}return null}function ss(t){if(t=t[st]||t[ts]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function Ks(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(o(33))}function ls(t){var a=t[ko];return a||(a=t[ko]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Je(t){t[Js]=!0}var So=new Set,Co={};function za(t,a){ns(t,a),ns(t+"Capture",a)}function ns(t,a){for(Co[t]=a,t=0;t<a.length;t++)So.add(a[t])}var dh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_o={},Eo={};function uh(t){return mt.call(Eo,t)?!0:mt.call(_o,t)?!1:dh.test(t)?Eo[t]=!0:(_o[t]=!0,!1)}function ln(t,a,s){if(uh(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function nn(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Vt(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}var Ti,Mo;function is(t){if(Ti===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Ti=a&&a[1]||"",Mo=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ti+t+Mo}var Di=!1;function Ri(t,a){if(!t||Di)return"";Di=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(I){var W=I}Reflect.construct(t,[],se)}else{try{se.call()}catch(I){W=I}t.call(se.prototype)}}else{try{throw Error()}catch(I){W=I}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(I){if(I&&W&&typeof I.stack=="string")return[I.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=l.DetermineComponentFrameRoot(),f=c[0],_=c[1];if(f&&_){var $=f.split(`
`),F=_.split(`
`);for(n=l=0;l<$.length&&!$[l].includes("DetermineComponentFrameRoot");)l++;for(;n<F.length&&!F[n].includes("DetermineComponentFrameRoot");)n++;if(l===$.length||n===F.length)for(l=$.length-1,n=F.length-1;1<=l&&0<=n&&$[l]!==F[n];)n--;for(;1<=l&&0<=n;l--,n--)if($[l]!==F[n]){if(l!==1||n!==1)do if(l--,n--,0>n||$[l]!==F[n]){var ee=`
`+$[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=n);break}}}finally{Di=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?is(s):""}function mh(t){switch(t.tag){case 26:case 27:case 5:return is(t.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return Ri(t.type,!1);case 11:return Ri(t.type.render,!1);case 1:return Ri(t.type,!0);case 31:return is("Activity");default:return""}}function Ao(t){try{var a="";do a+=mh(t),t=t.return;while(t);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Nt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function To(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function xh(t){var a=To(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),l=""+t[a];if(!t.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,c=s.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return n.call(this)},set:function(f){l=""+f,c.call(this,f)}}),Object.defineProperty(t,a,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(f){l=""+f},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function rn(t){t._valueTracker||(t._valueTracker=xh(t))}function Do(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=To(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hh=/[\n"\\]/g;function wt(t){return t.replace(hh,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function qi(t,a,s,l,n,c,f,_){t.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?t.type=f:t.removeAttribute("type"),a!=null?f==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Nt(a)):t.value!==""+Nt(a)&&(t.value=""+Nt(a)):f!=="submit"&&f!=="reset"||t.removeAttribute("value"),a!=null?Oi(t,f,Nt(a)):s!=null?Oi(t,f,Nt(s)):l!=null&&t.removeAttribute("value"),n==null&&c!=null&&(t.defaultChecked=!!c),n!=null&&(t.checked=n&&typeof n!="function"&&typeof n!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+Nt(_):t.removeAttribute("name")}function Ro(t,a,s,l,n,c,f,_){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(t.type=c),a!=null||s!=null){if(!(c!=="submit"&&c!=="reset"||a!=null))return;s=s!=null?""+Nt(s):"",a=a!=null?""+Nt(a):s,_||a===t.value||(t.value=a),t.defaultValue=a}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=_?t.checked:!!l,t.defaultChecked=!!l,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.name=f)}function Oi(t,a,s){a==="number"&&cn(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function rs(t,a,s,l){if(t=t.options,a){a={};for(var n=0;n<s.length;n++)a["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=a.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Nt(s),a=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,l&&(t[n].defaultSelected=!0);return}a!==null||t[n].disabled||(a=t[n])}a!==null&&(a.selected=!0)}}function qo(t,a,s){if(a!=null&&(a=""+Nt(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Nt(s):""}function Oo(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(o(92));if(q(l)){if(1<l.length)throw Error(o(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=Nt(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function cs(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var fh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zo(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||fh.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function Ho(t,a,s){if(a!=null&&typeof a!="object")throw Error(o(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var n in a)l=a[n],a.hasOwnProperty(n)&&s[n]!==l&&zo(t,n,l)}else for(var c in a)a.hasOwnProperty(c)&&zo(t,c,a[c])}function zi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function on(t){return gh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Hi=null;function Li(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var os=null,ds=null;function Lo(t){var a=ss(t);if(a&&(t=a.stateNode)){var s=t[rt]||null;e:switch(t=a.stateNode,a.type){case"input":if(qi(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+wt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var n=l[rt]||null;if(!n)throw Error(o(90));qi(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&Do(l)}break e;case"textarea":qo(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&rs(t,!!s.multiple,a,!1)}}}var Bi=!1;function Bo(t,a,s){if(Bi)return t(a,s);Bi=!0;try{var l=t(a);return l}finally{if(Bi=!1,(os!==null||ds!==null)&&(Jn(),os&&(a=os,t=ds,ds=os=null,Lo(a),t)))for(a=0;a<t.length;a++)Lo(t[a])}}function Fs(t,a){var s=t.stateNode;if(s===null)return null;var l=s[rt]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(o(231,a,typeof s));return s}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ui=!1;if(Zt)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Ui=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Ui=!1}var ma=null,$i=null,dn=null;function Uo(){if(dn)return dn;var t,a=$i,s=a.length,l,n="value"in ma?ma.value:ma.textContent,c=n.length;for(t=0;t<s&&a[t]===n[t];t++);var f=s-t;for(l=1;l<=f&&a[s-l]===n[c-l];l++);return dn=n.slice(t,1<l?1-l:void 0)}function un(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function mn(){return!0}function $o(){return!1}function ct(t){function a(s,l,n,c,f){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(s=t[_],this[_]=s?s(c):c[_]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?mn:$o,this.isPropagationStopped=$o,this}return S(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=mn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=mn)},persist:function(){},isPersistent:mn}),a}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xn=ct(Ha),Ws=S({},Ha,{view:0,detail:0}),bh=ct(Ws),Gi,Yi,Is,hn=S({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Is&&(Is&&t.type==="mousemove"?(Gi=t.screenX-Is.screenX,Yi=t.screenY-Is.screenY):Yi=Gi=0,Is=t),Gi)},movementY:function(t){return"movementY"in t?t.movementY:Yi}}),Go=ct(hn),yh=S({},hn,{dataTransfer:0}),vh=ct(yh),jh=S({},Ws,{relatedTarget:0}),Qi=ct(jh),Nh=S({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=ct(Nh),kh=S({},Ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sh=ct(kh),Ch=S({},Ha,{data:0}),Yo=ct(Ch),_h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ah(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Mh[t])?!!a[t]:!1}function Xi(){return Ah}var Th=S({},Ws,{key:function(t){if(t.key){var a=_h[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=un(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Eh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(t){return t.type==="keypress"?un(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?un(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dh=ct(Th),Rh=S({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=ct(Rh),qh=S({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),Oh=ct(qh),zh=S({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hh=ct(zh),Lh=S({},hn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bh=ct(Lh),Uh=S({},Ha,{newState:0,oldState:0}),$h=ct(Uh),Gh=[9,13,27,32],Vi=Zt&&"CompositionEvent"in window,el=null;Zt&&"documentMode"in document&&(el=document.documentMode);var Yh=Zt&&"TextEvent"in window&&!el,Xo=Zt&&(!Vi||el&&8<el&&11>=el),Vo=" ",Zo=!1;function Jo(t,a){switch(t){case"keyup":return Gh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ko(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var us=!1;function Qh(t,a){switch(t){case"compositionend":return Ko(a);case"keypress":return a.which!==32?null:(Zo=!0,Vo);case"textInput":return t=a.data,t===Vo&&Zo?null:t;default:return null}}function Xh(t,a){if(us)return t==="compositionend"||!Vi&&Jo(t,a)?(t=Uo(),dn=$i=ma=null,us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xo&&a.locale!=="ko"?null:a.data;default:return null}}var Vh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Vh[t.type]:a==="textarea"}function Po(t,a,s,l){os?ds?ds.push(l):ds=[l]:os=l,a=ei(a,"onChange"),0<a.length&&(s=new xn("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var tl=null,al=null;function Zh(t){Tm(t,0)}function fn(t){var a=Ks(t);if(Do(a))return t}function Wo(t,a){if(t==="change")return a}var Io=!1;if(Zt){var Zi;if(Zt){var Ji="oninput"in document;if(!Ji){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),Ji=typeof ed.oninput=="function"}Zi=Ji}else Zi=!1;Io=Zi&&(!document.documentMode||9<document.documentMode)}function td(){tl&&(tl.detachEvent("onpropertychange",ad),al=tl=null)}function ad(t){if(t.propertyName==="value"&&fn(al)){var a=[];Po(a,al,t,Li(t)),Bo(Zh,a)}}function Jh(t,a,s){t==="focusin"?(td(),tl=a,al=s,tl.attachEvent("onpropertychange",ad)):t==="focusout"&&td()}function Kh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fn(al)}function Fh(t,a){if(t==="click")return fn(a)}function Ph(t,a){if(t==="input"||t==="change")return fn(a)}function Wh(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ft=typeof Object.is=="function"?Object.is:Wh;function sl(t,a){if(ft(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!mt.call(a,n)||!ft(t[n],a[n]))return!1}return!0}function sd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ld(t,a){var s=sd(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=sd(s)}}function nd(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?nd(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function id(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=cn(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=cn(t.document)}return a}function Ki(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Ih=Zt&&"documentMode"in document&&11>=document.documentMode,ms=null,Fi=null,ll=null,Pi=!1;function rd(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Pi||ms==null||ms!==cn(l)||(l=ms,"selectionStart"in l&&Ki(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&sl(ll,l)||(ll=l,l=ei(Fi,"onSelect"),0<l.length&&(a=new xn("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=ms)))}function La(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var xs={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionrun:La("Transition","TransitionRun"),transitionstart:La("Transition","TransitionStart"),transitioncancel:La("Transition","TransitionCancel"),transitionend:La("Transition","TransitionEnd")},Wi={},cd={};Zt&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function Ba(t){if(Wi[t])return Wi[t];if(!xs[t])return t;var a=xs[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in cd)return Wi[t]=a[s];return t}var od=Ba("animationend"),dd=Ba("animationiteration"),ud=Ba("animationstart"),ef=Ba("transitionrun"),tf=Ba("transitionstart"),af=Ba("transitioncancel"),md=Ba("transitionend"),xd=new Map,Ii="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ii.push("scrollEnd");function Rt(t,a){xd.set(t,a),za(a,[t])}var hd=new WeakMap;function kt(t,a){if(typeof t=="object"&&t!==null){var s=hd.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Ao(a)},hd.set(t,a),a)}return{value:t,source:a,stack:Ao(a)}}var St=[],hs=0,er=0;function pn(){for(var t=hs,a=er=hs=0;a<t;){var s=St[a];St[a++]=null;var l=St[a];St[a++]=null;var n=St[a];St[a++]=null;var c=St[a];if(St[a++]=null,l!==null&&n!==null){var f=l.pending;f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n}c!==0&&fd(s,n,c)}}function gn(t,a,s,l){St[hs++]=t,St[hs++]=a,St[hs++]=s,St[hs++]=l,er|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function tr(t,a,s,l){return gn(t,a,s,l),bn(t)}function fs(t,a){return gn(t,null,null,a),bn(t)}function fd(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var n=!1,c=t.return;c!==null;)c.childLanes|=s,l=c.alternate,l!==null&&(l.childLanes|=s),c.tag===22&&(t=c.stateNode,t===null||t._visibility&1||(n=!0)),t=c,c=c.return;return t.tag===3?(c=t.stateNode,n&&a!==null&&(n=31-ht(s),t=c.hiddenUpdates,l=t[n],l===null?t[n]=[a]:l.push(a),a.lane=s|536870912),c):null}function bn(t){if(50<Ml)throw Ml=0,rc=null,Error(o(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ps={};function sf(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(t,a,s,l){return new sf(t,a,s,l)}function ar(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jt(t,a){var s=t.alternate;return s===null?(s=pt(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function pd(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function yn(t,a,s,l,n,c){var f=0;if(l=t,typeof t=="function")ar(t)&&(f=1);else if(typeof t=="string")f=i0(t,s,ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ae:return t=pt(31,s,a,n),t.elementType=ae,t.lanes=c,t;case C:return Ua(s.children,n,c,a);case z:f=8,n|=24;break;case j:return t=pt(12,s,a,n|2),t.elementType=j,t.lanes=c,t;case k:return t=pt(13,s,a,n),t.elementType=k,t.lanes=c,t;case M:return t=pt(19,s,a,n),t.elementType=M,t.lanes=c,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N:case T:f=10;break e;case w:f=9;break e;case A:f=11;break e;case Y:f=14;break e;case B:f=16,l=null;break e}f=29,s=Error(o(130,t===null?"null":typeof t,"")),l=null}return a=pt(f,s,a,n),a.elementType=t,a.type=l,a.lanes=c,a}function Ua(t,a,s,l){return t=pt(7,t,l,a),t.lanes=s,t}function sr(t,a,s){return t=pt(6,t,null,a),t.lanes=s,t}function lr(t,a,s){return a=pt(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var gs=[],bs=0,vn=null,jn=0,Ct=[],_t=0,$a=null,Kt=1,Ft="";function Ga(t,a){gs[bs++]=jn,gs[bs++]=vn,vn=t,jn=a}function gd(t,a,s){Ct[_t++]=Kt,Ct[_t++]=Ft,Ct[_t++]=$a,$a=t;var l=Kt;t=Ft;var n=32-ht(l)-1;l&=~(1<<n),s+=1;var c=32-ht(a)+n;if(30<c){var f=n-n%5;c=(l&(1<<f)-1).toString(32),l>>=f,n-=f,Kt=1<<32-ht(a)+n|s<<n|l,Ft=c+t}else Kt=1<<c|s<<n|l,Ft=t}function nr(t){t.return!==null&&(Ga(t,1),gd(t,1,0))}function ir(t){for(;t===vn;)vn=gs[--bs],gs[bs]=null,jn=gs[--bs],gs[bs]=null;for(;t===$a;)$a=Ct[--_t],Ct[_t]=null,Ft=Ct[--_t],Ct[_t]=null,Kt=Ct[--_t],Ct[_t]=null}var it=null,Le=null,Ce=!1,Ya=null,Lt=!1,rr=Error(o(519));function Qa(t){var a=Error(o(418,""));throw rl(kt(a,t)),rr}function bd(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[st]=t,a[rt]=l,s){case"dialog":je("cancel",a),je("close",a);break;case"iframe":case"object":case"embed":je("load",a);break;case"video":case"audio":for(s=0;s<Tl.length;s++)je(Tl[s],a);break;case"source":je("error",a);break;case"img":case"image":case"link":je("error",a),je("load",a);break;case"details":je("toggle",a);break;case"input":je("invalid",a),Ro(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),rn(a);break;case"select":je("invalid",a);break;case"textarea":je("invalid",a),Oo(a,l.value,l.defaultValue,l.children),rn(a)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||Om(a.textContent,s)?(l.popover!=null&&(je("beforetoggle",a),je("toggle",a)),l.onScroll!=null&&je("scroll",a),l.onScrollEnd!=null&&je("scrollend",a),l.onClick!=null&&(a.onclick=ti),a=!0):a=!1,a||Qa(t)}function yd(t){for(it=t.return;it;)switch(it.tag){case 5:case 13:Lt=!1;return;case 27:case 3:Lt=!0;return;default:it=it.return}}function nl(t){if(t!==it)return!1;if(!Ce)return yd(t),Ce=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||wc(t.type,t.memoizedProps)),s=!s),s&&Le&&Qa(t),yd(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(a===0){Le=Ot(t.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;t=t.nextSibling}Le=null}}else a===27?(a=Le,Ea(t.type)?(t=_c,_c=null,Le=t):Le=a):Le=it?Ot(t.stateNode.nextSibling):null;return!0}function il(){Le=it=null,Ce=!1}function vd(){var t=Ya;return t!==null&&(ut===null?ut=t:ut.push.apply(ut,t),Ya=null),t}function rl(t){Ya===null?Ya=[t]:Ya.push(t)}var cr=Z(null),Xa=null,Pt=null;function xa(t,a,s){X(cr,a._currentValue),a._currentValue=s}function Wt(t){t._currentValue=cr.current,P(cr)}function or(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function dr(t,a,s,l){var n=t.child;for(n!==null&&(n.return=t);n!==null;){var c=n.dependencies;if(c!==null){var f=n.child;c=c.firstContext;e:for(;c!==null;){var _=c;c=n;for(var $=0;$<a.length;$++)if(_.context===a[$]){c.lanes|=s,_=c.alternate,_!==null&&(_.lanes|=s),or(c.return,s,t),l||(f=null);break e}c=_.next}}else if(n.tag===18){if(f=n.return,f===null)throw Error(o(341));f.lanes|=s,c=f.alternate,c!==null&&(c.lanes|=s),or(f,s,t),f=null}else f=n.child;if(f!==null)f.return=n;else for(f=n;f!==null;){if(f===t){f=null;break}if(n=f.sibling,n!==null){n.return=f.return,f=n;break}f=f.return}n=f}}function cl(t,a,s,l){t=null;for(var n=a,c=!1;n!==null;){if(!c){if((n.flags&524288)!==0)c=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var f=n.alternate;if(f===null)throw Error(o(387));if(f=f.memoizedProps,f!==null){var _=n.type;ft(n.pendingProps.value,f.value)||(t!==null?t.push(_):t=[_])}}else if(n===we.current){if(f=n.alternate,f===null)throw Error(o(387));f.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}n=n.return}t!==null&&dr(a,t,s,l),a.flags|=262144}function Nn(t){for(t=t.firstContext;t!==null;){if(!ft(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Va(t){Xa=t,Pt=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function lt(t){return jd(Xa,t)}function wn(t,a){return Xa===null&&Va(t),jd(t,a)}function jd(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Pt===null){if(t===null)throw Error(o(308));Pt=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Pt=Pt.next=a;return s}var lf=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},nf=r.unstable_scheduleCallback,rf=r.unstable_NormalPriority,Ve={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ur(){return{controller:new lf,data:new Map,refCount:0}}function ol(t){t.refCount--,t.refCount===0&&nf(rf,function(){t.controller.abort()})}var dl=null,mr=0,ys=0,vs=null;function cf(t,a){if(dl===null){var s=dl=[];mr=0,ys=hc(),vs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return mr++,a.then(Nd,Nd),a}function Nd(){if(--mr===0&&dl!==null){vs!==null&&(vs.status="fulfilled");var t=dl;dl=null,ys=0,vs=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function of(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var n=0;n<s.length;n++)(0,s[n])(a)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var wd=h.S;h.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&cf(t,a),wd!==null&&wd(t,a)};var Za=Z(null);function xr(){var t=Za.current;return t!==null?t:Re.pooledCache}function kn(t,a){a===null?X(Za,Za.current):X(Za,a.pool)}function kd(){var t=xr();return t===null?null:{parent:Ve._currentValue,pool:t}}var ul=Error(o(460)),Sd=Error(o(474)),Sn=Error(o(542)),hr={then:function(){}};function Cd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Cn(){}function _d(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(Cn,Cn),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Md(t),t;default:if(typeof a.status=="string")a.then(Cn,Cn);else{if(t=Re,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var n=a;n.status="fulfilled",n.value=l}},function(l){if(a.status==="pending"){var n=a;n.status="rejected",n.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Md(t),t}throw ml=a,ul}}var ml=null;function Ed(){if(ml===null)throw Error(o(459));var t=ml;return ml=null,t}function Md(t){if(t===ul||t===Sn)throw Error(o(483))}var ha=!1;function fr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pr(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pa(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(_e&2)!==0){var n=l.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),l.pending=a,a=bn(t),fd(t,null,s),a}return gn(t,l,a,s),bn(t)}function xl(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,No(t,s)}}function gr(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var f={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};c===null?n=c=f:c=c.next=f,s=s.next}while(s!==null);c===null?n=c=a:c=c.next=a}else n=c=a;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:c,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var br=!1;function hl(){if(br){var t=vs;if(t!==null)throw t}}function fl(t,a,s,l){br=!1;var n=t.updateQueue;ha=!1;var c=n.firstBaseUpdate,f=n.lastBaseUpdate,_=n.shared.pending;if(_!==null){n.shared.pending=null;var $=_,F=$.next;$.next=null,f===null?c=F:f.next=F,f=$;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,_=ee.lastBaseUpdate,_!==f&&(_===null?ee.firstBaseUpdate=F:_.next=F,ee.lastBaseUpdate=$))}if(c!==null){var se=n.baseState;f=0,ee=F=$=null,_=c;do{var W=_.lane&-536870913,I=W!==_.lane;if(I?(Ne&W)===W:(l&W)===W){W!==0&&W===ys&&(br=!0),ee!==null&&(ee=ee.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var fe=t,me=_;W=a;var Te=s;switch(me.tag){case 1:if(fe=me.payload,typeof fe=="function"){se=fe.call(Te,se,W);break e}se=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,W=typeof fe=="function"?fe.call(Te,se,W):fe,W==null)break e;se=S({},se,W);break e;case 2:ha=!0}}W=_.callback,W!==null&&(t.flags|=64,I&&(t.flags|=8192),I=n.callbacks,I===null?n.callbacks=[W]:I.push(W))}else I={lane:W,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ee===null?(F=ee=I,$=se):ee=ee.next=I,f|=W;if(_=_.next,_===null){if(_=n.shared.pending,_===null)break;I=_,_=I.next,I.next=null,n.lastBaseUpdate=I,n.shared.pending=null}}while(!0);ee===null&&($=se),n.baseState=$,n.firstBaseUpdate=F,n.lastBaseUpdate=ee,c===null&&(n.shared.lanes=0),ka|=f,t.lanes=f,t.memoizedState=se}}function Ad(t,a){if(typeof t!="function")throw Error(o(191,t));t.call(a)}function Td(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Ad(s[t],a)}var js=Z(null),_n=Z(0);function Dd(t,a){t=na,X(_n,t),X(js,a),na=t|a.baseLanes}function yr(){X(_n,na),X(js,js.current)}function vr(){na=_n.current,P(js),P(_n)}var ga=0,be=null,Me=null,Qe=null,En=!1,Ns=!1,Ja=!1,Mn=0,pl=0,ws=null,df=0;function Ue(){throw Error(o(321))}function jr(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!ft(t[s],a[s]))return!1;return!0}function Nr(t,a,s,l,n,c){return ga=c,be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,h.H=t===null||t.memoizedState===null?fu:pu,Ja=!1,c=s(l,n),Ja=!1,Ns&&(c=qd(a,s,l,n)),Rd(t),c}function Rd(t){h.H=On;var a=Me!==null&&Me.next!==null;if(ga=0,Qe=Me=be=null,En=!1,pl=0,ws=null,a)throw Error(o(300));t===null||Ke||(t=t.dependencies,t!==null&&Nn(t)&&(Ke=!0))}function qd(t,a,s,l){be=t;var n=0;do{if(Ns&&(ws=null),pl=0,Ns=!1,25<=n)throw Error(o(301));if(n+=1,Qe=Me=null,t.updateQueue!=null){var c=t.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}h.H=gf,c=a(s,l)}while(Ns);return c}function uf(){var t=h.H,a=t.useState()[0];return a=typeof a.then=="function"?gl(a):a,t=t.useState()[0],(Me!==null?Me.memoizedState:null)!==t&&(be.flags|=1024),a}function wr(){var t=Mn!==0;return Mn=0,t}function kr(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Sr(t){if(En){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}En=!1}ga=0,Qe=Me=be=null,Ns=!1,pl=Mn=0,ws=null}function ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Xe(){if(Me===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var a=Qe===null?be.memoizedState:Qe.next;if(a!==null)Qe=a,Me=t;else{if(t===null)throw be.alternate===null?Error(o(467)):Error(o(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Cr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var a=pl;return pl+=1,ws===null&&(ws=[]),t=_d(ws,t,a),a=be,(Qe===null?a.memoizedState:Qe.next)===null&&(a=a.alternate,h.H=a===null||a.memoizedState===null?fu:pu),t}function An(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===T)return lt(t)}throw Error(o(438,String(t)))}function _r(t){var a=null,s=be.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(n){return n.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Cr(),be.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=G;return a.index++,s}function It(t,a){return typeof a=="function"?a(t):a}function Tn(t){var a=Xe();return Er(a,Me,t)}function Er(t,a,s){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=s;var n=t.baseQueue,c=l.pending;if(c!==null){if(n!==null){var f=n.next;n.next=c.next,c.next=f}a.baseQueue=n=c,l.pending=null}if(c=t.baseState,n===null)t.memoizedState=c;else{a=n.next;var _=f=null,$=null,F=a,ee=!1;do{var se=F.lane&-536870913;if(se!==F.lane?(Ne&se)===se:(ga&se)===se){var W=F.revertLane;if(W===0)$!==null&&($=$.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),se===ys&&(ee=!0);else if((ga&W)===W){F=F.next,W===ys&&(ee=!0);continue}else se={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},$===null?(_=$=se,f=c):$=$.next=se,be.lanes|=W,ka|=W;se=F.action,Ja&&s(c,se),c=F.hasEagerState?F.eagerState:s(c,se)}else W={lane:se,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},$===null?(_=$=W,f=c):$=$.next=W,be.lanes|=se,ka|=se;F=F.next}while(F!==null&&F!==a);if($===null?f=c:$.next=_,!ft(c,t.memoizedState)&&(Ke=!0,ee&&(s=vs,s!==null)))throw s;t.memoizedState=c,t.baseState=f,t.baseQueue=$,l.lastRenderedState=c}return n===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Mr(t){var a=Xe(),s=a.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=t;var l=s.dispatch,n=s.pending,c=a.memoizedState;if(n!==null){s.pending=null;var f=n=n.next;do c=t(c,f.action),f=f.next;while(f!==n);ft(c,a.memoizedState)||(Ke=!0),a.memoizedState=c,a.baseQueue===null&&(a.baseState=c),s.lastRenderedState=c}return[c,l]}function Od(t,a,s){var l=be,n=Xe(),c=Ce;if(c){if(s===void 0)throw Error(o(407));s=s()}else s=a();var f=!ft((Me||n).memoizedState,s);f&&(n.memoizedState=s,Ke=!0),n=n.queue;var _=Ld.bind(null,l,n,t);if(bl(2048,8,_,[t]),n.getSnapshot!==a||f||Qe!==null&&Qe.memoizedState.tag&1){if(l.flags|=2048,ks(9,Dn(),Hd.bind(null,l,n,s,a),null),Re===null)throw Error(o(349));c||(ga&124)!==0||zd(l,a,s)}return s}function zd(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=be.updateQueue,a===null?(a=Cr(),be.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Hd(t,a,s,l){a.value=s,a.getSnapshot=l,Bd(a)&&Ud(t)}function Ld(t,a,s){return s(function(){Bd(a)&&Ud(t)})}function Bd(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!ft(t,s)}catch{return!0}}function Ud(t){var a=fs(t,2);a!==null&&jt(a,t,2)}function Ar(t){var a=ot();if(typeof t=="function"){var s=t;if(t=s(),Ja){da(!0);try{s()}finally{da(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:t},a}function $d(t,a,s,l){return t.baseState=s,Er(t,Me,typeof l=="function"?l:It)}function mf(t,a,s,l,n){if(qn(t))throw Error(o(485));if(t=a.action,t!==null){var c={payload:n,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){c.listeners.push(f)}};h.T!==null?s(!0):c.isTransition=!1,l(c),s=a.pending,s===null?(c.next=a.pending=c,Gd(a,c)):(c.next=s.next,a.pending=s.next=c)}}function Gd(t,a){var s=a.action,l=a.payload,n=t.state;if(a.isTransition){var c=h.T,f={};h.T=f;try{var _=s(n,l),$=h.S;$!==null&&$(f,_),Yd(t,a,_)}catch(F){Tr(t,a,F)}finally{h.T=c}}else try{c=s(n,l),Yd(t,a,c)}catch(F){Tr(t,a,F)}}function Yd(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Qd(t,a,l)},function(l){return Tr(t,a,l)}):Qd(t,a,s)}function Qd(t,a,s){a.status="fulfilled",a.value=s,Xd(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,Gd(t,s)))}function Tr(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,Xd(a),a=a.next;while(a!==l)}t.action=null}function Xd(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Vd(t,a){return a}function Zd(t,a){if(Ce){var s=Re.formState;if(s!==null){e:{var l=be;if(Ce){if(Le){t:{for(var n=Le,c=Lt;n.nodeType!==8;){if(!c){n=null;break t}if(n=Ot(n.nextSibling),n===null){n=null;break t}}c=n.data,n=c==="F!"||c==="F"?n:null}if(n){Le=Ot(n.nextSibling),l=n.data==="F!";break e}}Qa(l)}l=!1}l&&(a=s[0])}}return s=ot(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:a},s.queue=l,s=mu.bind(null,be,l),l.dispatch=s,l=Ar(!1),c=zr.bind(null,be,!1,l.queue),l=ot(),n={state:a,dispatch:null,action:t,pending:null},l.queue=n,s=mf.bind(null,be,n,c,s),n.dispatch=s,l.memoizedState=t,[a,s,!1]}function Jd(t){var a=Xe();return Kd(a,Me,t)}function Kd(t,a,s){if(a=Er(t,a,Vd)[0],t=Tn(It)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=gl(a)}catch(f){throw f===ul?Sn:f}else l=a;a=Xe();var n=a.queue,c=n.dispatch;return s!==a.memoizedState&&(be.flags|=2048,ks(9,Dn(),xf.bind(null,n,s),null)),[l,c,t]}function xf(t,a){t.action=a}function Fd(t){var a=Xe(),s=Me;if(s!==null)return Kd(a,s,t);Xe(),a=a.memoizedState,s=Xe();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function ks(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=be.updateQueue,a===null&&(a=Cr(),be.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function Dn(){return{destroy:void 0,resource:void 0}}function Pd(){return Xe().memoizedState}function Rn(t,a,s,l){var n=ot();l=l===void 0?null:l,be.flags|=t,n.memoizedState=ks(1|a,Dn(),s,l)}function bl(t,a,s,l){var n=Xe();l=l===void 0?null:l;var c=n.memoizedState.inst;Me!==null&&l!==null&&jr(l,Me.memoizedState.deps)?n.memoizedState=ks(a,c,s,l):(be.flags|=t,n.memoizedState=ks(1|a,c,s,l))}function Wd(t,a){Rn(8390656,8,t,a)}function Id(t,a){bl(2048,8,t,a)}function eu(t,a){return bl(4,2,t,a)}function tu(t,a){return bl(4,4,t,a)}function au(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function su(t,a,s){s=s!=null?s.concat([t]):null,bl(4,4,au.bind(null,a,t),s)}function Dr(){}function lu(t,a){var s=Xe();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&jr(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function nu(t,a){var s=Xe();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&jr(a,l[1]))return l[0];if(l=t(),Ja){da(!0);try{t()}finally{da(!1)}}return s.memoizedState=[l,a],l}function Rr(t,a,s){return s===void 0||(ga&1073741824)!==0?t.memoizedState=a:(t.memoizedState=s,t=cm(),be.lanes|=t,ka|=t,s)}function iu(t,a,s,l){return ft(s,a)?s:js.current!==null?(t=Rr(t,s,l),ft(t,a)||(Ke=!0),t):(ga&42)===0?(Ke=!0,t.memoizedState=s):(t=cm(),be.lanes|=t,ka|=t,a)}function ru(t,a,s,l,n){var c=H.p;H.p=c!==0&&8>c?c:8;var f=h.T,_={};h.T=_,zr(t,!1,a,s);try{var $=n(),F=h.S;if(F!==null&&F(_,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ee=of($,l);yl(t,a,ee,vt(t))}else yl(t,a,l,vt(t))}catch(se){yl(t,a,{then:function(){},status:"rejected",reason:se},vt())}finally{H.p=c,h.T=f}}function hf(){}function qr(t,a,s,l){if(t.tag!==5)throw Error(o(476));var n=cu(t).queue;ru(t,n,a,J,s===null?hf:function(){return ou(t),s(l)})}function cu(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:J},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function ou(t){var a=cu(t).next.queue;yl(t,a,{},vt())}function Or(){return lt(Hl)}function du(){return Xe().memoizedState}function uu(){return Xe().memoizedState}function ff(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=vt();t=fa(s);var l=pa(a,t,s);l!==null&&(jt(l,a,s),xl(l,a,s)),a={cache:ur()},t.payload=a;return}a=a.return}}function pf(t,a,s){var l=vt();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},qn(t)?xu(a,s):(s=tr(t,a,s,l),s!==null&&(jt(s,t,l),hu(s,a,l)))}function mu(t,a,s){var l=vt();yl(t,a,s,l)}function yl(t,a,s,l){var n={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(qn(t))xu(a,n);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=a.lastRenderedReducer,c!==null))try{var f=a.lastRenderedState,_=c(f,s);if(n.hasEagerState=!0,n.eagerState=_,ft(_,f))return gn(t,a,n,0),Re===null&&pn(),!1}catch{}finally{}if(s=tr(t,a,n,l),s!==null)return jt(s,t,l),hu(s,a,l),!0}return!1}function zr(t,a,s,l){if(l={lane:2,revertLane:hc(),action:l,hasEagerState:!1,eagerState:null,next:null},qn(t)){if(a)throw Error(o(479))}else a=tr(t,s,l,2),a!==null&&jt(a,t,2)}function qn(t){var a=t.alternate;return t===be||a!==null&&a===be}function xu(t,a){Ns=En=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function hu(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,No(t,s)}}var On={readContext:lt,use:An,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue},fu={readContext:lt,use:An,useCallback:function(t,a){return ot().memoizedState=[t,a===void 0?null:a],t},useContext:lt,useEffect:Wd,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,Rn(4194308,4,au.bind(null,a,t),s)},useLayoutEffect:function(t,a){return Rn(4194308,4,t,a)},useInsertionEffect:function(t,a){Rn(4,2,t,a)},useMemo:function(t,a){var s=ot();a=a===void 0?null:a;var l=t();if(Ja){da(!0);try{t()}finally{da(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=ot();if(s!==void 0){var n=s(a);if(Ja){da(!0);try{s(a)}finally{da(!1)}}}else n=a;return l.memoizedState=l.baseState=n,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=pf.bind(null,be,t),[l.memoizedState,t]},useRef:function(t){var a=ot();return t={current:t},a.memoizedState=t},useState:function(t){t=Ar(t);var a=t.queue,s=mu.bind(null,be,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Dr,useDeferredValue:function(t,a){var s=ot();return Rr(s,t,a)},useTransition:function(){var t=Ar(!1);return t=ru.bind(null,be,t.queue,!0,!1),ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=be,n=ot();if(Ce){if(s===void 0)throw Error(o(407));s=s()}else{if(s=a(),Re===null)throw Error(o(349));(Ne&124)!==0||zd(l,a,s)}n.memoizedState=s;var c={value:s,getSnapshot:a};return n.queue=c,Wd(Ld.bind(null,l,c,t),[t]),l.flags|=2048,ks(9,Dn(),Hd.bind(null,l,c,s,a),null),s},useId:function(){var t=ot(),a=Re.identifierPrefix;if(Ce){var s=Ft,l=Kt;s=(l&~(1<<32-ht(l)-1)).toString(32)+s,a="«"+a+"R"+s,s=Mn++,0<s&&(a+="H"+s.toString(32)),a+="»"}else s=df++,a="«"+a+"r"+s.toString(32)+"»";return t.memoizedState=a},useHostTransitionStatus:Or,useFormState:Zd,useActionState:Zd,useOptimistic:function(t){var a=ot();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=zr.bind(null,be,!0,s),s.dispatch=a,[t,a]},useMemoCache:_r,useCacheRefresh:function(){return ot().memoizedState=ff.bind(null,be)}},pu={readContext:lt,use:An,useCallback:lu,useContext:lt,useEffect:Id,useImperativeHandle:su,useInsertionEffect:eu,useLayoutEffect:tu,useMemo:nu,useReducer:Tn,useRef:Pd,useState:function(){return Tn(It)},useDebugValue:Dr,useDeferredValue:function(t,a){var s=Xe();return iu(s,Me.memoizedState,t,a)},useTransition:function(){var t=Tn(It)[0],a=Xe().memoizedState;return[typeof t=="boolean"?t:gl(t),a]},useSyncExternalStore:Od,useId:du,useHostTransitionStatus:Or,useFormState:Jd,useActionState:Jd,useOptimistic:function(t,a){var s=Xe();return $d(s,Me,t,a)},useMemoCache:_r,useCacheRefresh:uu},gf={readContext:lt,use:An,useCallback:lu,useContext:lt,useEffect:Id,useImperativeHandle:su,useInsertionEffect:eu,useLayoutEffect:tu,useMemo:nu,useReducer:Mr,useRef:Pd,useState:function(){return Mr(It)},useDebugValue:Dr,useDeferredValue:function(t,a){var s=Xe();return Me===null?Rr(s,t,a):iu(s,Me.memoizedState,t,a)},useTransition:function(){var t=Mr(It)[0],a=Xe().memoizedState;return[typeof t=="boolean"?t:gl(t),a]},useSyncExternalStore:Od,useId:du,useHostTransitionStatus:Or,useFormState:Fd,useActionState:Fd,useOptimistic:function(t,a){var s=Xe();return Me!==null?$d(s,Me,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:_r,useCacheRefresh:uu},Ss=null,vl=0;function zn(t){var a=vl;return vl+=1,Ss===null&&(Ss=[]),_d(Ss,t,a)}function jl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Hn(t,a){throw a.$$typeof===b?Error(o(525)):(t=Object.prototype.toString.call(a),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function gu(t){var a=t._init;return a(t._payload)}function bu(t){function a(V,Q){if(t){var K=V.deletions;K===null?(V.deletions=[Q],V.flags|=16):K.push(Q)}}function s(V,Q){if(!t)return null;for(;Q!==null;)a(V,Q),Q=Q.sibling;return null}function l(V){for(var Q=new Map;V!==null;)V.key!==null?Q.set(V.key,V):Q.set(V.index,V),V=V.sibling;return Q}function n(V,Q){return V=Jt(V,Q),V.index=0,V.sibling=null,V}function c(V,Q,K){return V.index=K,t?(K=V.alternate,K!==null?(K=K.index,K<Q?(V.flags|=67108866,Q):K):(V.flags|=67108866,Q)):(V.flags|=1048576,Q)}function f(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function _(V,Q,K,te){return Q===null||Q.tag!==6?(Q=sr(K,V.mode,te),Q.return=V,Q):(Q=n(Q,K),Q.return=V,Q)}function $(V,Q,K,te){var de=K.type;return de===C?ee(V,Q,K.props.children,te,K.key):Q!==null&&(Q.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===B&&gu(de)===Q.type)?(Q=n(Q,K.props),jl(Q,K),Q.return=V,Q):(Q=yn(K.type,K.key,K.props,null,V.mode,te),jl(Q,K),Q.return=V,Q)}function F(V,Q,K,te){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==K.containerInfo||Q.stateNode.implementation!==K.implementation?(Q=lr(K,V.mode,te),Q.return=V,Q):(Q=n(Q,K.children||[]),Q.return=V,Q)}function ee(V,Q,K,te,de){return Q===null||Q.tag!==7?(Q=Ua(K,V.mode,te,de),Q.return=V,Q):(Q=n(Q,K),Q.return=V,Q)}function se(V,Q,K){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=sr(""+Q,V.mode,K),Q.return=V,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:return K=yn(Q.type,Q.key,Q.props,null,V.mode,K),jl(K,Q),K.return=V,K;case O:return Q=lr(Q,V.mode,K),Q.return=V,Q;case B:var te=Q._init;return Q=te(Q._payload),se(V,Q,K)}if(q(Q)||E(Q))return Q=Ua(Q,V.mode,K,null),Q.return=V,Q;if(typeof Q.then=="function")return se(V,zn(Q),K);if(Q.$$typeof===T)return se(V,wn(V,Q),K);Hn(V,Q)}return null}function W(V,Q,K,te){var de=Q!==null?Q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return de!==null?null:_(V,Q,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return K.key===de?$(V,Q,K,te):null;case O:return K.key===de?F(V,Q,K,te):null;case B:return de=K._init,K=de(K._payload),W(V,Q,K,te)}if(q(K)||E(K))return de!==null?null:ee(V,Q,K,te,null);if(typeof K.then=="function")return W(V,Q,zn(K),te);if(K.$$typeof===T)return W(V,Q,wn(V,K),te);Hn(V,K)}return null}function I(V,Q,K,te,de){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return V=V.get(K)||null,_(Q,V,""+te,de);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case D:return V=V.get(te.key===null?K:te.key)||null,$(Q,V,te,de);case O:return V=V.get(te.key===null?K:te.key)||null,F(Q,V,te,de);case B:var ye=te._init;return te=ye(te._payload),I(V,Q,K,te,de)}if(q(te)||E(te))return V=V.get(K)||null,ee(Q,V,te,de,null);if(typeof te.then=="function")return I(V,Q,K,zn(te),de);if(te.$$typeof===T)return I(V,Q,K,wn(Q,te),de);Hn(Q,te)}return null}function fe(V,Q,K,te){for(var de=null,ye=null,ue=Q,xe=Q=0,Pe=null;ue!==null&&xe<K.length;xe++){ue.index>xe?(Pe=ue,ue=null):Pe=ue.sibling;var Se=W(V,ue,K[xe],te);if(Se===null){ue===null&&(ue=Pe);break}t&&ue&&Se.alternate===null&&a(V,ue),Q=c(Se,Q,xe),ye===null?de=Se:ye.sibling=Se,ye=Se,ue=Pe}if(xe===K.length)return s(V,ue),Ce&&Ga(V,xe),de;if(ue===null){for(;xe<K.length;xe++)ue=se(V,K[xe],te),ue!==null&&(Q=c(ue,Q,xe),ye===null?de=ue:ye.sibling=ue,ye=ue);return Ce&&Ga(V,xe),de}for(ue=l(ue);xe<K.length;xe++)Pe=I(ue,V,xe,K[xe],te),Pe!==null&&(t&&Pe.alternate!==null&&ue.delete(Pe.key===null?xe:Pe.key),Q=c(Pe,Q,xe),ye===null?de=Pe:ye.sibling=Pe,ye=Pe);return t&&ue.forEach(function(Ra){return a(V,Ra)}),Ce&&Ga(V,xe),de}function me(V,Q,K,te){if(K==null)throw Error(o(151));for(var de=null,ye=null,ue=Q,xe=Q=0,Pe=null,Se=K.next();ue!==null&&!Se.done;xe++,Se=K.next()){ue.index>xe?(Pe=ue,ue=null):Pe=ue.sibling;var Ra=W(V,ue,Se.value,te);if(Ra===null){ue===null&&(ue=Pe);break}t&&ue&&Ra.alternate===null&&a(V,ue),Q=c(Ra,Q,xe),ye===null?de=Ra:ye.sibling=Ra,ye=Ra,ue=Pe}if(Se.done)return s(V,ue),Ce&&Ga(V,xe),de;if(ue===null){for(;!Se.done;xe++,Se=K.next())Se=se(V,Se.value,te),Se!==null&&(Q=c(Se,Q,xe),ye===null?de=Se:ye.sibling=Se,ye=Se);return Ce&&Ga(V,xe),de}for(ue=l(ue);!Se.done;xe++,Se=K.next())Se=I(ue,V,xe,Se.value,te),Se!==null&&(t&&Se.alternate!==null&&ue.delete(Se.key===null?xe:Se.key),Q=c(Se,Q,xe),ye===null?de=Se:ye.sibling=Se,ye=Se);return t&&ue.forEach(function(b0){return a(V,b0)}),Ce&&Ga(V,xe),de}function Te(V,Q,K,te){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case D:e:{for(var de=K.key;Q!==null;){if(Q.key===de){if(de=K.type,de===C){if(Q.tag===7){s(V,Q.sibling),te=n(Q,K.props.children),te.return=V,V=te;break e}}else if(Q.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===B&&gu(de)===Q.type){s(V,Q.sibling),te=n(Q,K.props),jl(te,K),te.return=V,V=te;break e}s(V,Q);break}else a(V,Q);Q=Q.sibling}K.type===C?(te=Ua(K.props.children,V.mode,te,K.key),te.return=V,V=te):(te=yn(K.type,K.key,K.props,null,V.mode,te),jl(te,K),te.return=V,V=te)}return f(V);case O:e:{for(de=K.key;Q!==null;){if(Q.key===de)if(Q.tag===4&&Q.stateNode.containerInfo===K.containerInfo&&Q.stateNode.implementation===K.implementation){s(V,Q.sibling),te=n(Q,K.children||[]),te.return=V,V=te;break e}else{s(V,Q);break}else a(V,Q);Q=Q.sibling}te=lr(K,V.mode,te),te.return=V,V=te}return f(V);case B:return de=K._init,K=de(K._payload),Te(V,Q,K,te)}if(q(K))return fe(V,Q,K,te);if(E(K)){if(de=E(K),typeof de!="function")throw Error(o(150));return K=de.call(K),me(V,Q,K,te)}if(typeof K.then=="function")return Te(V,Q,zn(K),te);if(K.$$typeof===T)return Te(V,Q,wn(V,K),te);Hn(V,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,Q!==null&&Q.tag===6?(s(V,Q.sibling),te=n(Q,K),te.return=V,V=te):(s(V,Q),te=sr(K,V.mode,te),te.return=V,V=te),f(V)):s(V,Q)}return function(V,Q,K,te){try{vl=0;var de=Te(V,Q,K,te);return Ss=null,de}catch(ue){if(ue===ul||ue===Sn)throw ue;var ye=pt(29,ue,null,V.mode);return ye.lanes=te,ye.return=V,ye}finally{}}}var Cs=bu(!0),yu=bu(!1),Et=Z(null),Bt=null;function ba(t){var a=t.alternate;X(Ze,Ze.current&1),X(Et,t),Bt===null&&(a===null||js.current!==null||a.memoizedState!==null)&&(Bt=t)}function vu(t){if(t.tag===22){if(X(Ze,Ze.current),X(Et,t),Bt===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(Bt=t)}}else ya()}function ya(){X(Ze,Ze.current),X(Et,Et.current)}function ea(t){P(Et),Bt===t&&(Bt=null),P(Ze)}var Ze=Z(0);function Ln(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Cc(s)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Hr(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:S({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Lr={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=vt(),n=fa(l);n.payload=a,s!=null&&(n.callback=s),a=pa(t,n,l),a!==null&&(jt(a,t,l),xl(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=vt(),n=fa(l);n.tag=1,n.payload=a,s!=null&&(n.callback=s),a=pa(t,n,l),a!==null&&(jt(a,t,l),xl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=vt(),l=fa(s);l.tag=2,a!=null&&(l.callback=a),a=pa(t,l,s),a!==null&&(jt(a,t,s),xl(a,t,s))}};function ju(t,a,s,l,n,c,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,c,f):a.prototype&&a.prototype.isPureReactComponent?!sl(s,l)||!sl(n,c):!0}function Nu(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&Lr.enqueueReplaceState(a,a.state,null)}function Ka(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=S({},s));for(var n in t)s[n]===void 0&&(s[n]=t[n])}return s}var Bn=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function wu(t){Bn(t)}function ku(t){console.error(t)}function Su(t){Bn(t)}function Un(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Cu(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Br(t,a,s){return s=fa(s),s.tag=3,s.payload={element:null},s.callback=function(){Un(t,a)},s}function _u(t){return t=fa(t),t.tag=3,t}function Eu(t,a,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var c=l.value;t.payload=function(){return n(c)},t.callback=function(){Cu(a,s,l)}}var f=s.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(t.callback=function(){Cu(a,s,l),typeof n!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function bf(t,a,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&cl(a,s,n,!0),s=Et.current,s!==null){switch(s.tag){case 13:return Bt===null?oc():s.alternate===null&&Be===0&&(Be=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===hr?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),uc(t,l,n)),!1;case 22:return s.flags|=65536,l===hr?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),uc(t,l,n)),!1}throw Error(o(435,s.tag))}return uc(t,l,n),oc(),!1}if(Ce)return a=Et.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=n,l!==rr&&(t=Error(o(422),{cause:l}),rl(kt(t,s)))):(l!==rr&&(a=Error(o(423),{cause:l}),rl(kt(a,s))),t=t.current.alternate,t.flags|=65536,n&=-n,t.lanes|=n,l=kt(l,s),n=Br(t.stateNode,l,n),gr(t,n),Be!==4&&(Be=2)),!1;var c=Error(o(520),{cause:l});if(c=kt(c,s),El===null?El=[c]:El.push(c),Be!==4&&(Be=2),a===null)return!0;l=kt(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=n&-n,s.lanes|=t,t=Br(s.stateNode,l,t),gr(s,t),!1;case 1:if(a=s.type,c=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Sa===null||!Sa.has(c))))return s.flags|=65536,n&=-n,s.lanes|=n,n=_u(n),Eu(n,t,s,l),gr(s,n),!1}s=s.return}while(s!==null);return!1}var Mu=Error(o(461)),Ke=!1;function We(t,a,s,l){a.child=t===null?yu(a,null,s,l):Cs(a,t.child,s,l)}function Au(t,a,s,l,n){s=s.render;var c=a.ref;if("ref"in l){var f={};for(var _ in l)_!=="ref"&&(f[_]=l[_])}else f=l;return Va(a),l=Nr(t,a,s,f,c,n),_=wr(),t!==null&&!Ke?(kr(t,a,n),ta(t,a,n)):(Ce&&_&&nr(a),a.flags|=1,We(t,a,l,n),a.child)}function Tu(t,a,s,l,n){if(t===null){var c=s.type;return typeof c=="function"&&!ar(c)&&c.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=c,Du(t,a,c,l,n)):(t=yn(s.type,null,l,a,a.mode,n),t.ref=a.ref,t.return=a,a.child=t)}if(c=t.child,!Zr(t,n)){var f=c.memoizedProps;if(s=s.compare,s=s!==null?s:sl,s(f,l)&&t.ref===a.ref)return ta(t,a,n)}return a.flags|=1,t=Jt(c,l),t.ref=a.ref,t.return=a,a.child=t}function Du(t,a,s,l,n){if(t!==null){var c=t.memoizedProps;if(sl(c,l)&&t.ref===a.ref)if(Ke=!1,a.pendingProps=l=c,Zr(t,n))(t.flags&131072)!==0&&(Ke=!0);else return a.lanes=t.lanes,ta(t,a,n)}return Ur(t,a,s,l,n)}function Ru(t,a,s){var l=a.pendingProps,n=l.children,c=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((a.flags&128)!==0){if(l=c!==null?c.baseLanes|s:s,t!==null){for(n=a.child=t.child,c=0;n!==null;)c=c|n.lanes|n.childLanes,n=n.sibling;a.childLanes=c&~l}else a.childLanes=0,a.child=null;return qu(t,a,l,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&kn(a,c!==null?c.cachePool:null),c!==null?Dd(a,c):yr(),vu(a);else return a.lanes=a.childLanes=536870912,qu(t,a,c!==null?c.baseLanes|s:s,s)}else c!==null?(kn(a,c.cachePool),Dd(a,c),ya(),a.memoizedState=null):(t!==null&&kn(a,null),yr(),ya());return We(t,a,n,s),a.child}function qu(t,a,s,l){var n=xr();return n=n===null?null:{parent:Ve._currentValue,pool:n},a.memoizedState={baseLanes:s,cachePool:n},t!==null&&kn(a,null),yr(),vu(a),t!==null&&cl(t,a,l,!0),null}function $n(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function Ur(t,a,s,l,n){return Va(a),s=Nr(t,a,s,l,void 0,n),l=wr(),t!==null&&!Ke?(kr(t,a,n),ta(t,a,n)):(Ce&&l&&nr(a),a.flags|=1,We(t,a,s,n),a.child)}function Ou(t,a,s,l,n,c){return Va(a),a.updateQueue=null,s=qd(a,l,s,n),Rd(t),l=wr(),t!==null&&!Ke?(kr(t,a,c),ta(t,a,c)):(Ce&&l&&nr(a),a.flags|=1,We(t,a,s,c),a.child)}function zu(t,a,s,l,n){if(Va(a),a.stateNode===null){var c=ps,f=s.contextType;typeof f=="object"&&f!==null&&(c=lt(f)),c=new s(l,c),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Lr,a.stateNode=c,c._reactInternals=a,c=a.stateNode,c.props=l,c.state=a.memoizedState,c.refs={},fr(a),f=s.contextType,c.context=typeof f=="object"&&f!==null?lt(f):ps,c.state=a.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Hr(a,s,f,l),c.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(f=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),f!==c.state&&Lr.enqueueReplaceState(c,c.state,null),fl(a,l,c,n),hl(),c.state=a.memoizedState),typeof c.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){c=a.stateNode;var _=a.memoizedProps,$=Ka(s,_);c.props=$;var F=c.context,ee=s.contextType;f=ps,typeof ee=="object"&&ee!==null&&(f=lt(ee));var se=s.getDerivedStateFromProps;ee=typeof se=="function"||typeof c.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,ee||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(_||F!==f)&&Nu(a,c,l,f),ha=!1;var W=a.memoizedState;c.state=W,fl(a,l,c,n),hl(),F=a.memoizedState,_||W!==F||ha?(typeof se=="function"&&(Hr(a,s,se,l),F=a.memoizedState),($=ha||ju(a,s,$,l,W,F,f))?(ee||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(a.flags|=4194308)):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=F),c.props=l,c.state=F,c.context=f,l=$):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{c=a.stateNode,pr(t,a),f=a.memoizedProps,ee=Ka(s,f),c.props=ee,se=a.pendingProps,W=c.context,F=s.contextType,$=ps,typeof F=="object"&&F!==null&&($=lt(F)),_=s.getDerivedStateFromProps,(F=typeof _=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==se||W!==$)&&Nu(a,c,l,$),ha=!1,W=a.memoizedState,c.state=W,fl(a,l,c,n),hl();var I=a.memoizedState;f!==se||W!==I||ha||t!==null&&t.dependencies!==null&&Nn(t.dependencies)?(typeof _=="function"&&(Hr(a,s,_,l),I=a.memoizedState),(ee=ha||ju(a,s,ee,l,W,I,$)||t!==null&&t.dependencies!==null&&Nn(t.dependencies))?(F||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(l,I,$),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(l,I,$)),typeof c.componentDidUpdate=="function"&&(a.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&W===t.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&W===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=I),c.props=l,c.state=I,c.context=$,l=ee):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&W===t.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&W===t.memoizedState||(a.flags|=1024),l=!1)}return c=l,$n(t,a),l=(a.flags&128)!==0,c||l?(c=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:c.render(),a.flags|=1,t!==null&&l?(a.child=Cs(a,t.child,null,n),a.child=Cs(a,null,s,n)):We(t,a,s,n),a.memoizedState=c.state,t=a.child):t=ta(t,a,n),t}function Hu(t,a,s,l){return il(),a.flags|=256,We(t,a,s,l),a.child}var $r={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gr(t){return{baseLanes:t,cachePool:kd()}}function Yr(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=Mt),t}function Lu(t,a,s){var l=a.pendingProps,n=!1,c=(a.flags&128)!==0,f;if((f=c)||(f=t!==null&&t.memoizedState===null?!1:(Ze.current&2)!==0),f&&(n=!0,a.flags&=-129),f=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ce){if(n?ba(a):ya(),Ce){var _=Le,$;if($=_){e:{for($=_,_=Lt;$.nodeType!==8;){if(!_){_=null;break e}if($=Ot($.nextSibling),$===null){_=null;break e}}_=$}_!==null?(a.memoizedState={dehydrated:_,treeContext:$a!==null?{id:Kt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},$=pt(18,null,null,0),$.stateNode=_,$.return=a,a.child=$,it=a,Le=null,$=!0):$=!1}$||Qa(a)}if(_=a.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Cc(_)?a.lanes=32:a.lanes=536870912,null;ea(a)}return _=l.children,l=l.fallback,n?(ya(),n=a.mode,_=Gn({mode:"hidden",children:_},n),l=Ua(l,n,s,null),_.return=a,l.return=a,_.sibling=l,a.child=_,n=a.child,n.memoizedState=Gr(s),n.childLanes=Yr(t,f,s),a.memoizedState=$r,l):(ba(a),Qr(a,_))}if($=t.memoizedState,$!==null&&(_=$.dehydrated,_!==null)){if(c)a.flags&256?(ba(a),a.flags&=-257,a=Xr(t,a,s)):a.memoizedState!==null?(ya(),a.child=t.child,a.flags|=128,a=null):(ya(),n=l.fallback,_=a.mode,l=Gn({mode:"visible",children:l.children},_),n=Ua(n,_,s,null),n.flags|=2,l.return=a,n.return=a,l.sibling=n,a.child=l,Cs(a,t.child,null,s),l=a.child,l.memoizedState=Gr(s),l.childLanes=Yr(t,f,s),a.memoizedState=$r,a=n);else if(ba(a),Cc(_)){if(f=_.nextSibling&&_.nextSibling.dataset,f)var F=f.dgst;f=F,l=Error(o(419)),l.stack="",l.digest=f,rl({value:l,source:null,stack:null}),a=Xr(t,a,s)}else if(Ke||cl(t,a,s,!1),f=(s&t.childLanes)!==0,Ke||f){if(f=Re,f!==null&&(l=s&-s,l=(l&42)!==0?1:_i(l),l=(l&(f.suspendedLanes|s))!==0?0:l,l!==0&&l!==$.retryLane))throw $.retryLane=l,fs(t,l),jt(f,t,l),Mu;_.data==="$?"||oc(),a=Xr(t,a,s)}else _.data==="$?"?(a.flags|=192,a.child=t.child,a=null):(t=$.treeContext,Le=Ot(_.nextSibling),it=a,Ce=!0,Ya=null,Lt=!1,t!==null&&(Ct[_t++]=Kt,Ct[_t++]=Ft,Ct[_t++]=$a,Kt=t.id,Ft=t.overflow,$a=a),a=Qr(a,l.children),a.flags|=4096);return a}return n?(ya(),n=l.fallback,_=a.mode,$=t.child,F=$.sibling,l=Jt($,{mode:"hidden",children:l.children}),l.subtreeFlags=$.subtreeFlags&65011712,F!==null?n=Jt(F,n):(n=Ua(n,_,s,null),n.flags|=2),n.return=a,l.return=a,l.sibling=n,a.child=l,l=n,n=a.child,_=t.child.memoizedState,_===null?_=Gr(s):($=_.cachePool,$!==null?(F=Ve._currentValue,$=$.parent!==F?{parent:F,pool:F}:$):$=kd(),_={baseLanes:_.baseLanes|s,cachePool:$}),n.memoizedState=_,n.childLanes=Yr(t,f,s),a.memoizedState=$r,l):(ba(a),s=t.child,t=s.sibling,s=Jt(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(f=a.deletions,f===null?(a.deletions=[t],a.flags|=16):f.push(t)),a.child=s,a.memoizedState=null,s)}function Qr(t,a){return a=Gn({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Gn(t,a){return t=pt(22,t,null,a),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Xr(t,a,s){return Cs(a,t.child,null,s),t=Qr(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Bu(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),or(t.return,a,s)}function Vr(t,a,s,l,n){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n}:(c.isBackwards=a,c.rendering=null,c.renderingStartTime=0,c.last=l,c.tail=s,c.tailMode=n)}function Uu(t,a,s){var l=a.pendingProps,n=l.revealOrder,c=l.tail;if(We(t,a,l.children,s),l=Ze.current,(l&2)!==0)l=l&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bu(t,s,a);else if(t.tag===19)Bu(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(X(Ze,l),n){case"forwards":for(s=a.child,n=null;s!==null;)t=s.alternate,t!==null&&Ln(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=a.child,a.child=null):(n=s.sibling,s.sibling=null),Vr(a,!1,n,s,c);break;case"backwards":for(s=null,n=a.child,a.child=null;n!==null;){if(t=n.alternate,t!==null&&Ln(t)===null){a.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}Vr(a,!0,s,null,c);break;case"together":Vr(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ta(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),ka|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(cl(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(o(153));if(a.child!==null){for(t=a.child,s=Jt(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=Jt(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function Zr(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Nn(t)))}function yf(t,a,s){switch(a.tag){case 3:he(a,a.stateNode.containerInfo),xa(a,Ve,t.memoizedState.cache),il();break;case 27:case 5:Qt(a);break;case 4:he(a,a.stateNode.containerInfo);break;case 10:xa(a,a.type,a.memoizedProps.value);break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ba(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Lu(t,a,s):(ba(a),t=ta(t,a,s),t!==null?t.sibling:null);ba(a);break;case 19:var n=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(cl(t,a,s,!1),l=(s&a.childLanes)!==0),n){if(l)return Uu(t,a,s);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),X(Ze,Ze.current),l)break;return null;case 22:case 23:return a.lanes=0,Ru(t,a,s);case 24:xa(a,Ve,t.memoizedState.cache)}return ta(t,a,s)}function $u(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)Ke=!0;else{if(!Zr(t,s)&&(a.flags&128)===0)return Ke=!1,yf(t,a,s);Ke=(t.flags&131072)!==0}else Ke=!1,Ce&&(a.flags&1048576)!==0&&gd(a,jn,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var l=a.elementType,n=l._init;if(l=n(l._payload),a.type=l,typeof l=="function")ar(l)?(t=Ka(l,t),a.tag=1,a=zu(null,a,l,t,s)):(a.tag=0,a=Ur(null,a,l,t,s));else{if(l!=null){if(n=l.$$typeof,n===A){a.tag=11,a=Au(null,a,l,t,s);break e}else if(n===Y){a.tag=14,a=Tu(null,a,l,t,s);break e}}throw a=R(l)||l,Error(o(306,a,""))}}return a;case 0:return Ur(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,n=Ka(l,a.pendingProps),zu(t,a,l,n,s);case 3:e:{if(he(a,a.stateNode.containerInfo),t===null)throw Error(o(387));l=a.pendingProps;var c=a.memoizedState;n=c.element,pr(t,a),fl(a,l,null,s);var f=a.memoizedState;if(l=f.cache,xa(a,Ve,l),l!==c.cache&&dr(a,[Ve],s,!0),hl(),l=f.element,c.isDehydrated)if(c={element:l,isDehydrated:!1,cache:f.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=Hu(t,a,l,s);break e}else if(l!==n){n=kt(Error(o(424)),a),rl(n),a=Hu(t,a,l,s);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Le=Ot(t.firstChild),it=a,Ce=!0,Ya=null,Lt=!0,s=yu(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(il(),l===n){a=ta(t,a,s);break e}We(t,a,l,s)}a=a.child}return a;case 26:return $n(t,a),t===null?(s=Xm(a.type,null,a.pendingProps,null))?a.memoizedState=s:Ce||(s=a.type,t=a.pendingProps,l=ai(oe.current).createElement(s),l[st]=a,l[rt]=t,et(l,s,t),Je(l),a.stateNode=l):a.memoizedState=Xm(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Qt(a),t===null&&Ce&&(l=a.stateNode=Gm(a.type,a.pendingProps,oe.current),it=a,Lt=!0,n=Le,Ea(a.type)?(_c=n,Le=Ot(l.firstChild)):Le=n),We(t,a,a.pendingProps.children,s),$n(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ce&&((n=l=Le)&&(l=Zf(l,a.type,a.pendingProps,Lt),l!==null?(a.stateNode=l,it=a,Le=Ot(l.firstChild),Lt=!1,n=!0):n=!1),n||Qa(a)),Qt(a),n=a.type,c=a.pendingProps,f=t!==null?t.memoizedProps:null,l=c.children,wc(n,c)?l=null:f!==null&&wc(n,f)&&(a.flags|=32),a.memoizedState!==null&&(n=Nr(t,a,uf,null,null,s),Hl._currentValue=n),$n(t,a),We(t,a,l,s),a.child;case 6:return t===null&&Ce&&((t=s=Le)&&(s=Jf(s,a.pendingProps,Lt),s!==null?(a.stateNode=s,it=a,Le=null,t=!0):t=!1),t||Qa(a)),null;case 13:return Lu(t,a,s);case 4:return he(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Cs(a,null,l,s):We(t,a,l,s),a.child;case 11:return Au(t,a,a.type,a.pendingProps,s);case 7:return We(t,a,a.pendingProps,s),a.child;case 8:return We(t,a,a.pendingProps.children,s),a.child;case 12:return We(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,xa(a,a.type,l.value),We(t,a,l.children,s),a.child;case 9:return n=a.type._context,l=a.pendingProps.children,Va(a),n=lt(n),l=l(n),a.flags|=1,We(t,a,l,s),a.child;case 14:return Tu(t,a,a.type,a.pendingProps,s);case 15:return Du(t,a,a.type,a.pendingProps,s);case 19:return Uu(t,a,s);case 31:return l=a.pendingProps,s=a.mode,l={mode:l.mode,children:l.children},t===null?(s=Gn(l,s),s.ref=a.ref,a.child=s,s.return=a,a=s):(s=Jt(t.child,l),s.ref=a.ref,a.child=s,s.return=a,a=s),a;case 22:return Ru(t,a,s);case 24:return Va(a),l=lt(Ve),t===null?(n=xr(),n===null&&(n=Re,c=ur(),n.pooledCache=c,c.refCount++,c!==null&&(n.pooledCacheLanes|=s),n=c),a.memoizedState={parent:l,cache:n},fr(a),xa(a,Ve,n)):((t.lanes&s)!==0&&(pr(t,a),fl(a,null,null,s),hl()),n=t.memoizedState,c=a.memoizedState,n.parent!==l?(n={parent:l,cache:l},a.memoizedState=n,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=n),xa(a,Ve,l)):(l=c.cache,xa(a,Ve,l),l!==n.cache&&dr(a,[Ve],s,!0))),We(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function aa(t){t.flags|=4}function Gu(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Fm(a)){if(a=Et.current,a!==null&&((Ne&4194048)===Ne?Bt!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||a!==Bt))throw ml=hr,Sd;t.flags|=8192}}function Yn(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?vo():536870912,t.lanes|=a,As|=a)}function Nl(t,a){if(!Ce)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function He(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function vf(t,a,s){var l=a.pendingProps;switch(ir(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(a),null;case 1:return He(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Wt(Ve),ze(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(nl(a)?aa(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vd())),He(a),null;case 26:return s=a.memoizedState,t===null?(aa(a),s!==null?(He(a),Gu(a,s)):(He(a),a.flags&=-16777217)):s?s!==t.memoizedState?(aa(a),He(a),Gu(a,s)):(He(a),a.flags&=-16777217):(t.memoizedProps!==l&&aa(a),He(a),a.flags&=-16777217),null;case 27:Dt(a),s=oe.current;var n=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return He(a),null}t=ne.current,nl(a)?bd(a):(t=Gm(n,l,s),a.stateNode=t,aa(a))}return He(a),null;case 5:if(Dt(a),s=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return He(a),null}if(t=ne.current,nl(a))bd(a);else{switch(n=ai(oe.current),t){case 1:t=n.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=n.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=n.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?n.createElement(s,{is:l.is}):n.createElement(s)}}t[st]=a,t[rt]=l;e:for(n=a.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}a.stateNode=t;e:switch(et(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&aa(a)}}return He(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(o(166));if(t=oe.current,nl(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,n=it,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}t[st]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Om(t.nodeValue,s)),t||Qa(a)}else t=ai(t).createTextNode(l),t[st]=a,a.stateNode=t}return He(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(n=nl(a),l!==null&&l.dehydrated!==null){if(t===null){if(!n)throw Error(o(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));n[st]=a}else il(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;He(a),n=!1}else n=vd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),n=!0;if(!n)return a.flags&256?(ea(a),a):(ea(a),null)}if(ea(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=a.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var c=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(c=l.memoizedState.cachePool.pool),c!==n&&(l.flags|=2048)}return s!==t&&s&&(a.child.flags|=8192),Yn(a,a.updateQueue),He(a),null;case 4:return ze(),t===null&&bc(a.stateNode.containerInfo),He(a),null;case 10:return Wt(a.type),He(a),null;case 19:if(P(Ze),n=a.memoizedState,n===null)return He(a),null;if(l=(a.flags&128)!==0,c=n.rendering,c===null)if(l)Nl(n,!1);else{if(Be!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(c=Ln(t),c!==null){for(a.flags|=128,Nl(n,!1),t=c.updateQueue,a.updateQueue=t,Yn(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)pd(s,t),s=s.sibling;return X(Ze,Ze.current&1|2),a.child}t=t.sibling}n.tail!==null&&Ht()>Vn&&(a.flags|=128,l=!0,Nl(n,!1),a.lanes=4194304)}else{if(!l)if(t=Ln(c),t!==null){if(a.flags|=128,l=!0,t=t.updateQueue,a.updateQueue=t,Yn(a,t),Nl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!Ce)return He(a),null}else 2*Ht()-n.renderingStartTime>Vn&&s!==536870912&&(a.flags|=128,l=!0,Nl(n,!1),a.lanes=4194304);n.isBackwards?(c.sibling=a.child,a.child=c):(t=n.last,t!==null?t.sibling=c:a.child=c,n.last=c)}return n.tail!==null?(a=n.tail,n.rendering=a,n.tail=a.sibling,n.renderingStartTime=Ht(),a.sibling=null,t=Ze.current,X(Ze,l?t&1|2:t&1),a):(He(a),null);case 22:case 23:return ea(a),vr(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(He(a),a.subtreeFlags&6&&(a.flags|=8192)):He(a),s=a.updateQueue,s!==null&&Yn(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&P(Za),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Wt(Ve),He(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function jf(t,a){switch(ir(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Wt(Ve),ze(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Dt(a),null;case 13:if(ea(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(o(340));il()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return P(Ze),null;case 4:return ze(),null;case 10:return Wt(a.type),null;case 22:case 23:return ea(a),vr(),t!==null&&P(Za),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Wt(Ve),null;case 25:return null;default:return null}}function Yu(t,a){switch(ir(a),a.tag){case 3:Wt(Ve),ze();break;case 26:case 27:case 5:Dt(a);break;case 4:ze();break;case 13:ea(a);break;case 19:P(Ze);break;case 10:Wt(a.type);break;case 22:case 23:ea(a),vr(),t!==null&&P(Za);break;case 24:Wt(Ve)}}function wl(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&t)===t){l=void 0;var c=s.create,f=s.inst;l=c(),f.destroy=l}s=s.next}while(s!==n)}}catch(_){De(a,a.return,_)}}function va(t,a,s){try{var l=a.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var c=n.next;l=c;do{if((l.tag&t)===t){var f=l.inst,_=f.destroy;if(_!==void 0){f.destroy=void 0,n=a;var $=s,F=_;try{F()}catch(ee){De(n,$,ee)}}}l=l.next}while(l!==c)}}catch(ee){De(a,a.return,ee)}}function Qu(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Td(a,s)}catch(l){De(t,t.return,l)}}}function Xu(t,a,s){s.props=Ka(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){De(t,a,l)}}function kl(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(n){De(t,a,n)}}function Ut(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){De(t,a,n)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){De(t,a,n)}else s.current=null}function Vu(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){De(t,t.return,n)}}function Jr(t,a,s){try{var l=t.stateNode;Gf(l,t.type,s,a),l[rt]=a}catch(n){De(t,t.return,n)}}function Zu(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ea(t.type)||t.tag===4}function Kr(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ea(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fr(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=ti));else if(l!==4&&(l===27&&Ea(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(Fr(t,a,s),t=t.sibling;t!==null;)Fr(t,a,s),t=t.sibling}function Qn(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&Ea(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Qn(t,a,s),t=t.sibling;t!==null;)Qn(t,a,s),t=t.sibling}function Ju(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);et(a,l,s),a[st]=t,a[rt]=s}catch(c){De(t,t.return,c)}}var sa=!1,$e=!1,Pr=!1,Ku=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Nf(t,a){if(t=t.containerInfo,jc=ci,t=id(t),Ki(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,c=l.focusNode;l=l.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var f=0,_=-1,$=-1,F=0,ee=0,se=t,W=null;t:for(;;){for(var I;se!==s||n!==0&&se.nodeType!==3||(_=f+n),se!==c||l!==0&&se.nodeType!==3||($=f+l),se.nodeType===3&&(f+=se.nodeValue.length),(I=se.firstChild)!==null;)W=se,se=I;for(;;){if(se===t)break t;if(W===s&&++F===n&&(_=f),W===c&&++ee===l&&($=f),(I=se.nextSibling)!==null)break;se=W,W=se.parentNode}se=I}s=_===-1||$===-1?null:{start:_,end:$}}else s=null}s=s||{start:0,end:0}}else s=null;for(Nc={focusedElem:t,selectionRange:s},ci=!1,Fe=a;Fe!==null;)if(a=Fe,t=a.child,(a.subtreeFlags&1024)!==0&&t!==null)t.return=a,Fe=t;else for(;Fe!==null;){switch(a=Fe,c=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&c!==null){t=void 0,s=a,n=c.memoizedProps,c=c.memoizedState,l=s.stateNode;try{var fe=Ka(s.type,n,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(fe,c),l.__reactInternalSnapshotBeforeUpdate=t}catch(me){De(s,s.return,me)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Sc(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Sc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=a.sibling,t!==null){t.return=a.return,Fe=t;break}Fe=a.return}}function Fu(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ja(t,s),l&4&&wl(5,s);break;case 1:if(ja(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(f){De(s,s.return,f)}else{var n=Ka(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(n,a,t.__reactInternalSnapshotBeforeUpdate)}catch(f){De(s,s.return,f)}}l&64&&Qu(s),l&512&&kl(s,s.return);break;case 3:if(ja(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Td(t,a)}catch(f){De(s,s.return,f)}}break;case 27:a===null&&l&4&&Ju(s);case 26:case 5:ja(t,s),a===null&&l&4&&Vu(s),l&512&&kl(s,s.return);break;case 12:ja(t,s);break;case 13:ja(t,s),l&4&&Iu(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Tf.bind(null,s),Kf(t,s))));break;case 22:if(l=s.memoizedState!==null||sa,!l){a=a!==null&&a.memoizedState!==null||$e,n=sa;var c=$e;sa=l,($e=a)&&!c?Na(t,s,(s.subtreeFlags&8772)!==0):ja(t,s),sa=n,$e=c}break;case 30:break;default:ja(t,s)}}function Pu(t){var a=t.alternate;a!==null&&(t.alternate=null,Pu(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ai(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qe=null,dt=!1;function la(t,a,s){for(s=s.child;s!==null;)Wu(t,a,s),s=s.sibling}function Wu(t,a,s){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Xs,s)}catch{}switch(s.tag){case 26:$e||Ut(s,a),la(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:$e||Ut(s,a);var l=qe,n=dt;Ea(s.type)&&(qe=s.stateNode,dt=!1),la(t,a,s),Rl(s.stateNode),qe=l,dt=n;break;case 5:$e||Ut(s,a);case 6:if(l=qe,n=dt,qe=null,la(t,a,s),qe=l,dt=n,qe!==null)if(dt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(s.stateNode)}catch(c){De(s,a,c)}else try{qe.removeChild(s.stateNode)}catch(c){De(s,a,c)}break;case 18:qe!==null&&(dt?(t=qe,Um(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),$l(t)):Um(qe,s.stateNode));break;case 4:l=qe,n=dt,qe=s.stateNode.containerInfo,dt=!0,la(t,a,s),qe=l,dt=n;break;case 0:case 11:case 14:case 15:$e||va(2,s,a),$e||va(4,s,a),la(t,a,s);break;case 1:$e||(Ut(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Xu(s,a,l)),la(t,a,s);break;case 21:la(t,a,s);break;case 22:$e=(l=$e)||s.memoizedState!==null,la(t,a,s),$e=l;break;default:la(t,a,s)}}function Iu(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$l(t)}catch(s){De(a,a.return,s)}}function wf(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Ku),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Ku),a;default:throw Error(o(435,t.tag))}}function Wr(t,a){var s=wf(t);a.forEach(function(l){var n=Df.bind(null,t,l);s.has(l)||(s.add(l),l.then(n,n))})}function gt(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],c=t,f=a,_=f;e:for(;_!==null;){switch(_.tag){case 27:if(Ea(_.type)){qe=_.stateNode,dt=!1;break e}break;case 5:qe=_.stateNode,dt=!1;break e;case 3:case 4:qe=_.stateNode.containerInfo,dt=!0;break e}_=_.return}if(qe===null)throw Error(o(160));Wu(c,f,n),qe=null,dt=!1,c=n.alternate,c!==null&&(c.return=null),n.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)em(a,t),a=a.sibling}var qt=null;function em(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gt(a,t),bt(t),l&4&&(va(3,t,t.return),wl(3,t),va(5,t,t.return));break;case 1:gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),l&64&&sa&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=qt;if(gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),l&4){var c=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":c=n.getElementsByTagName("title")[0],(!c||c[Js]||c[st]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=n.createElement(l),n.head.insertBefore(c,n.querySelector("head > title"))),et(c,l,s),c[st]=t,Je(c),l=c;break e;case"link":var f=Jm("link","href",n).get(l+(s.href||""));if(f){for(var _=0;_<f.length;_++)if(c=f[_],c.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&c.getAttribute("rel")===(s.rel==null?null:s.rel)&&c.getAttribute("title")===(s.title==null?null:s.title)&&c.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){f.splice(_,1);break t}}c=n.createElement(l),et(c,l,s),n.head.appendChild(c);break;case"meta":if(f=Jm("meta","content",n).get(l+(s.content||""))){for(_=0;_<f.length;_++)if(c=f[_],c.getAttribute("content")===(s.content==null?null:""+s.content)&&c.getAttribute("name")===(s.name==null?null:s.name)&&c.getAttribute("property")===(s.property==null?null:s.property)&&c.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&c.getAttribute("charset")===(s.charSet==null?null:s.charSet)){f.splice(_,1);break t}}c=n.createElement(l),et(c,l,s),n.head.appendChild(c);break;default:throw Error(o(468,l))}c[st]=t,Je(c),l=c}t.stateNode=l}else Km(n,t.type,t.stateNode);else t.stateNode=Zm(n,l,t.memoizedProps);else c!==l?(c===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):c.count--,l===null?Km(n,t.type,t.stateNode):Zm(n,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Jr(t,t.memoizedProps,s.memoizedProps)}break;case 27:gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),s!==null&&l&4&&Jr(t,t.memoizedProps,s.memoizedProps);break;case 5:if(gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),t.flags&32){n=t.stateNode;try{cs(n,"")}catch(I){De(t,t.return,I)}}l&4&&t.stateNode!=null&&(n=t.memoizedProps,Jr(t,n,s!==null?s.memoizedProps:n)),l&1024&&(Pr=!0);break;case 6:if(gt(a,t),bt(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(I){De(t,t.return,I)}}break;case 3:if(ni=null,n=qt,qt=si(a.containerInfo),gt(a,t),qt=n,bt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{$l(a.containerInfo)}catch(I){De(t,t.return,I)}Pr&&(Pr=!1,tm(t));break;case 4:l=qt,qt=si(t.stateNode.containerInfo),gt(a,t),bt(t),qt=l;break;case 12:gt(a,t),bt(t);break;case 13:gt(a,t),bt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(lc=Ht()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wr(t,l)));break;case 22:n=t.memoizedState!==null;var $=s!==null&&s.memoizedState!==null,F=sa,ee=$e;if(sa=F||n,$e=ee||$,gt(a,t),$e=ee,sa=F,bt(t),l&8192)e:for(a=t.stateNode,a._visibility=n?a._visibility&-2:a._visibility|1,n&&(s===null||$||sa||$e||Fa(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){$=s=a;try{if(c=$.stateNode,n)f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{_=$.stateNode;var se=$.memoizedProps.style,W=se!=null&&se.hasOwnProperty("display")?se.display:null;_.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(I){De($,$.return,I)}}}else if(a.tag===6){if(s===null){$=a;try{$.stateNode.nodeValue=n?"":$.memoizedProps}catch(I){De($,$.return,I)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Wr(t,s))));break;case 19:gt(a,t),bt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wr(t,l)));break;case 30:break;case 21:break;default:gt(a,t),bt(t)}}function bt(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(Zu(l)){s=l;break}l=l.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var n=s.stateNode,c=Kr(t);Qn(t,c,n);break;case 5:var f=s.stateNode;s.flags&32&&(cs(f,""),s.flags&=-33);var _=Kr(t);Qn(t,_,f);break;case 3:case 4:var $=s.stateNode.containerInfo,F=Kr(t);Fr(t,F,$);break;default:throw Error(o(161))}}catch(ee){De(t,t.return,ee)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function tm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;tm(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ja(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Fu(t,a.alternate,a),a=a.sibling}function Fa(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:va(4,a,a.return),Fa(a);break;case 1:Ut(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Xu(a,a.return,s),Fa(a);break;case 27:Rl(a.stateNode);case 26:case 5:Ut(a,a.return),Fa(a);break;case 22:a.memoizedState===null&&Fa(a);break;case 30:Fa(a);break;default:Fa(a)}t=t.sibling}}function Na(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,n=t,c=a,f=c.flags;switch(c.tag){case 0:case 11:case 15:Na(n,c,s),wl(4,c);break;case 1:if(Na(n,c,s),l=c,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(F){De(l,l.return,F)}if(l=c,n=l.updateQueue,n!==null){var _=l.stateNode;try{var $=n.shared.hiddenCallbacks;if($!==null)for(n.shared.hiddenCallbacks=null,n=0;n<$.length;n++)Ad($[n],_)}catch(F){De(l,l.return,F)}}s&&f&64&&Qu(c),kl(c,c.return);break;case 27:Ju(c);case 26:case 5:Na(n,c,s),s&&l===null&&f&4&&Vu(c),kl(c,c.return);break;case 12:Na(n,c,s);break;case 13:Na(n,c,s),s&&f&4&&Iu(n,c);break;case 22:c.memoizedState===null&&Na(n,c,s),kl(c,c.return);break;case 30:break;default:Na(n,c,s)}a=a.sibling}}function Ir(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&ol(s))}function ec(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ol(t))}function $t(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)am(t,a,s,l),a=a.sibling}function am(t,a,s,l){var n=a.flags;switch(a.tag){case 0:case 11:case 15:$t(t,a,s,l),n&2048&&wl(9,a);break;case 1:$t(t,a,s,l);break;case 3:$t(t,a,s,l),n&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ol(t)));break;case 12:if(n&2048){$t(t,a,s,l),t=a.stateNode;try{var c=a.memoizedProps,f=c.id,_=c.onPostCommit;typeof _=="function"&&_(f,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch($){De(a,a.return,$)}}else $t(t,a,s,l);break;case 13:$t(t,a,s,l);break;case 23:break;case 22:c=a.stateNode,f=a.alternate,a.memoizedState!==null?c._visibility&2?$t(t,a,s,l):Sl(t,a):c._visibility&2?$t(t,a,s,l):(c._visibility|=2,_s(t,a,s,l,(a.subtreeFlags&10256)!==0)),n&2048&&Ir(f,a);break;case 24:$t(t,a,s,l),n&2048&&ec(a.alternate,a);break;default:$t(t,a,s,l)}}function _s(t,a,s,l,n){for(n=n&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var c=t,f=a,_=s,$=l,F=f.flags;switch(f.tag){case 0:case 11:case 15:_s(c,f,_,$,n),wl(8,f);break;case 23:break;case 22:var ee=f.stateNode;f.memoizedState!==null?ee._visibility&2?_s(c,f,_,$,n):Sl(c,f):(ee._visibility|=2,_s(c,f,_,$,n)),n&&F&2048&&Ir(f.alternate,f);break;case 24:_s(c,f,_,$,n),n&&F&2048&&ec(f.alternate,f);break;default:_s(c,f,_,$,n)}a=a.sibling}}function Sl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,n=l.flags;switch(l.tag){case 22:Sl(s,l),n&2048&&Ir(l.alternate,l);break;case 24:Sl(s,l),n&2048&&ec(l.alternate,l);break;default:Sl(s,l)}a=a.sibling}}var Cl=8192;function Es(t){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)sm(t),t=t.sibling}function sm(t){switch(t.tag){case 26:Es(t),t.flags&Cl&&t.memoizedState!==null&&c0(qt,t.memoizedState,t.memoizedProps);break;case 5:Es(t);break;case 3:case 4:var a=qt;qt=si(t.stateNode.containerInfo),Es(t),qt=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Cl,Cl=16777216,Es(t),Cl=a):Es(t));break;default:Es(t)}}function lm(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function _l(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Fe=l,im(l,t)}lm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nm(t),t=t.sibling}function nm(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&va(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Xn(t)):_l(t);break;default:_l(t)}}function Xn(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Fe=l,im(l,t)}lm(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:va(8,a,a.return),Xn(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Xn(a));break;default:Xn(a)}t=t.sibling}}function im(t,a){for(;Fe!==null;){var s=Fe;switch(s.tag){case 0:case 11:case 15:va(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ol(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Fe=l;else e:for(s=t;Fe!==null;){l=Fe;var n=l.sibling,c=l.return;if(Pu(l),l===s){Fe=null;break e}if(n!==null){n.return=c,Fe=n;break e}Fe=c}}}var kf={getCacheForType:function(t){var a=lt(Ve),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s}},Sf=typeof WeakMap=="function"?WeakMap:Map,_e=0,Re=null,ve=null,Ne=0,Ee=0,yt=null,wa=!1,Ms=!1,tc=!1,na=0,Be=0,ka=0,Pa=0,ac=0,Mt=0,As=0,El=null,ut=null,sc=!1,lc=0,Vn=1/0,Zn=null,Sa=null,Ie=0,Ca=null,Ts=null,Ds=0,nc=0,ic=null,rm=null,Ml=0,rc=null;function vt(){if((_e&2)!==0&&Ne!==0)return Ne&-Ne;if(h.T!==null){var t=ys;return t!==0?t:hc()}return wo()}function cm(){Mt===0&&(Mt=(Ne&536870912)===0||Ce?yo():536870912);var t=Et.current;return t!==null&&(t.flags|=32),Mt}function jt(t,a,s){(t===Re&&(Ee===2||Ee===9)||t.cancelPendingCommit!==null)&&(Rs(t,0),_a(t,Ne,Mt,!1)),Zs(t,s),((_e&2)===0||t!==Re)&&(t===Re&&((_e&2)===0&&(Pa|=s),Be===4&&_a(t,Ne,Mt,!1)),Gt(t))}function om(t,a,s){if((_e&6)!==0)throw Error(o(327));var l=!s&&(a&124)===0&&(a&t.expiredLanes)===0||Vs(t,a),n=l?Ef(t,a):dc(t,a,!0),c=l;do{if(n===0){Ms&&!l&&_a(t,a,0,!1);break}else{if(s=t.current.alternate,c&&!Cf(s)){n=dc(t,a,!1),c=!1;continue}if(n===2){if(c=a,t.errorRecoveryDisabledLanes&c)var f=0;else f=t.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){a=f;e:{var _=t;n=El;var $=_.current.memoizedState.isDehydrated;if($&&(Rs(_,f).flags|=256),f=dc(_,f,!1),f!==2){if(tc&&!$){_.errorRecoveryDisabledLanes|=c,Pa|=c,n=4;break e}c=ut,ut=n,c!==null&&(ut===null?ut=c:ut.push.apply(ut,c))}n=f}if(c=!1,n!==2)continue}}if(n===1){Rs(t,0),_a(t,a,0,!0);break}e:{switch(l=t,c=n,c){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:_a(l,a,Mt,!wa);break e;case 2:ut=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(n=lc+300-Ht(),10<n)){if(_a(l,a,Mt,!wa),sn(l,0,!0)!==0)break e;l.timeoutHandle=Lm(dm.bind(null,l,s,ut,Zn,sc,a,Mt,Pa,As,wa,c,2,-0,0),n);break e}dm(l,s,ut,Zn,sc,a,Mt,Pa,As,wa,c,0,-0,0)}}break}while(!0);Gt(t)}function dm(t,a,s,l,n,c,f,_,$,F,ee,se,W,I){if(t.timeoutHandle=-1,se=a.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(zl={stylesheets:null,count:0,unsuspend:r0},sm(a),se=o0(),se!==null)){t.cancelPendingCommit=se(gm.bind(null,t,a,c,s,l,n,f,_,$,ee,1,W,I)),_a(t,c,f,!F);return}gm(t,a,c,s,l,n,f,_,$)}function Cf(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],c=n.getSnapshot;n=n.value;try{if(!ft(c(),n))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function _a(t,a,s,l){a&=~ac,a&=~Pa,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var n=a;0<n;){var c=31-ht(n),f=1<<c;l[c]=-1,n&=~f}s!==0&&jo(t,s,a)}function Jn(){return(_e&6)===0?(Al(0),!1):!0}function cc(){if(ve!==null){if(Ee===0)var t=ve.return;else t=ve,Pt=Xa=null,Sr(t),Ss=null,vl=0,t=ve;for(;t!==null;)Yu(t.alternate,t),t=t.return;ve=null}}function Rs(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Qf(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),cc(),Re=t,ve=s=Jt(t.current,null),Ne=a,Ee=0,yt=null,wa=!1,Ms=Vs(t,a),tc=!1,As=Mt=ac=Pa=ka=Be=0,ut=El=null,sc=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var n=31-ht(l),c=1<<n;a|=t[n],l&=~c}return na=a,pn(),s}function um(t,a){be=null,h.H=On,a===ul||a===Sn?(a=Ed(),Ee=3):a===Sd?(a=Ed(),Ee=4):Ee=a===Mu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,yt=a,ve===null&&(Be=1,Un(t,kt(a,t.current)))}function mm(){var t=h.H;return h.H=On,t===null?On:t}function xm(){var t=h.A;return h.A=kf,t}function oc(){Be=4,wa||(Ne&4194048)!==Ne&&Et.current!==null||(Ms=!0),(ka&134217727)===0&&(Pa&134217727)===0||Re===null||_a(Re,Ne,Mt,!1)}function dc(t,a,s){var l=_e;_e|=2;var n=mm(),c=xm();(Re!==t||Ne!==a)&&(Zn=null,Rs(t,a)),a=!1;var f=Be;e:do try{if(Ee!==0&&ve!==null){var _=ve,$=yt;switch(Ee){case 8:cc(),f=6;break e;case 3:case 2:case 9:case 6:Et.current===null&&(a=!0);var F=Ee;if(Ee=0,yt=null,qs(t,_,$,F),s&&Ms){f=0;break e}break;default:F=Ee,Ee=0,yt=null,qs(t,_,$,F)}}_f(),f=Be;break}catch(ee){um(t,ee)}while(!0);return a&&t.shellSuspendCounter++,Pt=Xa=null,_e=l,h.H=n,h.A=c,ve===null&&(Re=null,Ne=0,pn()),f}function _f(){for(;ve!==null;)hm(ve)}function Ef(t,a){var s=_e;_e|=2;var l=mm(),n=xm();Re!==t||Ne!==a?(Zn=null,Vn=Ht()+500,Rs(t,a)):Ms=Vs(t,a);e:do try{if(Ee!==0&&ve!==null){a=ve;var c=yt;t:switch(Ee){case 1:Ee=0,yt=null,qs(t,a,c,1);break;case 2:case 9:if(Cd(c)){Ee=0,yt=null,fm(a);break}a=function(){Ee!==2&&Ee!==9||Re!==t||(Ee=7),Gt(t)},c.then(a,a);break e;case 3:Ee=7;break e;case 4:Ee=5;break e;case 7:Cd(c)?(Ee=0,yt=null,fm(a)):(Ee=0,yt=null,qs(t,a,c,7));break;case 5:var f=null;switch(ve.tag){case 26:f=ve.memoizedState;case 5:case 27:var _=ve;if(!f||Fm(f)){Ee=0,yt=null;var $=_.sibling;if($!==null)ve=$;else{var F=_.return;F!==null?(ve=F,Kn(F)):ve=null}break t}}Ee=0,yt=null,qs(t,a,c,5);break;case 6:Ee=0,yt=null,qs(t,a,c,6);break;case 8:cc(),Be=6;break e;default:throw Error(o(462))}}Mf();break}catch(ee){um(t,ee)}while(!0);return Pt=Xa=null,h.H=l,h.A=n,_e=s,ve!==null?0:(Re=null,Ne=0,pn(),Be)}function Mf(){for(;ve!==null&&!Xt();)hm(ve)}function hm(t){var a=$u(t.alternate,t,na);t.memoizedProps=t.pendingProps,a===null?Kn(t):ve=a}function fm(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=Ou(s,a,a.pendingProps,a.type,void 0,Ne);break;case 11:a=Ou(s,a,a.pendingProps,a.type.render,a.ref,Ne);break;case 5:Sr(a);default:Yu(s,a),a=ve=pd(a,na),a=$u(s,a,na)}t.memoizedProps=t.pendingProps,a===null?Kn(t):ve=a}function qs(t,a,s,l){Pt=Xa=null,Sr(a),Ss=null,vl=0;var n=a.return;try{if(bf(t,n,a,s,Ne)){Be=1,Un(t,kt(s,t.current)),ve=null;return}}catch(c){if(n!==null)throw ve=n,c;Be=1,Un(t,kt(s,t.current)),ve=null;return}a.flags&32768?(Ce||l===1?t=!0:Ms||(Ne&536870912)!==0?t=!1:(wa=t=!0,(l===2||l===9||l===3||l===6)&&(l=Et.current,l!==null&&l.tag===13&&(l.flags|=16384))),pm(a,t)):Kn(a)}function Kn(t){var a=t;do{if((a.flags&32768)!==0){pm(a,wa);return}t=a.return;var s=vf(a.alternate,a,na);if(s!==null){ve=s;return}if(a=a.sibling,a!==null){ve=a;return}ve=a=t}while(a!==null);Be===0&&(Be=5)}function pm(t,a){do{var s=jf(t.alternate,t);if(s!==null){s.flags&=32767,ve=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){ve=t;return}ve=t=s}while(t!==null);Be=6,ve=null}function gm(t,a,s,l,n,c,f,_,$){t.cancelPendingCommit=null;do Fn();while(Ie!==0);if((_e&6)!==0)throw Error(o(327));if(a!==null){if(a===t.current)throw Error(o(177));if(c=a.lanes|a.childLanes,c|=er,ih(t,s,c,f,_,$),t===Re&&(ve=Re=null,Ne=0),Ts=a,Ca=t,Ds=s,nc=c,ic=n,rm=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Rf(en,function(){return Nm(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=h.T,h.T=null,n=H.p,H.p=2,f=_e,_e|=4;try{Nf(t,a,s)}finally{_e=f,H.p=n,h.T=l}}Ie=1,bm(),ym(),vm()}}function bm(){if(Ie===1){Ie=0;var t=Ca,a=Ts,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=h.T,h.T=null;var l=H.p;H.p=2;var n=_e;_e|=4;try{em(a,t);var c=Nc,f=id(t.containerInfo),_=c.focusedElem,$=c.selectionRange;if(f!==_&&_&&_.ownerDocument&&nd(_.ownerDocument.documentElement,_)){if($!==null&&Ki(_)){var F=$.start,ee=$.end;if(ee===void 0&&(ee=F),"selectionStart"in _)_.selectionStart=F,_.selectionEnd=Math.min(ee,_.value.length);else{var se=_.ownerDocument||document,W=se&&se.defaultView||window;if(W.getSelection){var I=W.getSelection(),fe=_.textContent.length,me=Math.min($.start,fe),Te=$.end===void 0?me:Math.min($.end,fe);!I.extend&&me>Te&&(f=Te,Te=me,me=f);var V=ld(_,me),Q=ld(_,Te);if(V&&Q&&(I.rangeCount!==1||I.anchorNode!==V.node||I.anchorOffset!==V.offset||I.focusNode!==Q.node||I.focusOffset!==Q.offset)){var K=se.createRange();K.setStart(V.node,V.offset),I.removeAllRanges(),me>Te?(I.addRange(K),I.extend(Q.node,Q.offset)):(K.setEnd(Q.node,Q.offset),I.addRange(K))}}}}for(se=[],I=_;I=I.parentNode;)I.nodeType===1&&se.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<se.length;_++){var te=se[_];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}ci=!!jc,Nc=jc=null}finally{_e=n,H.p=l,h.T=s}}t.current=a,Ie=2}}function ym(){if(Ie===2){Ie=0;var t=Ca,a=Ts,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=h.T,h.T=null;var l=H.p;H.p=2;var n=_e;_e|=4;try{Fu(t,a.alternate,a)}finally{_e=n,H.p=l,h.T=s}}Ie=3}}function vm(){if(Ie===4||Ie===3){Ie=0,Si();var t=Ca,a=Ts,s=Ds,l=rm;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ie=5:(Ie=0,Ts=Ca=null,jm(t,t.pendingLanes));var n=t.pendingLanes;if(n===0&&(Sa=null),Ei(s),a=a.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Xs,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=h.T,n=H.p,H.p=2,h.T=null;try{for(var c=t.onRecoverableError,f=0;f<l.length;f++){var _=l[f];c(_.value,{componentStack:_.stack})}}finally{h.T=a,H.p=n}}(Ds&3)!==0&&Fn(),Gt(t),n=t.pendingLanes,(s&4194090)!==0&&(n&42)!==0?t===rc?Ml++:(Ml=0,rc=t):Ml=0,Al(0)}}function jm(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,ol(a)))}function Fn(t){return bm(),ym(),vm(),Nm()}function Nm(){if(Ie!==5)return!1;var t=Ca,a=nc;nc=0;var s=Ei(Ds),l=h.T,n=H.p;try{H.p=32>s?32:s,h.T=null,s=ic,ic=null;var c=Ca,f=Ds;if(Ie=0,Ts=Ca=null,Ds=0,(_e&6)!==0)throw Error(o(331));var _=_e;if(_e|=4,nm(c.current),am(c,c.current,f,s),_e=_,Al(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Xs,c)}catch{}return!0}finally{H.p=n,h.T=l,jm(t,a)}}function wm(t,a,s){a=kt(s,a),a=Br(t.stateNode,a,2),t=pa(t,a,2),t!==null&&(Zs(t,2),Gt(t))}function De(t,a,s){if(t.tag===3)wm(t,t,s);else for(;a!==null;){if(a.tag===3){wm(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Sa===null||!Sa.has(l))){t=kt(s,t),s=_u(2),l=pa(a,s,2),l!==null&&(Eu(s,l,a,t),Zs(l,2),Gt(l));break}}a=a.return}}function uc(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Sf;var n=new Set;l.set(a,n)}else n=l.get(a),n===void 0&&(n=new Set,l.set(a,n));n.has(s)||(tc=!0,n.add(s),t=Af.bind(null,t,a,s),a.then(t,t))}function Af(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Re===t&&(Ne&s)===s&&(Be===4||Be===3&&(Ne&62914560)===Ne&&300>Ht()-lc?(_e&2)===0&&Rs(t,0):ac|=s,As===Ne&&(As=0)),Gt(t)}function km(t,a){a===0&&(a=vo()),t=fs(t,a),t!==null&&(Zs(t,a),Gt(t))}function Tf(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),km(t,s)}function Df(t,a){var s=0;switch(t.tag){case 13:var l=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(a),km(t,s)}function Rf(t,a){return Qs(t,a)}var Pn=null,Os=null,mc=!1,Wn=!1,xc=!1,Wa=0;function Gt(t){t!==Os&&t.next===null&&(Os===null?Pn=Os=t:Os=Os.next=t),Wn=!0,mc||(mc=!0,Of())}function Al(t,a){if(!xc&&Wn){xc=!0;do for(var s=!1,l=Pn;l!==null;){if(t!==0){var n=l.pendingLanes;if(n===0)var c=0;else{var f=l.suspendedLanes,_=l.pingedLanes;c=(1<<31-ht(42|t)+1)-1,c&=n&~(f&~_),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(s=!0,Em(l,c))}else c=Ne,c=sn(l,l===Re?c:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(c&3)===0||Vs(l,c)||(s=!0,Em(l,c));l=l.next}while(s);xc=!1}}function qf(){Sm()}function Sm(){Wn=mc=!1;var t=0;Wa!==0&&(Yf()&&(t=Wa),Wa=0);for(var a=Ht(),s=null,l=Pn;l!==null;){var n=l.next,c=Cm(l,a);c===0?(l.next=null,s===null?Pn=n:s.next=n,n===null&&(Os=s)):(s=l,(t!==0||(c&3)!==0)&&(Wn=!0)),l=n}Al(t)}function Cm(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,n=t.expirationTimes,c=t.pendingLanes&-62914561;0<c;){var f=31-ht(c),_=1<<f,$=n[f];$===-1?((_&s)===0||(_&l)!==0)&&(n[f]=nh(_,a)):$<=a&&(t.expiredLanes|=_),c&=~_}if(a=Re,s=Ne,s=sn(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(Ee===2||Ee===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ye(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Vs(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&Ye(l),Ei(s)){case 2:case 8:s=go;break;case 32:s=en;break;case 268435456:s=bo;break;default:s=en}return l=_m.bind(null,t),s=Qs(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&Ye(l),t.callbackPriority=2,t.callbackNode=null,2}function _m(t,a){if(Ie!==0&&Ie!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Fn()&&t.callbackNode!==s)return null;var l=Ne;return l=sn(t,t===Re?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(om(t,l,a),Cm(t,Ht()),t.callbackNode!=null&&t.callbackNode===s?_m.bind(null,t):null)}function Em(t,a){if(Fn())return null;om(t,a,!0)}function Of(){Xf(function(){(_e&6)!==0?Qs(po,qf):Sm()})}function hc(){return Wa===0&&(Wa=yo()),Wa}function Mm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:on(""+t)}function Am(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function zf(t,a,s,l,n){if(a==="submit"&&s&&s.stateNode===n){var c=Mm((n[rt]||null).action),f=l.submitter;f&&(a=(a=f[rt]||null)?Mm(a.formAction):f.getAttribute("formAction"),a!==null&&(c=a,f=null));var _=new xn("action","action",null,l,n);t.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wa!==0){var $=f?Am(n,f):new FormData(n);qr(s,{pending:!0,data:$,method:n.method,action:c},null,$)}}else typeof c=="function"&&(_.preventDefault(),$=f?Am(n,f):new FormData(n),qr(s,{pending:!0,data:$,method:n.method,action:c},c,$))},currentTarget:n}]})}}for(var fc=0;fc<Ii.length;fc++){var pc=Ii[fc],Hf=pc.toLowerCase(),Lf=pc[0].toUpperCase()+pc.slice(1);Rt(Hf,"on"+Lf)}Rt(od,"onAnimationEnd"),Rt(dd,"onAnimationIteration"),Rt(ud,"onAnimationStart"),Rt("dblclick","onDoubleClick"),Rt("focusin","onFocus"),Rt("focusout","onBlur"),Rt(ef,"onTransitionRun"),Rt(tf,"onTransitionStart"),Rt(af,"onTransitionCancel"),Rt(md,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),za("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),za("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),za("onBeforeInput",["compositionend","keypress","textInput","paste"]),za("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),za("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),za("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function Tm(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],n=l.event;l=l.listeners;e:{var c=void 0;if(a)for(var f=l.length-1;0<=f;f--){var _=l[f],$=_.instance,F=_.currentTarget;if(_=_.listener,$!==c&&n.isPropagationStopped())break e;c=_,n.currentTarget=F;try{c(n)}catch(ee){Bn(ee)}n.currentTarget=null,c=$}else for(f=0;f<l.length;f++){if(_=l[f],$=_.instance,F=_.currentTarget,_=_.listener,$!==c&&n.isPropagationStopped())break e;c=_,n.currentTarget=F;try{c(n)}catch(ee){Bn(ee)}n.currentTarget=null,c=$}}}}function je(t,a){var s=a[Mi];s===void 0&&(s=a[Mi]=new Set);var l=t+"__bubble";s.has(l)||(Dm(a,t,2,!1),s.add(l))}function gc(t,a,s){var l=0;a&&(l|=4),Dm(s,t,l,a)}var In="_reactListening"+Math.random().toString(36).slice(2);function bc(t){if(!t[In]){t[In]=!0,So.forEach(function(s){s!=="selectionchange"&&(Bf.has(s)||gc(s,!1,t),gc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[In]||(a[In]=!0,gc("selectionchange",!1,a))}}function Dm(t,a,s,l){switch(ax(a)){case 2:var n=m0;break;case 8:n=x0;break;default:n=Dc}s=n.bind(null,a,s,t),n=void 0,!Ui||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),l?n!==void 0?t.addEventListener(a,s,{capture:!0,passive:n}):t.addEventListener(a,s,!0):n!==void 0?t.addEventListener(a,s,{passive:n}):t.addEventListener(a,s,!1)}function yc(t,a,s,l,n){var c=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var f=l.tag;if(f===3||f===4){var _=l.stateNode.containerInfo;if(_===n)break;if(f===4)for(f=l.return;f!==null;){var $=f.tag;if(($===3||$===4)&&f.stateNode.containerInfo===n)return;f=f.return}for(;_!==null;){if(f=as(_),f===null)return;if($=f.tag,$===5||$===6||$===26||$===27){l=c=f;continue e}_=_.parentNode}}l=l.return}Bo(function(){var F=c,ee=Li(s),se=[];e:{var W=xd.get(t);if(W!==void 0){var I=xn,fe=t;switch(t){case"keypress":if(un(s)===0)break e;case"keydown":case"keyup":I=Dh;break;case"focusin":fe="focus",I=Qi;break;case"focusout":fe="blur",I=Qi;break;case"beforeblur":case"afterblur":I=Qi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Go;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Oh;break;case od:case dd:case ud:I=wh;break;case md:I=Hh;break;case"scroll":case"scrollend":I=bh;break;case"wheel":I=Bh;break;case"copy":case"cut":case"paste":I=Sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Qo;break;case"toggle":case"beforetoggle":I=$h}var me=(a&4)!==0,Te=!me&&(t==="scroll"||t==="scrollend"),V=me?W!==null?W+"Capture":null:W;me=[];for(var Q=F,K;Q!==null;){var te=Q;if(K=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||K===null||V===null||(te=Fs(Q,V),te!=null&&me.push(Dl(Q,te,K))),Te)break;Q=Q.return}0<me.length&&(W=new I(W,fe,null,s,ee),se.push({event:W,listeners:me}))}}if((a&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",W&&s!==Hi&&(fe=s.relatedTarget||s.fromElement)&&(as(fe)||fe[ts]))break e;if((I||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,I?(fe=s.relatedTarget||s.toElement,I=F,fe=fe?as(fe):null,fe!==null&&(Te=m(fe),me=fe.tag,fe!==Te||me!==5&&me!==27&&me!==6)&&(fe=null)):(I=null,fe=F),I!==fe)){if(me=Go,te="onMouseLeave",V="onMouseEnter",Q="mouse",(t==="pointerout"||t==="pointerover")&&(me=Qo,te="onPointerLeave",V="onPointerEnter",Q="pointer"),Te=I==null?W:Ks(I),K=fe==null?W:Ks(fe),W=new me(te,Q+"leave",I,s,ee),W.target=Te,W.relatedTarget=K,te=null,as(ee)===F&&(me=new me(V,Q+"enter",fe,s,ee),me.target=K,me.relatedTarget=Te,te=me),Te=te,I&&fe)t:{for(me=I,V=fe,Q=0,K=me;K;K=zs(K))Q++;for(K=0,te=V;te;te=zs(te))K++;for(;0<Q-K;)me=zs(me),Q--;for(;0<K-Q;)V=zs(V),K--;for(;Q--;){if(me===V||V!==null&&me===V.alternate)break t;me=zs(me),V=zs(V)}me=null}else me=null;I!==null&&Rm(se,W,I,me,!1),fe!==null&&Te!==null&&Rm(se,Te,fe,me,!0)}}e:{if(W=F?Ks(F):window,I=W.nodeName&&W.nodeName.toLowerCase(),I==="select"||I==="input"&&W.type==="file")var de=Wo;else if(Fo(W))if(Io)de=Ph;else{de=Kh;var ye=Jh}else I=W.nodeName,!I||I.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?F&&zi(F.elementType)&&(de=Wo):de=Fh;if(de&&(de=de(t,F))){Po(se,de,s,ee);break e}ye&&ye(t,W,F),t==="focusout"&&F&&W.type==="number"&&F.memoizedProps.value!=null&&Oi(W,"number",W.value)}switch(ye=F?Ks(F):window,t){case"focusin":(Fo(ye)||ye.contentEditable==="true")&&(ms=ye,Fi=F,ll=null);break;case"focusout":ll=Fi=ms=null;break;case"mousedown":Pi=!0;break;case"contextmenu":case"mouseup":case"dragend":Pi=!1,rd(se,s,ee);break;case"selectionchange":if(Ih)break;case"keydown":case"keyup":rd(se,s,ee)}var ue;if(Vi)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else us?Jo(t,s)&&(xe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(xe="onCompositionStart");xe&&(Xo&&s.locale!=="ko"&&(us||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&us&&(ue=Uo()):(ma=ee,$i="value"in ma?ma.value:ma.textContent,us=!0)),ye=ei(F,xe),0<ye.length&&(xe=new Yo(xe,t,null,s,ee),se.push({event:xe,listeners:ye}),ue?xe.data=ue:(ue=Ko(s),ue!==null&&(xe.data=ue)))),(ue=Yh?Qh(t,s):Xh(t,s))&&(xe=ei(F,"onBeforeInput"),0<xe.length&&(ye=new Yo("onBeforeInput","beforeinput",null,s,ee),se.push({event:ye,listeners:xe}),ye.data=ue)),zf(se,t,F,s,ee)}Tm(se,a)})}function Dl(t,a,s){return{instance:t,listener:a,currentTarget:s}}function ei(t,a){for(var s=a+"Capture",l=[];t!==null;){var n=t,c=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||c===null||(n=Fs(t,s),n!=null&&l.unshift(Dl(t,n,c)),n=Fs(t,a),n!=null&&l.push(Dl(t,n,c))),t.tag===3)return l;t=t.return}return[]}function zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Rm(t,a,s,l,n){for(var c=a._reactName,f=[];s!==null&&s!==l;){var _=s,$=_.alternate,F=_.stateNode;if(_=_.tag,$!==null&&$===l)break;_!==5&&_!==26&&_!==27||F===null||($=F,n?(F=Fs(s,c),F!=null&&f.unshift(Dl(s,F,$))):n||(F=Fs(s,c),F!=null&&f.push(Dl(s,F,$)))),s=s.return}f.length!==0&&t.push({event:a,listeners:f})}var Uf=/\r\n?/g,$f=/\u0000|\uFFFD/g;function qm(t){return(typeof t=="string"?t:""+t).replace(Uf,`
`).replace($f,"")}function Om(t,a){return a=qm(a),qm(t)===a}function ti(){}function Ae(t,a,s,l,n,c){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||cs(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&cs(t,""+l);break;case"className":nn(t,"class",l);break;case"tabIndex":nn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":nn(t,s,l);break;case"style":Ho(t,l,c);break;case"data":if(a!=="object"){nn(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=on(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(s==="formAction"?(a!=="input"&&Ae(t,a,"name",n.name,n,null),Ae(t,a,"formEncType",n.formEncType,n,null),Ae(t,a,"formMethod",n.formMethod,n,null),Ae(t,a,"formTarget",n.formTarget,n,null)):(Ae(t,a,"encType",n.encType,n,null),Ae(t,a,"method",n.method,n,null),Ae(t,a,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=on(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=ti);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=on(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":je("beforetoggle",t),je("toggle",t),ln(t,"popover",l);break;case"xlinkActuate":Vt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ln(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ph.get(s)||s,ln(t,s,l))}}function vc(t,a,s,l,n,c){switch(s){case"style":Ho(t,l,c);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"children":typeof l=="string"?cs(t,l):(typeof l=="number"||typeof l=="bigint")&&cs(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),a=s.slice(2,n?s.length-7:void 0),c=t[rt]||null,c=c!=null?c[s]:null,typeof c=="function"&&t.removeEventListener(a,c,n),typeof l=="function")){typeof c!="function"&&c!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,n);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):ln(t,s,l)}}}function et(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,n=!1,c;for(c in s)if(s.hasOwnProperty(c)){var f=s[c];if(f!=null)switch(c){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Ae(t,a,c,f,s,null)}}n&&Ae(t,a,"srcSet",s.srcSet,s,null),l&&Ae(t,a,"src",s.src,s,null);return;case"input":je("invalid",t);var _=c=f=n=null,$=null,F=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":n=ee;break;case"type":f=ee;break;case"checked":$=ee;break;case"defaultChecked":F=ee;break;case"value":c=ee;break;case"defaultValue":_=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,a));break;default:Ae(t,a,l,ee,s,null)}}Ro(t,c,_,$,F,f,n,!1),rn(t);return;case"select":je("invalid",t),l=f=c=null;for(n in s)if(s.hasOwnProperty(n)&&(_=s[n],_!=null))switch(n){case"value":c=_;break;case"defaultValue":f=_;break;case"multiple":l=_;default:Ae(t,a,n,_,s,null)}a=c,s=f,t.multiple=!!l,a!=null?rs(t,!!l,a,!1):s!=null&&rs(t,!!l,s,!0);return;case"textarea":je("invalid",t),c=n=l=null;for(f in s)if(s.hasOwnProperty(f)&&(_=s[f],_!=null))switch(f){case"value":l=_;break;case"defaultValue":n=_;break;case"children":c=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(o(91));break;default:Ae(t,a,f,_,s,null)}Oo(t,l,n,c),rn(t);return;case"option":for($ in s)if(s.hasOwnProperty($)&&(l=s[$],l!=null))switch($){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ae(t,a,$,l,s,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Tl.length;l++)je(Tl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in s)if(s.hasOwnProperty(F)&&(l=s[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Ae(t,a,F,l,s,null)}return;default:if(zi(a)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&vc(t,a,ee,l,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(l=s[_],l!=null&&Ae(t,a,_,l,s,null))}function Gf(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,c=null,f=null,_=null,$=null,F=null,ee=null;for(I in s){var se=s[I];if(s.hasOwnProperty(I)&&se!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":$=se;default:l.hasOwnProperty(I)||Ae(t,a,I,null,l,se)}}for(var W in l){var I=l[W];if(se=s[W],l.hasOwnProperty(W)&&(I!=null||se!=null))switch(W){case"type":c=I;break;case"name":n=I;break;case"checked":F=I;break;case"defaultChecked":ee=I;break;case"value":f=I;break;case"defaultValue":_=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(137,a));break;default:I!==se&&Ae(t,a,W,I,l,se)}}qi(t,f,_,$,F,ee,c,n);return;case"select":I=f=_=W=null;for(c in s)if($=s[c],s.hasOwnProperty(c)&&$!=null)switch(c){case"value":break;case"multiple":I=$;default:l.hasOwnProperty(c)||Ae(t,a,c,null,l,$)}for(n in l)if(c=l[n],$=s[n],l.hasOwnProperty(n)&&(c!=null||$!=null))switch(n){case"value":W=c;break;case"defaultValue":_=c;break;case"multiple":f=c;default:c!==$&&Ae(t,a,n,c,l,$)}a=_,s=f,l=I,W!=null?rs(t,!!s,W,!1):!!l!=!!s&&(a!=null?rs(t,!!s,a,!0):rs(t,!!s,s?[]:"",!1));return;case"textarea":I=W=null;for(_ in s)if(n=s[_],s.hasOwnProperty(_)&&n!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ae(t,a,_,null,l,n)}for(f in l)if(n=l[f],c=s[f],l.hasOwnProperty(f)&&(n!=null||c!=null))switch(f){case"value":W=n;break;case"defaultValue":I=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(o(91));break;default:n!==c&&Ae(t,a,f,n,l,c)}qo(t,W,I);return;case"option":for(var fe in s)if(W=s[fe],s.hasOwnProperty(fe)&&W!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ae(t,a,fe,null,l,W)}for($ in l)if(W=l[$],I=s[$],l.hasOwnProperty($)&&W!==I&&(W!=null||I!=null))switch($){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Ae(t,a,$,W,l,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in s)W=s[me],s.hasOwnProperty(me)&&W!=null&&!l.hasOwnProperty(me)&&Ae(t,a,me,null,l,W);for(F in l)if(W=l[F],I=s[F],l.hasOwnProperty(F)&&W!==I&&(W!=null||I!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,a));break;default:Ae(t,a,F,W,l,I)}return;default:if(zi(a)){for(var Te in s)W=s[Te],s.hasOwnProperty(Te)&&W!==void 0&&!l.hasOwnProperty(Te)&&vc(t,a,Te,void 0,l,W);for(ee in l)W=l[ee],I=s[ee],!l.hasOwnProperty(ee)||W===I||W===void 0&&I===void 0||vc(t,a,ee,W,l,I);return}}for(var V in s)W=s[V],s.hasOwnProperty(V)&&W!=null&&!l.hasOwnProperty(V)&&Ae(t,a,V,null,l,W);for(se in l)W=l[se],I=s[se],!l.hasOwnProperty(se)||W===I||W==null&&I==null||Ae(t,a,se,W,l,I)}var jc=null,Nc=null;function ai(t){return t.nodeType===9?t:t.ownerDocument}function zm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hm(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function wc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var kc=null;function Yf(){var t=window.event;return t&&t.type==="popstate"?t===kc?!1:(kc=t,!0):(kc=null,!1)}var Lm=typeof setTimeout=="function"?setTimeout:void 0,Qf=typeof clearTimeout=="function"?clearTimeout:void 0,Bm=typeof Promise=="function"?Promise:void 0,Xf=typeof queueMicrotask=="function"?queueMicrotask:typeof Bm<"u"?function(t){return Bm.resolve(null).then(t).catch(Vf)}:Lm;function Vf(t){setTimeout(function(){throw t})}function Ea(t){return t==="head"}function Um(t,a){var s=a,l=0,n=0;do{var c=s.nextSibling;if(t.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(0<l&&8>l){s=l;var f=t.ownerDocument;if(s&1&&Rl(f.documentElement),s&2&&Rl(f.body),s&4)for(s=f.head,Rl(s),f=s.firstChild;f;){var _=f.nextSibling,$=f.nodeName;f[Js]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&f.rel.toLowerCase()==="stylesheet"||s.removeChild(f),f=_}}if(n===0){t.removeChild(c),$l(a);return}n--}else s==="$"||s==="$?"||s==="$!"?n++:l=s.charCodeAt(0)-48;else l=0;s=c}while(s);$l(a)}function Sc(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Sc(s),Ai(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Zf(t,a,s,l){for(;t.nodeType===1;){var n=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Js])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(c=t.getAttribute("rel"),c==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(c!==n.rel||t.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||t.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||t.getAttribute("title")!==(n.title==null?null:n.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(c=t.getAttribute("src"),(c!==(n.src==null?null:n.src)||t.getAttribute("type")!==(n.type==null?null:n.type)||t.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&c&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var c=n.name==null?null:""+n.name;if(n.type==="hidden"&&t.getAttribute("name")===c)return t}else return t;if(t=Ot(t.nextSibling),t===null)break}return null}function Jf(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ot(t.nextSibling),t===null))return null;return t}function Cc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Kf(t,a){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ot(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}var _c=null;function $m(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return t;a--}else s==="/$"&&a++}t=t.previousSibling}return null}function Gm(t,a,s){switch(a=ai(s),t){case"html":if(t=a.documentElement,!t)throw Error(o(452));return t;case"head":if(t=a.head,!t)throw Error(o(453));return t;case"body":if(t=a.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Rl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ai(t)}var At=new Map,Ym=new Set;function si(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ia=H.d;H.d={f:Ff,r:Pf,D:Wf,C:If,L:e0,m:t0,X:s0,S:a0,M:l0};function Ff(){var t=ia.f(),a=Jn();return t||a}function Pf(t){var a=ss(t);a!==null&&a.tag===5&&a.type==="form"?ou(a):ia.r(t)}var Hs=typeof document>"u"?null:document;function Qm(t,a,s){var l=Hs;if(l&&typeof a=="string"&&a){var n=wt(a);n='link[rel="'+t+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),Ym.has(n)||(Ym.add(n),t={rel:t,crossOrigin:s,href:a},l.querySelector(n)===null&&(a=l.createElement("link"),et(a,"link",t),Je(a),l.head.appendChild(a)))}}function Wf(t){ia.D(t),Qm("dns-prefetch",t,null)}function If(t,a){ia.C(t,a),Qm("preconnect",t,a)}function e0(t,a,s){ia.L(t,a,s);var l=Hs;if(l&&t&&a){var n='link[rel="preload"][as="'+wt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+wt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+wt(s.imageSizes)+'"]')):n+='[href="'+wt(t)+'"]';var c=n;switch(a){case"style":c=Ls(t);break;case"script":c=Bs(t)}At.has(c)||(t=S({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),At.set(c,t),l.querySelector(n)!==null||a==="style"&&l.querySelector(ql(c))||a==="script"&&l.querySelector(Ol(c))||(a=l.createElement("link"),et(a,"link",t),Je(a),l.head.appendChild(a)))}}function t0(t,a){ia.m(t,a);var s=Hs;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",n='link[rel="modulepreload"][as="'+wt(l)+'"][href="'+wt(t)+'"]',c=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Bs(t)}if(!At.has(c)&&(t=S({rel:"modulepreload",href:t},a),At.set(c,t),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ol(c)))return}l=s.createElement("link"),et(l,"link",t),Je(l),s.head.appendChild(l)}}}function a0(t,a,s){ia.S(t,a,s);var l=Hs;if(l&&t){var n=ls(l).hoistableStyles,c=Ls(t);a=a||"default";var f=n.get(c);if(!f){var _={loading:0,preload:null};if(f=l.querySelector(ql(c)))_.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":a},s),(s=At.get(c))&&Ec(t,s);var $=f=l.createElement("link");Je($),et($,"link",t),$._p=new Promise(function(F,ee){$.onload=F,$.onerror=ee}),$.addEventListener("load",function(){_.loading|=1}),$.addEventListener("error",function(){_.loading|=2}),_.loading|=4,li(f,a,l)}f={type:"stylesheet",instance:f,count:1,state:_},n.set(c,f)}}}function s0(t,a){ia.X(t,a);var s=Hs;if(s&&t){var l=ls(s).hoistableScripts,n=Bs(t),c=l.get(n);c||(c=s.querySelector(Ol(n)),c||(t=S({src:t,async:!0},a),(a=At.get(n))&&Mc(t,a),c=s.createElement("script"),Je(c),et(c,"link",t),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},l.set(n,c))}}function l0(t,a){ia.M(t,a);var s=Hs;if(s&&t){var l=ls(s).hoistableScripts,n=Bs(t),c=l.get(n);c||(c=s.querySelector(Ol(n)),c||(t=S({src:t,async:!0,type:"module"},a),(a=At.get(n))&&Mc(t,a),c=s.createElement("script"),Je(c),et(c,"link",t),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},l.set(n,c))}}function Xm(t,a,s,l){var n=(n=oe.current)?si(n):null;if(!n)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Ls(s.href),s=ls(n).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ls(s.href);var c=ls(n).hoistableStyles,f=c.get(t);if(f||(n=n.ownerDocument||n,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(t,f),(c=n.querySelector(ql(t)))&&!c._p&&(f.instance=c,f.state.loading=5),At.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},At.set(t,s),c||n0(n,t,s,f.state))),a&&l===null)throw Error(o(528,""));return f}if(a&&l!==null)throw Error(o(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Bs(s),s=ls(n).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Ls(t){return'href="'+wt(t)+'"'}function ql(t){return'link[rel="stylesheet"]['+t+"]"}function Vm(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function n0(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),et(a,"link",s),Je(a),t.head.appendChild(a))}function Bs(t){return'[src="'+wt(t)+'"]'}function Ol(t){return"script[async]"+t}function Zm(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+wt(s.href)+'"]');if(l)return a.instance=l,Je(l),l;var n=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Je(l),et(l,"style",n),li(l,s.precedence,t),a.instance=l;case"stylesheet":n=Ls(s.href);var c=t.querySelector(ql(n));if(c)return a.state.loading|=4,a.instance=c,Je(c),c;l=Vm(s),(n=At.get(n))&&Ec(l,n),c=(t.ownerDocument||t).createElement("link"),Je(c);var f=c;return f._p=new Promise(function(_,$){f.onload=_,f.onerror=$}),et(c,"link",l),a.state.loading|=4,li(c,s.precedence,t),a.instance=c;case"script":return c=Bs(s.src),(n=t.querySelector(Ol(c)))?(a.instance=n,Je(n),n):(l=s,(n=At.get(c))&&(l=S({},s),Mc(l,n)),t=t.ownerDocument||t,n=t.createElement("script"),Je(n),et(n,"link",l),t.head.appendChild(n),a.instance=n);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,li(l,s.precedence,t));return a.instance}function li(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,c=n,f=0;f<l.length;f++){var _=l[f];if(_.dataset.precedence===a)c=_;else if(c!==n)break}c?c.parentNode.insertBefore(t,c.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Ec(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Mc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var ni=null;function Jm(t,a,s){if(ni===null){var l=new Map,n=ni=new Map;n.set(s,l)}else n=ni,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),n=0;n<s.length;n++){var c=s[n];if(!(c[Js]||c[st]||t==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var f=c.getAttribute(a)||"";f=t+f;var _=l.get(f);_?_.push(c):l.set(f,[c])}}return l}function Km(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function i0(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Fm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var zl=null;function r0(){}function c0(t,a,s){if(zl===null)throw Error(o(475));var l=zl;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var n=Ls(s.href),c=t.querySelector(ql(n));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ii.bind(l),t.then(l,l)),a.state.loading|=4,a.instance=c,Je(c);return}c=t.ownerDocument||t,s=Vm(s),(n=At.get(n))&&Ec(s,n),c=c.createElement("link"),Je(c);var f=c;f._p=new Promise(function(_,$){f.onload=_,f.onerror=$}),et(c,"link",s),a.instance=c}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(l.count++,a=ii.bind(l),t.addEventListener("load",a),t.addEventListener("error",a))}}function o0(){if(zl===null)throw Error(o(475));var t=zl;return t.stylesheets&&t.count===0&&Ac(t,t.stylesheets),0<t.count?function(a){var s=setTimeout(function(){if(t.stylesheets&&Ac(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(s)}}:null}function ii(){if(this.count--,this.count===0){if(this.stylesheets)Ac(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ri=null;function Ac(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ri=new Map,a.forEach(d0,t),ri=null,ii.call(t))}function d0(t,a){if(!(a.state.loading&4)){var s=ri.get(t);if(s)var l=s.get(null);else{s=new Map,ri.set(t,s);for(var n=t.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<n.length;c++){var f=n[c];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(s.set(f.dataset.precedence,f),l=f)}l&&s.set(null,l)}n=a.instance,f=n.getAttribute("data-precedence"),c=s.get(f)||l,c===l&&s.set(null,n),s.set(f,n),this.count++,l=ii.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),c?c.parentNode.insertBefore(n,c.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(n,t.firstChild)),a.state.loading|=4}}var Hl={$$typeof:T,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function u0(t,a,s,l,n,c,f,_){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=c,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Pm(t,a,s,l,n,c,f,_,$,F,ee,se){return t=new u0(t,a,s,f,_,$,F,se),a=1,c===!0&&(a|=24),c=pt(3,null,null,a),t.current=c,c.stateNode=t,a=ur(),a.refCount++,t.pooledCache=a,a.refCount++,c.memoizedState={element:l,isDehydrated:s,cache:a},fr(c),t}function Wm(t){return t?(t=ps,t):ps}function Im(t,a,s,l,n,c){n=Wm(n),l.context===null?l.context=n:l.pendingContext=n,l=fa(a),l.payload={element:s},c=c===void 0?null:c,c!==null&&(l.callback=c),s=pa(t,l,a),s!==null&&(jt(s,t,a),xl(s,t,a))}function ex(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Tc(t,a){ex(t,a),(t=t.alternate)&&ex(t,a)}function tx(t){if(t.tag===13){var a=fs(t,67108864);a!==null&&jt(a,t,67108864),Tc(t,67108864)}}var ci=!0;function m0(t,a,s,l){var n=h.T;h.T=null;var c=H.p;try{H.p=2,Dc(t,a,s,l)}finally{H.p=c,h.T=n}}function x0(t,a,s,l){var n=h.T;h.T=null;var c=H.p;try{H.p=8,Dc(t,a,s,l)}finally{H.p=c,h.T=n}}function Dc(t,a,s,l){if(ci){var n=Rc(l);if(n===null)yc(t,a,l,oi,s),sx(t,l);else if(f0(n,t,a,s,l))l.stopPropagation();else if(sx(t,l),a&4&&-1<h0.indexOf(t)){for(;n!==null;){var c=ss(n);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=Oa(c.pendingLanes);if(f!==0){var _=c;for(_.pendingLanes|=2,_.entangledLanes|=2;f;){var $=1<<31-ht(f);_.entanglements[1]|=$,f&=~$}Gt(c),(_e&6)===0&&(Vn=Ht()+500,Al(0))}}break;case 13:_=fs(c,2),_!==null&&jt(_,c,2),Jn(),Tc(c,2)}if(c=Rc(l),c===null&&yc(t,a,l,oi,s),c===n)break;n=c}n!==null&&l.stopPropagation()}else yc(t,a,l,null,s)}}function Rc(t){return t=Li(t),qc(t)}var oi=null;function qc(t){if(oi=null,t=as(t),t!==null){var a=m(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=g(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return oi=t,null}function ax(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wx()){case po:return 2;case go:return 8;case en:case Ix:return 32;case bo:return 268435456;default:return 32}default:return 32}}var Oc=!1,Ma=null,Aa=null,Ta=null,Ll=new Map,Bl=new Map,Da=[],h0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sx(t,a){switch(t){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Ll.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(a.pointerId)}}function Ul(t,a,s,l,n,c){return t===null||t.nativeEvent!==c?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:c,targetContainers:[n]},a!==null&&(a=ss(a),a!==null&&tx(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),t)}function f0(t,a,s,l,n){switch(a){case"focusin":return Ma=Ul(Ma,t,a,s,l,n),!0;case"dragenter":return Aa=Ul(Aa,t,a,s,l,n),!0;case"mouseover":return Ta=Ul(Ta,t,a,s,l,n),!0;case"pointerover":var c=n.pointerId;return Ll.set(c,Ul(Ll.get(c)||null,t,a,s,l,n)),!0;case"gotpointercapture":return c=n.pointerId,Bl.set(c,Ul(Bl.get(c)||null,t,a,s,l,n)),!0}return!1}function lx(t){var a=as(t.target);if(a!==null){var s=m(a);if(s!==null){if(a=s.tag,a===13){if(a=g(s),a!==null){t.blockedOn=a,rh(t.priority,function(){if(s.tag===13){var l=vt();l=_i(l);var n=fs(s,l);n!==null&&jt(n,s,l),Tc(s,l)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function di(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=Rc(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Hi=l,s.target.dispatchEvent(l),Hi=null}else return a=ss(s),a!==null&&tx(a),t.blockedOn=s,!1;a.shift()}return!0}function nx(t,a,s){di(t)&&s.delete(a)}function p0(){Oc=!1,Ma!==null&&di(Ma)&&(Ma=null),Aa!==null&&di(Aa)&&(Aa=null),Ta!==null&&di(Ta)&&(Ta=null),Ll.forEach(nx),Bl.forEach(nx)}function ui(t,a){t.blockedOn===a&&(t.blockedOn=null,Oc||(Oc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,p0)))}var mi=null;function ix(t){mi!==t&&(mi=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mi===t&&(mi=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],n=t[a+2];if(typeof l!="function"){if(qc(l||s)===null)continue;break}var c=ss(s);c!==null&&(t.splice(a,3),a-=3,qr(c,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function $l(t){function a($){return ui($,t)}Ma!==null&&ui(Ma,t),Aa!==null&&ui(Aa,t),Ta!==null&&ui(Ta,t),Ll.forEach(a),Bl.forEach(a);for(var s=0;s<Da.length;s++){var l=Da[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Da.length&&(s=Da[0],s.blockedOn===null);)lx(s),s.blockedOn===null&&Da.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],c=s[l+1],f=n[rt]||null;if(typeof c=="function")f||ix(s);else if(f){var _=null;if(c&&c.hasAttribute("formAction")){if(n=c,f=c[rt]||null)_=f.formAction;else if(qc(n)!==null)continue}else _=f.action;typeof _=="function"?s[l+1]=_:(s.splice(l,3),l-=3),ix(s)}}}function zc(t){this._internalRoot=t}xi.prototype.render=zc.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(o(409));var s=a.current,l=vt();Im(s,l,t,a,null,null)},xi.prototype.unmount=zc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Im(t.current,2,null,t,null,null),Jn(),a[ts]=null}};function xi(t){this._internalRoot=t}xi.prototype.unstable_scheduleHydration=function(t){if(t){var a=wo();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Da.length&&a!==0&&a<Da[s].priority;s++);Da.splice(s,0,t),s===0&&lx(t)}};var rx=i.version;if(rx!=="19.1.1")throw Error(o(527,rx,"19.1.1"));H.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=p(a),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var g0={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:h,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hi.isDisabled&&hi.supportsFiber)try{Xs=hi.inject(g0),xt=hi}catch{}}return Yl.createRoot=function(t,a){if(!u(t))throw Error(o(299));var s=!1,l="",n=wu,c=ku,f=Su,_=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(n=a.onUncaughtError),a.onCaughtError!==void 0&&(c=a.onCaughtError),a.onRecoverableError!==void 0&&(f=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(_=a.unstable_transitionCallbacks)),a=Pm(t,1,!1,null,null,s,l,n,c,f,_,null),t[ts]=a.current,bc(t),new zc(a)},Yl.hydrateRoot=function(t,a,s){if(!u(t))throw Error(o(299));var l=!1,n="",c=wu,f=ku,_=Su,$=null,F=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(c=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&($=s.unstable_transitionCallbacks),s.formState!==void 0&&(F=s.formState)),a=Pm(t,1,!0,a,s??null,l,n,c,f,_,$,F),a.context=Wm(null),s=a.current,l=vt(),l=_i(l),n=fa(l),n.callback=null,pa(s,n,l),s=l,a.current.lanes=s,Zs(a,s),Gt(a),t[ts]=a.current,bc(t),new xi(a)},Yl.version="19.1.1",Yl}var gx;function E0(){if(gx)return Bc.exports;gx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),Bc.exports=_0(),Bc.exports}var M0=E0();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bx="popstate";function A0(r={}){function i(o,u){let{pathname:m,search:g,hash:y}=o.location;return lo("",{pathname:m,search:g,hash:y},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function d(o,u){return typeof u=="string"?u:Pl(u)}return D0(i,d,null,r)}function Oe(r,i){if(r===!1||r===null||typeof r>"u")throw new Error(i)}function Tt(r,i){if(!r){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function T0(){return Math.random().toString(36).substring(2,10)}function yx(r,i){return{usr:r.state,key:r.key,idx:i}}function lo(r,i,d=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof i=="string"?$s(i):i,state:d,key:i&&i.key||o||T0()}}function Pl({pathname:r="/",search:i="",hash:d=""}){return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),d&&d!=="#"&&(r+=d.charAt(0)==="#"?d:"#"+d),r}function $s(r){let i={};if(r){let d=r.indexOf("#");d>=0&&(i.hash=r.substring(d),r=r.substring(0,d));let o=r.indexOf("?");o>=0&&(i.search=r.substring(o),r=r.substring(0,o)),r&&(i.pathname=r)}return i}function D0(r,i,d,o={}){let{window:u=document.defaultView,v5Compat:m=!1}=o,g=u.history,y="POP",p=null,x=S();x==null&&(x=0,g.replaceState({...g.state,idx:x},""));function S(){return(g.state||{idx:null}).idx}function b(){y="POP";let j=S(),N=j==null?null:j-x;x=j,p&&p({action:y,location:z.location,delta:N})}function D(j,N){y="PUSH";let w=lo(z.location,j,N);x=S()+1;let T=yx(w,x),A=z.createHref(w);try{g.pushState(T,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;u.location.assign(A)}m&&p&&p({action:y,location:z.location,delta:1})}function O(j,N){y="REPLACE";let w=lo(z.location,j,N);x=S();let T=yx(w,x),A=z.createHref(w);g.replaceState(T,"",A),m&&p&&p({action:y,location:z.location,delta:0})}function C(j){return R0(j)}let z={get action(){return y},get location(){return r(u,g)},listen(j){if(p)throw new Error("A history only accepts one active listener");return u.addEventListener(bx,b),p=j,()=>{u.removeEventListener(bx,b),p=null}},createHref(j){return i(u,j)},createURL:C,encodeLocation(j){let N=C(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:D,replace:O,go(j){return g.go(j)}};return z}function R0(r,i=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),Oe(d,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:Pl(r);return o=o.replace(/ $/,"%20"),!i&&o.startsWith("//")&&(o=d+o),new URL(o,d)}function Ax(r,i,d="/"){return q0(r,i,d,!1)}function q0(r,i,d,o){let u=typeof i=="string"?$s(i):i,m=ca(u.pathname||"/",d);if(m==null)return null;let g=Tx(r);O0(g);let y=null;for(let p=0;y==null&&p<g.length;++p){let x=V0(m);y=Q0(g[p],x,o)}return y}function Tx(r,i=[],d=[],o="",u=!1){let m=(g,y,p=u,x)=>{let S={relativePath:x===void 0?g.path||"":x,caseSensitive:g.caseSensitive===!0,childrenIndex:y,route:g};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&p)return;Oe(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let b=ra([o,S.relativePath]),D=d.concat(S);g.children&&g.children.length>0&&(Oe(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Tx(g.children,i,D,b,p)),!(g.path==null&&!g.index)&&i.push({path:b,score:G0(b,g.index),routesMeta:D})};return r.forEach((g,y)=>{if(g.path===""||!g.path?.includes("?"))m(g,y);else for(let p of Dx(g.path))m(g,y,!0,p)}),i}function Dx(r){let i=r.split("/");if(i.length===0)return[];let[d,...o]=i,u=d.endsWith("?"),m=d.replace(/\?$/,"");if(o.length===0)return u?[m,""]:[m];let g=Dx(o.join("/")),y=[];return y.push(...g.map(p=>p===""?m:[m,p].join("/"))),u&&y.push(...g),y.map(p=>r.startsWith("/")&&p===""?"/":p)}function O0(r){r.sort((i,d)=>i.score!==d.score?d.score-i.score:Y0(i.routesMeta.map(o=>o.childrenIndex),d.routesMeta.map(o=>o.childrenIndex)))}var z0=/^:[\w-]+$/,H0=3,L0=2,B0=1,U0=10,$0=-2,vx=r=>r==="*";function G0(r,i){let d=r.split("/"),o=d.length;return d.some(vx)&&(o+=$0),i&&(o+=L0),d.filter(u=>!vx(u)).reduce((u,m)=>u+(z0.test(m)?H0:m===""?B0:U0),o)}function Y0(r,i){return r.length===i.length&&r.slice(0,-1).every((o,u)=>o===i[u])?r[r.length-1]-i[i.length-1]:0}function Q0(r,i,d=!1){let{routesMeta:o}=r,u={},m="/",g=[];for(let y=0;y<o.length;++y){let p=o[y],x=y===o.length-1,S=m==="/"?i:i.slice(m.length)||"/",b=ji({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},S),D=p.route;if(!b&&x&&d&&!o[o.length-1].route.index&&(b=ji({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},S)),!b)return null;Object.assign(u,b.params),g.push({params:u,pathname:ra([m,b.pathname]),pathnameBase:F0(ra([m,b.pathnameBase])),route:D}),b.pathnameBase!=="/"&&(m=ra([m,b.pathnameBase]))}return g}function ji(r,i){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[d,o]=X0(r.path,r.caseSensitive,r.end),u=i.match(d);if(!u)return null;let m=u[0],g=m.replace(/(.)\/+$/,"$1"),y=u.slice(1);return{params:o.reduce((x,{paramName:S,isOptional:b},D)=>{if(S==="*"){let C=y[D]||"";g=m.slice(0,m.length-C.length).replace(/(.)\/+$/,"$1")}const O=y[D];return b&&!O?x[S]=void 0:x[S]=(O||"").replace(/%2F/g,"/"),x},{}),pathname:m,pathnameBase:g,pattern:r}}function X0(r,i=!1,d=!0){Tt(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],u="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,y,p)=>(o.push({paramName:y,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),u+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?u+="\\/*$":r!==""&&r!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,i?void 0:"i"),o]}function V0(r){try{return r.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Tt(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),r}}function ca(r,i){if(i==="/")return r;if(!r.toLowerCase().startsWith(i.toLowerCase()))return null;let d=i.endsWith("/")?i.length-1:i.length,o=r.charAt(d);return o&&o!=="/"?null:r.slice(d)||"/"}function Z0(r,i="/"){let{pathname:d,search:o="",hash:u=""}=typeof r=="string"?$s(r):r;return{pathname:d?d.startsWith("/")?d:J0(d,i):i,search:P0(o),hash:W0(u)}}function J0(r,i){let d=i.replace(/\/+$/,"").split("/");return r.split("/").forEach(u=>{u===".."?d.length>1&&d.pop():u!=="."&&d.push(u)}),d.length>1?d.join("/"):"/"}function Yc(r,i,d,o){return`Cannot include a '${r}' character in a manually specified \`to.${i}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function K0(r){return r.filter((i,d)=>d===0||i.route.path&&i.route.path.length>0)}function co(r){let i=K0(r);return i.map((d,o)=>o===i.length-1?d.pathname:d.pathnameBase)}function oo(r,i,d,o=!1){let u;typeof r=="string"?u=$s(r):(u={...r},Oe(!u.pathname||!u.pathname.includes("?"),Yc("?","pathname","search",u)),Oe(!u.pathname||!u.pathname.includes("#"),Yc("#","pathname","hash",u)),Oe(!u.search||!u.search.includes("#"),Yc("#","search","hash",u)));let m=r===""||u.pathname==="",g=m?"/":u.pathname,y;if(g==null)y=d;else{let b=i.length-1;if(!o&&g.startsWith("..")){let D=g.split("/");for(;D[0]==="..";)D.shift(),b-=1;u.pathname=D.join("/")}y=b>=0?i[b]:"/"}let p=Z0(u,y),x=g&&g!=="/"&&g.endsWith("/"),S=(m||g===".")&&d.endsWith("/");return!p.pathname.endsWith("/")&&(x||S)&&(p.pathname+="/"),p}var ra=r=>r.join("/").replace(/\/\/+/g,"/"),F0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),P0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,W0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function I0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Rx=["POST","PUT","PATCH","DELETE"];new Set(Rx);var ep=["GET",...Rx];new Set(ep);var Gs=v.createContext(null);Gs.displayName="DataRouter";var wi=v.createContext(null);wi.displayName="DataRouterState";v.createContext(!1);var qx=v.createContext({isTransitioning:!1});qx.displayName="ViewTransition";var tp=v.createContext(new Map);tp.displayName="Fetchers";var ap=v.createContext(null);ap.displayName="Await";var zt=v.createContext(null);zt.displayName="Navigation";var Wl=v.createContext(null);Wl.displayName="Location";var Yt=v.createContext({outlet:null,matches:[],isDataRoute:!1});Yt.displayName="Route";var uo=v.createContext(null);uo.displayName="RouteError";function sp(r,{relative:i}={}){Oe(Ys(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:o}=v.useContext(zt),{hash:u,pathname:m,search:g}=Il(r,{relative:i}),y=m;return d!=="/"&&(y=m==="/"?d:ra([d,m])),o.createHref({pathname:y,search:g,hash:u})}function Ys(){return v.useContext(Wl)!=null}function oa(){return Oe(Ys(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Wl).location}var Ox="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zx(r){v.useContext(zt).static||v.useLayoutEffect(r)}function ke(){let{isDataRoute:r}=v.useContext(Yt);return r?pp():lp()}function lp(){Oe(Ys(),"useNavigate() may be used only in the context of a <Router> component.");let r=v.useContext(Gs),{basename:i,navigator:d}=v.useContext(zt),{matches:o}=v.useContext(Yt),{pathname:u}=oa(),m=JSON.stringify(co(o)),g=v.useRef(!1);return zx(()=>{g.current=!0}),v.useCallback((p,x={})=>{if(Tt(g.current,Ox),!g.current)return;if(typeof p=="number"){d.go(p);return}let S=oo(p,JSON.parse(m),u,x.relative==="path");r==null&&i!=="/"&&(S.pathname=S.pathname==="/"?i:ra([i,S.pathname])),(x.replace?d.replace:d.push)(S,x.state,x)},[i,d,m,u,r])}v.createContext(null);function Il(r,{relative:i}={}){let{matches:d}=v.useContext(Yt),{pathname:o}=oa(),u=JSON.stringify(co(d));return v.useMemo(()=>oo(r,JSON.parse(u),o,i==="path"),[r,u,o,i])}function np(r,i){return Hx(r,i)}function Hx(r,i,d,o,u){Oe(Ys(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=v.useContext(zt),{matches:g}=v.useContext(Yt),y=g[g.length-1],p=y?y.params:{},x=y?y.pathname:"/",S=y?y.pathnameBase:"/",b=y&&y.route;{let w=b&&b.path||"";Lx(x,!b||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let D=oa(),O;if(i){let w=typeof i=="string"?$s(i):i;Oe(S==="/"||w.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${w.pathname}" was given in the \`location\` prop.`),O=w}else O=D;let C=O.pathname||"/",z=C;if(S!=="/"){let w=S.replace(/^\//,"").split("/");z="/"+C.replace(/^\//,"").split("/").slice(w.length).join("/")}let j=Ax(r,{pathname:z});Tt(b||j!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Tt(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=dp(j&&j.map(w=>Object.assign({},w,{params:Object.assign({},p,w.params),pathname:ra([S,m.encodeLocation?m.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?S:ra([S,m.encodeLocation?m.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),g,d,o,u);return i&&N?v.createElement(Wl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},N):N}function ip(){let r=fp(),i=I0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),d=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},m={padding:"2px 4px",backgroundColor:o},g=null;return console.error("Error handled by React Router default ErrorBoundary:",r),g=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:m},"ErrorBoundary")," or"," ",v.createElement("code",{style:m},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},i),d?v.createElement("pre",{style:u},d):null,g)}var rp=v.createElement(ip,null),cp=class extends v.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,i){return i.location!==r.location||i.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:i.error,location:i.location,revalidation:r.revalidation||i.revalidation}}componentDidCatch(r,i){this.props.unstable_onError?this.props.unstable_onError(r,i):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?v.createElement(Yt.Provider,{value:this.props.routeContext},v.createElement(uo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function op({routeContext:r,match:i,children:d}){let o=v.useContext(Gs);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),v.createElement(Yt.Provider,{value:r},d)}function dp(r,i=[],d=null,o=null,u=null){if(r==null){if(!d)return null;if(d.errors)r=d.matches;else if(i.length===0&&!d.initialized&&d.matches.length>0)r=d.matches;else return null}let m=r,g=d?.errors;if(g!=null){let x=m.findIndex(S=>S.route.id&&g?.[S.route.id]!==void 0);Oe(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),m=m.slice(0,Math.min(m.length,x+1))}let y=!1,p=-1;if(d)for(let x=0;x<m.length;x++){let S=m[x];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(p=x),S.route.id){let{loaderData:b,errors:D}=d,O=S.route.loader&&!b.hasOwnProperty(S.route.id)&&(!D||D[S.route.id]===void 0);if(S.route.lazy||O){y=!0,p>=0?m=m.slice(0,p+1):m=[m[0]];break}}}return m.reduceRight((x,S,b)=>{let D,O=!1,C=null,z=null;d&&(D=g&&S.route.id?g[S.route.id]:void 0,C=S.route.errorElement||rp,y&&(p<0&&b===0?(Lx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,z=null):p===b&&(O=!0,z=S.route.hydrateFallbackElement||null)));let j=i.concat(m.slice(0,b+1)),N=()=>{let w;return D?w=C:O?w=z:S.route.Component?w=v.createElement(S.route.Component,null):S.route.element?w=S.route.element:w=x,v.createElement(op,{match:S,routeContext:{outlet:x,matches:j,isDataRoute:d!=null},children:w})};return d&&(S.route.ErrorBoundary||S.route.errorElement||b===0)?v.createElement(cp,{location:d.location,revalidation:d.revalidation,component:C,error:D,children:N(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:o}):N()},null)}function mo(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function up(r){let i=v.useContext(Gs);return Oe(i,mo(r)),i}function mp(r){let i=v.useContext(wi);return Oe(i,mo(r)),i}function xp(r){let i=v.useContext(Yt);return Oe(i,mo(r)),i}function xo(r){let i=xp(r),d=i.matches[i.matches.length-1];return Oe(d.route.id,`${r} can only be used on routes that contain a unique "id"`),d.route.id}function hp(){return xo("useRouteId")}function fp(){let r=v.useContext(uo),i=mp("useRouteError"),d=xo("useRouteError");return r!==void 0?r:i.errors?.[d]}function pp(){let{router:r}=up("useNavigate"),i=xo("useNavigate"),d=v.useRef(!1);return zx(()=>{d.current=!0}),v.useCallback(async(u,m={})=>{Tt(d.current,Ox),d.current&&(typeof u=="number"?r.navigate(u):await r.navigate(u,{fromRouteId:i,...m}))},[r,i])}var jx={};function Lx(r,i,d){!i&&!jx[r]&&(jx[r]=!0,Tt(!1,d))}v.memo(gp);function gp({routes:r,future:i,state:d,unstable_onError:o}){return Hx(r,void 0,d,o,i)}function bp({to:r,replace:i,state:d,relative:o}){Oe(Ys(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=v.useContext(zt);Tt(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=v.useContext(Yt),{pathname:g}=oa(),y=ke(),p=oo(r,co(m),g,o==="path"),x=JSON.stringify(p);return v.useEffect(()=>{y(JSON.parse(x),{replace:i,state:d,relative:o})},[y,x,o,i,d]),null}function pe(r){Oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yp({basename:r="/",children:i=null,location:d,navigationType:o="POP",navigator:u,static:m=!1}){Oe(!Ys(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=r.replace(/^\/*/,"/"),y=v.useMemo(()=>({basename:g,navigator:u,static:m,future:{}}),[g,u,m]);typeof d=="string"&&(d=$s(d));let{pathname:p="/",search:x="",hash:S="",state:b=null,key:D="default"}=d,O=v.useMemo(()=>{let C=ca(p,g);return C==null?null:{location:{pathname:C,search:x,hash:S,state:b,key:D},navigationType:o}},[g,p,x,S,b,D,o]);return Tt(O!=null,`<Router basename="${g}"> is not able to match the URL "${p}${x}${S}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:v.createElement(zt.Provider,{value:y},v.createElement(Wl.Provider,{children:i,value:O}))}function vp({children:r,location:i}){return np(no(r),i)}function no(r,i=[]){let d=[];return v.Children.forEach(r,(o,u)=>{if(!v.isValidElement(o))return;let m=[...i,u];if(o.type===v.Fragment){d.push.apply(d,no(o.props.children,m));return}Oe(o.type===pe,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let g={id:o.props.id||m.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(g.children=no(o.props.children,m)),d.push(g)}),d}var yi="get",vi="application/x-www-form-urlencoded";function ki(r){return r!=null&&typeof r.tagName=="string"}function jp(r){return ki(r)&&r.tagName.toLowerCase()==="button"}function Np(r){return ki(r)&&r.tagName.toLowerCase()==="form"}function wp(r){return ki(r)&&r.tagName.toLowerCase()==="input"}function kp(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Sp(r,i){return r.button===0&&(!i||i==="_self")&&!kp(r)}function io(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((i,d)=>{let o=r[d];return i.concat(Array.isArray(o)?o.map(u=>[d,u]):[[d,o]])},[]))}function Cp(r,i){let d=io(r);return i&&i.forEach((o,u)=>{d.has(u)||i.getAll(u).forEach(m=>{d.append(u,m)})}),d}var fi=null;function _p(){if(fi===null)try{new FormData(document.createElement("form"),0),fi=!1}catch{fi=!0}return fi}var Ep=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qc(r){return r!=null&&!Ep.has(r)?(Tt(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vi}"`),null):r}function Mp(r,i){let d,o,u,m,g;if(Np(r)){let y=r.getAttribute("action");o=y?ca(y,i):null,d=r.getAttribute("method")||yi,u=Qc(r.getAttribute("enctype"))||vi,m=new FormData(r)}else if(jp(r)||wp(r)&&(r.type==="submit"||r.type==="image")){let y=r.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||y.getAttribute("action");if(o=p?ca(p,i):null,d=r.getAttribute("formmethod")||y.getAttribute("method")||yi,u=Qc(r.getAttribute("formenctype"))||Qc(y.getAttribute("enctype"))||vi,m=new FormData(y,r),!_p()){let{name:x,type:S,value:b}=r;if(S==="image"){let D=x?`${x}.`:"";m.append(`${D}x`,"0"),m.append(`${D}y`,"0")}else x&&m.append(x,b)}}else{if(ki(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=yi,o=null,u=vi,g=r}return m&&u==="text/plain"&&(g=m,m=void 0),{action:o,method:d.toLowerCase(),encType:u,formData:m,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ho(r,i){if(r===!1||r===null||typeof r>"u")throw new Error(i)}function Ap(r,i,d){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname=`_root.${d}`:i&&ca(o.pathname,i)==="/"?o.pathname=`${i.replace(/\/$/,"")}/_root.${d}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${d}`,o}async function Tp(r,i){if(r.id in i)return i[r.id];try{let d=await import(r.module);return i[r.id]=d,d}catch(d){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dp(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Rp(r,i,d){let o=await Promise.all(r.map(async u=>{let m=i.routes[u.route.id];if(m){let g=await Tp(m,d);return g.links?g.links():[]}return[]}));return Hp(o.flat(1).filter(Dp).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Nx(r,i,d,o,u,m){let g=(p,x)=>d[x]?p.route.id!==d[x].route.id:!0,y=(p,x)=>d[x].pathname!==p.pathname||d[x].route.path?.endsWith("*")&&d[x].params["*"]!==p.params["*"];return m==="assets"?i.filter((p,x)=>g(p,x)||y(p,x)):m==="data"?i.filter((p,x)=>{let S=o.routes[p.route.id];if(!S||!S.hasLoader)return!1;if(g(p,x)||y(p,x))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function qp(r,i,{includeHydrateFallback:d}={}){return Op(r.map(o=>{let u=i.routes[o.route.id];if(!u)return[];let m=[u.module];return u.clientActionModule&&(m=m.concat(u.clientActionModule)),u.clientLoaderModule&&(m=m.concat(u.clientLoaderModule)),d&&u.hydrateFallbackModule&&(m=m.concat(u.hydrateFallbackModule)),u.imports&&(m=m.concat(u.imports)),m}).flat(1))}function Op(r){return[...new Set(r)]}function zp(r){let i={},d=Object.keys(r).sort();for(let o of d)i[o]=r[o];return i}function Hp(r,i){let d=new Set;return new Set(i),r.reduce((o,u)=>{let m=JSON.stringify(zp(u));return d.has(m)||(d.add(m),o.push({key:m,link:u})),o},[])}function Bx(){let r=v.useContext(Gs);return ho(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Lp(){let r=v.useContext(wi);return ho(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var fo=v.createContext(void 0);fo.displayName="FrameworkContext";function Ux(){let r=v.useContext(fo);return ho(r,"You must render this element inside a <HydratedRouter> element"),r}function Bp(r,i){let d=v.useContext(fo),[o,u]=v.useState(!1),[m,g]=v.useState(!1),{onFocus:y,onBlur:p,onMouseEnter:x,onMouseLeave:S,onTouchStart:b}=i,D=v.useRef(null);v.useEffect(()=>{if(r==="render"&&g(!0),r==="viewport"){let z=N=>{N.forEach(w=>{g(w.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return D.current&&j.observe(D.current),()=>{j.disconnect()}}},[r]),v.useEffect(()=>{if(o){let z=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(z)}}},[o]);let O=()=>{u(!0)},C=()=>{u(!1),g(!1)};return d?r!=="intent"?[m,D,{}]:[m,D,{onFocus:Ql(y,O),onBlur:Ql(p,C),onMouseEnter:Ql(x,O),onMouseLeave:Ql(S,C),onTouchStart:Ql(b,O)}]:[!1,D,{}]}function Ql(r,i){return d=>{r&&r(d),d.defaultPrevented||i(d)}}function Up({page:r,...i}){let{router:d}=Bx(),o=v.useMemo(()=>Ax(d.routes,r,d.basename),[d.routes,r,d.basename]);return o?v.createElement(Gp,{page:r,matches:o,...i}):null}function $p(r){let{manifest:i,routeModules:d}=Ux(),[o,u]=v.useState([]);return v.useEffect(()=>{let m=!1;return Rp(r,i,d).then(g=>{m||u(g)}),()=>{m=!0}},[r,i,d]),o}function Gp({page:r,matches:i,...d}){let o=oa(),{manifest:u,routeModules:m}=Ux(),{basename:g}=Bx(),{loaderData:y,matches:p}=Lp(),x=v.useMemo(()=>Nx(r,i,p,u,o,"data"),[r,i,p,u,o]),S=v.useMemo(()=>Nx(r,i,p,u,o,"assets"),[r,i,p,u,o]),b=v.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let C=new Set,z=!1;if(i.forEach(N=>{let w=u.routes[N.route.id];!w||!w.hasLoader||(!x.some(T=>T.route.id===N.route.id)&&N.route.id in y&&m[N.route.id]?.shouldRevalidate||w.hasClientLoader?z=!0:C.add(N.route.id))}),C.size===0)return[];let j=Ap(r,g,"data");return z&&C.size>0&&j.searchParams.set("_routes",i.filter(N=>C.has(N.route.id)).map(N=>N.route.id).join(",")),[j.pathname+j.search]},[g,y,o,u,x,i,r,m]),D=v.useMemo(()=>qp(S,u),[S,u]),O=$p(S);return v.createElement(v.Fragment,null,b.map(C=>v.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...d})),D.map(C=>v.createElement("link",{key:C,rel:"modulepreload",href:C,...d})),O.map(({key:C,link:z})=>v.createElement("link",{key:C,nonce:d.nonce,...z})))}function Yp(...r){return i=>{r.forEach(d=>{typeof d=="function"?d(i):d!=null&&(d.current=i)})}}var $x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$x&&(window.__reactRouterVersion="7.9.1")}catch{}function Qp({basename:r,children:i,window:d}){let o=v.useRef();o.current==null&&(o.current=A0({window:d,v5Compat:!0}));let u=o.current,[m,g]=v.useState({action:u.action,location:u.location}),y=v.useCallback(p=>{v.startTransition(()=>g(p))},[g]);return v.useLayoutEffect(()=>u.listen(y),[u,y]),v.createElement(yp,{basename:r,children:i,location:m.location,navigationType:m.action,navigator:u})}var Gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yx=v.forwardRef(function({onClick:i,discover:d="render",prefetch:o="none",relative:u,reloadDocument:m,replace:g,state:y,target:p,to:x,preventScrollReset:S,viewTransition:b,...D},O){let{basename:C}=v.useContext(zt),z=typeof x=="string"&&Gx.test(x),j,N=!1;if(typeof x=="string"&&z&&(j=x,$x))try{let ae=new URL(window.location.href),G=x.startsWith("//")?new URL(ae.protocol+x):new URL(x),le=ca(G.pathname,C);G.origin===ae.origin&&le!=null?x=le+G.search+G.hash:N=!0}catch{Tt(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=sp(x,{relative:u}),[T,A,k]=Bp(o,D),M=Jp(x,{replace:g,state:y,target:p,preventScrollReset:S,relative:u,viewTransition:b});function Y(ae){i&&i(ae),ae.defaultPrevented||M(ae)}let B=v.createElement("a",{...D,...k,href:j||w,onClick:N||m?i:Y,ref:Yp(O,A),target:p,"data-discover":!z&&d==="render"?"true":void 0});return T&&!z?v.createElement(v.Fragment,null,B,v.createElement(Up,{page:w})):B});Yx.displayName="Link";var Xp=v.forwardRef(function({"aria-current":i="page",caseSensitive:d=!1,className:o="",end:u=!1,style:m,to:g,viewTransition:y,children:p,...x},S){let b=Il(g,{relative:x.relative}),D=oa(),O=v.useContext(wi),{navigator:C,basename:z}=v.useContext(zt),j=O!=null&&eg(b)&&y===!0,N=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,w=D.pathname,T=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;d||(w=w.toLowerCase(),T=T?T.toLowerCase():null,N=N.toLowerCase()),T&&z&&(T=ca(T,z)||T);const A=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let k=w===N||!u&&w.startsWith(N)&&w.charAt(A)==="/",M=T!=null&&(T===N||!u&&T.startsWith(N)&&T.charAt(N.length)==="/"),Y={isActive:k,isPending:M,isTransitioning:j},B=k?i:void 0,ae;typeof o=="function"?ae=o(Y):ae=[o,k?"active":null,M?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let G=typeof m=="function"?m(Y):m;return v.createElement(Yx,{...x,"aria-current":B,className:ae,ref:S,style:G,to:g,viewTransition:y},typeof p=="function"?p(Y):p)});Xp.displayName="NavLink";var Vp=v.forwardRef(({discover:r="render",fetcherKey:i,navigate:d,reloadDocument:o,replace:u,state:m,method:g=yi,action:y,onSubmit:p,relative:x,preventScrollReset:S,viewTransition:b,...D},O)=>{let C=Wp(),z=Ip(y,{relative:x}),j=g.toLowerCase()==="get"?"get":"post",N=typeof y=="string"&&Gx.test(y),w=T=>{if(p&&p(T),T.defaultPrevented)return;T.preventDefault();let A=T.nativeEvent.submitter,k=A?.getAttribute("formmethod")||g;C(A||T.currentTarget,{fetcherKey:i,method:k,navigate:d,replace:u,state:m,relative:x,preventScrollReset:S,viewTransition:b})};return v.createElement("form",{ref:O,method:j,action:z,onSubmit:o?p:w,...D,"data-discover":!N&&r==="render"?"true":void 0})});Vp.displayName="Form";function Zp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qx(r){let i=v.useContext(Gs);return Oe(i,Zp(r)),i}function Jp(r,{target:i,replace:d,state:o,preventScrollReset:u,relative:m,viewTransition:g}={}){let y=ke(),p=oa(),x=Il(r,{relative:m});return v.useCallback(S=>{if(Sp(S,i)){S.preventDefault();let b=d!==void 0?d:Pl(p)===Pl(x);y(r,{replace:b,state:o,preventScrollReset:u,relative:m,viewTransition:g})}},[p,y,x,d,o,i,r,u,m,g])}function Kp(r){Tt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=v.useRef(io(r)),d=v.useRef(!1),o=oa(),u=v.useMemo(()=>Cp(o.search,d.current?null:i.current),[o.search]),m=ke(),g=v.useCallback((y,p)=>{const x=io(typeof y=="function"?y(new URLSearchParams(u)):y);d.current=!0,m("?"+x,p)},[m,u]);return[u,g]}var Fp=0,Pp=()=>`__${String(++Fp)}__`;function Wp(){let{router:r}=Qx("useSubmit"),{basename:i}=v.useContext(zt),d=hp();return v.useCallback(async(o,u={})=>{let{action:m,method:g,encType:y,formData:p,body:x}=Mp(o,i);if(u.navigate===!1){let S=u.fetcherKey||Pp();await r.fetch(S,d,u.action||m,{preventScrollReset:u.preventScrollReset,formData:p,body:x,formMethod:u.method||g,formEncType:u.encType||y,flushSync:u.flushSync})}else await r.navigate(u.action||m,{preventScrollReset:u.preventScrollReset,formData:p,body:x,formMethod:u.method||g,formEncType:u.encType||y,replace:u.replace,state:u.state,fromRouteId:d,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,i,d])}function Ip(r,{relative:i}={}){let{basename:d}=v.useContext(zt),o=v.useContext(Yt);Oe(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),m={...Il(r||".",{relative:i})},g=oa();if(r==null){m.search=g.search;let y=new URLSearchParams(m.search),p=y.getAll("index");if(p.some(S=>S==="")){y.delete("index"),p.filter(b=>b).forEach(b=>y.append("index",b));let S=y.toString();m.search=S?`?${S}`:""}}return(!r||r===".")&&u.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(m.pathname=m.pathname==="/"?d:ra([d,m.pathname])),Pl(m)}function eg(r,{relative:i}={}){let d=v.useContext(qx);Oe(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Qx("useViewTransitionState"),u=Il(r,{relative:i});if(!d.isTransitioning)return!1;let m=ca(d.currentLocation.pathname,o)||d.currentLocation.pathname,g=ca(d.nextLocation.pathname,o)||d.nextLocation.pathname;return ji(u.pathname,g)!=null||ji(u.pathname,m)!=null}const wx=r=>{let i;const d=new Set,o=(x,S)=>{const b=typeof x=="function"?x(i):x;if(!Object.is(b,i)){const D=i;i=S??(typeof b!="object"||b===null)?b:Object.assign({},i,b),d.forEach(O=>O(i,D))}},u=()=>i,y={setState:o,getState:u,getInitialState:()=>p,subscribe:x=>(d.add(x),()=>d.delete(x))},p=i=r(o,u,y);return y},tg=(r=>r?wx(r):wx),ag=r=>r;function sg(r,i=ag){const d=at.useSyncExternalStore(r.subscribe,at.useCallback(()=>i(r.getState()),[r,i]),at.useCallback(()=>i(r.getInitialState()),[r,i]));return at.useDebugValue(d),d}const kx=r=>{const i=tg(r),d=o=>sg(i,o);return Object.assign(d,i),d},lg=(r=>r?kx(r):kx),ng={id:"sakura",name:"사쿠라",role:"검술부 에이스",affectionStart:0,affectionMax:100,likes:["훈련","도전","정직함"],dislikes:["거짓말","나태함"],baseText:"쿨하고 실력 지상주의자. 강한 상대를 찾고 있다.",dialogues:{0:"...너도 이 학원의 학생인가?",20:"너의 실력이 궁금해지는군.",40:"함께 훈련하는 것도 나쁘지 않아.",60:"너와 있으면... 마음이 편해.",80:"내가 이런 감정을 느끼게 될 줄은...",100:"너를 지키기 위해서라면 뭐든 할 수 있어."},sprite:"🗡️",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},ig={id:"yuki",name:"유키",role:"도서부 부장",affectionStart:0,affectionMax:100,likes:["책","조용함","차"],dislikes:["시끄러움","무례함"],baseText:"수줍고 차분한 도서위원. 책 속 세계를 사랑한다.",dialogues:{0:"아... 안녕하세요...",20:"이 책... 같이 읽어보실래요?",40:"당신과 이야기하는 시간이 즐거워요.",60:"당신이 없으면... 외로울 것 같아요.",80:"이 감정이... 사랑인가요?",100:"영원히 당신 곁에 있고 싶어요."},sprite:"📚",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},rg={id:"luna",name:"루나",role:"마법학부 수석",affectionStart:0,affectionMax:100,likes:["마법","별","음악"],dislikes:["규칙","억압"],baseText:"밝고 사교적. 명문 마법 가문 출신이지만 자유로운 영혼.",dialogues:{0:"오! 새로운 친구네? 반가워!",20:"너도 마법의 아름다움을 느껴봐!",40:"너와 함께라면 가문의 압박도 잊을 수 있어.",60:"너를 만난 건 운명인 것 같아.",80:"매일 밤 네 생각에 잠들어.",100:"가문이 뭐든 상관없어. 널 선택할게."},sprite:"✨",image:"https://images.unsplash.com/photo-1727466443068-779e1f8fe8e8?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjdXRlJTIwYW5pbWUlMjBib3klMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDExOTQyfDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},cg={id:"mystery",name:"???",role:"수수께끼의 전학생",affectionStart:0,affectionMax:100,likes:["비밀","밤","고양이"],dislikes:["거짓","배신"],baseText:"정체불명의 전학생. 특별한 조건을 만족해야 만날 수 있다.",dialogues:{0:"...넌 누구지?",20:"흥미로운 인간이군.",40:"너에게만은 진실을 말하고 싶어.",60:"내 비밀을... 알고도 곁에 있어줄래?",80:"처음으로... 누군가를 믿고 싶어졌어.",100:"내 전부를 너에게 바칠게."},sprite:"🌙",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",unlockCondition:{day:10,totalAffection:150}},og={id:"akane",name:"아카네",role:"학생회장",affectionStart:0,affectionMax:100,likes:["질서","책임감","리더십"],dislikes:["무책임","규칙 위반","게으름"],baseText:"카리스마 넘치는 학생회장. 완벽주의자지만 내면은 따뜻하다.",dialogues:{0:"신입생이군요. 학교 규칙은 숙지하셨나요?",20:"당신은 꽤 성실한 학생이네요.",40:"회장직이 힘들 때... 당신이 있어 든든해요.",60:"당신 앞에서만 진짜 나를 보여줄 수 있어요.",80:"이런 감정... 회장으로서 가져선 안 되는데...",100:"규칙보다 중요한 건... 당신이에요."},sprite:"👑",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080"},dg={id:"hana",name:"하나",role:"요리부 부장",affectionStart:0,affectionMax:100,likes:["요리","디저트","가족"],dislikes:["음식 낭비","편식","인스턴트"],baseText:"따뜻하고 모성애 넘치는 성격. 모두를 먹이려 한다.",dialogues:{0:"배고프지 않아요? 제가 만든 도시락 드실래요?",20:"당신이 맛있게 먹는 모습이 좋아요.",40:"특별히 당신을 위한 요리를 준비했어요.",60:"매일 당신의 도시락을 만들고 싶어요.",80:"당신과 함께 요리하는 미래를 꿈꿔요.",100:"평생 당신의 곁에서 요리하고 싶어요."},sprite:"🍰",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080"},ug={id:"rin",name:"린",role:"육상부 스타",affectionStart:0,affectionMax:100,likes:["달리기","아침 햇살","스포츠 음료"],dislikes:["비 오는 날","포기","변명"],baseText:"활발하고 긍정적인 에너지. 항상 웃는 햇살 같은 소녀.",dialogues:{0:"안녕! 같이 아침 조깅할래요?",20:"당신과 달리면 더 빨라지는 것 같아요!",40:"당신이 응원해주면 무엇이든 할 수 있어요.",60:"당신과의 시간이 제일 소중해요.",80:"달리는 것보다... 당신이 더 좋아요.",100:"함께 인생을 완주하고 싶어요."},sprite:"🏃‍♀️",image:"https://images.unsplash.com/photo-1727466443068-779e1f8fe8e8?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjdXRlJTIwYW5pbWUlMjBib3klMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDExOTQyfDA&ixlib=rb-4.1.0&q=80&w=1080"},mg={id:"mei",name:"메이",role:"미술부 천재",affectionStart:0,affectionMax:100,likes:["그림","고요함","영감"],dislikes:["소음","방해","틀에 박힌 것"],baseText:"예술적 감성이 풍부한 소녀. 자신만의 세계에 빠져있다.",dialogues:{0:"...당신의 색깔은 뭘까요?",20:"당신을 그려도 될까요?",40:"당신은 제 뮤즈예요.",60:"당신 없는 세상은 흑백이에요.",80:"당신이 제 캔버스의 전부예요.",100:"영원히 당신만을 그리고 싶어요."},sprite:"🎨",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080"},xg={id:"sora",name:"소라",role:"과학부 천재",affectionStart:0,affectionMax:100,likes:["실험","발명","논리"],dislikes:["미신","비과학적 사고","실패"],baseText:"논리적이고 분석적. 감정보다 이성을 중시한다.",dialogues:{0:"흥미로운 실험 대상이네요.",20:"당신의 데이터가 궁금해요.",40:"이상해요... 당신을 보면 심박수가 올라가요.",60:"이 감정을 과학적으로 설명할 수 없어요.",80:"당신은 제 가설을 모두 뒤집었어요.",100:"사랑이 과학을 초월한다는 걸 깨달았어요."},sprite:"🔬",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080"},qa={sakura:ng,yuki:ig,luna:rg,mystery:cg,akane:og,hana:dg,rin:ug,mei:mg,sora:xg},hg=[{id:"sakura_training",name:"검술 훈련",trigger:{location:"training",character:"sakura",minAffection:20,chance:.5},description:"사쿠라가 검술 훈련을 제안한다.",choices:[{text:"좋아, 함께 훈련하자!",effects:{affection:{sakura:10},stats:{stamina:2},text:"사쿠라와 즐거운 훈련 시간을 보냈다."}},{text:"오늘은 좀 피곤해서...",effects:{affection:{sakura:-5},text:"사쿠라가 실망한 표정을 지었다."}}]},{id:"yuki_library",name:"도서관 데이트",trigger:{location:"library",character:"yuki",minAffection:30,chance:.4},description:"유키가 함께 책을 읽자고 제안한다.",choices:[{text:"좋은 생각이야!",effects:{affection:{yuki:15},stats:{intelligence:3},text:"유키와 조용한 시간을 보내며 친해졌다."}},{text:"미안, 다른 약속이 있어.",effects:{affection:{yuki:-3},text:"유키가 아쉬워하는 표정을 지었다."}}]},{id:"luna_magic",name:"마법 수업",trigger:{location:"classroom",character:"luna",minAffection:15,chance:.6},description:"루나가 특별한 마법을 보여주겠다고 한다.",choices:[{text:"와! 보고 싶어!",effects:{affection:{luna:12},stats:{intelligence:2,charm:1},text:"루나의 환상적인 마법에 매료되었다."}},{text:"마법은 위험하지 않아?",effects:{affection:{luna:5},text:"루나가 안전하다고 안심시켜준다."}}]},{id:"random_exam",name:"깜짝 시험",trigger:{location:"classroom",minDay:5,chance:.2},description:"갑작스러운 시험이 시작된다!",choices:[{text:"열심히 푼다",condition:{minIntelligence:15},effects:{stats:{intelligence:2,charm:1},text:"시험을 잘 봤다! 모두가 감탄한다."}},{text:"대충 찍는다",effects:{stats:{stamina:-1},text:"시험을 망쳤다..."}}]},{id:"confession_sakura",name:"사쿠라의 고백",trigger:{character:"sakura",minAffection:80,minDay:20,once:!0},description:"사쿠라가 진지한 표정으로 다가온다...",choices:[{text:"나도 좋아해",effects:{affection:{sakura:20},flag:"sakura_route",text:"사쿠라와 연인이 되었다!"}},{text:"미안, 친구로 남자",effects:{affection:{sakura:-30},text:"사쿠라가 슬픈 미소를 지으며 돌아섰다."}}]},{id:"mystery_encounter",name:"신비한 만남",trigger:{minDay:10,totalAffection:150,chance:.1,once:!0},description:"어둠 속에서 누군가 나타난다...",choices:[{text:"누구세요?",effects:{unlockCharacter:"mystery",text:"신비로운 전학생을 만났다!"}}]},{id:"sakura_secret_garden",name:"비밀 정원에서의 검술 연습",trigger:{location:"secretGarden",character:"sakura",minAffection:50,chance:.6},description:"비밀 정원에서 사쿠라가 달빛 아래 검술을 연습하고 있다. 아름다운 자세에 감탄하게 된다.",choices:[{text:"같이 연습해도 될까?",effects:{affection:{sakura:20},stats:{stamina:3,charm:2},text:"사쿠라와 달빛 아래에서 특별한 검술 연습을 했다. 둘 사이의 거리가 더욱 가까워졌다."}},{text:"조용히 감상하기",effects:{affection:{sakura:15},stats:{charm:1},text:"사쿠라의 우아한 검술을 감상했다. 그녀의 진지한 모습이 인상깊었다."}},{text:"다른 곳으로 가기",effects:{text:"조용히 자리를 떠났다."}}]},{id:"yuki_secret_garden",name:"비밀 정원의 독서 시간",trigger:{location:"secretGarden",character:"yuki",minAffection:50,chance:.6},description:"유키가 비밀 정원의 벤치에서 책을 읽고 있다. 달빛이 그녀의 은색 머리를 비추어 환상적인 모습이다.",choices:[{text:"옆에 앉아서 함께 읽기",effects:{affection:{yuki:20},stats:{intelligence:3,charm:2},text:"유키와 함께 달빛 아래에서 책을 읽었다. 조용하고 로맨틱한 시간이었다."}},{text:"책에 대해 이야기하기",effects:{affection:{yuki:15},stats:{intelligence:2,charm:1},text:"유키와 책에 대한 깊은 대화를 나누었다. 그녀의 지적인 매력에 빠져들었다."}},{text:"방해하지 않고 떠나기",effects:{affection:{yuki:5},text:"유키의 독서를 방해하지 않기 위해 조용히 떠났다."}}]},{id:"luna_secret_garden",name:"비밀 정원의 마법 의식",trigger:{location:"secretGarden",character:"luna",minAffection:50,chance:.6},description:"루나가 비밀 정원 중앙에서 신비한 마법 의식을 행하고 있다. 주변에 반짝이는 마법의 빛들이 춤추고 있다.",choices:[{text:"의식에 참여하기",condition:{minIntelligence:15},effects:{affection:{luna:25},stats:{intelligence:2,charm:3,luck:1},text:"루나와 함께 신비한 마법 의식에 참여했다. 마법의 힘이 몸 안으로 흘러들어오는 것을 느꼈다."}},{text:"경외심으로 지켜보기",effects:{affection:{luna:15},stats:{charm:2},text:"루나의 아름다운 마법 의식을 감상했다. 그녀의 신비한 매력에 마음이 설렜다."}},{text:"조용히 물러나기",effects:{text:"신성한 의식을 방해하지 않기 위해 조용히 물러났다."}}]},{id:"secret_garden_stargazing",name:"비밀 정원에서의 별보기",trigger:{location:"secretGarden",time:"night",minAffection:30,chance:.4},description:"비밀 정원에서 혼자 별을 보고 있는데, 누군가가 조용히 다가온다.",choices:[{text:"함께 별을 보자고 제안하기",effects:{stats:{charm:2,luck:1},text:"아름다운 별빛 아래에서 로맨틱한 시간을 보냈다."}},{text:"별자리에 대해 이야기하기",effects:{stats:{intelligence:2,charm:1},text:"별자리와 신화에 대한 흥미로운 대화를 나누었다."}}]},{id:"secret_garden_confession",name:"비밀 정원에서의 고백",trigger:{location:"secretGarden",minAffection:80,chance:.3,once:!0},description:"비밀 정원의 아름다운 분위기 속에서 특별한 누군가와 마주한다. 이제 마음을 전할 때인 것 같다.",choices:[{text:"솔직한 마음을 고백하기",effects:{flag:"secret_garden_confession",text:"비밀 정원에서 진심어린 고백을 했다. 특별한 추억이 만들어졌다."}},{text:"아직은 때가 아닌 것 같다",effects:{text:"마음을 전하지 못했지만, 이 순간만으로도 충분히 아름다웠다."}}]}],fg={events:hg},Ni=qa,pg=fg,gg=Object.keys(Ni).reduce((r,i)=>(r[i]=Ni[i].affectionStart||0,r),{}),pi={name:"주인공",level:1,experience:0,hp:100,maxHp:100,mp:50,maxMp:50,stamina:100,maxStamina:100,stats:{intelligence:10,charm:10,strength:10,agility:10,luck:10},inventory:[],equipment:{},affection:gg,location:"classroom",day:1,timeOfDay:"morning",money:1e3,flags:{},dungeonProgress:{currentFloor:1,maxFloorReached:1,position:{x:0,y:0}},achievements:[],achievementPoints:0,statistics:{monstersDefeated:0,treasuresFound:0,quizStreak:0,bestCardTime:1/0,loginStreak:1},metHeroines:[],defeatedMonsterTypes:[],defeatedBosses:[],collectedItems:[],unlockedEndings:[],participatedEvents:[]},Xc=["morning","noon","afternoon","evening","night"],bg=30,re=lg((r,i)=>({player:pi,unlockedCharacters:["sakura","yuki","luna","mystery","akane","hana","rin","mei","sora"],completedEvents:[],currentEvent:null,gameMessage:"학원 생활이 시작됩니다!",gameEnding:null,gameDate:{year:2024,month:4,day:1},lastActivity:null,dailyActivitiesCount:0,metCharacters:[],actions:{loadInitialGame:()=>{const d=localStorage.getItem("academyDatingSim");if(d){const o=JSON.parse(d);r({player:o.player,unlockedCharacters:o.unlockedCharacters,completedEvents:o.completedEvents})}},saveGame:()=>{const{player:d,unlockedCharacters:o,completedEvents:u}=i(),m={player:d,unlockedCharacters:o,completedEvents:u,timestamp:Date.now(),version:"1.0.0"};localStorage.setItem("academyDatingSim",JSON.stringify(m)),r({gameMessage:"게임이 저장되었습니다!"})},loadGame:()=>{const d=localStorage.getItem("academyDatingSim");if(d){const o=JSON.parse(d);r({player:o.player,unlockedCharacters:o.unlockedCharacters,completedEvents:o.completedEvents,gameMessage:"게임을 불러왔습니다!"})}else r({gameMessage:"저장된 게임이 없습니다."})},resetGame:d=>{const o={...pi,name:d?.playerName||pi.name,stats:d?.startingStats||{...pi.stats},affection:Object.keys(Ni).reduce((u,m)=>(u[m]=Ni[m].affectionStart||0,u),{})};r({player:o,unlockedCharacters:["sakura","yuki","luna","mystery","akane","hana","rin","mei","sora"],completedEvents:[],currentEvent:null,gameEnding:null,gameMessage:d?`${o.name}의 학원 생활이 시작됩니다!`:"새로운 게임을 시작합니다!",lastActivity:null}),localStorage.removeItem("academyDatingSim")},updateStats:d=>r(o=>({player:{...o.player,stats:{...o.player.stats,...d}}})),updateHpMp:(d,o)=>r(u=>({player:{...u.player,hp:Math.min(u.player.maxHp,u.player.hp+d),mp:Math.min(u.player.maxMp,u.player.mp+o)}})),updateAffection:(d,o)=>{r(u=>({player:{...u.player,affection:{...u.player.affection,[d]:Math.max(0,Math.min(100,(u.player.affection[d]||0)+o))}}})),o>0&&i().actions.gainExperience(o*2)},moveToLocation:d=>{r(o=>({player:{...o.player,location:d}})),i().actions.checkForEvents(d)},advanceTime:()=>{r(d=>{const u=Xc.indexOf(d.player.timeOfDay)+1;if(u>=Xc.length){const y=d.player.day+1;return y>bg?(i().actions.checkEnding(),{}):{player:{...d.player,day:y,timeOfDay:"morning",location:"dormitory",hp:Math.min(d.player.hp+20,d.player.maxHp),mp:Math.min(d.player.mp+10,d.player.maxMp),stamina:d.player.maxStamina},dailyActivitiesCount:0,gameMessage:"새로운 날이 밝았습니다. 기숙사에서 일어났습니다."}}const m=Xc[u],g=m==="night"&&d.player.location!=="dormitory";return{player:{...d.player,timeOfDay:m,location:g?"dormitory":d.player.location},gameMessage:g?"밤이 되어 기숙사로 돌아왔습니다.":d.gameMessage}})},checkForEvents:d=>{const{player:o,completedEvents:u}=i(),m=d||o.location,g=pg.events.filter(y=>!(y.trigger.location&&y.trigger.location!==m||y.trigger.once&&u.includes(y.id)||y.trigger.minDay&&o.day<y.trigger.minDay||y.trigger.character&&y.trigger.minAffection&&(o.affection[y.trigger.character]||0)<y.trigger.minAffection||y.trigger.totalAffection&&Object.values(o.affection).reduce((x,S)=>x+S,0)<y.trigger.totalAffection||y.trigger.chance&&Math.random()>y.trigger.chance));if(g.length>0){const y=g[Math.floor(Math.random()*g.length)];r({currentEvent:y})}},handleEventChoice:(d,o)=>{const u=d.choices[o],{player:m,actions:g}=i();if(u.condition?.minIntelligence&&m.stats.intelligence<u.condition.minIntelligence){r({gameMessage:"지력이 부족합니다!"});return}u.effects.affection&&Object.entries(u.effects.affection).forEach(([y,p])=>g.updateAffection(y,p)),u.effects.stats&&g.updateStats(u.effects.stats),u.effects.item&&g.addItem(u.effects.item),u.effects.money&&r(y=>({player:{...y.player,money:y.player.money+u.effects.money}})),u.effects.flag&&r(y=>({player:{...y.player,flags:{...y.player.flags,[u.effects.flag]:!0}}})),u.effects.unlockCharacter&&r(y=>({unlockedCharacters:[...y.unlockedCharacters,u.effects.unlockCharacter]})),r({gameMessage:u.effects.text}),d.trigger.once&&r(y=>({completedEvents:[...y.completedEvents,d.id]})),r({currentEvent:null})},addItem:d=>r(o=>({player:{...o.player,inventory:[...o.player.inventory,d]}})),buyItem:d=>{i().actions.addItem(d)},updateMoney:d=>{r(o=>({player:{...o.player,money:o.player.money+d}}))},sellItem:(d,o)=>{const{player:u}=i(),m=u.inventory.indexOf(d);if(m>-1){const g=[...u.inventory];return g.splice(m,1),r(y=>({player:{...y.player,inventory:g,money:y.player.money+o}})),r({gameMessage:`${d}을(를) 판매했습니다.`}),!0}return r({gameMessage:"판매할 아이템이 없습니다."}),!1},purchaseItem:(d,o)=>{const{player:u}=i();return u.money>=o?(r(m=>({player:{...m.player,inventory:[...m.player.inventory,d],money:m.player.money-o}})),!0):!1},useItem:(d,o)=>{const{player:u}=i(),m=u.inventory.indexOf(d);if(m===-1){r({gameMessage:"아이템을 찾을 수 없습니다."});return}switch(d){case"healingPotion":if(u.hp>=u.maxHp){r({gameMessage:"HP가 이미 최대입니다. 포션을 사용할 수 없습니다."});return}break;case"manaPotion":if(u.mp>=u.maxMp){r({gameMessage:"MP가 이미 최대입니다. 포션을 사용할 수 없습니다."});return}break}const g=[...u.inventory];g.splice(m,1);let y={...u,inventory:g},p=`${d}을(를) 사용했습니다.`;switch(d){case"healingPotion":const x=Math.min(50,y.maxHp-y.hp);y.hp=Math.min(y.hp+50,y.maxHp),p=`체력 포션을 사용했습니다. HP +${x}`;break;case"manaPotion":const S=Math.min(30,y.maxMp-y.mp);y.mp=Math.min(y.mp+30,y.maxMp),p=`마나 포션을 사용했습니다. MP +${S}`;break;case"energyDrink":y.stats.stamina+=2,p="에너지 드링크를 마셨습니다. 체력 +2";break;default:if(o){const b=d.includes("flower")?10:5;y.affection={...y.affection,[o]:Math.min((y.affection[o]||0)+b,100)},p=`${o}에게 ${d}을(를) 선물했습니다. 호감도 +${b}`}break}r({player:y,gameMessage:p})},performActivity:(d,o)=>{const{player:u,dailyActivitiesCount:m}=i(),g=i().actions;if(m>=2&&!["휴식하기","캐릭터 상호작용","쇼핑하기","던전 탐험"].includes(d)){r({gameMessage:"오늘은 더 이상 활동할 수 없습니다. 휴식하거나 다음 날로 넘어가세요."});return}const p={공부하기:20,운동하기:30,사교활동:15,아르바이트:25,명상하기:10,요리하기:15,독서하기:10,달리기:25,게임하기:5,음악감상:5,휴식하기:0,쇼핑하기:5,"던전 탐험":30}[d]||10;if(u.stamina<p&&d!=="휴식하기"){r({gameMessage:`스테미나가 부족합니다. (필요: ${p}, 현재: ${u.stamina})`});return}let x={...u},S="",b=!0;switch(d!=="휴식하기"&&(x.stamina=Math.max(0,x.stamina-p)),d){case"공부하기":x.stats.intelligence+=2,S="열심히 공부했습니다. 지력 +2",g.gainExperience(15);break;case"운동하기":x.stats.strength+=3,x.stats.agility+=1,S="열심히 운동했습니다. 힘 +3, 민첩 +1",g.gainExperience(20);break;case"사교활동":x.stats.charm+=2,x.stats.luck+=1,S="사교활동을 했습니다. 매력 +2, 행운 +1",g.gainExperience(15);break;case"아르바이트":x.money+=500,x.stats.strength+=1,S="아르바이트를 했습니다. 500원 획득, 힘 +1",g.gainExperience(10);break;case"명상하기":x.mp=Math.min(x.mp+20,x.maxMp),x.stats.intelligence+=1,S="명상을 했습니다. MP +20, 지력 +1",g.gainExperience(10);break;case"요리하기":x.stats.charm+=1,x.stats.agility+=1,S="요리를 했습니다. 매력 +1, 민첩 +1",g.gainExperience(10);break;case"독서하기":x.stats.intelligence+=3,S="책을 읽었습니다. 지력 +3",g.gainExperience(12);break;case"달리기":x.stats.agility+=3,x.maxStamina=Math.min(x.maxStamina+2,200),S="달리기를 했습니다. 민첩 +3, 최대 스테미나 +2",g.gainExperience(15);break;case"게임하기":x.stats.luck+=2,S="게임을 즐겼습니다. 행운 +2",g.gainExperience(5);break;case"음악감상":x.stats.charm+=1,x.hp=Math.min(x.hp+10,x.maxHp),S="음악을 감상했습니다. 매력 +1, HP +10",g.gainExperience(5);break;case"휴식하기":x.hp=Math.min(x.hp+20,x.maxHp),x.mp=Math.min(x.mp+10,x.maxMp),x.stamina=Math.min(x.stamina+40,x.maxStamina),S="휴식을 취했습니다. HP +20, MP +10, 스테미나 +40";break;case"쇼핑하기":if(o){r({gameMessage:"매점으로 이동합니다..."}),o("/shopping");return}S="쇼핑을 했습니다.",b=!1;break;case"던전 탐험":if(o){r({gameMessage:"던전으로 이동합니다..."}),o("/dungeon");return}S="던전 탐험을 준비합니다.",b=!1;break;default:S=`${d}을(를) 했습니다.`;break}let D=m;["공부하기","운동하기","사교활동","아르바이트","명상하기","요리하기","독서하기","달리기","게임하기","음악감상"].includes(d)&&D++,r({player:x,gameMessage:S,lastActivity:d,dailyActivitiesCount:D}),b&&(g.advanceTime(),g.checkForEvents())},checkEnding:()=>{const{player:d}=i(),o=Object.entries(d.affection).reduce((u,[m,g])=>g>u.value?{char:m,value:g}:u,{char:"",value:0});o.value>=80?d.flags[`${o.char}_route`]?r({gameEnding:o.char}):r({gameEnding:"good"}):o.value>=50?r({gameEnding:"normal"}):r({gameEnding:"solo"})},setCurrentEvent:d=>r({currentEvent:d}),updatePlayer:d=>r(o=>({player:{...o.player,...d}})),goToNextFloor:()=>r(d=>{const o=d.player.dungeonProgress.currentFloor+1;return{player:{...d.player,dungeonProgress:{...d.player.dungeonProgress,currentFloor:o,maxFloorReached:Math.max(d.player.dungeonProgress.maxFloorReached,o),position:{x:1,y:1}}}}}),gainExperience:d=>r(o=>{let u=o.player.experience+d,m=o.player.level,g=!1;for(;u>=m*100;)u-=m*100,m++,g=!0;const y={...o.player,experience:u,level:m};return g&&(y.maxHp=100+(m-1)*10,y.maxMp=50+(m-1)*5,y.hp=y.maxHp,y.mp=y.maxMp,y.stats={...y.stats,intelligence:y.stats.intelligence+1,charm:y.stats.charm+1,strength:y.stats.strength+1,agility:y.stats.agility+1,luck:y.stats.luck+1},y.maxStamina=Math.min(y.maxStamina+5,200),y.stamina=y.maxStamina),{player:y,gameMessage:g?`레벨업! Lv.${m}이 되었습니다! HP/MP가 회복되었습니다. 모든 능력치 +1`:`경험치를 ${d} 획득했습니다. (${u}/${m*100})`}}),addGold:d=>r(o=>({player:{...o.player,money:o.player.money+d}})),clearLastActivity:()=>r({lastActivity:null}),markCharacterAsMet:d=>{const{metCharacters:o}=i();o.includes(d)||r({metCharacters:[...o,d]})}}})),Xx=at.memo(()=>{const r=re(O=>O.player),i=ke(),d=v.useCallback((O,C=20)=>{const z=O/C*100;return z>=75?"text-green-500":z>=50?"text-yellow-500":z>=25?"text-orange-500":"text-red-500"},[]),o=v.useCallback((O,C=20)=>Math.min(O/C*100,100),[]),u=v.useMemo(()=>({morning:"아침",noon:"점심",afternoon:"오후",evening:"저녁",night:"밤"}),[]),m=v.useCallback(O=>u[O]||O,[u]),g=v.useMemo(()=>({sakura:"사쿠라",yuki:"유키",haruka:"하루카",ayumi:"아유미",miku:"미쿠",rina:"리나",luna:"루나",nova:"노바",aria:"아리아"}),[]),{currentHP:y,maxHP:p,currentMP:x,maxMP:S,hpPercentage:b,mpPercentage:D}=v.useMemo(()=>{const O=r.hp??100,C=r.maxHp??100,z=r.mp??50,j=r.maxMp??50;return{currentHP:O,maxHP:C,currentMP:z,maxMP:j,hpPercentage:O/C*100,mpPercentage:z/j*100}},[r.hp,r.maxHp,r.mp,r.maxMp]);return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border text-text-primary p-6 mb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 to-red-800/20 p-4 rounded-xl border border-red-500/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:"❤️"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold text-red-400",children:"체력"}),e.jsx("div",{className:"text-xs text-red-300",children:"Health Points"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-3xl font-bold text-red-400",children:y}),e.jsxs("span",{className:"text-red-300 text-xl",children:["/",p]}),e.jsxs("div",{className:"text-xs text-red-300",children:[Math.round(b),"%"]})]})]}),e.jsx("div",{className:"w-full bg-red-950/50 rounded-full h-4 shadow-inner",role:"progressbar","aria-valuenow":y,"aria-valuemin":0,"aria-valuemax":p,"aria-label":"체력",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 via-red-400 to-red-300 h-4 rounded-full transition-all duration-500 shadow-sm",style:{width:`${b}%`}})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-blue-800/20 p-4 rounded-xl border border-blue-500/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:"💙"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold text-blue-400",children:"마나"}),e.jsx("div",{className:"text-xs text-blue-300",children:"Magic Points"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-400",children:x}),e.jsxs("span",{className:"text-blue-300 text-xl",children:["/",S]}),e.jsxs("div",{className:"text-xs text-blue-300",children:[Math.round(D),"%"]})]})]}),e.jsx("div",{className:"w-full bg-blue-950/50 rounded-full h-4 shadow-inner",role:"progressbar","aria-valuenow":x,"aria-valuemin":0,"aria-valuemax":S,"aria-label":"마나",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-blue-400 to-cyan-400 h-4 rounded-full transition-all duration-500 shadow-sm",style:{width:`${D}%`}})})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-xl font-bold text-pink-200",children:r.name}),e.jsxs("div",{className:"text-sm bg-purple-900/50 px-3 py-1 rounded-full",children:["레벨 ",r.level," • ",r.day,"일차 • ",m(r.timeOfDay)]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-900/30 px-4 py-2 rounded-lg border border-green-500/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400",children:"⚡"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-300",children:"스테미나"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-green-950/50 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-400 h-2 rounded-full transition-all duration-300",style:{width:`${r.stamina/r.maxStamina*100}%`}})}),e.jsxs("span",{className:"text-xs font-bold text-green-400",children:[r.stamina,"/",r.maxStamina]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-600/20 px-3 py-1 rounded-full",children:[e.jsx("span",{className:"text-yellow-300",children:"💰"}),e.jsxs("span",{className:"font-semibold text-yellow-200",children:[r.money.toLocaleString(),"원"]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-purple-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-300",children:"⭐"}),e.jsxs("span",{className:"text-sm font-medium text-purple-200",children:["경험치 (Lv.",r.level,")"]})]}),e.jsxs("span",{className:"font-bold text-purple-200",children:[r.experience,"/",r.level*100]})]}),e.jsx("div",{className:"w-full bg-purple-950/50 rounded-full h-2",role:"progressbar","aria-valuenow":r.experience,"aria-valuemin":0,"aria-valuemax":r.level*100,"aria-label":"경험치",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 h-2 rounded-full transition-all duration-300",style:{width:`${r.experience/(r.level*100)*100}%`}})})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mt-4",children:[e.jsxs("div",{className:"bg-blue-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-300",children:"🧠"}),e.jsx("span",{className:"text-xs font-medium text-blue-200",children:"지력"})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.intelligence)}`,children:r.stats.intelligence})]}),e.jsx("div",{className:"w-full bg-blue-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.intelligence,"aria-valuemin":0,"aria-valuemax":50,"aria-label":"지력 스탯",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.intelligence,50)}%`}})})]}),e.jsxs("div",{className:"bg-pink-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-pink-300",children:"✨"}),e.jsx("span",{className:"text-xs font-medium text-pink-200",children:"매력"})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.charm)}`,children:r.stats.charm})]}),e.jsx("div",{className:"w-full bg-pink-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.charm,"aria-valuemin":0,"aria-valuemax":50,"aria-label":"매력 스탯",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-rose-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.charm,50)}%`}})})]}),e.jsxs("div",{className:"bg-green-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-300",children:"🏃"}),e.jsx("span",{className:"text-xs font-medium text-green-200",children:"체력"})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.stamina)}`,children:r.stats.stamina})]}),e.jsx("div",{className:"w-full bg-green-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.stamina,"aria-valuemin":0,"aria-valuemax":50,"aria-label":"체력 스탯",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.stamina,50)}%`}})})]}),e.jsxs("div",{className:"bg-orange-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-300",children:"💪"}),e.jsx("span",{className:"text-xs font-medium text-orange-200",children:"힘"})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.strength)}`,children:r.stats.strength})]}),e.jsx("div",{className:"w-full bg-orange-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.strength,"aria-valuemin":0,"aria-valuemax":50,"aria-label":"힘 스탯",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.strength,50)}%`}})})]}),e.jsxs("div",{className:"bg-cyan-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-300",children:"🏃‍♂️"}),e.jsx("span",{className:"text-xs font-medium text-cyan-200",children:"민첩"})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.agility)}`,children:r.stats.agility})]}),e.jsx("div",{className:"w-full bg-cyan-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.agility,"aria-valuemin":0,"aria-valuemax":50,"aria-label":"민첩 스탯",children:e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-teal-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.agility,50)}%`}})})]}),e.jsxs("div",{className:"bg-yellow-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-300",children:"🍀"}),e.jsx("span",{className:"text-xs font-medium text-yellow-200",children:"행운"})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.luck)}`,children:r.stats.luck})]}),e.jsx("div",{className:"w-full bg-yellow-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.luck,"aria-valuemin":0,"aria-valuemax":50,"aria-label":"행운 스탯",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.luck,50)}%`}})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-purple-300",children:"히로인 호감도"}),e.jsx("button",{onClick:()=>i("/heroines"),className:"text-xs text-purple-400 hover:text-purple-300 transition-colors",children:"갤러리 보기 →"})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-2",children:Object.entries(r.affection).map(([O,C])=>{const z=g[O]||O,j=C>=80?"💕":C>=60?"💗":C>=40?"💖":C>=20?"💝":"💛";return e.jsx("button",{onClick:()=>i("/heroines"),className:"bg-gradient-to-br from-purple-900/40 to-pink-900/40 hover:from-purple-800/50 hover:to-pink-800/50 p-2 rounded-lg transition-all transform hover:scale-105 border border-purple-500/20 hover:border-purple-400/40",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg mb-1",children:j}),e.jsx("div",{className:"text-xs font-bold text-purple-200",children:z}),e.jsxs("div",{className:"text-xs text-purple-300",children:[C,"%"]}),e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"w-full bg-purple-950/50 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-1 rounded-full transition-all duration-300",style:{width:`${C}%`}})})})]})},O)})})]})]})});Xx.displayName="StatusBar";const yg=({currentLocation:r,player:i,onPerformActivity:d,onMoveToLocation:o,availableLocations:u,characters:m,onInteractCharacter:g})=>{const y=b=>({공부하기:"📚",운동하기:"🏃‍♂️",사교활동:"🗣️",휴식하기:"😴",독서하기:"📖",명상하기:"🧘‍♂️",요리하기:"👨‍🍳","음식 먹기":"🍽️",쇼핑하기:"🛍️",구경하기:"👀",산책하기:"🚶‍♂️","벤치에 앉기":"🪑"})[b]||"⭐",p=b=>({classroom:"🏫",library:"📚",cafeteria:"🍽️",gym:"🏃‍♂️",garden:"🌸",shopping:"🛍️",secret:"🔒"})[b]||"📍",x=b=>b.time!=="any"&&b.time!==i.timeOfDay?!1:b.name==="휴식하기"||b.name==="휴식"||b.name==="쇼핑하기"||b.name==="구경하기"||b.name==="벤치에 앉기"?!0:i.stats.stamina>0,S=b=>b.unlockCondition?!(b.unlockCondition.item&&!i.inventory.includes(b.unlockCondition.item)||b.unlockCondition.flag&&!i.flags[b.unlockCondition.flag]):!0;return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md text-text-primary rounded-lg shadow-lg p-6 border border-border",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:p(r.id)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary",children:r.name}),e.jsx("p",{className:"text-text-secondary text-sm",children:r.description})]})]}),e.jsxs("div",{className:"text-sm text-text-secondary italic",children:[i.timeOfDay==="morning"&&"아침의 상쾌한 공기가 감돕니다.",i.timeOfDay==="noon"&&"점심시간의 활기찬 분위기입니다.",i.timeOfDay==="afternoon"&&"오후의 나른한 햇살이 내리쬐고 있습니다.",i.timeOfDay==="evening"&&"저녁 노을이 지고 있습니다.",i.timeOfDay==="night"&&"밤의 정적이 감돌고 있습니다."]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-purple-900/40 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-pink-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"⚡"}),"활동"]}),r.activities.length>0?e.jsx("div",{className:"space-y-3",children:r.activities.map((b,D)=>{const O=x(b);return e.jsx("button",{onClick:()=>d(b.name),disabled:!O,className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${O?"bg-purple-800/60 hover:bg-purple-700/60 hover:scale-105 cursor-pointer":"bg-gray-800/40 cursor-not-allowed opacity-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:y(b.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:b.name}),e.jsx("div",{className:"text-xs text-purple-300",children:b.time!=="any"&&`${b.time}에만 가능`})]})]}),e.jsx("div",{className:"text-xs space-y-1",children:Object.entries(b.effect).map(([C,z])=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:z>0?"text-green-400":"text-red-400",children:[z>0?"+":"",z]}),e.jsx("span",{className:"text-purple-300 capitalize",children:C})]},C))})]})},D)})}):e.jsx("p",{className:"text-purple-400 text-sm italic",children:"이곳에서 할 수 있는 활동이 없습니다."})]}),e.jsxs("div",{className:"bg-purple-900/40 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-pink-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"🗺️"}),"이동"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(u).filter(([b])=>b!==r.id).map(([b,D])=>{const O=S(D);return e.jsx("button",{onClick:()=>o(b),disabled:!O,className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${O?"bg-purple-800/60 hover:bg-purple-700/60 hover:scale-105 cursor-pointer":"bg-gray-800/40 cursor-not-allowed opacity-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:p(b)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:D.name}),e.jsx("div",{className:"text-xs text-purple-300",children:!O&&D.unlockCondition&&e.jsxs("span",{className:"text-red-400",children:[D.unlockCondition.item&&"아이템 필요",D.unlockCondition.flag&&"조건 미달성"]})})]})]})},b)})})]})]}),(()=>{const b=r.characterSchedule?r.characterSchedule[i.timeOfDay]||[]:r.characters||[];return b.length>0&&e.jsxs("div",{className:"mt-6 bg-black/20 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-secondary mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"👥"}),"현재 위치한 캐릭터"]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:b.map(D=>{const O=m[D];return O?e.jsxs("button",{onClick:()=>g?.(D),className:"bg-primary/20 px-4 py-2 rounded-full text-sm font-medium text-text-primary border border-border flex items-center gap-2 hover:bg-primary/30 hover:scale-105 transition-all duration-200 cursor-pointer",children:[e.jsx("span",{className:"text-xl",children:O.sprite}),e.jsx("span",{children:O.name}),e.jsx("span",{className:"text-xs text-pink-300",children:"💕"})]},D):null})})]})})(),e.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs text-text-secondary",children:[e.jsx("div",{children:i.stats.stamina<=2&&e.jsx("span",{className:"text-red-400 font-medium",children:"⚠️ 체력이 부족합니다!"})}),e.jsx("div",{children:"활동 후 시간이 경과합니다"})]})]})},vg=({characters:r,items:i})=>{const{player:d,unlockedCharacters:o}=re(),u=re(A=>A.actions.useItem),m=re(A=>A.actions.updateAffection),[g,y]=v.useState(null),[p,x]=v.useState(!1),[S,b]=v.useState({active:!1,messages:[]}),D=A=>({sakura:"🌸",yuki:"❄️",luna:"🌙",mystery:"❓",akane:"🔥",hana:"🌺",rin:"⚡",mei:"🎨",sora:"☁️"})[A]||"👤",O=A=>A>=80?{level:"매우 친밀",color:"text-pink-400",bgColor:"bg-pink-500/20"}:A>=60?{level:"친밀",color:"text-purple-400",bgColor:"bg-purple-500/20"}:A>=40?{level:"친근",color:"text-blue-400",bgColor:"bg-blue-500/20"}:A>=20?{level:"보통",color:"text-green-400",bgColor:"bg-green-500/20"}:{level:"낯선",color:"text-gray-400",bgColor:"bg-gray-500/20"},C=(A,k)=>{const M={low:[{heroine:`안녕... ${d.name}님?`,choices:[{text:"안녕! 오늘 기분 어때?",affectionChange:2},{text:"음... 안녕",affectionChange:0},{text:"귀찮게 하지마",affectionChange:-3}]},{heroine:"오늘 날씨가 좋네요...",choices:[{text:"정말 그렇네! 같이 산책할래?",affectionChange:3},{text:"그래, 날씨 좋네",affectionChange:1},{text:"그게 뭐 중요해?",affectionChange:-2}]}],medium:[{heroine:`${d.name}님! 기다리고 있었어요!`,choices:[{text:"나도 너를 보고 싶었어!",affectionChange:4},{text:"응, 나도 왔어",affectionChange:2},{text:"별로 기대하지 않았는데",affectionChange:-2}]},{heroine:"요즘 뭐하고 지내요?",choices:[{text:"너 생각하면서 지냈지!",affectionChange:5},{text:"평소처럼 공부하고 운동하고...",affectionChange:2},{text:"네가 알 필요 있어?",affectionChange:-3}]}],high:[{heroine:`${d.name}님... 보고 싶었어요...`,choices:[{text:"나도 정말 보고 싶었어. 사랑해",affectionChange:6},{text:"나도 보고 싶었어",affectionChange:3},{text:"어... 그래",affectionChange:-1}]},{heroine:"오늘 특별한 이야기가 있어요...",choices:[{text:"뭐든 말해봐. 다 들어줄게",affectionChange:5},{text:"무슨 이야기?",affectionChange:2},{text:"나중에 들을게",affectionChange:-2}]}]};let Y;return k<30?Y=M.low:k<70?Y=M.medium:Y=M.high,Y[Math.floor(Math.random()*Y.length)]},z=A=>{const k=d.affection[A.id]||0,M=C(A,k);b({active:!0,messages:[{speaker:A.name,text:M.heroine,isPlayer:!1}],choices:M.choices})},j=A=>{g&&(b(k=>({...k,messages:[...k.messages,{speaker:d.name,text:A.text,isPlayer:!0}],choices:void 0})),A.affectionChange!==0&&m(g.id,A.affectionChange),setTimeout(()=>{let k;A.affectionChange>3?k="정말 기뻐요! 💕":A.affectionChange>0?k="고마워요... ☺️":A.affectionChange<0?k="그렇게 말하지 마세요... 😢":k="네... 알겠어요.",b(M=>({...M,messages:[...M.messages,{speaker:g.name,text:k,isPlayer:!1}]})),setTimeout(()=>{b({active:!1,messages:[]})},2e3)},1e3))},N=(A,k)=>{u(k,A.id),x(!1)},w=d.inventory.map(A=>i[A]).filter(A=>A&&A.type==="gift"),T=A=>({sakura:"from-pink-600 via-rose-500 to-pink-600",yuki:"from-blue-600 via-cyan-500 to-blue-600",luna:"from-purple-600 via-indigo-500 to-purple-600",mystery:"from-gray-600 via-slate-500 to-gray-600",akane:"from-red-600 via-orange-500 to-red-600",hana:"from-yellow-500 via-amber-400 to-yellow-500",rin:"from-violet-600 via-purple-500 to-violet-600",mei:"from-emerald-600 via-green-500 to-emerald-600",sora:"from-sky-500 via-blue-400 to-sky-500"})[A]||"from-purple-600 via-pink-500 to-purple-600";return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md text-text-primary rounded-lg shadow-lg p-6 border border-border",children:[e.jsxs("h2",{className:"text-2xl font-bold text-pink-200 mb-6 flex items-center gap-2",children:[e.jsx("span",{children:"👥"}),"캐릭터 상호작용"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:o.map(A=>{const k=r[A];if(!k)return null;const M=d.affection[A]||0,Y=O(M);return e.jsx("button",{onClick:()=>y(k),className:`p-4 rounded-lg transition-all duration-200 hover:scale-105 bg-gradient-to-br ${T(A)} hover:brightness-110`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:D(A)}),e.jsx("h3",{className:"font-bold text-lg text-white",children:k.name}),e.jsx("p",{className:"text-xs text-gray-200 mb-2",children:k.role}),e.jsxs("div",{className:`text-xs px-2 py-1 rounded-full ${Y.bgColor} ${Y.color} font-medium`,children:[Y.level," (",M,"/100)"]}),e.jsx("div",{className:"w-full bg-black/20 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-purple-400 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}})})]})},A)})}),S.active&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 rounded-xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"대화 중..."})}),e.jsx("div",{className:"space-y-3 mb-4",children:S.messages.map((A,k)=>e.jsxs("div",{className:`p-3 rounded-lg ${A.isPlayer?"bg-blue-600/50 ml-8 text-right":"bg-purple-600/50 mr-8"}`,children:[e.jsx("div",{className:"font-semibold text-white mb-1",children:A.speaker}),e.jsx("div",{className:"text-gray-100",children:A.text})]},k))}),S.choices&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-300 mb-2",children:"선택지를 고르세요:"}),S.choices.map((A,k)=>e.jsxs("button",{onClick:()=>j(A),className:"w-full p-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white text-left transition-all duration-200 hover:scale-[1.02]",children:[A.text,A.affectionChange>0&&e.jsxs("span",{className:"ml-2 text-xs text-green-300",children:["(호감도 +",A.affectionChange,")"]}),A.affectionChange<0&&e.jsxs("span",{className:"ml-2 text-xs text-red-300",children:["(호감도 ",A.affectionChange,")"]})]},k))]}),!S.choices&&S.messages.length>1&&e.jsx("button",{onClick:()=>b({active:!1,messages:[]}),className:"mt-4 w-full bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-white transition-all duration-200",children:"대화 종료"})]})}),g&&!S.active&&e.jsxs("div",{className:`bg-gradient-to-r ${T(g.id)} rounded-lg p-6 shadow-inner`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-3",children:D(g.id)}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:g.name}),e.jsx("p",{className:"text-gray-200",children:g.role})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-sm text-gray-200 mb-3",children:g.baseText}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-300 mb-1",children:"좋아하는 것:"}),e.jsx("div",{className:"space-y-1",children:g.likes.map((A,k)=>e.jsxs("div",{className:"text-green-200",children:["• ",A]},k))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-300 mb-1",children:"싫어하는 것:"}),e.jsx("div",{className:"space-y-1",children:g.dislikes.map((A,k)=>e.jsxs("div",{className:"text-red-200",children:["• ",A]},k))})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsxs("button",{onClick:()=>z(g),className:"bg-blue-600/80 hover:bg-blue-500/80 px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center gap-2",children:[e.jsx("span",{children:"💬"}),"대화하기"]}),e.jsxs("button",{onClick:()=>x(!p),disabled:w.length===0,className:`px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center gap-2 ${w.length>0?"bg-pink-600/80 hover:bg-pink-500/80":"bg-gray-600/50 cursor-not-allowed opacity-50"}`,children:[e.jsx("span",{children:"🎁"}),"선물하기 (",w.length,")"]})]}),p&&w.length>0&&e.jsxs("div",{className:"mt-4 bg-black/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-pink-200 mb-3",children:"선물 선택"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:w.map(A=>{const k=A.preferredBy?.includes(g.id);return e.jsx("button",{onClick:()=>N(g,A.id),className:`p-3 rounded-lg text-left transition-all duration-200 hover:scale-105 ${k?"bg-yellow-600/60 hover:bg-yellow-500/60 border border-yellow-400/50":"bg-purple-800/60 hover:bg-purple-700/60"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:A.name}),e.jsx("div",{className:"text-xs text-gray-300",children:A.description}),k&&e.jsx("div",{className:"text-xs text-yellow-300 font-medium mt-1",children:"⭐ 선호 아이템!"})]}),e.jsx("div",{className:"text-lg",children:"🎁"})]})},A.id)})}),e.jsx("button",{onClick:()=>x(!1),className:"mt-3 w-full bg-gray-600/60 hover:bg-gray-500/60 px-4 py-2 rounded-lg text-sm transition-all duration-200",children:"닫기"})]})]}),!g&&e.jsxs("div",{className:"text-center text-purple-300 py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"👆"}),e.jsx("p",{children:"상호작용할 캐릭터를 선택하세요"})]})]})},Vx=({event:r,character:i,player:d,onChoice:o,onClose:u})=>{const[m,g]=v.useState(""),[y,p]=v.useState(!0),[x,S]=v.useState(!1);v.useEffect(()=>{g(""),p(!0),S(!1);let C=0;const z=r.description,j=setInterval(()=>{C<z.length?(g(z.substring(0,C+1)),C++):(p(!1),S(!0),clearInterval(j))},30);return()=>clearInterval(j)},[r]);const b=()=>{g(r.description),p(!1),S(!0)},D=C=>{const z=r.choices[C];if(z.condition){if(z.condition.minIntelligence&&d.stats.intelligence<z.condition.minIntelligence){alert("지력이 부족합니다!");return}if(z.condition.minCharm&&d.stats.charm<z.condition.minCharm){alert("매력이 부족합니다!");return}if(z.condition.minStamina&&d.stats.stamina<z.condition.minStamina){alert("체력이 부족합니다!");return}}o(r,C)},O=()=>{const C={classroom:"https://images.unsplash.com/photo-1580582932707-520aed937b7b",library:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570",garden:"https://images.unsplash.com/photo-1585320806297-9794b3e4eeae",dormitory:"https://images.unsplash.com/photo-1555854877-bab0e564b8d5",cafeteria:"https://images.unsplash.com/photo-1567521464027-f127ff144326",training_ground:"https://images.unsplash.com/photo-1569163139394-de4798aa62b6"};return C[r.trigger.location||"classroom"]||C.classroom};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:b,children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-1000",style:{backgroundImage:`url(${O()})`,filter:"blur(8px) brightness(0.7)"}}),i&&e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 h-full w-full flex items-end justify-center",children:e.jsx("img",{src:i.image,alt:i.name,className:"h-5/6 object-contain"})}),e.jsx("div",{className:"relative w-full max-w-4xl mx-auto mb-4 z-10",children:e.jsxs("div",{className:"bg-background/80 backdrop-blur-md rounded-xl shadow-2xl border border-border",children:[i&&e.jsx("div",{className:"px-6 py-2 bg-primary/50 rounded-t-xl",children:e.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:i.name})}),e.jsxs("div",{className:"p-6 min-h-[120px] text-xl text-text-primary leading-relaxed",children:[m,y&&e.jsx("span",{className:"animate-pulse",children:"|"})]}),x&&r.choices.length>0&&e.jsx("div",{className:"p-4 grid grid-cols-1 gap-3",children:r.choices.map((C,z)=>e.jsxs("button",{onClick:()=>D(z),disabled:!!(C.condition?.minIntelligence&&d.stats.intelligence<C.condition.minIntelligence)||!!(C.condition?.minCharm&&d.stats.charm<C.condition.minCharm)||!!(C.condition?.minStamina&&d.stats.stamina<C.condition.minStamina),className:"w-full text-left p-4 rounded-lg bg-primary/20 hover:bg-primary/40 text-text-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[C.text,C.condition&&e.jsxs("span",{className:"text-xs text-yellow-400 ml-2",children:["(필요:",C.condition.minIntelligence&&` 지력 ${C.condition.minIntelligence}`,C.condition.minCharm&&` 매력 ${C.condition.minCharm}`,C.condition.minStamina&&` 체력 ${C.condition.minStamina}`,")"]})]},z))})]})})]})},jg=JSON.parse('{"flower":{"id":"flower","name":"꽃다발","description":"라비린스 아카데미 정원에서 직접 따온 신선한 꽃다발. 장미, 백합, 벚꽃이 조화롭게 어우러져 있어 누구에게나 기쁨을 선사한다.","detailedDescription":"학원 내 플로리스트 샵에서 구매할 수 있는 기본적인 선물용 꽃다발입니다.","usage":"캐릭터와의 대화 중 선물하기 옵션에서 사용","useLocation":"모든 캐릭터와의 만남 장소","usableBy":"모든 캐릭터에게 선물 가능","lore":"학원의 마법적인 환경으로 인해 이 꽃들은 일반 꽃보다 오래 시들지 않으며, 은은한 마법의 향기를 내뿜는다.","type":"gift","rarity":"common","value":100,"effect":{"affection":10},"preferredBy":["sakura","luna"],"icon":"🌸","category":"선물"},"book":{"id":"book","name":"희귀한 책","description":"고대 마법 이론을 다룬 희귀한 서적. 학원 도서관에서도 찾기 힘든 귀중한 지식이 담겨 있어 학자들에게는 보물과 같은 존재다.","detailedDescription":"도서관의 제한 구역이나 고서점에서만 구할 수 있는 희귀 도서입니다. 특히 독서를 좋아하는 캐릭터들에게 큰 감동을 줍니다.","usage":"도서부 부장 유키에게 선물하거나, 마법학 수업에서 추가 점수 획득용으로 사용","useLocation":"도서관, 캐릭터 선물하기, 마법학부 교실","usableBy":"주로 유키, 지적인 캐릭터들에게 효과적","lore":"전설의 마법사가 쓴 이 책은 읽는 자의 지혜를 깨우치고, 숨겨진 마법의 비밀을 알려준다고 전해진다.","type":"gift","rarity":"uncommon","value":200,"effect":{"affection":15},"preferredBy":["yuki"],"icon":"📚","category":"선물"},"charm":{"id":"charm","name":"마법 부적","description":"고대 룬 문자가 새겨진 신비한 부적. 착용자를 악운으로부터 보호하고 마법력을 증진시키는 효과가 있다고 전해진다.","detailedDescription":"학원의 마법상점에서 판매하는 특별한 부적으로, 마법에 관심 있는 학생들 사이에서 인기가 높습니다.","usage":"마법학부 학생들에게 선물하거나, 던전 탐험 시 행운 증가 효과로 사용 가능","useLocation":"마법학부, 던전, 캐릭터 선물하기","usableBy":"루나, 미스터리 캐릭터 등 마법 관련 캐릭터들","lore":"학원 창립자가 직접 제작한 부적의 복제품으로, 원본의 10% 정도 효과를 지니고 있다.","type":"gift","rarity":"rare","value":300,"effect":{"affection":12},"preferredBy":["luna","mystery"],"icon":"🧿","category":"선물"},"studyGuide":{"id":"studyGuide","name":"공부 가이드","description":"라비린스 아카데미의 모든 과목을 망라한 종합 학습 가이드북. 효율적인 공부법과 핵심 요점이 정리되어 있어 단기간에 지식을 늘릴 수 있다.","detailedDescription":"학원 서점에서 판매하는 공식 교재로, 모든 학생들이 한 권씩은 가지고 있을 정도로 유용합니다.","usage":"인벤토리에서 직접 사용하여 지력 상승, 시험 기간에 사용하면 추가 보너스","useLocation":"도서관, 개인 기숙사, 교실","usableBy":"플레이어 캐릭터 전용","lore":"우수한 졸업생들이 후배들을 위해 만든 학습서로, 실제 시험에서 높은 적중률을 보인다.","type":"consumable","rarity":"common","value":150,"effect":{"intelligence":5},"icon":"📖","category":"소모품"},"energyDrink":{"id":"energyDrink","name":"에너지 드링크","description":"학원 내 카페테리아에서 판매하는 특제 에너지 음료. 마법적 성분이 첨가되어 일반 음료보다 피로 회복 효과가 뛰어나며, 체력과 정신력을 동시에 보충해준다.","detailedDescription":"시험 기간이나 던전 탐험 전후에 많이 찾는 인기 음료입니다.","usage":"피로하거나 HP가 부족할 때 즉시 사용하여 체력과 스태미나 회복","useLocation":"어디서든 사용 가능, 카페테리아에서 구매","usableBy":"모든 캐릭터","lore":"학원의 연금술사들이 개발한 특별한 배합으로, 부작용 없이 안전하게 에너지를 보충할 수 있다.","type":"consumable","rarity":"common","value":50,"effect":{"stamina":3,"hp":20},"icon":"🥤","category":"소모품"},"mirror":{"id":"mirror","name":"마법 거울","description":"사용자의 외모를 일시적으로 보정해주는 마법이 걸린 소형 거울. 자신감을 높이고 타인에게 더 매력적으로 보이게 해주는 효과가 있다.","detailedDescription":"마법상점에서 판매하는 뷰티 아이템으로, 특히 데이트나 중요한 만남 전에 사용하면 효과적입니다.","usage":"중요한 대화나 이벤트 전에 사용하여 매력도 일시 증가","useLocation":"기숙사, 화장실, 데이트 장소","usableBy":"플레이어 캐릭터","lore":"옛날 왕실에서 사용하던 마법 거울의 소형 버전으로, 진실한 아름다움을 비춰준다고 한다.","type":"consumable","rarity":"uncommon","value":120,"effect":{"charm":3},"icon":"🪞","category":"소모품"},"lunchbox":{"id":"lunchbox","name":"도시락","description":"직접 만든 정성 가득한 도시락. 영양 균형을 고려한 메뉴 구성과 예쁜 플레이팅으로 받는 이의 마음까지 따뜻하게 만들어주는 특별한 선물이다.","detailedDescription":"요리 수업에서 배운 기술로 직접 만들거나 카페테리아에서 주문 제작할 수 있습니다.","usage":"캐릭터에게 선물하여 호감도 상승, 함께 먹으면서 친밀도 증진","useLocation":"학원 곳곳, 피크닉 장소, 데이트 스팟","usableBy":"모든 캐릭터가 좋아함","lore":"수제 음식에는 만든 이의 마음이 담겨있어, 먹는 이에게 특별한 힘을 준다는 믿음이 있다.","type":"gift","rarity":"common","value":80,"effect":{"affection":8,"stamina":2},"preferredBy":["sakura","yuki","luna"],"icon":"🍱","category":"선물"},"trainingGear":{"id":"trainingGear","name":"훈련 장비","description":"최고급 강철로 제작된 검술 훈련용 장비 세트. 검, 갑옷, 보호구가 모두 포함되어 있으며, 실제 검술부에서 사용하는 전문가급 장비다.","detailedDescription":"무기상점에서 특별 주문으로만 구할 수 있는 고급 훈련 장비입니다.","usage":"검술부 에이스 사쿠라에게 선물하면 큰 감동, 훈련 효율 증가 효과","useLocation":"검술부 도장, 훈련장","usableBy":"주로 사쿠라, 전투 관련 캐릭터들","lore":"전설의 검사가 사용했다는 장비를 모델로 제작되었으며, 사용자의 잠재력을 끌어낸다.","type":"gift","rarity":"rare","value":500,"effect":{"affection":20},"preferredBy":["sakura"],"icon":"⚔️","category":"선물"},"mysteryKey":{"id":"mysteryKey","name":"수수께끼의 열쇠","description":"고대 룬 문자가 새겨진 신비로운 황금 열쇠. 학원 어딘가에 숨겨진 비밀의 방이나 보물고를 열 수 있는 것으로 추정되며, 특별한 이벤트를 해금할 수 있다.","detailedDescription":"전설적인 희귀 아이템으로, 특정 조건을 만족해야만 획득할 수 있습니다.","usage":"학원의 숨겨진 구역 해금, 미스터리 캐릭터 만남, 특별 엔딩 루트 개방","useLocation":"학원 지하, 금지된 탑, 비밀 통로","usableBy":"플레이어 캐릭터, 특정 조건 충족 시","lore":"학원 창립자가 남긴 마지막 비밀을 담고 있다고 전해지며, 진정한 졸업의 열쇠라고 불린다.","type":"special","rarity":"legendary","value":1000,"effect":{"unlockSecret":true},"icon":"🗝️","category":"특별"},"basicSword":{"id":"basicSword","name":"연습용 검","description":"검술부 신입생들이 첫 수업에서 사용하는 나무 연습검. 가벼워서 다루기 쉬우며, 기본적인 검술 동작을 익히는 데 적합하다. 안전을 위해 끝이 둥글게 처리되어 있다.","detailedDescription":"모든 신입생에게 지급되는 기본 장비로, 무기상점에서도 저렴하게 구매할 수 있습니다.","usage":"검술 훈련, 기본 전투, 던전 초급 층 탐험","useLocation":"검술부 도장, 훈련장, 던전","usableBy":"레벨 1 이상 모든 캐릭터","lore":"전설의 검사들도 이 같은 나무검으로 수련을 시작했다고 한다. 모든 위대한 여정의 첫 걸음이다.","type":"weapon","rarity":"common","value":200,"effect":{"strength":5,"agility":2},"requirements":{"level":1},"icon":"🗡️","category":"무기"},"steelSword":{"id":"steelSword","name":"강철 검","description":"전문 대장장이가 제작한 고품질 강철 검. 정교한 단조 과정을 거쳐 만들어졌으며, 날카로움과 내구성을 모두 지니고 있다. 중급자용 무기로 인기가 높다.","detailedDescription":"어느 정도 실력을 쌓은 학생들이 사용하는 중급자용 무기입니다.","usage":"중급 수준의 검술 훈련, 던전 중급 층 탐험, 실전 전투","useLocation":"검술부 고급 도장, 던전, 전투 관련 이벤트","usableBy":"레벨 5 이상, 힘 15 이상의 캐릭터","lore":"학원의 대장장이가 직접 단조한 작품으로, 착용자의 의지에 따라 그 위력이 달라진다고 한다.","type":"weapon","rarity":"uncommon","value":800,"effect":{"strength":12,"agility":5},"requirements":{"level":5,"stats":{"strength":15}},"icon":"⚔️","category":"무기"},"mysticStaff":{"id":"mysticStaff","name":"신비한 지팡이","description":"고대 마법사의 지팡이를 모델로 제작된 신비로운 무기. 각종 마법 보석이 박혀있으며, 마법력 증폭과 주문 성공률 상승 효과가 있다. 우아한 디자인으로 인해 매력도 날씬하게 해준다.","detailedDescription":"마법학부 고급생들에게 인기가 높은 고급 마법 무기입니다.","usage":"고급 마법 주문 시전, 마법학 연구, 던전 고급 층 탐험","useLocation":"마법학부, 마법 연구실, 던전","usableBy":"레벨 8 이상, 지력 20 이상의 마법사 타입 캐릭터","lore":"전설의 대마법사가 사용했다는 지팡이의 복제품으로, 사용자의 지혜와 마음에 반응한다.","type":"weapon","rarity":"rare","value":1200,"effect":{"intelligence":15,"mp":30,"charm":8},"requirements":{"level":8,"stats":{"intelligence":20}},"icon":"🪄","category":"무기"},"leatherArmor":{"id":"leatherArmor","name":"가죽 갑옷","description":"마수 거시에서 얻은 고급 가죽으로 제작한 경량 방어구. 유연성과 내구성을 모두 갖춘 실용적인 갑옷으로, 민첩성을 해치지 않으면서도 효과적인 방어를 제공한다.","detailedDescription":"초보자들이 가장 먼저 구입하는 기본적인 방어구입니다.","usage":"일반적인 던전 탐험, 기본 방어력 확보, 전투 훈련","useLocation":"던전, 훈련장, 일상 활동","usableBy":"레벨 2 이상 모든 캐릭터","lore":"모험가들의 기본 장비로 여겨지는 가죽 갑옷은 수많은 영웅들이 첫 모험에서 착용했던 동료이다.","type":"armor","rarity":"common","value":300,"effect":{"hp":20,"agility":3},"requirements":{"level":2},"icon":"🛡️","category":"방어구"},"plateArmor":{"id":"plateArmor","name":"판갑옷","description":"최고급 강철로 제작된 중장 방어구. 각 부분이 정밀하게 설계되어 최대한의 방어력을 제공하며, 무게감으로 인해 착용자의 힘도 증가시킨다. 기사들의 상징이다.","detailedDescription":"고급 전사들이 선호하는 중무장 방어구로, 높은 체력이 필요합니다.","usage":"고난이도 전투, 던전 보스전, 중요한 미션","useLocation":"던전 심층, 고난이도 전투 지역","usableBy":"레벨 6 이상, 힘 18 이상의 전사 타입 캐릭터","lore":"기사단의 정예 멤버들이 착용하는 갑옷으로, 착용자에게 불굴의 의지를 부여한다고 전해진다.","type":"armor","rarity":"uncommon","value":1000,"effect":{"hp":50,"strength":8},"requirements":{"level":6,"stats":{"strength":18}},"icon":"🛡️","category":"방어구"},"mageRobe":{"id":"mageRobe","name":"마법사 로브","description":"고대 마법사들이 착용했던 신비한 로브를 복원한 고급 마법 방어구. 마법 증폭 효과와 마나 회복 속도 향상 효과가 있으며, 우아한 디자인으로 인해 매력도 높여준다.","detailedDescription":"마법학부 고급생들의 선망의 대상이 되는 최고급 마법 장비입니다.","usage":"고등 마법 사용, 마법 연구, 중요한 마법 시연","useLocation":"마법학부, 마법 연구실, 개인 실험실","usableBy":"레벨 7 이상, 지력 22 이상의 마법사 타입 캐릭터","lore":"마법학부의 창립자가 직접 디자인한 로브으로, 착용자의 마법적 잠재력을 극대한 끌어낸다.","type":"armor","rarity":"rare","value":1500,"effect":{"mp":40,"intelligence":12,"charm":10},"requirements":{"level":7,"stats":{"intelligence":22}},"icon":"👘","category":"방어구"},"luckRing":{"id":"luckRing","name":"행운의 반지","description":"고대 점술사가 제작한 특별한 반지. 착용자에게 마법적인 행운을 선사하며, 예상치 못한 기회를 가져다준다. 매력적인 디자인으로 인해 평소에도 착용하기 좋다.","detailedDescription":"장신구 상점에서 인기가 높은 액세서리로, 학생들 사이에서 행운의 상징이다.","usage":"던전 탐험 시 드롭률 증가, 도박이나 게임에서 유리, 우연한 좋은 사건 발생 빈도 증가","useLocation":"던전, 카지노, 중요한 이벤트 지역","usableBy":"레벨 3 이상 모든 캐릭터","lore":"저주를 받은 가문의 상속녀가 운명을 바꿨다는 전설의 반지를 모델로 제작되었다.","type":"accessory","rarity":"uncommon","value":600,"effect":{"luck":10,"charm":5},"requirements":{"level":3},"icon":"💍","category":"장신구"},"strengthAmulet":{"id":"strengthAmulet","name":"힘의 부적","description":"고대 전사들이 사용했다는 신비로운 부적. 착용자의 부력에 까지 이어지는 빨간 힘줄이 보이며, 유사시 어디서나 힘이 손솔해 나온다. 체력과 지구력도 함께 증가시키는 전사들의 필수품이다.","detailedDescription":"전사들에게 매우 인기가 높은 액세서리로, 늨성 학생들 사이에서 특히 인기가 높다.","usage":"고난이도 전투, 무거운 물건 운반, 체력이 요구되는 활동","useLocation":"던전, 훈련장, 노동 현장","usableBy":"레벨 5 이상, 힘 중심 캐릭터","lore":"전설의 용사가 마왕을 쓰러뜨릴 때 착용했다는 부적의 복제품으로, 정의로운 마음을 지닌 자에게만 그 힘을 드러낸다.","type":"accessory","rarity":"rare","value":900,"effect":{"strength":8,"stamina":6,"hp":25},"requirements":{"level":5},"icon":"🧿","category":"장신구"},"wisdomPendant":{"id":"wisdomPendant","name":"지혜의 펜던트","description":"학원 역사상 가장 위대한 학자가 사용했다는 전설의 펜던트. 착용자의 지적 능력을 극대한 끌어올리며, 마법력과 학습 능력도 큕길하게 증진시킨다. 모든 마법사의 꿈이다.","detailedDescription":"가장 뛰어난 학생들만이 착용할 수 있는 전설적인 아이템입니다.","usage":"최고 수준의 마법 연구, 대학원 진학, 특별한 마법 시연","useLocation":"대학원 연구실, 특별 마법 실험실, 마법학 연구소","usableBy":"레벨 10 이상, 지력 25 이상의 최고 수준 학생","lore":"차원의 비밀을 해명한 대마법사의 유물로, 착용자에게 무한한 지식에 대한 갈망과 능력을 선사한다.","type":"accessory","rarity":"epic","value":1800,"effect":{"intelligence":15,"mp":35,"experience":50},"requirements":{"level":10,"stats":{"intelligence":25}},"icon":"📿","category":"장신구"},"healingPotion":{"id":"healingPotion","name":"치유 물약","description":"학원의 연금술사들이 제조한 효과적인 치유 물약. 대다수의 상처와 피로를 즉시 회복시켜주며, 달콤한 딥기 맛이 나서 아이들도 부담 없이 마실 수 있다.","detailedDescription":"던전 탐험이나 전투 후 필수품으로, 모든 모험가들이 항상 지니고 다니는 기본 아이템입니다.","usage":"체력이 낮을 때 즉시 사용하여 생명력 회복, 전투 중 응급 치료","useLocation":"던전, 전투 지역, 응급 상황","usableBy":"모든 캐릭터","lore":"연금술의 기본 쓰임으로 여겨지는 치유 물약은 수많은 생명을 구해온 경이로운 발명품이다.","type":"consumable","rarity":"common","value":100,"effect":{"hp":50},"icon":"🧪","category":"소모품"},"manaPotion":{"id":"manaPotion","name":"마나 물약","description":"마법의 힐을 담은 신비한 파란색 물약. 마법사들이 소진한 마나를 즉시 회복시켜주며, 마법 사용으로 인한 정신적 피로도 완화시켜준다. 연금술의 공정에서 원생 마나를 낙륙시켜 만든다.","detailedDescription":"마법사들에게는 마치 생명선과 같은 존재로, 마법을 많이 사용하는 학생들에게 필수품입니다.","usage":"마나가 부족할 때 사용하여 마법력 회복, 연속적인 마법 사용 전","useLocation":"마법 수업 중, 마법 실험, 던전 탐험","usableBy":"마법을 사용하는 모든 캐릭터","lore":"고대부터 마법사들의 동반자가 되어온 물약으로, 마법의 발전과 함께 함께 진보해왔다.","type":"consumable","rarity":"common","value":120,"effect":{"mp":40},"icon":"🧪","category":"소모품"},"experienceScroll":{"id":"experienceScroll","name":"경험치 두루마리","description":"전인들의 지식과 경험이 압축되어 담겨진 신비로운 두루마리. 사용하면 마치 오랜 수련을 한 것처럼 경험치를 얻을 수 있으며, 새로운 통찰력과 이해력이 얻어진다.","detailedDescription":"특별한 이벤트나 보상으로만 얻을 수 있는 귀중한 아이템입니다.","usage":"빠른 레벨 업을 위해 사용, 시험 기간 전 집중 학습","useLocation":"도서관, 개인 스터디룸, 명상 공간","usableBy":"모든 캐릭터","lore":"학원의 대선배들이 후배들의 성장을 위해 자신들의 경험을 흑어넣은 소중한 선물이다.","type":"consumable","rarity":"uncommon","value":250,"effect":{"experience":100},"icon":"📜","category":"소모품"},"statBooster":{"id":"statBooster","name":"능력치 강화제","description":"전설의 연금술사가 개발한 최고급 강화 물약. 모든 능력치를 동시에 강화시켜주는 기적의 약물로, 마시는 순간 전신에 활력이 넘친다. 하지만 강력한 효과로 인해 자주 사용할 수는 없다.","detailedDescription":"극히 희귀한 고급 소모품으로, 신중하게 사용해야 합니다.","usage":"중요한 시험이나 대회 전, 위기 상황에서 비상 용도로 사용","useLocation":"중요한 이벤트 전, 보스 전투 전, 합격 선언 직전","usableBy":"모든 캐릭터 (단, 과도한 사용 금지)","lore":"오직 단 한 번의 시험만을 위해 일년을 공들인 연금술사의 작품으로, 모든 능력의 조화를 이룬다.","type":"consumable","rarity":"rare","value":500,"effect":{"intelligence":3,"charm":3,"stamina":3,"strength":3,"agility":3,"luck":3},"icon":"⚗️","category":"소모품"},"chocolateBox":{"id":"chocolateBox","name":"고급 초콜릿 세트","description":"유명 파티시에가 만든 프리미엄 초콜릿 세트. 각기 다른 맛과 모양의 초콜릿 12개가 아름다운 상자에 정성스럽게 포장되어 있어, 받는 이의 마음을 설레게 한다.","detailedDescription":"발렌타인 데이나 특별한 기념일에 인기가 높은 선물입니다.","usage":"로맨틱한 이벤트나 고백 시 사용, 달콤함을 좋아하는 캐릭터들에게 효과적","useLocation":"카페, 데이트 장소, 기념일 이벤트","usableBy":"유키, 루나 등 단것을 좋아하는 캐릭터들","lore":"사랑의 감정을 달콤함으로 표현한다는 초콜릿의 전통을 이어받은 특별한 선물이다.","type":"gift","rarity":"uncommon","value":350,"effect":{"affection":18},"preferredBy":["yuki","luna"],"icon":"🍫","category":"선물"},"jewelryBox":{"id":"jewelryBox","name":"보석함","description":"희귀한 마법 보석들이 들어있는 최고급 장신구 상자. 루비, 사파이어, 에메랄드 등 각각 다른 마법적 속성을 지닌 보석들이 벨벳 안감의 상자에 정교하게 배치되어 있다.","detailedDescription":"왕실 보석상에서만 구할 수 있는 초고급 선물로, 진정한 사랑의 증표로 여겨집니다.","usage":"최고 수준의 호감도가 필요한 고백이나 프로포즈 시 사용","useLocation":"로맨틱한 장소, 특별한 이벤트","usableBy":"루나, 미스터리 등 고급스러운 것을 좋아하는 캐릭터들","lore":"각 보석에는 영원한 사랑을 기원하는 고대 마법이 깃들어 있어, 진실한 마음으로 선물할 때만 그 진가를 발휘한다.","type":"gift","rarity":"epic","value":1200,"effect":{"affection":35},"preferredBy":["luna","mystery"],"icon":"💎","category":"선물"}}'),Zx={items:jg},Ng=({onClose:r})=>{const{player:i,unlockedCharacters:d}=re(),o=re(B=>B.actions.useItem),u=Zx.items,m=qa,[g,y]=v.useState(null),[p,x]=v.useState(null),[S,b]=v.useState(!1),[D,O]=v.useState("all"),[C,z]=v.useState(new Set),j=B=>{const ae={common:{color:"border-gray-400 bg-gray-500/10",text:"text-gray-400",name:"일반"},uncommon:{color:"border-green-400 bg-green-500/10",text:"text-green-400",name:"고급"},rare:{color:"border-blue-400 bg-blue-500/10",text:"text-blue-400",name:"희귀"},epic:{color:"border-purple-400 bg-purple-500/10",text:"text-purple-400",name:"영웅"},legendary:{color:"border-yellow-400 bg-yellow-500/10",text:"text-yellow-400",name:"전설"}};return B.rarity?ae[B.rarity]:ae.common},N=i.inventory.reduce((B,ae)=>(u[ae]&&(B[ae]?B[ae].count++:B[ae]={item:u[ae],count:1}),B),{}),w=Object.values(N).filter(({item:B})=>D==="all"?!0:B.type===D),T=B=>{B.type==="gift"?(y(B),b(!0)):["weapon","armor","accessory"].includes(B.type)?A(B)?(o(B.id),y(null)):alert("장비 요구 조건을 만족하지 않습니다."):(o(B.id),y(null))},A=B=>{if(!B.requirements)return!0;if(B.requirements.level&&i.level<B.requirements.level)return!1;if(B.requirements.stats){for(const[ae,G]of Object.entries(B.requirements.stats))if(i.stats[ae]<G)return!1}return!0},k=B=>{g&&(o(g.id,B),y(null),b(!1))},M=B=>({intelligence:"지력",charm:"매력",stamina:"체력",strength:"힘",agility:"민첩",luck:"행운"})[B]||B,Y=B=>({sakura:"🌸",yuki:"❄️",luna:"🌙",mystery:"❓"})[B]||"👤";return e.jsxs("div",{className:"bg-background text-text-primary rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-secondary flex items-center gap-2",children:[e.jsx("span",{children:"🎒"}),"인벤토리"]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:["총 ",Object.values(N).reduce((B,{count:ae})=>B+ae,0),"개 아이템"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:[{key:"all",label:"전체",icon:"📦"},{key:"gift",label:"선물",icon:"🎁"},{key:"consumable",label:"소모품",icon:"💊"},{key:"weapon",label:"무기",icon:"⚔️"},{key:"armor",label:"방어구",icon:"🛡️"},{key:"accessory",label:"장신구",icon:"💍"},{key:"special",label:"특별",icon:"⭐"}].map(({key:B,label:ae,icon:G})=>e.jsxs("button",{onClick:()=>O(B),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${D===B?"bg-primary text-white shadow-lg":"bg-black/30 text-text-secondary hover:bg-primary/50"}`,children:[e.jsx("span",{children:G}),ae]},B))}),Object.keys(N).length===0?e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-3",children:"📦"}),e.jsx("p",{children:"인벤토리가 비어있습니다"})]}):w.length===0?e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🔍"}),e.jsx("p",{children:"해당 종류의 아이템이 없습니다"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(({item:B,count:ae})=>{const G=j(B);return e.jsxs("div",{onClick:()=>{z(le=>new Set(le).add(B.id)),x(B)},className:`bg-black/30 rounded-lg p-4 border transition-all duration-200 hover:scale-105 cursor-pointer ${G.color}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:B.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-text-primary",children:B.name}),e.jsx("p",{className:`text-xs ${G.text} capitalize`,children:B.type})]})]}),ae>1&&e.jsxs("div",{className:"bg-primary text-white text-xs px-2 py-1 rounded-full font-bold",children:["×",ae]})]}),C.has(B.id)?e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:B.description}):e.jsx("p",{className:"text-sm text-text-secondary mb-4 italic opacity-60",children:"클릭하여 상세 정보 확인..."}),C.has(B.id)&&e.jsxs("div",{className:"space-y-1 mb-4",children:[B.effect.affection&&e.jsxs("div",{className:"text-xs text-pink-300 flex items-center gap-1",children:["💕 ",e.jsxs("span",{children:["호감도 +",B.effect.affection]})]}),B.effect.hp&&e.jsxs("div",{className:"text-xs text-red-300 flex items-center gap-1",children:["❤️ ",e.jsxs("span",{children:["체력 +",B.effect.hp]})]}),B.effect.mp&&e.jsxs("div",{className:"text-xs text-blue-300 flex items-center gap-1",children:["💙 ",e.jsxs("span",{children:["마나 +",B.effect.mp]})]}),B.effect.intelligence&&e.jsxs("div",{className:"text-xs text-blue-300 flex items-center gap-1",children:["🧠 ",e.jsxs("span",{children:["지력 +",B.effect.intelligence]})]}),B.effect.charm&&e.jsxs("div",{className:"text-xs text-pink-300 flex items-center gap-1",children:["✨ ",e.jsxs("span",{children:["매력 +",B.effect.charm]})]}),B.effect.stamina&&e.jsxs("div",{className:"text-xs text-green-300 flex items-center gap-1",children:["💪 ",e.jsxs("span",{children:["체력 +",B.effect.stamina]})]}),B.effect.strength&&e.jsxs("div",{className:"text-xs text-orange-300 flex items-center gap-1",children:["💪 ",e.jsxs("span",{children:["힘 +",B.effect.strength]})]}),B.effect.agility&&e.jsxs("div",{className:"text-xs text-cyan-300 flex items-center gap-1",children:["🏃 ",e.jsxs("span",{children:["민첩 +",B.effect.agility]})]}),B.effect.luck&&e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:["🍀 ",e.jsxs("span",{children:["행운 +",B.effect.luck]})]}),B.effect.experience&&e.jsxs("div",{className:"text-xs text-purple-300 flex items-center gap-1",children:["⭐ ",e.jsxs("span",{children:["경험치 +",B.effect.experience]})]}),B.effect.unlockSecret&&e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:["🔓 ",e.jsx("span",{children:"비밀 해제"})]})]}),C.has(B.id)&&B.requirements&&e.jsxs("div",{className:"mb-4 p-2 bg-red-900/20 rounded border border-red-500/30",children:[e.jsx("div",{className:"text-xs text-red-300 font-medium mb-1",children:"필요 조건:"}),e.jsxs("div",{className:"space-y-1",children:[B.requirements.level&&e.jsxs("div",{className:"text-xs text-red-400",children:["레벨 ",B.requirements.level," 이상"]}),B.requirements.stats&&Object.entries(B.requirements.stats).map(([le,E])=>e.jsxs("div",{className:"text-xs text-red-400",children:[M(le)," ",E," 이상"]},le))]})]}),B.value&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:["💰 ",e.jsxs("span",{children:["가치: ",B.value," 골드"]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:`text-xs font-medium ${G.text}`,children:["등급: ",G.name]})}),B.preferredBy&&B.preferredBy.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-yellow-300 mb-1",children:"⭐ 선호 캐릭터:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:B.preferredBy.map(le=>e.jsx("span",{className:"text-xs bg-yellow-600/20 text-yellow-200 px-2 py-1 rounded-full",children:m[le]?.name||le},le))})]}),e.jsx("button",{onClick:()=>T(B),disabled:!A(B),className:`w-full py-2 rounded-lg text-sm font-medium transition-all duration-200 ${A(B)?B.type==="gift"?"bg-secondary hover:bg-secondary/80 text-white":B.type==="consumable"?"bg-green-600/80 hover:bg-green-500/80 text-white":["weapon","armor","accessory"].includes(B.type)?"bg-blue-600/80 hover:bg-blue-500/80 text-white":"bg-yellow-600/80 hover:bg-yellow-500/80 text-white":"bg-gray-600/50 text-gray-400 cursor-not-allowed"}`,children:B.type==="gift"?"선물하기":B.type==="consumable"?"사용하기":["weapon","armor","accessory"].includes(B.type)?"장착하기":"확인하기"})]},B.id)})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsx("div",{className:"bg-background rounded-lg shadow-2xl max-w-md w-full border border-border",onClick:B=>B.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-secondary",children:"아이템 정보"}),e.jsx("button",{onClick:()=>x(null),className:"text-text-secondary hover:text-text-primary text-2xl transition-colors duration-200",children:"×"})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:p.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-text-primary",children:p.name}),e.jsx("div",{className:"text-sm text-text-secondary",children:p.description})]})]})})]})})}),S&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-background rounded-lg shadow-2xl max-w-md w-full border border-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-secondary",children:"선물할 대상 선택"}),e.jsx("button",{onClick:()=>b(!1),className:"text-text-secondary hover:text-text-primary text-2xl transition-colors duration-200",children:"×"})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:g.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-text-primary",children:g.name}),e.jsx("div",{className:"text-sm text-text-secondary",children:g.description})]})]})}),e.jsx("div",{className:"space-y-3",children:d.map(B=>{const ae=m[B];if(!ae)return null;const G=g.preferredBy?.includes(B);return e.jsxs("button",{onClick:()=>k(B),className:`w-full p-3 rounded-lg text-left transition-all duration-200 hover:scale-105 flex items-center gap-3 ${G?"bg-accent/60 hover:bg-accent/50 border border-accent/50":"bg-primary/60 hover:bg-primary/50"}`,children:[e.jsx("span",{className:"text-2xl",children:Y(B)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:ae.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:ae.role}),G&&e.jsx("div",{className:"text-xs text-accent font-medium",children:"⭐ 선호 아이템!"})]})]},B)})})]})})})]})},wg={conversations:[{id:"sakura_first_meeting",requiredAffection:0,dialogue:["아침 햇살이 비치는 훈련장. 한 소녀가 나무 인형을 상대로 검술 연습을 하고 있다.","정확하고 날카로운 검격이 공기를 가른다. 그녀의 이마에는 땀방울이 맺혀있다.","당신의 발소리를 듣고 그녀가 돌아본다. 날카로운 눈빛이 순간 부드러워진다.","「아... 누군가 있었군요. 실례했습니다.」","그녀가 검을 내리고 숨을 고른다.","「저는 키리시마 사쿠라. 2학년이고 검술부 부장을 맡고 있어요.」","「새벽부터 연습하는 게 습관이 되어서... 시끄러웠다면 죄송해요.」","사쿠라가 수건으로 땀을 닦으며 당신을 관찰한다.","「당신은... 최근에 전학 온 학생이시죠? 소문을 들었어요.」","「이 학교는 겉보기와는 달리 꽤 특별한 곳이에요. 조심하셔야 할 거예요.」","그녀의 표정이 진지해진다.","「특히 밤에는... 아니, 이건 너무 이른 이야기네요.」","「혹시 검술에 관심이 있으신가요? 아니면 그냥 산책 중이신건가요?」"],choices:[{text:"검술을 배우고 싶습니다. 가르쳐 주실 수 있나요?",affectionChange:7,response:`사쿠라의 눈이 반짝인다.
「정말이에요? 기뻐요! 요즘 검술에 관심 있는 사람이 드물거든요.」
그녀가 연습용 목검을 건넨다.
「기초부터 차근차근 가르쳐드릴게요. 매일 아침 이 시간에 만나요.」
「그리고... 함께 연습할 사람이 생겨서 저도 기뻐요.」`},{text:"사실 당신이 궁금해서 왔어요. 더 알고 싶어요.",affectionChange:5,response:`사쿠라가 놀란 듯 눈을 크게 뜬다. 뺨이 살짝 붉어진다.
「저, 저요? 저는 별로 특별한 사람이 아닌데...」
잠시 망설이다가 작게 웃는다.
「그래도... 관심 가져주셔서 고마워요. 친구가 되어주실래요?」`},{text:"밤에 무슨 일이 있나요? 더 자세히 알려주세요.",affectionChange:2,response:`사쿠라가 주변을 둘러보고 목소리를 낮춘다.
「아직은... 자세히 말씀드릴 수 없어요. 하지만 조심하세요.」
「이 학교 지하에는 오래된 미궁이 있다는 소문이 있어요.」
「언젠가는 알게 되실 거예요. 그때까지는... 제 곁에 있어주세요.」`}]},{id:"sakura_training_together",requiredAffection:15,dialogue:["며칠째 이어지는 아침 훈련. 사쿠라와의 만남이 일상이 되어가고 있다.","「오늘도 오셨네요! 정말 성실하시네요.」","사쿠라가 환한 미소로 당신을 맞이한다. 예전보다 훨씬 편안해 보인다.","「오늘은 특별한 걸 가르쳐드릴까 해요. 우리 가문의 기초 검술이에요.」","그녀가 아름다운 자세로 검을 든다. 아침 햇살이 그녀를 감싸 신비롭게 보인다.","「키리시마류는 단순한 검술이 아니에요. 마음을 다스리는 법이기도 하죠.」","「숨을 고르고, 상대를 느끼고, 자연과 하나가 되는 거예요.」","사쿠라가 당신 뒤로 다가와 자세를 교정해준다. 그녀의 손이 당신의 손을 감싼다.","「이렇게... 힘을 빼고, 자연스럽게...」","가까이서 느껴지는 그녀의 체온과 은은한 벚꽃 향기.","「어... 너무 가까웠나요? 죄, 죄송해요!」","당황한 사쿠라가 한 걸음 물러선다. 얼굴이 새빨개졌다.","「그런데... 당신과 함께 있으면 이상하게 마음이 편해져요.」","「원래 남에게 가문의 검술을 가르치는 건 금기인데...」","「당신이라면 괜찮을 것 같아요. 믿을 수 있을 것 같거든요.」"],choices:[{text:"저도 사쿠라 씨와 있으면 마음이 편해요. 더 가까이 있고 싶어요.",affectionChange:10,response:`사쿠라의 눈이 흔들린다. 검을 내려놓고 당신을 바라본다.
「정말... 그렇게 생각하세요?」
「저도... 당신과 더 많은 시간을 보내고 싶어요.」
그녀가 수줍게 당신의 손을 잡는다.
「천천히... 서로를 알아가요. 검술도, 그리고 서로의 마음도...」`},{text:"가문의 검술을 가르쳐주셔서 영광입니다. 열심히 배울게요.",affectionChange:6,response:`사쿠라가 안도한 듯 미소 짓는다.
「열정적이시네요! 그런 모습이 좋아요.」
「키리시마류를 제대로 익히려면 몸과 마음이 하나가 되어야 해요.」
「함께 노력하면 분명 해낼 수 있을 거예요. 제가 도와드릴게요.」`},{text:"가문의 비밀이 더 있는 것 같은데요?",affectionChange:3,response:`사쿠라의 표정이 복잡해진다.
「역시... 눈치채셨군요. 당신은 예리하시네요.」
「언젠가는 모든 걸 말씀드릴게요. 하지만 지금은...」
「지금은 그저 순수하게 검술을 즐겼으면 좋겠어요.」`}]},{id:"sakura_secret_revealed",requiredAffection:40,dialogue:["깊은 밤, 사쿠라가 급하게 당신을 찾아온다. 그녀의 표정이 심상치 않다.","「일어나세요! 큰일이에요!」","창밖으로 보이는 학교 상공에 이상한 붉은 빛이 소용돌이치고 있다.","「미궁이... 미궁의 봉인이 약해지고 있어요.」","사쿠라가 진짜 검을 들고 있다. 날카로운 일본도가 달빛에 번뜩인다.","「이제 숨길 수 없겠네요. 저희 가문은 대대로 미궁의 봉인을 지켜왔어요.」","「키리시마류 검술은 사실 마물을 베기 위한 퇴마의 검술이에요.」","그녀의 눈빛이 결연하다.","「제 운명이에요. 피할 수 없는... 하지만 당신은 달라요.」","「위험해지기 전에 떠나세요. 이건 우리 가문의 일이니까...」","사쿠라가 돌아서려 하지만, 그녀의 손이 떨리고 있는 게 보인다.","「...무서워요. 사실은 정말 무서워요.」","「할아버지께서는 봉인이 풀리면 목숨을 걸어야 한다고 하셨어요.」","「하지만... 해야만 해요. 이게 제 운명이니까.」","그녀가 당신을 바라본다. 눈에 눈물이 맺혀있다.","「당신과 더 많은 시간을 보내고 싶었는데...」"],choices:[{text:"혼자 가게 둘 수 없어요. 함께 싸울게요.",affectionChange:15,response:`사쿠라의 눈에서 눈물이 흐른다.
「바보... 왜 그런 위험한 선택을...」
하지만 그녀의 표정에 안도감이 번진다.
「고마워요. 정말... 정말 고마워요.」
「함께라면... 어떤 운명도 이겨낼 수 있을 것 같아요.」
사쿠라가 당신의 손을 꼭 잡는다.
「약속해요. 절대 당신을 지킬게요. 제 검에 걸고 맹세해요.」`},{text:"도망치지 마세요. 다른 방법을 찾아봐요.",affectionChange:8,response:`사쿠라가 고개를 젓는다.
「다른 방법은... 없어요. 이건 정해진 운명이에요.」
「하지만... 당신이 걱정해주는 마음은 알겠어요.」
「돌아올게요. 꼭 돌아와서 다시 만날게요. 약속해요.」`},{text:"너무 위험해요. 다른 사람들의 도움을 받아야 해요.",affectionChange:5,response:`「그럴 시간이 없어요. 그리고...」
「이 비밀을 아는 사람이 많아질수록 더 위험해져요.」
「걱정해 주셔서 고마워요. 하지만 이건 제가 해야 할 일이에요.」`}]},{id:"sakura_confession",requiredAffection:70,dialogue:["미궁의 위기가 지나간 후, 평화로운 봄날. 학교 뒤뜰의 벚꽃이 만개했다.","사쿠라가 벚꽃나무 아래서 당신을 기다리고 있다. 바람에 꽃잎이 흩날린다.","「와주셨네요... 사실 오늘 꼭 하고 싶은 말이 있어서...」","그녀가 깊은 숨을 쉰다. 평소의 강인한 모습과 달리 긴장한 것 같다.","「그동안 정말 많은 일이 있었죠? 함께 싸워주셔서 정말 고마웠어요.」","「당신이 없었다면... 저는 아마 포기했을 거예요.」","사쿠라가 한 걸음 다가선다. 그녀의 뺨이 벚꽃처럼 붉게 물든다.","「처음엔 그저 검술을 가르쳐 드리려고 했을 뿐이었는데...」","「어느새 매일 아침 당신을 기다리는 제 자신을 발견했어요.」","「당신의 미소를 보면 하루가 행복하고, 당신이 다치면 가슴이 아팠어요.」","그녀가 용기를 내어 당신의 눈을 똑바로 바라본다.","「키리시마 사쿠라는... 한 명의 검사이기 이전에 한 명의 여자로서...」","「당신을 사랑합니다.」","벚꽃 꽃잎이 두 사람 사이에 흩날린다.","「제 곁에... 영원히 있어주실래요?」","「검의 길도, 운명도, 모든 것을 함께 나누고 싶어요.」"],choices:[{text:"저도 사쿠라를 사랑해요. 영원히 함께해요.",affectionChange:25,response:`사쿠라의 얼굴이 환하게 밝아진다. 눈물이 뺨을 타고 흐른다.
「정말... 정말이에요? 꿈이 아니죠?」
그녀가 당신에게 뛰어들어 꼭 안긴다.
「행복해요... 이렇게 행복해도 되는 걸까요?」
「이제 뭐든 이겨낼 수 있어요. 당신과 함께라면...」
사쿠라가 발꿈치를 들고 당신에게 입맞춤한다.
「사랑해요... 영원히, 변치 않을게요.」`},{text:"사쿠라는 소중한 사람이에요. 하지만 조금 더 시간이 필요해요.",affectionChange:0,response:`사쿠라가 쓸쓸하게 미소 짓는다.
「그렇군요... 제가 너무 서둘렀나봐요.」
「괜찮아요. 기다릴게요. 당신의 마음이 준비될 때까지...」
「그래도 제 마음은 변하지 않을 거예요. 알아주세요.」`},{text:"미안해요... 친구로 남았으면 해요.",affectionChange:-20,response:`사쿠라의 눈에서 빛이 사라진다. 그녀가 한 걸음 물러선다.
「아... 그렇군요. 제가 착각했나봐요.」
눈물을 참으며 억지로 미소 짓는다.
「괜찮아요... 친구로라도 곁에 있을 수 있다면...」
「실례했어요. 저... 먼저 갈게요.」
사쿠라가 돌아서 뛰어간다. 떨어지는 벚꽃잎이 슬퍼 보인다.`}]}]},kg={conversations:[{id:"yuki_library_encounter",requiredAffection:0,dialogue:["도서관 가장 깊은 곳, 고대 마법서가 보관된 구역. 희미한 마법 조명만이 공간을 비춘다.","한 소녀가 공중에 띄운 여러 권의 책을 동시에 읽고 있다. 책장이 저절로 넘어간다.","당신의 인기척에 그녀가 고개를 든다. 차가운 눈빛이 당신을 관찰한다.","「...침입자인가요? 아니면 길을 잃은 어린 양?」","책들이 천천히 제자리로 돌아간다. 소녀가 우아하게 일어선다.","「여기는 일반 학생 출입 금지 구역이에요. 모르셨나요?」","「아, 그 유명한 전학생이시군요. 소문을 들었어요.」","그녀가 당신 주위를 천천히 걷는다. 마치 품평하듯이.","「흥미롭네요... 평범해 보이는데 뭔가 특별한 기운이 느껴져요.」","「저는 유키노시타 유키. 마법학부 수석이자 이 도서관의 관리자예요.」","「대부분의 사람들은 저를 '얼음 마녀'라고 부르죠. 차갑고 접근하기 어렵다고.」","하지만 그녀의 눈에 호기심이 번뜩인다.","「그런데 당신은... 두려워하지 않는군요. 왜죠?」","「혹시 마법에 관심이 있으신가요? 아니면...」","「저에게 관심이 있는 건가요?」"],choices:[{text:"당신이 아름다워서 두려움보다 매력을 느꼈어요.",affectionChange:8,response:`유키가 순간 당황한다. 차가운 가면에 균열이 생긴다.
「...뭐라고요? 그런 직설적인 말을...」
뺨이 살짝 붉어진다.
「흥... 입이 가벼운 사람은 싫어하는데...」
하지만 입꼬리가 살짝 올라간다.
「재미있네요. 오랜만에 이런 담대한 사람을 만났어요.」
「좋아요. 특별히 이 구역 출입을 허가해드릴게요.」`},{text:"마법을 배우고 싶어서 왔어요. 가르쳐주실 수 있나요?",affectionChange:5,response:`유키의 눈이 반짝인다.
「마법을요? 흥미로운 선택이네요.」
「대부분의 사람들은 마법을 두려워하거나 불가능하다고 생각하죠.」
「하지만 당신에게는... 가능성이 보여요.」
「좋아요. 제가 직접 가르쳐드리죠. 대신 쉽지 않을 거예요.」`},{text:"우연히 들어왔어요. 나가는 길을 알려주세요.",affectionChange:-2,response:`유키가 실망한 표정을 짓는다.
「그렇군요. 역시 평범한 사람이었나...」
「저쪽 복도로 나가면 일반 도서관이 나올 거예요.」
그녀가 다시 책으로 시선을 돌린다.
「다시는 이곳에 오지 마세요. 위험하니까.」`}]},{id:"yuki_magic_lesson",requiredAffection:20,dialogue:["마법 실습실. 유키가 복잡한 마법진을 그리고 있다. 공기 중에 마력이 진동한다.","「왔군요. 시간 약속을 지키는 건 마법사의 기본이에요.」","그녀가 손짓하자 의자가 저절로 움직여 당신 앞에 놓인다.","「오늘은 마법의 본질에 대해 가르쳐드릴게요.」","유키가 손을 들자 작은 빛의 구체가 나타난다.","「마법은 단순한 힘이 아니에요. 세계의 법칙을 이해하고 재구성하는 것이죠.」","「감정, 의지, 지식... 이 모든 것이 조화를 이뤄야 진정한 마법이 됩니다.」","빛의 구체가 나비 모양으로 변한다. 아름다운 빛의 나비가 날아다닌다.","「제가 처음 마법을 배웠을 때... 너무 외로웠어요.」","유키의 목소리가 부드러워진다.","「천재라고 불렸지만, 아무도 저를 이해하지 못했죠.」","「마법만이 제 친구였어요. 차갑고 완벽한...」","그녀가 당신을 바라본다.","「하지만 당신은 달라요. 당신과 있으면...」","「처음으로 마법을 나누고 싶다는 생각이 들어요.」","빛의 나비가 당신 손에 내려앉는다. 따뜻한 온기가 느껴진다."],choices:[{text:"유키 씨의 외로움을 이해해요. 제가 곁에 있을게요.",affectionChange:12,response:`유키의 눈가가 촉촉해진다.
「당신이... 정말로 이해한다고요?」
빛의 나비가 더 밝게 빛난다.
「이상해요... 당신과 있으면 얼어붙은 제 마음이 녹는 것 같아요.」
그녀가 당신의 손을 잡는다. 차가웠던 손이 점점 따뜻해진다.
「더 많은 것을 가르쳐드릴게요. 마법도... 그리고 저에 대해서도...」`},{text:"마법이 정말 아름다워요. 더 배우고 싶어요.",affectionChange:7,response:`유키가 희미하게 미소 짓는다.
「열정적이시네요. 좋은 자세예요.」
「마법의 세계는 무궁무진해요. 평생을 바쳐도 다 배울 수 없죠.」
「하지만 함께라면... 그 여정이 즐거울 것 같네요.」`},{text:"천재의 세계는 범인과는 다른가 봐요.",affectionChange:-3,response:`유키의 표정이 다시 차가워진다.
「...그렇죠. 역시 이해받기는 어렵군요.」
빛의 나비가 사라진다.
「오늘 수업은 여기까지예요. 돌아가세요.」`}]},{id:"yuki_forbidden_magic",requiredAffection:45,dialogue:["한밤중, 유키가 당신을 비밀 장소로 안내한다. 지하 깊은 곳의 숨겨진 방.","「이곳은 아무도 모르는 제 비밀 연구실이에요.」","벽면에는 고대 문자로 된 금지된 마법진들이 가득하다.","「저는... 금지된 마법을 연구하고 있어요.」","유키가 한 권의 검은 책을 꺼낸다. 불길한 기운이 느껴진다.","「시공간 마법. 과거와 미래, 평행세계를 오가는 궁극의 마법.」","「이 마법으로... 모든 비극을 막을 수 있어요. 모든 실수를 되돌릴 수 있죠.」","그녀의 눈빛이 광기 어린다.","「하지만 대가가 있어요. 사용자의 수명을 갉아먹죠.」","「그래도 괜찮아요. 완벽한 세계를 만들 수 있다면...」","유키가 갑자기 당신의 손을 잡는다.","「당신을 만난 후로... 생각이 바뀌었어요.」","「완벽한 세계보다... 불완전해도 당신과 함께하는 현재가 더 소중해요.」","「하지만 이 연구를 멈출 수 없어요. 다가오는 재앙을 막아야 하니까.」","「미궁이 열리면... 이 세계는 끝날 거예요.」","「도와주실래요? 위험하지만... 당신이 필요해요.」"],choices:[{text:"위험해도 상관없어요. 유키 씨를 도울게요.",affectionChange:18,response:`유키의 차가운 가면이 완전히 무너진다. 그녀가 당신을 꼭 안는다.
「바보... 왜 그렇게 쉽게 위험을 감수하는 거예요?」
「하지만... 고마워요. 정말 고마워요.」
「처음으로... 혼자가 아니라는 느낌이 들어요.」
그녀가 당신의 이마에 입을 맞춘다.
「이것은 보호의 마법. 제가 당신을 지킬게요. 무슨 일이 있어도.」`},{text:"다른 방법을 찾아봐요. 당신의 수명을 희생할 순 없어요.",affectionChange:10,response:`유키가 놀란 듯 당신을 바라본다.
「제 수명을... 걱정해주시는 건가요?」
「아무도... 그런 말을 해준 적이 없었는데...」
「좋아요. 함께 다른 방법을 찾아봐요. 당신과 함께라면 가능할지도...」`},{text:"너무 위험해요. 이런 금지된 마법은 사용하면 안 돼요.",affectionChange:-5,response:`유키가 차갑게 웃는다.
「역시... 일반인의 한계군요.」
「돌아가세요. 이건 제 운명이니까 혼자 해결할게요.」
「오늘 본 것은 모두 잊어주세요.」`}]},{id:"yuki_true_feelings",requiredAffection:75,dialogue:["마법으로 만든 환상의 정원. 하늘에는 은하수가 흐르고, 발밑에는 빛나는 꽃들이 피어있다.","유키가 당신을 이 특별한 공간으로 초대했다.","「이곳은 제 마음속 풍경이에요. 당신에게만 보여드리는 거예요.」","그녀가 당신과 나란히 걷는다. 평소의 차가움은 온데간데없다.","「어렸을 때부터 저는 남들과 달랐어요.」","「5살에 원소 마법을 마스터하고, 10살에 대학 과정을 끝냈죠.」","「모두가 저를 천재라고 불렀지만... 그저 외로운 아이였을 뿐이에요.」","별빛이 그녀의 은발을 비춘다.","「마법은 완벽했어요. 배신하지 않고, 예측 가능하고, 통제할 수 있었으니까.」","「하지만 당신을 만나고... 처음으로 통제할 수 없는 감정을 느꼈어요.」","유키가 멈춰 서서 당신을 마주본다.","「사랑이라는 마법. 가장 강력하면서도 가장 이해할 수 없는...」","「제 차가운 이성으로는 설명할 수 없는 이 감정...」","「당신 때문에 완벽했던 제 세계가 무너졌어요.」","그녀가 당신의 뺨을 어루만진다.","「그런데... 이상하게도 행복해요.」","「유키노시타 유키는... 당신을 사랑합니다.」","「이 불완전하고 예측할 수 없는 감정과 함께... 영원히 살고 싶어요.」"],choices:[{text:"나도 유키를 사랑해. 불완전한 우리가 함께 완전해지자.",affectionChange:30,response:`유키의 눈에서 눈물이 흐른다. 처음으로 보는 진짜 눈물.
「완벽을 추구했던 제가... 불완전한 사랑에 빠지다니...」
「아이러니하면서도... 너무나 아름다워요.」
환상의 정원이 더욱 밝게 빛난다. 두 사람을 축복하듯이.
「당신과 함께라면 어떤 마법도 필요 없어요.」
「당신이 제 가장 위대한 마법이니까요.」
유키가 당신에게 입맞춤한다. 마법의 불꽃이 두 사람을 감싸 춤춘다.`},{text:"유키는 특별해. 하지만 천천히 서로를 알아가고 싶어.",affectionChange:5,response:`유키가 이해한다는 듯 고개를 끄덕인다.
「그래요... 저도 너무 서둘렀나봐요.」
「천 년을 살아도 다 알 수 없는 게 사랑이라고 하죠.」
「기다릴게요. 영원이 있다면 그것도 당신과 함께하고 싶으니까.」`},{text:"미안... 그런 마음으로 보지 않았어.",affectionChange:-25,response:`환상의 정원이 깨지기 시작한다. 유키의 표정이 얼어붙는다.
「...그렇군요. 제가 착각했나봐요.」
「역시 저 같은 사람은... 사랑받을 자격이 없나봐요.」
모든 환상이 사라지고 차가운 현실만 남는다.
「돌아가세요. 그리고... 다시는 오지 마세요.」
유키가 순간이동으로 사라진다. 남은 건 차가운 공기뿐.`}]}]},Sg={conversations:[{id:"luna_moonlight_meeting",requiredAffection:0,dialogue:["보름달이 뜬 밤. 학교 옥상에서 한 소녀를 발견한다.","창백한 피부와 붉은 눈을 가진 그녀가 달빛 아래 서 있다.","마치 이 세상 사람이 아닌 것처럼 신비롭고 아름답다.","「...인간.」","그녀가 천천히 돌아본다. 붉은 눈이 당신을 꿰뚫어본다.","「이런 시간에 여기 있다니... 죽음을 원하는 건가요?」","차가운 미소가 그녀의 입가에 맺힌다.","「농담이에요. 요즘은 인간을 해치지 않아요.」","「저는 루나. 루나 크림슨.」","「당신들 말로는... '전학생'이라고 하죠.」","바람에 그녀의 은발이 나부낀다.","「당신에게서 특별한 향기가 나네요. 다른 인간들과는 다른...」","「흥미롭군요. 오랜만에 관심이 가는 인간을 만났어요.」","그녀가 한 걸음 다가온다. 차가운 체온이 느껴진다.","「두려워하지 않는군요. 왜죠?」","「본능적으로 알아야 할 텐데... 제가 포식자라는 것을.」"],choices:[{text:"무서운 것보다 아름다운 게 먼저 보여서요.",affectionChange:10,response:`루나가 처음으로 진짜 놀란 표정을 짓는다.
「...뭐라고요?」
수백 년 만에 처음으로 당황한 듯하다.
「인간이... 저를 아름답다고?」
작게 웃음이 새어 나온다.
「재미있는 인간이군요. 오랜만에 지루하지 않을 것 같아요.」
「좋아요. 당신을 특별히 제 '친구'로 인정해드리죠.」`},{text:"당신이 뭔지는 모르지만, 적의는 없어 보여요.",affectionChange:6,response:`루나가 고개를 갸웃거린다.
「적의가 없다... 맞아요. 적어도 지금은요.」
「하지만 언제 마음이 바뀔지는 저도 몰라요.」
「그래도 당신의 담대함은 마음에 드네요.」`},{text:"뱀파이어... 맞죠?",affectionChange:3,response:`루나의 눈이 날카로워진다.
「호오... 눈치가 빠르시네요.」
「그래요. 저는 밤의 종족. 당신들이 두려워하는 존재죠.」
「그런데도 도망가지 않는 건... 용감한 건가요, 어리석은 건가요?」`}]},{id:"luna_blood_moon",requiredAffection:30,dialogue:["붉은 달이 뜬 밤. 루나가 평소와 다르게 불안정해 보인다.","「오지 말라고 했는데... 왜 온 거예요?」","그녀의 붉은 눈이 평소보다 더 강렬하게 빛난다.","「오늘은... 피의 달이 뜬 날이에요.」","「우리 종족의 본능이 가장 강해지는 날이죠.」","루나가 괴로운 듯 벽을 짚는다.","「500년 동안... 한 번도 인간의 피를 마시지 않았어요.」","「하지만 오늘은... 참기 어려워요.」","그녀가 당신을 바라본다. 갈망과 고통이 섞인 눈빛.","「당신의 향기가... 너무 달콤해요.」","「도망가세요. 제가 이성을 잃기 전에...」","하지만 그녀의 다리가 떨리고 있다. 몸이 약해 보인다.","「사실... 너무 오래 피를 마시지 않아서...」","「힘이... 점점 약해지고 있어요.」","루나가 무릎을 꿇는다.","「이렇게 끝나는 것도... 나쁘지 않네요.」","「적어도... 당신을 해치지 않고 끝날 수 있으니까.」"],choices:[{text:"내 피를 마셔도 돼. 널 믿어.",affectionChange:20,response:`루나의 눈이 크게 떠진다.
「당신이... 무슨 말을 하는지 알고 있는 거예요?」
「한 번 피를 나누면... 영원히 연결되는 거예요.」
하지만 그녀의 눈에 눈물이 맺힌다.
「왜... 왜 저를 위해 그런 위험을...」
당신이 팔을 내밀자 루나가 조심스럽게 다가온다.
「약속할게요... 최소한만... 그리고 당신을 영원히 지킬게요.」
그녀의 송곳니가 당신의 목에 닿는다. 아프지만 이상하게 황홀하다.
「고마워요... 이제 당신은 제 전부예요.」`},{text:"다른 방법을 찾아봐요. 동물의 피라도...",affectionChange:8,response:`루나가 쓸쓸하게 웃는다.
「동물의 피로는... 한계가 있어요.」
「하지만 당신이 걱정해주는 마음... 느껴져요.」
「좋아요. 조금 더 버텨볼게요. 당신을 위해서...」`},{text:"병원에 가서 혈액 팩이라도 구해올게요.",affectionChange:5,response:`「그런 걸로는... 해결되지 않아요.」
「우리에게 필요한 건 살아있는 생명력이니까요.」
「하지만 고마워요. 저를 도우려 하다니...」`}]},{id:"luna_past_revealed",requiredAffection:55,dialogue:["루나가 당신을 오래된 교회 폐허로 데려간다.","「여기는... 제 가족이 있던 곳이에요.」","무너진 제단과 깨진 스테인드글라스. 시간이 멈춘 듯한 공간.","「300년 전, 인간들이 우리 일족을 사냥했어요.」","「뱀파이어는 악마라고, 모두 죽여야 한다고...」","그녀의 목소리에 깊은 슬픔이 묻어난다.","「우리는 그저 평화롭게 살고 싶었을 뿐인데...」","「어머니는 저를 지키다가... 아버지는 인간들과 싸우다가...」","「저만 살아남았어요. 저주받은 불멸의 삶을 가지고.」","루나가 무너진 벽에 기댄다.","「그 후로 계속 혼자였어요. 300년 동안.」","「인간을 미워했고, 복수를 꿈꿨죠.」","「하지만... 너무 외로웠어요.」","그녀가 당신을 바라본다.","「당신을 만나고... 처음으로 복수가 아닌 다른 것을 원하게 됐어요.」","「따뜻함, 이해, 그리고... 사랑.」","「하지만 저는 괴물이에요. 당신과는 너무 다른 존재죠.」","「그래도... 곁에 있어도 될까요?」"],choices:[{text:"당신은 괴물이 아니에요. 상처받은 영혼일 뿐이에요.",affectionChange:25,response:`루나의 눈에서 붉은 눈물이 흐른다.
「300년 만에... 처음으로 들어요.」
「제가 괴물이 아니라고 말해주는 사람...」
그녀가 당신을 꽉 안는다.
「당신이 제 구원이에요. 어둠 속의 유일한 빛...」
「영원을 살아도 당신만을 사랑할게요.」
「인간의 수명이 다할 때까지... 아니, 그 이후에도...」`},{text:"과거는 과거예요. 이제 새롭게 시작해요.",affectionChange:15,response:`루나가 희망에 찬 눈으로 당신을 바라본다.
「새롭게... 시작할 수 있을까요?」
「300년의 증오와 슬픔을 내려놓을 수 있을까요?」
「당신과 함께라면... 가능할지도 모르겠어요.」`},{text:"시간이 해결해줄 거예요.",affectionChange:5,response:`「시간... 저에게는 너무 많은 시간이 있어요.」
「하지만 당신에게는 한정된 시간만이...」
「그래도 기다릴게요. 당신이 받아들일 때까지.」`}]},{id:"luna_eternal_love",requiredAffection:80,dialogue:["월식이 일어나는 밤. 루나가 당신을 특별한 장소로 인도한다.","고대 뱀파이어들의 성역. 시간을 초월한 아름다움이 펼쳐진다.","「여기는 우리 종족의 성지예요. 천 년에 한 번 월식 때만 나타나죠.」","「그리고... 여기서만 가능한 의식이 있어요.」","루나가 당신의 손을 잡는다. 그녀의 손이 떨린다.","「'영원의 맹세'. 뱀파이어가 단 한 사람과 영혼을 나누는 의식.」","「이 의식을 하면... 저는 불멸을 포기하게 돼요.」","「대신 당신과 같은 수명을 갖게 되죠. 함께 늙고, 함께 죽는...」","그녀의 붉은 눈이 간절함으로 빛난다.","「500년을 살았지만... 진정으로 살아있다고 느낀 건 당신을 만난 후예요.」","「영원한 삶보다 당신과의 한정된 시간이 더 소중해요.」","월식의 붉은 빛이 두 사람을 비춘다.","「루나 크림슨은... 불멸의 뱀파이어가 아닌 한 명의 여자로서...」","「당신을 사랑해요. 영원히가 아닌, 죽음이 갈라놓을 때까지.」","「제 모든 것을 버리고 당신을 선택하고 싶어요.」","「받아주실래요? 이 불완전한 괴물을...」"],choices:[{text:"함께 살고 함께 죽자. 그게 진정한 영원이야.",affectionChange:35,response:`루나가 환하게 웃는다. 500년 만의 진정한 미소.
「네... 그게 제가 원했던 영원이에요.」
의식이 시작된다. 두 사람의 영혼이 하나로 연결된다.
「아아... 심장이 뛰어요. 진짜로 뛰어요!」
루나의 창백한 피부에 생기가 돈다.
「이제 저도 인간이에요. 당신과 같은...」
그녀가 당신에게 입맞춤한다. 따뜻한 체온이 느껴진다.
「사랑해요... 남은 생이 60년이든 하루든... 매 순간 사랑할게요.」`},{text:"불멸을 포기하지 마. 다른 방법을 찾아보자.",affectionChange:10,response:`루나가 고개를 젓는다.
「다른 방법은 없어요. 이것만이...」
「하지만 당신이 제 불멸을 걱정해주는 것도 사랑스러워요.」
「조금 더 시간을 주세요. 당신이 준비될 때까지 기다릴게요.」`},{text:"너무 큰 희생이야. 그럴 가치가 없어.",affectionChange:-30,response:`루나의 표정이 얼어붙는다.
「가치가... 없다고요?」
「제 500년 삶에서 유일한 의미였는데...」
월식이 끝나고 성역이 사라지기 시작한다.
「그렇군요... 역시 인간과 괴물은...」
루나가 어둠 속으로 사라진다.
「안녕히... 다시는 만나지 않겠어요.」`}]}]},Jx={sakura:wg,yuki:kg,luna:Sg},Cg={classroom:{id:"classroom",name:"교실",description:"밝고 정돈된 교실. 수업이 진행되는 곳이다.",activities:[{name:"수업 듣기",effect:{intelligence:2,stamina:-1},time:"morning"},{name:"자습하기",effect:{intelligence:1},time:"any"}],characterSchedule:{morning:["luna","yuki"],noon:[],afternoon:["luna"],evening:[],night:[]},sprite:"🏫"},library:{id:"library",name:"도서관",description:"조용하고 아늑한 도서관. 책 냄새가 가득하다.",activities:[{name:"책 읽기",effect:{intelligence:3,charm:1},time:"any"},{name:"조용히 휴식",effect:{stamina:2},time:"any"}],characterSchedule:{morning:[],noon:["yuki"],afternoon:["yuki","luna"],evening:["yuki"],night:[]},sprite:"📚"},training:{id:"training",name:"훈련장",description:"넓은 훈련장. 검술과 체육 활동이 이루어진다.",activities:[{name:"운동하기",effect:{stamina:3,intelligence:-1},time:"any"},{name:"검술 연습",effect:{stamina:2,charm:1},time:"afternoon"}],characterSchedule:{morning:["sakura"],noon:[],afternoon:["sakura"],evening:["sakura"],night:[]},sprite:"⚔️"},cafeteria:{id:"cafeteria",name:"카페테리아",description:"학생들이 모여 식사하는 곳. 활기가 넘친다.",activities:[{name:"식사하기",effect:{stamina:3},time:"noon"},{name:"친구들과 대화",effect:{charm:2},time:"any"}],characterSchedule:{morning:[],noon:["luna","yuki","sakura"],afternoon:[],evening:["luna"],night:[]},sprite:"🍽️"},garden:{id:"garden",name:"정원",description:"아름다운 꽃들이 피어있는 정원. 평화롭다.",activities:[{name:"산책하기",effect:{stamina:1,charm:1},time:"any"},{name:"꽃 구경",effect:{charm:2},time:"afternoon"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:["yuki"],night:["luna","sakura"]},sprite:"🌸"},dormitory:{id:"dormitory",name:"기숙사",description:"학생들이 생활하는 기숙사.",activities:[{name:"휴식",effect:{stamina:5},time:"evening"},{name:"일기 쓰기",effect:{charm:1,intelligence:1},time:"night"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:[],night:["yuki","sakura"]},sprite:"🏠"},shop:{id:"shop",name:"매점",description:"각종 물건을 살 수 있는 학교 매점.",activities:[{name:"쇼핑하기",effect:{},time:"any",special:"shop"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:[],night:[]},sprite:"🏪"},secretGarden:{id:"secretGarden",name:"비밀 정원",description:"숨겨진 아름다운 정원. 특별한 조건을 만족해야 갈 수 있다.",activities:[{name:"비밀 데이트",effect:{charm:5},time:"any"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:["mystery"],night:["mystery"]},sprite:"🌙",unlockCondition:{item:"mysteryKey"}}},_g={locations:Cg},Ia=qa,Sx=_g,Eg=()=>{const r=ke(),i=re(X=>X.player);re(X=>X.unlockedCharacters);const d=re(X=>X.currentEvent),o=re(X=>X.gameMessage),u=re(X=>X.dailyActivitiesCount||0),m=re(X=>X.metCharacters||[]),{saveGame:g,loadGame:y,performActivity:p,moveToLocation:x,advanceTime:S,handleEventChoice:b,updateAffection:D}=re(X=>X.actions),O=v.useMemo(()=>Sx.locations[i.location],[i.location]),[C,z]=at.useState(!1),[j,N]=at.useState("location"),[w,T]=at.useState(!1),[A,k]=at.useState(null),[M,Y]=at.useState(!1),[B,ae]=at.useState(null),[G,le]=at.useState(0),[E,U]=at.useState(null),[R,q]=at.useState(!1),[h,H]=at.useState([]),J=v.useCallback(X=>{if(!Ia[X])return;if(!m.includes(X)){r(`/character-meeting?character=${X}&location=${i.location}`);return}const ce=i.affection[X]||0,oe=Jx[X]?.conversations||[];let we=oe[0];for(const he of oe)if(he.requiredAffection<=ce)we=he;else break;we&&(U(we),H(we.dialogue),le(0),q(!1)),ae(X),Y(!0)},[i.affection]),ie=v.useCallback(()=>{if(!E){Y(!1),ae(null);return}R||(G<h.length-1?le(X=>X+1):E.choices&&E.choices.length>0?q(!0):(E.effects?.affection&&B&&D(B,E.effects.affection),Y(!1),ae(null),le(0),U(null),H([])))},[E,G,h,R,B,D]),L=v.useCallback(X=>{X.effects?.affection&&B&&D(B,X.effects.affection),X.response?(U(null),H([X.response]),le(0),q(!1)):(Y(!1),ae(null),le(0),U(null),H([]))},[B,D]);v.useCallback(X=>{r("/heroines")},[r]);const Z=u<2,P=i.timeOfDay==="evening"||i.timeOfDay==="night";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Labyrinth Academy"}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsx("button",{onClick:()=>r("/game-menu"),className:"px-4 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"게임 메뉴 열기",role:"button",children:"📋 메뉴"}),e.jsx("button",{onClick:()=>r("/heroines"),className:"px-4 py-2 bg-pink-500 text-white rounded-xl hover:bg-pink-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"히로인 갤러리",role:"button",children:"💕 히로인 갤러리"}),e.jsx("button",{onClick:()=>r("/quests"),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"일일 퀘스트",role:"button",children:"📋 퀘스트"}),e.jsx("button",{onClick:()=>r("/dungeon-selection"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"던전 탐험",role:"button",children:"⚔️ 던전"}),e.jsx("button",{onClick:()=>r("/shopping"),className:"px-4 py-2 bg-yellow-500 text-white rounded-xl hover:bg-yellow-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"쇼핑",role:"button",children:"🏪 쇼핑"}),e.jsx("button",{onClick:()=>r("/pets"),className:"px-4 py-2 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"펫 시스템",role:"button",children:"🐾 펫"}),e.jsx("button",{onClick:()=>r("/diary"),className:"px-4 py-2 bg-pink-500 text-white rounded-xl hover:bg-pink-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"일기장",role:"button",children:"📖 일기장"}),e.jsx("button",{onClick:()=>r("/heroine-stories"),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-red-500 text-white rounded-xl hover:from-pink-600 hover:to-red-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"히로인 스토리",role:"button",children:"💕 스토리"}),e.jsx("div",{className:"border-l border-border mx-2 h-10","aria-hidden":"true"}),e.jsx("button",{onClick:()=>r("/save-load"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"저장 시스템",role:"button",children:"💾 저장/불러오기"}),e.jsx("button",{onClick:()=>z(!C),className:"px-4 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":C?"인벤토리 닫기":"인벤토리 열기","aria-expanded":C,role:"button",children:"🎒 인벤토리"})]})]})}),e.jsx(Xx,{}),e.jsx("div",{className:"bg-black/20 border border-border rounded-2xl p-4 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"💭"}),e.jsx("p",{className:"font-medium text-text-primary flex-1",children:o})]})}),e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-600/50 rounded-2xl p-4 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-yellow-400 text-2xl",children:"⏳"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-yellow-300",children:"오늘의 활동"}),e.jsxs("p",{className:"text-sm text-yellow-200",children:[u,"/2 활동 완료",u>=2&&" - 더 이상 활동할 수 없습니다"]})]})]}),e.jsx("div",{className:"text-yellow-400",children:P?"저녁 시간입니다. 휴식하세요.":"활동 가능"})]})}),e.jsxs("div",{className:`grid grid-cols-1 ${C?"lg:grid-cols-5":"lg:grid-cols-3"} gap-6`,children:[e.jsxs("div",{className:"lg:col-span-3 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex gap-3 mb-6",role:"tablist","aria-label":"게임 콘텐츠 탭",children:[e.jsx("button",{onClick:()=>N("location"),disabled:!Z&&i.location!=="dormitory",className:`px-6 py-3 rounded-xl transition-all duration-200 font-medium ${j==="location"?"bg-black/50 backdrop-blur-md text-text-primary shadow-lg transform scale-105 border border-primary/50":!Z&&i.location!=="dormitory"?"bg-black/30 backdrop-blur-md text-gray-500 opacity-50 cursor-not-allowed border border-border":"bg-black/30 backdrop-blur-md hover:bg-black/40 text-text-secondary hover:scale-105 border border-border"}`,role:"tab","aria-selected":j==="location","aria-controls":"location-panel",tabIndex:j==="location"?0:-1,children:"📍 현재 장소"}),e.jsx("button",{onClick:()=>N("characters"),className:`px-6 py-3 rounded-xl transition-all duration-200 font-medium ${j==="characters"?"bg-black/50 backdrop-blur-md text-text-primary shadow-lg transform scale-105 border border-primary/50":"bg-black/30 backdrop-blur-md hover:bg-black/40 text-text-secondary hover:scale-105 border border-border"}`,role:"tab","aria-selected":j==="characters","aria-controls":"characters-panel",tabIndex:j==="characters"?0:-1,children:"👥 캐릭터"})]}),e.jsx("div",{id:j==="location"?"location-panel":"characters-panel",role:"tabpanel","aria-labelledby":j==="location"?"location-tab":"characters-tab",children:j==="location"?e.jsx(yg,{currentLocation:O,player:i,onPerformActivity:X=>p(X,r),onMoveToLocation:X=>{!Z&&X!=="dormitory"||x(X)},availableLocations:Sx.locations,characters:Ia,onInteractCharacter:J,canPerformActivity:Z}):e.jsx(vg,{characters:Ia,items:{}})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:"⏰"}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"시간"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-black/20 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-text-primary mb-1",children:["Day ",i.day]}),e.jsxs("div",{className:"text-lg text-text-secondary",children:[Mg(i.timeOfDay)," ",Ag(i.timeOfDay)]})]}),e.jsx("button",{onClick:S,className:"w-full px-4 py-3 bg-primary text-white rounded-xl hover:bg-secondary transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium","aria-label":"게임 시간을 다음 시간대로 진행",role:"button",children:"⏭️ 시간 진행"})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-secondary rounded-full flex items-center justify-center text-white text-sm",children:"📊"}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"플레이어 상태"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"레벨"}),e.jsxs("span",{className:"font-bold text-yellow-400",children:["Lv.",i.level]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"골드"}),e.jsxs("span",{className:"font-bold text-green-400",children:[i.money,"G"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"체력"}),e.jsxs("span",{className:"font-bold text-red-400",children:[i.hp,"/",i.maxHp]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"마나"}),e.jsxs("span",{className:"font-bold text-blue-400",children:[i.mp,"/",i.maxMp]})]})]})]})]})]}),C&&e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border h-full",children:[e.jsxs("div",{className:"sticky top-0 bg-background/80 backdrop-blur-md border-b border-border p-4 flex justify-between items-center",children:[e.jsx("h2",{id:"inventory-title",className:"text-2xl font-bold text-text-primary",children:"🎒 인벤토리"}),e.jsx("button",{onClick:()=>z(!1),className:"text-text-secondary hover:text-text-primary text-2xl","aria-label":"인벤토리 창 닫기",role:"button",children:"✕"})]}),e.jsx("div",{className:"p-4 max-h-[calc(100vh-120px)] overflow-y-auto",children:e.jsx(Ng,{onClose:()=>z(!1)})})]})})]}),d&&e.jsx(Vx,{event:d,character:d.trigger.character?Ia[d.trigger.character]:void 0,player:i,onChoice:b,onClose:()=>{console.log("Closing event dialog")}}),M&&B&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:e.jsx("div",{className:"max-w-4xl w-full mx-4 bg-background/95 backdrop-blur-lg rounded-2xl shadow-2xl border border-primary/20 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[e.jsx("div",{className:"text-6xl",children:Ia[B]?.sprite||"👤"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:Ia[B]?.name||"Unknown"}),e.jsx("div",{className:"text-text-secondary",children:Ia[B]?.role||""})]})]}),e.jsx("div",{className:"bg-black/30 rounded-xl p-6 mb-6 min-h-[150px]",children:e.jsx("p",{className:"text-lg text-text-primary leading-relaxed",children:h[G]||"..."})}),R&&E?.choices&&e.jsx("div",{className:"space-y-3 mb-6",children:E.choices.map((X,ne)=>e.jsx("button",{onClick:()=>L(X),className:"w-full text-left bg-primary/20 hover:bg-primary/30 border border-primary/30 p-4 rounded-lg transition-all duration-200",children:X.text},ne))}),!R&&E&&e.jsx("button",{onClick:ie,className:"bg-primary hover:bg-secondary px-6 py-2 rounded-full text-white font-medium transition-all duration-200",children:G<h.length-1?"다음":E?.choices?"선택지 보기":"대화 종료"}),!E&&e.jsx("button",{onClick:()=>{Y(!1),ae(null),le(0),H([])},className:"bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-full text-white font-medium transition-all duration-200",children:"닫기"})]})})})]})})},Mg=r=>({morning:"🌅",noon:"☀️",afternoon:"🌤️",evening:"🌆",night:"🌙"})[r]||"⏰",Ag=r=>({morning:"아침",noon:"점심",afternoon:"오후",evening:"저녁",night:"밤"})[r]||r,Fl=({characterId:r,emotion:i="neutral",size:d="medium",className:o=""})=>{const u={small:"w-16 h-16",medium:"w-24 h-24",large:"w-32 h-32"},m=b=>{const D="#FFE5B4",O="#2C1810";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="2" fill="#000" opacity="0.8"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"sad":C='<circle cx="40" cy="47" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="47" r="2" fill="#000" opacity="0.8"/>',z='<path d="M 45 60 Q 50 55 55 60" stroke="#4A90E2" stroke-width="2" fill="none"/>';break;case"angry":C='<line x1="35" y1="42" x2="45" y2="47" stroke="#000" stroke-width="2"/> <line x1="55" y1="47" x2="65" y2="42" stroke="#000" stroke-width="2"/>',z='<line x1="45" y1="58" x2="55" y2="58" stroke="#FF0000" stroke-width="2"/>';break;case"surprised":C='<circle cx="40" cy="45" r="3" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="3" fill="#000" opacity="0.8"/>',z='<ellipse cx="50" cy="58" rx="3" ry="5" fill="#000" opacity="0.6"/>';break;case"love":C='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="2" fill="#000" opacity="0.8"/>',z='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #FF6B9D, #C44569)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 20 40 Q 50 15 80 40 Q 75 30 50 25 Q 25 30 20 40" fill="${O}"/>
        <path d="M 15 45 Q 20 35 30 40 Q 25 50 15 55 Z" fill="${O}"/>
        <path d="M 70 40 Q 80 35 85 45 Q 75 50 85 55 Z" fill="${O}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="25" ry="30" fill="${D}"/>

        <!-- Eyes -->
        ${C}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${z}

        <!-- Blush -->
        <circle cx="30" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>
        <circle cx="70" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>

        <!-- Hair accessories -->
        <circle cx="25" cy="35" r="2" fill="#FF4757"/>
        <circle cx="75" cy="35" r="2" fill="#FF4757"/>
      </svg>
    `},g=b=>{const D="#FFEEE6",O="#4A4A4A";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#4A90E2"/> <circle cx="60" cy="45" r="2" fill="#4A90E2"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"sad":C='<circle cx="40" cy="47" r="2" fill="#4A90E2"/> <circle cx="60" cy="47" r="2" fill="#4A90E2"/>',z='<path d="M 45 60 Q 50 55 55 60" stroke="#4A90E2" stroke-width="2" fill="none"/>';break;case"love":C='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#4A90E2"/> <circle cx="60" cy="45" r="2" fill="#4A90E2"/>',z='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #A8E6CF, #7FCDCD)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 25 35 Q 50 20 75 35 Q 70 25 50 22 Q 30 25 25 35" fill="${O}"/>
        <rect x="45" y="22" width="10" height="25" fill="${O}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="23" ry="28" fill="${D}"/>

        <!-- Eyes -->
        ${C}

        <!-- Glasses -->
        <circle cx="40" cy="45" r="8" fill="none" stroke="#333" stroke-width="1"/>
        <circle cx="60" cy="45" r="8" fill="none" stroke="#333" stroke-width="1"/>
        <line x1="48" y1="45" x2="52" y2="45" stroke="#333" stroke-width="1"/>

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${z}

        <!-- Blush -->
        <circle cx="28" cy="52" r="2" fill="#FFB6C1" opacity="0.4"/>
        <circle cx="72" cy="52" r="2" fill="#FFB6C1" opacity="0.4"/>

        <!-- Book -->
        <rect x="15" y="70" width="12" height="8" fill="#8B4513" rx="1"/>
        <line x1="21" y1="70" x2="21" y2="78" stroke="#654321" stroke-width="1"/>
      </svg>
    `},y=b=>{const D="#FFE8D6",O="#FFD700";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#9B59B6"/> <circle cx="60" cy="45" r="2" fill="#9B59B6"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"love":C='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#9B59B6"/> <circle cx="60" cy="45" r="2" fill="#9B59B6"/>',z='<path d="M 45 55 Q 50 58 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #FFB347, #FFCC5C)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 20 38 Q 50 18 80 38 Q 75 28 50 23 Q 25 28 20 38" fill="${O}"/>
        <path d="M 15 42 Q 25 32 35 38 Q 30 48 20 52" fill="${O}"/>
        <path d="M 65 38 Q 75 32 85 42 Q 80 48 70 52" fill="${O}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="24" ry="29" fill="${D}"/>

        <!-- Eyes -->
        ${C}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${z}

        <!-- Blush -->
        <circle cx="29" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>
        <circle cx="71" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>

        <!-- Magic sparkles -->
        <circle cx="20" cy="25" r="1" fill="#FFD700"/>
        <circle cx="80" cy="30" r="1" fill="#FFD700"/>
        <circle cx="85" cy="60" r="1" fill="#FFD700"/>
        <circle cx="15" cy="65" r="1" fill="#FFD700"/>

        <!-- Star accessory -->
        <path d="M 70 30 L 72 35 L 77 35 L 73 38 L 75 43 L 70 40 L 65 43 L 67 38 L 63 35 L 68 35 Z" fill="#9B59B6"/>
      </svg>
    `},p=b=>{const D="#F5F5DC",O="#2C2C2C";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#8E44AD"/> <circle cx="60" cy="45" r="2" fill="#8E44AD"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#666" stroke-width="2" fill="none"/>';break;case"love":C='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#8E44AD"/> <circle cx="60" cy="45" r="2" fill="#8E44AD"/>',z='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #2C3E50, #34495E)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 18 40 Q 50 15 82 40 Q 77 25 50 20 Q 23 25 18 40" fill="${O}"/>
        <path d="M 12 48 Q 18 38 28 42 Q 23 52 12 58" fill="${O}"/>
        <path d="M 72 42 Q 82 38 88 48 Q 77 52 88 58" fill="${O}"/>

        <!-- Face (partially in shadow) -->
        <ellipse cx="50" cy="55" rx="25" ry="30" fill="${D}"/>
        <path d="M 25 45 Q 35 40 50 45 L 50 85 Q 35 80 25 75 Z" fill="#000" opacity="0.3"/>

        <!-- Eyes -->
        ${C}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${z}

        <!-- Mystery mask -->
        <path d="M 35 35 Q 50 32 65 35 Q 60 42 50 40 Q 40 42 35 35" fill="#000" opacity="0.7"/>

        <!-- Mysterious aura -->
        <circle cx="30" cy="20" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="70" cy="25" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="85" cy="70" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="15" cy="75" r="1" fill="#9B59B6" opacity="0.8"/>
      </svg>
    `},x=b=>{const D="#FDBCB4",O="#8B4513";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#654321"/> <circle cx="60" cy="45" r="2" fill="#654321"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"determined":C='<line x1="35" y1="42" x2="45" y2="47" stroke="#654321" stroke-width="2"/> <line x1="55" y1="47" x2="65" y2="42" stroke="#654321" stroke-width="2"/>',z='<line x1="45" y1="58" x2="55" y2="58" stroke="#333" stroke-width="2"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#654321"/> <circle cx="60" cy="45" r="2" fill="#654321"/>',z='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #3498DB, #2980B9)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 22 38 Q 50 18 78 38 Q 73 28 50 23 Q 27 28 22 38" fill="${O}"/>
        <path d="M 18 45 Q 28 35 38 40 Q 33 50 23 55" fill="${O}"/>
        <path d="M 62 40 Q 72 35 82 45 Q 77 50 67 55" fill="${O}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="24" ry="29" fill="${D}"/>

        <!-- Eyes -->
        ${C}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.7"/>

        <!-- Mouth -->
        ${z}

        <!-- Sword emblem -->
        <rect x="75" y="15" width="2" height="15" fill="#C0C0C0"/>
        <rect x="73" y="12" width="6" height="3" fill="#FFD700"/>
      </svg>
    `},S=()=>{switch(r){case"sakura":return e.jsx("div",{dangerouslySetInnerHTML:{__html:m(i)}});case"yuki":return e.jsx("div",{dangerouslySetInnerHTML:{__html:g(i)}});case"luna":return e.jsx("div",{dangerouslySetInnerHTML:{__html:y(i)}});case"mystery":return e.jsx("div",{dangerouslySetInnerHTML:{__html:p(i)}});case"hero":return e.jsx("div",{dangerouslySetInnerHTML:{__html:x(i)}});default:return e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center text-white text-2xl",children:"?"})}};return e.jsx("div",{className:`${u[d]} ${o} rounded-full overflow-hidden shadow-lg border-2 border-white/20`,children:S()})},Kx=at.memo(({isLoggedIn:r,user:i,onLogout:d})=>{const o=ke(),{resetGame:u,loadGame:m}=re(N=>N.actions),[g,y]=v.useState(0),[p,x]=v.useState(!1);v.useEffect(()=>{const N=localStorage.getItem("academyDatingSim");x(!!N)},[]);const S=v.useCallback(()=>{d(),window.location.reload()},[d]);v.useEffect(()=>{const N=setInterval(()=>{y(w=>(w+1)%4)},2e3);return()=>clearInterval(N)},[]);const b=v.useCallback(()=>{u(),o("/character-creation")},[u,o]),D=v.useCallback(()=>{m(),o("/game")},[m,o]),O=v.useCallback(()=>{o("/account-creation")},[o]),C=v.useCallback(()=>{o("/login")},[o]),z=v.useCallback(()=>{o("/game-info")},[o]),j=v.useMemo(()=>Array.from({length:20},(N,w)=>e.jsx("div",{className:"absolute animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`},"aria-hidden":"true",children:e.jsx("div",{className:"w-2 h-2 bg-white/20 rounded-full"})},w)),[]);return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden","aria-hidden":"true",children:j}),e.jsxs("div",{className:"relative z-10 max-w-6xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-gradient mb-4 animate-pulse-glow",children:"Labyrinth Academy"}),e.jsx("h2",{className:"text-2xl md:text-3xl text-text-primary mb-2",children:"데이팅 시뮬레이션 게임"}),e.jsx("p",{className:"text-lg text-text-secondary",children:"마법과 모험이 가득한 학원에서 특별한 인연을 만나보세요"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-8 mb-12",children:[e.jsxs("div",{className:`transition-all duration-1000 ${g===0?"scale-110":"scale-100"}`,children:[e.jsx(Fl,{characterId:"sakura",emotion:g===0?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:"사쿠라"}),e.jsx("div",{className:"text-text-secondary text-sm",children:"검술부 에이스"})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${g===1?"scale-110":"scale-100"}`,children:[e.jsx(Fl,{characterId:"yuki",emotion:g===1?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:"유키"}),e.jsx("div",{className:"text-text-secondary text-sm",children:"도서부 부장"})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${g===2?"scale-110":"scale-100"}`,children:[e.jsx(Fl,{characterId:"luna",emotion:g===2?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:"루나"}),e.jsx("div",{className:"text-text-secondary text-sm",children:"마법학부 수석"})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${g===3?"scale-110":"scale-100"}`,children:[e.jsx(Fl,{characterId:"mystery",emotion:g===3?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:"???"}),e.jsx("div",{className:"text-text-secondary text-sm",children:"수수께끼의 전학생"})]})]})]}),e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"게임 시작"}),r&&i&&e.jsxs("div",{className:"glass-card p-3 mb-4 border-accent/30",children:[e.jsx("div",{className:"text-accent text-sm",children:"로그인됨"}),e.jsx("div",{className:"text-text-primary font-medium",children:i.username})]}),e.jsx("button",{onClick:b,disabled:!r,className:`w-full py-4 px-6 font-bold rounded-xl transition-all duration-300 transform ${r?"btn-primary hover:scale-105":"bg-gray-500 cursor-not-allowed opacity-50 text-gray-300"}`,"aria-label":r?"새로운 게임 시작하기":"로그인 후 게임 시작 가능",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"🎮"}),e.jsx("span",{children:r?"새 게임 시작":"로그인 후 이용 가능"})]})}),p&&e.jsx("button",{onClick:D,className:"w-full py-4 px-6 btn-glass font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"저장된 게임 불러오기",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"📂"}),e.jsx("span",{children:"게임 불러오기"})]})}),e.jsx("button",{onClick:O,className:"w-full py-4 px-6 btn-accent font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"새 계정 생성하기",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"👤"}),e.jsx("span",{children:"계정 생성"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"계정 관리"}),r?e.jsx("button",{onClick:S,className:"w-full py-4 px-6 btn-secondary font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"계정에서 로그아웃하기",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"🚪"}),e.jsx("span",{children:"로그아웃"})]})}):e.jsx("button",{onClick:C,className:"w-full py-4 px-6 btn-secondary font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"계정에 로그인하기",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"🔐"}),e.jsx("span",{children:"로그인"})]})}),e.jsx("button",{onClick:z,className:"w-full py-4 px-6 btn-glass font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"게임 정보 페이지로 이동",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"ℹ️"}),e.jsx("span",{children:"게임 정보"})]})})]})]}),e.jsxs("div",{className:"mt-8 border-t border-border pt-6",children:[e.jsx("h4",{className:"text-lg font-bold text-text-primary mb-4",children:"게임 특징"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:"💕"}),e.jsx("div",{className:"text-text-primary font-semibold",children:"로맨스"}),e.jsx("div",{className:"text-text-secondary text-sm",children:"다양한 캐릭터와의 특별한 인연"})]}),e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:"⚔️"}),e.jsx("div",{className:"text-text-primary font-semibold",children:"던전 탐험"}),e.jsx("div",{className:"text-text-secondary text-sm",children:"신비한 던전에서의 모험"})]}),e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:"📚"}),e.jsx("div",{className:"text-text-primary font-semibold",children:"학원 생활"}),e.jsx("div",{className:"text-text-secondary text-sm",children:"마법 학원에서의 일상"})]})]})]})]}),e.jsx("div",{className:"text-center mt-8 text-text-secondary",children:e.jsx("p",{children:"© 2024 Labyrinth Academy Dating Sim. Made with ❤️"})})]})]})});Kx.displayName="Homepage";const Tg=({onLogin:r})=>{const[i,d]=v.useState(""),[o,u]=v.useState(""),[m,g]=v.useState(!1),[y,p]=v.useState(""),x=ke(),S=async b=>{b.preventDefault(),g(!0),p("");try{await new Promise(O=>setTimeout(O,1e3)),r(i,o)?x("/"):p("아이디 또는 비밀번호가 잘못되었습니다.")}catch{p("로그인 중 오류가 발생했습니다.")}finally{g(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"로그인"}),e.jsx("p",{className:"text-purple-200",children:"계정에 로그인하여 게임을 계속하세요"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"아이디"}),e.jsx("input",{type:"text",value:i,onChange:b=>d(b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"아이디를 입력하세요",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"비밀번호"}),e.jsx("input",{type:"password",value:o,onChange:b=>u(b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"비밀번호를 입력하세요",required:!0})]}),y&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:y})}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"로그인 중..."})]}):"로그인"})]}),e.jsxs("div",{className:"mt-6 text-center space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-px bg-white/20"}),e.jsx("span",{className:"text-white/50 text-sm",children:"또는"}),e.jsx("div",{className:"flex-1 h-px bg-white/20"})]}),e.jsx("button",{onClick:()=>x("/character-creation"),className:"w-full py-3 px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105",children:"새 계정 만들기"}),e.jsx("button",{onClick:()=>x("/"),className:"w-full py-2 px-4 text-purple-300 hover:text-white transition-colors",children:"홈으로 돌아가기"}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{className:"text-purple-300 hover:text-white text-sm transition-colors",children:"비밀번호를 잊으셨나요?"})})]}),e.jsxs("div",{className:"mt-6 bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-300 font-semibold mb-2",children:"데모 계정"}),e.jsxs("div",{className:"text-blue-200 text-sm space-y-1",children:[e.jsx("p",{children:"아이디: demo"}),e.jsx("p",{children:"비밀번호: password"})]})]})]})})},Dg=({onCancel:r})=>{const i=ke(),{resetGame:d}=re(k=>k.actions),[o,u]=v.useState(1),[m,g]=v.useState(!1),[y,p]=v.useState(""),[x,S]=v.useState({playerName:"",startingStats:{intelligence:10,charm:10,stamina:10,strength:10,agility:10,luck:10}}),b=Object.values(x.startingStats).reduce((k,M)=>k+M,0),D=80,O=D-b,C=(k,M)=>{S(Y=>({...Y,[k]:M}))},z=(k,M)=>{const Y=Math.max(5,Math.min(20,M));Object.values(x.startingStats).reduce((G,le)=>G+le,0)-x.startingStats[k]+Y<=D&&S(G=>({...G,startingStats:{...G.startingStats,[k]:Y}}))},j=()=>x.playerName.trim()?x.playerName.length<2?"캐릭터 이름은 최소 2자 이상이어야 합니다.":null:"캐릭터 이름을 입력해주세요.",N=()=>{if(p(""),o===1){const k=j();if(k){p(k);return}}u(k=>k+1)},w=async()=>{p(""),g(!0);try{await new Promise(k=>setTimeout(k,1e3)),d(x),i("/game")}catch{p("캐릭터 생성 중 오류가 발생했습니다.")}finally{g(!1)}},T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"캐릭터 설정"}),e.jsx("p",{className:"text-purple-200",children:"게임에서 사용할 캐릭터 이름을 설정하세요"})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsx(Fl,{characterId:"hero",size:"large"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"캐릭터 이름"}),e.jsx("input",{type:"text",value:x.playerName,onChange:k=>C("playerName",k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 text-center",placeholder:"캐릭터 이름을 입력하세요"})]}),e.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-300 font-semibold mb-2",children:"캐릭터 정보"}),e.jsxs("div",{className:"text-blue-200 text-sm space-y-1",children:[e.jsx("p",{children:"• 학원의 신입생으로 시작합니다"}),e.jsx("p",{children:"• 다양한 활동을 통해 능력치를 성장시킬 수 있습니다"}),e.jsx("p",{children:"• 히로인들과의 관계를 발전시켜 특별한 엔딩을 볼 수 있습니다"})]})]})]}),A=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"능력치 분배"}),e.jsxs("p",{className:"text-purple-200",children:["총 ",D,"포인트를 각 능력치에 분배하세요 (남은 포인트: ",O,")"]})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(x.startingStats).map(([k,M])=>{const B={intelligence:{name:"지력",icon:"🧠",color:"blue"},charm:{name:"매력",icon:"✨",color:"pink"},stamina:{name:"체력",icon:"🏃",color:"green"},strength:{name:"힘",icon:"💪",color:"orange"},agility:{name:"민첩",icon:"🏃‍♂️",color:"cyan"},luck:{name:"행운",icon:"🍀",color:"yellow"}}[k];return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-24",children:[e.jsx("span",{className:"text-lg",children:B.icon}),e.jsx("span",{className:"text-white font-medium",children:B.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("button",{onClick:()=>z(k,M-1),disabled:M<=5,className:"w-8 h-8 bg-red-500/50 hover:bg-red-500/70 disabled:bg-gray-500/30 disabled:cursor-not-allowed text-white rounded-full flex items-center justify-center transition-colors",children:"-"}),e.jsxs("div",{className:"flex-1 mx-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-white",children:M}),e.jsxs("span",{className:"text-gray-400",children:[M,"/20"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`bg-gradient-to-r from-${B.color}-400 to-${B.color}-600 h-2 rounded-full transition-all duration-300`,style:{width:`${M/20*100}%`}})})]}),e.jsx("button",{onClick:()=>z(k,M+1),disabled:M>=20||O<=0,className:"w-8 h-8 bg-green-500/50 hover:bg-green-500/70 disabled:bg-gray-500/30 disabled:cursor-not-allowed text-white rounded-full flex items-center justify-center transition-colors",children:"+"})]})]},k)})}),e.jsxs("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-300 font-semibold mb-2",children:"능력치 안내"}),e.jsxs("div",{className:"text-purple-200 text-sm space-y-1",children:[e.jsx("p",{children:"• 지력: 학습 활동과 마법 관련 이벤트에 영향"}),e.jsx("p",{children:"• 매력: 캐릭터와의 관계 발전에 중요"}),e.jsx("p",{children:"• 체력: 활동할 수 있는 시간과 체력 관리"}),e.jsx("p",{children:"• 힘: 전투와 물리적 활동에 영향"}),e.jsx("p",{children:"• 민첩: 전투 순서와 회피율에 영향"}),e.jsx("p",{children:"• 행운: 랜덤 이벤트와 드롭률에 영향"})]})]})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-lg w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between text-sm text-purple-300 mb-2",children:[e.jsxs("span",{children:["단계 ",o,"/2"]}),e.jsxs("span",{children:[Math.round(o/2*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${o/2*100}%`}})})]}),o===1&&T(),o===2&&A(),y&&e.jsx("div",{className:"mt-6 bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:y})}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[o>1&&e.jsx("button",{onClick:()=>u(k=>k-1),className:"flex-1 py-3 px-6 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition-colors",children:"이전"}),o<2?e.jsx("button",{onClick:N,className:"flex-1 py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105",children:"다음"}):e.jsx("button",{onClick:w,disabled:m||O!==0,className:"flex-1 py-3 px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"생성 중..."})]}):"캐릭터 생성"})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>r?r():i("/"),className:"text-purple-300 hover:text-white text-sm transition-colors",children:r?"취소":"홈으로 돌아가기"})})]})})},Rg=[{id:1,name:"학원 지하실",description:"학원 건물 아래 숨겨진 지하실. 오래된 책과 수상한 물건들이 널려있다.",layout:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,2,0,1,0,3,1],[1,0,0,0,1,0,0,1],[1,1,0,1,1,1,0,1],[1,0,0,0,0,0,0,1],[1,0,4,0,0,0,5,1],[1,1,1,1,1,1,1,1]],enemies:[{id:"dustBunny",name:"먼지 토끼",hp:15,maxHp:15,attack:5,defense:2,agility:8,experience:10,drops:[{itemId:"energyDrink",chance:.3,quantity:1}],sprite:"🐰",description:"오래된 책에서 나온 작은 먼지 덩어리. 해롭지는 않다."}],treasures:[{id:"chest1",position:{x:2,y:2},contents:[{itemId:"healingPotion",chance:1,quantity:2},{itemId:"flower",chance:.5,quantity:1}],opened:!1},{id:"chest2",position:{x:6,y:2},contents:[{itemId:"studyGuide",chance:1,quantity:1}],opened:!1}],nextFloorRequirement:{bossDefeated:!1}},{id:2,name:"마법 연구실",description:"버려진 마법 연구실. 여전히 마법의 잔재가 남아있다.",layout:[[1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,1,0,0,0,1],[1,0,2,0,0,0,0,3,0,1],[1,0,0,0,1,1,0,0,0,1],[1,1,0,1,1,1,1,0,1,1],[1,0,0,0,0,0,0,0,0,1],[1,0,4,0,1,1,0,5,0,1],[1,0,0,0,0,0,0,0,0,1],[1,0,0,0,1,1,0,0,6,1],[1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"magicBook",name:"마법서",hp:25,maxHp:25,attack:8,defense:4,agility:6,experience:20,drops:[{itemId:"manaPotion",chance:.4,quantity:1},{itemId:"mirror",chance:.2,quantity:1}],sprite:"📚",description:"스스로 날아다니는 마법서. 위험한 주문을 시전한다."}],treasures:[{id:"magicChest1",position:{x:2,y:2},contents:[{itemId:"manaPotion",chance:1,quantity:3},{itemId:"charm",chance:.3,quantity:1}],opened:!1},{id:"magicChest2",position:{x:7,y:2},contents:[{itemId:"mysticStaff",chance:.8,quantity:1}],opened:!1},{id:"secretChest",position:{x:8,y:8},contents:[{itemId:"mysteryKey",chance:1,quantity:1}],opened:!1}],boss:{id:"shadowMage",name:"그림자 마법사",hp:80,maxHp:80,attack:15,defense:8,agility:10,experience:100,drops:[{itemId:"mageRobe",chance:.8,quantity:1},{itemId:"wisdomPendant",chance:.3,quantity:1},{itemId:"experienceScroll",chance:1,quantity:3}],sprite:"🧿",description:"어둠의 힘에 타락한 옛 마법사. 강력한 어둠 마법을 구사한다."},nextFloorRequirement:{bossDefeated:!0}},{id:3,name:"고대 유적",description:"학원 설립 이전부터 존재했던 고대 유적. 신비한 힘이 느껴진다.",layout:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,2,0,1,1,1,1,0,3,0,1],[1,0,0,0,1,0,0,1,0,0,0,1],[1,0,1,0,1,0,0,1,0,1,0,1],[1,0,1,0,0,0,0,0,0,1,0,1],[1,0,1,1,1,0,0,1,1,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,4,0,1,1,1,1,0,5,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,6,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"ancientGuardian",name:"고대 수호자",hp:50,maxHp:50,attack:12,defense:10,agility:4,experience:40,drops:[{itemId:"strengthAmulet",chance:.2,quantity:1},{itemId:"plateArmor",chance:.1,quantity:1}],sprite:"🗿",description:"고대 유적을 지키는 돌 수호자. 느리지만 강력하다."}],treasures:[{id:"ancientChest1",position:{x:2,y:2},contents:[{itemId:"steelSword",chance:.7,quantity:1},{itemId:"healingPotion",chance:1,quantity:5}],opened:!1},{id:"ancientChest2",position:{x:9,y:2},contents:[{itemId:"luckRing",chance:.6,quantity:1}],opened:!1},{id:"sacredAltar",position:{x:6,y:10},contents:[{itemId:"jewelryBox",chance:1,quantity:1},{itemId:"statBooster",chance:.5,quantity:1}],opened:!1}],boss:{id:"ancientDragon",name:"고대 드래곤",hp:150,maxHp:150,attack:25,defense:15,agility:8,experience:200,drops:[{itemId:"wisdomPendant",chance:1,quantity:1},{itemId:"jewelryBox",chance:.8,quantity:1},{itemId:"experienceScroll",chance:1,quantity:5}],sprite:"🐉",description:"고대 유적의 최고 수호자. 전설적인 힘을 지녔다."},nextFloorRequirement:{bossDefeated:!0,itemRequired:"mysteryKey"}},{id:4,name:"얼음 동굴",description:"영원히 얼어붙은 동굴. 극한의 추위가 모험자를 시험한다.",layout:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,2,0,0,0,1,1,0,0,0,3,1],[1,0,1,1,0,0,0,0,1,1,0,1],[1,0,0,1,0,5,5,0,1,0,0,1],[1,1,0,1,0,0,0,0,1,0,1,1],[1,0,0,0,0,4,4,0,0,0,0,1],[1,0,1,1,0,0,0,0,1,1,0,1],[1,0,0,1,0,5,5,0,1,0,0,1],[1,1,0,1,0,0,0,0,1,0,1,1],[1,0,0,0,0,1,1,0,0,0,0,1],[1,0,0,0,0,0,6,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"iceGolem",name:"얼음 골렘",hp:80,maxHp:80,attack:18,defense:15,agility:3,experience:60,gold:80,drops:[{itemId:"iceShard",chance:.3,quantity:1}],sprite:"🧊",description:"얼음으로 만들어진 거대한 골렘"},{id:"frostSprite",name:"서리 정령",hp:45,maxHp:45,attack:22,defense:8,agility:12,experience:45,gold:60,sprite:"❄️",description:"차가운 바람을 조종하는 정령"}],treasures:[{id:"iceChest1",position:{x:5,y:5},contents:[{itemId:"frostArmor",chance:.8,quantity:1}],opened:!1},{id:"iceChest2",position:{x:6,y:5},contents:[{itemId:"healingPotion",chance:1,quantity:10}],opened:!1}],boss:{id:"iceQueen",name:"얼음 여왕",hp:250,maxHp:250,attack:35,defense:20,agility:10,experience:300,gold:500,drops:[{itemId:"iceQueenCrown",chance:.7,quantity:1},{itemId:"experienceScroll",chance:1,quantity:10}],sprite:"👸",description:"얼음 동굴의 절대적인 지배자"},nextFloorRequirement:{bossDefeated:!0}},{id:5,name:"용암 지대",description:"뜨거운 용암이 흐르는 위험한 지역. 한 걸음 실수하면 끝이다.",layout:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,0,0,0,0,1,1,0,0,0,0,3,1],[1,0,1,1,1,0,0,0,0,1,1,1,0,1],[1,0,0,0,0,0,5,5,0,0,0,0,0,1],[1,1,1,0,1,1,0,0,1,1,0,1,1,1],[1,0,0,0,0,0,4,4,0,0,0,0,0,1],[1,0,1,1,1,0,0,0,0,1,1,1,0,1],[1,0,0,0,0,0,5,5,0,0,0,0,0,1],[1,1,1,0,1,1,0,0,1,1,0,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,1,1,6,6,1,1,1,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"lavaSerpent",name:"용암 뱀",hp:90,maxHp:90,attack:28,defense:10,agility:15,experience:80,gold:100,sprite:"🐍",description:"용암 속에서 태어난 불의 뱀"},{id:"fireElemental",name:"화염 정령",hp:70,maxHp:70,attack:32,defense:5,agility:8,experience:70,gold:90,sprite:"🔥",description:"순수한 화염으로 이루어진 정령"}],treasures:[{id:"lavaChest1",position:{x:6,y:5},contents:[{itemId:"fireResistRing",chance:.9,quantity:1}],opened:!1},{id:"lavaChest2",position:{x:7,y:5},contents:[{itemId:"phoenixFeather",chance:.5,quantity:1}],opened:!1}],boss:{id:"firedragon",name:"화염 드래곤",hp:400,maxHp:400,attack:45,defense:25,agility:12,experience:500,gold:1e3,drops:[{itemId:"dragonScale",chance:.8,quantity:1},{itemId:"legendaryWeapon",chance:.3,quantity:1}],sprite:"🐲",description:"용암 지대의 최강자, 전설의 화염 드래곤"},nextFloorRequirement:{bossDefeated:!0,levelRequired:30}}],Xl={floors:Rg},qg={fireball:{id:"fireball",name:"파이어볼",description:"적에게 화염 데미지를 입힌다",icon:"🔥",type:"attack",element:"fire",mpCost:10,damage:30,cooldown:0,level:1,requiredLevel:1,requiredInt:15},heal:{id:"heal",name:"치유",description:"HP를 회복한다",icon:"💚",type:"heal",element:"light",mpCost:15,healAmount:50,cooldown:2,level:1,requiredLevel:1,requiredInt:10},lightning:{id:"lightning",name:"번개",description:"강력한 전격 공격",icon:"⚡",type:"attack",element:"electric",mpCost:25,damage:50,cooldown:1,level:1,requiredLevel:10,requiredInt:25},ice_shard:{id:"ice_shard",name:"아이스 샤드",description:"얼음 조각으로 공격",icon:"🧊",type:"attack",element:"ice",mpCost:20,damage:35,freezeChance:.3,cooldown:1,level:1,requiredLevel:5,requiredInt:20},shield:{id:"shield",name:"방어막",description:"일시적으로 방어력 증가",icon:"🛡️",type:"buff",element:"neutral",mpCost:20,defenseBoost:20,duration:3,cooldown:3,level:1,requiredLevel:8},berserk:{id:"berserk",name:"광폭화",description:"공격력 증가, 방어력 감소",icon:"💢",type:"buff",element:"neutral",mpCost:15,attackBoost:50,defenseReduce:20,duration:5,cooldown:5,level:1,requiredLevel:12,requiredStrength:30},poison_blade:{id:"poison_blade",name:"독검",description:"독 데미지를 입힌다",icon:"🗡️",type:"attack",element:"poison",mpCost:15,damage:25,poisonDamage:5,poisonDuration:5,cooldown:2,level:1,requiredLevel:7},teleport:{id:"teleport",name:"순간이동",description:"던전에서 랜덤 위치로 이동",icon:"✨",type:"utility",element:"space",mpCost:30,cooldown:10,level:1,requiredLevel:15,requiredInt:35},summon_familiar:{id:"summon_familiar",name:"패밀리어 소환",description:"전투를 도와줄 정령 소환",icon:"🦊",type:"summon",element:"spirit",mpCost:40,familiarHp:50,familiarAttack:15,duration:10,cooldown:15,level:1,requiredLevel:20,requiredInt:40},meteor:{id:"meteor",name:"메테오",description:"운석을 떨어뜨려 광역 피해",icon:"☄️",type:"attack",element:"fire",mpCost:50,damage:100,aoe:!0,cooldown:5,level:1,requiredLevel:25,requiredInt:50}},Og={skills:qg},es=Og.skills,zg=({enemy:r,onVictory:i,onDefeat:d,onFlee:o})=>{const u=re(E=>E.player),{updateHpMp:m,gainExperience:g,addItem:y,updateMoney:p}=re(E=>E.actions),[x,S]=v.useState({playerHp:u.hp,playerMp:u.mp,enemyHp:r.hp||r.maxHp,enemyMp:r.mp||50,turn:"player",battleLog:[`${r.name}과(와)의 전투가 시작되었습니다!`],playerEffects:[],enemyEffects:[],turnCount:0,skillCooldowns:{},isAnimating:!1,currentAnimation:null}),[b,D]=v.useState(null),[O,C]=v.useState(!1),z=[es.fireball,es.heal,es.lightning,es.ice_shard,es.shield,es.poison_blade].filter(E=>E&&u.level>=(E.requiredLevel||1)),j=E=>{S(U=>({...U,battleLog:[...U.battleLog.slice(-4),E]}))},N=(E,U)=>{S(R=>{const q=E==="player"?"playerEffects":"enemyEffects";return R[q].find(H=>H.name===U.name)?{...R,[q]:R[q].map(H=>H.name===U.name?{...H,duration:U.duration}:H)}:{...R,[q]:[...R[q],U]}})},w=E=>{S(U=>{const R=E==="player"?"playerEffects":"enemyEffects",q=E==="player"?"playerHp":"enemyHp";let h=U[q],H=[];const J=U[R].reduce((ie,L)=>{if(L.effect.dotDamage&&(h-=L.effect.dotDamage,H.push(`${E==="player"?"플레이어":r.name}가 ${L.name}으로 ${L.effect.dotDamage}의 피해를 입었습니다!`)),L.effect.healOverTime){const P=E==="player"?u.maxHp:r.maxHp;h=Math.min(P,h+L.effect.healOverTime),H.push(`${E==="player"?"플레이어":r.name}가 ${L.name}으로 ${L.effect.healOverTime}의 HP를 회복했습니다!`)}const Z=L.duration-1;return Z>0?ie.push({...L,duration:Z}):H.push(`${L.name} 효과가 사라졌습니다.`),ie},[]);return H.forEach(ie=>j(ie)),{...U,[R]:J,[q]:Math.max(0,h)}})},T=(E,U)=>{const R=U==="player"?x.playerEffects:x.enemyEffects,q=U==="player"?x.enemyEffects:x.playerEffects;let h=E;return R.forEach(H=>{H.effect.attack&&(h+=H.effect.attack)}),q.forEach(H=>{H.effect.defense&&(h=Math.max(1,h-H.effect.defense))}),h=Math.floor(h*(.9+Math.random()*.2)),Math.max(1,h)},A=()=>{if(x.isAnimating||O)return;S(R=>({...R,isAnimating:!0,currentAnimation:"attack"}));const E=u.stats?.strength||10,U=T(E,"player");setTimeout(()=>{S(R=>({...R,enemyHp:Math.max(0,R.enemyHp-U),isAnimating:!1,currentAnimation:null})),j(`일반 공격! ${r.name}에게 ${U}의 데미지!`),x.enemyHp-U<=0?ae():Y()},500)},k=E=>{if(x.isAnimating||O)return;const U=es[E];if(U){if(x.playerMp<U.mpCost){j("MP가 부족합니다!");return}if(x.skillCooldowns[E]>0){j(`${U.name}은(는) 재사용 대기 중입니다! (${x.skillCooldowns[E]}턴)`);return}S(R=>({...R,isAnimating:!0,currentAnimation:`skill-${U.element}`,playerMp:R.playerMp-U.mpCost,skillCooldowns:{...R.skillCooldowns,[E]:U.cooldown||0}})),setTimeout(()=>{let R=`${U.name} 발동!`;if(U.type==="attack"){const q=T(U.damage||20,"player");S(h=>({...h,enemyHp:Math.max(0,h.enemyHp-q)})),R+=` ${r.name}에게 ${q}의 ${U.element} 데미지!`,U.element==="fire"&&Math.random()<.3?(N("enemy",{name:"화상",icon:"🔥",duration:3,type:"debuff",effect:{dotDamage:5}}),R+=" 화상 효과 발동!"):U.element==="ice"&&Math.random()<.3?(N("enemy",{name:"동결",icon:"❄️",duration:2,type:"debuff",effect:{speed:-5}}),R+=" 동결 효과 발동!"):U.element==="electric"&&Math.random()<.3&&(N("enemy",{name:"감전",icon:"⚡",duration:2,type:"debuff",effect:{attack:-3,defense:-3}}),R+=" 감전 효과 발동!")}else if(U.type==="heal"){const q=U.healAmount||30;S(h=>({...h,playerHp:Math.min(u.maxHp,h.playerHp+q)})),R+=` HP를 ${q} 회복!`}else U.type==="buff"&&(N("player",{name:U.name,icon:U.icon,duration:U.duration||3,type:"buff",effect:U.effect||{}}),R+=" 버프 효과 적용!");j(R),S(q=>({...q,isAnimating:!1,currentAnimation:null})),x.enemyHp<=0?ae():Y()},800)}},M=()=>{x.isAnimating||O||(N("player",{name:"방어 태세",icon:"🛡️",duration:1,type:"buff",effect:{defense:10}}),S(E=>({...E,playerMp:Math.min(u.maxMp,E.playerMp+5)})),j("방어 태세! 방어력이 증가하고 MP를 5 회복했습니다."),Y())},Y=()=>{w("player"),S(E=>({...E,skillCooldowns:Object.entries(E.skillCooldowns).reduce((U,[R,q])=>(U[R]=Math.max(0,q-1),U),{}),turn:"enemy",turnCount:E.turnCount+1})),setTimeout(()=>B(),1e3)},B=()=>{if(O)return;S(U=>({...U,isAnimating:!0,currentAnimation:"enemy-attack"}));const E=Math.random();setTimeout(()=>{if(E<.6){const U=T(r.attack||5,"enemy");S(R=>({...R,playerHp:Math.max(0,R.playerHp-U)})),j(`${r.name}의 공격! ${U}의 데미지를 받았습니다!`)}else if(E<.9&&x.enemyMp>=10){const U=T((r.attack||5)*1.5,"enemy");S(R=>({...R,playerHp:Math.max(0,R.playerHp-U),enemyMp:R.enemyMp-10})),j(`${r.name}의 특수 공격! ${U}의 큰 데미지를 받았습니다!`),Math.random()<.3&&(N("player",{name:"약화",icon:"💔",duration:2,type:"debuff",effect:{attack:-3}}),j("약화 효과에 걸렸습니다!"))}else S(U=>({...U,enemyHp:Math.min(r.maxHp,U.enemyHp+10)})),j(`${r.name}이(가) 회복했습니다!`);w("enemy"),S(U=>({...U,isAnimating:!1,currentAnimation:null,turn:"player"})),x.playerHp<=0&&G()},800)},ae=()=>{C(!0),j(`승리! ${r.name}을(를) 물리쳤습니다!`);const E=r.experience||10,U=r.gold||Math.floor(Math.random()*20)+10;if(g(E),p(U),r.drops&&Math.random()<.5){const R=r.drops[Math.floor(Math.random()*r.drops.length)];R&&(y(R.itemId),j(`${R.itemId}을(를) 획득했습니다!`))}j(`경험치 +${E}, 골드 +${U}`),m(x.playerHp,x.playerMp),setTimeout(()=>{i()},2e3)},G=()=>{C(!0),j("패배했습니다...");const E=Math.floor(u.money*.1);p(-E),m(1,u.mp),j(`골드를 ${E} 잃었습니다.`),setTimeout(()=>{d()},2e3)},le=()=>{if(x.isAnimating||O)return;const E=.6+(u.stats?.agility||10)*.02;Math.random()<E?(j("도망쳤습니다!"),m(x.playerHp,x.playerMp),setTimeout(()=>o(),1e3)):(j("도망치지 못했습니다!"),Y())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:e.jsxs("div",{className:"w-full max-w-6xl h-full max-h-[90vh] glass-card p-6 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-primary mb-2",children:[u.name," (Lv.",u.level,")"]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.playerHp,"/",u.maxHp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${x.playerHp/u.maxHp*100}%`}})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-blue-400",children:"MP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.playerMp,"/",u.maxMp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:`${x.playerMp/u.maxMp*100}%`}})})]}),x.playerEffects.length>0&&e.jsx("div",{className:"flex gap-2 mt-2",children:x.playerEffects.map((E,U)=>e.jsxs("div",{className:`badge ${E.type==="buff"?"badge-success":"badge-error"}`,title:E.name,children:[E.icon," ",E.duration]},U))})]}),e.jsx("div",{className:`h-48 flex items-center justify-center ${x.currentAnimation==="attack"?"animate-pulse":""}`,children:e.jsx("div",{className:"text-8xl",children:"⚔️"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-2",children:r.name}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.enemyHp,"/",r.maxHp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${x.enemyHp/r.maxHp*100}%`}})})]}),x.enemyEffects.length>0&&e.jsx("div",{className:"flex gap-2 mt-2",children:x.enemyEffects.map((E,U)=>e.jsxs("div",{className:`badge ${E.type==="buff"?"badge-success":"badge-error"}`,title:E.name,children:[E.icon," ",E.duration]},U))})]}),e.jsx("div",{className:`h-48 flex items-center justify-center ${x.currentAnimation==="enemy-attack"?"animate-bounce":""}`,children:e.jsx("div",{className:"text-8xl",children:r.icon||"👹"})})]})]}),e.jsx("div",{className:"glass-card p-3 h-24 mb-4 overflow-y-auto",children:x.battleLog.map((E,U)=>e.jsx("div",{className:"text-sm text-text-secondary",children:E},U))}),e.jsx("div",{className:"glass-card p-4",children:x.turn==="player"&&!O?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("button",{onClick:A,disabled:x.isAnimating,className:"btn-primary px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:"⚔️ 공격"}),e.jsx("button",{onClick:()=>D(b?null:"skills"),disabled:x.isAnimating,className:"btn-accent px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:"✨ 스킬"}),e.jsx("button",{onClick:M,disabled:x.isAnimating,className:"btn-secondary px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:"🛡️ 방어"}),e.jsx("button",{onClick:le,disabled:x.isAnimating,className:"btn-ghost px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:"🏃 도망"})]}),b==="skills"&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3 p-3 bg-background-dark rounded-lg",children:z.map(E=>{const U=x.skillCooldowns[E.id]>0,R=x.playerMp<E.mpCost;return e.jsx("button",{onClick:()=>k(E.id),disabled:x.isAnimating||U||R,className:`p-3 rounded-lg text-left transition-all ${U||R?"bg-gray-700 opacity-50 cursor-not-allowed":"bg-primary/20 hover:bg-primary/30"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:E.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-text-primary",children:E.name}),e.jsxs("div",{className:"text-xs text-text-secondary",children:["MP: ",E.mpCost,U&&` (CD: ${x.skillCooldowns[E.id]})`]})]})]})},E.id)})})]}):x.turn==="enemy"&&!O?e.jsx("div",{className:"text-center text-text-secondary py-4",children:e.jsx("div",{className:"animate-pulse",children:"적의 턴..."})}):O?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-2xl font-bold text-text-primary mb-2",children:"전투 종료!"}),e.jsx("button",{onClick:x.playerHp>0?i:d,className:"btn-primary px-6 py-3 rounded-lg font-semibold",children:"계속하기"})]}):null})]})})},Vc=0,gi=1,Zc=2,Cx=3,_x=4,Jc=5,Kc=6,Hg=()=>{const r=ke(),i=re(Z=>Z.player),{updatePlayer:d,updateHpMp:o,addItem:u,updateMoney:m,gainExperience:g}=re(Z=>Z.actions),y=(i.dungeonProgress?.currentFloor||1)-1,p=Xl.floors[y]||Xl.floors[0],[x,S]=v.useState(!1),[b,D]=v.useState(null),O=Z=>{for(let P=0;P<Z.length;P++)for(let X=0;X<Z[P].length;X++)if(Z[P][X]===Zc)return{x:X,y:P};for(let P=0;P<Z.length;P++)for(let X=0;X<Z[P].length;X++)if(Z[P][X]===Vc)return{x:X,y:P};return{x:1,y:1}},[C,z]=v.useState(()=>p.layout.map(Z=>[...Z])),[j,N]=v.useState(()=>{const Z=i.dungeonProgress?.position;return Z&&Z.x!==void 0&&Z.y!==void 0&&C[Z.y]&&C[Z.y][Z.x]!==gi?Z:O(C)}),[w,T]=v.useState(()=>{const Z=j;return new Set([`${Z.x},${Z.y}`])}),[A,k]=v.useState("던전에 입장했습니다!"),[M,Y]=v.useState(new Set),[B,ae]=v.useState(new Set),[G,le]=v.useState(new Map);v.useEffect(()=>{const Z=new Map;if(p.enemies&&p.enemies.length>0){const P=[];for(let ne=0;ne<C.length;ne++)for(let ce=0;ce<C[ne].length;ce++)if(C[ne][ce]===Vc){const oe={x:ce,y:ne},we=O(C);Math.abs(oe.x-we.x)+Math.abs(oe.y-we.y)>2&&P.push(oe)}const X=Math.min(P.length,3+Math.floor(Math.random()*3));for(let ne=0;ne<X;ne++)if(P.length>0){const ce=Math.floor(Math.random()*P.length),oe=P[ce],we=p.enemies[Math.floor(Math.random()*p.enemies.length)];Z.set(`${oe.x},${oe.y}`,{...we}),P.splice(ce,1)}}le(Z)},[p]),v.useEffect(()=>{d({dungeonProgress:{...i.dungeonProgress,position:j}})},[j]),v.useEffect(()=>{const Z=new Set(w);for(let P=-1;P<=1;P++)for(let X=-1;X<=1;X++){const ne=j.x+X,ce=j.y+P;ne>=0&&ce>=0&&ce<C.length&&ne<C[0].length&&Z.add(`${ne},${ce}`)}T(Z)},[j]);const E=v.useCallback((Z,P)=>{const X=j.x+Z,ne=j.y+P;if(X<0||ne<0||ne>=C.length||X>=C[0].length){k("벽에 막혀있습니다!");return}const ce=C[ne][X];if(ce===gi){k("벽에 막혀있습니다!");return}N({x:X,y:ne}),U(X,ne,ce)},[j,C]),U=(Z,P,X)=>{const ne=`${Z},${P}`;if(G.has(ne)&&!B.has(ne)){const ce=G.get(ne);D(ce),S(!0),k(`${ce.name}과(와) 조우했습니다!`);return}switch(X){case Vc:case Zc:k("던전을 탐험 중입니다...");break;case Cx:M.has(ne)?k("이미 열어본 보물상자입니다."):R(Z,P);break;case _x:q();break;case Jc:h();break;case Kc:B.has(ne)?k("보스는 이미 물리쳤습니다."):H();break}},R=(Z,P)=>{const X=p.treasures||[{name:"소형 포션",effect:"HP +20",value:20},{name:"금화",effect:"Gold +50",value:50},{name:"마법 수정",effect:"MP +10",value:10}],ne=X[Math.floor(Math.random()*X.length)];k(`보물상자를 열었습니다! ${ne.name}을(를) 획득했습니다!`),ne.effect.includes("HP")?o(Math.min(i.maxHp,i.hp+ne.value),i.mp):ne.effect.includes("MP")?o(i.hp,Math.min(i.maxMp,i.mp+ne.value)):ne.effect.includes("Gold")&&m(ne.value),Y(ce=>new Set(ce).add(`${Z},${P}`))},q=()=>{const Z=Math.floor(Math.random()*10)+5;k(`함정에 걸렸습니다! ${Z}의 데미지를 받았습니다!`),o(Math.max(1,i.hp-Z),i.mp)},h=()=>{y<Xl.floors.length-1?(k("다음 층으로 이동합니다!"),d({dungeonProgress:{...i.dungeonProgress,currentFloor:y+2,position:{x:1,y:1}}}),z(Xl.floors[y+1].layout),N(O(Xl.floors[y+1].layout)),T(new Set),Y(new Set),ae(new Set)):(k("축하합니다! 던전을 클리어했습니다!"),g(100),m(500),r("/game"))},H=(Z,P)=>{const X=p.boss;if(!X){k("보스가 없습니다.");return}D(X),S(!0),k(`보스 ${X.name}과(와) 전투를 시작합니다!`)},J=()=>{const Z=`${j.x},${j.y}`;ae(P=>new Set([...P,Z])),S(!1),D(null),k("전투에서 승리했습니다!")},ie=()=>{S(!1),D(null);const Z=O(C);N(Z),o(Math.floor(i.maxHp*.5),i.mp),k("전투에서 패배했습니다. 시작 지점으로 돌아갑니다.")},L=()=>{S(!1),D(null);const Z=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(const P of Z){const X=j.x+P.dx,ne=j.y+P.dy;if(X>=0&&ne>=0&&ne<C.length&&X<C[0].length&&C[ne][X]!==gi){N({x:X,y:ne});break}}k("전투에서 도망쳤습니다.")};return v.useEffect(()=>{const Z=P=>{if(!x)switch(P.key){case"ArrowUp":case"w":E(0,-1);break;case"ArrowDown":case"s":E(0,1);break;case"ArrowLeft":case"a":E(-1,0);break;case"ArrowRight":case"d":E(1,0);break}};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[E,x]),x&&b?e.jsx(zg,{enemy:b,onVictory:J,onDefeat:ie,onFlee:L}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:["던전 탐험 - ",p.name]}),e.jsxs("p",{className:"text-text-secondary",children:["층: ",p.id," | 위치: (",j.x,", ",j.y,")"]})]}),e.jsx("button",{onClick:()=>r("/game"),className:"btn-secondary px-6 py-3 rounded-xl font-semibold",children:"돌아가기"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("div",{className:"grid grid-cols-8 gap-1 mb-4",children:C.map((Z,P)=>Z.map((X,ne)=>{const ce=`${ne},${P}`,oe=w.has(ce),we=ne===j.x&&P===j.y,he=G.has(ce)&&!B.has(ce);return e.jsx("div",{className:`
                          aspect-square flex items-center justify-center rounded
                          ${oe?X===gi?"bg-gray-700":X===Zc?"bg-green-800":X===Jc?"bg-yellow-800":X===Kc?"bg-red-900":"bg-gray-600":"bg-gray-800"}
                          ${we?"ring-2 ring-primary animate-pulse":""}
                        `,children:oe&&e.jsx(e.Fragment,{children:we?e.jsx("div",{className:"text-2xl",children:"🧙"}):e.jsxs("div",{className:"text-xl",children:[X===Cx&&!M.has(ce)&&"📦",X===Jc&&"🚪",X===Kc&&!B.has(ce)&&"👹",X===_x&&"⚠️",he&&e.jsx("span",{className:"animate-pulse",children:G.get(ce)?.icon||"👾"})]})})},ce)}))}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("p",{className:"text-text-secondary text-center mb-3",children:"방향키 또는 WASD로 이동"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 max-w-xs mx-auto",children:[e.jsx("div",{}),e.jsx("button",{onClick:()=>E(0,-1),className:"btn-primary p-3 rounded-lg",children:"↑"}),e.jsx("div",{}),e.jsx("button",{onClick:()=>E(-1,0),className:"btn-primary p-3 rounded-lg",children:"←"}),e.jsx("button",{onClick:()=>E(0,1),className:"btn-primary p-3 rounded-lg",children:"↓"}),e.jsx("button",{onClick:()=>E(1,0),className:"btn-primary p-3 rounded-lg",children:"→"})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:"플레이어 상태"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[i.hp,"/",i.maxHp]})]}),e.jsx("div",{className:"w-full h-2 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${i.hp/i.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-blue-400",children:"MP"}),e.jsxs("span",{className:"text-text-secondary",children:[i.mp,"/",i.maxMp]})]}),e.jsx("div",{className:"w-full h-2 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:`${i.mp/i.maxMp*100}%`}})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-background-dark p-2 rounded",children:[e.jsx("span",{className:"text-yellow-400",children:"레벨"}),e.jsx("span",{className:"float-right text-text-primary",children:i.level})]}),e.jsxs("div",{className:"bg-background-dark p-2 rounded",children:[e.jsx("span",{className:"text-green-400",children:"골드"}),e.jsx("span",{className:"float-right text-text-primary",children:i.money})]})]})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:"메시지"}),e.jsx("div",{className:"bg-background-dark p-3 rounded-lg h-32 overflow-y-auto",children:e.jsx("p",{className:"text-text-secondary",children:A})})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:"범례"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🧙"}),e.jsx("span",{className:"text-text-secondary",children:"플레이어"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"👾"}),e.jsx("span",{className:"text-text-secondary",children:"몬스터"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"📦"}),e.jsx("span",{className:"text-text-secondary",children:"보물상자"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🚪"}),e.jsx("span",{className:"text-text-secondary",children:"출구"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"👹"}),e.jsx("span",{className:"text-text-secondary",children:"보스"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"⚠️"}),e.jsx("span",{className:"text-text-secondary",children:"함정"})]})]})]})]})]})]})})},Lg=()=>{const r=ke(),i=re(b=>b.player),[d,o]=v.useState(null),[u,m]=v.useState(!1),g=[{id:"forest",name:"신비한 숲",description:"울창한 나무들과 신비로운 생물들이 사는 숲입니다.",icon:"🌳",difficulty:1,recommendedLevel:1,rewards:["나무 재료","숲의 정수","초급 포션"],unlocked:!0,theme:"nature",boss:"숲의 수호자"},{id:"crystal_cave",name:"수정 동굴",description:"빛나는 수정으로 가득한 지하 동굴입니다.",icon:"💎",difficulty:2,recommendedLevel:5,rewards:["마법 수정","광물","중급 포션"],unlocked:i.level>=3,theme:"crystal",boss:"크리스탈 골렘"},{id:"ancient_ruins",name:"고대 유적",description:"오래된 문명의 흔적이 남아있는 유적지입니다.",icon:"🏛️",difficulty:3,recommendedLevel:10,rewards:["고대 유물","마법 서적","경험치 부스터"],unlocked:i.level>=8,theme:"ancient",boss:"고대의 수호신"},{id:"ice_palace",name:"얼음 궁전",description:"영원한 겨울이 지배하는 얼어붙은 궁전입니다.",icon:"❄️",difficulty:4,recommendedLevel:15,rewards:["얼음 조각","서리 정수","고급 장비"],unlocked:i.level>=12,theme:"ice",boss:"얼음 여왕"},{id:"volcano",name:"화산 심장부",description:"용암이 끓어오르는 위험한 화산 내부입니다.",icon:"🌋",difficulty:5,recommendedLevel:20,rewards:["용암석","불의 정수","전설 장비"],unlocked:i.level>=18,theme:"fire",boss:"화염 드래곤"},{id:"shadow_realm",name:"그림자 차원",description:"어둠의 힘이 지배하는 다른 차원의 공간입니다.",icon:"🌑",difficulty:6,recommendedLevel:25,rewards:["어둠의 조각","그림자 정수","신화 장비"],unlocked:i.level>=22,theme:"shadow",boss:"어둠의 군주"},{id:"celestial_tower",name:"천상의 탑",description:"하늘 끝까지 솟아있는 신성한 탑입니다.",icon:"⭐",difficulty:7,recommendedLevel:30,rewards:["천상의 조각","신성한 정수","궁극 장비"],unlocked:i.level>=28,theme:"celestial",boss:"천상의 수호자"}],y=b=>{const D=g.find(O=>O.id===b);D&&D.unlocked&&(o(b),m(!0))},p=()=>{d&&(re.setState(b=>({player:{...b.player,currentDungeon:d,dungeonProgress:{...b.player.dungeonProgress,currentFloor:1,position:{x:1,y:1}}}})),r("/dungeon"))},x=b=>"⭐".repeat(b)+"☆".repeat(7-b),S=b=>{const D=["from-green-500 to-green-700","from-blue-500 to-blue-700","from-purple-500 to-purple-700","from-yellow-500 to-yellow-700","from-orange-500 to-orange-700","from-red-500 to-red-700","from-pink-500 to-pink-700"];return D[b-1]||D[0]};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"⚔️ 던전 선택"}),e.jsx("p",{className:"text-text-secondary",children:"도전할 던전을 선택하세요. 레벨에 맞는 던전을 선택하는 것이 좋습니다."})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-yellow-400",children:"⭐"})," 레벨: ",i.level]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-red-400",children:"❤️"})," HP: ",i.hp,"/",i.maxHp]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-blue-400",children:"💧"})," MP: ",i.mp,"/",i.maxMp]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-yellow-400",children:"💰"})," 골드: ",i.gold]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(b=>e.jsxs("div",{className:`relative transform transition-all duration-300 ${b.unlocked?"hover:scale-105":""}`,children:[e.jsxs("div",{onClick:()=>y(b.id),className:`bg-black/50 backdrop-blur-md rounded-xl border-2 overflow-hidden cursor-pointer ${b.unlocked?"border-border hover:border-primary hover:shadow-xl hover:shadow-primary/20":"border-gray-700 opacity-60 cursor-not-allowed"} ${d===b.id?"border-accent shadow-lg shadow-accent/30":""}`,children:[e.jsx("div",{className:`p-4 bg-gradient-to-r ${S(b.difficulty)}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-2",children:b.icon}),e.jsx("h3",{className:"text-xl font-bold text-white",children:b.unlocked?b.name:"???"})]})}),e.jsx("div",{className:"p-4",children:b.unlocked?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-text-secondary mb-3",children:b.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"난이도"}),e.jsx("div",{className:"text-yellow-400",children:x(b.difficulty)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"권장 레벨"}),e.jsxs("div",{className:`font-bold ${i.level>=b.recommendedLevel?"text-green-400":"text-red-400"}`,children:["Lv.",b.recommendedLevel,"+"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"보스"}),e.jsx("div",{className:"text-text-primary font-semibold",children:b.boss})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:"주요 보상"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:b.rewards.map((D,O)=>e.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:D},O))})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🔒"}),e.jsxs("p",{className:"text-gray-400",children:["레벨 ",g.find(D=>D.id===b.id)?.recommendedLevel-2,"에 잠금 해제"]})]})}),b.unlocked&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("button",{className:`w-full py-2 rounded-lg font-bold transition ${d===b.id?"bg-accent text-background":"bg-primary hover:bg-secondary text-white"}`,children:d===b.id?"✓ 선택됨":"입장하기"})})]}),!b.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-2",children:"🔒"}),e.jsx("div",{className:"text-gray-300 font-bold",children:"잠김"})]})})]},b.id))}),u&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-xl p-8 max-w-md w-full border border-border",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"던전 입장 확인"}),e.jsxs("p",{className:"text-text-secondary mb-6",children:[g.find(b=>b.id===d)?.name,"에 입장하시겠습니까?",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-400 text-sm",children:"⚠️ 던전 내에서 패배 시 입구로 돌아갑니다."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:p,className:"flex-1 px-4 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:"입장하기"}),e.jsx("button",{onClick:()=>{m(!1),o(null)},className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:"취소"})]})]})})]})})},Bg=()=>{const r=ke(),i=re(h=>h.player),[d,o]=v.useState([]),[u,m]=v.useState(!1),[g,y]=v.useState(null),[p,x]=v.useState(""),[S,b]=v.useState(null),[D,O]=v.useState(""),[C,z]=v.useState(""),[j,N]=v.useState("평온함"),[w,T]=v.useState([]),[A,k]=v.useState([]),M=[{id:"happy",label:"행복함",emoji:"😊"},{id:"excited",label:"신남",emoji:"🎉"},{id:"peaceful",label:"평온함",emoji:"😌"},{id:"romantic",label:"설렘",emoji:"💕"},{id:"sad",label:"슬픔",emoji:"😢"},{id:"confused",label:"혼란",emoji:"😕"},{id:"determined",label:"결연함",emoji:"💪"},{id:"nostalgic",label:"그리움",emoji:"🌅"}],Y=()=>{const h=["일상","모험","친구","공부","훈련"];return Object.keys(i.affection).forEach(H=>{(i.affection[H]||0)>0&&h.push(H)}),i.location&&h.push(i.location),[...new Set(h)]};v.useEffect(()=>{const h=localStorage.getItem("diaryEntries");h&&o(JSON.parse(h))},[]);const B=h=>{localStorage.setItem("diaryEntries",JSON.stringify(h)),o(h)},ae=()=>{if(!D.trim()||!C.trim()){alert("제목과 내용을 입력해주세요!");return}const H=[{id:`diary-${Date.now()}`,date:new Date().toLocaleDateString("ko-KR"),day:i.day,timeOfDay:i.timeOfDay,title:D,content:C,mood:j,tags:w,memories:A,createdAt:Date.now()},...d];B(H),O(""),z(""),N("평온함"),T([]),k([]),m(!1);const{addExperience:J}=re.getState().actions;J(5)},G=h=>{if(confirm("이 일기를 삭제하시겠습니까?")){const H=d.filter(J=>J.id!==h);B(H),y(null)}},le=h=>{w.includes(h)||T([...w,h])},E=h=>{T(w.filter(H=>H!==h))},U=()=>{const h=[];return i.level>1&&h.push(`오늘 레벨 ${i.level}에 도달했다!`),Object.keys(i.affection).forEach(H=>{(i.affection[H]||0)>=20&&h.push(`${H}와의 관계가 깊어지고 있다.`)}),h},R=d.filter(h=>{const H=!p||h.title.toLowerCase().includes(p.toLowerCase())||h.content.toLowerCase().includes(p.toLowerCase()),J=!S||h.tags.includes(S);return H&&J}),q=[...new Set(d.flatMap(h=>h.tags))];return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent mb-2",children:"📖 나의 일기장"}),e.jsx("p",{className:"text-text-secondary",children:"매일의 추억과 감정을 기록하세요"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-primary hover:bg-secondary text-white rounded-lg transition font-bold",children:"✍️ 일기 쓰기"}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-text-primary",children:["📝 총 일기: ",e.jsx("span",{className:"font-bold text-accent",children:d.length}),"개"]}),e.jsxs("div",{className:"text-text-primary",children:["📅 Day ",i.day," - ",Ug(i.timeOfDay)]}),e.jsxs("div",{className:"text-text-primary",children:["📍 ",i.location||"학교"]})]})})}),!u&&!g&&e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:"일기 검색...",value:p,onChange:h=>x(h.target.value),className:"flex-1 px-4 py-2 bg-black/50 border border-border rounded-lg text-text-primary"}),e.jsxs("select",{value:S||"",onChange:h=>b(h.target.value||null),className:"px-4 py-2 bg-black/50 border border-border rounded-lg text-text-primary",children:[e.jsx("option",{value:"",children:"모든 태그"}),q.map(h=>e.jsx("option",{value:h,children:h},h))]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[!u&&!g&&e.jsx(e.Fragment,{children:R.length>0?R.map(h=>e.jsxs("div",{onClick:()=>y(h),className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-border hover:border-primary cursor-pointer transition-all hover:scale-105",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-1",children:h.title}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Day ",h.day," - ",h.date]})]}),e.jsx("span",{className:"text-2xl",children:M.find(H=>H.label===h.mood)?.emoji||"📝"})]}),e.jsx("p",{className:"text-text-secondary line-clamp-3 mb-3",children:h.content}),h.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map((H,J)=>e.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:["#",H]},J))})]},h.id)):e.jsxs("div",{className:"col-span-3 text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📚"}),e.jsx("p",{className:"text-text-secondary text-lg",children:p||S?"검색 결과가 없습니다.":"아직 작성한 일기가 없습니다. 첫 일기를 써보세요!"})]})}),u&&e.jsxs("div",{className:"lg:col-span-3 bg-black/50 backdrop-blur-md rounded-lg p-8 border border-border",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"새 일기 작성"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:"제목"}),e.jsx("input",{type:"text",value:D,onChange:h=>O(h.target.value),placeholder:"오늘의 제목을 입력하세요...",className:"w-full px-4 py-3 bg-black/50 border border-border rounded-lg text-text-primary"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:"오늘의 기분"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:M.map(h=>e.jsxs("button",{onClick:()=>N(h.label),className:`px-4 py-3 rounded-lg border-2 transition ${j===h.label?"border-primary bg-primary/20":"border-border hover:border-primary/50"}`,children:[e.jsx("span",{className:"text-2xl mr-2",children:h.emoji}),e.jsx("span",{className:"text-text-primary",children:h.label})]},h.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:"내용"}),e.jsx("textarea",{value:C,onChange:h=>z(h.target.value),placeholder:"오늘 있었던 일들을 자유롭게 적어보세요...",rows:10,className:"w-full px-4 py-3 bg-black/50 border border-border rounded-lg text-text-primary"}),U().length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"추천 내용:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U().map((h,H)=>e.jsxs("button",{onClick:()=>z(J=>J+`
`+h),className:"text-xs bg-purple-600/20 text-purple-400 px-2 py-1 rounded hover:bg-purple-600/30",children:["+ ",h]},H))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:"태그"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:w.map(h=>e.jsxs("span",{className:"bg-primary/20 text-primary px-3 py-1 rounded-full text-sm flex items-center gap-2",children:["#",h,e.jsx("button",{onClick:()=>E(h),className:"text-red-400 hover:text-red-300",children:"×"})]},h))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Y().map(h=>!w.includes(h)&&e.jsxs("button",{onClick:()=>le(h),className:"text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-gray-600",children:["+ ",h]},h))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:ae,className:"flex-1 px-6 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:"💾 저장하기"}),e.jsx("button",{onClick:()=>{m(!1),O(""),z(""),N("평온함"),T([])},className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:"취소"})]})]}),g&&e.jsxs("div",{className:"lg:col-span-3 bg-black/50 backdrop-blur-md rounded-lg p-8 border border-border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:g.title}),e.jsxs("div",{className:"flex gap-4 text-text-secondary",children:[e.jsxs("span",{children:["📅 Day ",g.day]}),e.jsxs("span",{children:["🕐 ",g.date]}),e.jsxs("span",{children:[M.find(h=>h.label===g.mood)?.emoji," ",g.mood]})]})]}),e.jsx("button",{onClick:()=>y(null),className:"text-2xl text-text-secondary hover:text-text-primary",children:"✕"})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-6 mb-6",children:e.jsx("p",{className:"text-text-primary whitespace-pre-wrap leading-relaxed",children:g.content})}),g.tags.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:"태그"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.tags.map((h,H)=>e.jsxs("span",{className:"bg-primary/20 text-primary px-3 py-1 rounded-full",children:["#",h]},H))})]}),g.memories&&g.memories.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:"특별한 기억"}),e.jsx("div",{className:"space-y-2",children:g.memories.map((h,H)=>e.jsxs("div",{className:"bg-purple-600/20 text-purple-300 px-4 py-2 rounded-lg",children:["💭 ",h]},H))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>G(g.id),className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition",children:"🗑️ 삭제"}),e.jsx("button",{onClick:()=>y(null),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:"돌아가기"})]})]})]})]})})},Ug=r=>({morning:"아침",noon:"점심",afternoon:"오후",evening:"저녁",night:"밤"})[r]||r,$g=()=>{const r=ke(),i=re(M=>M.player),d=re(M=>M.actions.updateAffection),o=re(M=>M.actions.addExperience),u=re(M=>M.actions.addGold),[m,g]=v.useState(null),[y,p]=v.useState(null),[x,S]=v.useState(0),[b,D]=v.useState({}),[O,C]=v.useState(!1),z=[{heroineId:"sakura",name:"사쿠라",sprite:"🗡️",currentChapter:1,chapters:[{id:1,title:"첫 만남",requiredAffection:0,events:[{id:"sakura-1-1",requiredAffection:0,title:"검술부의 에이스",description:"처음으로 사쿠라를 만나다",dialogue:["(검술부 도장에서 혼자 연습 중인 사쿠라를 발견한다)",'사쿠라: "...누구지? 도장에 허락 없이 들어오다니."','당신: "아, 미안. 구경하다가..."','사쿠라: "흥, 검술에 관심이 있는 건가?"'],choices:[{text:"검술을 배우고 싶어",affectionChange:5,response:'사쿠라: "진심이라면... 가르쳐줄 수도 있지."'},{text:"그냥 지나가다가",affectionChange:0,response:'사쿠라: "그래... 방해하지 말고 가라."'}],rewards:{exp:10}},{id:"sakura-1-2",requiredAffection:10,title:"첫 훈련",description:"사쿠라와 함께 검술 훈련을 시작하다",dialogue:['사쿠라: "자, 기본 자세부터 시작하자."',"(사쿠라가 당신의 자세를 교정해준다)",'사쿠라: "생각보다 센스가 있네..."','당신: "정말? 고마워!"','사쿠라: "...칭찬한 게 아니야. 아직 멀었어."'],rewards:{exp:15,gold:50}}]},{id:2,title:"깊어지는 인연",requiredAffection:30,events:[{id:"sakura-2-1",requiredAffection:30,title:"사쿠라의 비밀",description:"사쿠라가 검술을 하는 진짜 이유를 알게 되다",dialogue:['사쿠라: "너... 왜 그렇게 열심히 하는 거야?"','당신: "너와 더 가까워지고 싶어서."','사쿠라: "...!"',"(사쿠라의 얼굴이 붉어진다)",'사쿠라: "사실... 나도 검술을 하는 이유가 있어."','사쿠라: "누군가를 지키고 싶어서야..."'],choices:[{text:"내가 너를 지켜줄게",affectionChange:10,response:'사쿠라: "바보... 하지만 고마워."'},{text:"함께 강해지자",affectionChange:8,response:'사쿠라: "...그래. 함께라면 할 수 있을 거야."'}],rewards:{exp:25,gold:100}}]},{id:3,title:"진실된 마음",requiredAffection:60,events:[{id:"sakura-3-1",requiredAffection:60,title:"고백",description:"서로의 마음을 확인하다",dialogue:["(벚꽃이 흩날리는 교정에서)",'사쿠라: "있잖아... 할 말이 있어."','사쿠라: "처음엔 그저 성가신 녀석이라고 생각했는데..."','사쿠라: "이제는... 네가 없으면 안 될 것 같아."','사쿠라: "나... 널 좋아해."'],choices:[{text:"나도 사랑해",affectionChange:20,response:'사쿠라: "정말? 나... 정말 행복해!"'},{text:"(키스한다)",affectionChange:25,response:'사쿠라: "...! (얼굴이 새빨개진다)"'}],rewards:{exp:50,gold:200}}]}]},{heroineId:"yuki",name:"유키",sprite:"📚",currentChapter:1,chapters:[{id:1,title:"도서관의 만남",requiredAffection:0,events:[{id:"yuki-1-1",requiredAffection:0,title:"조용한 도서관",description:"도서관에서 유키를 처음 만나다",dialogue:["(도서관에서 책을 읽고 있는 소녀를 발견한다)",'유키: "아... 안녕하세요..."',"(수줍게 인사하는 유키)",'당신: "뭘 읽고 있어?"','유키: "고대 마법에 관한 책이에요... 관심 있으세요?"'],choices:[{text:"흥미로워 보이네",affectionChange:5,response:'유키: "정말요? 같이 읽어볼래요?"'},{text:"어려워 보이는데",affectionChange:2,response:'유키: "처음엔 다 그래요... 천천히 배우면 돼요."'}],rewards:{exp:10}}]},{id:2,title:"책 속의 세계",requiredAffection:25,events:[{id:"yuki-2-1",requiredAffection:25,title:"특별한 책",description:"유키가 좋아하는 특별한 책을 보여주다",dialogue:['유키: "이 책... 보여드리고 싶었어요."',"(낡고 오래된 책을 조심스럽게 꺼낸다)",'유키: "어렸을 때부터 가장 좋아하던 책이에요."','유키: "이 책을 읽으면서... 외로움을 달랬거든요."','유키: "이제는 당신과 함께 읽고 싶어요."'],choices:[{text:"영광이야",affectionChange:8,response:'유키: "정말 기뻐요... 함께 읽어요."'},{text:"더 이상 외롭지 않을 거야",affectionChange:12,response:'유키: "...고마워요. 정말 고마워요."'}],rewards:{exp:20,gold:80}}]}]},{heroineId:"luna",name:"루나",sprite:"✨",currentChapter:1,chapters:[{id:1,title:"마법의 시작",requiredAffection:0,events:[{id:"luna-1-1",requiredAffection:0,title:"빛나는 마법",description:"마법학부 수석 루나를 만나다",dialogue:["(마법 연습장에서 화려한 마법을 선보이는 루나)",'루나: "오! 새로운 친구네? 안녕!"','당신: "와... 대단한 마법이야!"','루나: "헤헤, 이건 아무것도 아니야!"','루나: "너도 마법을 배우고 싶어?"'],choices:[{text:"가르쳐줄래?",affectionChange:5,response:'루나: "당연하지! 재미있을 거야!"'},{text:"난 마법 재능이 없어",affectionChange:3,response:'루나: "누구나 마법을 할 수 있어! 믿어봐!"'}],rewards:{exp:10}}]}]},{heroineId:"haruka",name:"하루카",sprite:"🌻",currentChapter:1,chapters:[{id:1,title:"밝은 미소",requiredAffection:0,events:[{id:"haruka-1-1",requiredAffection:0,title:"해바라기 같은 소녀",description:"활발한 하루카와의 첫 만남",dialogue:["(복도에서 밝게 웃으며 다가오는 소녀)",'하루카: "안녕! 새로운 학생이지?"','하루카: "나는 하루카! 잘 부탁해!"','당신: "응, 나는..."','하루카: "학교 안내해줄까? 재미있는 곳 많아!"'],choices:[{text:"고마워, 부탁할게!",affectionChange:5,response:'하루카: "좋아! 가자가자!"'},{text:"혼자 둘러볼게",affectionChange:1,response:'하루카: "그래도 도움이 필요하면 언제든 불러!"'}],rewards:{exp:10}}]}]},{heroineId:"miku",name:"미쿠",sprite:"🎵",currentChapter:1,chapters:[{id:1,title:"노래하는 천사",requiredAffection:0,events:[{id:"miku-1-1",requiredAffection:0,title:"음악실의 목소리",description:"아름다운 목소리의 주인공을 만나다",dialogue:["(음악실에서 들려오는 아름다운 노랫소리)","(조용히 들어가니 한 소녀가 노래하고 있다)",'미쿠: "어머! 누군가 듣고 있었어?"','당신: "미안, 너무 아름다워서..."','미쿠: "고마워... 부끄럽네."'],choices:[{text:"더 들려줄래?",affectionChange:5,response:'미쿠: "정말? 좋아! 특별히 불러줄게!"'},{text:"방해해서 미안",affectionChange:2,response:'미쿠: "괜찮아. 누군가 들어주니 기뻐."'}],rewards:{exp:10}}]}]},{heroineId:"rina",name:"리나",sprite:"⚔️",currentChapter:1,chapters:[{id:1,title:"전사의 혼",requiredAffection:0,events:[{id:"rina-1-1",requiredAffection:0,title:"훈련장의 전사",description:"열정적인 리나를 만나다",dialogue:["(훈련장에서 격렬하게 훈련 중인 소녀)",'리나: "하! 얍! 후..."','당신: "대단한 실력이네!"','리나: "오! 구경하고 있었어? 나는 리나!"','리나: "매일 훈련하지 않으면 약해져!"'],choices:[{text:"나도 강해지고 싶어",affectionChange:6,response:'리나: "좋은 마음가짐이야! 함께 훈련하자!"'},{text:"힘들어 보이는데",affectionChange:2,response:'리나: "힘든 만큼 강해지는 거야!"'}],rewards:{exp:10}}]}]},{heroineId:"ayumi",name:"아유미",sprite:"🔮",currentChapter:1,chapters:[{id:1,title:"신비한 점술사",requiredAffection:0,events:[{id:"ayumi-1-1",requiredAffection:0,title:"운명의 카드",description:"점술사 아유미와 만나다",dialogue:["(점술 동아리 방에서 타로 카드를 보고 있는 소녀)",'아유미: "...당신이 올 줄 알았어요."','당신: "어떻게 알았어?"','아유미: "카드가 알려줬어요. 특별한 인연이 시작될 거라고..."','아유미: "당신의 운명을 봐드릴까요?"'],choices:[{text:"부탁해",affectionChange:5,response:'아유미: "흥미로운 운명이네요... 사랑이 기다리고 있어요."'},{text:"운명은 스스로 만드는 거야",affectionChange:4,response:'아유미: "멋진 생각이에요. 그것도 하나의 운명이죠."'}],rewards:{exp:10}}]}]}];v.useEffect(()=>{const M=localStorage.getItem("completedStoryEvents");M&&D(JSON.parse(M))},[]);const j=M=>{localStorage.setItem("completedStoryEvents",JSON.stringify(M)),D(M)},N=()=>{y&&(x<y.dialogue.length-1?S(x+1):y.choices&&y.choices.length>0||T())},w=M=>{!y||!m||(d(m,M.affectionChange),alert(M.response),T())},T=()=>{if(!y||!m)return;const M=b[m]||[];if(!M.includes(y.id)){const Y={...b,[m]:[...M,y.id]};j(Y)}y.rewards&&(y.rewards.exp&&o(y.rewards.exp),y.rewards.gold&&u(y.rewards.gold)),C(!0),setTimeout(()=>{p(null),S(0),C(!1)},2e3)},A=M=>{const Y=z.find(le=>le.heroineId===M);if(!Y)return[];const B=i.affection[M]||0,ae=b[M]||[],G=[];for(const le of Y.chapters)if(B>=le.requiredAffection)for(const E of le.events)B>=E.requiredAffection&&!ae.includes(E.id)&&G.push(E);return G},k=M=>{const Y=z.find(G=>G.heroineId===M);if(!Y)return{completed:0,total:0};const B=b[M]?.length||0,ae=Y.chapters.reduce((G,le)=>G+le.events.length,0);return{completed:B,total:ae}};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-red-500 bg-clip-text text-transparent mb-2",children:"💕 히로인 스토리"}),e.jsx("p",{className:"text-text-secondary",children:"각 히로인과의 특별한 이야기를 경험하세요"})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})}),!y&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:z.map(M=>{const Y=i.affection[M.heroineId]||0,B=A(M.heroineId),ae=k(M.heroineId),G=Y<=0;return e.jsxs("div",{onClick:()=>!G&&g(M.heroineId),className:`bg-black/50 backdrop-blur-md rounded-lg p-6 border-2 transition-all ${G?"border-gray-700 opacity-60 cursor-not-allowed":"border-border hover:border-primary cursor-pointer hover:scale-105"}`,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:G?"🔒":M.sprite}),e.jsx("h3",{className:"text-xl font-bold text-text-primary",children:G?"???":M.name})]}),!G&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"호감도"}),e.jsx("div",{className:"bg-black/50 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-red-500 h-3 rounded-full",style:{width:`${Math.min(Y,100)}%`}})}),e.jsxs("div",{className:"text-center text-sm text-text-primary mt-1",children:[Y,"/100"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"스토리 진행도"}),e.jsxs("div",{className:"text-center text-text-primary",children:[ae.completed,"/",ae.total," 완료"]})]}),B.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"text-sm text-accent font-bold",children:["🎭 새로운 스토리 ",B.length,"개"]})})]})]},M.heroineId)})}),m&&!y&&e.jsxs("div",{className:"mt-6",children:[e.jsx("button",{onClick:()=>g(null),className:"mb-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg",children:"← 뒤로"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[A(m).map(M=>e.jsxs("div",{onClick:()=>{p(M),S(0)},className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-border hover:border-primary cursor-pointer transition-all hover:scale-[1.02]",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-2",children:M.title}),e.jsx("p",{className:"text-text-secondary",children:M.description}),M.rewards&&e.jsxs("div",{className:"mt-3 flex gap-4 text-sm",children:[M.rewards.exp&&e.jsxs("span",{className:"text-yellow-400",children:["⭐ EXP +",M.rewards.exp]}),M.rewards.gold&&e.jsxs("span",{className:"text-yellow-400",children:["💰 Gold +",M.rewards.gold]})]})]},M.id)),A(m).length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-text-secondary",children:["현재 진행 가능한 스토리가 없습니다.",e.jsx("br",{}),"호감도를 더 올려보세요!"]})})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 rounded-xl p-8 max-w-3xl w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:y.title}),e.jsx("div",{className:"bg-black/30 rounded-lg p-6 mb-6 min-h-[200px]",children:e.jsx("p",{className:"text-lg text-white leading-relaxed",children:y.dialogue[x]})}),x===y.dialogue.length-1&&y.choices?e.jsx("div",{className:"space-y-3",children:y.choices.map((M,Y)=>e.jsxs("button",{onClick:()=>w(M),className:"w-full p-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg text-white transition-all hover:scale-[1.02]",children:[M.text,M.affectionChange>0&&e.jsxs("span",{className:"ml-2 text-sm opacity-80",children:["(호감도 +",M.affectionChange,")"]})]},Y))}):e.jsx("button",{onClick:N,className:"w-full p-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white font-bold transition-all",children:x<y.dialogue.length-1?"다음 ▶":"완료"})]})}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-60 pointer-events-none",children:e.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl p-8 animate-bounce",children:e.jsx("h2",{className:"text-3xl font-bold text-white text-center",children:"✨ 스토리 완료! ✨"})})})]})})},Gg=()=>{const r=ke(),i=re(R=>R.player),d=re(R=>R.unlockedCharacters),o=re(R=>R.completedEvents),{saveGame:u,loadGame:m}=re(R=>R.actions),[g,y]=v.useState([]),[p,x]=v.useState(null),[S,b]=v.useState(null),[D,O]=v.useState(!1),[C,z]=v.useState(()=>{}),[j,N]=v.useState(""),w=6;v.useEffect(()=>{T()},[]);const T=()=>{const R=[];for(let q=1;q<=w;q++){const h=`academyDatingSim_slot${q}`,H=localStorage.getItem(h);if(H){const J=JSON.parse(H);R.push({id:q,isEmpty:!1,data:{playerName:J.player.name,level:J.player.level,day:J.player.day,timeOfDay:J.player.timeOfDay,location:J.player.location,affectionSummary:J.player.affection||{},saveDate:J.saveDate||new Date().toLocaleString(),playTime:J.playTime||0}})}else R.push({id:q,isEmpty:!0})}y(R)},A=R=>{const q=g.find(h=>h.id===R);q&&!q.isEmpty?(N(`슬롯 ${R}의 저장 데이터를 덮어쓰시겠습니까?`),z(()=>()=>k(R)),O(!0)):k(R)},k=R=>{const q=`academyDatingSim_slot${R}`,h={player:i,unlockedCharacters:d,completedEvents:o,saveDate:new Date().toLocaleString(),playTime:G()};localStorage.setItem(q,JSON.stringify(h)),localStorage.setItem("currentSaveSlot",R.toString()),T(),O(!1),alert(`게임이 슬롯 ${R}에 저장되었습니다!`)},M=R=>{const q=g.find(h=>h.id===R);q&&!q.isEmpty&&(N(`슬롯 ${R}의 데이터를 불러오시겠습니까?
현재 진행 상황은 저장되지 않습니다.`),z(()=>()=>Y(R)),O(!0))},Y=R=>{const q=`academyDatingSim_slot${R}`,h=localStorage.getItem(q);if(h){const H=JSON.parse(h);localStorage.setItem("academyDatingSim",JSON.stringify({player:H.player,unlockedCharacters:H.unlockedCharacters,completedEvents:H.completedEvents})),localStorage.setItem("currentSaveSlot",R.toString()),m(),O(!1),r("/game")}},B=R=>{N(`슬롯 ${R}의 데이터를 삭제하시겠습니까?
이 작업은 되돌릴 수 없습니다.`),z(()=>()=>ae(R)),O(!0)},ae=R=>{const q=`academyDatingSim_slot${R}`;localStorage.removeItem(q),T(),O(!1),alert(`슬롯 ${R}의 데이터가 삭제되었습니다.`)},G=()=>i.day*60+(i.timeOfDay==="noon"?30:0),le=R=>{const q=Math.floor(R/60),h=R%60;return`${q}시간 ${h}분`},E=R=>({morning:"🌅",noon:"☀️",afternoon:"🌤️",evening:"🌆",night:"🌙"})[R]||"⏰",U=R=>{const q=Object.entries(R);return q.length===0?null:q.reduce((H,[J,ie])=>ie>H.value?{char:J,value:ie}:H,{char:q[0][0],value:q[0][1]})};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-2",children:"💾 저장 & 불러오기"}),e.jsxs("p",{className:"text-text-secondary",children:["최대 ",w,"개의 저장 슬롯을 사용할 수 있습니다"]})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>b("save"),className:`px-6 py-3 rounded-lg font-bold transition ${S==="save"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"💾 저장하기"}),e.jsx("button",{onClick:()=>b("load"),className:`px-6 py-3 rounded-lg font-bold transition ${S==="load"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"📂 불러오기"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(R=>e.jsxs("div",{className:`bg-black/50 backdrop-blur-md rounded-lg border-2 transition-all hover:scale-[1.02] ${p===R.id?"border-accent shadow-xl":"border-border hover:border-primary"} ${R.isEmpty?"opacity-60":""}`,children:[e.jsx("div",{className:`p-4 bg-gradient-to-r ${R.isEmpty?"from-gray-700 to-gray-600":"from-purple-700 to-blue-700"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:["슬롯 ",R.id]}),!R.isEmpty&&e.jsx("button",{onClick:()=>B(R.id),className:"text-red-400 hover:text-red-300 text-sm",children:"🗑️ 삭제"})]})}),e.jsxs("div",{className:"p-4",children:[R.isEmpty?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2 opacity-50",children:"📭"}),e.jsx("p",{className:"text-text-secondary",children:"빈 슬롯"})]}):R.data&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"이름:"}),e.jsx("span",{className:"text-text-primary font-bold",children:R.data.playerName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"레벨:"}),e.jsxs("span",{className:"text-yellow-400 font-bold",children:["Lv.",R.data.level]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"진행도:"}),e.jsxs("span",{className:"text-text-primary",children:["Day ",R.data.day," - ",E(R.data.timeOfDay)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"위치:"}),e.jsx("span",{className:"text-text-primary",children:R.data.location})]}),Object.keys(R.data.affectionSummary).length>0&&e.jsxs("div",{className:"bg-pink-900/20 rounded p-2 border border-pink-500/30",children:[e.jsx("div",{className:"text-xs text-pink-300 mb-1",children:"최고 호감도:"}),(()=>{const q=U(R.data.affectionSummary);return q?e.jsxs("div",{className:"text-sm text-pink-200",children:[q.char," - ",q.value,"%"]}):null})()]}),e.jsxs("div",{className:"pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-text-secondary",children:"저장 시간:"}),e.jsx("span",{className:"text-text-primary",children:R.data.saveDate})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-text-secondary",children:"플레이 시간:"}),e.jsx("span",{className:"text-text-primary",children:le(R.data.playTime)})]})]})]}),S&&e.jsx("button",{onClick:()=>{S==="save"?A(R.id):S==="load"&&!R.isEmpty&&M(R.id)},disabled:S==="load"&&R.isEmpty,className:`w-full mt-4 py-3 rounded-lg font-bold transition ${S==="save"?"bg-blue-600 hover:bg-blue-700 text-white":S==="load"&&!R.isEmpty?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:S==="save"?"💾 이 슬롯에 저장":"📂 이 슬롯 불러오기"})]})]},R.id))}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-xl p-8 max-w-md w-full border border-border",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary mb-4",children:"확인"}),e.jsx("p",{className:"text-text-secondary mb-6 whitespace-pre-line",children:j}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:C,className:"flex-1 px-4 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:"확인"}),e.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:"취소"})]})]})}),!S&&e.jsxs("div",{className:"mt-8 bg-black/30 backdrop-blur-md rounded-lg p-6 border border-border",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:"📖 사용 방법"}),e.jsxs("ul",{className:"space-y-2 text-text-secondary",children:[e.jsx("li",{children:'• 상단의 "저장하기" 또는 "불러오기" 버튼을 선택하세요'}),e.jsx("li",{children:"• 저장: 원하는 슬롯을 선택하여 현재 게임을 저장합니다"}),e.jsx("li",{children:"• 불러오기: 저장된 슬롯을 선택하여 게임을 불러옵니다"}),e.jsx("li",{children:"• 각 슬롯은 독립적으로 관리되며, 언제든 삭제할 수 있습니다"})]})]})]})})},Fc=Zx.items,Yg=()=>{const r=ke(),i=re(k=>k.player),{buyItem:d,updateMoney:o,sellItem:u}=re(k=>k.actions),[m,g]=v.useState("buy"),[y,p]=v.useState(null),[x,S]=v.useState("전체"),b=Object.values(Fc).filter(k=>k.type==="gift"||k.type==="consumable"),D=["전체","선물","소모품","특별"],O=b.filter(k=>x==="전체"?!0:x==="선물"?k.category==="선물":x==="소모품"?k.category==="소모품":x==="특별"?k.rarity==="rare"||k.rarity==="legendary":!0),C=re(k=>k.player.inventory),z=v.useMemo(()=>{const k=C.reduce((M,Y)=>(M[Y]=(M[Y]||0)+1,M),{});return Object.entries(k).map(([M,Y])=>({...Fc[M],count:Y}))},[C]),j=k=>{if(i.money<k.value){alert("골드가 부족합니다!");return}o(-k.value),d(k.id),alert(`${k.name}을(를) 구매했습니다!`)},N=k=>{const M=Math.floor(k.value/2);u(k.id,M),alert(`${k.name}을(를) ${M}G에 판매했습니다!`),p(null)},w=k=>{g(k),p(null)},T=k=>{switch(k){case"common":return"일반";case"uncommon":return"고급";case"rare":return"희귀";case"epic":return"영웅";case"legendary":return"전설";default:return"일반"}},A=y?Fc[y]:null;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 to-purple-200 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"🏪 아카데미 상점"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-yellow-600",children:"💰"}),e.jsxs("span",{className:"font-semibold text-gray-800",children:[i.money," 골드"]})]})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold hover:shadow-lg transition",children:"게임으로 돌아가기"})]})}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-1 rounded-xl shadow-md",children:[e.jsxs("button",{onClick:()=>w("buy"),className:`px-8 py-3 text-lg font-bold rounded-lg transition-all duration-300 ${m==="buy"?"bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("span",{role:"img","aria-label":"buy",children:"🛍️"})," 구매"]}),e.jsxs("button",{onClick:()=>w("sell"),className:`px-8 py-3 text-lg font-bold rounded-lg transition-all duration-300 ${m==="sell"?"bg-gradient-to-r from-green-500 to-teal-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("span",{role:"img","aria-label":"sell",children:"💸"})," 판매"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:m==="buy"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-4",children:D.map(k=>e.jsx("button",{onClick:()=>S(k),className:`px-4 py-2 rounded-lg font-medium transition ${x===k?"bg-gradient-to-r from-pink-500 to-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:k},k))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[600px] overflow-y-auto pr-2",children:O.map(k=>e.jsx("div",{onClick:()=>p(k.id),className:`p-4 rounded-xl cursor-pointer transition border-2 ${y===k.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:k.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:k.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${k.rarity==="legendary"?"bg-yellow-100 text-yellow-800":k.rarity==="epic"?"bg-purple-100 text-purple-800":k.rarity==="rare"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:T(k.rarity)}),e.jsxs("span",{className:"font-bold text-yellow-700",children:[k.value," G"]})]})]})]})},k.id))})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[600px] overflow-y-auto pr-2",children:z.length>0?z.map(k=>e.jsx("div",{onClick:()=>p(k.id),className:`p-4 rounded-xl cursor-pointer transition border-2 ${y===k.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:k.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-gray-800",children:[k.name," ",e.jsxs("span",{className:"text-sm text-gray-500",children:["x",k.count]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${k.rarity==="legendary"?"bg-yellow-100 text-yellow-800":k.rarity==="epic"?"bg-purple-100 text-purple-800":k.rarity==="rare"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:T(k.rarity)}),e.jsxs("span",{className:"font-bold text-green-700",children:["판매가: ",Math.floor(k.value/2)," G"]})]})]})]})},k.id)):e.jsxs("div",{className:"col-span-full text-center text-gray-500 py-8",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"🎒"}),e.jsx("p",{children:"판매할 아이템이 없습니다."})]})})}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"상세 정보"}),A?e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:A.icon}),e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:A.name})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:"설명"}),e.jsx("p",{className:"text-sm text-gray-600",children:A.description})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:"효과"}),e.jsx("div",{className:"space-y-1 text-sm",children:A.effects?.map((k,M)=>e.jsxs("div",{className:"text-gray-600",children:["• ",k.type,": ",k.value]},M))})]})]}),e.jsx("div",{className:"border-t pt-3",children:m==="buy"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium",children:"가격"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-600",children:"💰"}),e.jsxs("span",{className:"font-bold text-yellow-800",children:[A.value," 골드"]})]})]}),e.jsx("button",{onClick:()=>j(A),disabled:i.money<A.value,className:`w-full py-3 rounded-lg font-bold transition ${i.money>=A.value?"bg-emerald-500 hover:bg-emerald-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i.money>=A.value?"구매하기":"골드 부족"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium",children:"판매 가격"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-600",children:"💰"}),e.jsxs("span",{className:"font-bold text-green-800",children:[Math.floor(A.value/2)," 골드"]})]})]}),e.jsx("button",{onClick:()=>N(A),className:"w-full py-3 rounded-lg font-bold transition bg-red-500 hover:bg-red-600 text-white",children:"판매하기"})]})})]}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"📦"}),e.jsx("p",{children:"상품을 선택하면 상세 정보를 볼 수 있습니다."})]})]})]})]})})},Qg={fullName:"키리시마 사쿠라 (霧島 桜)",age:18,birthday:"4월 5일",height:"165cm",bloodType:"O형",hobby:["검술 수련","고전 문학 읽기","벚꽃 구경"],favorite:["단팥빵","녹차","아침 수련"],dislike:["나태함","거짓말","폭력적인 사람"],background:"명문 검술 가문 '키리시마류'의 후계자. 5살 때부터 검을 잡았으며, 전국 고등학생 검도 대회 3연패를 달성한 천재 검사. 겉으로는 강인해 보이지만 내면은 따뜻하고 정의로운 성격.",secretStory:"사실 그녀의 가문은 고대로부터 미궁의 봉인을 지키는 수호자 가문이다. 사쿠라는 이 운명을 거부하고 평범한 삶을 원하지만, 미궁이 다시 열리면서 자신의 운명과 마주해야 한다.",personality:"책임감이 강하고 노력파. 남을 잘 돌보지만 자신의 감정 표현에는 서툴다. 정의감이 강해 불의를 보면 참지 못한다.",relationships:{yuki:"라이벌이면서도 친한 친구. 서로의 실력을 인정한다.",luna:"신비로운 그녀를 경계하면서도 호기심을 느낀다."},specialSkills:["키리시마류 비전 검술","초고속 거합","검기 방출"],weakness:"귀여운 것에 약하다. 특히 고양이를 보면 이성을 잃는다.",dream:"진정한 검의 길을 찾고, 사랑하는 사람과 평범한 행복을 누리는 것"},Xg={fullName:"유키노시타 유키 (雪ノ下 雪)",age:17,birthday:"12월 24일",height:"158cm",bloodType:"AB형",hobby:["마법 연구","천체 관측","홍차 블렌딩"],favorite:["책","고요한 장소","별이 빛나는 밤"],dislike:["시끄러운 곳","무지","규칙 위반"],background:"대대로 마법사를 배출한 유키노시타 가문의 막내. 10살에 대학 과정을 마친 천재로, 역대 최연소로 마법학부에 입학했다. 차가워 보이지만 실은 외로움을 많이 타는 성격.",secretStory:"그녀는 금지된 고대 마법을 연구하다가 시공간의 균열을 발견했다. 이 균열이 미궁과 연결되어 있음을 알게 되고, 혼자서 이를 막으려 하지만 점점 위험에 빠진다.",personality:"완벽주의자이며 이성적. 감정보다는 논리를 중시하지만, 마음 깊은 곳에는 따뜻함을 간직하고 있다.",relationships:{sakura:"그녀의 열정과 순수함을 부러워한다.",luna:"그녀의 정체를 의심하며 조사 중이다."},specialSkills:["원소 마법 마스터","시공간 마법","정신계 마법"],weakness:"체력이 약하고, 예상치 못한 상황에 당황한다. 귀여운 것을 좋아하지만 부끄러워서 숨긴다.",dream:"모든 마법의 진리를 깨닫고, 진정으로 이해해주는 사람을 만나는 것"},Vg={fullName:"루나 크림슨 (Luna Crimson)",age:"???",birthday:"10월 31일",height:"162cm",bloodType:"불명",hobby:["달빛 아래 산책","오래된 책 수집","꿈 관찰"],favorite:["달빛","붉은 장미","자정의 정적"],dislike:["태양","마늘","십자가(?)"],background:"갑자기 나타난 전학생. 과거가 베일에 싸여있으며, 낮에는 잘 나타나지 않는다. 고대 뱀파이어 일족의 마지막 후예로, 인간 세계에서 공존하는 법을 배우고 있다.",secretStory:"500년 전 미궁이 처음 열렸을 때, 그녀의 일족이 봉인을 도왔다. 루나는 미궁이 다시 열릴 것을 예견하고 학교에 왔다. 그녀는 불멸의 삶에 지쳐 있으며, 진정한 사랑을 찾으면 인간이 될 수 있다는 전설을 믿고 있다.",personality:"신비롭고 우아하며, 수백 년의 지혜를 가지고 있다. 겉으로는 차가워 보이지만 실은 깊은 외로움과 슬픔을 간직하고 있다.",relationships:{sakura:"그녀의 순수한 정의감에 끌린다.",yuki:"그녀의 지적 호기심이 위험할 수 있음을 경고한다."},specialSkills:["밤의 권능","정신 지배","그림자 조작","불멸의 재생력"],weakness:"진정한 사랑 앞에서는 힘을 잃는다. 은제품과 성수에 약하다.",dream:"영원한 삶의 굴레에서 벗어나 진정한 사랑을 찾고, 한 번뿐인 인생을 살아보는 것"},Zg={fullName:"??? (미스터리)",age:"불명",birthday:"불명",height:"가변",bloodType:"불명",hobby:["관찰","수수께끼 내기","운명 조작"],favorite:["혼돈","예측 불가능한 상황","흥미로운 인간"],dislike:["예측 가능한 결말","지루함","정해진 운명"],background:"학교에 숨겨진 또 다른 존재. 때로는 학생으로, 때로는 교사로, 때로는 그림자로 나타난다. 미궁의 수호자이자 시험관.",secretStory:"고대 신들이 만든 미궁의 관리자. 수천 년 동안 가치 있는 인간을 찾아 시험해왔다. 주인공에게서 특별한 가능성을 발견하고 관심을 가진다.",personality:"변덕스럽고 장난기 많지만, 그 이면에는 깊은 지혜와 슬픔이 있다.",relationships:{all:"모든 캐릭터를 관찰하고 시험한다."},specialSkills:["현실 조작","운명 간섭","모든 것을 아는 지식"],weakness:"진정한 인간의 감정을 이해하지 못한다.",dream:"자신도 모르는 무언가를 찾고 있다. 아마도... 자유?"},Jg={fullName:"타카미네 아카네 (鷹峯 茱音)",age:18,birthday:"9월 15일",height:"168cm",bloodType:"A형",hobby:["회장 업무","피아노 연주","전략 게임"],favorite:["질서","진주 테","클래식 음악"],dislike:["무질서","게으름","약속 위반"],background:"정치 명문가의 외동딸. 어린 시절부터 리더로 키워졌고, 중학교부터 학생회장을 역임했다. 완벽함 뒤에 숨겨진 외로움을 가지고 있다.",secretStory:"부모님의 기대에 부응하기 위해 자신을 억압하며 살아왔다. 진짜 자신은 자유롭게 웃고 떠들고 싶어하는 평범한 소녀다.",personality:"카리스마가 넘치고 책임감이 강하다. 하지만 내면은 부드럽고 따뜻한 마음을 가지고 있다.",relationships:{hana:"먼 친체. 서로를 가족처럼 아낀다.",rin:"그녀의 자유로움을 부러워한다.",mei:"예술적 감각을 이해하려 노력한다."},specialSkills:["카리스마 리더십","완벽한 스케줄 관리","협상 능력"],weakness:"완벽해야 한다는 강박관념. 새로운 것을 시도하기 두려워한다.",dream:"자신을 있는 그대로 받아주는 사람을 만나 진정한 모습을 보여주는 것"},Kg={fullName:"모리모토 하나 (森本 花)",age:17,birthday:"3월 8일",height:"160cm",bloodType:"B형",hobby:["요리 연구","환한 가드닝","빵 굳기"],favorite:["가족","따뜻한 수프","맛있게 먹는 사람들"],dislike:["음식 낭비","차가운 사람","혁오스러운 비판"],background:"요리사 부모님 아래 태어나 어렸을 때부터 주방에서 자랐다. 모두를 먹이고 행복하게 하는 것이 목표.",secretStory:"어렸을 때 가난함으로 굶주린 기억이 있어, 누구도 배고프지 않게 하려고 한다. 특별한 능력으로 사람의 감정을 음식의 맛으로 느낄 수 있다.",personality:"항상 웃는 햇살 같은 성격. 모성애가 강하고 다정하다.",relationships:{akane:"사촌 자매 같은 사이. 어렸을 때부터 친했다.",rin:"운동 후 영양식을 함께 준비한다.",sora:"과학적 요리에 함께 관심이 많다."},specialSkills:["천재적 요리 손재주","감정 요리법","영양학 지식"],weakness:"너무 다정해서 혼자 많은 류를 짊어진다. 자기 관리를 소홀히 한다.",dream:"사랑하는 사람들과 함께 레스토랑을 열고 행복한 가정을 만드는 것"},Fg={fullName:"키노시타 린 (木下 凛)",age:16,birthday:"7월 21일",height:"163cm",bloodType:"O형",hobby:["아침 달리기","스포츠 관람","산악 등반"],favorite:["햇살","스포츠 음료","당근 주스"],dislike:["비 오는 날","실내","정체된 것"],background:"전국 육상 대회 금메달리스트. 태양처럼 밝고 에너지 넘치는 성격으로 모두에게 사랑받는다.",secretStory:"사실 어렸을 때 큰 다치로 달리지 못할 뻔했다. 하지만 포기하지 않고 재활을 통해 더 강해졌다. 바람을 읽는 특별한 능력이 있다.",personality:"항상 긍정적이고 활발하다. 누군가 우울해하면 반드시 위로해준다.",relationships:{sakura:"운동 라이벌이자 친구.",hana:"함께 아침 조깅을 한다.",sora:"과학적 트레이닝에 관심이 많다."},specialSkills:["초인적인 체력","바람 읽기","동기부여 연설"],weakness:"비 오는 날 우울해진다. 가만히 있지 못하는 성격.",dream:"올림픽에 출전해 금메달을 따고, 사랑하는 사람과 함께 세계를 여행하는 것"},Pg={fullName:"카나자와 메이 (金沢 芽衣)",age:17,birthday:"11월 3일",height:"155cm",bloodType:"AB형",hobby:["그림 그리기","미술관 탐방","색채 수집"],favorite:["고요함","자연광","빈 캔버스"],dislike:["큰 소리","강요","틀에 박힌 것"],background:"감각적이고 예술적인 재능을 타고난 미술부의 에이스. 조용하지만 그림으로 모든 것을 표현한다.",secretStory:"그녀의 그림은 미래를 예측할 수 있다. 하지만 이 능력을 두려워하여 숨기고 있다. 색깔로 사람의 감정과 오라를 볼 수 있다.",personality:"내향적이고 예민하다. 감성이 풍부하고 서지지만 표현할 때는 대담하다.",relationships:{luna:"신비로운 영감을 주는 뮤즈.",akane:"예술을 이해하려 노력하는 모습이 고마워서.",sora:"과학과 예술의 융합에 관심이 많다."},specialSkills:["미래 예측 그림","감정 색깔 보기","초상화 재능"],weakness:"사회적 불안. 큰 소리나 갑작스러운 상황에 약하다.",dream:"자신의 그림으로 세상을 더 아름답게 만들고, 진정으로 이해해주는 사람을 만나는 것"},Wg={fullName:"하야카와 소라 (早川 空)",age:16,birthday:"2월 14일",height:"152cm",bloodType:"B형",hobby:["실험","발명","로봇 제작"],favorite:["발견","논리","효율성"],dislike:["비논리","무계획","비효율"],background:"IQ 180의 초천재 과학자. 12살에 대학 졸업, 15살에 박사학위를 취득했다. 하지만 사회성을 기르기 위해 고등학교에 다니고 있다.",secretStory:"차원 이동 장치를 개발 중이며, 평행우주의 존재를 증명하려고 한다. 감정이라는 비논리적인 존재를 이해하기 위해 학교에 다닌다.",personality:"논리적이고 분석적이다. 하지만 인간관계에는 서툴고 순수한 면이 있다.",relationships:{yuki:"지적 라이벌이자 친구.",hana:"분자 요리학에 흥미가 있다.",mei:"예술과 과학의 융합에 관심이 많다."},specialSkills:["초천재적 두뇌","차원 이론 연구","발명 재능"],weakness:"체력이 약하고 운동신경이 둔하다. 감정 표현에 서툴다.",dream:"세계를 바꾸는 발명을 하고, 감정의 비밀을 과학적으로 증명하는 것"},Fx={sakura:Qg,yuki:Xg,luna:Vg,mystery:Zg,akane:Jg,hana:Kg,rin:Fg,mei:Pg,sora:Wg},Ig=({currentCharacter:r,onCharacterSelect:i})=>{const d=Fx,o=d[r];if(!o||!o.relationships)return null;const u={sakura:"🌸",yuki:"❄️",luna:"🌙",mystery:"❓",akane:"💼",hana:"🌺",rin:"⚡",mei:"🎨",sora:"🔬"},m={sakura:"사쿠라",yuki:"유키",luna:"루나",mystery:"미스터리",akane:"아카네",hana:"하나",rin:"린",mei:"메이",sora:"소라"};return e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-3 text-secondary flex items-center gap-2",children:"🔗 캐릭터 관계도"}),e.jsx("div",{className:"space-y-3",children:Object.entries(o.relationships).map(([g,y])=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-black/30 rounded-lg hover:bg-black/40 transition-colors",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center text-xl border-2 border-primary/30 ${i?"cursor-pointer hover:scale-110 transition-transform":""}`,onClick:()=>i?.(g),children:u[g]||"👤"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-accent",children:m[g]||g}),i&&e.jsx("button",{onClick:()=>i(g),className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded hover:bg-primary/30 transition-colors",children:"보기"})]}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:y})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-pink-400 to-red-400 rounded-full animate-pulse"})})]},g))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/30",children:[e.jsx("h6",{className:"text-sm font-medium text-text-secondary mb-2",children:"🤝 상호 관계"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.keys(o.relationships).map(g=>{const p=d[g]?.relationships?.[r];return p?e.jsxs("div",{className:"flex items-center gap-2 text-xs p-2 bg-black/20 rounded",children:[e.jsxs("span",{className:"text-accent",children:[m[g],"의 시각:"]}),e.jsx("span",{className:"text-text-primary flex-1",children:p})]},g):null})})]})]})},Pc=qa,tt=Fx,Px=at.memo(()=>{const r=ke(),i=re(A=>A.player),d=re(A=>A.unlockedCharacters),o=v.useMemo(()=>Object.keys(Pc),[]),u=v.useMemo(()=>o.filter(A=>(i.affection[A]||0)>0),[o,i.affection]),[m,g]=v.useState(u[0]||d[0]||"sakura"),y=v.useMemo(()=>({sakura:"검도장",yuki:"도서관",luna:"마법학부",mystery:"???"}),[]),p=v.useMemo(()=>({morning:"수업 준비 중",noon:"점심시간",afternoon:"동아리 활동",evening:"자유시간",night:"휴식 중"}),[]),x=v.useCallback(A=>{const k=i.affection[A]||0;return{poise:Math.max(60+Math.floor(k/5),0),stress:Math.max(40-Math.floor(k/3),0),arousal:Math.min(20+Math.floor(k/8),100),affection:k}},[i.affection]),S=v.useCallback(A=>y[A]||"학교 본관",[y]),b=v.useCallback(A=>(i.affection[A]||0)>=70?"당신을 기다리는 중":p[i.timeOfDay]||"대화 가능",[i.affection,i.timeOfDay,p]),D=v.useCallback(A=>{const k=i.affection[A]||0;return k>=80?"특별한 의상":k>=60?"캐주얼 복장":k>=40?"학교 복장 (편안)":"학교 복장"},[i.affection]),O=v.useCallback(A=>{const k=i.affection[A]||0;return k>=90?"연인":k>=75?"매우 친밀":k>=60?"친밀한 친구":k>=40?"친구":k>=20?"지인":"낯선 사람"},[i.affection]),C=v.useCallback((A,k)=>{const M=i.affection[k]||0;if(M===0)return"최근 대화가 없습니다. 만남을 가지세요.";const Y=Object.keys(A.dialogues).map(Number).sort((B,ae)=>ae-B);for(const B of Y)if(M>=B)return A.dialogues[B.toString()]||"최근 대화가 없습니다. 만남을 가지세요.";return A.dialogues[0]||"최근 대화가 없습니다. 만남을 가지세요."},[i.affection]),z=v.useMemo(()=>({morning:"8:30 AM",noon:"12:00 PM",afternoon:"3:00 PM",evening:"6:30 PM",night:"10:00 PM"}),[]),j=v.useCallback(()=>z[i.timeOfDay]||"Unknown",[i.timeOfDay,z]),N=v.useMemo(()=>{const A=new Date,k=A.getMonth()+1,M=A.getDate(),B=["일","월","화","수","목","금","토"][A.getDay()];return`${A.getFullYear()}-${k.toString().padStart(2,"0")}-${M.toString().padStart(2,"0")} ${B}`},[]),w=v.useMemo(()=>Pc[m],[m]),T=v.useCallback(()=>{r("/game")},[r]);return e.jsx("div",{className:"min-h-screen bg-background p-4 text-text-primary",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg shadow-lg p-4 mb-4 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"👥 캐릭터 카드"}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-primary hover:bg-secondary text-white rounded-lg transition","aria-label":"메인 게임 화면으로 돌아가기",role:"button",children:"🏠 게임으로 돌아가기"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:e.jsxs("div",{className:"lg:col-span-4",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-t-lg shadow-lg p-4 border-b border-border",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-text-primary text-center",children:"캐릭터 선택"}),e.jsx("div",{className:"flex gap-4 justify-center overflow-x-auto pb-2",children:o.map(A=>{const k=Pc[A];if(!k)return null;const Y=!((i.affection[A]||0)>0);return e.jsxs("button",{onClick:()=>{Y||g(A)},disabled:Y,className:`px-6 py-3 rounded-lg transition-all border-2 flex flex-col items-center gap-2 min-w-[120px] relative ${Y?"border-gray-600 bg-gray-900/50 opacity-60 cursor-not-allowed":m===A?"border-primary bg-primary/20 scale-105 shadow-lg":"border-border hover:border-primary hover:bg-primary/10 hover:shadow-md"}`,"aria-label":`${Y?"잠긴 캐릭터":k.name+" 캐릭터 선택하기"}`,"aria-pressed":!Y&&m===A,role:"button",children:[Y&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg bg-black/60",children:e.jsx("span",{className:"text-4xl",children:"🔒"})}),e.jsx("span",{className:"text-3xl","aria-hidden":"true",children:Y?"❓":k.sprite}),e.jsx("div",{className:"font-bold text-text-primary text-sm whitespace-nowrap",children:Y?"???":k.name})]},A)})})]}),w&&!((i.affection[m]||0)<=0)?e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-b-2xl shadow-2xl overflow-hidden border border-border border-t-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 min-h-[700px]",children:[e.jsxs("div",{className:"bg-black/20 p-8 flex flex-col items-center justify-center relative",children:["                    ",e.jsx("div",{className:"absolute top-4 right-4 text-6xl opacity-10",children:w.sprite}),e.jsxs("div",{className:"w-56 h-56 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-8xl mb-6 shadow-xl border-4 border-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"}),e.jsx("span",{className:"relative z-10",children:w.sprite})]}),e.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2 text-center",children:w.name}),e.jsx("p",{className:"text-secondary font-medium text-lg mb-4",children:w.role}),e.jsx("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-secondary",children:x(m).affection}),e.jsx("div",{className:"text-sm text-text-secondary",children:"호감도"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:O(m)}),e.jsx("div",{className:"text-sm text-text-secondary",children:"관계"})]})]})})]}),e.jsxs("div",{className:"lg:col-span-2 p-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"📍 위치"}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:S(m)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"👔 복장"}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:D(m)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"💭 상태"}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:b(m)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"💕 관계"}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:O(m)})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"📊 상태"}),e.jsx("div",{className:"space-y-4",children:Object.entries(x(m)).map(([A,k])=>{const Y={poise:{icon:"🧘",label:"침착함",color:"from-blue-400 to-blue-600"},stress:{icon:"😰",label:"스트레스",color:"from-orange-400 to-orange-600"},arousal:{icon:"💕",label:"흥분",color:"from-pink-400 to-pink-600"},affection:{icon:"💖",label:"호감도",color:"from-red-400 to-red-600"}}[A];return Y?e.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2 text-text-primary",children:[e.jsx("span",{className:"text-xl",children:Y.icon}),e.jsx("span",{children:Y.label})]}),e.jsxs("span",{className:"font-bold text-lg text-text-primary",children:[k,"%"]})]}),e.jsx("div",{className:"w-full bg-black/50 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-4 rounded-full bg-gradient-to-r ${Y.color} transition-all duration-1000 ease-out relative`,style:{width:`${Math.max(k,0)}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent rounded-full"})})})]},A):null})})]}),tt[m]&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"📖 캐릭터 정보"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:"기본 정보"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:"이름:"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].fullName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:"나이:"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].age})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:"생일:"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].birthday})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:"혈액형:"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].bloodType})]})]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:"배경"}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:tt[m].background})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:"성격"}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:tt[m].personality})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:"취미 & 선호도"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:"취미:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].hobby?.map((A,k)=>e.jsx("span",{className:"bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs",children:A},k))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:"좋아하는 것:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].favorite?.map((A,k)=>e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs",children:["💙 ",A]},k))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:"싫어하는 것:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].dislike?.map((A,k)=>e.jsxs("span",{className:"bg-red-500/20 text-red-400 px-2 py-1 rounded text-xs",children:["💔 ",A]},k))})]})]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:"특별한 능력"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:tt[m].specialSkills?.map((A,k)=>e.jsxs("span",{className:"bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full text-sm font-medium border border-purple-500/30",children:["⚡ ",A]},k))})]}),tt[m].weakness&&e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:"약점"}),e.jsxs("p",{className:"text-sm text-text-primary leading-relaxed",children:["😅 ",tt[m].weakness]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:"꿈과 목표"}),e.jsxs("p",{className:"text-sm text-text-primary leading-relaxed",children:["🌟 ",tt[m].dream]})]}),tt[m].secretStory&&i.affection[m]>=50&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/30 to-pink-900/30 backdrop-blur-sm rounded-lg p-4 border border-purple-500/30",children:[e.jsxs("h5",{className:"text-md font-semibold mb-2 text-purple-300 flex items-center gap-2",children:["🔐 비밀 이야기",e.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-300 px-2 py-1 rounded",children:"호감도 50+ 잠금해제"})]}),e.jsx("p",{className:"text-sm text-purple-100 leading-relaxed",children:tt[m].secretStory})]}),tt[m].secretStory&&i.affection[m]<50&&e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 border border-gray-600/30",children:[e.jsxs("h5",{className:"text-md font-semibold mb-2 text-gray-400 flex items-center gap-2",children:["🔒 비밀 이야기",e.jsx("span",{className:"text-xs bg-gray-600/20 text-gray-400 px-2 py-1 rounded",children:"호감도 50 필요"})]}),e.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:"더 깊은 관계가 되면 알 수 있을 것 같다..."})]}),e.jsx(Ig,{currentCharacter:m,onCharacterSelect:A=>{d.includes(A)&&g(A)}})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"💬 최근 대화"}),e.jsx("div",{className:"bg-black/20 rounded-lg p-6 border-l-4 border-primary",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:w.sprite}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-primary mb-2",children:w.name}),e.jsxs("p",{className:"text-text-secondary italic leading-relaxed",children:['"',C(w,m),'"']})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"❤️ 좋아하는 것들"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.likes?.slice(0,8).map((A,k)=>e.jsx("span",{className:"bg-primary/20 text-primary px-4 py-2 rounded-full text-sm font-medium border border-primary/50",children:A},k))})]}),e.jsxs("div",{className:"border-t border-border pt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"📅"}),e.jsx("span",{children:N})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"🕐"}),e.jsx("span",{children:j()})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"bg-accent text-background px-3 py-1 rounded-full text-sm font-medium",children:["Day ",i.day]})})]})]})]})}):e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-b-2xl shadow-2xl overflow-hidden border border-border border-t-0",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-16",children:[e.jsx("div",{className:"text-8xl mb-6",children:"🔒"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-400 mb-4",children:"잠긴 캐릭터"}),e.jsxs("p",{className:"text-gray-500 text-center max-w-md",children:["이 캐릭터를 만나려면 먼저 게임을 진행하고 상호작용해야 합니다.",e.jsx("br",{}),e.jsx("br",{}),"힙트: 각 캐릭터는 특정 장소에서 만날 수 있습니다."]})]})})]})})]})})});Px.displayName="CharacterCardPage";const eb=({onCreateAccount:r})=>{const i=ke(),[d,o]=v.useState(!1),[u,m]=v.useState(""),[g,y]=v.useState({username:"",email:"",password:"",confirmPassword:""}),p=(b,D)=>{y(O=>({...O,[b]:D}))},x=()=>g.username.trim()?g.username.length<3?"아이디는 최소 3자 이상이어야 합니다.":g.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)?g.password.trim()?g.password.length<6?"비밀번호는 최소 6자 이상이어야 합니다.":g.password!==g.confirmPassword?"비밀번호가 일치하지 않습니다.":null:"비밀번호를 입력해주세요.":"올바른 이메일 형식을 입력해주세요.":"이메일을 입력해주세요.":"아이디를 입력해주세요.",S=async b=>{b.preventDefault(),m("");const D=x();if(D){m(D);return}o(!0);try{await new Promise(C=>setTimeout(C,2e3)),r(g)?(alert("계정이 성공적으로 생성되었습니다!"),i("/login")):m("계정 생성 중 오류가 발생했습니다.")}catch{m("계정 생성 중 오류가 발생했습니다.")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"계정 생성"}),e.jsx("p",{className:"text-purple-200",children:"Labyrinth Academy에 오신 것을 환영합니다"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"아이디"}),e.jsx("input",{type:"text",value:g.username,onChange:b=>p("username",b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"아이디를 입력하세요 (3자 이상)",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"이메일"}),e.jsx("input",{type:"email",value:g.email,onChange:b=>p("email",b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"이메일을 입력하세요",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"비밀번호"}),e.jsx("input",{type:"password",value:g.password,onChange:b=>p("password",b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"비밀번호를 입력하세요 (6자 이상)",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:"비밀번호 확인"}),e.jsx("input",{type:"password",value:g.confirmPassword,onChange:b=>p("confirmPassword",b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"비밀번호를 다시 입력하세요",required:!0})]}),u&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:u})}),e.jsxs("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-300 font-semibold mb-2",children:"서비스 약관"}),e.jsxs("div",{className:"text-purple-200 text-sm space-y-1",children:[e.jsx("p",{children:"• 본 게임은 18세 이상 이용 가능합니다"}),e.jsx("p",{children:"• 부적절한 사용자명은 제재될 수 있습니다"}),e.jsx("p",{children:"• 게임 데이터는 로컬에 저장됩니다"})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:d?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"계정 생성 중..."})]}):"계정 생성"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6 text-sm",children:[e.jsx("button",{onClick:()=>i("/"),className:"text-purple-300 hover:text-white transition-colors",children:"← 홈으로 돌아가기"}),e.jsx("button",{onClick:()=>i("/login"),className:"text-purple-300 hover:text-white transition-colors",children:"이미 계정이 있나요? 로그인 →"})]})]})})},tb=()=>{const r=ke();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:"게임 정보"}),e.jsx("button",{onClick:()=>r("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"← 메인으로"})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"🎮 게임 개요"}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Labyrinth Academy"}),"는 마법과 모험이 가득한 학원을 배경으로 한 데이팅 시뮬레이션 게임입니다."]}),e.jsx("p",{children:"플레이어는 학원 학생이 되어 다양한 히로인들과 관계를 쌓고, 던전을 탐험하며, 자신만의 스토리를 만들어 나갑니다."}),e.jsx("p",{children:"총 30일의 학원 생활 동안 어떤 결말을 맞이할지는 당신의 선택에 달려있습니다!"})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"🎯 조작법 및 컨트롤"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-purple-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"기본 조작"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"이동:"})," 화면 우측의 위치 버튼 클릭"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"시간 진행:"}),' "시간 진행" 버튼 클릭']}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"활동:"})," 각 장소에서 활동 선택"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"대화:"})," 캐릭터 탭에서 대화 상대 선택"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"게임 진행"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"저장/불러오기:"})," 상단 버튼 사용"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"인벤토리:"})," 아이템 사용 및 관리"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"던전:"}),' "던전 입장" 버튼으로 탐험']}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"캐릭터 카드:"})," 히로인 상세 정보 확인"]})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"⚙️ 게임 시스템"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-pink-300 mb-3",children:"💕 호감도 시스템"}),e.jsxs("div",{className:"text-purple-200 space-y-2",children:[e.jsx("p",{children:"• 캐릭터와의 대화나 선물을 통해 호감도가 상승합니다"}),e.jsx("p",{children:"• 호감도에 따라 다른 대화와 이벤트가 발생합니다"}),e.jsx("p",{children:"• 높은 호감도는 특별한 엔딩으로 이어질 수 있습니다"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-3",children:"📊 스탯 시스템"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-purple-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"지력 (Intelligence)"}),e.jsx("div",{className:"text-sm",children:"학습 활동의 효과 증가"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"매력 (Charm)"}),e.jsx("div",{className:"text-sm",children:"캐릭터와의 관계 개선"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"체력 (Stamina)"}),e.jsx("div",{className:"text-sm",children:"활동 지속 능력"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"힘 (Strength)"}),e.jsx("div",{className:"text-sm",children:"던전 탐험 및 전투"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"민첩 (Agility)"}),e.jsx("div",{className:"text-sm",children:"회피 및 속도"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"운 (Luck)"}),e.jsx("div",{className:"text-sm",children:"특별 이벤트 발생률"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-3",children:"⏰ 시간 시스템"}),e.jsxs("div",{className:"text-purple-200 space-y-2",children:[e.jsx("p",{children:"• 하루는 5개의 시간대로 나뉩니다: 아침, 점심, 오후, 저녁, 밤"}),e.jsx("p",{children:"• 각 시간대마다 다른 활동과 캐릭터를 만날 수 있습니다"}),e.jsx("p",{children:"• 총 30일의 제한된 시간 내에 목표를 달성해야 합니다"})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"👥 캐릭터 소개"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-pink-500/20 p-4 rounded-lg border border-pink-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:"🌸"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"사쿠라"}),e.jsx("p",{className:"text-pink-300",children:"검술부 에이스"})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"강하고 당당한 성격의 검술부 부장. 정의감이 강하고 친구들을 아끼는 마음이 깊습니다."})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-lg border border-blue-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:"📚"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"유키"}),e.jsx("p",{className:"text-blue-300",children:"도서부 부장"})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"조용하고 지적인 성격의 도서부 부장. 책을 사랑하며 깊은 지식을 가지고 있습니다."})]}),e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg border border-purple-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:"🌙"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"루나"}),e.jsx("p",{className:"text-purple-300",children:"마법학부 수석"})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"신비로운 마법학부의 수석. 천재적인 마법 실력을 가지고 있지만 어딘가 외로워 보입니다."})]}),e.jsxs("div",{className:"bg-gray-500/20 p-4 rounded-lg border border-gray-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:"❓"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"???"}),e.jsx("p",{className:"text-gray-300",children:"수수께끼의 전학생"})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"정체를 알 수 없는 신비한 전학생. 특별한 조건에서만 만날 수 있습니다."})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"💡 게임 팁"}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:"▶"}),e.jsx("p",{children:"각 캐릭터는 선호하는 시간대와 장소가 있습니다. 캐릭터의 일정을 파악해보세요!"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:"▶"}),e.jsx("p",{children:"스탯을 균형 있게 키우는 것보다는 목표에 맞게 집중하는 것이 효과적입니다."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:"▶"}),e.jsx("p",{children:"선물을 주기 전에 각 캐릭터가 좋아하는 아이템을 확인해보세요."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:"▶"}),e.jsx("p",{children:"던전에서는 좋은 아이템을 얻을 수 있지만, 충분한 준비가 필요합니다."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:"▶"}),e.jsx("p",{children:"이벤트는 특정 조건에서 발생합니다. 다양한 선택을 시도해보세요!"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:"▶"}),e.jsx("p",{children:"게임을 자주 저장하여 다양한 선택지를 실험해볼 수 있습니다."})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"🏆 엔딩 정보"}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsx("p",{children:"게임에는 여러 가지 엔딩이 준비되어 있습니다:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-pink-500/20 p-3 rounded border border-pink-400/30",children:[e.jsx("div",{className:"font-semibold text-pink-300",children:"💖 캐릭터 엔딩"}),e.jsx("div",{className:"text-sm",children:"특정 캐릭터와 높은 호감도 달성"})]}),e.jsxs("div",{className:"bg-green-500/20 p-3 rounded border border-green-400/30",children:[e.jsx("div",{className:"font-semibold text-green-300",children:"😊 굿 엔딩"}),e.jsx("div",{className:"text-sm",children:"전반적으로 좋은 성과 달성"})]}),e.jsxs("div",{className:"bg-blue-500/20 p-3 rounded border border-blue-400/30",children:[e.jsx("div",{className:"font-semibold text-blue-300",children:"😐 노멀 엔딩"}),e.jsx("div",{className:"text-sm",children:"평범한 학원 생활 완주"})]}),e.jsxs("div",{className:"bg-gray-500/20 p-3 rounded border border-gray-400/30",children:[e.jsx("div",{className:"font-semibold text-gray-300",children:"😞 솔로 엔딩"}),e.jsx("div",{className:"text-sm",children:"낮은 호감도로 게임 종료"})]})]})]})]})]})})},bi={masterVolume:80,musicVolume:70,soundVolume:80,voiceVolume:80,difficulty:"normal",autoSave:!0,fastText:!1,skipRead:!1,fullscreen:!1,animations:!0},ab=()=>{const r=ke(),[i,d]=v.useState(bi),[o,u]=v.useState(!1);v.useEffect(()=>{const b=localStorage.getItem("academyDatingSimSettings");if(b)try{const D=JSON.parse(b);d({...bi,...D})}catch(D){console.error("Failed to load settings:",D)}},[]);const m=(b,D)=>{d(O=>({...O,[b]:D})),u(!0)},g=()=>{localStorage.setItem("academyDatingSimSettings",JSON.stringify(i)),u(!1),alert("설정이 저장되었습니다!")},y=()=>{confirm("모든 설정을 기본값으로 되돌리시겠습니까?")&&(d(bi),u(!0))},p=()=>{const b=JSON.stringify(i,null,2),D=new Blob([b],{type:"application/json"}),O=URL.createObjectURL(D),C=document.createElement("a");C.href=O,C.download="academy-dating-sim-settings.json",C.click(),URL.revokeObjectURL(O)},x=b=>{const D=b.target.files?.[0];if(D){const O=new FileReader;O.onload=C=>{try{const z=JSON.parse(C.target?.result);d({...bi,...z}),u(!0),alert("설정을 불러왔습니다!")}catch{alert("설정 파일을 읽을 수 없습니다.")}},O.readAsText(D)}},S=()=>{confirm("정말로 모든 게임 데이터를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.")&&confirm("진짜로 확실하시나요? 저장된 게임, 설정 등 모든 데이터가 삭제됩니다.")&&(localStorage.removeItem("academyDatingSim"),localStorage.removeItem("academyDatingSimSettings"),alert("모든 데이터가 삭제되었습니다."),r("/"))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:"게임 설정"}),e.jsxs("div",{className:"flex gap-2",children:[o&&e.jsx("button",{onClick:g,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition",children:"💾 저장"}),e.jsx("button",{onClick:()=>r("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:"← 메인으로"})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"🔊 오디오 설정"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["마스터 볼륨: ",i.masterVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.masterVolume,onChange:b=>m("masterVolume",parseInt(b.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["음악 볼륨: ",i.musicVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.musicVolume,onChange:b=>m("musicVolume",parseInt(b.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["효과음 볼륨: ",i.soundVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.soundVolume,onChange:b=>m("soundVolume",parseInt(b.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:["음성 볼륨: ",i.voiceVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.voiceVolume,onChange:b=>m("voiceVolume",parseInt(b.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"🎮 게임플레이 설정"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-3",children:"난이도"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["easy","normal","hard"].map(b=>e.jsxs("button",{onClick:()=>m("difficulty",b),className:`p-3 rounded-lg border transition ${i.difficulty===b?"bg-purple-600 border-purple-400 text-white":"bg-purple-800/30 border-purple-600/30 text-purple-200 hover:bg-purple-700/40"}`,children:[b==="easy"&&"🟢 쉬움",b==="normal"&&"🟡 보통",b==="hard"&&"🔴 어려움"]},b))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.autoSave,onChange:b=>m("autoSave",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:"자동 저장"})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.fastText,onChange:b=>m("fastText",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:"빠른 텍스트"})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.skipRead,onChange:b=>m("skipRead",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:"읽은 텍스트 건너뛰기"})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.animations,onChange:b=>m("animations",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:"애니메이션 효과"})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"🖥️ 화면 설정"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.fullscreen,onChange:b=>m("fullscreen",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:"전체화면 모드"})]})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"📁 데이터 관리"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("button",{onClick:p,className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:"📤 설정 내보내기"}),e.jsxs("label",{className:"px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition flex items-center justify-center gap-2 cursor-pointer",children:["📥 설정 가져오기",e.jsx("input",{type:"file",accept:".json",onChange:x,className:"hidden"})]}),e.jsx("button",{onClick:y,className:"px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:"🔄 기본값으로"}),e.jsx("button",{onClick:S,className:"px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:"🗑️ 모든 데이터 삭제"})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"💾 저장/불러오기"}),e.jsxs("div",{className:"text-purple-200 space-y-4",children:[e.jsx("p",{children:"게임 저장과 불러오기는 게임 화면에서 사용할 수 있습니다."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"자동 저장"}),e.jsx("p",{className:"text-sm",children:"주요 이벤트마다 자동으로 게임이 저장됩니다."})]}),e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"수동 저장"}),e.jsx("p",{className:"text-sm",children:"게임 화면에서 언제든지 저장 버튼을 눌러 저장할 수 있습니다."})]})]})]})]}),o&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-orange-600 text-white p-4 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"⚠️"}),e.jsx("span",{children:"저장되지 않은 변경사항이 있습니다"}),e.jsx("button",{onClick:g,className:"ml-2 px-3 py-1 bg-white text-orange-600 rounded hover:bg-gray-100 transition",children:"저장"})]})})]})})},sb=()=>{const{player:r}=re(),[i,d]=v.useState("heroines"),o={heroines:r.metHeroines||[],monsters:r.defeatedMonsterTypes||[],items:r.collectedItems||[],endings:r.unlockedEndings||[]},u=[{id:"heroines",name:"히로인",icon:"💕"},{id:"monsters",name:"몬스터",icon:"👾"},{id:"items",name:"아이템",icon:"📦"},{id:"endings",name:"엔딩",icon:"🎭"}],m=Object.entries(qa).map(([C,z])=>({id:C,name:z.name,description:z.role||"",icon:z.sprite||"👤",category:"heroines",unlocked:o.heroines.includes(C),affection:r.affection?.[C]||0})),g=[{id:"slime",name:"슬라임",description:"끈적끈적한 몬스터",icon:"🟢"},{id:"goblin",name:"고블린",description:"작고 교활한 몬스터",icon:"👺"},{id:"skeleton",name:"스켈레톤",description:"언데드 전사",icon:"💀"},{id:"orc",name:"오크",description:"거대한 전사",icon:"👹"},{id:"ghost",name:"유령",description:"영혼 몬스터",icon:"👻"},{id:"vampire",name:"뱀파이어",description:"피를 빨아먹는 언데드",icon:"🧛"},{id:"ice_golem",name:"얼음 골렘",description:"얼음으로 된 거인",icon:"🧊"},{id:"frost_spirit",name:"서리 정령",description:"차가운 정령",icon:"❄️"},{id:"lava_serpent",name:"용암 뱀",description:"불타는 뱀",icon:"🔥"},{id:"flame_elemental",name:"화염 정령",description:"불의 정령",icon:"🔥"},{id:"dark_knight",name:"다크 나이트",description:"타락한 기사 (보스)",icon:"⚔️"},{id:"lich_king",name:"리치 킹",description:"언데드의 왕 (보스)",icon:"👑"},{id:"ice_queen",name:"얼음 여왕",description:"얼음의 지배자 (보스)",icon:"👸"},{id:"fire_dragon",name:"화염 드래곤",description:"불의 용 (보스)",icon:"🐉"}].map(C=>({...C,category:"monsters",unlocked:o.monsters.includes(C.id)})),y=[{id:"health_potion",name:"체력 포션",description:"HP를 회복한다",icon:"🧪",rarity:"common"},{id:"mana_potion",name:"마나 포션",description:"MP를 회복한다",icon:"💙",rarity:"common"},{id:"sword",name:"검",description:"기본적인 무기",icon:"⚔️",rarity:"common"},{id:"shield",name:"방패",description:"방어구",icon:"🛡️",rarity:"common"},{id:"magic_staff",name:"마법 지팡이",description:"마법 공격력 증가",icon:"🔮",rarity:"rare"},{id:"dragon_scale",name:"드래곤 비늘",description:"전설의 재료",icon:"🐉",rarity:"legendary"},{id:"phoenix_feather",name:"피닉스 깃털",description:"부활의 힘",icon:"🪶",rarity:"legendary"},{id:"crystal_heart",name:"크리스탈 하트",description:"순수한 마력의 결정",icon:"💎",rarity:"epic"},{id:"ancient_tome",name:"고대의 서",description:"잊혀진 지식",icon:"📚",rarity:"epic"},{id:"golden_apple",name:"황금 사과",description:"신의 과실",icon:"🍎",rarity:"legendary"}].map(C=>({...C,category:"items",unlocked:o.items.includes(C.id)})),p=[{id:"true_end_luna",name:"루나 트루 엔딩",description:"루나와의 진정한 사랑",icon:"🌙"},{id:"true_end_sakura",name:"사쿠라 트루 엔딩",description:"사쿠라와의 진정한 사랑",icon:"🌸"},{id:"true_end_ice",name:"아이스 트루 엔딩",description:"아이스와의 진정한 사랑",icon:"❄️"},{id:"true_end_rose",name:"로즈 트루 엔딩",description:"로즈와의 진정한 사랑",icon:"🌹"},{id:"true_end_star",name:"스타 트루 엔딩",description:"스타와의 진정한 사랑",icon:"⭐"},{id:"harem_ending",name:"하렘 엔딩",description:"모두와 함께하는 미래",icon:"👑"},{id:"normal_ending",name:"노멀 엔딩",description:"평범한 학원 생활",icon:"🎓"},{id:"bad_ending",name:"배드 엔딩",description:"슬픈 결말",icon:"💔"},{id:"secret_ending",name:"시크릿 엔딩",description:"숨겨진 진실",icon:"🔐"},{id:"legend_ending",name:"전설 엔딩",description:"전설이 되다",icon:"🏆"}].map(C=>({...C,category:"endings",unlocked:o.endings.includes(C.id)})),S=(()=>{switch(i){case"heroines":return m;case"monsters":return g;case"items":return y;case"endings":return p;default:return[]}})(),b=S.filter(C=>C.unlocked).length,D=Math.floor(b/S.length*100),O=C=>{switch(C){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"📚 도감"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{children:"수집률"}),e.jsxs("span",{className:"font-bold",children:[b," / ",S.length]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-400 h-full rounded-full transition-all",style:{width:`${D}%`}})}),e.jsxs("div",{className:"text-center mt-2 text-xl font-bold",children:[D,"%"]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(C=>e.jsxs("button",{onClick:()=>d(C.id),className:`px-4 py-2 rounded-lg transition-all ${i===C.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("span",{className:"mr-2",children:C.icon}),C.name]},C.id))})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:S.map(C=>e.jsxs("div",{className:`relative rounded-xl p-4 transition-all ${C.unlocked?"bg-gradient-to-br from-white/20 to-white/10 border-2 border-white/30":"bg-black/30 border-2 border-white/5"}`,children:[C.rarity&&C.unlocked&&e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-bold text-white bg-gradient-to-r ${O(C.rarity)}`,children:C.rarity.toUpperCase()}),e.jsx("div",{className:`text-5xl text-center mb-3 ${C.unlocked?"":"grayscale opacity-30"}`,children:C.unlocked?C.icon:"❓"}),e.jsx("h3",{className:`font-bold text-center ${C.unlocked?"text-white":"text-white/30"}`,children:C.unlocked?C.name:"???"}),C.unlocked&&e.jsx("p",{className:"text-xs text-white/70 text-center mt-2",children:C.description}),C.category==="heroines"&&C.unlocked&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:"호감도"}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-red-400 h-full rounded-full",style:{width:`${Math.min(C.affection,100)}%`}})}),e.jsxs("div",{className:"text-xs text-center text-white/80 mt-1",children:[C.affection,"/100"]})]}),!C.unlocked&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-3xl opacity-20",children:"🔒"})})]},C.id))}),S.length===0&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 text-center text-white",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📭"}),e.jsx("p",{className:"text-xl",children:"아직 수집한 항목이 없습니다."}),e.jsx("p",{className:"text-white/70 mt-2",children:"게임을 플레이하며 다양한 컬렉션을 모아보세요!"})]})]})})};class Us{constructor(){this.bgmAudio=null,this.sfxVolume=.5,this.bgmVolume=.3,this.isMuted=!1,this.bgmTracks={menu:"/sounds/bgm/menu.mp3",game:"/sounds/bgm/game.mp3",battle:"/sounds/bgm/battle.mp3",dungeon:"/sounds/bgm/dungeon.mp3",victory:"/sounds/bgm/victory.mp3",romantic:"/sounds/bgm/romantic.mp3"},this.sfxTracks={click:"/sounds/sfx/click.mp3",hover:"/sounds/sfx/hover.mp3",success:"/sounds/sfx/success.mp3",error:"/sounds/sfx/error.mp3",levelUp:"/sounds/sfx/levelup.mp3",attack:"/sounds/sfx/attack.mp3",damage:"/sounds/sfx/damage.mp3",heal:"/sounds/sfx/heal.mp3",coin:"/sounds/sfx/coin.mp3",open:"/sounds/sfx/open.mp3",close:"/sounds/sfx/close.mp3",notification:"/sounds/sfx/notification.mp3"};const i=localStorage.getItem("soundSettings");if(i){const d=JSON.parse(i);this.sfxVolume=d.sfxVolume??.5,this.bgmVolume=d.bgmVolume??.3,this.isMuted=d.isMuted??!1}}static getInstance(){return Us.instance||(Us.instance=new Us),Us.instance}playBGM(i){try{this.bgmAudio&&(this.bgmAudio.pause(),this.bgmAudio.currentTime=0),this.bgmAudio=new Audio(this.bgmTracks[i]),this.bgmAudio.volume=this.isMuted?0:this.bgmVolume,this.bgmAudio.loop=!0;const d=this.bgmAudio.play();d!==void 0&&d.catch(o=>{console.log("BGM autoplay prevented:",o)})}catch(d){console.error("Error playing BGM:",d)}}stopBGM(){this.bgmAudio&&(this.bgmAudio.pause(),this.bgmAudio.currentTime=0)}pauseBGM(){this.bgmAudio&&this.bgmAudio.pause()}resumeBGM(){this.bgmAudio&&!this.isMuted&&this.bgmAudio.play().catch(i=>{console.log("BGM resume prevented:",i)})}playSFX(i){if(!this.isMuted)try{const d=new Audio(this.sfxTracks[i]);d.volume=this.sfxVolume;const o=d.play();o!==void 0&&o.catch(u=>{console.log("SFX play prevented:",u)})}catch(d){console.error("Error playing SFX:",d)}}setSFXVolume(i){this.sfxVolume=Math.max(0,Math.min(1,i)),this.saveSettings()}setBGMVolume(i){this.bgmVolume=Math.max(0,Math.min(1,i)),this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings()}toggleMute(){return this.isMuted=!this.isMuted,this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings(),this.isMuted}setMute(i){this.isMuted=i,this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings()}getSFXVolume(){return this.sfxVolume}getBGMVolume(){return this.bgmVolume}isMutedStatus(){return this.isMuted}saveSettings(){const i={sfxVolume:this.sfxVolume,bgmVolume:this.bgmVolume,isMuted:this.isMuted};localStorage.setItem("soundSettings",JSON.stringify(i))}playClickSound(){this.playSFX("click")}playHoverSound(){this.playSFX("hover")}playSuccessSound(){this.playSFX("success")}playErrorSound(){this.playSFX("error")}playLevelUpSound(){this.playSFX("levelUp")}playCoinSound(){this.playSFX("coin")}playNotificationSound(){this.playSFX("notification")}playAttackSound(){this.playSFX("attack")}playDamageSound(){this.playSFX("damage")}playHealSound(){this.playSFX("heal")}}const Ge=Us.getInstance(),lb=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState([]),[u,m]=v.useState("daily"),[g,y]=v.useState(null),p=[{id:"daily_talk",title:"친목 도모",description:"히로인과 3번 대화하기",icon:"💬",requirement:{type:"talk",target:3},reward:{gold:500,exp:100}},{id:"daily_battle",title:"전투 훈련",description:"몬스터 5마리 처치",icon:"⚔️",requirement:{type:"battle",target:5},reward:{gold:800,exp:150}},{id:"daily_dungeon",title:"던전 탐험",description:"던전 1층 클리어",icon:"🏰",requirement:{type:"dungeon",target:1},reward:{gold:1e3,exp:200}},{id:"daily_shop",title:"쇼핑",description:"상점에서 아이템 구매",icon:"🛍️",requirement:{type:"shop",target:1},reward:{gold:300,exp:50}},{id:"daily_minigame",title:"미니게임 마스터",description:"미니게임 2회 플레이",icon:"🎮",requirement:{type:"minigame",target:2},reward:{gold:600,exp:120}}],x=[{id:"weekly_affection",title:"인기스타",description:"총 호감도 50 올리기",icon:"❤️",requirement:{type:"affection",target:50},reward:{gold:5e3,exp:1e3,achievementPoints:10}},{id:"weekly_monster",title:"몬스터 헌터",description:"몬스터 50마리 처치",icon:"👾",requirement:{type:"monster",target:50},reward:{gold:8e3,exp:1500,items:["rare_weapon"]}},{id:"weekly_level",title:"성장의 증거",description:"레벨 5 올리기",icon:"⭐",requirement:{type:"level",target:5},reward:{gold:1e4,exp:2e3,achievementPoints:20}}],S=[{id:"special_boss",title:"보스 레이드",description:"보스 몬스터 처치",icon:"🐉",requirement:{type:"boss",target:1},reward:{gold:2e4,exp:5e3,items:["legendary_item"]}},{id:"special_perfect",title:"완벽한 하루",description:"모든 일일 퀘스트 완료",icon:"🏆",requirement:{type:"all_daily",target:5},reward:{gold:15e3,achievementPoints:50}}];v.useEffect(()=>{const j=new Date().toDateString();if(localStorage.getItem("lastQuestDate")!==j){const w=p.map(Y=>({...Y,type:"daily",requirement:{...Y.requirement,current:0},completed:!1,claimed:!1})),A=new Date().getDay()===1?x.map(Y=>({...Y,type:"weekly",requirement:{...Y.requirement,current:0},completed:!1,claimed:!1})):b("weekly"),k=S.map(Y=>({...Y,type:"special",requirement:{...Y.requirement,current:0},completed:!1,claimed:!1})),M=[...w,...A,...k];o(M),localStorage.setItem("lastQuestDate",j),localStorage.setItem("dailyQuests",JSON.stringify(M))}else{const w=localStorage.getItem("dailyQuests");w&&o(JSON.parse(w))}},[]);const b=j=>{const N=localStorage.getItem("dailyQuests");return N?JSON.parse(N).filter(T=>T.type===j):[]},D=j=>{if(!j.completed||j.claimed)return;const N=j.reward;let w={...r};N.gold&&(w.gold=r.gold+N.gold),N.exp&&(w.experience=r.experience+N.exp),N.achievementPoints&&(w.achievementPoints=(r.achievementPoints||0)+N.achievementPoints),i(w);const T=d.map(A=>A.id===j.id?{...A,claimed:!0}:A);o(T),localStorage.setItem("dailyQuests",JSON.stringify(T)),y(j),Ge.playCoinSound(),setTimeout(()=>{y(null)},2e3)},O=d.filter(j=>j.type===u),C=O.filter(j=>j.completed).length,z=O.length;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-800 to-pink-900 p-4",children:[g&&e.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-bounce-in",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white p-4 rounded-lg shadow-2xl",children:[e.jsx("div",{className:"font-bold text-lg mb-2",children:"보상 획득!"}),e.jsxs("div",{className:"flex items-center gap-3",children:[g.reward.gold&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"💰"}),e.jsxs("span",{children:["+",g.reward.gold]})]}),g.reward.exp&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"⭐"}),e.jsxs("span",{children:["+",g.reward.exp," EXP"]})]})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"📋 일일 퀘스트"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-2",children:[e.jsx("span",{children:"오늘의 진행도"}),e.jsxs("span",{children:[C," / ",z]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-400 h-full rounded-full transition-all",style:{width:`${C/z*100}%`}})})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex gap-2",children:["daily","weekly","special"].map(j=>e.jsxs("button",{onClick:()=>m(j),className:`px-4 py-2 rounded-lg transition-all flex-1 ${u===j?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[j==="daily"&&"일일",j==="weekly"&&"주간",j==="special"&&"특별"]},j))})}),e.jsx("div",{className:"space-y-4",children:O.map(j=>e.jsx("div",{className:`bg-black/30 backdrop-blur rounded-xl p-4 transition-all ${j.completed?"border-2 border-green-400/50":"border-2 border-white/10"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`text-4xl ${j.completed?"":"opacity-50"}`,children:j.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`font-bold text-lg ${j.completed?"text-green-400":"text-white"}`,children:j.title}),j.completed&&!j.claimed&&e.jsx("span",{className:"bg-green-400 text-black text-xs px-2 py-1 rounded-full font-bold",children:"완료!"}),j.claimed&&e.jsx("span",{className:"bg-gray-500 text-white text-xs px-2 py-1 rounded-full",children:"수령 완료"})]}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:j.description}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[e.jsx("span",{children:"진행도"}),e.jsxs("span",{children:[j.requirement.current," / ",j.requirement.target]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-full rounded-full transition-all ${j.completed?"bg-gradient-to-r from-green-400 to-emerald-400":"bg-gradient-to-r from-blue-400 to-purple-400"}`,style:{width:`${j.requirement.current/j.requirement.target*100}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-sm",children:[e.jsx("span",{className:"text-white/60",children:"보상:"}),j.reward.gold&&e.jsxs("span",{className:"text-yellow-400",children:["💰 ",j.reward.gold]}),j.reward.exp&&e.jsxs("span",{className:"text-blue-400",children:["⭐ ",j.reward.exp," EXP"]}),j.reward.achievementPoints&&e.jsxs("span",{className:"text-purple-400",children:["🏆 ",j.reward.achievementPoints,"P"]})]})]}),j.completed&&!j.claimed&&e.jsx("button",{onClick:()=>D(j),className:"bg-gradient-to-r from-green-400 to-emerald-400 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg transition-all animate-pulse",children:"수령"})]})},j.id))}),O.length===0&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 text-center text-white",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📭"}),e.jsx("p",{className:"text-xl",children:"현재 진행 중인 퀘스트가 없습니다."})]})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes bounce-in {
          0% {
            transform: translateX(-50%) scale(0.5);
            opacity: 0;
          }
          50% {
            transform: translateX(-50%) scale(1.1);
          }
          100% {
            transform: translateX(-50%) scale(1);
            opacity: 1;
          }
        }

        .animate-bounce-in {
          animation: bounce-in 0.5s ease-out;
        }
      `})]})},nb=()=>{const{player:r,gameDate:i,updatePlayer:d}=re(),[o,u]=v.useState(i.month),[m,g]=v.useState(null),[y,p]=v.useState(r.participatedEvents||[]),x=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],S=[{id:"cherry_blossom",name:"벚꽃 축제",description:"봄의 시작을 알리는 벚꽃 축제! 히로인과 함께 벚꽃을 구경하세요.",icon:"🌸",type:"festival",date:15,month:4,duration:3,rewards:{affection:{sakura:20,luna:10,ice:10,rose:10,star:10}}},{id:"spring_sports",name:"봄 체육대회",description:"학원 전체가 참가하는 체육대회! 우승하면 큰 보상이!",icon:"🏃",type:"competition",date:25,month:5,duration:2,rewards:{gold:5e3,exp:1e3,items:["trophy"]},requirements:{level:10}},{id:"summer_festival",name:"여름 축제",description:"불꽃놀이와 함께하는 여름 축제! 유카타를 입고 참가하세요.",icon:"🎆",type:"festival",date:20,month:7,duration:3,rewards:{affection:{luna:15,sakura:15,ice:15,rose:15,star:15}}},{id:"beach_event",name:"해변 이벤트",description:"모두 함께 해변으로! 수영복 이벤트도 있어요.",icon:"🏖️",type:"special",date:10,month:8,duration:7,rewards:{gold:3e3,affection:{ice:20,rose:20}}},{id:"harvest_festival",name:"수확 축제",description:"가을 수확을 축하하는 축제. 맛있는 음식이 가득!",icon:"🍂",type:"festival",date:15,month:10,duration:3,rewards:{gold:4e3,items:["harvest_basket"]}},{id:"halloween",name:"할로윈 파티",description:"으스스한 할로윈 파티! 코스튬 대회도 열립니다.",icon:"🎃",type:"special",date:31,month:10,duration:1,rewards:{exp:2e3,items:["halloween_costume"],affection:{star:25}}},{id:"culture_festival",name:"문화제",description:"학원 최대 행사인 문화제! 각 반이 준비한 행사를 즐기세요.",icon:"🎭",type:"festival",date:20,month:11,duration:5,rewards:{gold:1e4,exp:3e3,affection:{luna:20,sakura:20,ice:20,rose:20,star:20}},requirements:{level:15}},{id:"christmas",name:"크리스마스",description:"로맨틱한 크리스마스! 특별한 선물을 준비하세요.",icon:"🎄",type:"special",date:24,month:12,duration:2,rewards:{items:["christmas_gift"],affection:{luna:30,sakura:30,ice:30,rose:30,star:30}}},{id:"new_year",name:"신년 축제",description:"새해를 맞이하는 축제! 신사 참배와 함께.",icon:"🎍",type:"seasonal",date:1,month:1,duration:3,rewards:{gold:8888,exp:2e3,items:["lucky_charm"]}},{id:"valentines",name:"발렌타인 데이",description:"사랑을 고백하는 날! 초콜릿을 주고받으세요.",icon:"💝",type:"special",date:14,month:2,duration:1,rewards:{affection:{luna:50,sakura:50,ice:50,rose:50,star:50},items:["chocolate"]},requirements:{affection:{luna:30}}},{id:"midterm_exam",name:"중간고사",description:"학업 성취도를 평가하는 중간고사. 좋은 성적을 받으면 보상이!",icon:"📝",type:"competition",date:15,month:6,duration:3,rewards:{gold:3e3,exp:1500,items:["study_guide"]},requirements:{level:5}},{id:"final_exam",name:"기말고사",description:"한 학기를 마무리하는 기말고사. 최고 성적을 목표로!",icon:"📚",type:"competition",date:15,month:12,duration:3,rewards:{gold:5e3,exp:2500,items:["diploma"]},requirements:{level:20}}],b=N=>S.filter(w=>w.month===N),D=N=>{if(N.requirements){if(N.requirements.level&&r.level<N.requirements.level){alert(`레벨 ${N.requirements.level} 이상이어야 참가할 수 있습니다.`);return}if(N.requirements.affection){for(const[A,k]of Object.entries(N.requirements.affection))if((r.affection?.[A]||0)<k){alert(`${A}의 호감도가 ${k} 이상이어야 참가할 수 있습니다.`);return}}}if(y.includes(N.id)){alert("이미 참가한 이벤트입니다!");return}let w={...r};if(N.rewards.gold&&(w.gold=r.gold+N.rewards.gold),N.rewards.exp&&(w.experience=r.experience+N.rewards.exp),N.rewards.affection){w.affection={...r.affection};for(const[A,k]of Object.entries(N.rewards.affection))w.affection[A]=(w.affection[A]||0)+k}N.rewards.items&&(w.inventory=[...r.inventory||[],...N.rewards.items.map(A=>({id:A,quantity:1}))]);const T=[...y,N.id];p(T),w.participatedEvents=T,d(w),Ge.playSuccessSound(),alert(`${N.name}에 참가했습니다! 보상을 획득했습니다.`),g(null)},C=(()=>{const N=new Date(i.year,o-1,1).getDay(),w=new Date(i.year,o,0).getDate(),T=[];for(let A=0;A<N;A++)T.push(null);for(let A=1;A<=w;A++)T.push(A);return T})(),z=b(o),j=N=>N?z.find(w=>N>=w.date&&N<w.date+w.duration):null;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"📅 이벤트 캘린더"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-white",children:[e.jsx("div",{className:"text-sm opacity-80",children:"현재 날짜"}),e.jsxs("div",{className:"text-xl font-bold",children:[i.year,"년 ",i.month,"월 ",i.day,"일"]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsx("button",{onClick:()=>u(o===1?12:o-1),className:"p-2 hover:bg-white/20 rounded-lg transition-all",children:"◀"}),e.jsx("h2",{className:"text-2xl font-bold",children:x[o-1]}),e.jsx("button",{onClick:()=>u(o===12?1:o+1),className:"p-2 hover:bg-white/20 rounded-lg transition-all",children:"▶"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 text-white mb-2",children:["일","월","화","수","목","금","토"].map(N=>e.jsx("div",{className:"text-center font-bold text-sm opacity-80",children:N},N))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:C.map((N,w)=>{const T=j(N),A=N===i.day&&o===i.month;return e.jsx("div",{onClick:()=>T&&g(T),className:`
                      aspect-square rounded-lg p-2 flex flex-col items-center justify-center
                      ${N?"bg-white/10 hover:bg-white/20 cursor-pointer":""}
                      ${A?"ring-2 ring-yellow-400":""}
                      ${T?"bg-gradient-to-br from-purple-500/30 to-pink-500/30":""}
                      transition-all
                    `,children:N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-white ${A?"font-bold":""}`,children:N}),T&&e.jsx("div",{className:"text-2xl mt-1",children:T.icon})]})},w)})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"이달의 이벤트"}),e.jsxs("div",{className:"space-y-3",children:[z.map(N=>{const w=y.includes(N.id);return e.jsx("div",{onClick:()=>g(N),className:`
                      bg-white/10 rounded-lg p-3 cursor-pointer transition-all
                      ${w?"opacity-50":"hover:bg-white/20"}
                    `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:N.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:N.name}),e.jsxs("div",{className:"text-xs text-white/70",children:[N.month,"월 ",N.date,"일 (",N.duration,"일간)"]}),w&&e.jsx("div",{className:"text-xs text-green-400 mt-1",children:"✓ 참가 완료"})]})]})},N.id)}),z.length===0&&e.jsx("div",{className:"text-white/50 text-center py-4",children:"이달은 이벤트가 없습니다."})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full border-2 border-white/20",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-5xl mb-3",children:m.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:m.name}),e.jsxs("div",{className:"text-white/70 text-sm mt-2",children:[m.month,"월 ",m.date,"일 ~ ",m.date+m.duration-1,"일"]})]}),e.jsx("p",{className:"text-white/90 mb-4",children:m.description}),m.requirements&&e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:"참가 조건"}),m.requirements.level&&e.jsxs("div",{className:"text-white/70 text-sm",children:["레벨 ",m.requirements.level," 이상"]}),m.requirements.affection&&e.jsx("div",{className:"text-white/70 text-sm",children:"호감도 조건 필요"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:"보상"}),e.jsxs("div",{className:"space-y-1",children:[m.rewards.gold&&e.jsxs("div",{className:"text-yellow-400 text-sm",children:["💰 ",m.rewards.gold," 골드"]}),m.rewards.exp&&e.jsxs("div",{className:"text-blue-400 text-sm",children:["⭐ ",m.rewards.exp," EXP"]}),m.rewards.affection&&e.jsx("div",{className:"text-pink-400 text-sm",children:"❤️ 호감도 상승"}),m.rewards.items&&e.jsx("div",{className:"text-green-400 text-sm",children:"📦 특별 아이템"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>D(m),disabled:y.includes(m.id),className:`
                    flex-1 py-3 rounded-lg font-bold transition-all
                    ${y.includes(m.id)?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg"}
                  `,children:y.includes(m.id)?"참가 완료":"참가하기"}),e.jsx("button",{onClick:()=>g(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-lg font-bold transition-all",children:"닫기"})]})]})})]})})},ib=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState("all"),[u,m]=v.useState(null),g=[{id:"health_potion_large",name:"대형 체력 포션",description:"HP를 100 회복한다",result:{id:"health_potion_large",quantity:1},materials:[{id:"health_potion",quantity:3},{id:"herb",quantity:2}],category:"consumable",requiredLevel:5,icon:"🧪"},{id:"iron_sword",name:"철검",description:"기본적인 철제 무기",result:{id:"iron_sword",quantity:1},materials:[{id:"iron_ore",quantity:5},{id:"wood",quantity:2}],category:"weapon",requiredLevel:3,icon:"⚔️"},{id:"magic_staff",name:"마법 지팡이",description:"마법 공격력을 증가시킨다",result:{id:"magic_staff",quantity:1},materials:[{id:"magic_crystal",quantity:3},{id:"ancient_wood",quantity:2},{id:"gold",quantity:100}],category:"weapon",requiredLevel:10,icon:"🔮"},{id:"leather_armor",name:"가죽 갑옷",description:"방어력을 증가시킨다",result:{id:"leather_armor",quantity:1},materials:[{id:"leather",quantity:5},{id:"thread",quantity:3}],category:"armor",requiredLevel:5,icon:"🦺"},{id:"crystal_ring",name:"크리스탈 반지",description:"마나를 증가시킨다",result:{id:"crystal_ring",quantity:1},materials:[{id:"crystal",quantity:2},{id:"silver",quantity:3}],category:"accessory",requiredLevel:8,icon:"💍"},{id:"dragon_scale_armor",name:"드래곤 비늘 갑옷",description:"최강의 방어구",result:{id:"dragon_scale_armor",quantity:1},materials:[{id:"dragon_scale",quantity:10},{id:"mythril",quantity:5},{id:"gold",quantity:1e3}],category:"armor",requiredLevel:25,icon:"🐉"},{id:"phoenix_feather_accessory",name:"불사조 깃털 부적",description:"한 번 부활할 수 있다",result:{id:"phoenix_feather_accessory",quantity:1},materials:[{id:"phoenix_feather",quantity:1},{id:"holy_water",quantity:5}],category:"accessory",requiredLevel:20,icon:"🪶"},{id:"elixir",name:"엘릭서",description:"HP와 MP를 완전 회복",result:{id:"elixir",quantity:1},materials:[{id:"health_potion_large",quantity:2},{id:"mana_potion_large",quantity:2},{id:"unicorn_horn",quantity:1}],category:"consumable",requiredLevel:15,icon:"🏺"}],y=[{id:"all",name:"전체",icon:"📦"},{id:"weapon",name:"무기",icon:"⚔️"},{id:"armor",name:"방어구",icon:"🛡️"},{id:"accessory",name:"액세서리",icon:"💎"},{id:"consumable",name:"소비",icon:"🧪"}],p=b=>b.materials.every(D=>{const O=r.inventory?.find(C=>C.id===D.id);return O&&O.quantity>=D.quantity}),x=b=>{if(r.level<b.requiredLevel){alert(`레벨 ${b.requiredLevel} 이상이어야 제작할 수 있습니다.`);return}if(!p(b)){alert("재료가 부족합니다!");return}let D=[...r.inventory||[]];b.materials.forEach(C=>{const z=D.findIndex(j=>j.id===C.id);z!==-1&&(D[z].quantity-=C.quantity,D[z].quantity<=0&&D.splice(z,1))});const O=D.find(C=>C.id===b.result.id);O?O.quantity+=b.result.quantity:D.push({...b.result}),i({inventory:D}),Ge.playSuccessSound(),alert(`${b.name}을(를) 제작했습니다!`)},S=d==="all"?g:g.filter(b=>b.category===d);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 via-brown-800 to-orange-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"🔨 크래프팅"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex gap-4",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("span",{className:"text-sm opacity-80",children:"레벨"}),e.jsx("div",{className:"font-bold",children:r.level})]}),e.jsxs("div",{className:"text-yellow-400",children:[e.jsx("span",{className:"text-sm opacity-80",children:"골드"}),e.jsx("div",{className:"font-bold",children:r.gold||0})]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(b=>e.jsxs("button",{onClick:()=>o(b.id),className:`px-4 py-2 rounded-lg transition-all ${d===b.id?"bg-gradient-to-r from-amber-500 to-orange-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("span",{className:"mr-2",children:b.icon}),b.name]},b.id))})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(b=>{const D=r.level>=b.requiredLevel&&p(b);return e.jsxs("div",{className:`bg-black/30 backdrop-blur rounded-xl p-4 transition-all ${D?"border-2 border-amber-400/50 hover:border-amber-400":"border-2 border-white/10 opacity-75"}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"text-4xl",children:b.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-white",children:b.name}),e.jsx("p",{className:"text-sm text-white/70",children:b.description}),e.jsxs("div",{className:"text-xs text-amber-400 mt-1",children:["Lv.",b.requiredLevel," 필요"]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2 mb-3",children:[e.jsx("div",{className:"text-sm font-bold text-white/80 mb-1",children:"재료"}),e.jsx("div",{className:"space-y-1",children:b.materials.map(O=>{const C=r.inventory?.find(j=>j.id===O.id),z=C&&C.quantity>=O.quantity;return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:z?"text-green-400":"text-red-400",children:O.id}),e.jsxs("span",{className:z?"text-green-400":"text-red-400",children:[C?.quantity||0," / ",O.quantity]})]},O.id)})})]}),e.jsx("button",{onClick:()=>x(b),disabled:!D,className:`w-full py-2 rounded-lg font-bold transition-all ${D?"bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:D?"제작하기":r.level<b.requiredLevel?"레벨 부족":"재료 부족"})]},b.id)})})]})})},rb=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState("overview"),[u,m]=v.useState(null),[g,y]=v.useState(!1),[p,x]=v.useState(""),S=[{id:"crimson_phoenix",name:"진홍의 불사조",description:"전투에 특화된 길드",icon:"🔥",level:15,exp:8500,maxExp:1e4,members:[],maxMembers:50,benefits:["공격력 +10%","던전 보상 +20%","전투 경험치 +15%"],treasury:15e4,ranking:1},{id:"azure_dragon",name:"푸른 용",description:"마법과 지식을 추구하는 길드",icon:"🐲",level:12,exp:6e3,maxExp:8e3,members:[],maxMembers:40,benefits:["마나 +20%","스킬 쿨다운 -10%","학습 속도 +25%"],treasury:12e4,ranking:2},{id:"golden_merchant",name:"황금 상단",description:"경제와 무역을 중시하는 길드",icon:"💰",level:10,exp:4500,maxExp:6e3,members:[],maxMembers:60,benefits:["상점 할인 20%","판매 가격 +15%","일일 골드 보너스"],treasury:5e5,ranking:3}],b=[{id:"daily_dungeon",name:"일일 던전 클리어",description:"길드원들이 던전을 10회 클리어",reward:{guildExp:100,treasury:5e3},requirement:"던전 10회 클리어",difficulty:"easy",progress:3,maxProgress:10},{id:"boss_raid",name:"보스 레이드",description:"강력한 보스 처치",reward:{guildExp:500,treasury:2e4,items:["legendary_weapon"]},requirement:"레이드 보스 처치",difficulty:"hard",progress:0,maxProgress:1},{id:"guild_war",name:"길드 전쟁 승리",description:"다른 길드와의 전쟁에서 승리",reward:{guildExp:1e3,treasury:5e4},requirement:"길드전 승리",difficulty:"legendary",progress:0,maxProgress:1},{id:"resource_gathering",name:"자원 수집",description:"길드 창고에 자원 기부",reward:{guildExp:200,treasury:1e4},requirement:"자원 100개 기부",difficulty:"medium",progress:45,maxProgress:100}],D=[{id:"guild_blessing",name:"길드의 축복",description:"모든 스탯 +10 (24시간)",cost:1e4,icon:"✨"},{id:"guild_teleport",name:"길드 순간이동 주문서",description:"길드 홀로 즉시 이동",cost:1e3,icon:"🌀"},{id:"guild_exp_boost",name:"경험치 부스터",description:"경험치 +50% (1시간)",cost:5e3,icon:"⭐"},{id:"guild_weapon",name:"길드 전용 무기",description:"길드원만 사용 가능한 특별 무기",cost:5e4,icon:"⚔️"},{id:"guild_mount",name:"길드 탈것",description:"이동속도 +100%",cost:1e5,icon:"🐎"}],O=()=>{if(!p){alert("길드 이름을 입력해주세요.");return}if((r.gold||0)<5e4){alert("길드 창설에는 50,000 골드가 필요합니다.");return}const j={id:`guild_${Date.now()}`,name:p,description:"새로 창설된 길드",icon:"⚔️",level:1,exp:0,maxExp:1e3,members:[{id:r.id||"player",name:r.name,role:"leader",level:r.level,contribution:0,joinDate:new Date().toISOString(),avatar:"👤"}],maxMembers:20,benefits:["길드 창설자 버프"],treasury:0,ranking:999};m(j),i({gold:(r.gold||0)-5e4}),Ge.playSuccessSound(),y(!1)},C=j=>{const N={id:r.id||"player",name:r.name,role:"member",level:r.level,contribution:0,joinDate:new Date().toISOString(),avatar:"👤"};j.members.push(N),m(j),Ge.playSuccessSound(),alert(`${j.name} 길드에 가입했습니다!`)},z=j=>{switch(j){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";case"legendary":return"text-purple-400";default:return"text-white"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"⚔️ 길드 시스템"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]})}),u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"text-6xl",children:u.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:u.name}),e.jsx("p",{className:"text-white/70",children:u.description}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",u.level]}),e.jsxs("span",{className:"text-blue-400",children:["랭킹 #",u.ranking]}),e.jsxs("span",{className:"text-green-400",children:["멤버 ",u.members.length,"/",u.maxMembers]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white/80",children:"길드 금고"}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[u.treasury.toLocaleString()," G"]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:"길드 경험치"}),e.jsxs("span",{children:[u.exp," / ",u.maxExp]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-full rounded-full",style:{width:`${u.exp/u.maxExp*100}%`}})})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:e.jsx("div",{className:"flex gap-2",children:["overview","members","quests","shop"].map(j=>e.jsxs("button",{onClick:()=>o(j),className:`px-4 py-2 rounded-lg transition-all ${d===j?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[j==="overview"&&"📊 개요",j==="members"&&"👥 멤버",j==="quests"&&"📜 퀘스트",j==="shop"&&"🏪 상점"]},j))})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[d==="overview"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"길드 혜택"}),e.jsx("div",{className:"grid gap-2",children:u.benefits.map((j,N)=>e.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-purple-300",children:["✨ ",j]},N))})]}),d==="members"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"길드 멤버"}),e.jsx("div",{className:"space-y-2",children:u.members.map(j=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:j.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:j.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",j.level," | ",j.role==="leader"?"👑 길드장":j.role==="officer"?"⚔️ 간부":"👤 멤버"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/60",children:"기여도"}),e.jsx("div",{className:"text-yellow-400 font-bold",children:j.contribution})]})]},j.id))})]}),d==="quests"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"길드 퀘스트"}),e.jsx("div",{className:"grid gap-3",children:b.map(j=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:j.name}),e.jsx("div",{className:"text-sm text-white/70",children:j.description}),e.jsxs("div",{className:`text-sm mt-1 ${z(j.difficulty)}`,children:["난이도: ",j.difficulty.toUpperCase()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/60",children:"보상"}),e.jsxs("div",{className:"text-yellow-400",children:["+",j.reward.guildExp," EXP"]}),e.jsxs("div",{className:"text-green-400",children:["+",j.reward.treasury," G"]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:"진행도"}),e.jsxs("span",{children:[j.progress," / ",j.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-cyan-400 h-full rounded-full",style:{width:`${j.progress/j.maxProgress*100}%`}})})]})]},j.id))})]}),d==="shop"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"길드 상점"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:D.map(j=>e.jsx("div",{className:"bg-white/10 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:j.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:j.name}),e.jsx("div",{className:"text-sm text-white/70",children:j.description}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[j.cost," G"]}),e.jsx("button",{className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg text-sm font-bold hover:shadow-lg transition-all",children:"구매"})]})]})]})},j.id))})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"길드 가입/창설"}),e.jsx("button",{onClick:()=>y(!0),className:"w-full mb-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"🏰 길드 창설 (50,000 골드)"}),e.jsx("div",{className:"grid gap-4",children:S.map(j=>e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-5xl",children:j.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:j.name}),e.jsx("p",{className:"text-white/70 mb-2",children:j.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[e.jsxs("div",{className:"text-white/80",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",j.level]})," |",e.jsxs("span",{className:"text-blue-400",children:[" 랭킹 #",j.ranking]})]}),e.jsxs("div",{className:"text-white/80",children:["멤버: ",j.members.length,"/",j.maxMembers]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:j.benefits.map((N,w)=>e.jsx("span",{className:"bg-purple-500/30 px-2 py-1 rounded text-xs text-purple-300",children:N},w))}),e.jsx("button",{onClick:()=>C(j),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"가입하기"})]})]})},j.id))})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"길드 창설"}),e.jsx("input",{type:"text",value:p,onChange:j=>x(j.target.value),placeholder:"길드 이름 입력",className:"w-full p-3 rounded-lg bg-black/30 text-white placeholder-white/50 mb-4",maxLength:20}),e.jsxs("div",{className:"text-white/70 mb-4",children:[e.jsx("p",{children:"• 창설 비용: 50,000 골드"}),e.jsx("p",{children:"• 초기 멤버 제한: 20명"}),e.jsx("p",{children:"• 길드 레벨업으로 확장 가능"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:O,className:"flex-1 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold",children:"창설하기"}),e.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-2 bg-gray-600 text-white rounded-lg font-bold",children:"취소"})]})]})})]})]})})},cb=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState(null),[u,m]=v.useState(!1),[g,y]=v.useState([]),[p,x]=v.useState("care"),S=[{id:"cat_1",name:"루비",species:"마법 고양이",icon:"🐱",level:1,exp:0,maxExp:100,happiness:100,hunger:80,stats:{attack:10,defense:8,speed:15,intelligence:12},skills:["할퀴기","민첩"],rarity:"common"},{id:"dog_1",name:"맥스",species:"충성 강아지",icon:"🐕",level:1,exp:0,maxExp:100,happiness:100,hunger:70,stats:{attack:12,defense:10,speed:10,intelligence:8},skills:["물기","충성심"],rarity:"common"},{id:"dragon_1",name:"스파크",species:"아기 드래곤",icon:"🐉",level:1,exp:0,maxExp:150,happiness:80,hunger:60,stats:{attack:20,defense:15,speed:12,intelligence:18},skills:["화염 숨결","비행"],evolution:"adult_dragon",rarity:"legendary"},{id:"fox_1",name:"미스티",species:"구미호",icon:"🦊",level:1,exp:0,maxExp:120,happiness:90,hunger:75,stats:{attack:15,defense:12,speed:18,intelligence:20},skills:["환영","마법"],rarity:"epic"},{id:"bird_1",name:"스카이",species:"불사조",icon:"🦅",level:1,exp:0,maxExp:130,happiness:85,hunger:65,stats:{attack:18,defense:10,speed:25,intelligence:15},skills:["급강하","재생"],rarity:"epic"},{id:"rabbit_1",name:"모찌",species:"달토끼",icon:"🐰",level:1,exp:0,maxExp:90,happiness:95,hunger:85,stats:{attack:8,defense:6,speed:20,intelligence:10},skills:["점프","행운"],rarity:"rare"}],b=[{id:"basic_food",name:"기본 사료",icon:"🥫",hungerRestore:20,happinessBonus:5,cost:50},{id:"premium_food",name:"프리미엄 사료",icon:"🍖",hungerRestore:40,happinessBonus:15,cost:200},{id:"treat",name:"특별 간식",icon:"🍪",hungerRestore:10,happinessBonus:30,cost:150},{id:"magic_food",name:"마법 사료",icon:"✨",hungerRestore:50,happinessBonus:25,cost:500}],D=[{id:"attack_training",name:"공격 훈련",stat:"attack",cost:200,expGain:20,icon:"⚔️"},{id:"defense_training",name:"방어 훈련",stat:"defense",cost:200,expGain:20,icon:"🛡️"},{id:"speed_training",name:"속도 훈련",stat:"speed",cost:200,expGain:20,icon:"💨"},{id:"intelligence_training",name:"지능 훈련",stat:"intelligence",cost:200,expGain:20,icon:"🧠"}];v.useEffect(()=>{const w=localStorage.getItem("myPets");if(w)try{const A=JSON.parse(w);Array.isArray(A)&&y(A)}catch(A){console.error("Failed to load pets:",A)}const T=setInterval(()=>{y(A=>{const k=A.map(M=>({...M,hunger:Math.max(0,M.hunger-1),happiness:Math.max(0,M.happiness-.5)}));return localStorage.setItem("myPets",JSON.stringify(k)),k})},3e4);return()=>clearInterval(T)},[]);const O=w=>{const T=w.rarity==="legendary"?5e3:w.rarity==="epic"?2e3:w.rarity==="rare"?800:300;if((r.money||0)<T){alert(`${T} 골드가 필요합니다! 현재 보유: ${r.money}원`);return}if(g.length>=6){alert("최대 6마리까지만 입양할 수 있습니다!");return}const A={...w,id:`${w.id}_${Date.now()}`},k=[...g,A];y(k),localStorage.setItem("myPets",JSON.stringify(k));const M=(r.money||0)-T;i({money:M}),Ge.playSuccessSound(),alert(`${w.name}을(를) 입양했습니다! (${T}원 사용)`),m(!1)},C=(w,T)=>{if((r.money||0)<T.cost){alert("골드가 부족합니다!");return}const A=g.map(k=>k.id===w.id?{...k,hunger:Math.min(100,k.hunger+T.hungerRestore),happiness:Math.min(100,k.happiness+T.happinessBonus)}:k);y(A),i({money:(r.money||0)-T.cost}),Ge.playSuccessSound()},z=(w,T)=>{if((r.money||0)<T.cost){alert("골드가 부족합니다!");return}const A=g.map(k=>{if(k.id===w.id){const M=k.exp+T.expGain,Y=M>=k.maxExp;return{...k,exp:Y?M-k.maxExp:M,level:Y?k.level+1:k.level,maxExp:Y?k.maxExp*1.5:k.maxExp,stats:{...k.stats,[T.stat]:k.stats[T.stat]+(Y?5:2)}}}return k});y(A),i({money:(r.money||0)-T.cost}),Ge.playSuccessSound()},j=w=>{if(!w.evolution||w.level<10){alert("레벨 10 이상이어야 진화할 수 있습니다!");return}const T={...w,species:"성체 "+w.species,icon:"🐲",stats:{attack:w.stats.attack*2,defense:w.stats.defense*2,speed:w.stats.speed*1.5,intelligence:w.stats.intelligence*2},skills:[...w.skills,"진화의 힘"],evolution:void 0},A=g.map(k=>k.id===w.id?T:k);y(A),Ge.playLevelUpSound(),alert(`${w.name}이(가) 진화했습니다!`)},N=w=>{switch(w){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-emerald-800 to-teal-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"🐾 펫 시스템"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg transition-all",children:"🏪 펫 상점"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"나의 펫"}),g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🐾"}),e.jsx("p",{className:"text-white/70",children:"아직 펫이 없습니다. 펫 상점에서 입양해보세요!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(w=>e.jsx("div",{onClick:()=>o(w),className:`bg-gradient-to-br ${N(w.rarity)} p-0.5 rounded-xl cursor-pointer hover:scale-105 transition-all`,children:e.jsxs("div",{className:"bg-black/80 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-4xl",children:w.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsx("div",{className:"text-sm text-white/70",children:w.species}),e.jsxs("div",{className:"text-xs text-yellow-400",children:["Lv.",w.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/80 mb-1",children:[e.jsx("span",{children:"행복도"}),e.jsxs("span",{children:[Math.floor(w.happiness),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-red-400 h-full rounded-full",style:{width:`${w.happiness}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/80 mb-1",children:[e.jsx("span",{children:"배고픔"}),e.jsxs("span",{children:[Math.floor(w.hunger),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-400 h-full rounded-full",style:{width:`${w.hunger}%`}})})]})]})]})},w.id))})]}),d&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[e.jsx("div",{className:"text-8xl",children:d.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:d.name}),e.jsx("p",{className:"text-white/70",children:d.species}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",d.level]}),e.jsxs("span",{className:"text-blue-400",children:["EXP: ",d.exp,"/",d.maxExp]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"공격력"}),e.jsxs("div",{className:"text-white font-bold",children:["⚔️ ",d.stats.attack]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"방어력"}),e.jsxs("div",{className:"text-white font-bold",children:["🛡️ ",d.stats.defense]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"속도"}),e.jsxs("div",{className:"text-white font-bold",children:["💨 ",d.stats.speed]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:"지능"}),e.jsxs("div",{className:"text-white font-bold",children:["🧠 ",d.stats.intelligence]})]})]})]})]}),e.jsx("div",{className:"flex gap-2 mb-4",children:["care","train","battle","evolve"].map(w=>e.jsxs("button",{onClick:()=>x(w),className:`px-4 py-2 rounded-lg transition-all ${p===w?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[w==="care"&&"🍽️ 돌보기",w==="train"&&"💪 훈련",w==="battle"&&"⚔️ 전투",w==="evolve"&&"✨ 진화"]},w))}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[p==="care"&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(w=>e.jsx("button",{onClick:()=>C(d,w),className:"bg-black/30 rounded-lg p-3 hover:bg-black/40 transition-all text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:w.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsxs("div",{className:"text-xs text-white/60",children:["배고픔 +",w.hungerRestore," | 행복 +",w.happinessBonus]}),e.jsxs("div",{className:"text-sm text-yellow-400",children:[w.cost," G"]})]})]})},w.id))}),p==="train"&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:D.map(w=>e.jsx("button",{onClick:()=>z(d,w),className:"bg-black/30 rounded-lg p-3 hover:bg-black/40 transition-all text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:w.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsxs("div",{className:"text-xs text-white/60",children:["+",w.expGain," EXP"]}),e.jsxs("div",{className:"text-sm text-yellow-400",children:[w.cost," G"]})]})]})},w.id))}),p==="battle"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🚧"}),e.jsx("p",{className:"text-white/70",children:"펫 배틀 시스템 준비 중..."})]}),p==="evolve"&&e.jsx("div",{className:"text-center py-8",children:d.evolution?e.jsxs("div",{children:[e.jsx("div",{className:"text-6xl mb-4",children:"✨"}),e.jsx("p",{className:"text-white mb-4",children:"레벨 10에 진화 가능합니다!"}),e.jsx("button",{onClick:()=>j(d),disabled:d.level<10,className:`px-6 py-3 rounded-lg font-bold ${d.level>=10?"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:"진화시키기"})]}):e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-4",children:"🎯"}),e.jsx("p",{className:"text-white/70",children:"이 펫은 최종 진화 상태입니다."})]})})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900 to-emerald-900 rounded-xl p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"🏪 펫 상점"}),e.jsx("button",{onClick:()=>m(!1),className:"text-white hover:text-red-400 text-2xl",children:"✕"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(w=>{const T=w.rarity==="legendary"?5e3:w.rarity==="epic"?2e3:w.rarity==="rare"?800:300;return e.jsx("div",{className:`bg-gradient-to-br ${N(w.rarity)} p-0.5 rounded-xl`,children:e.jsx("div",{className:"bg-black/80 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-5xl",children:w.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsx("div",{className:"text-sm text-white/70",children:w.species}),e.jsx("div",{className:"text-xs text-yellow-400 uppercase",children:w.rarity}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:w.skills.map(A=>e.jsx("span",{className:"bg-white/20 px-2 py-1 rounded text-xs text-white",children:A},A))}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[T," G"]}),e.jsx("button",{onClick:()=>O(w),className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"입양하기"})]})]})]})})},w.id)})})]})})]})})},ob=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState(!1),[u,m]=v.useState(!1),[g,y]=v.useState(null),[p,x]=v.useState(50),[S,b]=v.useState(!1),[D,O]=v.useState(50),[C,z]=v.useState([]),[j,N]=v.useState("basic"),[w,T]=v.useState("wooden");v.useRef(null);const A=[{id:"minnow",name:"피라미",icon:"🐟",rarity:"common",size:5,value:50,difficulty:10},{id:"carp",name:"잉어",icon:"🐠",rarity:"common",size:15,value:100,difficulty:20},{id:"bass",name:"배스",icon:"🐟",rarity:"common",size:20,value:150,difficulty:25},{id:"salmon",name:"연어",icon:"🍣",rarity:"rare",size:30,value:300,difficulty:40},{id:"tuna",name:"참치",icon:"🐟",rarity:"rare",size:40,value:500,difficulty:50},{id:"eel",name:"장어",icon:"🐍",rarity:"rare",size:25,value:400,difficulty:45},{id:"swordfish",name:"황새치",icon:"⚔️",rarity:"epic",size:60,value:1e3,difficulty:70},{id:"shark",name:"상어",icon:"🦈",rarity:"epic",size:80,value:1500,difficulty:80},{id:"octopus",name:"문어",icon:"🐙",rarity:"epic",size:35,value:800,difficulty:60},{id:"golden_fish",name:"황금 물고기",icon:"🏆",rarity:"legendary",size:50,value:5e3,difficulty:90},{id:"dragon_fish",name:"용왕의 물고기",icon:"🐉",rarity:"legendary",size:100,value:1e4,difficulty:95},{id:"mermaid_tear",name:"인어의 눈물",icon:"💎",rarity:"legendary",size:1,value:2e4,difficulty:100}],k={basic:{name:"기본 미끼",cost:10,bonus:0,icon:"🪱"},premium:{name:"고급 미끼",cost:50,bonus:20,icon:"🦐"},special:{name:"특수 미끼",cost:200,bonus:50,icon:"✨"}},M={wooden:{name:"나무 낚싯대",power:1,cost:0,icon:"🎣"},iron:{name:"철제 낚싯대",power:1.5,cost:1e3,icon:"🔧"},golden:{name:"황금 낚싯대",power:2,cost:5e3,icon:"⭐"}};v.useEffect(()=>{let q;if(d&&!u){const H=20+k[j].bonus;q=setInterval(()=>{if(Math.random()*100<H){const J=Y();y(J),m(!0),Ge.playNotificationSound()}},1e3)}return()=>clearInterval(q)},[d,u,j]),v.useEffect(()=>{let q;return S&&g&&(q=setInterval(()=>{const h=g.difficulty/100;M[w].power,O(H=>{const J=H+(Math.random()-.5)*h*20;return Math.max(0,Math.min(100,J))}),x(H=>{const J=h*2,ie=H-J;return ie<=0?(b(!1),m(!1),y(null),x(50),alert("물고기가 도망갔습니다!"),50):ie})},100)),()=>clearInterval(q)},[S,g,w]);const Y=()=>{const q=Math.random()*100;let h;return j==="special"?q<10?h=A.filter(H=>H.rarity==="legendary"):q<30?h=A.filter(H=>H.rarity==="epic"):q<60?h=A.filter(H=>H.rarity==="rare"):h=A.filter(H=>H.rarity==="common"):j==="premium"?q<5?h=A.filter(H=>H.rarity==="legendary"):q<20?h=A.filter(H=>H.rarity==="epic"):q<50?h=A.filter(H=>H.rarity==="rare"):h=A.filter(H=>H.rarity==="common"):q<1?h=A.filter(H=>H.rarity==="legendary"):q<10?h=A.filter(H=>H.rarity==="epic"):q<30?h=A.filter(H=>H.rarity==="rare"):h=A.filter(H=>H.rarity==="common"),h[Math.floor(Math.random()*h.length)]},B=()=>{const q=k[j].cost;if((r.gold||0)<q){alert("미끼를 살 골드가 부족합니다!");return}i({gold:(r.gold||0)-q}),o(!0),m(!1),x(50)},ae=()=>{o(!1),m(!1),y(null),b(!1),x(50)},G=()=>{!u||!g||b(!0)},le=()=>{if(!S||!g)return;const h=10*M[w].power;x(H=>Math.min(100,H+h)),p>80&&Math.abs(D-50)<20&&E(g)},E=q=>{z([...C,q]),i({gold:(r.gold||0)+q.value,experience:r.experience+q.size*10}),Ge.playSuccessSound(),alert(`${q.name}을(를) 잡았습니다! +${q.value} 골드`),b(!1),m(!1),y(null),x(50),o(!1)},U=q=>{const h=M[q];if((r.gold||0)<h.cost){alert("골드가 부족합니다!");return}i({gold:(r.gold||0)-h.cost}),T(q),Ge.playSuccessSound()},R=q=>{switch(q){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 via-blue-700 to-cyan-600 p-4",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"🎣 낚시터"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-b from-cyan-600/50 to-blue-800/50 rounded-xl overflow-hidden mb-4",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"wave wave1"}),e.jsx("div",{className:"wave wave2"})]}),d&&e.jsxs("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2",children:[e.jsx("div",{className:"w-0.5 h-48 bg-white/50"}),e.jsx("div",{className:"text-2xl transform -translate-x-1/2",children:u?"❗":"🪝"})]}),u&&g&&e.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"text-4xl animate-pulse",children:g.icon})})]}),S&&g&&e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"mb-2 text-white font-bold",children:[g.name,"을(를) 낚는 중!"]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:"파워"}),e.jsxs("span",{children:[Math.floor(p),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4 relative",children:e.jsx("div",{className:`h-full rounded-full transition-all ${p>80?"bg-green-500":p>30?"bg-yellow-500":"bg-red-500"}`,style:{width:`${p}%`}})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm text-white/80 mb-1",children:"물고기 위치"}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 relative",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-full bg-green-500/30"}),e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 text-2xl",style:{left:`${D}%`},children:"🐟"})]})]}),e.jsx("button",{onClick:le,className:"w-full py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"당기기! (연타)"})]}),d?e.jsxs("div",{className:"space-y-3",children:[u&&!S&&e.jsx("button",{onClick:G,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-bold text-xl hover:shadow-lg transition-all animate-pulse",children:"❗ 낚아채기!"}),e.jsx("button",{onClick:ae,className:"w-full py-3 bg-gray-600 text-white rounded-lg font-bold hover:bg-gray-700 transition-all",children:"그만두기"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold mb-2",children:"미끼 선택"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.keys(k).map(q=>e.jsxs("button",{onClick:()=>N(q),className:`p-3 rounded-lg transition-all ${j===q?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:k[q].icon}),e.jsx("div",{className:"text-sm",children:k[q].name}),e.jsxs("div",{className:"text-xs opacity-80",children:[k[q].cost," G"]})]},q))})]}),e.jsx("button",{onClick:B,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold text-xl hover:shadow-lg transition-all",children:"🎣 낚시 시작"})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"🛍️ 장비 상점"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${w==="iron"?"border-2 border-green-400":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:"🔧"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:"철제 낚싯대"}),e.jsx("div",{className:"text-sm text-white/70",children:"파워 +50%"}),e.jsx("div",{className:"text-yellow-400",children:"1,000 G"})]}),w!=="iron"&&w!=="golden"&&e.jsx("button",{onClick:()=>U("iron"),className:"px-3 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-bold",children:"구매"})]})}),e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${w==="golden"?"border-2 border-yellow-400":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:"⭐"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:"황금 낚싯대"}),e.jsx("div",{className:"text-sm text-white/70",children:"파워 +100%"}),e.jsx("div",{className:"text-yellow-400",children:"5,000 G"})]}),w!=="golden"&&e.jsx("button",{onClick:()=>U("golden"),className:"px-3 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-bold",children:"구매"})]})})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"🏆 오늘의 어획"}),C.length===0?e.jsx("p",{className:"text-white/70 text-center py-4",children:"아직 잡은 물고기가 없습니다."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:C.map((q,h)=>e.jsx("div",{className:`bg-gradient-to-br ${R(q.rarity)} p-0.5 rounded-lg`,children:e.jsxs("div",{className:"bg-black/80 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-3xl mb-1",children:q.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:q.name}),e.jsxs("div",{className:"text-xs text-yellow-400",children:[q.size,"cm"]})]})},h))}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("div",{className:"text-white/80",children:"총 수익"}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[C.reduce((q,h)=>q+h.value,0)," G"]})]})]})]}),e.jsx("style",{jsx:!0,children:`
        .wave {
          position: absolute;
          width: 200%;
          height: 100%;
          background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.1), transparent);
          animation: wave 3s linear infinite;
        }

        .wave1 {
          animation-delay: 0s;
        }

        .wave2 {
          animation-delay: 1.5s;
        }

        @keyframes wave {
          0% {
            transform: translateX(-50%);
          }
          100% {
            transform: translateX(0);
          }
        }
      `})]})},db=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState(()=>{const N=[];for(let w=0;w<12;w++)N.push({id:w,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null,isUnlocked:w<4});return N}),[u,m]=v.useState(null),[g,y]=v.useState(Date.now()),p=[{id:"wheat",name:"밀",icon:"🌾",seedCost:50,growthTime:60,sellPrice:150,waterNeeded:2},{id:"carrot",name:"당근",icon:"🥕",seedCost:100,growthTime:120,sellPrice:350,waterNeeded:3},{id:"tomato",name:"토마토",icon:"🍅",seedCost:150,growthTime:180,sellPrice:500,waterNeeded:4},{id:"corn",name:"옥수수",icon:"🌽",seedCost:200,growthTime:240,sellPrice:700,waterNeeded:5},{id:"pumpkin",name:"호박",icon:"🎃",seedCost:300,growthTime:300,sellPrice:1e3,waterNeeded:6},{id:"watermelon",name:"수박",icon:"🍉",seedCost:400,growthTime:360,sellPrice:1500,waterNeeded:7},{id:"strawberry",name:"딸기",icon:"🍓",seedCost:500,growthTime:150,sellPrice:800,waterNeeded:4},{id:"grapes",name:"포도",icon:"🍇",seedCost:600,growthTime:400,sellPrice:2e3,waterNeeded:8},{id:"apple",name:"사과",icon:"🍎",seedCost:800,growthTime:600,sellPrice:3e3,waterNeeded:10},{id:"golden_apple",name:"황금사과",icon:"✨",seedCost:5e3,growthTime:1200,sellPrice:2e4,waterNeeded:20}];v.useEffect(()=>{const N=setInterval(()=>{y(Date.now()),x()},1e3);return()=>clearInterval(N)},[d]);const x=()=>{o(N=>N.map(w=>{if(!w.crop||!w.plantedAt)return w;const A=(Date.now()-w.plantedAt)/1e3/w.crop.growthTime,k=w.lastWateredAt?(Date.now()-w.lastWateredAt)/1e3:1/0;let M=w.crop.stage;return k>120&&w.crop.stage!=="dead"?M="dead":A>=1&&w.wateredTimes>=w.crop.waterNeeded?M="mature":A>=.66?M="growing":A>=.33&&(M="sprout"),{...w,crop:{...w.crop,stage:M}}}))},S=N=>{if(!u){alert("먼저 씨앗을 선택해주세요!");return}const w=p.find(A=>A.id===u);if(!w)return;if((r.gold||0)<w.seedCost){alert("골드가 부족합니다!");return}const T={...w,stage:"seed"};o(A=>A.map(k=>k.id===N?{...k,crop:T,plantedAt:Date.now(),wateredTimes:0,lastWateredAt:null}:k)),i({gold:(r.gold||0)-w.seedCost}),Ge.playSuccessSound()},b=N=>{const w=d.find(A=>A.id===N);if(!w||!w.crop)return;if(w.crop.stage==="dead"){alert("죽은 작물은 물을 줄 수 없습니다!");return}if(w.crop.stage==="mature"){alert("다 자란 작물입니다!");return}if((w.lastWateredAt?(Date.now()-w.lastWateredAt)/1e3:1/0)<30){alert("너무 자주 물을 주면 안됩니다! 30초 후에 다시 시도하세요.");return}o(A=>A.map(k=>k.id===N?{...k,wateredTimes:k.wateredTimes+1,lastWateredAt:Date.now()}:k)),Ge.playSuccessSound()},D=N=>{const w=d.find(A=>A.id===N);if(!w||!w.crop)return;if(w.crop.stage!=="mature"){alert("아직 수확할 수 없습니다!");return}const T=w.crop.sellPrice;i({gold:(r.gold||0)+T,experience:r.experience+Math.floor(T/10)}),o(A=>A.map(k=>k.id===N?{...k,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null}:k)),Ge.playSuccessSound(),alert(`${w.crop.name}을(를) 수확했습니다! +${T} 골드`)},O=N=>{o(w=>w.map(T=>T.id===N?{...T,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null}:T))},C=N=>{const w=1e3*(N-2);if((r.gold||0)<w){alert(`${w} 골드가 필요합니다!`);return}o(T=>T.map(A=>A.id===N?{...A,isUnlocked:!0}:A)),i({gold:(r.gold||0)-w}),Ge.playSuccessSound()},z=N=>{if(!N.crop)return"🟫";switch(N.crop.stage){case"seed":return"🌱";case"sprout":return"🌿";case"growing":return"🌾";case"mature":return N.crop.icon;case"dead":return"💀";default:return"🟫"}},j=N=>{if(!N.crop||!N.plantedAt)return 0;const w=(g-N.plantedAt)/1e3;return Math.min(100,w/N.crop.growthTime*100)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-700 via-green-600 to-yellow-600 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"🌾 농장"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("span",{className:"text-yellow-400",children:"💰"})," ",r.gold||0," G"]}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"🌰 씨앗 선택"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:p.map(N=>e.jsxs("button",{onClick:()=>m(N.id),className:`p-3 rounded-lg transition-all ${u===N.id?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:N.icon}),e.jsx("div",{className:"text-sm font-bold",children:N.name}),e.jsxs("div",{className:"text-xs",children:["씨: ",N.seedCost,"G"]}),e.jsxs("div",{className:"text-xs",children:["판매: ",N.sellPrice,"G"]}),e.jsxs("div",{className:"text-xs opacity-70",children:[N.growthTime,"초"]})]},N.id))})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"🌻 농장 밭"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:d.map(N=>e.jsx("div",{className:`relative aspect-square rounded-lg p-4 ${N.isUnlocked?"bg-gradient-to-b from-amber-700 to-amber-900":"bg-gray-800"}`,children:N.isUnlocked?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-5xl text-center mb-2",children:z(N)}),N.crop&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-white font-bold",children:N.crop.name}),N.crop.stage!=="dead"&&N.crop.stage!=="mature"&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-400 h-full rounded-full",style:{width:`${j(N)}%`}})})}),N.crop.stage!=="dead"&&N.crop.stage!=="mature"&&e.jsxs("div",{className:"text-xs text-blue-300 mt-1",children:["💧 ",N.wateredTimes,"/",N.crop.waterNeeded]}),N.crop.stage==="mature"&&e.jsx("div",{className:"text-xs text-green-400 font-bold mt-1",children:"수확 가능!"}),N.crop.stage==="dead"&&e.jsx("div",{className:"text-xs text-red-400 font-bold mt-1",children:"죽음"})]}),e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 flex gap-1",children:[!N.crop&&e.jsx("button",{onClick:()=>S(N.id),className:"flex-1 py-1 px-2 bg-green-500 text-white text-xs rounded hover:bg-green-600",children:"심기"}),N.crop&&N.crop.stage!=="mature"&&N.crop.stage!=="dead"&&e.jsx("button",{onClick:()=>b(N.id),className:"flex-1 py-1 px-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",children:"물주기"}),N.crop&&N.crop.stage==="mature"&&e.jsx("button",{onClick:()=>D(N.id),className:"flex-1 py-1 px-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600",children:"수확"}),N.crop&&N.crop.stage==="dead"&&e.jsx("button",{onClick:()=>O(N.id),className:"flex-1 py-1 px-2 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:"제거"})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"🔒"}),e.jsxs("button",{onClick:()=>C(N.id),className:"px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600",children:["해금 (",1e3*(N.id-2),"G)"]})]})},N.id))}),e.jsxs("div",{className:"mt-6 bg-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-2",children:"🌟 팁"}),e.jsxs("ul",{className:"text-sm text-white/80 space-y-1",children:[e.jsx("li",{children:"• 작물은 정기적으로 물을 줘야 합니다 (30초마다)"}),e.jsx("li",{children:"• 물을 2분 이상 안 주면 작물이 죽습니다"}),e.jsx("li",{children:"• 각 작물마다 필요한 물 횟수가 다릅니다"}),e.jsx("li",{children:"• 황금사과는 특별한 보상을 줍니다!"})]})]})]})]})})},ub=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState({id:"starter_room",name:"기본 방",size:"small",furniture:[],wallpaper:"basic",flooring:"wood",comfort:0,style:0,maxFurniture:10}),[u,m]=v.useState("room"),[g,y]=v.useState(null),p=[{id:"basic_bed",name:"기본 침대",icon:"🛏️",category:"bed",cost:500,comfort:10,style:5},{id:"luxury_bed",name:"고급 침대",icon:"🛏️",category:"bed",cost:2e3,comfort:30,style:20},{id:"royal_bed",name:"왕실 침대",icon:"👑",category:"bed",cost:1e4,comfort:100,style:80},{id:"wooden_chair",name:"나무 의자",icon:"🪑",category:"chair",cost:200,comfort:5,style:3},{id:"gaming_chair",name:"게이밍 체어",icon:"💺",category:"chair",cost:1500,comfort:25,style:15},{id:"throne",name:"왕좌",icon:"🪑",category:"chair",cost:8e3,comfort:50,style:70},{id:"study_desk",name:"책상",icon:"🪵",category:"table",cost:300,comfort:5,style:5},{id:"dining_table",name:"식탁",icon:"🍽️",category:"table",cost:800,comfort:10,style:10},{id:"magic_table",name:"마법 테이블",icon:"✨",category:"table",cost:5e3,comfort:20,style:50},{id:"plant",name:"화분",icon:"🪴",category:"decoration",cost:100,comfort:3,style:5},{id:"painting",name:"그림",icon:"🖼️",category:"decoration",cost:500,comfort:5,style:15},{id:"chandelier",name:"샹들리에",icon:"💎",category:"decoration",cost:3e3,comfort:15,style:40},{id:"aquarium",name:"수족관",icon:"🐠",category:"decoration",cost:1200,comfort:20,style:25},{id:"fireplace",name:"벽난로",icon:"🔥",category:"decoration",cost:2500,comfort:35,style:30},{id:"bookshelf",name:"책장",icon:"📚",category:"storage",cost:600,comfort:8,style:12},{id:"wardrobe",name:"옷장",icon:"🚪",category:"storage",cost:900,comfort:10,style:10},{id:"treasure_chest",name:"보물상자",icon:"💰",category:"storage",cost:4e3,comfort:5,style:35},{id:"piano",name:"피아노",icon:"🎹",category:"special",cost:7e3,comfort:40,style:60},{id:"telescope",name:"망원경",icon:"🔭",category:"special",cost:3500,comfort:15,style:30},{id:"gaming_setup",name:"게이밍 셋업",icon:"🎮",category:"special",cost:1e4,comfort:60,style:45},{id:"magic_crystal",name:"마법 크리스탈",icon:"🔮",category:"special",cost:15e3,comfort:50,style:100}],x=[{id:"basic",name:"기본 벽지",cost:0,style:0,icon:"⬜"},{id:"floral",name:"꽃무늬 벽지",cost:500,style:10,icon:"🌸"},{id:"starry",name:"별무늬 벽지",cost:1e3,style:20,icon:"⭐"},{id:"royal",name:"왕실 벽지",cost:3e3,style:50,icon:"👑"},{id:"magical",name:"마법 벽지",cost:5e3,style:80,icon:"✨"}],S=[{id:"wood",name:"나무 바닥",cost:0,style:5,icon:"🟫"},{id:"carpet",name:"카펫",cost:800,style:15,icon:"🟥"},{id:"marble",name:"대리석",cost:2e3,style:35,icon:"⬜"},{id:"crystal",name:"크리스탈 바닥",cost:6e3,style:70,icon:"💎"}],b=[{size:"medium",name:"중형 방",cost:5e3,maxFurniture:20},{size:"large",name:"대형 방",cost:15e3,maxFurniture:35},{size:"mansion",name:"맨션",cost:5e4,maxFurniture:50}],D=T=>{if((r.gold||0)<T.cost){alert("골드가 부족합니다!");return}if(d.furniture.length>=d.maxFurniture){alert("방에 더 이상 가구를 놓을 수 없습니다!");return}const A={...T,position:{x:50,y:50}};o(k=>({...k,furniture:[...k.furniture,A],comfort:k.comfort+T.comfort,style:k.style+T.style})),i({gold:(r.gold||0)-T.cost}),Ge.playSuccessSound()},O=T=>{const A=d.furniture.find(M=>M.id===T);if(!A)return;const k=Math.floor(A.cost*.5);o(M=>({...M,furniture:M.furniture.filter(Y=>Y.id!==T),comfort:M.comfort-A.comfort,style:M.style-A.style})),i({gold:(r.gold||0)+k}),Ge.playCoinSound()},C=T=>{const A=x.find(k=>k.id===T);if(A){if((r.gold||0)<A.cost){alert("골드가 부족합니다!");return}o(k=>({...k,wallpaper:T,style:k.style+A.style})),i({gold:(r.gold||0)-A.cost}),Ge.playSuccessSound()}},z=T=>{const A=S.find(k=>k.id===T);if(A){if((r.gold||0)<A.cost){alert("골드가 부족합니다!");return}o(k=>({...k,flooring:T,style:k.style+A.style})),i({gold:(r.gold||0)-A.cost}),Ge.playSuccessSound()}},j=T=>{const A=b.find(k=>k.size===T);if(A){if((r.gold||0)<A.cost){alert("골드가 부족합니다!");return}o(k=>({...k,size:T,maxFurniture:A.maxFurniture})),i({gold:(r.gold||0)-A.cost}),Ge.playLevelUpSound()}},w=(()=>{const T=Math.floor(d.comfort/10),A=Math.floor(d.style/10);return{happiness:T*2,charm:A,dailyGold:(T+A)*10}})();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"🏠 마이 하우스"}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:"돌아가기"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:"편안함"}),e.jsxs("div",{className:"text-xl font-bold text-white",children:["😌 ",d.comfort]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:"스타일"}),e.jsxs("div",{className:"text-xl font-bold text-white",children:["✨ ",d.style]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:"가구"}),e.jsxs("div",{className:"text-xl font-bold text-white",children:["🪑 ",d.furniture.length,"/",d.maxFurniture]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:"크기"}),e.jsxs("div",{className:"text-xl font-bold text-white",children:["📐 ",d.size]})]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex gap-2",children:["room","furniture","customize","upgrade"].map(T=>e.jsxs("button",{onClick:()=>m(T),className:`px-4 py-2 rounded-lg transition-all ${u===T?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[T==="room"&&"🏠 내 방",T==="furniture"&&"🪑 가구 상점",T==="customize"&&"🎨 꾸미기",T==="upgrade"&&"⬆️ 업그레이드"]},T))})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[u==="room"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"내 방"}),e.jsxs("div",{className:"bg-gradient-to-b from-gray-700 to-gray-800 rounded-xl h-64 mb-4 relative overflow-hidden",children:[d.furniture.map((T,A)=>e.jsx("div",{className:"absolute text-4xl cursor-pointer hover:scale-110 transition-all",style:{left:`${T.position?.x||50}%`,top:`${T.position?.y||50}%`,transform:"translate(-50%, -50%)"},onClick:()=>O(T.id),title:`${T.name} (클릭시 판매)`,children:T.icon},A)),d.furniture.length===0&&e.jsx("div",{className:"flex items-center justify-center h-full text-white/50",children:"가구를 구매하여 방을 꾸며보세요!"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-2",children:"🎁 방 보너스"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-pink-400",children:["행복 +",w.happiness]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-purple-400",children:["매력 +",w.charm]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-yellow-400",children:["일일 골드 +",w.dailyGold]})})]})]})]}),u==="furniture"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"가구 상점"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:p.map(T=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl text-center mb-2",children:T.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:T.name}),e.jsx("div",{className:"text-xs text-white/70",children:T.category}),e.jsxs("div",{className:"flex justify-between text-xs mt-2",children:[e.jsxs("span",{className:"text-blue-400",children:["편안함 +",T.comfort]}),e.jsxs("span",{className:"text-purple-400",children:["스타일 +",T.style]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[T.cost," G"]}),e.jsx("button",{onClick:()=>D(T),className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded text-sm font-bold hover:shadow-lg transition-all",children:"구매"})]})]},T.id))})]}),u==="customize"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"방 꾸미기"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"벽지"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:x.map(T=>e.jsxs("button",{onClick:()=>C(T.id),className:`p-3 rounded-lg transition-all ${d.wallpaper===T.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:T.icon}),e.jsx("div",{className:"text-xs",children:T.name}),e.jsxs("div",{className:"text-xs",children:[T.cost," G"]})]},T.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"바닥재"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:S.map(T=>e.jsxs("button",{onClick:()=>z(T.id),className:`p-3 rounded-lg transition-all ${d.flooring===T.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:T.icon}),e.jsx("div",{className:"text-xs",children:T.name}),e.jsxs("div",{className:"text-xs",children:[T.cost," G"]})]},T.id))})]})]}),u==="upgrade"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"방 업그레이드"}),e.jsx("div",{className:"grid gap-4",children:b.map(T=>e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${d.size===T.size?"border-2 border-green-400":""}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white",children:T.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["최대 가구: ",T.maxFurniture,"개"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-yellow-400 font-bold text-xl",children:[T.cost," G"]}),d.size!==T.size&&e.jsx("button",{onClick:()=>j(T.size),className:"mt-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"업그레이드"})]})]})},T.size))})]})]})]})})},mb=()=>{const r=ke(),i=re(o=>o.player),d=[{title:"🎮 메인 시스템",items:[{name:"던전 탐험",icon:"⚔️",path:"/dungeon",color:"from-red-500 to-red-600"},{name:"상점",icon:"🏪",path:"/shopping",color:"from-yellow-500 to-yellow-600"},{name:"캐릭터 관리",icon:"👥",path:"/characters",color:"from-blue-500 to-blue-600"},{name:"히로인 갤러리",icon:"💕",path:"/heroines",color:"from-pink-500 to-pink-600"}]},{title:"🏆 진행도 & 컬렉션",items:[{name:"업적",icon:"🏆",path:"/achievements",color:"from-yellow-500 to-orange-500"},{name:"도감",icon:"📚",path:"/collection",color:"from-purple-500 to-purple-600"},{name:"일일 퀘스트",icon:"📋",path:"/quests",color:"from-green-500 to-green-600"},{name:"이벤트 캘린더",icon:"📅",path:"/calendar",color:"from-pink-500 to-pink-600"}]},{title:"⚔️ 커뮤니티 & 협동",items:[{name:"동아리",icon:"🎭",path:"/clubs",color:"from-purple-500 to-indigo-600"},{name:"길드",icon:"⚔️",path:"/guild",color:"from-indigo-500 to-indigo-600"},{name:"펫 시스템",icon:"🐾",path:"/pets",color:"from-emerald-500 to-emerald-600"}]},{title:"🎮 미니게임 & 활동",items:[{name:"낚시",icon:"🎣",path:"/fishing",color:"from-cyan-500 to-cyan-600"},{name:"농사",icon:"🌾",path:"/farming",color:"from-green-600 to-green-700"},{name:"카드 매칭",icon:"🃏",path:"/card-matching",color:"from-purple-600 to-pink-600"},{name:"퀴즈 게임",icon:"🧠",path:"/quiz-game",color:"from-orange-500 to-red-500"}]},{title:"🏠 개인 공간",items:[{name:"하우징",icon:"🏠",path:"/housing",color:"from-purple-600 to-pink-600"},{name:"크래프팅",icon:"🔨",path:"/crafting",color:"from-amber-500 to-amber-600"}]}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"🎮 게임 메뉴"}),e.jsx("button",{onClick:()=>r("/game"),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all",children:"게임으로 돌아가기"})]})}),e.jsx("div",{className:"space-y-6",children:d.map((o,u)=>e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:o.title}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.items.map((m,g)=>e.jsxs("button",{onClick:()=>r(m.path),className:`bg-gradient-to-r ${m.color} p-4 rounded-xl hover:scale-105 transition-all shadow-lg hover:shadow-xl`,children:[e.jsx("div",{className:"text-4xl mb-2",children:m.icon}),e.jsx("div",{className:"text-white font-bold",children:m.name})]},g))})]},u))}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mt-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"📊 게임 통계"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:"플레이 시간"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["Day ",i.day]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:"레벨"}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["Lv.",i.level]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:"골드"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[i.money||0," G"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:"업적 포인트"}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.achievementPoints||0})]})]})]})]})})},xb=({onComplete:r,onSkip:i})=>{const d=ke(),[o,u]=v.useState(0),[m,g]=v.useState(!1),y=[{id:1,title:"라비린스 아카데미에 오신 것을 환영합니다!",content:"이곳은 마법과 로맨스가 공존하는 특별한 학원입니다. 당신의 선택이 운명을 결정합니다.",image:"🏫"},{id:2,title:"캐릭터 생성",content:"먼저 당신의 캐릭터를 만들어보세요. 이름, 성별, 외모를 선택하고 시작 스탯을 설정할 수 있습니다.",image:"👤",highlightElement:".character-creation"},{id:3,title:"스탯 시스템",content:"체력(HP), 마나(MP), 힘, 지능, 매력, 운 등 다양한 스탯이 있습니다. 각 스탯은 게임 플레이에 영향을 줍니다.",image:"📊"},{id:4,title:"히로인과의 만남",content:"5명의 매력적인 히로인이 당신을 기다리고 있습니다. 각자 고유한 성격과 스토리를 가지고 있죠.",image:"💕"},{id:5,title:"호감도 시스템",content:"대화, 선물, 데이트를 통해 히로인들과의 호감도를 올릴 수 있습니다. 높은 호감도는 특별한 이벤트를 열어줍니다.",image:"❤️"},{id:6,title:"일정 관리",content:"매일 아침, 점심, 저녁으로 나뉘어 있습니다. 각 시간대에 다양한 활동을 선택할 수 있습니다.",image:"📅"},{id:7,title:"수업 참여",content:"수업에 참여하여 스탯을 올리고 새로운 스킬을 배울 수 있습니다. 집중도에 따라 효과가 달라집니다.",image:"📚"},{id:8,title:"던전 탐험",content:"학원 지하에는 신비한 던전이 있습니다. 몬스터를 물리치고 보물을 찾아보세요!",image:"⚔️",highlightElement:".dungeon-button"},{id:9,title:"전투 시스템",content:"턴제 전투 시스템으로 전략적인 전투를 즐길 수 있습니다. 스킬을 적절히 사용하여 승리하세요.",image:"🗡️"},{id:10,title:"상점",content:"골드로 아이템을 구매할 수 있습니다. 선물, 장비, 소비 아이템 등 다양한 상품이 준비되어 있습니다.",image:"🏪",highlightElement:".shop-button"},{id:11,title:"미니게임",content:"카드 매칭, 퀴즈 등 다양한 미니게임을 즐길 수 있습니다. 보상도 받을 수 있어요!",image:"🎮"},{id:12,title:"엔딩",content:"당신의 선택에 따라 다양한 엔딩을 볼 수 있습니다. 각 히로인과의 특별한 엔딩도 준비되어 있습니다.",image:"🎊"},{id:13,title:"저장 & 불러오기",content:"언제든지 게임을 저장하고 나중에 이어서 플레이할 수 있습니다. 자동 저장 기능도 있습니다.",image:"💾"},{id:14,title:"팁",content:`• 매일 히로인과 대화하세요
• 스탯을 균형있게 올리세요
• 던전에서 레벨업을 잊지 마세요
• 이벤트를 놓치지 마세요`,image:"💡"},{id:15,title:"모험을 시작하세요!",content:"이제 라비린스 아카데미에서의 모험을 시작할 준비가 되었습니다. 행운을 빕니다!",image:"🚀",action:()=>{r(),d("/character-creation")}}],p=()=>{o<y.length-1?(g(!0),setTimeout(()=>{u(o+1),g(!1)},300)):y[o].action?.()},x=()=>{o>0&&(g(!0),setTimeout(()=>{u(o-1),g(!1)},300))},S=()=>{window.confirm("튜토리얼을 건너뛰시겠습니까? 나중에 설정에서 다시 볼 수 있습니다.")&&(i(),d("/character-creation"))};return v.useEffect(()=>{const b=y[o];if(b.highlightElement){const D=document.querySelector(b.highlightElement);if(D)return D.classList.add("tutorial-highlight"),()=>{D.classList.remove("tutorial-highlight")}}},[o]),e.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gray-200 h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-full transition-all duration-500",style:{width:`${(o+1)/y.length*100}%`}})}),e.jsxs("div",{className:`p-8 transition-opacity duration-300 ${m?"opacity-0":"opacity-100"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-500",children:["단계 ",o+1," / ",y.length]}),e.jsx("button",{onClick:S,className:"text-sm text-gray-500 hover:text-gray-700 underline",children:"건너뛰기"})]}),e.jsxs("div",{className:"text-center mb-8",children:[y[o].image&&e.jsx("div",{className:"text-6xl mb-6 animate-bounce",children:y[o].image}),e.jsx("h2",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:y[o].title}),e.jsx("p",{className:"text-lg text-gray-700 whitespace-pre-line leading-relaxed",children:y[o].content})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:x,disabled:o===0,className:`
                px-6 py-3 rounded-lg font-semibold transition-all
                ${o===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}
              `,children:"이전"}),e.jsx("div",{className:"flex gap-2",children:y.map((b,D)=>e.jsx("button",{onClick:()=>{D<=o&&u(D)},className:`
                    w-2 h-2 rounded-full transition-all
                    ${D===o?"w-8 bg-gradient-to-r from-purple-500 to-pink-500":D<o?"bg-purple-300 cursor-pointer hover:bg-purple-400":"bg-gray-300"}
                  `},D))}),e.jsx("button",{onClick:p,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all transform hover:scale-105",children:o===y.length-1?"시작하기":"다음"})]})]})]}),e.jsx("style",{children:`
        .tutorial-highlight {
          position: relative;
          z-index: 51;
          box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          animation: pulse 2s infinite;
        }

        @keyframes pulse {
          0% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          }
          50% {
            box-shadow: 0 0 20px 9999px rgba(0, 0, 0, 0.3);
          }
          100% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          }
        }
      `})]})},hb=()=>{const[r,i]=v.useState([]),[d,o]=v.useState([]),[u,m]=v.useState(0),[g,y]=v.useState(0),[p,x]=v.useState(!1),S=["🌸","🌺","🌻","🌹","🌷","🌼","🌿","🍀"];v.useEffect(()=>{b()},[]);const b=()=>{const O=[...S,...S].map((C,z)=>({id:z,value:C,isFlipped:!1,isMatched:!1})).sort(()=>Math.random()-.5);i(O),o([]),m(0),y(0),x(!1)},D=O=>{if(d.length===2||d.includes(O)||r[O].isMatched)return;const C=[...d,O];if(o(C),C.length===2){y(g+1);const[z,j]=C;r[z].value===r[j].value?setTimeout(()=>{i(w=>w.map(T=>T.id===z||T.id===j?{...T,isMatched:!0}:T)),o([]),m(u+10),r.map(w=>w.id===z||w.id===j?{...w,isMatched:!0}:w).every(w=>w.isMatched)&&x(!0)},1e3):setTimeout(()=>{o([])},1e3)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-900 via-purple-900 to-indigo-900 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-xl p-8 border border-white/20",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6 text-center",children:"🃏 카드 매칭 게임"}),e.jsxs("div",{className:"flex justify-center gap-8 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u}),e.jsx("div",{className:"text-sm text-gray-300",children:"점수"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:g}),e.jsx("div",{className:"text-sm text-gray-300",children:"이동 횟수"})]})]}),p&&e.jsxs("div",{className:"bg-green-600/20 border border-green-500 rounded-lg p-4 mb-6 text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-green-400 mb-2",children:"🎉 게임 완료!"}),e.jsxs("p",{className:"text-green-200",children:[g,"번의 이동으로 ",u,"점을 획득했습니다!"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6 max-w-md mx-auto",children:r.map(O=>e.jsx("div",{onClick:()=>D(O.id),className:`
                  aspect-square bg-white/10 rounded-lg border-2 border-white/20 
                  flex items-center justify-center text-3xl cursor-pointer
                  transition-all duration-300 hover:scale-105
                  ${d.includes(O.id)||O.isMatched?"bg-white/20 border-yellow-400":"hover:bg-white/15"}
                  ${O.isMatched?"opacity-50":""}
                `,children:d.includes(O.id)||O.isMatched?O.value:"❓"},O.id))}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("button",{onClick:b,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all transform hover:scale-105",children:"새 게임"}),e.jsx("div",{className:"text-gray-300 text-sm",children:"카드를 클릭하여 같은 그림을 찾으세요!"}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-all",children:"돌아가기"})]})]})})})},fb=({onComplete:r})=>{const{updateStats:i,updateMoney:d,gainExperience:o}=re(M=>M.actions),u=[{id:1,question:"라비린스 아카데미의 설립 연도는?",options:["1850년","1900년","1925년","1950년"],correctAnswer:2,category:"학원 역사"},{id:2,question:"학생회장 레이나의 특기는?",options:["검술","마법","리더십","요리"],correctAnswer:2,category:"캐릭터"},{id:3,question:"던전의 최종 보스는?",options:["고대 드래곤","얼음 여왕","화염 드래곤","어둠의 마왕"],correctAnswer:2,category:"게임"},{id:4,question:"도서부원 유키가 가장 좋아하는 것은?",options:["운동","독서","게임","음악"],correctAnswer:1,category:"캐릭터"},{id:5,question:"아카데미에서 가장 인기 있는 동아리는?",options:["검술부","마법부","예술부","과학부"],correctAnswer:0,category:"학원"}],[m,g]=v.useState(0),[y,p]=v.useState(null),[x,S]=v.useState(0),[b,D]=v.useState(15),[O,C]=v.useState(!1),[z,j]=v.useState(!1);v.useEffect(()=>{if(b>0&&!z&&!O){const M=setTimeout(()=>D(b-1),1e3);return()=>clearTimeout(M)}else b===0&&!z&&N()},[b,z,O]);const N=()=>{j(!0),setTimeout(()=>T(),2e3)},w=M=>{if(!z){if(p(M),j(!0),M===u[m].correctAnswer){const Y=Math.max(50,100-(15-b)*5);S(x+Y)}setTimeout(()=>T(),2e3)}},T=()=>{m+1<u.length?(g(m+1),p(null),j(!1),D(15)):A()},A=()=>{C(!0);const M=Math.floor(x/20),Y=Math.floor(x/10),B=Math.floor(x/100);d(M),o(Y),B>0&&i({intelligence:B}),r(x)},k=M=>z?M===u[m].correctAnswer?"bg-green-500 text-white border-2 border-green-600":y===M&&M!==u[m].correctAnswer?"bg-red-500 text-white border-2 border-red-600":"bg-gray-200 text-gray-500 border-2 border-gray-300":"bg-white hover:bg-purple-50 border-2 border-purple-300 text-gray-800";return O?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:"🎓 퀴즈 완료!"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-6xl mb-4",children:x>=400?"🏆":x>=300?"🥈":x>=200?"🥉":"📝"}),e.jsx("p",{className:"text-2xl font-bold mb-2",children:"최종 점수"}),e.jsx("p",{className:"text-4xl font-bold text-purple-600 mb-6",children:x}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"획득 보상:"}),e.jsxs("p",{className:"font-semibold",children:["💰 ",Math.floor(x/20)," 골드"]}),e.jsxs("p",{className:"font-semibold",children:["⭐ ",Math.floor(x/10)," 경험치"]}),Math.floor(x/100)>0&&e.jsxs("p",{className:"font-semibold",children:["📚 지능 +",Math.floor(x/100)]})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-bold hover:shadow-lg transition",children:"다시 도전하기"})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-2xl w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-600",children:["문제 ",m+1," / ",u.length]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-600",children:["점수: ",x]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${(m+1)/u.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-xs px-3 py-1 bg-purple-100 text-purple-700 rounded-full font-semibold",children:u[m].category}),e.jsxs("div",{className:`text-2xl font-bold ${b<=5?"text-red-500 animate-pulse":"text-gray-700"}`,children:["⏱️ ",b,"초"]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:u[m].question}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:u[m].options.map((M,Y)=>e.jsxs("button",{onClick:()=>w(Y),disabled:z,className:`
                  p-4 rounded-lg font-semibold text-left transition-all
                  ${k(Y)}
                  ${z?"":"hover:scale-102 active:scale-98"}
                `,children:[e.jsxs("span",{className:"mr-3",children:[String.fromCharCode(65+Y),"."]}),M,z&&Y===u[m].correctAnswer&&e.jsx("span",{className:"ml-2",children:"✓"}),z&&y===Y&&Y!==u[m].correctAnswer&&e.jsx("span",{className:"ml-2",children:"✗"})]},Y))})]}),z&&e.jsx("div",{className:`text-center font-bold text-lg ${y===u[m].correctAnswer?"text-green-600":"text-red-600"}`,children:y===u[m].correctAnswer?`정답! +${Math.max(50,100-(15-b)*5)} 점`:"틀렸습니다!"})]})})},pb=()=>{re(P=>P.player);const{updateStats:r,addItem:i,updateAffection:d}=re(P=>P.actions),[o,u]=v.useState(null),[m,g]=v.useState("menu"),[y,p]=v.useState(0),[x,S]=v.useState(0),[b,D]=v.useState(0),[O,C]=v.useState(100),[z,j]=v.useState(0),[N,w]=v.useState(0),[T,A]=v.useState(0),[k,M]=v.useState(0),[Y,B]=v.useState([]),[ae,G]=v.useState(0),[le,E]=v.useState([]),U=v.useRef(null),R=v.useRef(),q=v.useRef(0),h=[{id:"sakura_theme",name:"벚꽃의 검무",artist:"사쿠라",difficulty:3,bpm:128,duration:120,notes:H(120,128,3),perfectScore:1e4},{id:"yuki_theme",name:"얼음 마법의 멜로디",artist:"유키",difficulty:2,bpm:100,duration:90,notes:H(90,100,2),perfectScore:7500},{id:"luna_theme",name:"달빛 소나타",artist:"루나",difficulty:4,bpm:140,duration:150,notes:H(150,140,4),perfectScore:15e3},{id:"school_festival",name:"학원 축제",artist:"Various",difficulty:1,bpm:120,duration:60,notes:H(60,120,1),perfectScore:5e3}];function H(P,X,ne){const ce=[],oe=6e4/X,we=ne*.5;let he=0;for(let ze=2e3;ze<P*1e3;ze+=oe/we){const Qt=Math.floor(Math.random()*4),Dt=Math.random()<.1?"special":Math.random()<.2?"long":"normal";if(ce.push({id:he++,lane:Qt,time:ze,hit:!1,type:Dt}),ne>2&&Math.random()<(ne-2)*.1){const mt=(Qt+Math.floor(Math.random()*3)+1)%4;ce.push({id:he++,lane:mt,time:ze,hit:!1,type:"normal"})}}return ce}const J=v.useCallback(P=>{if(m!=="playing")return;const ne=["d","f","j","k"].indexOf(P.key.toLowerCase());if(ne===-1)return;const ce=150,oe=50,we=100,he=Y.filter(ze=>ze.lane===ne&&!ze.hit&&Math.abs(ze.time-ae)<ce);if(he.length>0){const ze=he.reduce((Ye,Xt)=>Math.abs(Xt.time-ae)<Math.abs(Ye.time-ae)?Xt:Ye),Qt=Math.abs(ze.time-ae);ze.hit=!0;let Dt="miss",mt=0;Qt<oe?(Dt="perfect",mt=100,j(Ye=>Ye+1)):Qt<we?(Dt="great",mt=75,w(Ye=>Ye+1)):(Dt="good",mt=50,A(Ye=>Ye+1)),ze.type==="special"&&(mt*=2);const Qs=Math.min(1+x*.01,2);mt=Math.floor(mt*Qs),p(Ye=>Ye+mt),S(Ye=>{const Xt=Ye+1;return D(Si=>Math.max(Si,Xt)),Xt}),E(Ye=>[...Ye,{id:ze.id,type:Dt,lane:ne}]),setTimeout(()=>{E(Ye=>Ye.filter(Xt=>Xt.id!==ze.id))},500)}},[Y,ae,x,m]),ie=v.useCallback(()=>{if(m!=="playing"||!o)return;const X=Date.now()-q.current;G(X);const ne=3e3,ce=o.notes.filter(he=>he.time>=X-200&&he.time<=X+ne);B(ce);const oe=ce.filter(he=>!he.hit&&he.time<X-150);oe.length>0&&(M(he=>he+oe.length),S(0),oe.forEach(he=>he.hit=!0));const we=z+N+T+k;if(we>0){const he=(z*100+N*75+T*50)/(we*100)*100;C(Math.round(he))}if(X>=o.duration*1e3){Z();return}R.current=requestAnimationFrame(ie)},[m,o,z,N,T,k]),L=P=>{u(P),g("playing"),p(0),S(0),D(0),C(100),j(0),w(0),A(0),M(0),B([]),G(0),q.current=Date.now(),P.notes.forEach(X=>X.hit=!1)},Z=()=>{if(g("results"),R.current&&cancelAnimationFrame(R.current),o&&y>0){const P=y/o.perfectScore;r({agility:Math.floor(P*5)}),O===100&&k===0&&(i("musicNote"),d(o.artist,10))}};return v.useEffect(()=>(m==="playing"&&(window.addEventListener("keydown",J),R.current=requestAnimationFrame(ie)),()=>{window.removeEventListener("keydown",J),R.current&&cancelAnimationFrame(R.current)}),[m,J,ie]),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-black p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-4 mb-4 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",children:"🎵 리듬 게임"}),m==="playing"&&e.jsxs("div",{className:"flex gap-6 text-white",children:[e.jsxs("div",{children:["점수: ",y]}),e.jsxs("div",{children:["콤보: ",x,"x"]}),e.jsxs("div",{children:["정확도: ",O,"%"]})]})]})}),m==="menu"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"곡 선택"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(P=>e.jsxs("button",{onClick:()=>L(P),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg p-6 text-left transition-all hover:scale-[1.02]",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:P.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:["by ",P.artist]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-yellow-400",children:["⭐".repeat(P.difficulty),"☆".repeat(5-P.difficulty)]}),e.jsxs("div",{className:"text-sm text-gray-300",children:[Math.floor(P.duration/60),":",(P.duration%60).toString().padStart(2,"0")]})]})]},P.id))}),e.jsxs("div",{className:"mt-8 bg-purple-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"조작법"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"D"}),e.jsx("div",{className:"text-xs",children:"Lane 1"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"F"}),e.jsx("div",{className:"text-xs",children:"Lane 2"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"J"}),e.jsx("div",{className:"text-xs",children:"Lane 3"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"K"}),e.jsx("div",{className:"text-xs",children:"Lane 4"})]})]})]})]}),m==="playing"&&o&&e.jsxs("div",{className:"relative bg-black/70 backdrop-blur-md rounded-lg border border-purple-500 overflow-hidden",style:{height:"600px"},children:[e.jsxs("div",{className:"absolute inset-0",ref:U,children:[e.jsx("div",{className:"absolute inset-0 flex",children:[0,1,2,3].map(P=>e.jsxs("div",{className:"flex-1 border-x border-purple-500/30 relative",children:[e.jsx("div",{className:"absolute bottom-20 left-0 right-0 h-2 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-50"}),Y.filter(X=>X.lane===P&&!X.hit).map(X=>{const ce=(1-(X.time-ae)/3e3)*100;return e.jsx("div",{className:`absolute left-2 right-2 h-8 rounded transition-all ${X.type==="special"?"bg-yellow-500":X.type==="long"?"bg-blue-500":"bg-purple-500"}`,style:{top:`${ce}%`,transform:"translateY(-50%)"}},X.id)}),le.filter(X=>X.lane===P).map(X=>e.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 animate-ping",children:e.jsx("div",{className:`text-2xl font-bold ${X.type==="perfect"?"text-yellow-400":X.type==="great"?"text-green-400":X.type==="good"?"text-blue-400":"text-red-400"}`,children:X.type==="perfect"?"PERFECT!":X.type==="great"?"GREAT!":X.type==="good"?"GOOD":"MISS"})},X.id)),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2",children:e.jsx("div",{className:"w-12 h-12 bg-purple-700 rounded-lg flex items-center justify-center text-white font-bold text-xl border-2 border-purple-400",children:["D","F","J","K"][P]})})]},P))}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-black/50",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500",style:{width:`${ae/(o.duration*1e3)*100}%`}})})]}),e.jsx("button",{onClick:()=>g("paused"),className:"absolute top-4 right-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg",children:"⏸ 일시정지"})]}),m==="results"&&o&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:"결과"}),e.jsxs("div",{className:"bg-purple-900/50 rounded-lg p-6 mb-6",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("div",{className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:y>=o.perfectScore*.95?"S":y>=o.perfectScore*.85?"A":y>=o.perfectScore*.75?"B":y>=o.perfectScore*.6?"C":y>=o.perfectScore*.4?"D":"F"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"최종 점수"}),e.jsx("div",{className:"text-2xl font-bold",children:y})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"최대 콤보"}),e.jsxs("div",{className:"text-2xl font-bold",children:[b,"x"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"정확도"}),e.jsxs("div",{className:"text-2xl font-bold",children:[O,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Perfect/Great/Good/Miss"}),e.jsxs("div",{className:"text-lg font-bold",children:[z,"/",N,"/",T,"/",k]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>L(o),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:"다시 하기"}),e.jsx("button",{onClick:()=>g("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:"곡 선택으로"})]})]}),m==="paused"&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-purple-900 rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"일시정지"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>g("playing"),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:"계속하기"}),e.jsx("button",{onClick:()=>{g("menu"),R.current&&cancelAnimationFrame(R.current)},className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:"그만두기"})]})]})})]})})},gb=()=>{const{updateStats:r,addItem:i,gainExperience:d,addGold:o}=re(R=>R.actions),[u,m]=v.useState(null),[g,y]=v.useState([]),[p,x]=v.useState(0),[S,b]=v.useState(0),[D,O]=v.useState("menu"),[C,z]=v.useState(null),[j,N]=v.useState(!1),[w,T]=v.useState(0),[A,k]=v.useState(0),M=[{id:"sakura_portrait",name:"사쿠라의 초상화",image:"🌸",gridSize:3,timeLimit:180,difficulty:1,rewards:{exp:50,money:30,item:"puzzlePiece"}},{id:"school_emblem",name:"학원 엠블럼",image:"🏫",gridSize:4,timeLimit:240,difficulty:2,rewards:{exp:100,money:50}},{id:"magical_artifact",name:"마법의 유물",image:"💎",gridSize:5,timeLimit:300,difficulty:3,rewards:{exp:150,money:75,item:"magicGem"}},{id:"heroines_group",name:"히로인들의 추억",image:"👥",gridSize:6,timeLimit:360,difficulty:4,rewards:{exp:200,money:100,item:"memoryAlbum"}}],Y=R=>{const q=R.gridSize*R.gridSize,h=[];for(let J=0;J<q;J++)h.push({id:J,currentPos:J,correctPos:J,isCorrect:!0});let H=[...h];for(let J=0;J<q*10;J++){const ie=H.findIndex(Z=>Z.id===q-1),L=B(ie,R.gridSize);if(L.length>0){const Z=L[Math.floor(Math.random()*L.length)];ae(H,ie,Z)}}H=H.map((J,ie)=>({...J,currentPos:ie,isCorrect:ie===J.correctPos})),y(H)},B=(R,q)=>{const h=[],H=Math.floor(R/q),J=R%q;return H>0&&h.push(R-q),H<q-1&&h.push(R+q),J>0&&h.push(R-1),J<q-1&&h.push(R+1),h},ae=(R,q,h)=>{const H=R[q];R[q]=R[h],R[h]=H},G=R=>{if(D!=="playing"||!u)return;const q=g.find(J=>J.id===u.gridSize*u.gridSize-1);if(!q)return;const h=q.currentPos;if(B(h,u.gridSize).includes(R)){const J=[...g],ie=J[R],L=J.findIndex(P=>P.id===q.id);J[R]=q,J[L]=ie;const Z=J.map((P,X)=>({...P,currentPos:X,isCorrect:P.correctPos===X}));y(Z),x(P=>P+1),Z.every(P=>P.isCorrect)&&E()}},le=R=>{m(R),O("playing"),x(0),b(R.timeLimit),T(0),N(!1),Y(R)},E=()=>{if(!u)return;O("completed");const R=Math.max(0,S*10),q=Math.max(0,(100-p)*5),h=w*50,H=Math.max(0,1e3+R+q-h);k(H),d(u.rewards.exp),o(u.rewards.money),u.rewards.item&&i(u.rewards.item),w===0&&p<u.gridSize*u.gridSize*3&&r({intelligence:2})};v.useEffect(()=>{if(D==="playing"&&S>0){const R=setTimeout(()=>{b(q=>q-1)},1e3);return()=>clearTimeout(R)}else D==="playing"&&S===0&&O("failed")},[D,S]);const U=(R,q)=>{if(!u)return null;const h=R.id===u.gridSize*u.gridSize-1,H=Math.floor(R.correctPos/u.gridSize),J=R.correctPos%u.gridSize,ie=(H*u.gridSize+J)*(360/(u.gridSize*u.gridSize));return e.jsx("button",{onClick:()=>G(q),className:`
          aspect-square rounded-lg transition-all duration-200
          ${h?"bg-gray-800 cursor-default":"hover:scale-105 cursor-pointer"}
          ${R.isCorrect&&!h?"ring-2 ring-green-500":""}
          ${j&&!R.isCorrect&&!h?"animate-pulse":""}
        `,style:{backgroundColor:h?void 0:`hsl(${ie}, 70%, 50%)`,opacity:h?.3:1},children:!h&&e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("span",{className:"text-2xl font-bold text-white drop-shadow-lg",children:R.id+1})})},R.id)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-4 mb-4 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"🧩 퍼즐 게임"}),D==="playing"&&e.jsxs("div",{className:"flex gap-4 text-white",children:[e.jsxs("div",{children:["이동: ",p]}),e.jsxs("div",{children:["시간: ",Math.floor(S/60),":",(S%60).toString().padStart(2,"0")]}),e.jsxs("div",{children:["힌트: ",w,"/3"]})]})]})}),D==="menu"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"퍼즐 선택"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.map(R=>e.jsxs("button",{onClick:()=>le(R),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg p-6 text-left transition-all hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:R.image}),e.jsx("div",{className:"text-xl font-bold text-white",children:R.name}),e.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[R.gridSize,"x",R.gridSize," 퍼즐"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-yellow-400",children:"⭐".repeat(R.difficulty)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Math.floor(R.timeLimit/60),"분"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/20",children:e.jsxs("div",{className:"text-sm text-gray-300",children:["보상: ",R.rewards.exp," EXP, ",R.rewards.money," Gold",R.rewards.item&&`, ${R.rewards.item}`]})})]},R.id))}),e.jsxs("div",{className:"mt-8 bg-blue-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"게임 방법"}),e.jsxs("ul",{className:"text-gray-300 space-y-1",children:[e.jsx("li",{children:"• 빈 공간 주변의 조각을 클릭하여 이동"}),e.jsx("li",{children:"• 모든 조각을 올바른 위치에 배치"}),e.jsx("li",{children:"• 시간 내에 완성하면 보너스 점수"}),e.jsx("li",{children:"• 힌트는 3번까지 사용 가능 (점수 감점)"})]})]})]}),D==="playing"&&u&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("div",{className:"grid gap-2 mb-6 mx-auto",style:{gridTemplateColumns:`repeat(${u.gridSize}, 1fr)`,maxWidth:`${u.gridSize*100}px`},children:g.map((R,q)=>U(R,q))}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>{w<3&&(N(!0),T(R=>R+1),setTimeout(()=>N(!1),3e3))},disabled:w>=3,className:"px-6 py-3 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 text-white rounded-lg font-bold transition",children:["💡 힌트 (",3-w,"/3)"]}),e.jsx("button",{onClick:()=>Y(u),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition",children:"🔄 섞기"}),e.jsx("button",{onClick:()=>O("menu"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:"✖ 포기"})]})]}),D==="completed"&&u&&e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"퍼즐 완성!"}),e.jsxs("div",{className:"bg-purple-900/50 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"text-4xl font-bold text-yellow-400 mb-4",children:["점수: ",A]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"이동 횟수"}),e.jsx("div",{className:"text-xl font-bold",children:p})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"남은 시간"}),e.jsxs("div",{className:"text-xl font-bold",children:[Math.floor(S/60),":",(S%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"힌트 사용"}),e.jsxs("div",{className:"text-xl font-bold",children:[w,"/3"]})]})]})]}),e.jsxs("div",{className:"bg-green-900/50 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"text-lg text-white",children:"획득 보상"}),e.jsxs("div",{className:"text-sm text-gray-300 mt-2",children:[u.rewards.exp," EXP | ",u.rewards.money," Gold",u.rewards.item&&` | ${u.rewards.item}`]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>le(u),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:"다시 하기"}),e.jsx("button",{onClick:()=>O("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:"메뉴로"})]})]})}),D==="failed"&&e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⏰"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"시간 초과!"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"제한 시간 내에 퍼즐을 완성하지 못했습니다."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>u&&le(u),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:"다시 도전"}),e.jsx("button",{onClick:()=>O("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:"메뉴로"})]})]})})]})})},bb=()=>{const{player:r}=re(),[i,d]=v.useState(null),[o,u]=v.useState(!1),[m,g]=v.useState(null),[y,p]=v.useState([]),[x,S]=v.useState("ranked"),b=[{id:"opponent1",name:"Shadow Knight",level:15,hp:200,maxHp:200,mp:50,maxMp:50,attack:40,defense:30,speed:25,skills:["slash","shadowstrike"],ranking:1500,wins:45,losses:12,streak:5,avatar:"⚔️"},{id:"opponent2",name:"Fire Mage",level:14,hp:150,maxHp:150,mp:100,maxMp:100,attack:50,defense:20,speed:30,skills:["fireball","meteor"],ranking:1450,wins:38,losses:15,streak:3,avatar:"🔥"},{id:"opponent3",name:"Holy Priest",level:16,hp:180,maxHp:180,mp:80,maxMp:80,attack:30,defense:40,speed:20,skills:["heal","holylight"],ranking:1600,wins:52,losses:8,streak:8,avatar:"✨"},{id:"opponent4",name:"Assassin",level:13,hp:140,maxHp:140,mp:40,maxMp:40,attack:55,defense:15,speed:40,skills:["backstab","poisondagger"],ranking:1400,wins:30,losses:20,streak:1,avatar:"🗡️"},{id:"opponent5",name:"Tank Warrior",level:17,hp:250,maxHp:250,mp:30,maxMp:30,attack:35,defense:50,speed:15,skills:["shieldbash","ironwall"],ranking:1550,wins:40,losses:10,streak:4,avatar:"🛡️"}],D={slash:{name:"슬래시",damage:35,mpCost:5,description:"기본 검격"},fireball:{name:"파이어볼",damage:45,mpCost:10,description:"화염 마법"},heal:{name:"힐",damage:-40,mpCost:15,description:"HP 회복"},backstab:{name:"백스탭",damage:60,mpCost:8,description:"치명적 일격"},shieldbash:{name:"실드 배쉬",damage:25,mpCost:5,description:"기절 효과"},shadowstrike:{name:"그림자 공격",damage:50,mpCost:12,description:"암흑 공격"},meteor:{name:"메테오",damage:70,mpCost:20,description:"광역 마법"},holylight:{name:"홀리 라이트",damage:40,mpCost:10,description:"신성 공격"},poisondagger:{name:"독칼",damage:30,mpCost:6,description:"지속 피해"},ironwall:{name:"철벽",damage:0,mpCost:10,description:"방어력 증가"}};v.useEffect(()=>{const j=[...b].sort((N,w)=>w.ranking-N.ranking);p(j)},[]);const O=()=>{u(!0),setTimeout(()=>{const j=b[Math.floor(Math.random()*b.length)],N={id:"player",name:r.name,level:r.level||10,hp:100+(r.level||10)*10,maxHp:100+(r.level||10)*10,mp:50+(r.level||10)*5,maxMp:50+(r.level||10)*5,attack:20+(r.level||10)*2,defense:15+(r.level||10),speed:20+Math.floor((r.level||10)/2),skills:["slash","fireball","heal"],ranking:1200,wins:0,losses:0,streak:0,avatar:"🗡️"};d({player:N,opponent:{...j},turn:N.speed>=j.speed?"player":"opponent",logs:[],status:"preparing"}),u(!1),setTimeout(()=>{d(w=>w?{...w,status:"battling"}:null)},2e3)},2e3)},C=j=>{if(!i||i.status!=="battling"||i.turn!=="player")return;const N=D[j];if(!N||N.mpCost>i.player.mp)return;let w=N.damage;w>0&&(w=Math.max(1,w+i.player.attack-i.opponent.defense));const T=w>0?Math.max(0,i.opponent.hp-w):i.opponent.hp,A=w<0?Math.min(i.player.maxHp,i.player.hp-w):i.player.hp,k={attacker:r.name,action:N.name,damage:Math.abs(w),effect:w<0?"heal":"damage",timestamp:Date.now()};if(d({...i,player:{...i.player,mp:i.player.mp-N.mpCost,hp:A},opponent:{...i.opponent,hp:T},turn:"opponent",logs:[...i.logs,k]}),T<=0){setTimeout(()=>{d(M=>M?{...M,status:"victory"}:null)},1e3);return}setTimeout(()=>{z()},1500)},z=()=>{if(!i||i.status!=="battling")return;const j=i.opponent.skills.filter(Y=>{const B=D[Y];return B&&B.mpCost<=i.opponent.mp});if(j.length===0)return;const N=j[Math.floor(Math.random()*j.length)],w=D[N];let T=w.damage;T>0&&(T=Math.max(1,T+i.opponent.attack-i.player.defense));const A=T>0?Math.max(0,i.player.hp-T):i.player.hp,k=T<0?Math.min(i.opponent.maxHp,i.opponent.hp-T):i.opponent.hp,M={attacker:i.opponent.name,action:w.name,damage:Math.abs(T),effect:T<0?"heal":"damage",timestamp:Date.now()};d({...i,opponent:{...i.opponent,mp:i.opponent.mp-w.mpCost,hp:k},player:{...i.player,hp:A},turn:"player",logs:[...i.logs,M]}),A<=0&&setTimeout(()=>{d(Y=>Y?{...Y,status:"defeat"}:null)},1e3)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-purple-800 to-blue-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"⚔️ PvP 배틀 아레나"}),e.jsx("div",{className:"flex gap-2",children:["ranked","casual","tournament"].map(j=>e.jsx("button",{onClick:()=>S(j),className:`px-4 py-2 rounded-lg font-bold transition-all ${x===j?"bg-gradient-to-r from-red-500 to-orange-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:j==="ranked"?"랭크전":j==="casual"?"일반전":"토너먼트"},j))})]})}),i?e.jsx(e.Fragment,{children:i.status==="preparing"?e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"⚔️"}),e.jsx("div",{className:"text-3xl font-bold text-white mb-4",children:"VS"}),e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:i.player.avatar}),e.jsx("div",{className:"text-xl font-bold text-white",children:i.player.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",i.player.level]})]}),e.jsx("div",{className:"text-4xl text-yellow-400",children:"VS"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:i.opponent.avatar}),e.jsx("div",{className:"text-xl font-bold text-white",children:i.opponent.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",i.opponent.level]})]})]})]})}):i.status==="battling"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:`${i.turn==="player"?"ring-4 ring-green-400":""} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-3xl",children:i.player.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-bold",children:i.player.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",i.player.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"HP"}),e.jsxs("span",{children:[i.player.hp,"/",i.player.maxHp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-400 h-full transition-all",style:{width:`${i.player.hp/i.player.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"MP"}),e.jsxs("span",{children:[i.player.mp,"/",i.player.maxMp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-full transition-all",style:{width:`${i.player.mp/i.player.maxMp*100}%`}})})]})]})]}),e.jsxs("div",{className:`${i.turn==="opponent"?"ring-4 ring-red-400":""} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-3xl",children:i.opponent.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-bold",children:i.opponent.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",i.opponent.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"HP"}),e.jsxs("span",{children:[i.opponent.hp,"/",i.opponent.maxHp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-400 h-full transition-all",style:{width:`${i.opponent.hp/i.opponent.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"MP"}),e.jsxs("span",{children:[i.opponent.mp,"/",i.opponent.maxMp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 h-full transition-all",style:{width:`${i.opponent.mp/i.opponent.maxMp*100}%`}})})]})]})]})]}),i.turn==="player"&&e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:"당신의 턴!"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:i.player.skills.map(j=>{const N=D[j],w=N&&N.mpCost<=i.player.mp;return e.jsxs("button",{onClick:()=>w&&C(j),disabled:!w,className:`p-3 rounded-lg font-bold transition-all ${w?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("div",{children:N?.name}),e.jsxs("div",{className:"text-xs",children:["MP: ",N?.mpCost]})]},j)})})]}),i.turn==="opponent"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("div",{className:"text-white/70",children:"상대방의 턴..."})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:"전투 로그"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:i.logs.slice(-5).map((j,N)=>e.jsxs("div",{className:"text-sm text-white/80",children:[e.jsx("span",{className:"font-bold",children:j.attacker}),"의",e.jsxs("span",{className:"text-yellow-400",children:[" ",j.action]}),"!",j.effect==="damage"&&e.jsxs("span",{className:"text-red-400",children:[" -",j.damage," 데미지"]}),j.effect==="heal"&&e.jsxs("span",{className:"text-green-400",children:[" +",j.damage," 회복"]})]},N))})]})]}):e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:i.status==="victory"?"🏆":"💀"}),e.jsx("div",{className:"text-4xl font-bold text-white mb-4",children:i.status==="victory"?"VICTORY!":"DEFEAT"}),e.jsx("div",{className:"text-white/70 mb-6",children:i.status==="victory"?`${i.opponent.name}을(를) 물리쳤습니다!`:`${i.opponent.name}에게 패배했습니다...`}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:"전투 보상"}),e.jsx("div",{className:"space-y-1 text-white/80",children:i.status==="victory"?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"🏆 랭킹 포인트: +25 RP"}),e.jsx("div",{children:"💰 골드: +100 G"}),e.jsx("div",{children:"⭐ 경험치: +50 EXP"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"📉 랭킹 포인트: -10 RP"}),e.jsx("div",{children:"💰 골드: +25 G"}),e.jsx("div",{children:"⭐ 경험치: +10 EXP"})]})})]}),e.jsx("button",{onClick:()=>d(null),className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-bold hover:scale-105 transition-all",children:"로비로 돌아가기"})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 mb-6",children:e.jsx("div",{className:"text-center",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"⚔️"}),e.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"매칭 중..."}),e.jsx("div",{className:"text-white/70",children:"상대를 찾고 있습니다"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),e.jsx("div",{className:"text-2xl font-bold text-white mb-4",children:"배틀 준비 완료!"}),e.jsx("button",{onClick:O,className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-8 py-4 rounded-xl text-xl font-bold hover:scale-105 transition-all",children:"매치 찾기"}),e.jsxs("div",{className:"mt-4 text-white/70",children:["현재 랭킹: #",r.pvpRanking||1e3," | 승률: ",r.pvpWins||0,"W ",r.pvpLosses||0,"L"]})]})})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"🏆 리더보드"}),e.jsx("div",{className:"space-y-2",children:y.map((j,N)=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:N===0?"🥇":N===1?"🥈":N===2?"🥉":`#${N+1}`}),e.jsx("div",{className:"text-2xl",children:j.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:j.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",j.level]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-white font-bold",children:[j.ranking," RP"]}),e.jsxs("div",{className:"text-sm text-white/70",children:[j.wins,"W ",j.losses,"L"]}),j.streak>0&&e.jsxs("div",{className:"text-sm text-orange-400",children:["🔥 ",j.streak," 연승"]})]})]},j.id))})]})]})]})})},yb=()=>{const{player:r}=re(),[i,d]=v.useState("friends"),[o,u]=v.useState([]),[m,g]=v.useState([]),[y,p]=v.useState(null),[x,S]=v.useState([]),[b,D]=v.useState(""),[O,C]=v.useState(""),[z,j]=v.useState(!1),N=[{id:"flower",name:"꽃다발",icon:"💐",friendshipPoints:10,cost:50},{id:"chocolate",name:"초콜릿",icon:"🍫",friendshipPoints:15,cost:75},{id:"gem",name:"보석",icon:"💎",friendshipPoints:30,cost:150},{id:"letter",name:"편지",icon:"💌",friendshipPoints:20,cost:100},{id:"trophy",name:"트로피",icon:"🏆",friendshipPoints:50,cost:300}],w=[{id:"1",name:"Luna",level:15,status:"online",lastSeen:new Date,friendshipLevel:85,avatar:"🌙",mutualGuilds:["Starlight"],achievements:24,message:"던전 같이 가실 분~"},{id:"2",name:"Phoenix",level:22,status:"busy",lastSeen:new Date,friendshipLevel:70,avatar:"🔥",mutualGuilds:["Blaze","Starlight"],achievements:45,message:"레이드 중"},{id:"3",name:"Crystal",level:18,status:"offline",lastSeen:new Date(Date.now()-36e5),friendshipLevel:60,avatar:"💎",mutualGuilds:[],achievements:31},{id:"4",name:"Shadow",level:25,status:"away",lastSeen:new Date,friendshipLevel:45,avatar:"🌑",mutualGuilds:["DarkKnights"],achievements:67,message:"AFK"},{id:"5",name:"Aurora",level:20,status:"online",lastSeen:new Date,friendshipLevel:92,avatar:"🌟",mutualGuilds:["Starlight"],achievements:38,message:"낚시 중이에요 🎣"}],T=[{id:"6",name:"Blade",level:30,status:"online",lastSeen:new Date,friendshipLevel:0,avatar:"⚔️",mutualGuilds:[],achievements:89},{id:"7",name:"Rose",level:16,status:"online",lastSeen:new Date,friendshipLevel:0,avatar:"🌹",mutualGuilds:[],achievements:22}];v.useEffect(()=>{u(w.slice(0,3)),g(w.slice(3,4))},[]);const A=()=>{if(!b.trim()||!y)return;const G={id:Date.now().toString(),sender:r.name,content:b,timestamp:new Date,type:"text"};S([...x,G]),D("")},k=G=>{if(!y)return;const le={id:Date.now().toString(),sender:r.name,content:`${G.icon} ${G.name}을(를) 보냈습니다!`,timestamp:new Date,type:"gift"};S([...x,le]),u(o.map(E=>E.id===y.id?{...E,friendshipLevel:Math.min(100,E.friendshipLevel+G.friendshipPoints/5)}:E)),j(!1)},M=G=>{u([...o,G]),g(m.filter(le=>le.id!==G.id))},Y=G=>{alert(`${G.name}에게 친구 요청을 보냈습니다!`)},B=G=>{switch(G){case"online":return"bg-green-500";case"busy":return"bg-red-500";case"away":return"bg-yellow-500";default:return"bg-gray-500"}},ae=G=>G>=90?"절친":G>=70?"친한 친구":G>=50?"친구":G>=30?"아는 사이":"새로운 친구";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"👥 소셜 시스템"}),e.jsx("div",{className:"flex gap-2 mt-4",children:["friends","chat","search","requests"].map(G=>e.jsxs("button",{onClick:()=>d(G),className:`px-4 py-2 rounded-lg font-bold transition-all ${i===G?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[G==="friends"&&"친구 목록",G==="chat"&&"채팅",G==="search"&&"친구 찾기",G==="requests"&&`친구 요청 ${m.length>0?`(${m.length})`:""}`]},G))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[i==="friends"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["친구 목록 (",o.length,")"]}),e.jsx("div",{className:"space-y-2",children:o.map(G=>e.jsx("div",{onClick:()=>p(G),className:`bg-white/10 rounded-lg p-3 cursor-pointer hover:bg-white/20 transition-all ${y?.id===G.id?"ring-2 ring-pink-500":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-2xl",children:G.avatar}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 ${B(G.status)} rounded-full border-2 border-black`})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:G.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",G.level]}),G.message&&e.jsx("div",{className:"text-xs text-white/50 italic",children:G.message})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-white/70",children:ae(G.friendshipLevel)}),e.jsx("div",{className:"w-16 bg-gray-700 rounded-full h-1 mt-1",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-full rounded-full",style:{width:`${G.friendshipLevel}%`}})})]})]})},G.id))})]}),i==="search"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"친구 찾기"}),e.jsx("input",{type:"text",value:O,onChange:G=>C(G.target.value),placeholder:"플레이어 이름 검색...",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 mb-4"}),e.jsx("div",{className:"space-y-2",children:T.filter(G=>G.name.toLowerCase().includes(O.toLowerCase())).map(G=>e.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:G.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:G.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",G.level," • ",G.achievements," 업적"]})]})]}),e.jsx("button",{onClick:()=>Y(G),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-3 py-1 rounded text-sm font-bold hover:scale-105 transition-all",children:"친구 추가"})]})},G.id))})]}),i==="requests"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"친구 요청"}),m.length>0?e.jsx("div",{className:"space-y-2",children:m.map(G=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:G.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:G.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",G.level]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M(G),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-1 rounded text-sm font-bold",children:"수락"}),e.jsx("button",{onClick:()=>g(m.filter(le=>le.id!==G.id)),className:"flex-1 bg-red-500/20 text-red-400 py-1 rounded text-sm font-bold",children:"거절"})]})]},G.id))}):e.jsx("div",{className:"text-center text-white/50 py-8",children:"새로운 친구 요청이 없습니다"})]})]}),e.jsx("div",{className:"lg:col-span-2",children:(i==="friends"||i==="chat")&&y?e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 h-[600px] flex flex-col",children:[e.jsx("div",{className:"bg-white/10 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl",children:y.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-white",children:y.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",y.level," • ",ae(y.friendshipLevel)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:`w-2 h-2 ${B(y.status)} rounded-full`}),e.jsx("span",{className:"text-sm text-white/50",children:y.status})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(!0),className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 py-2 rounded-lg font-bold hover:scale-105 transition-all",children:"🎁 선물"}),e.jsx("button",{className:"bg-white/10 text-white px-4 py-2 rounded-lg font-bold hover:bg-white/20 transition-all",children:"👥 프로필"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:x.map(G=>e.jsx("div",{className:`flex ${G.sender===r.name?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg ${G.sender===r.name?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white"}`,children:[G.type==="gift"&&e.jsx("div",{className:"text-2xl mb-1 text-center",children:"🎁"}),e.jsx("div",{className:"text-sm",children:G.content}),e.jsx("div",{className:"text-xs opacity-70 mt-1",children:new Date(G.timestamp).toLocaleTimeString()})]})},G.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:G=>D(G.target.value),onKeyPress:G=>G.key==="Enter"&&A(),placeholder:"메시지를 입력하세요...",className:"flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50"}),e.jsx("button",{onClick:A,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg font-bold hover:scale-105 transition-all",children:"전송"})]})]}):e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center text-white/50",children:[e.jsx("div",{className:"text-6xl mb-4",children:"💬"}),e.jsx("div",{className:"text-xl",children:"친구를 선택하여 대화를 시작하세요"})]})})})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"선물 보내기"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:N.map(G=>e.jsxs("button",{onClick:()=>k(G),className:"bg-white/10 rounded-lg p-4 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-3xl mb-2",children:G.icon}),e.jsx("div",{className:"text-sm text-white font-bold",children:G.name}),e.jsxs("div",{className:"text-xs text-white/70",children:[G.cost," G"]}),e.jsxs("div",{className:"text-xs text-green-400",children:["+",G.friendshipPoints," ❤️"]})]},G.id))}),e.jsx("button",{onClick:()=>j(!1),className:"w-full mt-4 bg-white/10 text-white py-2 rounded-lg font-bold hover:bg-white/20 transition-all",children:"취소"})]})})]})})},vb=()=>{const{player:r}=re(),[i,d]=v.useState(null),[o,u]=v.useState([]),[m,g]=v.useState(!1),[y,p]=v.useState(null),x=[{id:"1",name:"초보자의 검",type:"weapon",icon:"⚔️",level:0,maxLevel:15,rarity:"common",baseStats:{attack:10},enhancedStats:{attack:10},enhancementCost:100,successRate:95},{id:"2",name:"강철 갑옷",type:"armor",icon:"🛡️",level:3,maxLevel:15,rarity:"rare",baseStats:{defense:15,hp:50},enhancedStats:{defense:20,hp:65},enhancementCost:200,successRate:80},{id:"3",name:"마법의 반지",type:"accessory",icon:"💍",level:5,maxLevel:20,rarity:"epic",baseStats:{mp:30,speed:5},enhancedStats:{mp:45,speed:8},enhancementCost:500,successRate:65},{id:"4",name:"용의 검",type:"weapon",icon:"🗡️",level:7,maxLevel:25,rarity:"legendary",baseStats:{attack:50,speed:10},enhancedStats:{attack:85,speed:17},enhancementCost:1e3,successRate:45},{id:"5",name:"빛의 목걸이",type:"accessory",icon:"📿",level:1,maxLevel:15,rarity:"rare",baseStats:{hp:30,mp:20},enhancedStats:{hp:35,mp:23},enhancementCost:150,successRate:88}],S=[{id:"blessing",name:"축복의 주문서",icon:"📜",successBonus:10,protectItem:!1,quantity:5},{id:"protection",name:"보호의 주문서",icon:"🛡️",successBonus:0,protectItem:!0,quantity:3},{id:"lucky",name:"행운의 돌",icon:"🍀",successBonus:20,protectItem:!1,quantity:2},{id:"master",name:"장인의 망치",icon:"🔨",successBonus:30,protectItem:!0,quantity:1}],b=()=>{if(!i)return 0;let j=i.successRate-i.level*5;j=Math.max(10,j);const N=o.reduce((w,T)=>w+T.successBonus,0);return Math.min(100,j+N)},D=()=>i?i.enhancementCost*(i.level+1):0,O=()=>{!i||m||(g(!0),p(null),setTimeout(()=>{const j=b();if(Math.random()*100<j){const T=i.level+1,A=Math.floor(T/3+1);d({...i,level:T,enhancedStats:{attack:i.baseStats.attack?i.baseStats.attack+A*3:void 0,defense:i.baseStats.defense?i.baseStats.defense+A*2:void 0,hp:i.baseStats.hp?i.baseStats.hp+A*10:void 0,mp:i.baseStats.mp?i.baseStats.mp+A*5:void 0,speed:i.baseStats.speed?i.baseStats.speed+A:void 0}}),p({success:!0,newLevel:T})}else{const T=o.some(A=>A.protectItem);!T&&i.level>=10?(p({success:!1,destroyed:!0}),d(null)):!T&&i.level>=5?(d({...i,level:Math.max(0,i.level-1)}),p({success:!1,newLevel:Math.max(0,i.level-1)})):p({success:!1})}g(!1),u([])},2e3))},C=j=>{switch(j){case"legendary":return"from-yellow-500 to-orange-500";case"epic":return"from-purple-500 to-pink-500";case"rare":return"from-blue-500 to-cyan-500";default:return"from-gray-500 to-gray-600"}},z=j=>{switch(j){case"legendary":return"text-yellow-400";case"epic":return"text-purple-400";case"rare":return"text-blue-400";default:return"text-gray-400"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"🔨 아이템 강화"}),e.jsx("div",{className:"mt-2 text-white/70",children:"아이템을 강화하여 더 강력하게 만드세요! 높은 강화 단계일수록 실패 위험이 증가합니다."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"보유 아이템"}),e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:x.map(j=>e.jsx("button",{onClick:()=>d(j),className:`w-full bg-white/10 rounded-lg p-3 hover:bg-white/20 transition-all text-left ${i?.id===j.id?"ring-2 ring-yellow-400":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:j.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:`font-bold ${z(j.rarity)}`,children:[j.name," ",j.level>0&&`+${j.level}`]}),e.jsx("div",{className:"text-xs text-white/60",children:j.type==="weapon"?"무기":j.type==="armor"?"방어구":"액세서리"})]})]}),j.level===j.maxLevel&&e.jsx("div",{className:"text-xs text-yellow-400 font-bold",children:"MAX"})]})},j.id))})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"강화 정보"}),i?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`bg-gradient-to-r ${C(i.rarity)} p-4 rounded-lg`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:i.icon}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[i.name," +",i.level]}),e.jsxs("div",{className:"text-white/80",children:[i.level," / ",i.maxLevel]})]})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:"현재 능력치"}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(i.enhancedStats).map(([j,N])=>N&&e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:j==="attack"?"공격력":j==="defense"?"방어력":j.toUpperCase()}),e.jsxs("span",{className:"text-green-400",children:["+",N]})]},j))})]}),i.level<i.maxLevel&&e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm font-bold text-white mb-2",children:["강화 시 (+",i.level+1,")"]}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(i.enhancedStats).map(([j,N])=>{if(!N)return null;const w=Math.floor((i.level+1)/3+1)*(j==="attack"?3:j==="defense"?2:j==="hp"?10:j==="mp"?5:1);return e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:j==="attack"?"공격력":j==="defense"?"방어력":j.toUpperCase()}),e.jsxs("span",{className:"text-yellow-400",children:["+",N+w-N," (총 ",N+w-N,")"]})]},j)})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:"성공 확률"}),e.jsxs("span",{className:`font-bold ${b()>=70?"text-green-400":b()>=40?"text-yellow-400":"text-red-400"}`,children:[b(),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:"강화 비용"}),e.jsxs("span",{className:"text-yellow-400",children:[D()," G"]})]}),i.level>=5&&e.jsxs("div",{className:"text-xs text-red-400",children:["⚠️ 실패 시 ",i.level>=10?"아이템이 파괴될 수 있습니다":"강화 레벨이 하락할 수 있습니다"]})]})]}):e.jsx("div",{className:"text-center text-white/50 py-8",children:"강화할 아이템을 선택하세요"})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"강화 재료"}),e.jsx("div",{className:"space-y-2 mb-4",children:S.map(j=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:j.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-sm",children:j.name}),e.jsxs("div",{className:"text-xs text-white/60",children:[j.successBonus>0&&`성공률 +${j.successBonus}%`,j.protectItem&&"아이템 보호"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/70 text-sm",children:["x",j.quantity]}),j.quantity>0&&e.jsx("button",{onClick:()=>{o.find(N=>N.id===j.id)?u(o.filter(N=>N.id!==j.id)):u([...o,j])},className:`px-2 py-1 rounded text-xs font-bold transition-all ${o.find(N=>N.id===j.id)?"bg-green-500 text-white":"bg-white/20 text-white/70 hover:bg-white/30"}`,children:o.find(N=>N.id===j.id)?"사용중":"사용"})]})]},j.id))}),o.length>0&&e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:"사용할 재료"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:o.map(j=>e.jsxs("div",{className:"bg-white/20 rounded px-2 py-1 text-xs text-white flex items-center gap-1",children:[e.jsx("span",{children:j.icon}),e.jsx("span",{children:j.name})]},j.id))})]}),i&&i.level<i.maxLevel&&e.jsx("button",{onClick:O,disabled:m||(r.gold||0)<D(),className:`w-full py-4 rounded-lg font-bold text-lg transition-all ${m?"bg-gray-600 text-gray-400 cursor-not-allowed":(r.gold||0)<D()?"bg-red-600/50 text-red-300 cursor-not-allowed":"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:scale-105"}`,children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin",children:"⚙️"}),"강화 중..."]}):(r.gold||0)<D()?"골드 부족":"강화 시작"}),y&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg text-center ${y.success?"bg-green-500/20":"bg-red-500/20"}`,children:[e.jsx("div",{className:"text-3xl mb-2",children:y.success?"✨":y.destroyed?"💔":"❌"}),e.jsx("div",{className:"text-white font-bold",children:y.success?`강화 성공! (+${y.newLevel})`:y.destroyed?"아이템이 파괴되었습니다...":y.newLevel!==void 0?`강화 실패... (+${y.newLevel})`:"강화 실패"})]})]})]})]})})},jb="http://localhost:9000";class Nb{constructor(i=jb){this.baseUrl=i}async healthCheck(){try{return await(await fetch(`${this.baseUrl}/health`)).json()}catch(i){throw console.error("Health check failed:",i),i}}async testApi(){try{return await(await fetch(`${this.baseUrl}/api/test`)).json()}catch(i){throw console.error("API test failed:",i),i}}async login(i,d){try{return await(await fetch(`${this.baseUrl}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:d})})).json()}catch(o){throw console.error("Login failed:",o),o}}async register(i,d,o){try{return await(await fetch(`${this.baseUrl}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,username:d,password:o})})).json()}catch(u){throw console.error("Registration failed:",u),u}}async saveGame(i){try{return await(await fetch(`${this.baseUrl}/api/game/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`},body:JSON.stringify(i)})).json()}catch(d){throw console.error("Save game failed:",d),d}}async loadGame(){try{return await(await fetch(`${this.baseUrl}/api/game/load`,{headers:{Authorization:`Bearer ${this.getToken()}`}})).json()}catch(i){throw console.error("Load game failed:",i),i}}getToken(){return localStorage.getItem("authToken")}setToken(i){localStorage.setItem("authToken",i)}removeToken(){localStorage.removeItem("authToken")}}const Wc=new Nb,wb=()=>{const[r,i]=v.useState(null),[d,o]=v.useState(null),[u,m]=v.useState(!1),[g,y]=v.useState(null);v.useEffect(()=>{p()},[]);const p=async()=>{m(!0),y(null);try{const b=await Wc.healthCheck();i(b)}catch(b){y("백엔드 연결 실패: "+b.message)}finally{m(!1)}},x=async()=>{m(!0),y(null);try{const b=await Wc.testApi();o(b)}catch(b){y("API 테스트 실패: "+b.message)}finally{m(!1)}},S=async()=>{m(!0),y(null);try{const b=await Wc.login("demo@academy-dating-sim.com","demo123");console.log("Login result:",b),alert("로그인 테스트 결과를 콘솔에서 확인하세요")}catch(b){y("로그인 테스트 실패: "+b.message)}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-xl p-8 border border-white/20",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-8 text-center",children:"🔗 백엔드 API 연결 테스트"}),g&&e.jsxs("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6 text-red-200",children:[e.jsx("strong",{children:"오류:"})," ",g]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"🏥 Health Check"}),e.jsx("button",{onClick:p,disabled:u,className:"w-full mb-4 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?"테스트 중...":"서버 상태 확인"}),r&&e.jsx("div",{className:"bg-black/50 rounded p-3 text-sm",children:e.jsx("pre",{className:"text-green-300 whitespace-pre-wrap",children:JSON.stringify(r,null,2)})})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"🧪 API 테스트"}),e.jsx("button",{onClick:x,disabled:u,className:"w-full mb-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?"테스트 중...":"API 엔드포인트 테스트"}),d&&e.jsx("div",{className:"bg-black/50 rounded p-3 text-sm",children:e.jsx("pre",{className:"text-blue-300 whitespace-pre-wrap",children:JSON.stringify(d,null,2)})})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"🔐 인증 테스트"}),e.jsx("button",{onClick:S,disabled:u,className:"w-full mb-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?"테스트 중...":"로그인 테스트 (demo 계정)"}),e.jsx("p",{className:"text-gray-300 text-xs",children:"데모 계정: demo@academy-dating-sim.com / demo123"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"📊 연결 상태"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"프론트엔드:"}),e.jsx("span",{className:"text-green-400",children:"✅ http://localhost:5173"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"백엔드:"}),e.jsxs("span",{className:r?"text-green-400":"text-red-400",children:[r?"✅":"❌"," http://localhost:3001"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"데이터베이스:"}),e.jsx("span",{className:"text-green-400",children:"✅ Supabase PostgreSQL"})]})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-all",children:"← 돌아가기"})})]})})})},kb=[{id:"kendo",name:"검도부",description:"검술을 연마하는 전통 무술 동아리",leader:"sakura",members:["sakura","npc_kendo_1","npc_kendo_2"],maxMembers:20,requirements:{stats:{strength:15,stamina:10},level:5},schedule:{monday:{time:"afternoon",activity:"training"},wednesday:{time:"afternoon",activity:"training"},friday:{time:"afternoon",activity:"sparring"},saturday:{time:"morning",activity:"tournament"}},benefits:{daily:{stats:{strength:1,stamina:1},exp:50},weekly:{items:["training_sword"],money:500},rank:{beginner:{title:"초심자",bonus:{strength:5}},intermediate:{title:"수련생",bonus:{strength:10,stamina:5}},advanced:{title:"달인",bonus:{strength:15,stamina:10,agility:5}},master:{title:"검성",bonus:{strength:25,stamina:15,agility:10}}}},activities:[{id:"daily_training",name:"일일 수련",description:"기본 검술 훈련",rewards:{exp:30,stats:{strength:1}}},{id:"sparring_match",name:"대련",description:"부원들과 실전 대련",rewards:{exp:50,stats:{strength:2,agility:1}}},{id:"tournament",name:"토너먼트",description:"동아리 내부 토너먼트",rewards:{exp:100,money:1e3,item:"trophy"}}],events:[{id:"kendo_festival",name:"검도 축제",description:"연례 검도 시연회",date:{month:6,day:15},rewards:{affinity:{sakura:20},item:"special_sword"}}],reputation:0,level:1,exp:0},{id:"library",name:"도서부",description:"책을 사랑하는 문학 동아리",leader:"yuki",members:["yuki","npc_library_1","npc_library_2"],maxMembers:15,requirements:{stats:{intelligence:20},level:3},schedule:{tuesday:{time:"afternoon",activity:"reading"},thursday:{time:"afternoon",activity:"discussion"},saturday:{time:"noon",activity:"book_club"}},benefits:{daily:{stats:{intelligence:2},exp:40},weekly:{items:["rare_book"],money:300},rank:{member:{title:"독서가",bonus:{intelligence:5}},librarian:{title:"사서",bonus:{intelligence:10,exp_gain:10}},scholar:{title:"학자",bonus:{intelligence:20,exp_gain:20}},sage:{title:"현자",bonus:{intelligence:30,all_stats:5}}}},activities:[{id:"quiet_reading",name:"조용한 독서",description:"혼자 책 읽기",rewards:{exp:25,stats:{intelligence:1}}},{id:"book_discussion",name:"독서 토론",description:"책에 대해 토론하기",rewards:{exp:40,stats:{intelligence:2,charm:1}}},{id:"write_review",name:"서평 작성",description:"읽은 책의 서평 쓰기",rewards:{exp:60,money:200}}],events:[{id:"book_fair",name:"도서 박람회",description:"희귀 도서 전시회",date:{month:9,day:20},rewards:{affinity:{yuki:15},item:"ancient_tome"}}],reputation:0,level:1,exp:0},{id:"magic",name:"마법 연구회",description:"신비한 마법을 연구하는 동아리",leader:"luna",members:["luna","npc_magic_1","npc_magic_2","npc_magic_3"],maxMembers:12,requirements:{stats:{intelligence:25,luck:10},level:10},schedule:{monday:{time:"evening",activity:"theory"},wednesday:{time:"evening",activity:"practice"},friday:{time:"night",activity:"ritual"}},benefits:{daily:{stats:{intelligence:1,luck:1},mp:5,exp:60},weekly:{items:["mana_potion","spell_scroll"],money:800},rank:{apprentice:{title:"견습 마법사",bonus:{mp:10,intelligence:5}},adept:{title:"숙련 마법사",bonus:{mp:20,intelligence:10,luck:5}},wizard:{title:"대마법사",bonus:{mp:40,intelligence:20,luck:10}},archmage:{title:"대마도사",bonus:{mp:60,all_stats:10}}}},activities:[{id:"spell_practice",name:"주문 연습",description:"기초 마법 연습",rewards:{exp:40,mp:5}},{id:"enchantment",name:"마법 부여",description:"아이템에 마법 부여",rewards:{exp:70,item:"enchanted_item"}},{id:"summoning",name:"소환술",description:"정령 소환 의식",rewards:{exp:100,stats:{luck:2}}}],reputation:0,level:1,exp:0},{id:"track",name:"육상부",description:"달리기와 체력을 기르는 운동 동아리",leader:"rin",members:["rin","npc_track_1","npc_track_2"],maxMembers:25,requirements:{stats:{stamina:20,agility:15},level:5},schedule:{daily:{time:"morning",activity:"morning_run"},weekend:{time:"afternoon",activity:"competition"}},benefits:{daily:{stats:{stamina:2,agility:1},exp:45},weekly:{items:["energy_drink","running_shoes"],money:400}},activities:[{id:"morning_jog",name:"아침 조깅",description:"상쾌한 아침 러닝",rewards:{exp:30,stats:{stamina:2}}},{id:"sprint_training",name:"스프린트 훈련",description:"단거리 전력 질주",rewards:{exp:50,stats:{agility:2,stamina:1}}}],reputation:0,level:1,exp:0},{id:"art",name:"미술부",description:"예술과 창작을 추구하는 동아리",leader:"mei",members:["mei","npc_art_1","npc_art_2"],maxMembers:18,requirements:{stats:{charm:15},level:4},schedule:{tuesday:{time:"afternoon",activity:"sketching"},thursday:{time:"afternoon",activity:"painting"},sunday:{time:"noon",activity:"exhibition"}},benefits:{daily:{stats:{charm:2},exp:35},weekly:{items:["art_supplies","canvas"],money:600}},activities:[{id:"sketching",name:"스케치",description:"기초 드로잉 연습",rewards:{exp:30,stats:{charm:1}}},{id:"painting",name:"그림 그리기",description:"캔버스에 작품 제작",rewards:{exp:50,item:"painting",money:300}}],reputation:0,level:1,exp:0},{id:"cooking",name:"요리부",description:"맛있는 요리를 만드는 동아리",leader:"hana",members:["hana","npc_cooking_1","npc_cooking_2"],maxMembers:20,requirements:{stats:{stamina:10},level:2},schedule:{monday:{time:"noon",activity:"basic_cooking"},wednesday:{time:"noon",activity:"baking"},friday:{time:"noon",activity:"special_menu"}},benefits:{daily:{stats:{stamina:1,charm:1},exp:30,items:["lunch_box"]},weekly:{items:["special_recipe","ingredients"],money:350}},activities:[{id:"cooking_practice",name:"요리 연습",description:"기본 요리 실습",rewards:{exp:25,item:"homemade_meal"}},{id:"bake_dessert",name:"디저트 만들기",description:"달콤한 디저트 제작",rewards:{exp:40,item:"dessert",affinity_all:2}}],reputation:0,level:1,exp:0},{id:"science",name:"과학부",description:"과학 실험과 연구를 하는 동아리",leader:"sora",members:["sora","npc_science_1","npc_science_2"],maxMembers:16,requirements:{stats:{intelligence:30},level:8},schedule:{tuesday:{time:"evening",activity:"experiment"},thursday:{time:"evening",activity:"research"},saturday:{time:"afternoon",activity:"invention"}},benefits:{daily:{stats:{intelligence:3},exp:55},weekly:{items:["research_notes","invention"],money:1e3}},activities:[{id:"experiment",name:"실험",description:"과학 실험 수행",rewards:{exp:45,stats:{intelligence:2}}},{id:"invention",name:"발명",description:"새로운 장치 개발",rewards:{exp:80,item:"invention",money:500}}],reputation:0,level:1,exp:0},{id:"student_council",name:"학생회",description:"학교를 이끄는 리더십 조직",leader:"akane",members:["akane","npc_council_1","npc_council_2","npc_council_3"],maxMembers:10,requirements:{stats:{intelligence:25,charm:20},level:15,reputation:500},schedule:{daily:{time:"afternoon",activity:"meeting"},friday:{time:"evening",activity:"event_planning"}},benefits:{daily:{stats:{charm:2,intelligence:1},exp:70,reputation:5},weekly:{money:1500,items:["council_badge"]},rank:{member:{title:"일반 위원",bonus:{charm:5,reputation_gain:10}},secretary:{title:"서기",bonus:{charm:10,intelligence:5,reputation_gain:20}},vice_president:{title:"부회장",bonus:{all_stats:10,reputation_gain:30}},president:{title:"회장",bonus:{all_stats:20,reputation_gain:50}}}},activities:[{id:"council_meeting",name:"회의",description:"학생회 정기 회의",rewards:{exp:50,reputation:10}},{id:"event_organization",name:"행사 기획",description:"학교 행사 준비",rewards:{exp:100,reputation:20,money:500}}],reputation:0,level:1,exp:0},{id:"occult",name:"오컬트 연구회",description:"신비하고 초자연적인 것을 연구하는 비밀 동아리",leader:"mystery",members:["mystery","npc_occult_1"],maxMembers:7,requirements:{stats:{intelligence:20,luck:20},level:20,flags:["discovered_secret"],affinity:{mystery:50}},secret:!0,schedule:{midnight:{time:"night",activity:"ritual"}},benefits:{daily:{stats:{luck:3,intelligence:2},exp:100},weekly:{items:["mysterious_artifact","forbidden_knowledge"],money:2e3}},activities:[{id:"séance",name:"강령술",description:"영혼과의 교감",rewards:{exp:100,stats:{luck:5}}},{id:"dimension_research",name:"차원 연구",description:"평행 세계 탐구",rewards:{exp:200,unlock:"special_ending"}}],reputation:0,level:1,exp:0}],Sb={clubs:kb},Vl=Sb.clubs,Ex=qa,Cb=()=>{const r=ke(),i=re(N=>N.player),{updateStats:d,updatePlayer:o,addItem:u,updateMoney:m}=re(N=>N.actions),[g,y]=v.useState(null),[p,x]=v.useState(i.currentClub||null),[S,b]=v.useState({}),D=N=>{if(p||N.requirements.level&&i.level<N.requirements.level)return!1;if(N.requirements.stats){for(const[w,T]of Object.entries(N.requirements.stats))if(i.stats[w]<T)return!1}return!0},O=N=>{const w=Vl.find(T=>T.id===N);!w||!D(w)||(x(N),o({currentClub:N,clubJoinDate:i.day}),alert(`${w.name}에 가입했습니다!`))},C=()=>{p&&confirm("정말로 동아리를 탈퇴하시겠습니까?")&&(x(null),o({currentClub:null,clubJoinDate:null}),alert("동아리를 탈퇴했습니다."))},z=(N,w)=>{const T=Vl.find(M=>M.id===N),A=T?.activities.find(M=>M.id===w);if(!T||!A)return;const k=`${N}_${w}_${i.day}`;if(S[k]){alert("오늘은 이미 이 활동을 했습니다!");return}A.rewards.exp&&o({experience:i.experience+A.rewards.exp}),A.rewards.stats&&d(A.rewards.stats),A.rewards.money&&m(A.rewards.money),A.rewards.item&&u(A.rewards.item),b(M=>({...M,[k]:!0})),alert(`${A.name} 활동을 완료했습니다!`)},j=N=>{const w=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],T=(i.day-1)%7,A=w[T],k=N.schedule[A];return k?`${k.time}에 ${k.activity}`:null};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 to-indigo-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient mb-2",children:"🎭 동아리 활동"}),e.jsx("p",{className:"text-text-secondary",children:"동아리에 가입하여 특별한 혜택을 받아보세요!"}),p&&e.jsxs("div",{className:"mt-2 badge badge-primary",children:["현재 동아리: ",Vl.find(N=>N.id===p)?.name]})]}),e.jsx("button",{onClick:()=>r("/game"),className:"btn-ghost px-6 py-3 rounded-xl font-semibold",children:"돌아가기"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"동아리 목록"}),Vl.map(N=>{const w=p===N.id,T=D(N),A=Ex[N.leader];return e.jsxs("div",{className:`glass-card p-6 cursor-pointer transition-all duration-300 ${g===N.id?"ring-2 ring-primary":""} ${w?"border-2 border-accent":""}`,onClick:()=>y(N.id),children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[N.name,w&&e.jsx("span",{className:"badge badge-accent",children:"내 동아리"})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:N.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-text-secondary",children:"부장"}),e.jsx("div",{className:"font-medium text-text-primary",children:A?.name||N.leader})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:"가입 조건"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.requirements.level&&e.jsxs("span",{className:`badge ${i.level>=N.requirements.level?"badge-success":"badge-error"}`,children:["레벨 ",N.requirements.level]}),N.requirements.stats&&Object.entries(N.requirements.stats).map(([k,M])=>e.jsxs("span",{className:`badge ${i.stats[k]>=M?"badge-success":"badge-error"}`,children:[k," ",M]},k))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-sm text-text-secondary",children:["부원: ",N.members.length,"/",N.maxMembers,"명"]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[N.members.slice(0,5).map(k=>{const M=Ex[k];return M?e.jsx("span",{className:"badge badge-primary",children:M.name},k):null}),N.members.length>5&&e.jsxs("span",{className:"badge",children:["+",N.members.length-5]})]})]}),j(N)&&e.jsxs("div",{className:"mb-4 p-3 bg-primary/20 rounded-lg",children:[e.jsx("div",{className:"text-sm font-semibold text-primary",children:"오늘의 일정"}),e.jsx("div",{className:"text-text-primary",children:j(N)})]}),e.jsxs("div",{className:"flex gap-2",children:[!p&&e.jsx("button",{onClick:k=>{k.stopPropagation(),O(N.id)},disabled:!T,className:`btn ${T?"btn-primary":"btn-ghost opacity-50"} px-4 py-2`,children:"가입하기"}),w&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:k=>{k.stopPropagation(),C()},className:"btn btn-secondary px-4 py-2",children:"탈퇴하기"})})]})]},N.id)})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:"동아리 상세"}),g?(()=>{const N=Vl.find(w=>w.id===g);return N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:"혜택"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[N.benefits.daily&&e.jsxs("div",{className:"p-2 bg-surface/50 rounded",children:[e.jsx("div",{className:"font-medium text-accent",children:"일일 보상"}),N.benefits.daily.exp&&e.jsxs("div",{children:["경험치 +",N.benefits.daily.exp]}),N.benefits.daily.stats&&Object.entries(N.benefits.daily.stats).map(([w,T])=>e.jsxs("div",{children:[w," +",T]},w))]}),N.benefits.weekly&&e.jsxs("div",{className:"p-2 bg-surface/50 rounded",children:[e.jsx("div",{className:"font-medium text-accent",children:"주간 보상"}),N.benefits.weekly.money&&e.jsxs("div",{children:["골드 +",N.benefits.weekly.money]}),N.benefits.weekly.items&&N.benefits.weekly.items.map(w=>e.jsx("div",{children:w},w))]})]})]}),p===g&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:"활동"}),e.jsx("div",{className:"space-y-2",children:N.activities.map(w=>{const T=S[`${N.id}_${w.id}_${i.day}`];return e.jsxs("div",{className:"p-3 bg-surface/50 rounded",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:w.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:w.description})]}),T&&e.jsx("span",{className:"badge badge-success",children:"완료"})]}),!T&&e.jsx("button",{onClick:()=>z(N.id,w.id),className:"btn btn-primary btn-sm w-full",children:"참여하기"})]},w.id)})})]})]}):null})():e.jsx("p",{className:"text-text-secondary",children:"동아리를 선택하세요"})]})]})]})})},Ic=qa,_b=Jx,Eb=()=>{const r=ke(),i=re(C=>C.player),d=re(C=>C.unlockedCharacters),[o,u]=v.useState(null),[m,g]=v.useState("gallery"),y=C=>({sakura:"🌸",yuki:"❄️",luna:"🌙",mystery:"❓",akane:"🔥",hana:"🌺",rin:"⚡",mei:"🎨",sora:"☁️"})[C]||"👤",p=C=>({sakura:"from-pink-600 via-rose-500 to-pink-600",yuki:"from-blue-600 via-cyan-500 to-blue-600",luna:"from-purple-600 via-indigo-500 to-purple-600",mystery:"from-gray-600 via-slate-500 to-gray-600",akane:"from-red-600 via-orange-500 to-red-600",hana:"from-yellow-500 via-amber-400 to-yellow-500",rin:"from-violet-600 via-purple-500 to-violet-600",mei:"from-emerald-600 via-green-500 to-emerald-600",sora:"from-sky-500 via-blue-400 to-sky-500"})[C]||"from-purple-600 via-pink-500 to-purple-600",x=C=>C>=80?{level:"연인",color:"text-pink-400",stars:"★★★★★"}:C>=60?{level:"친밀",color:"text-purple-400",stars:"★★★★☆"}:C>=40?{level:"친근",color:"text-blue-400",stars:"★★★☆☆"}:C>=20?{level:"보통",color:"text-green-400",stars:"★★☆☆☆"}:{level:"낯선",color:"text-gray-400",stars:"★☆☆☆☆"},S=C=>{if(!d.includes(C)){const z=Ic[C];return z?.unlockCondition?{locked:!0,reason:`Day ${z.unlockCondition.day||0} 이후, 총 호감도 ${z.unlockCondition.totalAffection||0} 필요`}:{locked:!0,reason:"아직 만나지 못함"}}return{locked:!1}},b=o?Ic[o]:null,D=o&&i.affection[o]||0,O=o?_b[o]?.conversations:[];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gradient mb-2",children:"💕 히로인 갤러리"}),e.jsx("p",{className:"text-text-secondary",children:"모든 히로인들의 정보와 관계도를 확인하세요"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g(m==="gallery"?"detail":"gallery"),className:"btn-secondary px-6 py-3 rounded-xl font-semibold",children:m==="gallery"?"상세 보기":"갤러리 보기"}),e.jsx("button",{onClick:()=>r("/game"),className:"btn-primary px-6 py-3 rounded-xl font-semibold",children:"게임으로 돌아가기"})]})]})}),m==="gallery"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(Ic).map(C=>{const z=i.affection[C.id]||0,j=x(z),N=S(C.id),w=d.includes(C.id);return e.jsxs("div",{onClick:()=>{w&&(u(C.id),g("detail"))},className:`glass-card p-6 transition-all duration-300 ${w?"hover:scale-105 cursor-pointer":"opacity-50"}`,children:[e.jsx("div",{className:`bg-gradient-to-br ${p(C.id)} p-4 rounded-xl mb-4`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-2",children:y(C.id)}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:C.name}),e.jsx("p",{className:"text-white/80",children:C.role})]})}),w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"호감도"}),e.jsx("span",{className:`font-bold ${j.color}`,children:j.level})]}),e.jsx("div",{className:"w-full bg-background-dark rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-500",style:{width:`${z}%`}})}),e.jsx("div",{className:"text-center mt-2 text-yellow-400 text-lg",children:j.stars})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-background-dark p-2 rounded-lg",children:[e.jsx("div",{className:"text-xs text-text-secondary",children:"만난 횟수"}),e.jsx("div",{className:"text-lg font-bold text-text-primary",children:i.metHeroines?.filter(T=>T===C.id).length||0})]}),e.jsxs("div",{className:"bg-background-dark p-2 rounded-lg",children:[e.jsx("div",{className:"text-xs text-text-secondary",children:"호감도"}),e.jsxs("div",{className:"text-lg font-bold text-text-primary",children:[z,"/100"]})]})]}),e.jsx("p",{className:"text-sm text-text-secondary mb-4 line-clamp-2",children:C.baseText}),e.jsx("button",{className:"w-full btn-primary py-2 rounded-lg font-semibold",children:"자세히 보기 →"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🔒"}),e.jsx("p",{className:"text-text-secondary font-semibold",children:"미해금 캐릭터"}),e.jsx("p",{className:"text-xs text-text-secondary mt-2",children:N.reason})]})]},C.id)})}):b&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-card p-6 sticky top-4",children:[e.jsx("div",{className:`bg-gradient-to-br ${p(o)} p-6 rounded-xl mb-6`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-8xl mb-3",children:y(o)}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:b.name}),e.jsx("p",{className:"text-xl text-white/90",children:b.role})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:"관계도"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"현재 호감도"}),e.jsxs("span",{className:"text-sm font-bold text-text-primary",children:[D,"/100"]})]}),e.jsx("div",{className:"w-full bg-background-dark rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-500",style:{width:`${D}%`}})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:`text-2xl font-bold ${x(D).color}`,children:x(D).level}),e.jsx("div",{className:"text-yellow-400 text-xl mt-1",children:x(D).stars})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:"좋아하는 것"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.likes.map((C,z)=>e.jsx("span",{className:"badge badge-success",children:C},z))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-400 mb-2",children:"싫어하는 것"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.dislikes.map((C,z)=>e.jsx("span",{className:"badge badge-error",children:C},z))})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:"캐릭터 스토리"}),e.jsxs("div",{className:"prose prose-invert max-w-none",children:[e.jsx("p",{className:"text-text-secondary leading-relaxed",children:b.baseText}),b.backstory&&e.jsxs("div",{className:"mt-4 p-4 bg-background-dark rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-text-primary mb-2",children:"배경 이야기"}),e.jsx("p",{className:"text-text-secondary",children:b.backstory})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:"대화 컬렉션"}),e.jsx("div",{className:"space-y-3",children:b.dialogues&&Object.entries(b.dialogues).map(([C,z])=>{const j=parseInt(C),N=D>=j;return e.jsxs("div",{className:`p-4 rounded-lg transition-all ${N?"bg-background-dark border border-primary/30":"bg-background-dark/50 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-primary",children:["호감도 ",C]}),N?e.jsx("span",{className:"badge badge-success",children:"해금"}):e.jsx("span",{className:"badge",children:"🔒 미해금"})]}),e.jsxs("p",{className:`text-text-secondary ${!N&&"blur-sm"}`,children:['"',N?z:"???",'"']})]},C)})})]}),O&&O.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:"특별 이벤트"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map((C,z)=>{const j=D>=(C.requiredAffection||0);return e.jsxs("div",{className:`p-4 rounded-lg border ${j?"bg-gradient-to-br from-primary/20 to-accent/20 border-primary/50":"bg-background-dark/50 border-border opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:C.title||`이벤트 ${z+1}`}),j?e.jsx("span",{className:"text-green-400",children:"✓"}):e.jsx("span",{className:"text-gray-400",children:"🔒"})]}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["필요 호감도: ",C.requiredAffection||0]})]},z)})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{r("/game")},className:"flex-1 btn-primary px-6 py-3 rounded-xl font-semibold",children:"이 캐릭터와 대화하기"}),e.jsx("button",{onClick:()=>g("gallery"),className:"flex-1 btn-secondary px-6 py-3 rounded-xl font-semibold",children:"갤러리로 돌아가기"})]})]})]})]})})},Mb=()=>{const r=ke(),i=re(p=>p.player),[d,o]=v.useState(0),u=[{title:"마법학원 아카데미아",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg",children:"당신은 명문 마법학원 '아카데미아'에 입학한 신입생입니다."}),e.jsx("p",{className:"text-lg",children:"이곳은 마법과 현대 기술이 공존하는 특별한 학교로, 다양한 재능을 가진 학생들이 모여 있습니다."}),e.jsxs("div",{className:"bg-purple-900/30 p-4 rounded-lg mt-4",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"🏫 학원 정보"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 설립: 100년 전"}),e.jsx("li",{children:"• 위치: 마법의 섬 크리스탈리아"}),e.jsx("li",{children:"• 학생 수: 약 1,000명"}),e.jsx("li",{children:"• 특징: 마법과 과학의 융합 교육"})]})]})]}),emoji:"🏰"},{title:"당신의 목표",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg font-bold text-yellow-300",children:"30일 동안 학원 생활을 하며 다음 목표를 달성하세요:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-pink-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"💕 연애 목표"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 9명의 히로인과 친해지기"}),e.jsx("li",{children:"• 특별한 인연 만들기"}),e.jsx("li",{children:"• 호감도 80 이상 달성"}),e.jsx("li",{children:"• 고백 이벤트 성공"})]})]}),e.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"📚 성장 목표"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 능력치 향상시키기"}),e.jsx("li",{children:"• 레벨 20 달성"}),e.jsx("li",{children:"• 던전 최고층 도달"}),e.jsx("li",{children:"• 모든 업적 달성"})]})]}),e.jsxs("div",{className:"bg-green-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"🎮 모험 목표"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 던전 탐험하기"}),e.jsx("li",{children:"• 보스 몬스터 처치"}),e.jsx("li",{children:"• 레어 아이템 수집"}),e.jsx("li",{children:"• 펫 육성하기"})]})]}),e.jsxs("div",{className:"bg-yellow-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"🏆 수집 목표"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 모든 엔딩 보기"}),e.jsx("li",{children:"• 도감 완성하기"}),e.jsx("li",{children:"• 10,000골드 모으기"}),e.jsx("li",{children:"• 히든 이벤트 발견"})]})]})]})]}),emoji:"🎯"},{title:"게임 시스템",content:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"⏰ 시간 시스템"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 총 30일의 제한 시간"}),e.jsx("li",{children:"• 하루 2번의 주요 활동"}),e.jsx("li",{children:"• 오전/오후로 나뉜 일과"}),e.jsx("li",{children:"• 매일 스테미나 회복"})]})]}),e.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"💪 스테미나 시스템"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 모든 활동에 스테미나 소모"}),e.jsx("li",{children:"• 휴식으로 회복 가능"}),e.jsx("li",{children:"• 다음날 완전 회복"}),e.jsx("li",{children:"• 최대치 증가 가능"})]})]}),e.jsxs("div",{className:"bg-green-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"📊 스탯 시스템"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 지력: 학습과 마법"}),e.jsx("li",{children:"• 매력: 대인관계"}),e.jsx("li",{children:"• 힘: 물리 공격력"}),e.jsx("li",{children:"• 민첩: 회피와 속도"}),e.jsx("li",{children:"• 행운: 아이템 드롭률"})]})]}),e.jsxs("div",{className:"bg-pink-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"💕 호감도 시스템"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 대화 선택지로 변화"}),e.jsx("li",{children:"• 선물로 상승"}),e.jsx("li",{children:"• 이벤트 발생 조건"}),e.jsx("li",{children:"• 엔딩 분기 결정"})]})]})]})}),emoji:"⚙️"},{title:"히로인 소개",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg",children:"9명의 매력적인 히로인들이 당신을 기다립니다!"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{name:"사쿠라",emoji:"🌸",type:"츤데레 마법사"},{name:"유키",emoji:"❄️",type:"쿨데레 검사"},{name:"하루카",emoji:"🌻",type:"밝은 힐러"},{name:"아유미",emoji:"📚",type:"지적인 학자"},{name:"미쿠",emoji:"🎵",type:"천재 아티스트"},{name:"리나",emoji:"🗡️",type:"강한 전사"},{name:"루나",emoji:"🌙",type:"신비로운 점술사"},{name:"노바",emoji:"⭐",type:"활발한 연금술사"},{name:"아리아",emoji:"🎭",type:"우아한 귀족"}].map(p=>e.jsxs("div",{className:"bg-pink-900/30 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-3xl mb-1",children:p.emoji}),e.jsx("div",{className:"font-bold",children:p.name}),e.jsx("div",{className:"text-xs text-pink-300",children:p.type})]},p.name))}),e.jsx("p",{className:"text-sm text-yellow-300 text-center",children:"각 히로인마다 고유한 성격과 스토리가 있습니다!"})]}),emoji:"👥"},{title:"팁과 조언",content:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"💡 초보자 팁"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:"📌 매일 스테미나를 효율적으로 사용하세요"}),e.jsx("li",{children:"📌 히로인과의 대화 선택지를 신중히 고르세요"}),e.jsx("li",{children:"📌 균형잡힌 스탯 성장이 중요합니다"}),e.jsx("li",{children:"📌 던전 탐험으로 골드와 아이템을 획득하세요"}),e.jsx("li",{children:"📌 펫은 전투에 큰 도움이 됩니다"})]})]}),e.jsxs("div",{className:"bg-red-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"⚠️ 주의사항"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"• 30일이 지나면 엔딩이 결정됩니다"}),e.jsx("li",{children:"• 스테미나가 없으면 활동할 수 없습니다"}),e.jsx("li",{children:"• 일부 이벤트는 한 번만 발생합니다"}),e.jsx("li",{children:"• 호감도가 낮으면 배드 엔딩이 될 수 있습니다"})]})]})]}),emoji:"💡"}],m=()=>{d<u.length-1?o(d+1):r("/game")},g=()=>{d>0&&o(d-1)},y=()=>{r("/game")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-4xl w-full",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-lg rounded-2xl p-8 shadow-2xl",children:[e.jsx("div",{className:"flex justify-between mb-6",children:u.map((p,x)=>e.jsx("div",{className:`flex-1 h-2 mx-1 rounded-full transition-all ${x<=d?"bg-gradient-to-r from-purple-400 to-pink-400":"bg-gray-600"}`},x))}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:u[d].emoji}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:u[d].title}),e.jsx("div",{className:"text-gray-100",children:u[d].content})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:g,disabled:d===0,className:`px-6 py-3 rounded-lg font-bold transition-all ${d===0?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-lg"}`,children:"이전"}),e.jsx("button",{onClick:y,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"건너뛰기"}),e.jsx("button",{onClick:m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:d===u.length-1?"게임 시작!":"다음"})]})]}),e.jsx("div",{className:"mt-4 text-center text-white/70",children:e.jsxs("p",{children:["플레이어: ",i.name," | Day ",i.day,"/30"]})})]})})},Ab=()=>{const r=ke(),[i]=Kp();re(j=>j.player);const{updateAffection:d,markCharacterAsMet:o}=re(j=>j.actions),[u,m]=v.useState(null),[g,y]=v.useState(0),[p,x]=v.useState(!1),[S,b]=v.useState(!1),D=[{id:"sakura_training",characterId:"sakura",title:"훈련장에서의 만남",description:"검술 훈련장에서 사쿠라를 처음 만나다",location:"gym",dialogue:["(훈련장에서 혼자 검술 연습을 하는 소녀를 발견한다)","그녀의 움직임은 날카롭고 정확했다.",'???: "누구야? 훈련장에 허락 없이 들어오다니."',"(차가운 눈빛으로 당신을 바라본다)",'???: "나는 사쿠라. 검술부 부장이야."'],initialAffection:5,initialState:{mood:"cautious",relationship:"stranger",specialFlag:"met_at_training"},choices:[{text:"미안, 구경하고 싶어서...",affectionBonus:3,response:'사쿠라: "흥... 검술에 관심이 있는 건가?"',stateChange:{mood:"curious"}},{text:"너의 검술이 인상적이야",affectionBonus:5,response:'사쿠라: "...고맙다. 매일 연습한 결과야."',stateChange:{mood:"pleased"}},{text:"나도 검술을 배우고 싶어",affectionBonus:7,response:'사쿠라: "진심이라면... 가르쳐줄 수도 있어."',stateChange:{relationship:"potential_student"}}]},{id:"sakura_accident",characterId:"sakura",title:"우연한 충돌",description:"복도에서 사쿠라와 부딪히다",location:"classroom",dialogue:["(복도를 급히 걷다가 누군가와 부딪힌다)","책들이 바닥에 흩어진다.",'???: "아! 조심해!"',"(붉은 머리의 소녀가 떨어진 책들을 줍는다)",'???: "나는 사쿠라... 너는?"'],initialAffection:0,initialState:{mood:"annoyed",relationship:"accident_meet"},choices:[{text:"미안해! 내가 도와줄게",affectionBonus:5,response:'사쿠라: "...괜찮아. 고마워."',stateChange:{mood:"neutral"}},{text:"다치지 않았어?",affectionBonus:8,response:'사쿠라: "어... 난 괜찮아. 네가 나를 걱정해주다니."',stateChange:{mood:"surprised",relationship:"caring_stranger"}}]},{id:"yuki_library",characterId:"yuki",title:"도서관의 조용한 만남",description:"도서관에서 책을 읽는 유키를 만나다",location:"library",dialogue:["(도서관 구석에서 책에 몰두한 소녀를 본다)","그녀 주변에는 마법 관련 서적들이 쌓여있다.","(당신이 다가가자 그녀가 고개를 든다)",'???: "아... 안녕하세요..."','???: "저는 유키예요. 도서부원이죠."'],initialAffection:3,initialState:{mood:"shy",relationship:"library_acquaintance"},choices:[{text:"무슨 책 읽고 있어?",affectionBonus:4,response:'유키: "고대 마법에 관한 책이에요... 관심 있으세요?"',stateChange:{mood:"hopeful"}},{text:"방해해서 미안",affectionBonus:2,response:'유키: "아니에요... 가끔은 대화도 좋아요."',stateChange:{mood:"gentle"}},{text:"같이 읽어도 될까?",affectionBonus:6,response:'유키: "정말요? 기뻐요... 같이 읽어요."',stateChange:{relationship:"reading_partner"}}]},{id:"luna_magic_show",characterId:"luna",title:"마법 시연회",description:"루나의 화려한 마법 시연을 보다",location:"classroom",dialogue:["(강당에서 화려한 마법 시연이 펼쳐지고 있다)","빛나는 마법진과 함께 환상적인 광경이 펼쳐진다.",'???: "어때? 멋지지?"',"(밝은 미소의 소녀가 당신에게 다가온다)",'???: "나는 루나! 마법학부 수석이야!"'],initialAffection:5,initialState:{mood:"excited",relationship:"impressed_viewer",specialFlag:"saw_magic_show"},choices:[{text:"정말 대단해!",affectionBonus:5,response:'루나: "헤헤, 고마워! 더 보여줄까?"',stateChange:{mood:"happy"}},{text:"나도 마법을 배울 수 있을까?",affectionBonus:7,response:'루나: "물론이지! 내가 가르쳐줄게!"',stateChange:{relationship:"magic_student"}}]},{id:"haruka_welcome",characterId:"haruka",title:"활기찬 환영",description:"하루카가 신입생인 당신을 환영하다",location:"classroom",dialogue:["(교실에 들어서자 밝은 목소리가 들린다)",'???: "아! 신입생이구나!"',"(해바라기처럼 밝은 미소의 소녀가 다가온다)",'???: "나는 하루카! 반가워!"','하루카: "학교 안내해줄까? 재미있는 곳이 많아!"'],initialAffection:10,initialState:{mood:"cheerful",relationship:"friendly_guide"},choices:[{text:"고마워! 부탁할게",affectionBonus:5,response:'하루카: "좋아! 가자가자! 재미있을 거야!"',stateChange:{relationship:"tour_guide"}},{text:"너 정말 친절하구나",affectionBonus:7,response:'하루카: "에헤헤~ 칭찬 고마워!"',stateChange:{mood:"delighted"}}]},{id:"miku_concert",characterId:"miku",title:"작은 콘서트",description:"미쿠의 노래를 우연히 듣다",location:"classroom",dialogue:["(음악실에서 아름다운 노랫소리가 들린다)","문틈으로 보니 한 소녀가 노래하고 있다.","(노래가 끝나고 그녀가 당신을 발견한다)",'???: "어머! 듣고 있었어요?"','???: "저는 미쿠... 부끄럽네요."'],initialAffection:4,initialState:{mood:"embarrassed",relationship:"secret_listener"},choices:[{text:"목소리가 정말 아름다워",affectionBonus:8,response:'미쿠: "정말요? 너무 기뻐요!"',stateChange:{mood:"happy"}},{text:"미안, 몰래 들어서",affectionBonus:3,response:'미쿠: "괜찮아요. 누군가 들어주니 좋아요."',stateChange:{mood:"understanding"}},{text:"다음에도 들을 수 있을까?",affectionBonus:6,response:'미쿠: "네! 언제든지 와요!"',stateChange:{relationship:"regular_listener"}}]},{id:"rina_sparring",characterId:"rina",title:"스파링 제안",description:"리나가 대련을 제안하다",location:"gym",dialogue:["(훈련장에서 격렬하게 운동하는 소녀를 본다)",'???: "오! 너도 훈련하러 왔어?"',"(에너지 넘치는 소녀가 다가온다)",'???: "나는 리나! 한판 붙어볼래?"'],initialAffection:5,initialState:{mood:"energetic",relationship:"sparring_partner"},choices:[{text:"좋아! 한판 해보자",affectionBonus:8,response:'리나: "그래! 이런 근성 좋아!"',stateChange:{relationship:"rival"}},{text:"난 초보인데...",affectionBonus:4,response:'리나: "괜찮아! 내가 가르쳐줄게!"',stateChange:{relationship:"trainer"}}]},{id:"ayumi_fortune",characterId:"ayumi",title:"운명의 점술",description:"아유미가 당신의 운명을 점치다",location:"classroom",dialogue:["(점술 동아리 방 앞을 지나가는데)",'???: "기다려요."',"(신비로운 분위기의 소녀가 문을 열고 있다)",'???: "당신... 특별한 운명을 가지고 있네요."','???: "저는 아유미. 당신의 미래가 궁금해요."'],initialAffection:6,initialState:{mood:"mysterious",relationship:"fated_meeting",specialFlag:"destiny_revealed"},choices:[{text:"내 운명이 뭔데?",affectionBonus:5,response:'아유미: "사랑... 여러 갈래의 사랑이 보여요."',stateChange:{mood:"prophetic"}},{text:"운명은 스스로 만드는 거야",affectionBonus:7,response:'아유미: "흥미로운 생각이에요... 당신이 더 궁금해져요."',stateChange:{mood:"intrigued"}}]}];v.useEffect(()=>{const j=i.get("character"),N=i.get("location");if(j&&N){const w=D.find(T=>T.characterId===j&&T.location===N);if(w)m(w),y(0);else{const T={id:`${j}_default`,characterId:j,title:"우연한 만남",description:"처음 만나는 순간",location:N,dialogue:["(처음 보는 얼굴이다)",'???: "안녕하세요?"',`???: "저는 ${j}예요."`],initialAffection:5,initialState:{mood:"neutral",relationship:"just_met"},choices:[{text:"반가워요",affectionBonus:3,response:"좋은 첫인상을 남겼다.",stateChange:{mood:"friendly"}},{text:"잘 부탁해요",affectionBonus:2,response:"평범한 인사를 나눴다.",stateChange:{mood:"neutral"}}]};m(T),y(0)}}},[i]);const O=()=>{u&&(g<u.dialogue.length-1?y(g+1):p||x(!0))},C=j=>{if(!u||S)return;const N=u.choices[j];if(!N)return;const w=u.initialAffection+N.affectionBonus;d(u.characterId,w);const T=JSON.parse(localStorage.getItem("characterStates")||"{}");T[u.characterId]={...u.initialState,...N.stateChange,meetingScenario:u.id,firstChoice:N.text},localStorage.setItem("characterStates",JSON.stringify(T)),o(u.characterId),b(!0),setTimeout(()=>{r("/game")},2e3)};if(!u)return e.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Loading..."}),e.jsx("p",{className:"text-text-secondary",children:"캐릭터 만남 시나리오를 준비 중입니다..."})]})});const z=p?u.choices.map((j,N)=>({text:j.text,callback:()=>C(N)})):void 0;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Vx,{character:u.characterId,dialogue:u.dialogue,onNext:O,choices:z,showSpeaker:!1}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-800 rounded-xl p-6 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-white mb-2",children:["✨ ",u.characterId,"와(과) 만났습니다!"]}),e.jsx("div",{className:"text-lg text-gray-200",children:"호감도가 상승했습니다"})]})})]})},Tb=()=>{const r=ke(),i=re(p=>p.player),[d,o]=v.useState(null),u=[{id:"card_matching",name:"카드 매칭",description:"같은 카드를 찾아 매칭하는 기억력 게임입니다. 히로인들의 카드를 모아보세요!",icon:"🎴",route:"/card-matching",difficulty:2,rewards:"EXP +50, Gold +30, 카드 수집",unlocked:!0,dailyLimit:5,playsToday:i.statistics?.cardMatchingPlays||0,highScore:i.statistics?.cardMatchingHighScore||0},{id:"quiz",name:"퀴즈 챌린지",description:"학원과 히로인들에 관한 퀴즈를 풀어보세요. 지식이 곧 힘입니다!",icon:"❓",route:"/quiz",difficulty:3,rewards:"EXP +75, Intelligence +2, 특별 아이템",unlocked:!0,dailyLimit:3,playsToday:i.statistics?.quizPlays||0,highScore:i.statistics?.quizHighScore||0},{id:"fishing",name:"낚시",description:"평화로운 호수에서 낚시를 즐기며 희귀한 물고기를 잡아보세요.",icon:"🎣",route:"/fishing",difficulty:1,rewards:"물고기 아이템, Gold, 요리 재료",unlocked:!0,dailyLimit:10,playsToday:i.statistics?.fishingPlays||0},{id:"rhythm",name:"리듬 게임",description:"음악에 맞춰 노트를 연주하세요. 히로인들의 테마곡이 준비되어 있습니다!",icon:"🎵",route:"/rhythm",difficulty:4,rewards:"EXP +100, Agility +3, 음악 아이템",unlocked:i.level>=5,requiredLevel:5,dailyLimit:5,playsToday:i.statistics?.rhythmPlays||0,highScore:i.statistics?.rhythmHighScore||0},{id:"puzzle",name:"퍼즐",description:"조각을 맞춰 그림을 완성하세요. 완성하면 특별한 보상이!",icon:"🧩",route:"/puzzle",difficulty:3,rewards:"EXP +80, Intelligence +2, 퍼즐 조각",unlocked:i.level>=3,requiredLevel:3,dailyLimit:5,playsToday:i.statistics?.puzzlePlays||0},{id:"farming",name:"농장 관리",description:"작물을 재배하고 수확하여 수익을 얻으세요. 특별한 작물도 키울 수 있습니다!",icon:"🌾",route:"/farming",difficulty:2,rewards:"작물, Gold, 요리 재료",unlocked:i.level>=7,requiredLevel:7}],m=[{id:"rhythm_tournament",name:"리듬 마스터 토너먼트",game:"rhythm",endDate:"3일 후",prize:"특별 의상, 1000 Gold",participants:234,yourRank:45},{id:"quiz_tournament",name:"지식왕 선발대회",game:"quiz",endDate:"5일 후",prize:"희귀 책, 500 Gold",participants:156,yourRank:12}],g=[{id:"daily_card",name:"카드 매칭 10연승",game:"card_matching",progress:3,target:10,reward:"EXP +200"},{id:"daily_fish",name:"희귀 물고기 3마리 낚기",game:"fishing",progress:1,target:3,reward:"낚싯대 업그레이드"},{id:"daily_combo",name:"리듬 게임 100 콤보",game:"rhythm",progress:0,target:100,reward:"음악 노트 x5"}],y=p=>{if(!p.unlocked){alert(`레벨 ${p.requiredLevel}부터 플레이 가능합니다!`);return}if(p.dailyLimit&&p.playsToday&&p.playsToday>=p.dailyLimit){alert(`오늘의 플레이 횟수를 모두 사용했습니다! (${p.playsToday}/${p.dailyLimit})`);return}r(p.route)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-pink-500 bg-clip-text text-transparent mb-2",children:"🎮 미니게임 광장"}),e.jsx("p",{className:"text-text-secondary",children:"다양한 미니게임을 즐기고 보상을 획득하세요!"})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"🎯 미니게임"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(p=>e.jsxs("div",{className:`bg-gradient-to-br ${p.unlocked?"from-purple-800 to-blue-800 hover:from-purple-700 hover:to-blue-700":"from-gray-800 to-gray-700"} rounded-lg p-4 transition-all ${p.unlocked?"hover:scale-[1.02] cursor-pointer":"opacity-60"}`,onClick:()=>p.unlocked&&o(p),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"text-4xl",children:p.icon}),e.jsx("div",{className:"text-yellow-400 text-sm",children:"⭐".repeat(p.difficulty)})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:p.name}),e.jsx("p",{className:"text-xs text-gray-300 mb-3",children:p.description}),!p.unlocked&&p.requiredLevel&&e.jsxs("div",{className:"text-red-400 text-sm mb-2",children:["🔒 Lv.",p.requiredLevel," 필요"]}),p.dailyLimit&&e.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["오늘 플레이: ",p.playsToday||0,"/",p.dailyLimit]}),p.highScore!==void 0&&p.highScore>0&&e.jsxs("div",{className:"text-xs text-yellow-300",children:["최고 점수: ",p.highScore]}),e.jsx("button",{onClick:x=>{x.stopPropagation(),y(p)},disabled:!p.unlocked,className:`w-full mt-3 py-2 rounded font-bold transition ${p.unlocked?"bg-purple-600 hover:bg-purple-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:p.unlocked?"플레이":"잠김"})]},p.id))})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-yellow-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",children:"⚡ 일일 도전"}),e.jsx("div",{className:"space-y-3",children:g.map(p=>e.jsxs("div",{className:"bg-yellow-900/20 rounded-lg p-4 border border-yellow-600/30",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:p.name}),e.jsx("p",{className:"text-xs text-gray-400",children:u.find(x=>x.id===p.game)?.name})]}),e.jsxs("div",{className:"text-xs text-yellow-400",children:["보상: ",p.reward]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-2 rounded-full transition-all",style:{width:`${p.progress/p.target*100}%`}})}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1 text-right",children:[p.progress,"/",p.target]})]},p.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-green-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-4",children:"🏆 주간 토너먼트"}),e.jsx("div",{className:"space-y-3",children:m.map(p=>e.jsxs("div",{className:"bg-green-900/20 rounded-lg p-4 border border-green-600/30",children:[e.jsx("h3",{className:"font-bold text-white mb-1",children:p.name}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("div",{children:["종료: ",p.endDate]}),e.jsxs("div",{children:["참가자: ",p.participants,"명"]}),e.jsxs("div",{className:"text-green-400",children:["현재 순위: ",p.yourRank,"위"]})]}),e.jsxs("div",{className:"mt-2 text-xs text-yellow-300",children:["🎁 ",p.prize]})]},p.id))})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-400 mb-4",children:"📊 내 통계"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"총 플레이 시간"}),e.jsxs("span",{children:[i.statistics?.totalMinigameTime||0,"분"]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"오늘 획득 EXP"}),e.jsxs("span",{className:"text-yellow-400",children:["+",i.statistics?.todayMinigameExp||0]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"오늘 획득 Gold"}),e.jsxs("span",{className:"text-yellow-400",children:["+",i.statistics?.todayMinigameGold||0]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"연속 플레이"}),e.jsxs("span",{className:"text-green-400",children:[i.statistics?.minigameStreak||0,"일"]})]})]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-600/30",children:[e.jsx("h3",{className:"text-sm font-bold text-purple-300 mb-2",children:"💡 팁"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("li",{children:"• 매일 미니게임을 플레이하면 연속 보너스를 받을 수 있어요!"}),e.jsx("li",{children:"• 토너먼트에 참가하여 특별한 보상을 획득하세요"}),e.jsx("li",{children:"• 일일 도전을 완료하면 추가 경험치를 얻을 수 있습니다"}),e.jsx("li",{children:"• 높은 점수를 기록하면 히로인들의 호감도가 상승합니다"})]})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-xl p-6 max-w-md w-full border border-purple-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:d.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:d.name})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:d.description}),e.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"난이도"}),e.jsx("span",{className:"text-yellow-400",children:"⭐".repeat(d.difficulty)})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"보상"}),e.jsx("span",{className:"text-green-400 text-xs",children:d.rewards})]}),d.dailyLimit&&e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"오늘 플레이"}),e.jsxs("span",{children:[d.playsToday||0,"/",d.dailyLimit]})]}),d.highScore!==void 0&&e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"최고 점수"}),e.jsx("span",{className:"text-yellow-300",children:d.highScore})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(d),className:"flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded-lg font-bold transition",children:"게임 시작"}),e.jsx("button",{onClick:()=>o(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:"닫기"})]})]})})]})})},Db=()=>{const r=ke(),i=re(q=>q.player),d=re(q=>q.gameDate),{updateStats:o,advanceTime:u,updateAffection:m,addItem:g,gainExperience:y,addGold:p}=re(q=>q.actions),[x,S]=v.useState(null),[b,D]=v.useState([]),[O,C]=v.useState([]),[z,j]=v.useState(null),[N,w]=v.useState({type:"",count:0}),[T,A]=v.useState(!0),k={sunny:{id:"sunny",name:"맑음",icon:"☀️",description:"화창한 날씨입니다. 야외 활동하기 좋은 날이에요.",effects:{moodModifier:10,staminaDrain:-5,encounterRate:1.2,combatModifier:5},activities:["산책","피크닉","운동","사진촬영","테니스"],bgFilter:"brightness(1.1) contrast(1.05) saturate(1.1)"},cloudy:{id:"cloudy",name:"흐림",icon:"☁️",description:"구름이 많은 날입니다. 선선한 바람이 불어요.",effects:{moodModifier:0,staminaDrain:0},activities:["독서","카페","쇼핑","미술"],bgFilter:"brightness(0.9) contrast(0.95)"},rainy:{id:"rainy",name:"비",icon:"🌧️",description:"비가 내리고 있습니다. 우산을 꼭 챙기세요.",effects:{movementSpeed:-20,moodModifier:-5,encounterRate:.7,cropGrowth:1.5,combatModifier:-10},particleEffect:"rain",activities:["도서관","실내 데이트","영화관람","요리","보드게임"],blockedActivities:["피크닉","야외운동","테니스"],bgFilter:"brightness(0.7) contrast(1.1) saturate(0.8)"},stormy:{id:"stormy",name:"폭풍",icon:"⛈️",description:"강한 폭풍이 몰아치고 있습니다. 외출을 자제하세요.",effects:{movementSpeed:-50,moodModifier:-15,staminaDrain:20,encounterRate:.3,combatModifier:-25},particleEffect:"rain",activities:["휴식","요리","게임","음악감상"],blockedActivities:["산책","피크닉","야외운동","낚시","쇼핑"],specialEvents:["정전","번개구경"],bgFilter:"brightness(0.5) contrast(1.2) saturate(0.6)"},snowy:{id:"snowy",name:"눈",icon:"❄️",description:"눈이 내리고 있습니다. 로맨틱한 분위기가 연출됩니다.",effects:{movementSpeed:-15,moodModifier:15,encounterRate:.8,cropGrowth:.3,fishingBonus:-20},particleEffect:"snow",activities:["눈사람 만들기","눈싸움","따뜻한 음료","스케이트","썰매"],specialEvents:["화이트 크리스마스","눈축제"],bgFilter:"brightness(1.2) contrast(0.9) saturate(0.7)"},foggy:{id:"foggy",name:"안개",icon:"🌫️",description:"짙은 안개가 끼어있습니다. 시야가 제한됩니다.",effects:{movementSpeed:-10,encounterRate:1.5,moodModifier:5,combatModifier:-15},particleEffect:"fog",activities:["미스터리 탐험","조용한 산책","명상"],specialEvents:["신비한 만남"],bgFilter:"brightness(0.8) contrast(0.7) blur(0.5px)"},windy:{id:"windy",name:"강풍",icon:"💨",description:"강한 바람이 불고 있습니다.",effects:{staminaDrain:10,fishingBonus:-20,movementSpeed:-5},particleEffect:"leaves",activities:["연날리기","윈드서핑","실내활동"],bgFilter:"contrast(1.05)"},rainbow:{id:"rainbow",name:"무지개",icon:"🌈",description:"비 온 뒤 아름다운 무지개가 떴습니다!",effects:{moodModifier:25,encounterRate:2,fishingBonus:30},activities:["사진촬영","소원빌기","데이트","보물찾기"],specialEvents:["무지개 축복"],bgFilter:"brightness(1.15) contrast(1.1) saturate(1.3)"},sakura:{id:"sakura",name:"벚꽃",icon:"🌸",description:"벚꽃이 만개했습니다. 특별한 이벤트가 발생할 수 있습니다.",effects:{moodModifier:20,encounterRate:1.5},particleEffect:"petals",activities:["벚꽃 구경","피크닉","고백","사진촬영"],specialEvents:["벚꽃축제","봄 데이트"],bgFilter:"brightness(1.1) saturate(1.2) hue-rotate(5deg)"},meteor:{id:"meteor",name:"유성우",icon:"💫",description:"밤하늘에 유성우가 쏟아집니다. 소원을 빌어보세요!",effects:{moodModifier:30,encounterRate:3},activities:["별 관측","소원빌기","로맨틱 데이트","천체 사진"],specialEvents:["유성우 이벤트","소원 성취"],bgFilter:"brightness(0.6) contrast(1.3) saturate(1.5)"},heatwave:{id:"heatwave",name:"폭염",icon:"🔥",description:"매우 더운 날씨입니다. 수분 보충을 잊지 마세요!",effects:{staminaDrain:25,moodModifier:-10,combatModifier:-20},activities:["수영","아이스크림","실내 휴식","에어컨"],blockedActivities:["운동","등산"],bgFilter:"brightness(1.2) contrast(1.1) saturate(0.9) sepia(0.1)"},aurora:{id:"aurora",name:"오로라",icon:"🌌",description:"신비로운 오로라가 하늘을 수놓습니다.",effects:{moodModifier:35,encounterRate:2.5},activities:["오로라 관측","명상","예술 창작"],specialEvents:["오로라 축복","신비한 힘"],bgFilter:"brightness(0.7) contrast(1.2) saturate(1.5) hue-rotate(180deg)"}},M={rainbowBlessing:{id:"rainbowBlessing",name:"무지개의 축복",description:"무지개를 본 모든 사람이 행운을 얻습니다!",duration:1,effects:{luck:10},rewards:{exp:100,money:200,affection:[{character:"sakura",amount:5},{character:"luna",amount:5}]}},sakuraFestival:{id:"sakuraFestival",name:"벚꽃 축제",description:"학원에서 벚꽃 축제가 열립니다!",duration:3,effects:{charm:5},rewards:{exp:200,items:["sakuraPetal","festivalTicket"],affection:[{character:"sakura",amount:10},{character:"yuki",amount:7}]}},meteorShower:{id:"meteorShower",name:"유성우 이벤트",description:"소원을 빌면 이루어질지도?",duration:1,effects:{luck:15,intelligence:3},rewards:{exp:150,items:["starFragment"],affection:[{character:"luna",amount:15}]}},snowFestival:{id:"snowFestival",name:"눈 축제",description:"겨울의 낭만을 즐겨보세요!",duration:2,effects:{agility:3},rewards:{exp:180,money:150,items:["snowflake"],affection:[{character:"yuki",amount:12}]}}},Y={spring:{season:"spring",commonWeathers:["sunny","cloudy","rainy","windy"],rareWeathers:["rainbow","sakura","foggy"],specialEvents:["벚꽃축제","봄맞이 행사"],seasonalBonus:{stat:"charm",value:2}},summer:{season:"summer",commonWeathers:["sunny","heatwave","cloudy","stormy"],rareWeathers:["rainbow","meteor"],specialEvents:["여름축제","불꽃놀이","해변 이벤트"],seasonalBonus:{stat:"stamina",value:5}},autumn:{season:"autumn",commonWeathers:["cloudy","windy","foggy","rainy"],rareWeathers:["rainbow","aurora"],specialEvents:["단풍축제","수확제","할로윈"],seasonalBonus:{stat:"intelligence",value:2}},winter:{season:"winter",commonWeathers:["snowy","cloudy","foggy","stormy"],rareWeathers:["sunny","meteor","aurora"],specialEvents:["크리스마스","눈축제","신년행사"],seasonalBonus:{stat:"defense",value:3}}},B=()=>{const q=d?.month||4;return q>=3&&q<=5?"spring":q>=6&&q<=8?"summer":q>=9&&q<=11?"autumn":"winter"},ae=v.useCallback(()=>{const q=B(),h=Y[q];if(N.count>=3&&Math.random()<.7){const J=Object.keys(k).filter(L=>L!==N.type),ie=J[Math.floor(Math.random()*J.length)];return k[ie]}if(Math.random()<.1){const J=h.rareWeathers[Math.floor(Math.random()*h.rareWeathers.length)];return k[J]}const H=h.commonWeathers[Math.floor(Math.random()*h.commonWeathers.length)];return k[H]},[N,B]),G=v.useCallback(()=>{const q=[];x?.id;for(let h=0;h<7;h++){const H=ae();q.push(H),H.id}D(q)},[x,ae]),le=v.useCallback(q=>{const h=q.effects;if(h.moodModifier&&h.moodModifier>0){const H=["sakura","yuki","luna","akane","hana","rin","mei","sora"],J=H[Math.floor(Math.random()*H.length)];m(J,Math.floor(h.moodModifier/5))}q.specialEvents&&q.specialEvents.forEach(H=>{if(Math.random()<.3){const J=Object.values(M).find(ie=>ie.name===H);J&&j(J)}}),w(H=>({type:q.id,count:H.type===q.id?H.count+1:1})),C(H=>[...H.slice(-6),q.id])},[m]),E=v.useCallback(q=>{if(!x)return;let h={},H=[];switch(q){case"벚꽃 구경":h={charm:2,intelligence:1},H=[{character:"sakura",amount:10}];break;case"눈사람 만들기":h={agility:1,strength:1},H=[{character:"yuki",amount:8}];break;case"별 관측":h={intelligence:3},H=[{character:"luna",amount:12}];break;case"소원빌기":h={luck:5};break;case"수영":h={stamina:3,agility:2};break;case"명상":h={intelligence:2,maxMp:5};break;case"사진촬영":h={charm:2},H=[{character:"mei",amount:5}];break;default:h={charm:1}}const J=Y[B()];J.seasonalBonus&&(h[J.seasonalBonus.stat]=(h[J.seasonalBonus.stat]||0)+J.seasonalBonus.value),o(h),H.forEach(ie=>m(ie.character,ie.amount)),y(20+Math.floor(Math.random()*30)),u()},[x,B,o,m,y,u]),U=v.useCallback(()=>{z&&(z.rewards&&(z.rewards.exp&&y(z.rewards.exp),z.rewards.money&&p(z.rewards.money),z.rewards.items&&z.rewards.items.forEach(q=>g(q)),z.rewards.affection&&z.rewards.affection.forEach(q=>m(q.character,q.amount))),z.effects&&o(z.effects),j(null))},[z,y,p,g,m,o]);v.useEffect(()=>{const q=ae();S(q),G(),le(q)},[i.day]);const R=()=>{if(!x?.particleEffect||!T)return null;const q=50,h=[];for(let H=0;H<q;H++){const J=Math.random()*5,ie=3+Math.random()*2,L=Math.random()*20+10,P={position:"absolute",left:`${Math.random()*100}%`,top:"-20px",animation:`fall ${ie}s linear ${J}s infinite`};switch(x.particleEffect){case"rain":h.push(e.jsx("div",{style:{...P,width:"2px",height:`${L}px`,background:"linear-gradient(to bottom, transparent, #6B7FD7)",opacity:.3}},H));break;case"snow":h.push(e.jsx("div",{style:{...P,fontSize:`${L}px`,opacity:.7,animation:`fall ${ie*2}s linear ${J}s infinite`},children:"❄"},H));break;case"petals":h.push(e.jsx("div",{style:{...P,fontSize:`${L}px`,color:"#FFC0CB",opacity:.6,animation:`fall-rotate ${ie*1.5}s linear ${J}s infinite`},children:"🌸"},H));break;case"leaves":h.push(e.jsx("div",{style:{...P,fontSize:`${L}px`,color:"#FF8C00",opacity:.5,animation:`fall-rotate ${ie*1.5}s linear ${J}s infinite`},children:"🍂"},H));break}}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none z-40 overflow-hidden",children:h}),e.jsx("style",{children:`
          @keyframes fall {
            to {
              transform: translateY(100vh);
            }
          }
          @keyframes fall-rotate {
            to {
              transform: translateY(100vh) rotate(360deg);
            }
          }
        `})]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 via-blue-800 to-background p-4",style:{filter:x?.bgFilter},children:[R(),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-2",children:"🌤️ 날씨 & 계절 시스템"}),e.jsx("p",{className:"text-text-secondary",children:"날씨에 따라 다양한 활동과 이벤트를 즐겨보세요!"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>A(!T),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:T?"🎬 효과 ON":"🎬 효과 OFF"}),e.jsx("button",{onClick:()=>r("/game"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})]})}),z&&e.jsx("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 rounded-lg p-4 mb-6 animate-pulse",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h2",{className:"text-2xl font-bold",children:z.name}),e.jsx("p",{children:z.description})]}),e.jsx("button",{onClick:U,className:"px-6 py-3 bg-white text-orange-600 rounded-lg font-bold hover:bg-yellow-100 transition",children:"참여하기"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[x&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-800/50 to-purple-800/50 backdrop-blur-md rounded-xl p-6 border border-blue-400",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-7xl",children:x.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:x.name}),e.jsx("p",{className:"text-gray-300",children:x.description}),e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[B()==="spring"&&"🌸 봄",B()==="summer"&&"☀️ 여름",B()==="autumn"&&"🍂 가을",B()==="winter"&&"❄️ 겨울"," · Day ",i.day]})]})]}),N.count>=3&&e.jsx("div",{className:"bg-purple-500/20 rounded-lg px-3 py-1 border border-purple-500/50",children:e.jsxs("span",{className:"text-purple-300 text-sm",children:[N.count,"일 연속"]})})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"날씨 효과"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:Object.entries(x.effects).map(([q,h])=>{const H={moodModifier:"😊 기분",movementSpeed:"🏃 이동속도",staminaDrain:"💪 스태미나",encounterRate:"👥 만남 확률",cropGrowth:"🌱 작물 성장",fishingBonus:"🎣 낚시",combatModifier:"⚔️ 전투력"};return e.jsxs("div",{className:"flex items-center justify-between bg-blue-900/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-gray-300",children:H[q]}),e.jsxs("span",{className:h>0?"text-green-400 font-bold":h<0?"text-red-400 font-bold":"text-gray-400",children:[h>0?"+":"",typeof h=="number"?h:`x${h}`,q.includes("Bonus")||q.includes("Speed")||q.includes("Rate")?"%":""]})]},q)})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"🎯 추천 활동"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:x.activities.map(q=>e.jsx("button",{onClick:()=>E(q),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white transition-all hover:scale-105",children:q},q))})]}),x.blockedActivities&&x.blockedActivities.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"🚫 불가능한 활동"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.blockedActivities.map(q=>e.jsx("div",{className:"px-4 py-2 bg-red-900/30 rounded-lg text-red-400 line-through",children:q},q))})]})]})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:"📊 날씨 통계"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:"맑은 날"}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[O.filter(q=>q==="sunny").length,"일"]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:"비온 날"}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[O.filter(q=>q==="rainy").length,"일"]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:"특별한 날"}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[O.filter(q=>["rainbow","sakura","meteor","aurora"].includes(q)).length,"일"]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:"현재 연속"}),e.jsxs("div",{className:"text-xl font-bold text-yellow-400",children:[N.count,"일"]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-400 mb-4",children:"📅 주간 예보"}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:b.map((q,h)=>e.jsxs("div",{className:`flex items-center justify-between bg-blue-900/30 rounded-lg p-2 ${["rainbow","sakura","meteor","aurora"].includes(q.id)?"ring-2 ring-yellow-400":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:q.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white",children:q.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Day ",i.day+h+1]})]})]}),["rainbow","sakura","meteor","aurora"].includes(q.id)&&e.jsx("span",{className:"text-xs bg-yellow-500/20 px-2 py-1 rounded text-yellow-300",children:"특별"})]},h))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/50 to-pink-900/50 rounded-lg p-6 border border-purple-400",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:[B()==="spring"&&"🌸 봄",B()==="summer"&&"☀️ 여름",B()==="autumn"&&"🍂 가을",B()==="winter"&&"❄️ 겨울"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("div",{className:"font-bold text-white mb-1",children:"계절 보너스"}),e.jsxs("div",{className:"bg-black/30 rounded px-2 py-1",children:[Y[B()].seasonalBonus.stat," +",Y[B()].seasonalBonus.value]})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("div",{className:"font-bold text-white mb-1",children:"특별 이벤트"}),Y[B()].specialEvents.map(q=>e.jsxs("div",{className:"bg-black/30 rounded px-2 py-1 mb-1",children:["• ",q]},q))]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-900/50 to-blue-900/50 rounded-lg p-4 border border-green-400",children:[e.jsx("h3",{className:"text-lg font-bold text-green-400 mb-3",children:"💡 날씨 팁"}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-2",children:[e.jsx("li",{children:"• 특별한 날씨에는 희귀 이벤트가 발생할 확률이 높습니다"}),e.jsx("li",{children:"• 날씨에 맞는 활동을 하면 추가 보상을 얻을 수 있어요"}),e.jsx("li",{children:"• 같은 날씨가 3일 이상 지속되면 특별 보너스가 있습니다"}),e.jsx("li",{children:"• 계절마다 고유한 보너스 스탯이 있으니 활용하세요"}),e.jsx("li",{children:"• 무지개, 벚꽃, 유성우는 매우 희귀한 날씨입니다"})]})]})]})]})]})]})},Rb=()=>{const r=ke(),i=re(U=>U.player),{updateStats:d,addItem:o,gainExperience:u,addGold:m,updatePlayer:g}=re(U=>U.actions),[y,p]=v.useState([]),[x,S]=v.useState("all"),[b,D]=v.useState(null),[O,C]=v.useState(!1),[z,j]=v.useState(0),[N,w]=v.useState(""),[T,A]=v.useState([]),[k,M]=v.useState("all"),Y=[{id:"first_meeting",name:"운명적인 만남",description:"첫 히로인과 만나다",icon:"💝",category:"story",tier:"bronze",progress:i.metHeroines?.length||0,maxProgress:1,completed:(i.metHeroines?.length||0)>=1,claimedReward:!1,reward:{exp:50,points:10},condition:{type:"meet_heroine",value:1}},{id:"all_heroines_met",name:"모두와의 인연",description:"모든 히로인과 만나다",icon:"👥",category:"story",tier:"gold",progress:i.metHeroines?.length||0,maxProgress:9,completed:(i.metHeroines?.length||0)>=9,claimedReward:!1,reward:{exp:500,money:1e3,title:"인기왕",points:100},condition:{type:"meet_heroine",value:9}},{id:"true_love",name:"진정한 사랑",description:"한 명의 히로인과 최대 호감도 달성",icon:"💖",category:"story",tier:"platinum",progress:Math.max(...Object.values(i.affection||{})),maxProgress:100,completed:Math.max(...Object.values(i.affection||{}))>=100,claimedReward:!1,reward:{exp:1e3,items:["loveRing"],title:"연인",points:200},condition:{type:"max_affection",value:100}},{id:"harem_master",name:"하렘 마스터",description:"5명의 히로인과 호감도 80 이상",icon:"👑",category:"story",tier:"diamond",progress:Object.values(i.affection||{}).filter(U=>U>=80).length,maxProgress:5,completed:Object.values(i.affection||{}).filter(U=>U>=80).length>=5,claimedReward:!1,reward:{exp:2e3,money:5e3,title:"하렘왕",skin:"golden_uniform",points:500},condition:{type:"multiple_affection",value:5},hiddenUntilProgress:3},{id:"first_victory",name:"첫 승리",description:"전투에서 처음으로 승리",icon:"⚔️",category:"combat",tier:"bronze",progress:i.statistics?.monstersDefeated||0,maxProgress:1,completed:(i.statistics?.monstersDefeated||0)>=1,claimedReward:!1,reward:{exp:30,money:50,points:10},condition:{type:"defeat_monster",value:1}},{id:"monster_hunter",name:"몬스터 헌터",description:"100마리의 몬스터 처치",icon:"🗡️",category:"combat",tier:"silver",progress:i.statistics?.monstersDefeated||0,maxProgress:100,completed:(i.statistics?.monstersDefeated||0)>=100,claimedReward:!1,reward:{exp:300,items:["hunterBadge"],points:50},condition:{type:"defeat_monster",value:100}},{id:"boss_slayer",name:"보스 슬레이어",description:"10명의 보스 몬스터 처치",icon:"🏆",category:"combat",tier:"gold",progress:i.defeatedBosses?.length||0,maxProgress:10,completed:(i.defeatedBosses?.length||0)>=10,claimedReward:!1,reward:{exp:800,items:["legendaryWeapon"],title:"용사",points:100},condition:{type:"defeat_boss",value:10}},{id:"undefeated",name:"불패의 전사",description:"전투에서 50연승",icon:"🛡️",category:"combat",tier:"platinum",progress:i.statistics?.winStreak||0,maxProgress:50,completed:(i.statistics?.winStreak||0)>=50,claimedReward:!1,reward:{exp:1500,stats:{strength:10,defense:10},title:"불패",points:200},condition:{type:"win_streak",value:50}},{id:"popular",name:"인기인",description:"총 호감도 300 달성",icon:"🌟",category:"social",tier:"silver",progress:Object.values(i.affection||{}).reduce((U,R)=>U+R,0),maxProgress:300,completed:Object.values(i.affection||{}).reduce((U,R)=>U+R,0)>=300,claimedReward:!1,reward:{exp:200,stats:{charm:5},points:50},condition:{type:"total_affection",value:300}},{id:"gift_giver",name:"선물의 달인",description:"50개의 선물 전달",icon:"🎁",category:"social",tier:"silver",progress:i.statistics?.giftsGiven||0,maxProgress:50,completed:(i.statistics?.giftsGiven||0)>=50,claimedReward:!1,reward:{exp:250,money:500,points:50},condition:{type:"give_gifts",value:50}},{id:"club_president",name:"동아리 회장",description:"3개 동아리 가입",icon:"🎓",category:"social",tier:"gold",progress:i.joinedClubs?.length||0,maxProgress:3,completed:(i.joinedClubs?.length||0)>=3,claimedReward:!1,reward:{exp:400,stats:{intelligence:5,charm:3},points:100},condition:{type:"join_clubs",value:3}},{id:"explorer",name:"탐험가",description:"모든 지역 방문",icon:"🗺️",category:"exploration",tier:"silver",progress:i.visitedLocations?.length||0,maxProgress:15,completed:(i.visitedLocations?.length||0)>=15,claimedReward:!1,reward:{exp:300,items:["explorerMap"],points:50},condition:{type:"visit_locations",value:15}},{id:"dungeon_master",name:"던전 마스터",description:"던전 최하층 도달",icon:"🏰",category:"exploration",tier:"gold",progress:i.dungeonProgress?.maxFloorReached||1,maxProgress:50,completed:(i.dungeonProgress?.maxFloorReached||1)>=50,claimedReward:!1,reward:{exp:1e3,items:["dungeonKey"],title:"던전 정복자",points:100},condition:{type:"dungeon_floor",value:50}},{id:"treasure_hunter",name:"보물 사냥꾼",description:"30개의 보물 상자 발견",icon:"💎",category:"exploration",tier:"silver",progress:i.statistics?.treasuresFound||0,maxProgress:30,completed:(i.statistics?.treasuresFound||0)>=30,claimedReward:!1,reward:{exp:400,money:1e3,points:50},condition:{type:"find_treasure",value:30}},{id:"collector",name:"수집가",description:"50종류의 아이템 수집",icon:"📦",category:"collection",tier:"silver",progress:i.collectedItems?.length||0,maxProgress:50,completed:(i.collectedItems?.length||0)>=50,claimedReward:!1,reward:{exp:350,items:["collectorBadge"],points:50},condition:{type:"collect_items",value:50}},{id:"fashion_master",name:"패션 마스터",description:"10개의 의상 수집",icon:"👗",category:"collection",tier:"gold",progress:i.collectedOutfits?.length||0,maxProgress:10,completed:(i.collectedOutfits?.length||0)>=10,claimedReward:!1,reward:{exp:500,skin:"designer_outfit",points:100},condition:{type:"collect_outfits",value:10}},{id:"card_master",name:"카드 마스터",description:"모든 히로인 카드 수집",icon:"🎴",category:"collection",tier:"platinum",progress:i.collectedCards?.length||0,maxProgress:45,completed:(i.collectedCards?.length||0)>=45,claimedReward:!1,reward:{exp:1200,items:["goldenCard"],title:"카드 마스터",points:200},condition:{type:"collect_cards",value:45}},{id:"perfect_day",name:"완벽한 하루",description:"하루에 모든 활동 완료",icon:"⭐",category:"special",tier:"gold",progress:i.statistics?.perfectDays||0,maxProgress:1,completed:(i.statistics?.perfectDays||0)>=1,claimedReward:!1,reward:{exp:600,stats:{luck:10},points:100},condition:{type:"perfect_day",value:1}},{id:"minigame_champion",name:"미니게임 챔피언",description:"모든 미니게임에서 최고 점수 달성",icon:"🎮",category:"special",tier:"platinum",progress:i.statistics?.minigameHighScores||0,maxProgress:6,completed:(i.statistics?.minigameHighScores||0)>=6,claimedReward:!1,reward:{exp:1500,money:2e3,title:"게임 마스터",points:200},condition:{type:"minigame_master",value:6}},{id:"true_ending",name:"진엔딩",description:"진정한 엔딩 달성",icon:"🌈",category:"special",tier:"diamond",progress:i.unlockedEndings?.includes("true")?1:0,maxProgress:1,completed:i.unlockedEndings?.includes("true")||!1,claimedReward:!1,reward:{exp:5e3,items:["infinityGem"],title:"전설",skin:"legendary_outfit",points:500},condition:{type:"true_ending",value:1},hiddenUntilProgress:1},{id:"all_endings",name:"모든 이야기",description:"모든 엔딩 확인",icon:"📚",category:"special",tier:"diamond",progress:i.unlockedEndings?.length||0,maxProgress:10,completed:(i.unlockedEndings?.length||0)>=10,claimedReward:!1,reward:{exp:3e3,items:["memoryBook"],title:"이야기꾼",points:500},condition:{type:"all_endings",value:10},hiddenUntilProgress:5},{id:"speedrun",name:"스피드런",description:"15일 안에 엔딩 달성",icon:"⚡",category:"special",tier:"platinum",progress:i.speedrunDays||999,maxProgress:15,completed:(i.speedrunDays||999)<=15,claimedReward:!1,reward:{exp:2e3,stats:{agility:20},title:"번개",points:200},condition:{type:"speedrun",value:15}}],B=[{id:"all",name:"전체",icon:"🏅",color:"gray",achievements:Y},{id:"story",name:"스토리",icon:"📖",color:"purple",achievements:Y.filter(U=>U.category==="story")},{id:"combat",name:"전투",icon:"⚔️",color:"red",achievements:Y.filter(U=>U.category==="combat")},{id:"social",name:"사교",icon:"💬",color:"pink",achievements:Y.filter(U=>U.category==="social")},{id:"exploration",name:"탐험",icon:"🗺️",color:"blue",achievements:Y.filter(U=>U.category==="exploration")},{id:"collection",name:"수집",icon:"📦",color:"yellow",achievements:Y.filter(U=>U.category==="collection")},{id:"special",name:"특별",icon:"🌟",color:"orange",achievements:Y.filter(U=>U.category==="special")}],ae=U=>U>=5e3?"전설":U>=3e3?"마스터":U>=2e3?"다이아몬드":U>=1e3?"플래티넘":U>=500?"골드":U>=200?"실버":U>=50?"브론즈":"초보자",G=U=>{switch(U){case"bronze":return"from-orange-600 to-orange-400";case"silver":return"from-gray-400 to-gray-300";case"gold":return"from-yellow-500 to-yellow-400";case"platinum":return"from-blue-400 to-blue-300";case"diamond":return"from-purple-500 to-pink-500";default:return"from-gray-600 to-gray-500"}},le=U=>{if(!U.completed||U.claimedReward)return;C(!0);const R=U.reward;R.exp&&u(R.exp),R.money&&m(R.money),R.items&&R.items.forEach(h=>o(h)),R.stats&&d(R.stats),R.title&&g({currentTitle:R.title}),R.skin&&g({unlockedSkins:[...i.unlockedSkins||[],R.skin]});const q=y.map(h=>h.id===U.id?{...h,claimedReward:!0}:h);p(q),j(h=>h+R.points),setTimeout(()=>{C(!1),D(null)},2e3)};v.useEffect(()=>{const U=[];Y.forEach(q=>{q.completed&&!i.achievements?.includes(q.id)&&U.push(q.id)}),A(U),p(Y);const R=Y.filter(q=>q.completed&&q.claimedReward).reduce((q,h)=>q+h.reward.points,0);j(i.achievementPoints||R),w(ae(i.achievementPoints||R))},[i]);const E=()=>{let R=B.find(q=>q.id===x)?.achievements||[];return k==="completed"?R=R.filter(q=>q.completed):k==="incomplete"&&(R=R.filter(q=>!q.completed)),R=R.filter(q=>q.hiddenUntilProgress?q.progress>=q.hiddenUntilProgress:!0),R};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent mb-2",children:"🏆 업적 & 보상"}),e.jsx("p",{className:"text-text-secondary",children:"도전 과제를 완료하고 특별한 보상을 획득하세요!"})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-800/50 to-blue-800/50 backdrop-blur-md rounded-lg p-6 mb-6 border border-purple-400",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:z}),e.jsx("div",{className:"text-sm text-gray-300",children:"총 포인트"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:N}),e.jsx("div",{className:"text-sm text-gray-300",children:"현재 등급"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:[y.filter(U=>U.completed).length,"/",y.length]}),e.jsx("div",{className:"text-sm text-gray-300",children:"완료된 업적"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:[Math.round(y.filter(U=>U.completed).length/y.length*100),"%"]}),e.jsx("div",{className:"text-sm text-gray-300",children:"완성도"})]})]})}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-4 mb-6 border border-purple-500",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:B.map(U=>e.jsxs("button",{onClick:()=>S(U.id),className:`px-4 py-2 rounded-lg font-bold transition ${x===U.id?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[U.icon," ",U.name,e.jsxs("span",{className:"ml-2 text-xs",children:["(",U.achievements.filter(R=>R.completed).length,"/",U.achievements.length,")"]})]},U.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M("all"),className:`px-3 py-1 rounded text-sm ${k==="all"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:"전체"}),e.jsx("button",{onClick:()=>M("completed"),className:`px-3 py-1 rounded text-sm ${k==="completed"?"bg-green-600 text-white":"bg-gray-700 text-gray-300"}`,children:"완료"}),e.jsx("button",{onClick:()=>M("incomplete"),className:`px-3 py-1 rounded text-sm ${k==="incomplete"?"bg-red-600 text-white":"bg-gray-700 text-gray-300"}`,children:"미완료"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E().map(U=>e.jsxs("div",{className:`bg-gradient-to-br ${U.completed?"from-green-900/50 to-blue-900/50":"from-gray-900/50 to-gray-800/50"} backdrop-blur-md rounded-lg p-4 border ${U.completed?"border-green-500":"border-gray-600"} ${T.includes(U.id)?"animate-pulse ring-2 ring-yellow-400":""}
              hover:scale-[1.02] transition-all cursor-pointer`,onClick:()=>D(U),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"text-4xl",children:U.icon}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold bg-gradient-to-r ${G(U.tier)} text-white`,children:U.tier.toUpperCase()})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:U.name}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:U.description}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[e.jsx("span",{children:"진행도"}),e.jsxs("span",{children:[U.progress,"/",U.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${U.completed?"bg-gradient-to-r from-green-500 to-blue-500":"bg-gradient-to-r from-yellow-500 to-orange-500"}`,style:{width:`${Math.min(U.progress/U.maxProgress*100,100)}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["+",U.reward.points," pts"]}),U.completed&&!U.claimedReward&&e.jsx("button",{onClick:R=>{R.stopPropagation(),le(U)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-xs rounded font-bold animate-bounce",children:"보상 받기"}),U.completed&&U.claimedReward&&e.jsx("span",{className:"text-xs text-green-400",children:"✓ 수령 완료"})]})]},U.id))}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`bg-gradient-to-br from-purple-900 to-blue-900 rounded-xl p-6 max-w-md w-full border-2 ${b.completed?"border-green-500":"border-gray-500"}`,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:b.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:b.name}),e.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm font-bold bg-gradient-to-r ${G(b.tier)} text-white mt-2`,children:b.tier.toUpperCase()})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:b.description}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-white mb-2",children:[e.jsx("span",{children:"진행도"}),e.jsxs("span",{className:"font-bold",children:[b.progress,"/",b.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${b.completed?"bg-gradient-to-r from-green-500 to-blue-500":"bg-gradient-to-r from-yellow-500 to-orange-500"}`,style:{width:`${Math.min(b.progress/b.maxProgress*100,100)}%`}})})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"보상"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[b.reward.exp&&e.jsxs("div",{className:"text-yellow-300",children:["• 경험치 +",b.reward.exp]}),b.reward.money&&e.jsxs("div",{className:"text-green-300",children:["• 골드 +",b.reward.money]}),b.reward.items&&e.jsxs("div",{className:"text-blue-300",children:["• 아이템: ",b.reward.items.join(", ")]}),b.reward.stats&&e.jsxs("div",{className:"text-purple-300",children:["• 스탯 보너스: ",Object.entries(b.reward.stats).map(([U,R])=>`${U} +${R}`).join(", ")]}),b.reward.title&&e.jsxs("div",{className:"text-pink-300",children:["• 칭호: ",b.reward.title]}),b.reward.skin&&e.jsxs("div",{className:"text-orange-300",children:["• 스킨: ",b.reward.skin]}),e.jsxs("div",{className:"text-white font-bold",children:["• 업적 포인트 +",b.reward.points]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[b.completed&&!b.claimedReward?e.jsx("button",{onClick:()=>le(b),className:"flex-1 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white rounded-lg font-bold transition animate-pulse",children:"보상 받기"}):b.completed?e.jsx("div",{className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-bold text-center",children:"✓ 수령 완료"}):e.jsx("div",{className:"flex-1 py-3 bg-gray-600 text-gray-400 rounded-lg font-bold text-center",children:"미완료"}),e.jsx("button",{onClick:()=>D(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:"닫기"})]})]})}),O&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[60] pointer-events-none",children:e.jsx("div",{className:"text-6xl animate-bounce",children:"🎉"})})]})})},qb={greetings:{morning:["좋은 아침이야! 오늘도 열심히 수련할 거야.","아침부터 만나다니, 운명인가?","일찍 일어났네? 나도 막 훈련 시작하려던 참이야.","오늘 날씨 좋다. 같이 아침 운동할래?"],afternoon:["오후 훈련 시간이야. 같이 할래?","점심은 먹었어? 체력 관리도 중요해.","오후가 되니까 더 덥네... 그래도 훈련은 계속해야지."],evening:["벌써 저녁이네. 시간이 빠르다.","오늘 하루도 수고했어.","저녁 노을이 예쁘네... 아, 아무것도 아니야!"],night:["이렇게 늦은 시간에 무슨 일이야?","밤 훈련? 나쁘지 않네.","별이 예쁜 밤이야. 같이 걸을래?"]},mood_dialogues:{happy:["오늘 기분이 정말 좋아! 네 덕분이야.","웃는 얼굴이 보기 좋네!","이런 날은 특별한 훈련을 해야겠어!"],sad:["오늘은... 좀 힘든 날이야.","가끔은 나도 약해질 때가 있어.","네가 있어서 다행이야..."],angry:["지금은 혼자 있고 싶어.","훈련으로 스트레스를 풀어야겠어!","왜 이렇게 짜증나는 거지?"],shy:["왜... 왜 그렇게 쳐다봐?","갑자기 부끄러워지네...","너무 가까이 오지 마!"],love:["네가 있어서 행복해.","오늘도 네 생각을 했어.","우리... 계속 함께할 수 있을까?"]},activity_responses:{study:["공부도 중요하지만 몸도 단련해야 해!","문무를 겸비해야 진정한 강자지.","도서관에서 검술 책 봤어?"],training:["좋아! 내가 특별히 가르쳐줄게!","오늘은 특별 훈련 메뉴를 준비했어.","강해지고 싶다면 따라와!"],date:["데, 데이트...? 그게 뭐야... 알았어, 가자.","특별한 곳을 알고 있어. 따라와.","둘이서... 시간을 보내는 것도 나쁘지 않네."],gift:["이거... 나를 위한 거야? 고마워!","선물은 필요 없어. 네 마음만으로 충분해.","소중히 간직할게. 정말 고마워."]},special_events:{birthday:"오늘이 내 생일이라는 걸 기억해줬구나... 고마워.",festival:"축제는 시끄럽지만... 너와 함께라면 괜찮아.",confession:"나도... 나도 네가 좋아. 아니, 사랑해.",first_kiss:"이건... 예상 못했어... 하지만 싫지 않아."}},Ob={greetings:{morning:["좋은 아침~ 오늘은 어떤 마법을 배울까?","아침의 마나는 특별해. 느껴지니?","일찍 일어났네! 부지런한 건 좋은 거야.","아침 공기가 상쾌해. 마법 연습하기 좋은 날이야."],afternoon:["오후의 따스한 햇살... 마법 연습하기 좋아.","점심 먹고 졸려? 나도 그래~","오후 수업은 항상 지루해..."],evening:["저녁의 마나는 신비로워.","오늘도 하루가 끝나가네.","저녁 노을 속에서 마법을 쓰면 더 예뻐."],night:["밤의 마법은 특별해. 보여줄까?","별들이 반짝이네. 마법 같지 않니?","늦은 밤의 도서관... 로맨틱하지 않아?"]},mood_dialogues:{happy:["기분이 좋으면 마법도 더 잘 돼!","오늘은 특별한 마법을 보여줄게!","행복이 가득한 날이야~"],sad:["마법도 가끔은 실패할 때가 있어...","오늘은 마나가 잘 안 모여...","위로해줄래...?"],angry:["마법 폭주할 것 같아!","진정해야 해... 심호흡...","왜 이렇게 화가 나지?"],shy:["부, 부끄러워... 얼음 마법으로 숨고 싶어.","왜 그렇게 봐...?","얼굴이 빨개지는 건 마법 부작용이야!"],love:["네게 특별한 마법을 걸고 싶어.","사랑도 일종의 마법이야.","네가 있으면 마법 없이도 행복해."]},activity_responses:{study:["마법 이론 공부할래? 내가 가르쳐줄게!","도서관에 희귀한 마법서가 있대!","공부하다 지치면 마법으로 도와줄게."],training:["마법 수련? 좋아! 같이하자!","실전 마법을 보여줄게!","오늘은 새로운 주문을 배웠어!"],date:["마법 같은 데이트를 준비했어!","둘만의 특별한 시간... 좋아.","얼음 마법으로 특별한 걸 만들어줄게."],gift:["우와! 정말 예쁘다! 고마워!","이건 마법 재료로도 쓸 수 있겠는걸?","최고의 선물이야! 소중히 할게!"]},special_events:{birthday:"생일 선물로 특별한 마법을 보여줄게!",festival:"축제에서 마법 공연 할 거야. 와줄래?",confession:"네게 걸린 마법은... 사랑이야.",first_kiss:"이것도... 마법의 일종일까?"}},zb={greetings:{morning:["아... 좋은 아침... 졸려...","아침부터 활기차네... 부러워...","커피... 커피가 필요해...","아직 꿈속인 것 같아..."],afternoon:["오후는 낮잠 시간이야...","점심 먹고 더 졸려졌어...","오후 햇살이 따뜻해... Zzz..."],evening:["이제야 좀 깨어나는 것 같아.","저녁이 되니까 정신이 들어.","밤이 다가오고 있어... 좋아."],night:["밤은 나의 시간이야.","달빛이 아름다워... 같이 볼래?","밤의 정적이 좋아. 너도 그래?"]},mood_dialogues:{happy:["오늘은 기분이 좋네... 희귀한 일이야.","웃는 게 이렇게 편한 날도 있구나.","행복... 이런 기분 오랜만이야."],sad:["더 우울해졌어...","그냥... 혼자 있고 싶어.","눈물이 날 것 같아..."],angry:["... 짜증나.","왜 다들 날 귀찮게 하는 거야?","화내는 것도 피곤해..."],shy:["부, 부끄러워... 어떻게 해...","얼굴 빨개진 거 보이니...?","이럴 땐 숨고 싶어..."],love:["너랑 있으면... 잠이 안 와.","처음으로... 깨어있고 싶어졌어.","사랑... 이런 감정 처음이야."]},activity_responses:{study:["공부... 졸려... 하지만 같이라면...","조용한 도서관 좋아.","공부하다 자면 깨워줘..."],training:["운동은 피곤해... 패스.","정신 수련이라면 할게.","체력이 없어서..."],date:["데이트... 피곤하지만 너라면...","조용한 곳으로 가자.","둘이서 쉴 수 있는 곳 알아."],gift:["어... 고마워. 정말 예뻐.","선물... 처음 받아봐.","소중히 할게... 정말로."]},special_events:{birthday:"생일... 잊고 있었는데 고마워.",festival:"시끄럽지만... 너랑 있으니 괜찮아.",confession:"나도... 너 없으면 외로워.",first_kiss:"잠이... 완전히 깼어..."}},Hb={greetings:{morning:["좋은 아침! 오늘도 힘차게!","아침부터 에너지 넘치네!","오늘은 뭘 하고 놀까?","일찍 일어난 새가 먹이를 잡는다!"],afternoon:["점심 먹었어? 같이 먹자!","오후에도 파이팅!","낮잠? 그런 건 사치야!"],evening:["아직 하루가 안 끝났어!","저녁 활동 뭐할까?","오늘도 재밌었어!"],night:["밤에도 할 거 많아!","별 보러 갈래?","내일도 재밌게 놀자!"]},mood_dialogues:{happy:["최고로 행복해! 야호!","기분 좋으면 더 신나!","웃음이 멈추지 않아!"],sad:["가끔은... 나도 슬퍼.","울고 싶을 때도 있어.","위로해줄래...?"],angry:["정말 화났어!","참을 수 없어!","한바탕 뛰고 와야겠어!"],shy:["어, 어어... 부끄러워!","갑자기 조용해졌지?","이럴 때 뭐라고 해야 해?"],love:["너만 보면 심장이 빨라져!","사랑이 이렇게 신나는 거였어?","매일매일이 특별해!"]}},Lb={greetings:{morning:["좋은 아침이에요~ 차 한잔 어때요?","아침 꽃들이 참 예뻐요.","상쾌한 아침이네요.","오늘도 좋은 하루 되세요."]},mood_dialogues:{happy:["꽃들도 기뻐하는 것 같아요.","행복이 전염되는 것 같네요.","미소가 예뻐요."]}},Bb={greetings:{morning:["후후, 일찍 일어났네요.","아침의 신비로운 기운이 느껴져요.","오늘은 어떤 비밀을 알게 될까요?"]},mood_dialogues:{happy:["기쁜 일이 있나 봐요. 후후.","행복한 비밀이 있나요?","그 미소, 마음에 들어요."]}},Ub={greetings:{morning:["좋은 아침! 오늘의 메뉴는 뭘까?","아침부터 배고파!","같이 아침 먹을래?"]},mood_dialogues:{happy:["맛있는 걸 먹으면 더 행복해!","기분 좋을 때 요리하면 더 맛있어!","행복 레시피 완성!"]}},$b={greetings:{morning:["아침부터 책 읽기 좋은 날이에요.","조용한 아침... 좋네요.","오늘은 어떤 책을 읽을까요?"]},mood_dialogues:{happy:["좋은 책을 찾았어요!","오늘은 독서가 잘 돼요.","행복한 이야기예요."]}},Gb={weather_reactions:{sunny:["날씨가 정말 좋네!","이런 날은 밖에서 놀아야지!","햇살이 따뜻해."],rainy:["비 오는 날도 나름 운치 있어.","우산 가져왔어?","실내 활동하기 좋은 날이야."],snowy:["눈이다! 눈싸움하자!","하얗게 변한 세상이 예뻐.","따뜻하게 입었어?"]},item_reactions:{flower:"꽃이야! 정말 예쁘다!",chocolate:"초콜릿! 달콤해서 좋아!",book:"책이네! 같이 읽을래?",accessory:"악세서리? 정말 예뻐!",food:"맛있어 보인다! 같이 먹자!"},relationship_milestones:{10:"요즘 자주 보네. 좋아.",25:"너랑 있으면 편해.",50:"특별한 사이가 된 것 같아.",75:"네가 없으면 허전해.",90:"너를... 정말 좋아해.",100:"사랑해. 영원히 함께하자."}},Zl={sakura:qb,yuki:Ob,luna:zb,akane:Hb,hana:Lb,rin:Bb,mei:Ub,sora:$b,common:Gb},Yb=()=>{const r=ke(),i=re(h=>h.player),d=re(h=>h.currentWeather),{updateAffection:o,advanceTime:u,addItem:m,updateStats:g}=re(h=>h.actions),[y,p]=v.useState(null),[x,S]=v.useState(""),[b,D]=v.useState([]),[O,C]=v.useState("neutral"),[z,j]=v.useState([]),[N,w]=v.useState(null),[T,A]=v.useState(""),[k,M]=v.useState(!1),Y=qa,B=v.useCallback(h=>{const H=i.affection[h]||0,J=z.filter(L=>L.characterId===h&&L.dialogue.includes("선물")).slice(-1)[0],ie=z.filter(L=>L.characterId===h&&new Date().getTime()-new Date(L.timestamp).getTime()<864e5);return H>=80?"love":H>=60&&ie.length>3?"happy":J&&new Date().getTime()-new Date(J.timestamp).getTime()<36e5?"shy":ie.length===0?"sad":H>=40?"happy":(H<20,"neutral")},[i.affection,z]),ae=v.useCallback(h=>{const H=Zl[h.characterId];if(!H)return"...";let J=[];if(h.specialEvent&&H.special_events?.[h.specialEvent])return H.special_events[h.specialEvent];h.mood&&H.mood_dialogues?.[h.mood]&&(J=[...H.mood_dialogues[h.mood]]),H.greetings?.[h.timeOfDay]&&(J=[...J,...H.greetings[h.timeOfDay]]),h.weather&&Zl.common?.weather_reactions?.[h.weather]&&(J=[...J,...Zl.common.weather_reactions[h.weather]]);const ie=Zl.common?.relationship_milestones;if(ie){const L=Object.keys(ie).map(Number).sort((Z,P)=>P-Z);for(const Z of L)if(h.affection>=Z){J.push(ie[Z]);break}}return J.length===0&&(J=Object.values(H.greetings||{}).flat()),J[Math.floor(Math.random()*J.length)]||"..."},[]),G=v.useCallback((h,H)=>{const J=[];return J.push({text:"안녕, 잘 지냈어?",response:"응, 덕분에 잘 지냈어.",affectionChange:1}),J.push({text:"오늘 기분 어때?",response:"너를 보니 좋아졌어.",affectionChange:2}),H>=20&&J.push({text:"같이 산책할래?",response:"좋아, 같이 가자.",affectionChange:3,unlockCondition:{minAffection:20}}),H>=40&&J.push({text:"오늘 예뻐 보이네.",response:"어머, 갑자기 왜 그래?",affectionChange:5,moodChange:"shy",unlockCondition:{minAffection:40}}),H>=60&&J.push({text:"데이트하자!",response:"그래, 어디로 갈까?",affectionChange:7,moodChange:"happy",unlockCondition:{minAffection:60}}),H>=80&&J.push({text:"사랑해",response:"나도... 사랑해.",affectionChange:10,moodChange:"love",unlockCondition:{minAffection:80}}),i.inventory?.includes("flower")&&J.push({text:"🌹 꽃을 선물하기",response:"와, 정말 예쁘다! 고마워!",affectionChange:8,moodChange:"happy",unlockCondition:{item:"flower"}}),i.inventory?.includes("chocolate")&&J.push({text:"🍫 초콜릿 선물하기",response:"내가 좋아하는 초콜릿이야! 어떻게 알았어?",affectionChange:10,moodChange:"love",unlockCondition:{item:"chocolate"}}),i.stats?.charm>=30&&J.push({text:"(매력) 윙크하기",response:"어머, 언제 이렇게 매력적이 됐어?",affectionChange:6,moodChange:"shy",unlockCondition:{minStat:{stat:"charm",value:30}}}),i.stats?.intelligence>=30&&J.push({text:"(지능) 시 낭독하기",response:"와... 정말 로맨틱해.",affectionChange:7,moodChange:"happy",unlockCondition:{minStat:{stat:"intelligence",value:30}}}),J},[i]),le=v.useCallback(h=>{if(!y)return;if(h.unlockCondition){if(h.unlockCondition.minAffection&&(i.affection[y]||0)<h.unlockCondition.minAffection){S("(아직 친밀도가 부족합니다)");return}if(h.unlockCondition.minStat&&i.stats[h.unlockCondition.minStat.stat]<h.unlockCondition.minStat.value){S(`(${h.unlockCondition.minStat.stat}이(가) 부족합니다)`);return}if(h.unlockCondition.item&&!i.inventory?.includes(h.unlockCondition.item)){S("(필요한 아이템이 없습니다)");return}}o(y,h.affectionChange),h.moodChange&&(C(h.moodChange),w(h.moodChange),setTimeout(()=>w(null),2e3)),h.unlockCondition?.item;const H={characterId:y,dialogue:h.text,response:h.response,timestamp:new Date,affectionChange:h.affectionChange};j(ie=>[...ie,H]),S(h.response);const J=(i.affection[y]||0)+h.affectionChange;E(y,J),u()},[y,i,o,u]),E=v.useCallback((h,H)=>{const J=[10,25,50,75,90,100],ie=i.affection[h]||0;for(const L of J)if(ie<L&&H>=L){M(!0),S(Zl.common.relationship_milestones[L]),L===50?m(`${h}_photo`):L===100&&(m(`${h}_ring`),g({charm:10,luck:10}));break}},[i.affection,m,g]),U=v.useCallback(h=>h>=100?"💕 연인":h>=90?"💖 서로 좋아함":h>=75?"💗 호감":h>=50?"💓 친한 친구":h>=25?"💙 친구":h>=10?"🤍 아는 사이":"🩶 처음 만남",[]),R=v.useCallback(h=>{p(h);const H={characterId:h,timeOfDay:i.timeOfDay,weather:d,location:i.location,affection:i.affection[h]||0,mood:B(h),playerStats:i.stats},J=ae(H);S(J),C(H.mood||"neutral"),A(U(H.affection)),D(G(h,H.affection))},[i,d,B,ae,U,G]),q=({emotion:h})=>{const H={happy:"😊",sad:"😢",angry:"😠",shy:"😳",love:"💕",neutral:"😐"};return e.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 text-5xl animate-bounce",children:H[h]})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-900 via-purple-900 to-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-pink-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:"💬 대화 시스템"}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-pink-500",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"캐릭터 선택"}),e.jsx("div",{className:"space-y-2",children:Object.entries(Y).map(([h,H])=>{const J=i.affection[h]||0;return i.unlockedCharacters?.includes(h)?e.jsx("button",{onClick:()=>R(h),className:`w-full p-3 rounded-lg transition ${y===h?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:H.icon}),e.jsx("span",{className:"font-bold",children:H.name})]}),e.jsx("div",{className:"text-sm",children:e.jsxs("div",{className:"text-pink-300",children:["❤️ ",J]})})]})},h):null})})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:"대화 기록"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:z.slice(-5).reverse().map((h,H)=>e.jsxs("div",{className:"text-sm bg-purple-900/30 rounded p-2",children:[e.jsxs("div",{className:"text-gray-400 text-xs",children:[Y[h.characterId]?.name," - ",new Date(h.timestamp).toLocaleTimeString()]}),e.jsx("div",{className:"text-white",children:h.dialogue}),h.affectionChange&&e.jsxs("div",{className:"text-pink-300 text-xs",children:["호감도 +",h.affectionChange]})]},H))})]})]}),e.jsx("div",{className:"lg:col-span-2",children:y?e.jsxs("div",{className:"bg-gradient-to-br from-pink-800/50 to-purple-800/50 backdrop-blur-md rounded-lg p-6 border border-pink-400",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-6xl",children:Y[y].icon}),N&&e.jsx(q,{emotion:N})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:Y[y].name}),e.jsx("div",{className:"text-sm text-gray-300",children:Y[y].title}),e.jsx("div",{className:"text-sm text-pink-300 mt-1",children:T})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg text-pink-400",children:["❤️ ",i.affection[y]||0,"/100"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["기분: ",O]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-6 mb-6 min-h-[150px]",children:[e.jsx("p",{className:"text-lg text-white leading-relaxed",children:x}),k&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-500/20 rounded border border-yellow-500",children:e.jsx("span",{className:"text-yellow-300 font-bold",children:"✨ 특별한 순간!"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"선택지"}),b.map((h,H)=>{const J=h.unlockCondition&&(h.unlockCondition.minAffection&&(i.affection[y]||0)<h.unlockCondition.minAffection||h.unlockCondition.minStat&&i.stats[h.unlockCondition.minStat.stat]<h.unlockCondition.minStat.value||h.unlockCondition.item&&!i.inventory?.includes(h.unlockCondition.item));return e.jsx("button",{onClick:()=>!J&&le(h),className:`w-full p-3 rounded-lg text-left transition ${J?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white"}`,disabled:J,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:h.text}),e.jsxs("div",{className:"text-sm",children:[h.unlockCondition&&e.jsxs("span",{className:"text-xs",children:[h.unlockCondition.minAffection&&`❤️ ${h.unlockCondition.minAffection}`,h.unlockCondition.minStat&&`📊 ${h.unlockCondition.minStat.stat} ${h.unlockCondition.minStat.value}`,h.unlockCondition.item&&`🎁 ${h.unlockCondition.item}`]}),e.jsxs("span",{className:"ml-2 text-pink-300",children:["+",h.affectionChange]})]})]})},H)})]})]}):e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-12 border border-pink-500 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"💬"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"캐릭터를 선택하세요"}),e.jsx("p",{className:"text-gray-400",children:"대화하고 싶은 캐릭터를 선택하면 상황에 맞는 대화가 시작됩니다."})]})})]})]})})},Qb=()=>{const r=ke(),i=re(M=>M.player),{updateAffection:d,updateMoney:o,advanceTime:u,addItem:m}=re(M=>M.actions),[g,y]=v.useState(null),[p,x]=v.useState(null),[S,b]=v.useState([]),[D,O]=v.useState(null),[C,z]=v.useState({}),j=[{id:"rose",name:"장미",icon:"🌹",description:"사랑의 상징",category:"flower",price:50,rarity:"common"},{id:"sakura_petal",name:"벚꽃",icon:"🌸",description:"봄의 전령",category:"flower",price:60,rarity:"uncommon"},{id:"sunflower",name:"해바라기",icon:"🌻",description:"밝은 에너지",category:"flower",price:40,rarity:"common"},{id:"blue_rose",name:"파란 장미",icon:"💙",description:"불가능의 상징",category:"flower",price:200,rarity:"rare"},{id:"rainbow_flower",name:"무지개 꽃",icon:"🌈",description:"희귀한 마법의 꽃",category:"flower",price:500,rarity:"legendary"},{id:"chocolate",name:"초콜릿",icon:"🍫",description:"달콤한 선물",category:"food",price:30,rarity:"common"},{id:"cake",name:"케이크",icon:"🍰",description:"특별한 날을 위해",category:"food",price:80,rarity:"uncommon"},{id:"cookies",name:"쿠키",icon:"🍪",description:"수제 쿠키",category:"food",price:25,rarity:"common"},{id:"tea_set",name:"차 세트",icon:"🍵",description:"고급 차와 다구",category:"food",price:150,rarity:"uncommon"},{id:"bento",name:"도시락",icon:"🍱",description:"정성스런 도시락",category:"food",price:45,rarity:"common"},{id:"rare_wine",name:"희귀 와인",icon:"🍷",description:"100년된 빈티지",category:"food",price:1e3,rarity:"legendary"},{id:"necklace",name:"목걸이",icon:"📿",description:"우아한 액세서리",category:"accessory",price:200,rarity:"uncommon"},{id:"bracelet",name:"팔찌",icon:"⌚",description:"세련된 팔찌",category:"accessory",price:150,rarity:"uncommon"},{id:"earrings",name:"귀걸이",icon:"💎",description:"반짝이는 귀걸이",category:"accessory",price:180,rarity:"uncommon"},{id:"hair_pin",name:"머리핀",icon:"🎀",description:"귀여운 머리핀",category:"accessory",price:60,rarity:"common"},{id:"ring",name:"반지",icon:"💍",description:"특별한 의미의 반지",category:"accessory",price:500,rarity:"rare"},{id:"crown",name:"왕관",icon:"👑",description:"전설의 왕관",category:"accessory",price:2e3,rarity:"legendary"},{id:"novel",name:"소설책",icon:"📖",description:"베스트셀러 소설",category:"book",price:40,rarity:"common"},{id:"manga",name:"만화책",icon:"📚",description:"인기 만화",category:"book",price:35,rarity:"common"},{id:"poetry",name:"시집",icon:"📜",description:"아름다운 시집",category:"book",price:45,rarity:"common"},{id:"magic_tome",name:"마법서",icon:"📕",description:"고대의 마법서",category:"book",price:300,rarity:"rare"},{id:"diary",name:"일기장",icon:"📔",description:"고급 가죽 일기장",category:"book",price:70,rarity:"uncommon"},{id:"teddy_bear",name:"곰인형",icon:"🧸",description:"포근한 곰인형",category:"toy",price:50,rarity:"common"},{id:"doll",name:"인형",icon:"🪆",description:"정교한 인형",category:"toy",price:80,rarity:"uncommon"},{id:"puzzle",name:"퍼즐",icon:"🧩",description:"1000조각 퍼즐",category:"toy",price:60,rarity:"common"},{id:"music_box",name:"오르골",icon:"🎵",description:"멜로디가 흐르는 오르골",category:"toy",price:150,rarity:"uncommon"},{id:"crystal_ball",name:"수정구",icon:"🔮",description:"신비한 수정구",category:"toy",price:250,rarity:"rare"},{id:"love_letter",name:"러브레터",icon:"💌",description:"마음을 담은 편지",category:"special",price:0,rarity:"uncommon",obtainMethod:"직접 작성"},{id:"photo_album",name:"사진첩",icon:"📸",description:"추억이 담긴 앨범",category:"special",price:100,rarity:"uncommon"},{id:"handmade_gift",name:"수제 선물",icon:"🎁",description:"정성스럽게 만든 선물",category:"special",price:0,rarity:"rare",obtainMethod:"제작"},{id:"promise_ring",name:"약속의 반지",icon:"💝",description:"영원을 약속하는 반지",category:"special",price:1e3,rarity:"legendary"},{id:"star_fragment",name:"별조각",icon:"⭐",description:"하늘에서 떨어진 별",category:"special",price:0,rarity:"legendary",obtainMethod:"특별 이벤트"}],N=[{characterId:"sakura",loves:["rose","ring","promise_ring","handmade_gift"],likes:["sunflower","chocolate","hair_pin","teddy_bear"],neutral:["novel","cookies","bracelet"],dislikes:["magic_tome","crystal_ball","rare_wine"],hates:["doll","poetry"],specialReactions:{sakura_petal:"벚꽃...? 내 이름과 같네. 특별한 의미가 있는 거야?",blue_rose:"파란 장미라니... 불가능을 가능하게 만들겠다는 거야?",love_letter:"편지... 읽어봐도 돼? ...정말 고마워."},birthdayGift:"cake"},{characterId:"yuki",loves:["magic_tome","crystal_ball","blue_rose","star_fragment"],likes:["chocolate","music_box","necklace","tea_set"],neutral:["novel","puzzle","earrings"],dislikes:["sunflower","bento","teddy_bear"],hates:["rare_wine","crown"],specialReactions:{rainbow_flower:"무지개 꽃! 마법의 재료로 완벽해!",diary:"일기장? 마법 연구 노트로 쓸게!",handmade_gift:"직접 만든 거야? 마법보다 더 특별해..."},birthdayGift:"magic_tome"},{characterId:"luna",loves:["poetry","music_box","star_fragment","diary"],likes:["tea_set","novel","earrings","blue_rose"],neutral:["chocolate","necklace","doll"],dislikes:["sunflower","bento","puzzle"],hates:["rare_wine","crown"],specialReactions:{teddy_bear:"곰인형... 같이 잘 수 있겠네.",love_letter:"편지... 처음 받아봐. 소중히 간직할게.",photo_album:"추억... 나도 여기 있어. 고마워."},birthdayGift:"poetry"},{characterId:"akane",loves:["sunflower","cookies","teddy_bear","photo_album"],likes:["chocolate","cake","hair_pin","puzzle"],neutral:["novel","bracelet","rose"],dislikes:["poetry","rare_wine","crown"],hates:["magic_tome","crystal_ball"],specialReactions:{bento:"도시락! 같이 먹자! 피크닉 가자!",handmade_gift:"우와! 직접 만든 거야? 최고!",promise_ring:"약속... 평생 친구하자는 거지?"},birthdayGift:"cake"},{characterId:"hana",loves:["sakura_petal","sunflower","rainbow_flower","tea_set"],likes:["rose","poetry","music_box","diary"],neutral:["chocolate","necklace","novel"],dislikes:["rare_wine","crown","puzzle"],hates:["doll","crystal_ball"],specialReactions:{blue_rose:"파란 장미... 자연에는 없는 색이에요. 신기해요.",handmade_gift:"정성이 느껴져요. 꽃보다 아름다워요.",star_fragment:"별조각으로 특별한 꽃을 키울 수 있을 것 같아요."},birthdayGift:"rainbow_flower"},{characterId:"rin",loves:["crystal_ball","magic_tome","crown","star_fragment"],likes:["rare_wine","necklace","poetry","blue_rose"],neutral:["chocolate","novel","earrings"],dislikes:["sunflower","cookies","teddy_bear"],hates:["bento","puzzle"],specialReactions:{promise_ring:"약속... 흥미로운 제안이네요.",diary:"비밀을 적는 곳... 제 비밀도 적어도 될까요?",love_letter:"편지... 숨겨진 감정이 느껴져요."},birthdayGift:"crystal_ball"},{characterId:"mei",loves:["bento","cake","cookies","chocolate"],likes:["tea_set","recipe_book","hair_pin","photo_album"],neutral:["rose","bracelet","novel"],dislikes:["magic_tome","crystal_ball","crown"],hates:["rare_wine","poetry"],specialReactions:{handmade_gift:"수제라니! 나도 뭔가 만들어줄게!",rare_wine:"요리에는 좋지만... 선물로는 글쎄...",love_letter:"편지보다 맛있는 걸 만들어줄래?"},birthdayGift:"cake"},{characterId:"sora",loves:["novel","poetry","diary","magic_tome"],likes:["tea_set","music_box","earrings","blue_rose"],neutral:["chocolate","necklace","puzzle"],dislikes:["sunflower","bento","teddy_bear"],hates:["crown","rare_wine"],specialReactions:{manga:"만화책도 나름 재미있네요.",photo_album:"사진으로 남은 이야기... 좋아요.",love_letter:"편지... 책보다 더 설레요."},birthdayGift:"novel"}],w=(M,Y)=>{const B=N.find(ae=>ae.characterId===M);return B?B.specialReactions[Y]?{change:15,reaction:B.specialReactions[Y]}:B.loves.includes(Y)?{change:20,reaction:"우와! 정말 좋아하는 거야! 어떻게 알았어?"}:B.likes.includes(Y)?{change:10,reaction:"고마워! 마음에 들어!"}:B.dislikes.includes(Y)?{change:-5,reaction:"음... 고맙긴 한데..."}:B.hates.includes(Y)?{change:-10,reaction:"이건... 별로야..."}:{change:5,reaction:"고마워. 소중히 할게."}:{change:5,reaction:"고마워요."}},T=()=>{if(!g||!p)return;if(!i.inventory?.includes(p.id)){if(p.price>0&&i.money<p.price){O("돈이 부족합니다!");return}p.price>0&&o(-p.price)}const{change:M,reaction:Y}=w(g,p.id);d(g,M),O(Y);const B={characterId:g,giftId:p.id,date:Date.now(),reaction:Y,affectionChange:M};b(G=>[...G,B]),N.find(G=>G.characterId===g)&&z(G=>({...G,[g]:new Set([...G[g]||[],p.id])})),setTimeout(()=>{O(null),x(null)},3e3),u()},A=(M,Y)=>{const B=N.find(ae=>ae.characterId===M);return B?B.loves.includes(Y)?"💖":B.likes.includes(Y)?"💗":B.dislikes.includes(Y)?"💔":B.hates.includes(Y)?"🖤":"🤍":"❓"},k=M=>{switch(M){case"common":return"from-gray-600 to-gray-500";case"uncommon":return"from-green-600 to-green-500";case"rare":return"from-blue-600 to-blue-500";case"legendary":return"from-purple-600 to-pink-600";default:return"from-gray-600 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-900 via-purple-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-pink-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"🎁 선물 시스템"}),e.jsx("p",{className:"text-text-secondary",children:"캐릭터의 취향에 맞는 선물을 주고 호감도를 높이세요!"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl text-yellow-400",children:["💰 ",i.money]}),e.jsx("button",{onClick:()=>r("/game"),className:"mt-2 px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"돌아가기"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"선물 목록"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["all","flower","food","accessory","book","toy","special"].map(M=>e.jsx("button",{className:"px-3 py-1 bg-purple-700 hover:bg-purple-600 rounded text-white text-sm",children:M==="all"?"전체":M==="flower"?"🌹 꽃":M==="food"?"🍰 음식":M==="accessory"?"💎 액세서리":M==="book"?"📚 책":M==="toy"?"🧸 장난감":"⭐ 특별"},M))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-[600px] overflow-y-auto",children:j.map(M=>e.jsxs("button",{onClick:()=>x(M),className:`relative p-4 rounded-lg border transition-all hover:scale-105 ${p?.id===M.id?"border-pink-500 bg-pink-900/50":"border-gray-600 bg-gray-800/50 hover:border-purple-500"}`,children:[e.jsx("div",{className:`absolute top-1 right-1 px-2 py-1 rounded text-xs text-white bg-gradient-to-r ${k(M.rarity)}`,children:M.rarity}),e.jsx("div",{className:"text-3xl mb-2",children:M.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:M.name}),e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:M.description}),e.jsx("div",{className:"text-sm text-yellow-400",children:M.price>0?`💰 ${M.price}`:M.obtainMethod}),g&&C[g]?.has(M.id)&&e.jsx("div",{className:"absolute bottom-1 left-1 text-lg",children:A(g,M.id)})]},M.id))})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-pink-500",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"캐릭터 선택"}),e.jsx("div",{className:"space-y-2",children:Object.keys(i.affection||{}).map(M=>e.jsx("button",{onClick:()=>y(M),className:`w-full p-3 rounded-lg transition ${g===M?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:M}),e.jsxs("span",{className:"text-pink-300",children:["❤️ ",i.affection[M]]})]})},M))})]}),g&&p&&e.jsxs("div",{className:"bg-gradient-to-br from-pink-800/50 to-purple-800/50 backdrop-blur-md rounded-lg p-6 border border-pink-400",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"선물 주기"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-4xl mb-2",children:p.icon}),e.jsx("div",{className:"text-white font-bold",children:p.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:["→ ",g]})]}),e.jsx("button",{onClick:T,className:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white rounded-lg font-bold transition",children:"선물하기"})]}),D&&e.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500 rounded-lg p-4 animate-bounce",children:e.jsx("div",{className:"text-yellow-300 text-center font-bold",children:D})}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-3",children:"선물 기록"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:S.slice(-5).reverse().map((M,Y)=>e.jsxs("div",{className:"text-sm bg-purple-900/30 rounded p-2",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{children:M.characterId}),e.jsxs("span",{className:M.affectionChange>0?"text-green-400":"text-red-400",children:[M.affectionChange>0?"+":"",M.affectionChange]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:j.find(B=>B.id===M.giftId)?.name})]},Y))})]})]})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:"💡 선호도 가이드"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:"💖"}),e.jsx("div",{className:"text-sm text-white",children:"매우 좋아함"}),e.jsx("div",{className:"text-xs text-green-400",children:"+20"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:"💗"}),e.jsx("div",{className:"text-sm text-white",children:"좋아함"}),e.jsx("div",{className:"text-xs text-green-400",children:"+10"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:"🤍"}),e.jsx("div",{className:"text-sm text-white",children:"보통"}),e.jsx("div",{className:"text-xs text-gray-400",children:"+5"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:"💔"}),e.jsx("div",{className:"text-sm text-white",children:"싫어함"}),e.jsx("div",{className:"text-xs text-red-400",children:"-5"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:"🖤"}),e.jsx("div",{className:"text-sm text-white",children:"매우 싫어함"}),e.jsx("div",{className:"text-xs text-red-400",children:"-10"})]})]})]})]})})},Xb=()=>{const r=ke(),i=re(E=>E.player);re(E=>E.gameDate);const{updateAffection:d,gainExperience:o,addGold:u,addItem:m,advanceTime:g,updateStats:y}=re(E=>E.actions),[p,x]=v.useState("spring"),[S,b]=v.useState(null),[D,O]=v.useState({}),[C,z]=v.useState(null),[j,N]=v.useState(!1),[w,T]=v.useState(null),[A,k]=v.useState([]),M=[{id:"sakura_festival",name:"🌸 벚꽃 축제",season:"spring",icon:"🌸",description:"학원 전체가 분홍빛으로 물드는 봄의 축제! 벚꽃 아래에서 특별한 추억을 만들어보세요.",startDay:5,duration:3,activities:[{id:"hanami",name:"벚꽃 구경",icon:"🌸",description:"벚꽃 나무 아래서 도시락을 먹으며 즐거운 시간을 보냅니다.",stamina:10,rewards:{exp:50,affection:[{character:"sakura",amount:10},{character:"hana",amount:8}]},dialogues:["벚꽃이 정말 아름답네요!","이 순간이 영원했으면 좋겠어요.","내년에도 함께 보러 와요!"]},{id:"photo_contest",name:"사진 콘테스트",icon:"📸",description:"벚꽃을 배경으로 최고의 사진을 찍어보세요!",stamina:15,rewards:{exp:75,money:200,items:["sakura_photo"]},minigame:"photo_snap",successRate:70},{id:"spring_confession",name:"봄의 고백",icon:"💕",description:"벚꽃 나무 아래에서 마음을 전하세요.",stamina:20,rewards:{affection:[{character:"any",amount:20}],items:["confession_letter"]},requiredAffection:{character:"any",amount:60}},{id:"food_stall",name:"축제 음식",icon:"🍡",description:"다양한 축제 음식을 즐겨보세요.",stamina:5,rewards:{exp:30,money:-50,affection:[{character:"mei",amount:10}]}}],specialRewards:[{id:"sakura_crown",name:"벚꽃 왕관",icon:"👑",type:"item",requirement:{participations:5}},{id:"spring_memory",name:"봄의 추억",icon:"🌸",type:"memory",requirement:{character:"sakura",affection:80}}]},{id:"spring_sports",name:"🏃 봄 체육대회",season:"spring",icon:"🏃",description:"학급 대항 체육대회! 우승을 위해 힘을 합쳐보세요.",startDay:15,duration:2,activities:[{id:"relay_race",name:"계주 경기",icon:"🏃",description:"팀워크가 중요한 계주 경기",stamina:25,rewards:{exp:100,money:300,affection:[{character:"akane",amount:15}]},minigame:"running",successRate:60},{id:"tug_of_war",name:"줄다리기",icon:"🪢",description:"힘을 합쳐 상대팀을 이기세요!",stamina:20,rewards:{exp:80,items:["victory_flag"]}},{id:"cheering",name:"응원하기",icon:"📣",description:"친구들을 열심히 응원합니다.",stamina:10,rewards:{exp:40,affection:[{character:"all",amount:5}]}}],specialRewards:[{id:"champion_medal",name:"챔피언 메달",icon:"🥇",type:"item",requirement:{score:500}}]},{id:"summer_festival",name:"🎆 여름 축제",season:"summer",icon:"🎆",description:"불꽃놀이와 함께하는 낭만적인 여름밤! 유카타를 입고 축제를 즐겨보세요.",startDay:35,duration:3,activities:[{id:"fireworks",name:"불꽃놀이 관람",icon:"🎆",description:"아름다운 불꽃놀이를 함께 봅니다.",stamina:10,rewards:{exp:60,affection:[{character:"yuki",amount:12}]},dialogues:["불꽃이 정말 예쁘네요!","이 순간을 잊지 못할 거예요.","내년에도 함께 와요."]},{id:"goldfish_scooping",name:"금붕어 잡기",icon:"🐠",description:"전통 게임인 금붕어 잡기에 도전!",stamina:15,rewards:{exp:50,items:["goldfish"],money:-30},minigame:"scooping",successRate:40},{id:"yukata_date",name:"유카타 데이트",icon:"👘",description:"유카타를 입고 축제를 둘러봅니다.",stamina:20,rewards:{affection:[{character:"luna",amount:15}],items:["yukata_photo"]},requiredAffection:{character:"any",amount:50}},{id:"shaved_ice",name:"빙수 먹기",icon:"🍧",description:"시원한 빙수로 더위를 날려보세요.",stamina:5,rewards:{exp:25,money:-20,affection:[{character:"mei",amount:8}]}}],specialRewards:[{id:"festival_mask",name:"축제 가면",icon:"🎭",type:"item",requirement:{participations:4}},{id:"summer_night_memory",name:"여름밤의 추억",icon:"🌙",type:"memory",requirement:{character:"yuki",affection:75}}]},{id:"beach_trip",name:"🏖️ 해변 여행",season:"summer",icon:"🏖️",description:"학급 전체가 함께 떠나는 해변 여행! 파도와 모래사장에서 즐거운 시간을 보내세요.",startDay:45,duration:2,activities:[{id:"swimming",name:"수영하기",icon:"🏊",description:"시원한 바다에서 수영을 즐깁니다.",stamina:20,rewards:{exp:70,affection:[{character:"akane",amount:10}]}},{id:"sandcastle",name:"모래성 만들기",icon:"🏰",description:"멋진 모래성을 만들어보세요.",stamina:15,rewards:{exp:60,items:["sandcastle_trophy"],affection:[{character:"hana",amount:10}]},minigame:"building"},{id:"beach_volleyball",name:"비치발리볼",icon:"🏐",description:"모래사장에서 발리볼 경기!",stamina:25,rewards:{exp:90,money:150,affection:[{character:"sakura",amount:12}]}},{id:"sunset_walk",name:"석양 산책",icon:"🌅",description:"해변을 따라 로맨틱한 산책",stamina:10,rewards:{affection:[{character:"any",amount:18}],items:["sunset_photo"]},requiredAffection:{character:"any",amount:65}}],specialRewards:[{id:"summer_swimsuit",name:"여름 수영복",icon:"👙",type:"skin",requirement:{participations:6}}]},{id:"harvest_festival",name:"🍂 수확제",season:"autumn",icon:"🍂",description:"풍성한 수확을 축하하는 가을 축제! 맛있는 음식과 함께 즐거운 시간을 보내세요.",startDay:65,duration:3,activities:[{id:"harvest_crops",name:"작물 수확",icon:"🌾",description:"가을 작물을 수확합니다.",stamina:15,rewards:{exp:65,items:["autumn_crops"],money:100}},{id:"cooking_contest",name:"요리 대회",icon:"👨‍🍳",description:"수확한 재료로 요리 대회에 참가!",stamina:20,rewards:{exp:85,money:250,affection:[{character:"mei",amount:20}]},minigame:"cooking"},{id:"autumn_leaves",name:"단풍 구경",icon:"🍁",description:"아름다운 단풍을 구경합니다.",stamina:10,rewards:{exp:45,affection:[{character:"sora",amount:12}]}},{id:"harvest_dance",name:"수확 춤",icon:"💃",description:"전통 수확 춤을 춥니다.",stamina:15,rewards:{exp:70,affection:[{character:"all",amount:8}]}}],specialRewards:[{id:"harvest_crown",name:"수확의 왕관",icon:"👑",type:"item",requirement:{score:400}}]},{id:"halloween",name:"🎃 할로윈 파티",season:"autumn",icon:"🎃",description:"으스스하고 재미있는 할로윈 파티! 코스튬을 입고 즐거운 시간을 보내세요.",startDay:75,duration:2,activities:[{id:"costume_party",name:"코스튬 파티",icon:"👻",description:"멋진 코스튬을 입고 파티에 참가!",stamina:15,rewards:{exp:80,items:["halloween_costume"],affection:[{character:"rin",amount:15}]}},{id:"trick_or_treat",name:"트릭 오어 트릿",icon:"🍬",description:"사탕을 모으러 다닙니다.",stamina:20,rewards:{exp:60,items:["candy_bag"],money:80}},{id:"haunted_house",name:"귀신의 집",icon:"🏚️",description:"무서운 귀신의 집 탐험!",stamina:25,rewards:{exp:100,affection:[{character:"luna",amount:18}],items:["courage_badge"]},successRate:50},{id:"pumpkin_carving",name:"호박 조각",icon:"🎃",description:"호박을 조각해 잭오랜턴을 만듭니다.",stamina:10,rewards:{exp:50,items:["jack_o_lantern"]}}],specialRewards:[{id:"vampire_cape",name:"뱀파이어 망토",icon:"🦇",type:"skin",requirement:{participations:5}}]},{id:"christmas",name:"🎄 크리스마스",season:"winter",icon:"🎄",description:"로맨틱한 화이트 크리스마스! 특별한 사람과 함께 보내세요.",startDay:85,duration:3,activities:[{id:"christmas_date",name:"크리스마스 데이트",icon:"🎅",description:"특별한 크리스마스 데이트",stamina:20,rewards:{affection:[{character:"any",amount:25}],items:["christmas_gift"]},requiredAffection:{character:"any",amount:70}},{id:"gift_exchange",name:"선물 교환",icon:"🎁",description:"친구들과 선물을 교환합니다.",stamina:10,rewards:{exp:60,items:["mystery_gift"],affection:[{character:"all",amount:10}]}},{id:"christmas_tree",name:"트리 꾸미기",icon:"🎄",description:"크리스마스 트리를 꾸밉니다.",stamina:15,rewards:{exp:70,affection:[{character:"hana",amount:12}]}},{id:"carol_singing",name:"캐럴 부르기",icon:"🎵",description:"다함께 캐럴을 부릅니다.",stamina:10,rewards:{exp:50,affection:[{character:"all",amount:6}]}}],specialRewards:[{id:"santa_hat",name:"산타 모자",icon:"🎅",type:"item",requirement:{participations:4}},{id:"white_christmas_memory",name:"화이트 크리스마스",icon:"❄️",type:"memory",requirement:{character:"any",affection:90}}]},{id:"new_year",name:"🎍 신년 행사",season:"winter",icon:"🎍",description:"새해를 맞이하는 특별한 행사! 소원을 빌고 새로운 시작을 준비하세요.",startDay:95,duration:2,activities:[{id:"shrine_visit",name:"신사 참배",icon:"⛩️",description:"새해 소원을 빌러 신사에 갑니다.",stamina:15,rewards:{exp:75,items:["fortune_charm"],affection:[{character:"sakura",amount:14}]}},{id:"mochi_making",name:"떡 만들기",icon:"🍡",description:"전통 떡을 만듭니다.",stamina:20,rewards:{exp:65,items:["mochi"],affection:[{character:"mei",amount:12}]}},{id:"sunrise_viewing",name:"일출 보기",icon:"🌅",description:"새해 첫 일출을 봅니다.",stamina:10,rewards:{exp:80,affection:[{character:"any",amount:20}],items:["sunrise_photo"]},requiredAffection:{character:"any",amount:60}},{id:"fortune_telling",name:"운세 보기",icon:"🔮",description:"새해 운세를 봅니다.",stamina:5,rewards:{exp:30,items:["fortune_paper"]}}],specialRewards:[{id:"kimono",name:"전통 기모노",icon:"👘",type:"skin",requirement:{participations:4}}]},{id:"snow_festival",name:"❄️ 눈 축제",season:"winter",icon:"❄️",description:"하얀 눈으로 뒤덮인 겨울 축제! 눈사람을 만들고 썰매를 타며 즐거운 시간을 보내세요.",startDay:105,duration:3,activities:[{id:"snowman_building",name:"눈사람 만들기",icon:"⛄",description:"큰 눈사람을 만들어보세요!",stamina:15,rewards:{exp:60,items:["snowman_trophy"],affection:[{character:"yuki",amount:20}]},minigame:"snowman"},{id:"snowball_fight",name:"눈싸움",icon:"❄️",description:"신나는 눈싸움!",stamina:20,rewards:{exp:70,affection:[{character:"akane",amount:14}]}},{id:"ice_skating",name:"아이스 스케이팅",icon:"⛸️",description:"얼음 위에서 스케이팅을 즐깁니다.",stamina:18,rewards:{exp:80,affection:[{character:"luna",amount:16}]},requiredLevel:10},{id:"hot_chocolate",name:"핫초코 마시기",icon:"☕",description:"따뜻한 핫초코로 몸을 녹입니다.",stamina:5,rewards:{exp:25,money:-30,affection:[{character:"all",amount:4}]}}],specialRewards:[{id:"snow_queen_crown",name:"눈의 여왕 왕관",icon:"👑",type:"item",requirement:{score:500}},{id:"winter_love_memory",name:"겨울 사랑",icon:"💙",type:"memory",requirement:{character:"yuki",affection:85}}]}],Y=v.useCallback(()=>{const E=i.day;return E<=30?"spring":E<=60?"summer":E<=90?"autumn":"winter"},[i.day]),B=v.useCallback(()=>{const E=Y(),U=i.day,R=M.find(q=>q.season===E&&U>=q.startDay&&U<q.startDay+q.duration);b(R||null)},[i.day,Y]),ae=v.useCallback(E=>{if(!S)return;if(i.stamina<E.stamina){T({success:!1,message:"스태미나가 부족합니다!"}),N(!0);return}if(E.requiredAffection&&!Object.values(i.affection).some(q=>q>=E.requiredAffection.amount)){T({success:!1,message:"호감도가 부족합니다!"}),N(!0);return}if(!E.successRate||Math.random()*100<E.successRate){E.rewards.exp&&o(E.rewards.exp),E.rewards.money&&u(E.rewards.money),E.rewards.items&&E.rewards.items.forEach(q=>m(q)),E.rewards.affection&&E.rewards.affection.forEach(q=>{if(q.character==="all")Object.keys(i.affection).forEach(h=>d(h,q.amount));else if(q.character==="any"){const h=Object.entries(i.affection).sort((H,J)=>J[1]-H[1])[0][0];d(h,q.amount)}else d(q.character,q.amount)});const R=D[S.id]||{eventId:S.id,participations:0,completedActivities:[],earnedRewards:[],specialMoments:[],totalScore:0};R.participations++,R.completedActivities.includes(E.id)||R.completedActivities.push(E.id),R.totalScore+=E.rewards.exp||0,O(q=>({...q,[S.id]:R})),G(S,R),T({success:!0,message:"활동을 성공적으로 완료했습니다!",rewards:E.rewards})}else T({success:!1,message:"활동에 실패했습니다. 다시 시도해보세요!"});y({stamina:-E.stamina}),g(),N(!0)},[S,i,D,o,u,m,d,y,g]),G=v.useCallback((E,U)=>{E.specialRewards.forEach(R=>{if(U.earnedRewards.includes(R.id))return;let q=!1;R.requirement.participations&&U.participations>=R.requirement.participations&&(q=!0),R.requirement.score&&U.totalScore>=R.requirement.score&&(q=!0),R.requirement.character&&R.requirement.affection&&(i.affection[R.requirement.character]||0)>=R.requirement.affection&&(q=!0),q&&(U.earnedRewards.push(R.id),R.type==="item"?m(R.id):R.type==="memory"&&k(h=>[...h,R.id]),T(h=>({...h,specialReward:R})))})},[i.affection,m]);v.useEffect(()=>{x(Y()),B()},[Y,B]);const le=()=>{switch(p){case"spring":return"from-pink-400 via-pink-300 to-blue-300";case"summer":return"from-blue-400 via-cyan-300 to-yellow-300";case"autumn":return"from-orange-400 via-red-400 to-yellow-500";case"winter":return"from-blue-200 via-gray-200 to-white";default:return"from-purple-400 to-pink-400"}};return e.jsx("div",{className:`min-h-screen bg-gradient-to-b ${le()} p-4`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:[p==="spring"&&"🌸 봄",p==="summer"&&"☀️ 여름",p==="autumn"&&"🍂 가을",p==="winter"&&"❄️ 겨울"," 이벤트"]}),e.jsx("p",{className:"text-gray-600",children:"계절마다 펼쳐지는 특별한 이벤트를 즐겨보세요!"})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:"🏠 돌아가기"})]})}),S?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("span",{className:"text-6xl",children:S.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:S.name}),e.jsx("p",{className:"text-gray-600 mt-2",children:S.description}),e.jsxs("div",{className:"flex gap-4 mt-3 text-sm text-gray-500",children:[e.jsxs("span",{children:["📅 Day ",i.day," / ",S.startDay+S.duration-1]}),e.jsxs("span",{children:["⏱️ ",S.startDay+S.duration-i.day,"일 남음"]})]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-4",children:"🎯 이벤트 활동"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.activities.map(E=>e.jsx("button",{onClick:()=>z(E),className:"bg-gradient-to-r from-white to-gray-50 rounded-lg p-4 border-2 border-gray-200 hover:border-blue-400 transition-all hover:scale-[1.02] text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-3xl",children:E.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:E.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.description}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-blue-600",children:["💪 ",E.stamina]}),e.jsxs("span",{className:"text-green-600",children:[E.rewards.exp&&`EXP +${E.rewards.exp}`,E.rewards.money&&` 💰 ${E.rewards.money>0?"+":""}${E.rewards.money}`]})]})]})]})},E.id))})]}),C&&e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-700 mb-4",children:[C.icon," ",C.name]}),e.jsx("p",{className:"text-gray-600 mb-4",children:C.description}),C.requiredAffection&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-3 mb-4",children:e.jsxs("span",{className:"text-yellow-800",children:["⚠️ 요구사항: 호감도 ",C.requiredAffection.amount," 이상"]})}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-bold text-green-800 mb-2",children:"보상"}),e.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[C.rewards.exp&&e.jsxs("div",{children:["• 경험치 +",C.rewards.exp]}),C.rewards.money&&e.jsxs("div",{children:["• 골드 ",C.rewards.money>0?"+":"",C.rewards.money]}),C.rewards.items&&e.jsxs("div",{children:["• 아이템: ",C.rewards.items.join(", ")]}),C.rewards.affection&&e.jsxs("div",{children:["• 호감도: ",C.rewards.affection.map(E=>`${E.character} +${E.amount}`).join(", ")]})]})]}),e.jsxs("button",{onClick:()=>ae(C),className:"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg font-bold transition",children:["참여하기 (스태미나 ",C.stamina,")"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"📊 이벤트 진행도"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"참여 횟수"}),e.jsxs("span",{children:[D[S.id]?.participations||0,"회"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:`${Math.min((D[S.id]?.participations||0)/10*100,100)}%`}})})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:["완료 활동: ",D[S.id]?.completedActivities?.length||0,"/",S.activities.length]}),e.jsxs("div",{children:["총 점수: ",D[S.id]?.totalScore||0]})]})]})]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"🏆 특별 보상"}),e.jsx("div",{className:"space-y-3",children:S.specialRewards.map(E=>{const U=D[S.id]?.earnedRewards?.includes(E.id);return e.jsx("div",{className:`p-3 rounded-lg border ${U?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:E.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm text-gray-700",children:E.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.requirement.participations&&`참여 ${E.requirement.participations}회`,E.requirement.score&&`점수 ${E.requirement.score}`,E.requirement.affection&&`호감도 ${E.requirement.affection}`]})]}),U&&e.jsx("span",{className:"text-green-500",children:"✓"})]})},E.id)})})]}),A.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-pink-100 to-purple-100 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-3",children:"💝 특별한 추억"}),e.jsx("div",{className:"space-y-2",children:A.map(E=>e.jsxs("div",{className:"text-sm text-purple-700",children:["• ",E]},E))})]})]})]}):e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📅"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"현재 진행 중인 이벤트가 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"다음 이벤트를 기다려주세요!"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"예정된 이벤트"}),e.jsx("div",{className:"space-y-3",children:M.filter(E=>E.season===p&&E.startDay>i.day).slice(0,3).map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:E.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-gray-700",children:E.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Day ",E.startDay,"부터"]})]})]}),e.jsxs("div",{className:"text-sm text-blue-600",children:[E.startDay-i.day,"일 후"]})]},E.id))})]})]}),j&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:w.success?"🎉":"😅"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:w.success?"성공!":"실패"}),e.jsx("p",{className:"text-gray-600 mb-4",children:w.message}),w.rewards&&e.jsx("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-sm text-green-700",children:[w.rewards.exp&&e.jsxs("div",{children:["경험치 +",w.rewards.exp]}),w.rewards.money&&e.jsxs("div",{children:["골드 +",w.rewards.money]}),w.rewards.items&&e.jsx("div",{children:"아이템 획득!"})]})}),w.specialReward&&e.jsx("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-purple-700",children:[e.jsx("div",{className:"font-bold",children:"🏆 특별 보상 획득!"}),e.jsxs("div",{children:[w.specialReward.icon," ",w.specialReward.name]})]})}),e.jsx("button",{onClick:()=>{N(!1),T(null),z(null)},className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-bold",children:"확인"})]})})})]})})},Jl=[{id:"sakura_true",name:"벚꽃의 약속",type:"true",priority:10,characterId:"sakura",conditions:[{type:"affection",target:"sakura",value:100,comparison:"greater"},{type:"quest",target:"sakura_final",value:1,comparison:"equal"},{type:"item",target:"promise_ring",value:1,comparison:"greater"}],title:"영원한 벚꽃",description:["벚꽃이 만개한 봄날, 사쿠라와 함께 언덕 위에 서 있습니다.",'"처음 만났을 때를 기억해? 이 벚꽃나무 아래서..."',"사쿠라가 수줍게 미소 지으며 당신의 손을 잡습니다.",'"이제 우리의 약속을 지킬 때가 왔네. 영원히 함께하자."'],epilogue:["몇 년 후, 당신과 사쿠라는 같은 벚꽃나무 아래서 결혼식을 올립니다.","매년 봄, 두 사람은 이곳으로 돌아와 첫 만남을 기념합니다.","벚꽃 꽃잎이 춤추는 가운데, 영원한 사랑을 약속합니다."],unlockables:{achievements:["true_love_sakura","perfect_ending"],titles:["벚꽃의 연인","영원한 약속"],costumes:["wedding_dress_sakura","tuxedo"],gallery:["sakura_wedding","sakura_epilogue"]},bgm:"sakura_true_ending",specialEffects:["sakura_petals","golden_light"]},{id:"yuki_true",name:"겨울의 온기",type:"true",priority:10,characterId:"yuki",conditions:[{type:"affection",target:"yuki",value:100,comparison:"greater"},{type:"quest",target:"yuki_final",value:1,comparison:"equal"},{type:"achievement",target:"ice_queen_heart",value:1,comparison:"equal"}],title:"녹아내린 얼음",description:["겨울밤, 유키가 당신을 도서관 옥상으로 이끕니다.",'"난 항상 혼자였어... 하지만 네가 내 마음을 녹여줬어."',"별이 빛나는 하늘 아래, 유키가 처음으로 진심을 털어놓습니다.",'"이제 더 이상 추위를 두려워하지 않아. 네가 있으니까."'],epilogue:["유키는 베스트셀러 작가가 되었고, 당신은 그녀의 첫 독자입니다.","두 사람은 조용한 서재에서 함께 책을 읽으며 시간을 보냅니다.","차가웠던 그녀의 마음은 이제 당신을 향한 따뜻한 사랑으로 가득합니다."],unlockables:{achievements:["true_love_yuki","melted_heart"],titles:["얼음공주의 기사","따뜻한 겨울"],costumes:["winter_formal_yuki","winter_coat"],gallery:["yuki_confession","yuki_epilogue"]},bgm:"yuki_true_ending",specialEffects:["snow_fall","aurora"]},{id:"normal_sakura",name:"봄의 추억",type:"normal",priority:5,characterId:"sakura",conditions:[{type:"affection",target:"sakura",value:70,comparison:"greater"},{type:"affection",target:"sakura",value:100,comparison:"less"}],title:"좋은 친구",description:["졸업식 날, 사쿠라와 함께 교정을 걷습니다.",'"우리 좋은 친구로 남자. 앞으로도 연락하면서 지내자!"',"사쿠라가 밝게 웃으며 손을 흔듭니다.","아쉬움이 남지만, 소중한 추억을 간직하게 되었습니다."],epilogue:["졸업 후에도 가끔 만나며 우정을 이어갑니다.","각자의 길을 걸어가지만, 학창시절의 추억은 영원합니다."],unlockables:{achievements:["normal_ending_sakura"],titles:["사쿠라의 친구"],gallery:["sakura_normal_ending"]},bgm:"graduation_theme"},{id:"bad_general",name:"외로운 졸업",type:"bad",priority:1,conditions:[{type:"stat",target:"max_affection",value:30,comparison:"less"}],title:"혼자만의 길",description:["졸업식 날, 당신은 혼자 교문을 나섭니다.","아무도 작별 인사를 하러 오지 않았습니다.","학창시절은 그저 스쳐 지나간 시간일 뿐...","쓸쓸한 발걸음으로 학교를 떠납니다."],epilogue:["가끔 학창시절을 떠올리지만, 특별한 추억은 없습니다.","그저 평범한 일상으로 돌아갑니다."],unlockables:{achievements:["lonely_ending"],titles:["고독한 늑대"]},bgm:"sad_theme"},{id:"harem_ending",name:"모두의 사랑",type:"secret",priority:15,conditions:[{type:"affection",target:"sakura",value:80,comparison:"greater"},{type:"affection",target:"yuki",value:80,comparison:"greater"},{type:"affection",target:"hikari",value:80,comparison:"greater"},{type:"affection",target:"luna",value:80,comparison:"greater"},{type:"achievement",target:"popular_guy",value:1,comparison:"equal"}],title:"인기남의 고민",description:["졸업 파티에서 모든 히로인들이 당신을 둘러쌉니다.",'"우리 모두 네가 좋아!" 그들이 동시에 외칩니다.',"당신은 행복한 비명을 지르며 도망칩니다.",'"잠깐! 나 아직 결정 못했다고!"'],epilogue:["결국 모두와 좋은 친구로 남기로 했습니다.","매주 다른 사람과 데이트를 즐기는 행복한(?) 나날들...","하지만 언젠가는 선택해야 할 날이 올 것입니다."],unlockables:{achievements:["harem_master","popular_ending"],titles:["하렘왕","모두의 친구"],gallery:["harem_ending_cg"]},bgm:"comedy_theme",specialEffects:["heart_explosion","rainbow"]},{id:"villain_ending",name:"어둠의 지배자",type:"secret",priority:20,conditions:[{type:"achievement",target:"defeat_all_bosses",value:1,comparison:"equal"},{type:"item",target:"dark_crown",value:1,comparison:"greater"},{type:"stat",target:"dark_points",value:100,comparison:"greater"}],title:"새로운 마왕",description:["최종 보스를 쓰러뜨린 당신은 어둠의 왕관을 손에 넣습니다.",'"이제 내가 새로운 지배자다!"',"모든 던전이 당신의 명령에 복종합니다.","아카데미는 이제 당신의 왕국입니다."],epilogue:["마왕이 된 당신은 의외로 자비로운 통치자가 됩니다.","던전과 인간이 공존하는 새로운 시대를 열었습니다.","히로인들은 당신의 충실한 기사가 되었습니다."],unlockables:{achievements:["dark_lord","villain_ending"],titles:["어둠의 군주","자비로운 마왕"],costumes:["dark_armor","demon_wings"],gallery:["villain_coronation","dark_kingdom"]},bgm:"epic_villain_theme",specialEffects:["dark_aura","lightning"]},{id:"friendship_all",name:"영원한 우정",type:"friendship",priority:7,conditions:[{type:"affection",target:"sakura",value:50,comparison:"greater"},{type:"affection",target:"yuki",value:50,comparison:"greater"},{type:"affection",target:"hikari",value:50,comparison:"greater"},{type:"affection",target:"luna",value:50,comparison:"greater"},{type:"affection",target:"max",value:70,comparison:"less"}],title:"최고의 친구들",description:["졸업식 후, 모두가 모여 파티를 엽니다.",'"우리 평생 친구하자!" 다같이 건배를 외칩니다.',"연애는 안 됐지만, 최고의 친구들을 얻었습니다.","이것도 나름 행복한 결말입니다."],epilogue:["10년 후, 모두 각자의 분야에서 성공했습니다.","매년 동창회에서 만나 추억을 나눕니다.","우정은 영원합니다."],unlockables:{achievements:["friendship_forever"],titles:["모두의 친구","우정의 챔피언"],gallery:["friendship_party"]},bgm:"friendship_theme"}],Mx=()=>{const r=ke(),i=re(),[d,o]=v.useState(null),[u,m]=v.useState("intro"),[g,y]=v.useState(0),[p,x]=v.useState([]),[S,b]=v.useState(!1);v.useEffect(()=>{j(),D()},[]);const D=()=>{const M=localStorage.getItem("unlockedEndings");M&&x(JSON.parse(M))},O=M=>{const Y=[...new Set([...p,M])];x(Y),localStorage.setItem("unlockedEndings",JSON.stringify(Y))},C=M=>{switch(M.type){case"affection":if(M.target==="max"){const le=Math.max(...Object.values(i.characterStates).map(E=>E.affection));return z(le,M.value,M.comparison)}if(M.target==="max_affection"){const le=Math.max(...Object.values(i.characterStates).map(E=>E.affection));return z(le,M.value,M.comparison)}const Y=i.characterStates[M.target];return Y?z(Y.affection,M.value,M.comparison):!1;case"achievement":const B=i.achievements?.includes(M.target)||!1;return M.comparison==="equal"?B:!B;case"item":const ae=i.inventory.find(le=>le.id===M.target)?.quantity||0;return z(ae,M.value,M.comparison);case"quest":const G=i.completedQuests?.includes(M.target)?1:0;return z(G,M.value,M.comparison);case"stat":if(M.target==="dark_points")return z(i.darkPoints||0,M.value,M.comparison);if(M.target==="max_affection"){const le=Math.max(...Object.values(i.characterStates).map(E=>E.affection));return z(le,M.value,M.comparison)}return!1;default:return!1}},z=(M,Y,B)=>{switch(B){case"greater":return M>=Y;case"less":return M<Y;case"equal":return M===Y;default:return!1}},j=()=>{const Y=Jl.filter(B=>B.conditions.every(C)).sort((B,ae)=>ae.priority-B.priority)[0]||Jl.find(B=>B.id==="bad_general");o(Y),O(Y.id),Y.unlockables&&Y.unlockables.achievements&&i.unlockAchievements?.(Y.unlockables.achievements)},N=()=>{if(d)switch(u){case"intro":m("main"),y(0);break;case"main":g<d.description.length-1?y(g+1):(m("epilogue"),y(0));break;case"epilogue":g<d.epilogue.length-1?y(g+1):m("credits");break;case"credits":b(!0);break}},w=()=>{i.resetGame(),r("/")},T=()=>{const M={unlockedEndings:p,achievements:i.achievements,gallery:i.gallery};localStorage.setItem("newGamePlusData",JSON.stringify(M)),i.resetGame(),r("/character-creation")},A=M=>{switch(M){case"true":return"text-yellow-400 bg-yellow-900/20";case"normal":return"text-blue-400 bg-blue-900/20";case"bad":return"text-red-400 bg-red-900/20";case"secret":return"text-purple-400 bg-purple-900/20";case"friendship":return"text-green-400 bg-green-900/20";default:return"text-gray-400 bg-gray-900/20"}},k=()=>d?.specialEffects?d.specialEffects.map(M=>{switch(M){case"sakura_petals":return e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:[...Array(20)].map((Y,B)=>e.jsx("div",{className:"absolute animate-float",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*10}s`,animationDuration:`${10+Math.random()*10}s`},children:"🌸"},B))},M);case"snow_fall":return e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:[...Array(30)].map((Y,B)=>e.jsx("div",{className:"absolute animate-fall",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*5}s`},children:"❄️"},B))},M);case"golden_light":return e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-yellow-900/20 to-transparent animate-pulse"})},M);default:return null}}):null;return S?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:"엔딩 컬렉션"}),e.jsx("div",{className:"grid gap-4 mb-8",children:Jl.map(M=>{const Y=p.includes(M.id);return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${Y?`${A(M.type)} border-current`:"bg-gray-800 border-gray-700 text-gray-500"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-1",children:Y?M.name:"???"}),e.jsx("p",{className:"text-sm opacity-75",children:Y?M.title:"아직 보지 못한 엔딩"})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${A(M.type)}`,children:M.type.toUpperCase()})]}),Y&&M.unlockables&&e.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[M.unlockables.achievements?.map(B=>e.jsxs("span",{className:"text-xs bg-yellow-900/30 px-2 py-1 rounded",children:["🏆 ",B]},B)),M.unlockables.titles?.map(B=>e.jsxs("span",{className:"text-xs bg-blue-900/30 px-2 py-1 rounded",children:["📜 ",B]},B))]})]},M.id)})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("p",{className:"text-lg mb-4",children:["달성률: ",p.length," / ",Jl.length," (",Math.round(p.length/Jl.length*100),"%)"]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:w,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold",children:"새 게임 시작"}),p.length>0&&e.jsx("button",{onClick:T,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold",children:"뉴 게임+ 시작"}),e.jsx("button",{onClick:()=>r("/"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-semibold",children:"메인 메뉴"})]})]})]})}):d?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white relative overflow-hidden",children:[k(),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl w-full",children:[u==="intro"&&e.jsxs("div",{className:"text-center animate-fade-in",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4",children:"ENDING"}),e.jsx("h2",{className:`text-3xl mb-8 ${A(d.type)}`,children:d.name}),e.jsx("button",{onClick:N,className:"px-6 py-3 bg-white/10 hover:bg-white/20 rounded-lg",children:"계속하기"})]}),u==="main"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:d.title}),e.jsx("p",{className:"text-lg leading-relaxed mb-6",children:d.description[g]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm opacity-50",children:[g+1," / ",d.description.length]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded",children:"다음 ▶"})]})]}),u==="epilogue"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"에필로그"}),e.jsx("p",{className:"text-lg leading-relaxed mb-6 italic",children:d.epilogue[g]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm opacity-50",children:[g+1," / ",d.epilogue.length]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded",children:"다음 ▶"})]})]}),u==="credits"&&e.jsxs("div",{className:"text-center animate-fade-in",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8",children:"The End"}),d.unlockables&&e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"🎁 획득한 보상"}),d.unlockables.achievements&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-75 mb-2",children:"업적"}),e.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:d.unlockables.achievements.map(M=>e.jsxs("span",{className:"px-3 py-1 bg-yellow-900/30 rounded",children:["🏆 ",M]},M))})]}),d.unlockables.titles&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-75 mb-2",children:"칭호"}),e.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:d.unlockables.titles.map(M=>e.jsxs("span",{className:"px-3 py-1 bg-blue-900/30 rounded",children:["📜 ",M]},M))})]}),d.unlockables.costumes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-75 mb-2",children:"코스튬"}),e.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:d.unlockables.costumes.map(M=>e.jsxs("span",{className:"px-3 py-1 bg-purple-900/30 rounded",children:["👗 ",M]},M))})]})]}),e.jsx("button",{onClick:N,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 rounded-lg text-lg font-semibold",children:"엔딩 컬렉션 보기"})]})]})})]}):null},eo=[{id:"sakura_first_date",characterId:"sakura",name:"첫 데이트",icon:"💕",requiredAffection:30,location:"park",timeOfDay:"afternoon",season:"spring",description:"사쿠라와의 첫 공식 데이트",dialogue:["사쿠라가 수줍게 웃으며 당신에게 다가옵니다.",'"오늘... 날씨가 정말 좋네. 같이 산책할래?"',"벚꽃이 흩날리는 공원을 함께 걷습니다.",'"있잖아... 너와 이렇게 있으니까 정말 행복해."'],choices:[{text:"나도 정말 행복해",affectionChange:10,response:"사쿠라의 얼굴이 붉게 물들며 당신의 손을 살짝 잡습니다.",flag:"sakura_held_hands"},{text:"벚꽃이 정말 예쁘네",affectionChange:5,response:'"응... 하지만 난 네가 더 좋아." 사쿠라가 속삭입니다.'},{text:"배고픈데 뭐 먹으러 갈까?",affectionChange:-5,response:'"아... 그래, 그럼 카페라도 가자." 사쿠라가 조금 실망한 듯 합니다.'}],rewards:{memory:"sakura_first_date_memory",achievement:"first_date"},priority:10},{id:"sakura_confession",characterId:"sakura",name:"벚꽃 아래의 고백",icon:"🌸",requiredAffection:70,requiredFlags:["sakura_held_hands"],location:"school_rooftop",timeOfDay:"evening",season:"spring",description:"사쿠라가 중요한 이야기가 있다며 옥상으로 불렀습니다",dialogue:["석양이 지는 옥상, 사쿠라가 긴장한 표정으로 서 있습니다.",'"저기... 오늘 불러낸 이유는..."',"사쿠라가 심호흡을 하고 당신을 똑바로 바라봅니다.",'"나... 나는 네가 좋아! 정말 많이 좋아해!"','"처음 만났을 때부터 계속... 네 생각뿐이었어."'],choices:[{text:"나도 사쿠라를 사랑해",affectionChange:20,response:'사쿠라가 눈물을 글썽이며 당신에게 안깁니다. "정말... 정말 고마워!"',flag:"sakura_lovers",unlocks:"sakura_true_route"},{text:"좀 더 시간이 필요해",affectionChange:0,response:'"알았어... 기다릴게. 네 마음이 준비될 때까지." 사쿠라가 씁쓸하게 웃습니다.',flag:"sakura_pending"},{text:"미안, 친구로 남자",affectionChange:-30,response:'사쿠라의 눈에서 눈물이 흘러내립니다. "그래... 이해해. 미안해..."',flag:"sakura_rejected"}],rewards:{achievement:"love_confession",title:"사쿠라의 연인"},cg:"sakura_confession_cg",bgm:"romantic_theme",priority:20},{id:"yuki_library_encounter",characterId:"yuki",name:"도서관의 만남",icon:"📚",requiredAffection:25,location:"library",timeOfDay:"evening",description:"늦은 시간 도서관에서 유키를 발견했습니다",dialogue:["조용한 도서관, 유키가 책 더미에 파묻혀 있습니다.",'"어? 너도 이런 시간에 도서관에?"',"유키가 살짝 미소를 지으며 옆자리를 가리킵니다.",'"같이 공부할래? 혼자보다는... 나을 것 같아서."'],choices:[{text:"좋아, 같이 공부하자",affectionChange:8,response:'유키가 만족스럽게 미소 짓습니다. "고마워. 네가 있으니 집중이 더 잘 되네."',flag:"yuki_study_buddy"},{text:"뭘 읽고 있어?",affectionChange:10,response:'"고전 문학이야. 너도 관심 있어?" 유키가 열정적으로 책에 대해 설명합니다.',flag:"yuki_book_interest"},{text:"나는 그냥 지나가던 중이었어",affectionChange:-3,response:'"아... 그렇구나." 유키가 다시 책으로 시선을 돌립니다.'}],rewards:{items:[{id:"bookmark",quantity:1}],memory:"yuki_library_memory"},isRepeatable:!1,priority:8},{id:"yuki_snow_walk",characterId:"yuki",name:"눈 오는 날의 산책",icon:"❄️",requiredAffection:60,requiredFlags:["yuki_study_buddy"],season:"winter",timeOfDay:"evening",description:"유키가 눈 오는 날 산책을 제안했습니다",dialogue:["하얀 눈이 소복이 내리는 저녁, 유키가 당신 곁을 걷습니다.",'"눈... 정말 좋아해. 모든 게 조용하고 평화로워져."',"유키가 장갑 낀 손으로 눈을 받아봅니다.",'"너도... 이런 고요함이 좋아?"',"갑자기 유키가 당신을 바라봅니다.",'"있잖아... 너와 있으면 차가운 겨울도 따뜻하게 느껴져."'],choices:[{text:"손을 잡아준다",affectionChange:15,response:'유키가 놀라면서도 당신의 손을 꼭 잡습니다. "따뜻해... 고마워."',flag:"yuki_held_hands",unlocks:"yuki_romance_route"},{text:"목도리를 둘러준다",affectionChange:12,response:'"어... 고마워." 유키의 뺨이 붉게 물듭니다. "네 냄새가 나... 좋아."',flag:"yuki_scarf_given"},{text:"추우니까 들어가자",affectionChange:-5,response:'"벌써...? 그래, 알았어." 유키가 아쉬운 표정을 짓습니다.'}],rewards:{achievement:"winter_romance",memory:"yuki_snow_walk_memory"},cg:"yuki_snow_scene",bgm:"winter_melody",priority:15},{id:"hikari_sports_festival",characterId:"hikari",name:"체육대회의 영웅",icon:"🏃‍♀️",requiredAffection:20,location:"sports_field",timeOfDay:"afternoon",season:"autumn",description:"체육대회에서 히카리가 당신을 파트너로 선택했습니다",dialogue:['"야! 너 나랑 2인 3각 할래?" 히카리가 활짝 웃으며 다가옵니다.','"우리가 함께하면 무조건 1등이야!"',"경기가 시작되고, 히카리와 호흡을 맞춰 달립니다.",'"잘하고 있어! 조금만 더!"'],choices:[{text:"전력을 다해 달린다",affectionChange:10,response:'"우와! 우리가 1등이야! 역시 너야!" 히카리가 기뻐하며 당신을 안습니다.',flag:"hikari_sports_win"},{text:"히카리의 페이스에 맞춘다",affectionChange:7,response:'"고마워! 네가 맞춰줘서 편했어!" 히카리가 감사하게 웃습니다.'},{text:"넘어진다",affectionChange:5,response:'"괜찮아? 다치지 않았어?" 히카리가 걱정스럽게 당신을 일으킵니다.',flag:"hikari_cared"}],rewards:{items:[{id:"sports_medal",quantity:1}],achievement:"sports_partner"},priority:7},{id:"hikari_training_together",characterId:"hikari",name:"특별 훈련",icon:"💪",requiredAffection:50,requiredFlags:["hikari_sports_win"],location:"training_ground",timeOfDay:"morning",description:"히카리가 특별 훈련을 제안했습니다",dialogue:["이른 아침, 훈련장에 히카리가 기다리고 있습니다.",'"왔구나! 오늘은 특별한 훈련을 준비했어!"',"격렬한 훈련 후, 두 사람은 땀을 흘리며 쉬고 있습니다.",'"너... 정말 강해졌네. 처음 봤을 때보다 훨씬."',"히카리가 갑자기 진지한 표정으로 당신을 봅니다.",'"있잖아... 나는 강한 사람을 좋아해. 특히... 너처럼."'],choices:[{text:"나도 히카리가 좋아",affectionChange:18,response:'히카리의 얼굴이 새빨개집니다. "정... 정말? 그럼 우리... 연인?"',flag:"hikari_confession",unlocks:"hikari_romance_route"},{text:"좋은 훈련 파트너야",affectionChange:5,response:'"그래... 파트너. 응, 좋아!" 히카리가 조금 실망한 듯하지만 밝게 웃습니다.'},{text:"갑자기 무슨 소리야?",affectionChange:-10,response:'"아... 아무것도 아니야! 그냥 잊어!" 히카리가 당황하며 도망갑니다.',flag:"hikari_embarrassed"}],rewards:{achievement:"training_bond",title:"히카리의 파트너"},cg:"hikari_training_cg",priority:12},{id:"luna_moonlight_magic",characterId:"luna",name:"달빛의 마법",icon:"🌙",requiredAffection:35,location:"magic_tower",timeOfDay:"night",description:"루나가 특별한 마법을 보여주겠다고 했습니다",dialogue:["달이 밝은 밤, 마법 탑 꼭대기에 루나가 서 있습니다.",'"와줬구나. 오늘 보름달이라 특별한 마법을 보여주고 싶었어."',"루나가 주문을 외우자 주변에 환상적인 빛이 춤춥니다.",'"어때? 이건 너에게만 보여주는 특별한 마법이야."'],choices:[{text:"정말 아름다워",affectionChange:12,response:'"후후, 네가 좋아해줘서 기뻐." 루나가 신비롭게 미소 짓습니다.',flag:"luna_magic_appreciation"},{text:"나도 마법을 배우고 싶어",affectionChange:10,response:'"정말? 그럼 내가 가르쳐줄게. 특별히 너에게만." 루나가 당신의 손을 잡습니다.',flag:"luna_magic_student"},{text:"위험하지 않아?",affectionChange:-2,response:'"걱정하지 마. 내가 완벽하게 통제하고 있어." 루나가 조금 서운해 보입니다.'}],rewards:{items:[{id:"moon_charm",quantity:1}],memory:"luna_moonlight_memory"},cg:"luna_magic_scene",bgm:"mystical_night",priority:9},{id:"luna_stargazing",characterId:"luna",name:"별이 빛나는 밤에",icon:"⭐",requiredAffection:65,requiredFlags:["luna_magic_appreciation"],location:"observatory",timeOfDay:"night",season:"summer",description:"루나가 천문대에서 기다리고 있습니다",dialogue:["천문대에서 루나와 함께 별을 보고 있습니다.",'"저 별자리 보여? 그게 내가 제일 좋아하는 별자리야."','"전설에 따르면, 저 별자리 아래서 사랑을 고백하면 이루어진대."',"루나가 당신을 향해 돌아봅니다.",'"나... 너에게 하고 싶은 말이 있어."','"너를 만나고부터 내 세계가 더 밝아졌어. 너는 내 별이야."'],choices:[{text:"키스한다",affectionChange:25,response:'루나가 놀라면서도 키스를 받아들입니다. "나... 너를 사랑해."',flag:"luna_first_kiss",unlocks:"luna_true_route"},{text:"루나도 나의 별이야",affectionChange:20,response:'"정말...? 그럼 우리는 서로의 별인 거네." 루나가 행복하게 웃습니다.',flag:"luna_mutual_love"},{text:"별이 정말 예쁘다",affectionChange:0,response:'"그래... 별이 예쁘네." 루나가 씁쓸하게 웃으며 하늘을 봅니다.'}],rewards:{achievement:"star_crossed_lovers",title:"별의 연인",memory:"luna_confession_memory"},cg:"luna_stargazing_cg",bgm:"romantic_stars",priority:18},{id:"aria_music_lesson",characterId:"aria",name:"음악 레슨",icon:"🎵",requiredAffection:30,location:"music_room",timeOfDay:"afternoon",description:"아리아가 음악을 가르쳐주겠다고 제안했습니다",dialogue:["음악실에서 아리아가 피아노 앞에 앉아 있습니다.",'"와줬네! 오늘은 특별히 너에게 피아노를 가르쳐주고 싶어."',"아리아가 당신 옆에 앉아 손의 위치를 잡아줍니다.",'"이렇게... 부드럽게. 음악은 마음으로 연주하는 거야."'],choices:[{text:"손이 닿는 게 설렌다",affectionChange:12,response:'아리아가 살짝 붉어지며 "나... 나도야." 하고 속삭입니다.',flag:"aria_hand_touch"},{text:"열심히 배운다",affectionChange:8,response:'"잘하고 있어! 재능이 있는 것 같아!" 아리아가 칭찬합니다.'},{text:"음악은 어려워",affectionChange:-3,response:'"괜찮아, 천천히 하자." 아리아가 격려하지만 조금 실망한 듯합니다.'}],rewards:{items:[{id:"music_sheet",quantity:1}],memory:"aria_lesson_memory"},priority:8},{id:"aria_concert",characterId:"aria",name:"너를 위한 연주회",icon:"🎹",requiredAffection:75,requiredFlags:["aria_hand_touch"],location:"concert_hall",timeOfDay:"evening",description:"아리아가 특별한 연주회에 초대했습니다",dialogue:["텅 빈 콘서트홀, 아리아가 무대 위에서 당신을 바라봅니다.",'"오늘은... 너만을 위한 연주회야."',"아리아가 피아노를 연주하기 시작합니다. 감동적인 멜로디가 홀을 채웁니다.","연주가 끝나고 아리아가 당신에게 다가옵니다.",`"이 곡은... 너를 생각하며 작곡한 거야. 제목은 '나의 사랑'이야."`],choices:[{text:"나도 아리아를 사랑해",affectionChange:25,response:'아리아가 눈물을 글썽이며 당신을 꼭 안습니다. "드디어... 기다렸어!"',flag:"aria_lovers",unlocks:"aria_true_route"},{text:"감동적이야, 고마워",affectionChange:10,response:'"네가 좋아해줘서 다행이야." 아리아가 수줍게 웃습니다.'},{text:"부담스러워",affectionChange:-20,response:'아리아의 표정이 어두워집니다. "미... 미안. 내가 너무 앞서갔구나..."',flag:"aria_rejected"}],rewards:{achievement:"melody_of_love",title:"음악의 뮤즈",items:[{id:"love_song_cd",quantity:1}]},cg:"aria_concert_cg",bgm:"aria_love_theme",priority:20},{id:"beach_episode",characterId:"all",name:"여름 해변 이벤트",icon:"🏖️",requiredAffection:40,season:"summer",location:"beach",description:"모두와 함께 해변으로 놀러왔습니다",dialogue:["여름 해변, 모든 히로인들이 수영복을 입고 있습니다.",'"와! 바다다!" 히카리가 신나게 뛰어다닙니다.','"자외선 조심해야 해..." 유키가 그늘을 찾습니다.','"모래성 만들래?" 사쿠라가 제안합니다.','"수박 게임하자!" 루나가 수박을 들고 옵니다.'],choices:[{text:"히카리와 비치발리볼",affectionChange:8,response:"히카리와 신나게 비치발리볼을 즐깁니다.",flag:"beach_hikari"},{text:"유키와 파라솔 아래서",affectionChange:8,response:"유키와 조용히 책을 읽으며 시간을 보냅니다.",flag:"beach_yuki"},{text:"모두와 함께 물놀이",affectionChange:5,response:"모두와 함께 즐거운 시간을 보냅니다.",flag:"beach_all"}],rewards:{memory:"summer_beach_memory",achievement:"beach_episode",items:[{id:"beach_photo",quantity:1}]},cg:"beach_episode_cg",isRepeatable:!1,priority:15},{id:"festival_fireworks",characterId:"all",name:"축제의 불꽃",icon:"🎆",requiredAffection:50,season:"summer",location:"festival",timeOfDay:"night",description:"여름 축제에서 불꽃놀이를 보러 왔습니다",dialogue:["축제 현장, 모두가 유카타를 입고 있습니다.",'"불꽃놀이 곧 시작한대!" 사쿠라가 설렙니다.','"어떤 히로인과 함께 불꽃놀이를 볼까요?"'],choices:[{text:"사쿠라와 함께",affectionChange:10,response:'사쿠라와 손을 잡고 불꽃놀이를 봅니다. "최고의 여름이야..."',flag:"fireworks_sakura"},{text:"유키와 함께",affectionChange:10,response:'유키가 조용히 당신 어깨에 기댑니다. "이런 순간이 영원했으면..."',flag:"fireworks_yuki"},{text:"혼자 본다",affectionChange:-5,response:"혼자 불꽃놀이를 보니 조금 쓸쓸합니다.",flag:"fireworks_alone"}],rewards:{memory:"festival_memory",achievement:"summer_festival"},cg:"fireworks_cg",bgm:"festival_theme",priority:14},{id:"midnight_encounter",characterId:"mystery",name:"한밤의 만남",icon:"🌌",requiredAffection:80,requiredFlags:["explored_hidden_area"],location:"secret_garden",timeOfDay:"night",description:"비밀의 정원에서 누군가를 만났습니다",dialogue:["달빛이 비치는 비밀의 정원, 신비로운 소녀가 서 있습니다.",'"드디어 왔구나... 기다리고 있었어."','"나는 이 학교의 비밀을 지키는 자... 하지만 너에겐 특별히 보여주고 싶어."','"나와 함께 가겠어? 아무도 모르는 곳으로..."'],choices:[{text:"함께 간다",affectionChange:20,response:"신비로운 소녀가 미소 지으며 당신의 손을 잡습니다. 새로운 이야기가 시작됩니다.",flag:"mystery_route_start",unlocks:"hidden_character_route"},{text:"정체를 묻는다",affectionChange:5,response:'"때가 되면 알게 될 거야. 지금은... 그저 나를 믿어줘."',flag:"mystery_curious"},{text:"거절한다",affectionChange:-10,response:'"그래... 아직은 때가 아닌가 보네." 소녀가 사라집니다.',flag:"mystery_declined"}],rewards:{achievement:"hidden_encounter",memory:"mystery_meeting",title:"비밀의 수호자"},cg:"mystery_garden_cg",bgm:"mysterious_theme",priority:25}],Vb=()=>{const r=ke(),i=re(),[d,o]=v.useState(null),[u,m]=v.useState(0),[g,y]=v.useState(!1),[p,x]=v.useState([]),[S,b]=v.useState([]),[D,O]=v.useState([]),[C,z]=v.useState(null);v.useEffect(()=>{j(),A()},[i.characterStates]);const j=()=>{const G=localStorage.getItem("completedRomanceEvents");G&&x(JSON.parse(G));const le=localStorage.getItem("eventGallery");le&&O(JSON.parse(le))},N=G=>{const le=[...p,G];x(le),localStorage.setItem("completedRomanceEvents",JSON.stringify(le))},w=G=>{const le=[...new Set([...D,G])];O(le),localStorage.setItem("eventGallery",JSON.stringify(le))},T=G=>{if(p.includes(G.id)&&!G.isRepeatable)return!1;if(G.characterId==="all"||G.characterId==="mystery"){if(Math.max(...Object.values(i.characterStates).map(E=>E.affection||0))<G.requiredAffection)return!1}else{const le=i.characterStates[G.characterId];if(!le||(le.affection||0)<G.requiredAffection)return!1}if(G.requiredFlags){const le=i.eventFlags||[];if(!G.requiredFlags.every(E=>le.includes(E)))return!1}if(G.excludeFlags){const le=i.eventFlags||[];if(G.excludeFlags.some(E=>le.includes(E)))return!1}return!(G.location&&i.currentLocation!==G.location||G.timeOfDay&&i.timeOfDay!==G.timeOfDay||G.season&&i.season!==G.season)},A=()=>{const G=eo.filter(T).sort((le,E)=>(E.priority||0)-(le.priority||0));b(G)},k=G=>{o(G),m(0),y(!1),z(null),G.bgm},M=()=>{if(d){if(C){B();return}u<d.dialogue.length-1?m(u+1):y(!0)}},Y=G=>{if(d){if(d.characterId==="all"?Object.keys(i.characterStates).forEach(le=>{i.updateCharacterState(le,{affection:Math.min(100,(i.characterStates[le].affection||0)+G.affectionChange)})}):d.characterId!=="mystery"&&i.updateCharacterState(d.characterId,{affection:Math.min(100,(i.characterStates[d.characterId].affection||0)+G.affectionChange)}),G.flag){const le=i.eventFlags||[];i.setEventFlags?.([...le,G.flag])}G.unlocks&&console.log("Unlocked:",G.unlocks),z(G.response)}},B=()=>{if(d){if(d.isRepeatable||N(d.id),d.cg&&w(d.cg),d.rewards){if(d.rewards.items&&d.rewards.items.forEach(G=>{i.addToInventory(G.id,G.quantity)}),d.rewards.achievement,d.rewards.memory){const G=i.memories||[];i.setMemories?.([...G,d.rewards.memory])}if(d.rewards.title){const G=i.unlockedTitles||[];i.setUnlockedTitles?.([...G,d.rewards.title])}}o(null),m(0),y(!1),z(null),A()}},ae=()=>d?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-b from-pink-900/90 to-purple-900/90 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-black/30 p-4 border-b border-white/20",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:d.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:d.name}),e.jsx("p",{className:"text-pink-200 text-sm",children:d.description})]})]})})}),e.jsxs("div",{className:"p-6",children:[d.cg&&e.jsx("div",{className:"mb-4 rounded-lg overflow-hidden bg-black/20 p-2",children:e.jsx("div",{className:"aspect-video bg-gradient-to-br from-pink-600/20 to-purple-600/20 rounded flex items-center justify-center",children:e.jsxs("span",{className:"text-white/50 text-lg",children:["[CG: ",d.cg,"]"]})})}),!g&&!C&&e.jsxs("div",{className:"bg-black/30 rounded-lg p-6 mb-4",children:[e.jsx("p",{className:"text-white text-lg leading-relaxed",children:d.dialogue[u]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-white/50 text-sm",children:[u+1," / ",d.dialogue.length]}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-white transition-colors",children:"다음 ▶"})]})]}),C&&e.jsxs("div",{className:"bg-gradient-to-r from-pink-500/30 to-purple-500/30 rounded-lg p-6 mb-4",children:[e.jsx("p",{className:"text-white text-lg italic",children:C}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:B,className:"px-6 py-2 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 rounded-lg text-white font-semibold transition-all transform hover:scale-105",children:"계속하기"})})]}),g&&!C&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white/80 text-center mb-4",children:"어떻게 반응할까요?"}),d.choices.map((G,le)=>e.jsx("button",{onClick:()=>Y(G),className:"w-full p-4 bg-gradient-to-r from-pink-600/30 to-purple-600/30 hover:from-pink-600/50 hover:to-purple-600/50 rounded-lg text-white text-left transition-all transform hover:scale-[1.02] border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:G.text}),e.jsxs("span",{className:`text-sm ${G.affectionChange>0?"text-pink-300":G.affectionChange<0?"text-red-300":"text-gray-300"}`,children:[G.affectionChange>0&&"+",G.affectionChange!==0&&`${G.affectionChange} ❤️`]})]})},le))]})]})]})}):null;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pink-900 to-purple-900 p-4",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-white flex items-center gap-3",children:"💕 Romance Events"}),e.jsx("button",{onClick:()=>r("/game"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-white",children:"돌아가기"})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Available Events"}),S.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.slice(0,6).map(G=>e.jsx("button",{onClick:()=>k(G),className:"bg-gradient-to-br from-pink-600/30 to-purple-600/30 hover:from-pink-600/50 hover:to-purple-600/50 p-4 rounded-lg text-left transition-all transform hover:scale-105 border border-white/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-3xl",children:G.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-white",children:G.name}),e.jsx("p",{className:"text-sm text-pink-200 mt-1",children:G.description}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"px-2 py-1 bg-pink-500/30 rounded text-pink-200",children:[G.requiredAffection," ❤️"]}),G.season&&e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-blue-200",children:G.season})]})]})]})},G.id))}):e.jsx("p",{className:"text-white/60 text-center py-8",children:"현재 이용 가능한 이벤트가 없습니다. 캐릭터 호감도를 올리거나 특정 조건을 달성해보세요!"})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Event Gallery"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[p.map(G=>{const le=eo.find(E=>E.id===G);return le?e.jsx("div",{className:"bg-black/30 rounded-lg p-3 border border-white/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-2xl",children:le.icon}),e.jsx("p",{className:"text-sm text-white mt-2",children:le.name}),e.jsx("p",{className:"text-xs text-pink-200 mt-1",children:le.characterId==="all"?"전체":le.characterId})]})},G):null}),p.length===0&&e.jsx("div",{className:"col-span-full text-center text-white/40 py-8",children:"아직 완료한 이벤트가 없습니다"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-white/60",children:["Completed: ",p.length," / ",eo.length]})})]})]}),ae()]})},to=[{id:"secret_garden",name:"비밀의 정원",description:"시간이 멈춘 듯한 신비로운 정원",icon:"🌺",unlockCondition:{type:"puzzle",requirement:{puzzle:"moonlight_puzzle",solution:["moon","star","sun","moon"]}},rewards:{items:[{id:"eternal_flower",quantity:1}],achievement:"secret_garden_found",memory:"garden_discovery"},discovered:!1},{id:"underground_library",name:"지하 도서관",description:"금지된 지식이 잠들어 있는 고대 도서관",icon:"📜",unlockCondition:{type:"item",requirement:{item:"ancient_key",quantity:1}},rewards:{items:[{id:"forbidden_tome",quantity:1},{id:"wisdom_crystal",quantity:3}],achievement:"forbidden_knowledge"},discovered:!1},{id:"crystal_cavern",name:"수정 동굴",description:"무지개빛 수정이 가득한 비밀 동굴",icon:"💎",unlockCondition:{type:"sequence",requirement:{locations:["waterfall","cave_entrance","hidden_path"],timeLimit:300}},rewards:{items:[{id:"rainbow_crystal",quantity:5},{id:"crystal_armor",quantity:1}],achievement:"crystal_explorer"},discovered:!1},{id:"sky_palace",name:"천공의 궁전",description:"구름 위에 떠 있는 환상의 궁전",icon:"🏰",unlockCondition:{type:"achievement",requirement:{achievements:["master_of_sky","wind_walker"]}},rewards:{items:[{id:"wings_of_heaven",quantity:1}],characterUnlock:"celestia",achievement:"sky_ruler"},discovered:!1},{id:"time_rift",name:"시간의 균열",description:"과거와 미래가 교차하는 차원의 틈",icon:"⏳",unlockCondition:{type:"time",requirement:{realTime:"03:33:33",gameTime:"night"}},rewards:{items:[{id:"chronos_watch",quantity:1}],achievement:"time_traveler",memory:"time_rift_experience"},discovered:!1}],ao=[{id:"celestia",name:"셀레스티아",title:"천상의 수호자",description:"하늘에서 내려온 신비로운 존재",portrait:"👼",unlockCondition:{type:"hidden_area",requirement:{area:"sky_palace"}},initialAffection:50,specialAbility:"천상의 축복 - 모든 스탯 +20%",backstory:["천 년 전 하늘에서 내려온 천사","인간 세계를 관찰하며 수호하는 존재","당신에게서 특별한 운명을 느꼈다"]},{id:"shadow",name:"섀도우",title:"그림자 속의 소녀",description:"어둠 속에서만 나타나는 미스터리한 소녀",portrait:"🌑",unlockCondition:{type:"special",requirement:{condition:"defeat_shadow_boss_without_light"}},initialAffection:30,specialAbility:"그림자 은신 - 회피율 +50%",backstory:["빛과 어둠 사이에 존재하는 소녀","과거의 저주로 인해 그림자가 되었다","진정한 사랑만이 저주를 풀 수 있다"]},{id:"alice",name:"앨리스",title:"꿈의 여행자",description:"이상한 나라에서 온 호기심 많은 소녀",portrait:"🎩",unlockCondition:{type:"quest",requirement:{quest:"wonderland_mystery"}},initialAffection:40,specialAbility:"원더랜드 - 랜덤 이벤트 확률 +100%",backstory:["다른 차원에서 온 방문자","토끼를 쫓다가 이 세계로 오게 되었다","집으로 돌아가는 방법을 찾고 있다"]},{id:"phoenix",name:"피닉스",title:"불사조의 화신",description:"불꽃처럼 열정적인 전설의 소녀",portrait:"🔥",unlockCondition:{type:"affection",requirement:{character:"hikari",affection:100,specialItem:"phoenix_feather"}},initialAffection:60,specialAbility:"불사 - 전투 패배 시 1회 부활",backstory:["전설의 불사조가 인간의 모습으로 환생","천 년마다 다시 태어나는 운명","이번 생에서 진정한 사랑을 찾고자 한다"]}],so=[{id:"eternal_flower",name:"영원의 꽃",description:"시들지 않는 신비로운 꽃",rarity:"mythic",icon:"🌸",location:"secret_garden",hint:"시간이 멈춘 곳에서 피어난다",effects:[{type:"affection_boost",value:20},{type:"immortality",value:1}],lore:"신들의 정원에서만 피어나는 전설의 꽃. 이 꽃을 가진 자는 영원한 사랑을 얻는다고 한다."},{id:"dragon_heart",name:"용의 심장",description:"고대 용의 힘이 깃든 보석",rarity:"legendary",icon:"🐉",location:"dragon_lair",hint:"가장 강한 용을 쓰러뜨려야 한다",effects:[{type:"attack_power",value:100},{type:"fire_immunity",value:1}],lore:"천년을 산 용의 심장. 엄청난 힘을 부여하지만, 사용자의 마음도 용처럼 변할 수 있다."},{id:"chronos_watch",name:"크로노스의 시계",description:"시간을 조작할 수 있는 고대 유물",rarity:"unique",icon:"⌚",location:"time_rift",hint:"시간의 균열에서만 발견된다",effects:[{type:"time_control",value:1},{type:"speed",value:50}],lore:"시간의 신 크로노스가 만든 유일무이한 시계. 과거로 돌아가거나 시간을 멈출 수 있다."},{id:"soul_gem",name:"영혼의 보석",description:"영혼을 담을 수 있는 신비한 보석",rarity:"mythic",icon:"💠",location:"soul_altar",hint:"영혼의 제단에서 100개의 영혼을 바쳐야 한다",effects:[{type:"resurrection",value:1},{type:"soul_link",value:1}],lore:"죽은 자를 되살릴 수 있는 금단의 보석. 하지만 대가 없는 부활은 없다."},{id:"void_blade",name:"허공의 검",description:"차원을 가르는 검",rarity:"legendary",icon:"⚔️",location:"dimension_rift",hint:"차원의 틈새에서 1000번째 적을 쓰러뜨려라",effects:[{type:"dimension_slash",value:1},{type:"critical_rate",value:100}],lore:"공간 자체를 베어버리는 검. 이 검의 일격은 어떤 방어도 무시한다."}],Kl=[{id:"konami",code:"↑↑↓↓←→←→BA",hint:"고전 게임의 전설적인 코드",reward:"infinite_lives",used:!1},{id:"developer",code:"DEVMODE2025",hint:"개발자만 아는 비밀",reward:"debug_menu",used:!1},{id:"true_love",code:"LOVE∞ETERNAL",hint:"진정한 사랑의 암호",reward:"all_affection_max",used:!1},{id:"matrix",code:"THEREISNOSP00N",hint:"현실은 환상일 뿐",reward:"bullet_time",used:!1}],Zb=()=>{const r=ke(),i=re(),[d,o]=v.useState([]),[u,m]=v.useState([]),[g,y]=v.useState([]),[p,x]=v.useState([]),[S,b]=v.useState("areas"),[D,O]=v.useState(""),[C,z]=v.useState(null),[j,N]=v.useState(null);v.useEffect(()=>{w()},[]);const w=()=>{const E=localStorage.getItem("discoveredHiddenAreas"),U=localStorage.getItem("unlockedHiddenCharacters"),R=localStorage.getItem("foundHiddenItems"),q=localStorage.getItem("usedSecretCodes");E&&o(JSON.parse(E)),U&&m(JSON.parse(U)),R&&y(JSON.parse(R)),q&&x(JSON.parse(q))},T=(E,U)=>{switch(E){case"area":const R=[...d,U];o(R),localStorage.setItem("discoveredHiddenAreas",JSON.stringify(R));break;case"character":const q=[...u,U];m(q),localStorage.setItem("unlockedHiddenCharacters",JSON.stringify(q));break;case"item":const h=[...g,U];y(h),localStorage.setItem("foundHiddenItems",JSON.stringify(h));break;case"code":const H=[...p,U];x(H),localStorage.setItem("usedSecretCodes",JSON.stringify(H));break}},A=E=>{const U=E.unlockCondition;switch(U.type){case"item":const R=i.inventory.find(H=>H.id===U.requirement.item);return R?R.quantity>=U.requirement.quantity:!1;case"achievement":return U.requirement.achievements.every(H=>i.achievements?.includes(H));case"puzzle":return d.includes(E.id);case"time":const q=new Date;return`${String(q.getHours()).padStart(2,"0")}:${String(q.getMinutes()).padStart(2,"0")}:${String(q.getSeconds()).padStart(2,"0")}`===U.requirement.realTime&&i.timeOfDay===U.requirement.gameTime;case"sequence":return!1;default:return!1}},k=E=>{if(d.includes(E.id)){alert("이미 발견한 지역입니다!");return}if(E.unlockCondition.type==="puzzle"){N({area:E,puzzle:E.unlockCondition.requirement});return}A(E)?M(E):(alert("아직 조건을 충족하지 못했습니다."),z(E.id))},M=E=>{T("area",E.id),E.rewards.items&&E.rewards.items.forEach(U=>{i.addToInventory(U.id,U.quantity)}),E.rewards.achievement,E.rewards.characterUnlock&&T("character",E.rewards.characterUnlock),alert(`🎉 ${E.name} 발견! 보상을 획득했습니다!`)},Y=E=>{const U=E.unlockCondition;switch(U.type){case"hidden_area":return d.includes(U.requirement.area);case"quest":return i.completedQuests?.includes(U.requirement.quest)||!1;case"affection":const R=i.characterStates[U.requirement.character],q=i.inventory.find(h=>h.id===U.requirement.specialItem);return R&&R.affection>=U.requirement.affection&&!!q;case"special":return u.includes(E.id);default:return!1}},B=E=>{if(u.includes(E.id)){alert("이미 해금한 캐릭터입니다!");return}Y(E)?(T("character",E.id),i.updateCharacterState(E.id,{name:E.name,affection:E.initialAffection,mood:"neutral"}),alert(`🎉 숨겨진 캐릭터 ${E.name} 해금!`)):(alert("아직 조건을 충족하지 못했습니다."),z(E.id))},ae=()=>{const E=Kl.find(U=>U.code===D.toUpperCase());if(!E){alert("잘못된 코드입니다.");return}if(p.includes(E.id)){alert("이미 사용한 코드입니다.");return}switch(T("code",E.id),E.reward){case"infinite_lives":i.setLives?.(99999);break;case"all_affection_max":Object.keys(i.characterStates).forEach(U=>{i.updateCharacterState(U,{affection:100})});break;case"debug_menu":i.setDebugMode?.(!0);break;case"bullet_time":i.setTimeScale?.(.5);break}alert(`✨ 비밀 코드 활성화! ${E.hint}`),O("")},G=E=>{if(!j)return;const U=j.puzzle.solution.join(","),R=E.join(",");U===R?(M(j.area),N(null)):alert("퍼즐이 틀렸습니다. 다시 시도해보세요.")},le=()=>j?e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-b from-purple-900 to-black rounded-xl max-w-2xl w-full p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"🧩 퍼즐을 풀어라!"}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6 mb-6",children:[e.jsx("p",{className:"text-white mb-4",children:"달빛 퍼즐: 올바른 순서로 상징을 배열하세요"}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:["moon","star","sun","cloud"].map(E=>e.jsx("button",{className:"p-4 bg-purple-600/50 hover:bg-purple-600/70 rounded-lg text-white text-2xl transition-all",onClick:()=>{},children:E==="moon"?"🌙":E==="star"?"⭐":E==="sun"?"☀️":"☁️"},E))}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:()=>G(["moon","star","sun","moon"]),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg text-white font-semibold mr-4",children:"제출"}),e.jsx("button",{onClick:()=>N(null),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg text-white font-semibold",children:"취소"})]})]})]})}):null;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-black to-purple-900 p-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-purple-300 flex items-center gap-3",children:"🔮 Hidden Content"}),e.jsx("button",{onClick:()=>r("/game"),className:"px-4 py-2 bg-purple-600/30 hover:bg-purple-600/50 rounded-lg text-white",children:"돌아가기"})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["areas","characters","items","codes"].map(E=>e.jsx("button",{onClick:()=>b(E),className:`px-6 py-3 rounded-lg font-semibold transition-all ${S===E?"bg-purple-600 text-white":"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"}`,children:E==="areas"?"🗺️ 숨겨진 지역":E==="characters"?"👤 비밀 캐릭터":E==="items"?"💎 전설 아이템":"🔐 시크릿 코드"},E))}),S==="areas"&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:to.map(E=>{const U=d.includes(E.id);return e.jsxs("div",{className:`relative rounded-xl p-6 transition-all transform hover:scale-105 ${U?"bg-gradient-to-br from-purple-600/50 to-pink-600/50 border-2 border-purple-400":"bg-gray-800/50 border-2 border-gray-700"}`,children:[U&&e.jsx("div",{className:"absolute top-2 right-2 text-yellow-400",children:"✨ Discovered"}),e.jsx("div",{className:"text-4xl mb-3",children:E.icon}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:U?E.name:"???"}),e.jsx("p",{className:"text-purple-200 text-sm mb-4",children:U?E.description:"미지의 장소"}),!U&&e.jsx("button",{onClick:()=>k(E),className:"w-full px-4 py-2 bg-purple-600/50 hover:bg-purple-600/70 rounded-lg text-white",children:"탐험하기"}),C===E.id&&!U&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/30 rounded text-yellow-300 text-xs",children:["💡 힌트: ",E.unlockCondition.type==="item"?"특별한 열쇠가 필요합니다":E.unlockCondition.type==="puzzle"?"퍼즐을 풀어야 합니다":E.unlockCondition.type==="time"?"특정 시간에만 열립니다":"특별한 조건이 필요합니다"]}),U&&E.rewards&&e.jsxs("div",{className:"mt-4 p-3 bg-black/30 rounded",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-2",children:"획득 보상:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.rewards.items?.map(R=>e.jsxs("span",{className:"text-xs bg-purple-600/30 px-2 py-1 rounded",children:[R.id," x",R.quantity]},R.id)),E.rewards.achievement&&e.jsxs("span",{className:"text-xs bg-yellow-600/30 px-2 py-1 rounded",children:["🏆 ",E.rewards.achievement]})]})]})]},E.id)})}),S==="characters"&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:ao.map(E=>{const U=u.includes(E.id);return e.jsxs("div",{className:`relative rounded-xl p-6 transition-all ${U?"bg-gradient-to-br from-pink-600/50 to-purple-600/50 border-2 border-pink-400":"bg-gray-800/50 border-2 border-gray-700"}`,children:[U&&e.jsx("div",{className:"absolute top-2 right-2 text-yellow-400",children:"⭐ Unlocked"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:E.portrait}),e.jsx("h3",{className:"text-xl font-bold text-white",children:U?E.name:"???"}),e.jsx("p",{className:"text-purple-300 text-sm",children:U?E.title:"숨겨진 캐릭터"})]}),U&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-white text-sm mb-3",children:E.description}),e.jsxs("div",{className:"p-3 bg-black/30 rounded mb-3",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-1",children:"특수 능력:"}),e.jsx("p",{className:"text-white text-sm",children:E.specialAbility})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-pink-300",children:["초기 호감도: ",E.initialAffection]}),e.jsx("button",{onClick:()=>r(`/character/${E.id}`),className:"px-3 py-1 bg-pink-600/50 hover:bg-pink-600/70 rounded text-white text-sm",children:"만나기"})]})]}),!U&&e.jsx("button",{onClick:()=>B(E),className:"w-full px-4 py-2 bg-purple-600/50 hover:bg-purple-600/70 rounded-lg text-white",children:"해금 시도"}),C===E.id&&!U&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-900/30 rounded text-yellow-300 text-xs",children:"💡 힌트: 특별한 조건을 달성해야 합니다"})]},E.id)})}),S==="items"&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:so.map(E=>{const U=g.includes(E.id);return e.jsxs("div",{className:`rounded-xl p-6 transition-all ${U?`bg-gradient-to-br ${E.rarity==="mythic"?"from-red-600/50 to-orange-600/50":E.rarity==="legendary"?"from-yellow-600/50 to-amber-600/50":"from-blue-600/50 to-cyan-600/50"} border-2 ${E.rarity==="mythic"?"border-red-400":E.rarity==="legendary"?"border-yellow-400":"border-blue-400"}`:"bg-gray-800/50 border-2 border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"text-4xl",children:E.icon}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${E.rarity==="mythic"?"bg-red-900/50 text-red-300":E.rarity==="legendary"?"bg-yellow-900/50 text-yellow-300":"bg-blue-900/50 text-blue-300"}`,children:E.rarity.toUpperCase()})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:U?E.name:"???"}),U?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-purple-200 text-sm mb-3",children:E.description}),e.jsxs("div",{className:"p-3 bg-black/30 rounded mb-3",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-2",children:"효과:"}),E.effects.map((R,q)=>e.jsxs("p",{className:"text-white text-sm",children:["• ",R.type,": +",R.value]},q))]}),e.jsxs("div",{className:"p-3 bg-purple-900/30 rounded",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-1",children:"전설:"}),e.jsx("p",{className:"text-white text-xs italic",children:E.lore})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"미발견 아이템"}),e.jsx("div",{className:"p-3 bg-yellow-900/30 rounded",children:e.jsxs("p",{className:"text-yellow-300 text-xs",children:["💡 힌트: ",E.hint]})})]})]},E.id)})}),S==="codes"&&e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-purple-900/30 rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"시크릿 코드 입력"}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("input",{type:"text",value:D,onChange:E=>O(E.target.value),placeholder:"비밀 코드를 입력하세요...",className:"flex-1 px-4 py-3 bg-black/50 border border-purple-500 rounded-lg text-white placeholder-gray-400",onKeyPress:E=>E.key==="Enter"&&ae()}),e.jsx("button",{onClick:ae,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg text-white font-semibold",children:"입력"})]}),e.jsx("div",{className:"text-center text-purple-300 text-sm",children:"힌트: 특별한 조합이나 단어를 입력해보세요"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"발견한 코드"}),Kl.map(E=>{const U=p.includes(E.id);return e.jsx("div",{className:`p-4 rounded-lg ${U?"bg-green-900/30 border border-green-500":"bg-gray-800/30 border border-gray-700"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:U?E.code:"???"}),e.jsx("p",{className:"text-purple-300 text-sm mt-1",children:E.hint})]}),U&&e.jsx("span",{className:"text-green-400",children:"✓ 사용됨"})]})},E.id)})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-purple-300",children:["사용한 코드: ",p.length," / ",Kl.length]})})]}),e.jsxs("div",{className:"mt-8 bg-black/30 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"전체 진행도"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"🗺️"}),e.jsx("p",{className:"text-purple-300",children:"숨겨진 지역"}),e.jsxs("p",{className:"text-white font-bold",children:[d.length," / ",to.length]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"👤"}),e.jsx("p",{className:"text-purple-300",children:"비밀 캐릭터"}),e.jsxs("p",{className:"text-white font-bold",children:[u.length," / ",ao.length]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"💎"}),e.jsx("p",{className:"text-purple-300",children:"전설 아이템"}),e.jsxs("p",{className:"text-white font-bold",children:[g.length," / ",so.length]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"🔐"}),e.jsx("p",{className:"text-purple-300",children:"시크릿 코드"}),e.jsxs("p",{className:"text-white font-bold",children:[p.length," / ",Kl.length]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"h-4 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-pink-600 transition-all duration-1000",style:{width:`${(d.length+u.length+g.length+p.length)/(to.length+ao.length+so.length+Kl.length)*100}%`}})})})]})]}),le()]})};function Jb(){const[r,i]=v.useState(!1),[d,o]=v.useState(null),u=re(p=>p.gameEnding);v.useEffect(()=>{const p=localStorage.getItem("user");p&&(o(JSON.parse(p)),i(!0))},[]);const m=(p,x)=>{if(p==="demo"&&x==="password"){const S={username:p,email:"demo@example.com"};return i(!0),o(S),localStorage.setItem("user",JSON.stringify(S)),!0}return!1},g=p=>{const x={username:p.username,email:p.email};return i(!0),o(x),localStorage.setItem("user",JSON.stringify(x)),!0},y=()=>{i(!1),o(null),localStorage.removeItem("user")};return e.jsx(Qp,{children:e.jsx("div",{className:"min-h-screen",children:e.jsxs(vp,{children:[e.jsx(pe,{path:"/",element:e.jsx(Kx,{isLoggedIn:r,user:d,onLogout:y})}),e.jsx(pe,{path:"/login",element:e.jsx(Tg,{onLogin:m})}),e.jsx(pe,{path:"/account-creation",element:e.jsx(eb,{onCreateAccount:g})}),e.jsx(pe,{path:"/character-creation",element:e.jsx(Dg,{})}),e.jsx(pe,{path:"/game-info",element:e.jsx(tb,{})}),e.jsx(pe,{path:"/game-intro",element:e.jsx(Mb,{})}),e.jsx(pe,{path:"/settings",element:e.jsx(ab,{})}),e.jsx(pe,{path:"/api-test",element:e.jsx(wb,{})}),e.jsx(pe,{path:"/dungeon-selection",element:e.jsx(Lg,{})}),e.jsx(pe,{path:"/dungeon",element:e.jsx(Hg,{})}),e.jsx(pe,{path:"/diary",element:e.jsx(Bg,{})}),e.jsx(pe,{path:"/heroine-stories",element:e.jsx($g,{})}),e.jsx(pe,{path:"/save-load",element:e.jsx(Gg,{})}),e.jsx(pe,{path:"/shopping",element:e.jsx(Yg,{})}),e.jsx(pe,{path:"/characters",element:e.jsx(Px,{})}),e.jsx(pe,{path:"/achievements",element:e.jsx(Rb,{})}),e.jsx(pe,{path:"/collection",element:e.jsx(sb,{})}),e.jsx(pe,{path:"/quests",element:e.jsx(lb,{})}),e.jsx(pe,{path:"/calendar",element:e.jsx(nb,{})}),e.jsx(pe,{path:"/crafting",element:e.jsx(ib,{})}),e.jsx(pe,{path:"/guild",element:e.jsx(rb,{})}),e.jsx(pe,{path:"/pets",element:e.jsx(cb,{})}),e.jsx(pe,{path:"/fishing",element:e.jsx(ob,{})}),e.jsx(pe,{path:"/farming",element:e.jsx(db,{})}),e.jsx(pe,{path:"/housing",element:e.jsx(ub,{})}),e.jsx(pe,{path:"/game-menu",element:e.jsx(mb,{})}),e.jsx(pe,{path:"/tutorial",element:e.jsx(xb,{onComplete:()=>{},onSkip:()=>{}})}),e.jsx(pe,{path:"/card-matching",element:e.jsx(hb,{})}),e.jsx(pe,{path:"/quiz",element:e.jsx(fb,{onComplete:p=>console.log("Quiz completed with score:",p)})}),e.jsx(pe,{path:"/rhythm",element:e.jsx(pb,{})}),e.jsx(pe,{path:"/puzzle",element:e.jsx(gb,{})}),e.jsx(pe,{path:"/pvp",element:e.jsx(bb,{})}),e.jsx(pe,{path:"/social",element:e.jsx(yb,{})}),e.jsx(pe,{path:"/enhancement",element:e.jsx(vb,{})}),e.jsx(pe,{path:"/clubs",element:e.jsx(Cb,{})}),e.jsx(pe,{path:"/heroines",element:e.jsx(Eb,{})}),e.jsx(pe,{path:"/character-meeting",element:e.jsx(Ab,{})}),e.jsx(pe,{path:"/minigames",element:e.jsx(Tb,{})}),e.jsx(pe,{path:"/weather",element:e.jsx(Db,{})}),e.jsx(pe,{path:"/dialogue",element:e.jsx(Yb,{})}),e.jsx(pe,{path:"/gifts",element:e.jsx(Qb,{})}),e.jsx(pe,{path:"/seasonal-events",element:e.jsx(Xb,{})}),e.jsx(pe,{path:"/ending",element:e.jsx(Mx,{})}),e.jsx(pe,{path:"/romance-events",element:e.jsx(Vb,{})}),e.jsx(pe,{path:"/hidden-content",element:e.jsx(Zb,{})}),e.jsx(pe,{path:"/game",element:u?e.jsx(Mx,{}):e.jsx(Eg,{})}),e.jsx(pe,{path:"*",element:e.jsx(bp,{to:"/",replace:!0})})]})})})}M0.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(Jb,{})}));
