(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const m of u)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function d(u){const m={};return u.integrity&&(m.integrity=u.integrity),u.referrerPolicy&&(m.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?m.credentials="include":u.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(u){if(u.ep)return;u.ep=!0;const m=d(u);fetch(u.href,m)}})();function y0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hc={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function v0(){if(cx)return Gl;cx=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function d(o,u,m){var g=null;if(m!==void 0&&(g=""+m),u.key!==void 0&&(g=""+u.key),"key"in u){m={};for(var y in u)y!=="key"&&(m[y]=u[y])}else m=u;return u=m.ref,{$$typeof:r,type:o,key:g,ref:u!==void 0?u:null,props:m}}return Gl.Fragment=i,Gl.jsx=d,Gl.jsxs=d,Gl}var ox;function j0(){return ox||(ox=1,Hc.exports=v0()),Hc.exports}var e=j0(),Lc={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function N0(){if(dx)return ge;dx=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.iterator;function D(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,z={};function j(L,Z,P){this.props=L,this.context=Z,this.refs=z,this.updater=P||O}j.prototype.isReactComponent={},j.prototype.setState=function(L,Z){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Z,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function N(){}N.prototype=j.prototype;function w(L,Z,P){this.props=L,this.context=Z,this.refs=z,this.updater=P||O}var T=w.prototype=new N;T.constructor=w,C(T,j.prototype),T.isPureReactComponent=!0;var A=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function Y(L,Z,P,X,ne,ce){return P=ce.ref,{$$typeof:r,type:L,key:Z,ref:P!==void 0?P:null,props:ce}}function B(L,Z){return Y(L.type,Z,void 0,void 0,void 0,L.props)}function ae(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function G(L){var Z={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(P){return Z[P]})}var le=/\/+/g;function E(L,Z){return typeof L=="object"&&L!==null&&L.key!=null?G(""+L.key):Z.toString(36)}function U(){}function R(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(U,U):(L.status="pending",L.then(function(Z){L.status==="pending"&&(L.status="fulfilled",L.value=Z)},function(Z){L.status==="pending"&&(L.status="rejected",L.reason=Z)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function q(L,Z,P,X,ne){var ce=typeof L;(ce==="undefined"||ce==="boolean")&&(L=null);var oe=!1;if(L===null)oe=!0;else switch(ce){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(L.$$typeof){case r:case i:oe=!0;break;case S:return oe=L._init,q(oe(L._payload),Z,P,X,ne)}}if(oe)return ne=ne(L),oe=X===""?"."+E(L,0):X,A(ne)?(P="",oe!=null&&(P=oe.replace(le,"$&/")+"/"),q(ne,Z,P,"",function(ze){return ze})):ne!=null&&(ae(ne)&&(ne=B(ne,P+(ne.key==null||L&&L.key===ne.key?"":(""+ne.key).replace(le,"$&/")+"/")+oe)),Z.push(ne)),1;oe=0;var we=X===""?".":X+":";if(A(L))for(var he=0;he<L.length;he++)X=L[he],ce=we+E(X,he),oe+=q(X,Z,P,ce,ne);else if(he=D(L),typeof he=="function")for(L=he.call(L),he=0;!(X=L.next()).done;)X=X.value,ce=we+E(X,he++),oe+=q(X,Z,P,ce,ne);else if(ce==="object"){if(typeof L.then=="function")return q(R(L),Z,P,X,ne);throw Z=String(L),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return oe}function h(L,Z,P){if(L==null)return L;var X=[],ne=0;return q(L,X,"","",function(ce){return Z.call(P,ce,ne++)}),X}function H(L){if(L._status===-1){var Z=L._result;Z=Z(),Z.then(function(P){(L._status===0||L._status===-1)&&(L._status=1,L._result=P)},function(P){(L._status===0||L._status===-1)&&(L._status=2,L._result=P)}),L._status===-1&&(L._status=0,L._result=Z)}if(L._status===1)return L._result.default;throw L._result}var J=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function ie(){}return ge.Children={map:h,forEach:function(L,Z,P){h(L,function(){Z.apply(this,arguments)},P)},count:function(L){var Z=0;return h(L,function(){Z++}),Z},toArray:function(L){return h(L,function(Z){return Z})||[]},only:function(L){if(!ae(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ge.Component=j,ge.Fragment=d,ge.Profiler=u,ge.PureComponent=w,ge.StrictMode=o,ge.Suspense=p,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ge.__COMPILER_RUNTIME={__proto__:null,c:function(L){return k.H.useMemoCache(L)}},ge.cache=function(L){return function(){return L.apply(null,arguments)}},ge.cloneElement=function(L,Z,P){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var X=C({},L.props),ne=L.key,ce=void 0;if(Z!=null)for(oe in Z.ref!==void 0&&(ce=void 0),Z.key!==void 0&&(ne=""+Z.key),Z)!M.call(Z,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&Z.ref===void 0||(X[oe]=Z[oe]);var oe=arguments.length-2;if(oe===1)X.children=P;else if(1<oe){for(var we=Array(oe),he=0;he<oe;he++)we[he]=arguments[he+2];X.children=we}return Y(L.type,ne,void 0,void 0,ce,X)},ge.createContext=function(L){return L={$$typeof:g,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:m,_context:L},L},ge.createElement=function(L,Z,P){var X,ne={},ce=null;if(Z!=null)for(X in Z.key!==void 0&&(ce=""+Z.key),Z)M.call(Z,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ne[X]=Z[X]);var oe=arguments.length-2;if(oe===1)ne.children=P;else if(1<oe){for(var we=Array(oe),he=0;he<oe;he++)we[he]=arguments[he+2];ne.children=we}if(L&&L.defaultProps)for(X in oe=L.defaultProps,oe)ne[X]===void 0&&(ne[X]=oe[X]);return Y(L,ce,void 0,void 0,null,ne)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(L){return{$$typeof:y,render:L}},ge.isValidElement=ae,ge.lazy=function(L){return{$$typeof:S,_payload:{_status:-1,_result:L},_init:H}},ge.memo=function(L,Z){return{$$typeof:x,type:L,compare:Z===void 0?null:Z}},ge.startTransition=function(L){var Z=k.T,P={};k.T=P;try{var X=L(),ne=k.S;ne!==null&&ne(P,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(ie,J)}catch(ce){J(ce)}finally{k.T=Z}},ge.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ge.use=function(L){return k.H.use(L)},ge.useActionState=function(L,Z,P){return k.H.useActionState(L,Z,P)},ge.useCallback=function(L,Z){return k.H.useCallback(L,Z)},ge.useContext=function(L){return k.H.useContext(L)},ge.useDebugValue=function(){},ge.useDeferredValue=function(L,Z){return k.H.useDeferredValue(L,Z)},ge.useEffect=function(L,Z,P){var X=k.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(L,Z)},ge.useId=function(){return k.H.useId()},ge.useImperativeHandle=function(L,Z,P){return k.H.useImperativeHandle(L,Z,P)},ge.useInsertionEffect=function(L,Z){return k.H.useInsertionEffect(L,Z)},ge.useLayoutEffect=function(L,Z){return k.H.useLayoutEffect(L,Z)},ge.useMemo=function(L,Z){return k.H.useMemo(L,Z)},ge.useOptimistic=function(L,Z){return k.H.useOptimistic(L,Z)},ge.useReducer=function(L,Z,P){return k.H.useReducer(L,Z,P)},ge.useRef=function(L){return k.H.useRef(L)},ge.useState=function(L){return k.H.useState(L)},ge.useSyncExternalStore=function(L,Z,P){return k.H.useSyncExternalStore(L,Z,P)},ge.useTransition=function(){return k.H.useTransition()},ge.version="19.1.1",ge}var ux;function ro(){return ux||(ux=1,Lc.exports=N0()),Lc.exports}var v=ro();const at=y0(v);var Bc={exports:{}},Yl={},Uc={exports:{}},$c={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mx;function w0(){return mx||(mx=1,(function(r){function i(h,H){var J=h.length;h.push(H);e:for(;0<J;){var ie=J-1>>>1,L=h[ie];if(0<u(L,H))h[ie]=H,h[J]=L,J=ie;else break e}}function d(h){return h.length===0?null:h[0]}function o(h){if(h.length===0)return null;var H=h[0],J=h.pop();if(J!==H){h[0]=J;e:for(var ie=0,L=h.length,Z=L>>>1;ie<Z;){var P=2*(ie+1)-1,X=h[P],ne=P+1,ce=h[ne];if(0>u(X,J))ne<L&&0>u(ce,X)?(h[ie]=ce,h[ne]=J,ie=ne):(h[ie]=X,h[P]=J,ie=P);else if(ne<L&&0>u(ce,J))h[ie]=ce,h[ne]=J,ie=ne;else break e}}return H}function u(h,H){var J=h.sortIndex-H.sortIndex;return J!==0?J:h.id-H.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;r.unstable_now=function(){return m.now()}}else{var g=Date,y=g.now();r.unstable_now=function(){return g.now()-y}}var p=[],x=[],S=1,b=null,D=3,O=!1,C=!1,z=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(h){for(var H=d(x);H!==null;){if(H.callback===null)o(x);else if(H.startTime<=h)o(x),H.sortIndex=H.expirationTime,i(p,H);else break;H=d(x)}}function k(h){if(z=!1,A(h),!C)if(d(p)!==null)C=!0,M||(M=!0,E());else{var H=d(x);H!==null&&q(k,H.startTime-h)}}var M=!1,Y=-1,B=5,ae=-1;function G(){return j?!0:!(r.unstable_now()-ae<B)}function le(){if(j=!1,M){var h=r.unstable_now();ae=h;var H=!0;try{e:{C=!1,z&&(z=!1,w(Y),Y=-1),O=!0;var J=D;try{t:{for(A(h),b=d(p);b!==null&&!(b.expirationTime>h&&G());){var ie=b.callback;if(typeof ie=="function"){b.callback=null,D=b.priorityLevel;var L=ie(b.expirationTime<=h);if(h=r.unstable_now(),typeof L=="function"){b.callback=L,A(h),H=!0;break t}b===d(p)&&o(p),A(h)}else o(p);b=d(p)}if(b!==null)H=!0;else{var Z=d(x);Z!==null&&q(k,Z.startTime-h),H=!1}}break e}finally{b=null,D=J,O=!1}H=void 0}}finally{H?E():M=!1}}}var E;if(typeof T=="function")E=function(){T(le)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,R=U.port2;U.port1.onmessage=le,E=function(){R.postMessage(null)}}else E=function(){N(le,0)};function q(h,H){Y=N(function(){h(r.unstable_now())},H)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(h){h.callback=null},r.unstable_forceFrameRate=function(h){0>h||125<h?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<h?Math.floor(1e3/h):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(h){switch(D){case 1:case 2:case 3:var H=3;break;default:H=D}var J=D;D=H;try{return h()}finally{D=J}},r.unstable_requestPaint=function(){j=!0},r.unstable_runWithPriority=function(h,H){switch(h){case 1:case 2:case 3:case 4:case 5:break;default:h=3}var J=D;D=h;try{return H()}finally{D=J}},r.unstable_scheduleCallback=function(h,H,J){var ie=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,h){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=J+L,h={id:S++,callback:H,priorityLevel:h,startTime:J,expirationTime:L,sortIndex:-1},J>ie?(h.sortIndex=J,i(x,h),d(p)===null&&h===d(x)&&(z?(w(Y),Y=-1):z=!0,q(k,J-ie))):(h.sortIndex=L,i(p,h),C||O||(C=!0,M||(M=!0,E()))),h},r.unstable_shouldYield=G,r.unstable_wrapCallback=function(h){var H=D;return function(){var J=D;D=H;try{return h.apply(this,arguments)}finally{D=J}}}})($c)),$c}var xx;function k0(){return xx||(xx=1,Uc.exports=w0()),Uc.exports}var Gc={exports:{}},nt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function S0(){if(hx)return nt;hx=1;var r=ro();function i(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)x+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var o={d:{f:d,r:function(){throw Error(i(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},u=Symbol.for("react.portal");function m(p,x,S){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:p,containerInfo:x,implementation:S}}var g=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return nt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,nt.createPortal=function(p,x){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(i(299));return m(p,x,null,S)},nt.flushSync=function(p){var x=g.T,S=o.p;try{if(g.T=null,o.p=2,p)return p()}finally{g.T=x,o.p=S,o.d.f()}},nt.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(p,x))},nt.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},nt.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var S=x.as,b=y(S,x.crossOrigin),D=typeof x.integrity=="string"?x.integrity:void 0,O=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;S==="style"?o.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:b,integrity:D,fetchPriority:O}):S==="script"&&o.d.X(p,{crossOrigin:b,integrity:D,fetchPriority:O,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},nt.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var S=y(x.as,x.crossOrigin);o.d.M(p,{crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(p)},nt.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var S=x.as,b=y(S,x.crossOrigin);o.d.L(p,S,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},nt.preloadModule=function(p,x){if(typeof p=="string")if(x){var S=y(x.as,x.crossOrigin);o.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(p)},nt.requestFormReset=function(p){o.d.r(p)},nt.unstable_batchedUpdates=function(p,x){return p(x)},nt.useFormState=function(p,x,S){return g.H.useFormState(p,x,S)},nt.useFormStatus=function(){return g.H.useHostTransitionStatus()},nt.version="19.1.1",nt}var fx;function C0(){if(fx)return Gc.exports;fx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),Gc.exports=S0(),Gc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function _0(){if(px)return Yl;px=1;var r=k0(),i=ro(),d=C0();function o(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function g(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function y(t){if(m(t)!==t)throw Error(o(188))}function p(t){var a=t.alternate;if(!a){if(a=m(t),a===null)throw Error(o(188));return a!==t?null:t}for(var s=t,l=a;;){var n=s.return;if(n===null)break;var c=n.alternate;if(c===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===c.child){for(c=n.child;c;){if(c===s)return y(n),t;if(c===l)return y(n),a;c=c.sibling}throw Error(o(188))}if(s.return!==l.return)s=n,l=c;else{for(var f=!1,_=n.child;_;){if(_===s){f=!0,s=n,l=c;break}if(_===l){f=!0,l=n,s=c;break}_=_.sibling}if(!f){for(_=c.child;_;){if(_===s){f=!0,s=c,l=n;break}if(_===l){f=!0,l=c,s=n;break}_=_.sibling}if(!f)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?t:a}function x(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=x(t),a!==null)return a;t=t.sibling}return null}var S=Object.assign,b=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function E(t){return t===null||typeof t!="object"?null:(t=le&&t[le]||t["@@iterator"],typeof t=="function"?t:null)}var U=Symbol.for("react.client.reference");function R(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===U?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case k:return"Suspense";case M:return"SuspenseList";case ae:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case T:return(t.displayName||"Context")+".Provider";case w:return(t._context.displayName||"Context")+".Consumer";case A:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return a=t.displayName||null,a!==null?a:R(t.type)||"Memo";case B:a=t._payload,t=t._init;try{return R(t(a))}catch{}}return null}var q=Array.isArray,h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ie=[],L=-1;function Z(t){return{current:t}}function P(t){0>L||(t.current=ie[L],ie[L]=null,L--)}function X(t,a){L++,ie[L]=t.current,t.current=a}var ne=Z(null),ce=Z(null),oe=Z(null),we=Z(null);function he(t,a){switch(X(oe,a),X(ce,t),X(ne,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?zm(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=zm(a),t=Hm(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(ne),X(ne,t)}function ze(){P(ne),P(ce),P(oe)}function Qt(t){t.memoizedState!==null&&X(we,t);var a=ne.current,s=Hm(a,t.type);a!==s&&(X(ce,t),X(ne,s))}function Dt(t){ce.current===t&&(P(ne),P(ce)),we.current===t&&(P(we),Hl._currentValue=J)}var mt=Object.prototype.hasOwnProperty,Qs=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Xt=r.unstable_shouldYield,Si=r.unstable_requestPaint,Ht=r.unstable_now,Wx=r.unstable_getCurrentPriorityLevel,po=r.unstable_ImmediatePriority,go=r.unstable_UserBlockingPriority,en=r.unstable_NormalPriority,Ix=r.unstable_LowPriority,bo=r.unstable_IdlePriority,eh=r.log,th=r.unstable_setDisableYieldValue,Xs=null,xt=null;function da(t){if(typeof eh=="function"&&th(t),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(Xs,t)}catch{}}var ht=Math.clz32?Math.clz32:lh,ah=Math.log,sh=Math.LN2;function lh(t){return t>>>=0,t===0?32:31-(ah(t)/sh|0)|0}var tn=256,an=4194304;function Oa(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function sn(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var n=0,c=t.suspendedLanes,f=t.pingedLanes;t=t.warmLanes;var _=l&134217727;return _!==0?(l=_&~c,l!==0?n=Oa(l):(f&=_,f!==0?n=Oa(f):s||(s=_&~t,s!==0&&(n=Oa(s))))):(_=l&~c,_!==0?n=Oa(_):f!==0?n=Oa(f):s||(s=l&~t,s!==0&&(n=Oa(s)))),n===0?0:a!==0&&a!==n&&(a&c)===0&&(c=n&-n,s=a&-a,c>=s||c===32&&(s&4194048)!==0)?a:n}function Vs(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function nh(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yo(){var t=tn;return tn<<=1,(tn&4194048)===0&&(tn=256),t}function vo(){var t=an;return an<<=1,(an&62914560)===0&&(an=4194304),t}function Ci(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Zs(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ih(t,a,s,l,n,c){var f=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var _=t.entanglements,$=t.expirationTimes,F=t.hiddenUpdates;for(s=f&~s;0<s;){var ee=31-ht(s),se=1<<ee;_[ee]=0,$[ee]=-1;var W=F[ee];if(W!==null)for(F[ee]=null,ee=0;ee<W.length;ee++){var I=W[ee];I!==null&&(I.lane&=-536870913)}s&=~se}l!==0&&jo(t,l,0),c!==0&&n===0&&t.tag!==0&&(t.suspendedLanes|=c&~(f&~a))}function jo(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-ht(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function No(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-ht(s),n=1<<l;n&a|t[l]&a&&(t[l]|=a),s&=~n}}function _i(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ei(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function wo(){var t=H.p;return t!==0?t:(t=window.event,t===void 0?32:ax(t.type))}function rh(t,a){var s=H.p;try{return H.p=t,a()}finally{H.p=s}}var ua=Math.random().toString(36).slice(2),st="__reactFiber$"+ua,rt="__reactProps$"+ua,ts="__reactContainer$"+ua,Mi="__reactEvents$"+ua,ch="__reactListeners$"+ua,oh="__reactHandles$"+ua,ko="__reactResources$"+ua,Js="__reactMarker$"+ua;function Ai(t){delete t[st],delete t[rt],delete t[Mi],delete t[ch],delete t[oh]}function as(t){var a=t[st];if(a)return a;for(var s=t.parentNode;s;){if(a=s[ts]||s[st]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=$m(t);t!==null;){if(s=t[st])return s;t=$m(t)}return a}t=s,s=t.parentNode}return null}function ss(t){if(t=t[st]||t[ts]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function Ks(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(o(33))}function ls(t){var a=t[ko];return a||(a=t[ko]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Je(t){t[Js]=!0}var So=new Set,Co={};function za(t,a){ns(t,a),ns(t+"Capture",a)}function ns(t,a){for(Co[t]=a,t=0;t<a.length;t++)So.add(a[t])}var dh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_o={},Eo={};function uh(t){return mt.call(Eo,t)?!0:mt.call(_o,t)?!1:dh.test(t)?Eo[t]=!0:(_o[t]=!0,!1)}function ln(t,a,s){if(uh(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function nn(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Vt(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}var Ti,Mo;function is(t){if(Ti===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);Ti=a&&a[1]||"",Mo=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ti+t+Mo}var Di=!1;function Ri(t,a){if(!t||Di)return"";Di=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(I){var W=I}Reflect.construct(t,[],se)}else{try{se.call()}catch(I){W=I}t.call(se.prototype)}}else{try{throw Error()}catch(I){W=I}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(I){if(I&&W&&typeof I.stack=="string")return[I.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=l.DetermineComponentFrameRoot(),f=c[0],_=c[1];if(f&&_){var $=f.split(`
`),F=_.split(`
`);for(n=l=0;l<$.length&&!$[l].includes("DetermineComponentFrameRoot");)l++;for(;n<F.length&&!F[n].includes("DetermineComponentFrameRoot");)n++;if(l===$.length||n===F.length)for(l=$.length-1,n=F.length-1;1<=l&&0<=n&&$[l]!==F[n];)n--;for(;1<=l&&0<=n;l--,n--)if($[l]!==F[n]){if(l!==1||n!==1)do if(l--,n--,0>n||$[l]!==F[n]){var ee=`
`+$[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=n);break}}}finally{Di=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?is(s):""}function mh(t){switch(t.tag){case 26:case 27:case 5:return is(t.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return Ri(t.type,!1);case 11:return Ri(t.type.render,!1);case 1:return Ri(t.type,!0);case 31:return is("Activity");default:return""}}function Ao(t){try{var a="";do a+=mh(t),t=t.return;while(t);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Nt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function To(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function xh(t){var a=To(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),l=""+t[a];if(!t.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,c=s.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return n.call(this)},set:function(f){l=""+f,c.call(this,f)}}),Object.defineProperty(t,a,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(f){l=""+f},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function rn(t){t._valueTracker||(t._valueTracker=xh(t))}function Do(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=To(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var hh=/[\n"\\]/g;function wt(t){return t.replace(hh,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function qi(t,a,s,l,n,c,f,_){t.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?t.type=f:t.removeAttribute("type"),a!=null?f==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Nt(a)):t.value!==""+Nt(a)&&(t.value=""+Nt(a)):f!=="submit"&&f!=="reset"||t.removeAttribute("value"),a!=null?Oi(t,f,Nt(a)):s!=null?Oi(t,f,Nt(s)):l!=null&&t.removeAttribute("value"),n==null&&c!=null&&(t.defaultChecked=!!c),n!=null&&(t.checked=n&&typeof n!="function"&&typeof n!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+Nt(_):t.removeAttribute("name")}function Ro(t,a,s,l,n,c,f,_){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(t.type=c),a!=null||s!=null){if(!(c!=="submit"&&c!=="reset"||a!=null))return;s=s!=null?""+Nt(s):"",a=a!=null?""+Nt(a):s,_||a===t.value||(t.value=a),t.defaultValue=a}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=_?t.checked:!!l,t.defaultChecked=!!l,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.name=f)}function Oi(t,a,s){a==="number"&&cn(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function rs(t,a,s,l){if(t=t.options,a){a={};for(var n=0;n<s.length;n++)a["$"+s[n]]=!0;for(s=0;s<t.length;s++)n=a.hasOwnProperty("$"+t[s].value),t[s].selected!==n&&(t[s].selected=n),n&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Nt(s),a=null,n=0;n<t.length;n++){if(t[n].value===s){t[n].selected=!0,l&&(t[n].defaultSelected=!0);return}a!==null||t[n].disabled||(a=t[n])}a!==null&&(a.selected=!0)}}function qo(t,a,s){if(a!=null&&(a=""+Nt(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Nt(s):""}function Oo(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(o(92));if(q(l)){if(1<l.length)throw Error(o(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=Nt(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function cs(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var fh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zo(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||fh.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function Ho(t,a,s){if(a!=null&&typeof a!="object")throw Error(o(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var n in a)l=a[n],a.hasOwnProperty(n)&&s[n]!==l&&zo(t,n,l)}else for(var c in a)a.hasOwnProperty(c)&&zo(t,c,a[c])}function zi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function on(t){return gh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Hi=null;function Li(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var os=null,ds=null;function Lo(t){var a=ss(t);if(a&&(t=a.stateNode)){var s=t[rt]||null;e:switch(t=a.stateNode,a.type){case"input":if(qi(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+wt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var n=l[rt]||null;if(!n)throw Error(o(90));qi(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&Do(l)}break e;case"textarea":qo(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&rs(t,!!s.multiple,a,!1)}}}var Bi=!1;function Bo(t,a,s){if(Bi)return t(a,s);Bi=!0;try{var l=t(a);return l}finally{if(Bi=!1,(os!==null||ds!==null)&&(Jn(),os&&(a=os,t=ds,ds=os=null,Lo(a),t)))for(a=0;a<t.length;a++)Lo(t[a])}}function Fs(t,a){var s=t.stateNode;if(s===null)return null;var l=s[rt]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(o(231,a,typeof s));return s}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ui=!1;if(Zt)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){Ui=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{Ui=!1}var ma=null,$i=null,dn=null;function Uo(){if(dn)return dn;var t,a=$i,s=a.length,l,n="value"in ma?ma.value:ma.textContent,c=n.length;for(t=0;t<s&&a[t]===n[t];t++);var f=s-t;for(l=1;l<=f&&a[s-l]===n[c-l];l++);return dn=n.slice(t,1<l?1-l:void 0)}function un(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function mn(){return!0}function $o(){return!1}function ct(t){function a(s,l,n,c,f){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(s=t[_],this[_]=s?s(c):c[_]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?mn:$o,this.isPropagationStopped=$o,this}return S(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=mn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=mn)},persist:function(){},isPersistent:mn}),a}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xn=ct(Ha),Ws=S({},Ha,{view:0,detail:0}),bh=ct(Ws),Gi,Yi,Is,hn=S({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Is&&(Is&&t.type==="mousemove"?(Gi=t.screenX-Is.screenX,Yi=t.screenY-Is.screenY):Yi=Gi=0,Is=t),Gi)},movementY:function(t){return"movementY"in t?t.movementY:Yi}}),Go=ct(hn),yh=S({},hn,{dataTransfer:0}),vh=ct(yh),jh=S({},Ws,{relatedTarget:0}),Qi=ct(jh),Nh=S({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=ct(Nh),kh=S({},Ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sh=ct(kh),Ch=S({},Ha,{data:0}),Yo=ct(Ch),_h={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ah(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Mh[t])?!!a[t]:!1}function Xi(){return Ah}var Th=S({},Ws,{key:function(t){if(t.key){var a=_h[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=un(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Eh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(t){return t.type==="keypress"?un(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?un(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dh=ct(Th),Rh=S({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=ct(Rh),qh=S({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),Oh=ct(qh),zh=S({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hh=ct(zh),Lh=S({},hn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bh=ct(Lh),Uh=S({},Ha,{newState:0,oldState:0}),$h=ct(Uh),Gh=[9,13,27,32],Vi=Zt&&"CompositionEvent"in window,el=null;Zt&&"documentMode"in document&&(el=document.documentMode);var Yh=Zt&&"TextEvent"in window&&!el,Xo=Zt&&(!Vi||el&&8<el&&11>=el),Vo=" ",Zo=!1;function Jo(t,a){switch(t){case"keyup":return Gh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ko(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var us=!1;function Qh(t,a){switch(t){case"compositionend":return Ko(a);case"keypress":return a.which!==32?null:(Zo=!0,Vo);case"textInput":return t=a.data,t===Vo&&Zo?null:t;default:return null}}function Xh(t,a){if(us)return t==="compositionend"||!Vi&&Jo(t,a)?(t=Uo(),dn=$i=ma=null,us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xo&&a.locale!=="ko"?null:a.data;default:return null}}var Vh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Vh[t.type]:a==="textarea"}function Po(t,a,s,l){os?ds?ds.push(l):ds=[l]:os=l,a=ei(a,"onChange"),0<a.length&&(s=new xn("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var tl=null,al=null;function Zh(t){Tm(t,0)}function fn(t){var a=Ks(t);if(Do(a))return t}function Wo(t,a){if(t==="change")return a}var Io=!1;if(Zt){var Zi;if(Zt){var Ji="oninput"in document;if(!Ji){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),Ji=typeof ed.oninput=="function"}Zi=Ji}else Zi=!1;Io=Zi&&(!document.documentMode||9<document.documentMode)}function td(){tl&&(tl.detachEvent("onpropertychange",ad),al=tl=null)}function ad(t){if(t.propertyName==="value"&&fn(al)){var a=[];Po(a,al,t,Li(t)),Bo(Zh,a)}}function Jh(t,a,s){t==="focusin"?(td(),tl=a,al=s,tl.attachEvent("onpropertychange",ad)):t==="focusout"&&td()}function Kh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fn(al)}function Fh(t,a){if(t==="click")return fn(a)}function Ph(t,a){if(t==="input"||t==="change")return fn(a)}function Wh(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ft=typeof Object.is=="function"?Object.is:Wh;function sl(t,a){if(ft(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!mt.call(a,n)||!ft(t[n],a[n]))return!1}return!0}function sd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ld(t,a){var s=sd(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=sd(s)}}function nd(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?nd(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function id(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=cn(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=cn(t.document)}return a}function Ki(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Ih=Zt&&"documentMode"in document&&11>=document.documentMode,ms=null,Fi=null,ll=null,Pi=!1;function rd(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Pi||ms==null||ms!==cn(l)||(l=ms,"selectionStart"in l&&Ki(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&sl(ll,l)||(ll=l,l=ei(Fi,"onSelect"),0<l.length&&(a=new xn("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=ms)))}function La(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var xs={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionrun:La("Transition","TransitionRun"),transitionstart:La("Transition","TransitionStart"),transitioncancel:La("Transition","TransitionCancel"),transitionend:La("Transition","TransitionEnd")},Wi={},cd={};Zt&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function Ba(t){if(Wi[t])return Wi[t];if(!xs[t])return t;var a=xs[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in cd)return Wi[t]=a[s];return t}var od=Ba("animationend"),dd=Ba("animationiteration"),ud=Ba("animationstart"),ef=Ba("transitionrun"),tf=Ba("transitionstart"),af=Ba("transitioncancel"),md=Ba("transitionend"),xd=new Map,Ii="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ii.push("scrollEnd");function Rt(t,a){xd.set(t,a),za(a,[t])}var hd=new WeakMap;function kt(t,a){if(typeof t=="object"&&t!==null){var s=hd.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Ao(a)},hd.set(t,a),a)}return{value:t,source:a,stack:Ao(a)}}var St=[],hs=0,er=0;function pn(){for(var t=hs,a=er=hs=0;a<t;){var s=St[a];St[a++]=null;var l=St[a];St[a++]=null;var n=St[a];St[a++]=null;var c=St[a];if(St[a++]=null,l!==null&&n!==null){var f=l.pending;f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n}c!==0&&fd(s,n,c)}}function gn(t,a,s,l){St[hs++]=t,St[hs++]=a,St[hs++]=s,St[hs++]=l,er|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function tr(t,a,s,l){return gn(t,a,s,l),bn(t)}function fs(t,a){return gn(t,null,null,a),bn(t)}function fd(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var n=!1,c=t.return;c!==null;)c.childLanes|=s,l=c.alternate,l!==null&&(l.childLanes|=s),c.tag===22&&(t=c.stateNode,t===null||t._visibility&1||(n=!0)),t=c,c=c.return;return t.tag===3?(c=t.stateNode,n&&a!==null&&(n=31-ht(s),t=c.hiddenUpdates,l=t[n],l===null?t[n]=[a]:l.push(a),a.lane=s|536870912),c):null}function bn(t){if(50<Ml)throw Ml=0,rc=null,Error(o(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ps={};function sf(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(t,a,s,l){return new sf(t,a,s,l)}function ar(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jt(t,a){var s=t.alternate;return s===null?(s=pt(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function pd(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function yn(t,a,s,l,n,c){var f=0;if(l=t,typeof t=="function")ar(t)&&(f=1);else if(typeof t=="string")f=i0(t,s,ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ae:return t=pt(31,s,a,n),t.elementType=ae,t.lanes=c,t;case C:return Ua(s.children,n,c,a);case z:f=8,n|=24;break;case j:return t=pt(12,s,a,n|2),t.elementType=j,t.lanes=c,t;case k:return t=pt(13,s,a,n),t.elementType=k,t.lanes=c,t;case M:return t=pt(19,s,a,n),t.elementType=M,t.lanes=c,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N:case T:f=10;break e;case w:f=9;break e;case A:f=11;break e;case Y:f=14;break e;case B:f=16,l=null;break e}f=29,s=Error(o(130,t===null?"null":typeof t,"")),l=null}return a=pt(f,s,a,n),a.elementType=t,a.type=l,a.lanes=c,a}function Ua(t,a,s,l){return t=pt(7,t,l,a),t.lanes=s,t}function sr(t,a,s){return t=pt(6,t,null,a),t.lanes=s,t}function lr(t,a,s){return a=pt(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var gs=[],bs=0,vn=null,jn=0,Ct=[],_t=0,$a=null,Kt=1,Ft="";function Ga(t,a){gs[bs++]=jn,gs[bs++]=vn,vn=t,jn=a}function gd(t,a,s){Ct[_t++]=Kt,Ct[_t++]=Ft,Ct[_t++]=$a,$a=t;var l=Kt;t=Ft;var n=32-ht(l)-1;l&=~(1<<n),s+=1;var c=32-ht(a)+n;if(30<c){var f=n-n%5;c=(l&(1<<f)-1).toString(32),l>>=f,n-=f,Kt=1<<32-ht(a)+n|s<<n|l,Ft=c+t}else Kt=1<<c|s<<n|l,Ft=t}function nr(t){t.return!==null&&(Ga(t,1),gd(t,1,0))}function ir(t){for(;t===vn;)vn=gs[--bs],gs[bs]=null,jn=gs[--bs],gs[bs]=null;for(;t===$a;)$a=Ct[--_t],Ct[_t]=null,Ft=Ct[--_t],Ct[_t]=null,Kt=Ct[--_t],Ct[_t]=null}var it=null,Le=null,Ce=!1,Ya=null,Lt=!1,rr=Error(o(519));function Qa(t){var a=Error(o(418,""));throw rl(kt(a,t)),rr}function bd(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[st]=t,a[rt]=l,s){case"dialog":je("cancel",a),je("close",a);break;case"iframe":case"object":case"embed":je("load",a);break;case"video":case"audio":for(s=0;s<Tl.length;s++)je(Tl[s],a);break;case"source":je("error",a);break;case"img":case"image":case"link":je("error",a),je("load",a);break;case"details":je("toggle",a);break;case"input":je("invalid",a),Ro(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),rn(a);break;case"select":je("invalid",a);break;case"textarea":je("invalid",a),Oo(a,l.value,l.defaultValue,l.children),rn(a)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||Om(a.textContent,s)?(l.popover!=null&&(je("beforetoggle",a),je("toggle",a)),l.onScroll!=null&&je("scroll",a),l.onScrollEnd!=null&&je("scrollend",a),l.onClick!=null&&(a.onclick=ti),a=!0):a=!1,a||Qa(t)}function yd(t){for(it=t.return;it;)switch(it.tag){case 5:case 13:Lt=!1;return;case 27:case 3:Lt=!0;return;default:it=it.return}}function nl(t){if(t!==it)return!1;if(!Ce)return yd(t),Ce=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||wc(t.type,t.memoizedProps)),s=!s),s&&Le&&Qa(t),yd(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(a===0){Le=Ot(t.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;t=t.nextSibling}Le=null}}else a===27?(a=Le,Ea(t.type)?(t=_c,_c=null,Le=t):Le=a):Le=it?Ot(t.stateNode.nextSibling):null;return!0}function il(){Le=it=null,Ce=!1}function vd(){var t=Ya;return t!==null&&(ut===null?ut=t:ut.push.apply(ut,t),Ya=null),t}function rl(t){Ya===null?Ya=[t]:Ya.push(t)}var cr=Z(null),Xa=null,Pt=null;function xa(t,a,s){X(cr,a._currentValue),a._currentValue=s}function Wt(t){t._currentValue=cr.current,P(cr)}function or(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function dr(t,a,s,l){var n=t.child;for(n!==null&&(n.return=t);n!==null;){var c=n.dependencies;if(c!==null){var f=n.child;c=c.firstContext;e:for(;c!==null;){var _=c;c=n;for(var $=0;$<a.length;$++)if(_.context===a[$]){c.lanes|=s,_=c.alternate,_!==null&&(_.lanes|=s),or(c.return,s,t),l||(f=null);break e}c=_.next}}else if(n.tag===18){if(f=n.return,f===null)throw Error(o(341));f.lanes|=s,c=f.alternate,c!==null&&(c.lanes|=s),or(f,s,t),f=null}else f=n.child;if(f!==null)f.return=n;else for(f=n;f!==null;){if(f===t){f=null;break}if(n=f.sibling,n!==null){n.return=f.return,f=n;break}f=f.return}n=f}}function cl(t,a,s,l){t=null;for(var n=a,c=!1;n!==null;){if(!c){if((n.flags&524288)!==0)c=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var f=n.alternate;if(f===null)throw Error(o(387));if(f=f.memoizedProps,f!==null){var _=n.type;ft(n.pendingProps.value,f.value)||(t!==null?t.push(_):t=[_])}}else if(n===we.current){if(f=n.alternate,f===null)throw Error(o(387));f.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}n=n.return}t!==null&&dr(a,t,s,l),a.flags|=262144}function Nn(t){for(t=t.firstContext;t!==null;){if(!ft(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Va(t){Xa=t,Pt=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function lt(t){return jd(Xa,t)}function wn(t,a){return Xa===null&&Va(t),jd(t,a)}function jd(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Pt===null){if(t===null)throw Error(o(308));Pt=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Pt=Pt.next=a;return s}var lf=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},nf=r.unstable_scheduleCallback,rf=r.unstable_NormalPriority,Ve={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ur(){return{controller:new lf,data:new Map,refCount:0}}function ol(t){t.refCount--,t.refCount===0&&nf(rf,function(){t.controller.abort()})}var dl=null,mr=0,ys=0,vs=null;function cf(t,a){if(dl===null){var s=dl=[];mr=0,ys=hc(),vs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return mr++,a.then(Nd,Nd),a}function Nd(){if(--mr===0&&dl!==null){vs!==null&&(vs.status="fulfilled");var t=dl;dl=null,ys=0,vs=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function of(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var n=0;n<s.length;n++)(0,s[n])(a)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var wd=h.S;h.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&cf(t,a),wd!==null&&wd(t,a)};var Za=Z(null);function xr(){var t=Za.current;return t!==null?t:Re.pooledCache}function kn(t,a){a===null?X(Za,Za.current):X(Za,a.pool)}function kd(){var t=xr();return t===null?null:{parent:Ve._currentValue,pool:t}}var ul=Error(o(460)),Sd=Error(o(474)),Sn=Error(o(542)),hr={then:function(){}};function Cd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Cn(){}function _d(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(Cn,Cn),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Md(t),t;default:if(typeof a.status=="string")a.then(Cn,Cn);else{if(t=Re,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var n=a;n.status="fulfilled",n.value=l}},function(l){if(a.status==="pending"){var n=a;n.status="rejected",n.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Md(t),t}throw ml=a,ul}}var ml=null;function Ed(){if(ml===null)throw Error(o(459));var t=ml;return ml=null,t}function Md(t){if(t===ul||t===Sn)throw Error(o(483))}var ha=!1;function fr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pr(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pa(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(_e&2)!==0){var n=l.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),l.pending=a,a=bn(t),fd(t,null,s),a}return gn(t,l,a,s),bn(t)}function xl(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,No(t,s)}}function gr(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var f={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};c===null?n=c=f:c=c.next=f,s=s.next}while(s!==null);c===null?n=c=a:c=c.next=a}else n=c=a;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:c,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var br=!1;function hl(){if(br){var t=vs;if(t!==null)throw t}}function fl(t,a,s,l){br=!1;var n=t.updateQueue;ha=!1;var c=n.firstBaseUpdate,f=n.lastBaseUpdate,_=n.shared.pending;if(_!==null){n.shared.pending=null;var $=_,F=$.next;$.next=null,f===null?c=F:f.next=F,f=$;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,_=ee.lastBaseUpdate,_!==f&&(_===null?ee.firstBaseUpdate=F:_.next=F,ee.lastBaseUpdate=$))}if(c!==null){var se=n.baseState;f=0,ee=F=$=null,_=c;do{var W=_.lane&-536870913,I=W!==_.lane;if(I?(Ne&W)===W:(l&W)===W){W!==0&&W===ys&&(br=!0),ee!==null&&(ee=ee.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var fe=t,me=_;W=a;var Te=s;switch(me.tag){case 1:if(fe=me.payload,typeof fe=="function"){se=fe.call(Te,se,W);break e}se=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=me.payload,W=typeof fe=="function"?fe.call(Te,se,W):fe,W==null)break e;se=S({},se,W);break e;case 2:ha=!0}}W=_.callback,W!==null&&(t.flags|=64,I&&(t.flags|=8192),I=n.callbacks,I===null?n.callbacks=[W]:I.push(W))}else I={lane:W,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ee===null?(F=ee=I,$=se):ee=ee.next=I,f|=W;if(_=_.next,_===null){if(_=n.shared.pending,_===null)break;I=_,_=I.next,I.next=null,n.lastBaseUpdate=I,n.shared.pending=null}}while(!0);ee===null&&($=se),n.baseState=$,n.firstBaseUpdate=F,n.lastBaseUpdate=ee,c===null&&(n.shared.lanes=0),ka|=f,t.lanes=f,t.memoizedState=se}}function Ad(t,a){if(typeof t!="function")throw Error(o(191,t));t.call(a)}function Td(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Ad(s[t],a)}var js=Z(null),_n=Z(0);function Dd(t,a){t=na,X(_n,t),X(js,a),na=t|a.baseLanes}function yr(){X(_n,na),X(js,js.current)}function vr(){na=_n.current,P(js),P(_n)}var ga=0,be=null,Me=null,Qe=null,En=!1,Ns=!1,Ja=!1,Mn=0,pl=0,ws=null,df=0;function Ue(){throw Error(o(321))}function jr(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!ft(t[s],a[s]))return!1;return!0}function Nr(t,a,s,l,n,c){return ga=c,be=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,h.H=t===null||t.memoizedState===null?fu:pu,Ja=!1,c=s(l,n),Ja=!1,Ns&&(c=qd(a,s,l,n)),Rd(t),c}function Rd(t){h.H=On;var a=Me!==null&&Me.next!==null;if(ga=0,Qe=Me=be=null,En=!1,pl=0,ws=null,a)throw Error(o(300));t===null||Ke||(t=t.dependencies,t!==null&&Nn(t)&&(Ke=!0))}function qd(t,a,s,l){be=t;var n=0;do{if(Ns&&(ws=null),pl=0,Ns=!1,25<=n)throw Error(o(301));if(n+=1,Qe=Me=null,t.updateQueue!=null){var c=t.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}h.H=gf,c=a(s,l)}while(Ns);return c}function uf(){var t=h.H,a=t.useState()[0];return a=typeof a.then=="function"?gl(a):a,t=t.useState()[0],(Me!==null?Me.memoizedState:null)!==t&&(be.flags|=1024),a}function wr(){var t=Mn!==0;return Mn=0,t}function kr(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Sr(t){if(En){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}En=!1}ga=0,Qe=Me=be=null,Ns=!1,pl=Mn=0,ws=null}function ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Xe(){if(Me===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var a=Qe===null?be.memoizedState:Qe.next;if(a!==null)Qe=a,Me=t;else{if(t===null)throw be.alternate===null?Error(o(467)):Error(o(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function Cr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gl(t){var a=pl;return pl+=1,ws===null&&(ws=[]),t=_d(ws,t,a),a=be,(Qe===null?a.memoizedState:Qe.next)===null&&(a=a.alternate,h.H=a===null||a.memoizedState===null?fu:pu),t}function An(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gl(t);if(t.$$typeof===T)return lt(t)}throw Error(o(438,String(t)))}function _r(t){var a=null,s=be.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(n){return n.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Cr(),be.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=G;return a.index++,s}function It(t,a){return typeof a=="function"?a(t):a}function Tn(t){var a=Xe();return Er(a,Me,t)}function Er(t,a,s){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=s;var n=t.baseQueue,c=l.pending;if(c!==null){if(n!==null){var f=n.next;n.next=c.next,c.next=f}a.baseQueue=n=c,l.pending=null}if(c=t.baseState,n===null)t.memoizedState=c;else{a=n.next;var _=f=null,$=null,F=a,ee=!1;do{var se=F.lane&-536870913;if(se!==F.lane?(Ne&se)===se:(ga&se)===se){var W=F.revertLane;if(W===0)$!==null&&($=$.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),se===ys&&(ee=!0);else if((ga&W)===W){F=F.next,W===ys&&(ee=!0);continue}else se={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},$===null?(_=$=se,f=c):$=$.next=se,be.lanes|=W,ka|=W;se=F.action,Ja&&s(c,se),c=F.hasEagerState?F.eagerState:s(c,se)}else W={lane:se,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},$===null?(_=$=W,f=c):$=$.next=W,be.lanes|=se,ka|=se;F=F.next}while(F!==null&&F!==a);if($===null?f=c:$.next=_,!ft(c,t.memoizedState)&&(Ke=!0,ee&&(s=vs,s!==null)))throw s;t.memoizedState=c,t.baseState=f,t.baseQueue=$,l.lastRenderedState=c}return n===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Mr(t){var a=Xe(),s=a.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=t;var l=s.dispatch,n=s.pending,c=a.memoizedState;if(n!==null){s.pending=null;var f=n=n.next;do c=t(c,f.action),f=f.next;while(f!==n);ft(c,a.memoizedState)||(Ke=!0),a.memoizedState=c,a.baseQueue===null&&(a.baseState=c),s.lastRenderedState=c}return[c,l]}function Od(t,a,s){var l=be,n=Xe(),c=Ce;if(c){if(s===void 0)throw Error(o(407));s=s()}else s=a();var f=!ft((Me||n).memoizedState,s);f&&(n.memoizedState=s,Ke=!0),n=n.queue;var _=Ld.bind(null,l,n,t);if(bl(2048,8,_,[t]),n.getSnapshot!==a||f||Qe!==null&&Qe.memoizedState.tag&1){if(l.flags|=2048,ks(9,Dn(),Hd.bind(null,l,n,s,a),null),Re===null)throw Error(o(349));c||(ga&124)!==0||zd(l,a,s)}return s}function zd(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=be.updateQueue,a===null?(a=Cr(),be.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Hd(t,a,s,l){a.value=s,a.getSnapshot=l,Bd(a)&&Ud(t)}function Ld(t,a,s){return s(function(){Bd(a)&&Ud(t)})}function Bd(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!ft(t,s)}catch{return!0}}function Ud(t){var a=fs(t,2);a!==null&&jt(a,t,2)}function Ar(t){var a=ot();if(typeof t=="function"){var s=t;if(t=s(),Ja){da(!0);try{s()}finally{da(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:t},a}function $d(t,a,s,l){return t.baseState=s,Er(t,Me,typeof l=="function"?l:It)}function mf(t,a,s,l,n){if(qn(t))throw Error(o(485));if(t=a.action,t!==null){var c={payload:n,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){c.listeners.push(f)}};h.T!==null?s(!0):c.isTransition=!1,l(c),s=a.pending,s===null?(c.next=a.pending=c,Gd(a,c)):(c.next=s.next,a.pending=s.next=c)}}function Gd(t,a){var s=a.action,l=a.payload,n=t.state;if(a.isTransition){var c=h.T,f={};h.T=f;try{var _=s(n,l),$=h.S;$!==null&&$(f,_),Yd(t,a,_)}catch(F){Tr(t,a,F)}finally{h.T=c}}else try{c=s(n,l),Yd(t,a,c)}catch(F){Tr(t,a,F)}}function Yd(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Qd(t,a,l)},function(l){return Tr(t,a,l)}):Qd(t,a,s)}function Qd(t,a,s){a.status="fulfilled",a.value=s,Xd(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,Gd(t,s)))}function Tr(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,Xd(a),a=a.next;while(a!==l)}t.action=null}function Xd(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Vd(t,a){return a}function Zd(t,a){if(Ce){var s=Re.formState;if(s!==null){e:{var l=be;if(Ce){if(Le){t:{for(var n=Le,c=Lt;n.nodeType!==8;){if(!c){n=null;break t}if(n=Ot(n.nextSibling),n===null){n=null;break t}}c=n.data,n=c==="F!"||c==="F"?n:null}if(n){Le=Ot(n.nextSibling),l=n.data==="F!";break e}}Qa(l)}l=!1}l&&(a=s[0])}}return s=ot(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:a},s.queue=l,s=mu.bind(null,be,l),l.dispatch=s,l=Ar(!1),c=zr.bind(null,be,!1,l.queue),l=ot(),n={state:a,dispatch:null,action:t,pending:null},l.queue=n,s=mf.bind(null,be,n,c,s),n.dispatch=s,l.memoizedState=t,[a,s,!1]}function Jd(t){var a=Xe();return Kd(a,Me,t)}function Kd(t,a,s){if(a=Er(t,a,Vd)[0],t=Tn(It)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=gl(a)}catch(f){throw f===ul?Sn:f}else l=a;a=Xe();var n=a.queue,c=n.dispatch;return s!==a.memoizedState&&(be.flags|=2048,ks(9,Dn(),xf.bind(null,n,s),null)),[l,c,t]}function xf(t,a){t.action=a}function Fd(t){var a=Xe(),s=Me;if(s!==null)return Kd(a,s,t);Xe(),a=a.memoizedState,s=Xe();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function ks(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=be.updateQueue,a===null&&(a=Cr(),be.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function Dn(){return{destroy:void 0,resource:void 0}}function Pd(){return Xe().memoizedState}function Rn(t,a,s,l){var n=ot();l=l===void 0?null:l,be.flags|=t,n.memoizedState=ks(1|a,Dn(),s,l)}function bl(t,a,s,l){var n=Xe();l=l===void 0?null:l;var c=n.memoizedState.inst;Me!==null&&l!==null&&jr(l,Me.memoizedState.deps)?n.memoizedState=ks(a,c,s,l):(be.flags|=t,n.memoizedState=ks(1|a,c,s,l))}function Wd(t,a){Rn(8390656,8,t,a)}function Id(t,a){bl(2048,8,t,a)}function eu(t,a){return bl(4,2,t,a)}function tu(t,a){return bl(4,4,t,a)}function au(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function su(t,a,s){s=s!=null?s.concat([t]):null,bl(4,4,au.bind(null,a,t),s)}function Dr(){}function lu(t,a){var s=Xe();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&jr(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function nu(t,a){var s=Xe();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&jr(a,l[1]))return l[0];if(l=t(),Ja){da(!0);try{t()}finally{da(!1)}}return s.memoizedState=[l,a],l}function Rr(t,a,s){return s===void 0||(ga&1073741824)!==0?t.memoizedState=a:(t.memoizedState=s,t=cm(),be.lanes|=t,ka|=t,s)}function iu(t,a,s,l){return ft(s,a)?s:js.current!==null?(t=Rr(t,s,l),ft(t,a)||(Ke=!0),t):(ga&42)===0?(Ke=!0,t.memoizedState=s):(t=cm(),be.lanes|=t,ka|=t,a)}function ru(t,a,s,l,n){var c=H.p;H.p=c!==0&&8>c?c:8;var f=h.T,_={};h.T=_,zr(t,!1,a,s);try{var $=n(),F=h.S;if(F!==null&&F(_,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ee=of($,l);yl(t,a,ee,vt(t))}else yl(t,a,l,vt(t))}catch(se){yl(t,a,{then:function(){},status:"rejected",reason:se},vt())}finally{H.p=c,h.T=f}}function hf(){}function qr(t,a,s,l){if(t.tag!==5)throw Error(o(476));var n=cu(t).queue;ru(t,n,a,J,s===null?hf:function(){return ou(t),s(l)})}function cu(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:J},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:It,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function ou(t){var a=cu(t).next.queue;yl(t,a,{},vt())}function Or(){return lt(Hl)}function du(){return Xe().memoizedState}function uu(){return Xe().memoizedState}function ff(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=vt();t=fa(s);var l=pa(a,t,s);l!==null&&(jt(l,a,s),xl(l,a,s)),a={cache:ur()},t.payload=a;return}a=a.return}}function pf(t,a,s){var l=vt();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},qn(t)?xu(a,s):(s=tr(t,a,s,l),s!==null&&(jt(s,t,l),hu(s,a,l)))}function mu(t,a,s){var l=vt();yl(t,a,s,l)}function yl(t,a,s,l){var n={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(qn(t))xu(a,n);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=a.lastRenderedReducer,c!==null))try{var f=a.lastRenderedState,_=c(f,s);if(n.hasEagerState=!0,n.eagerState=_,ft(_,f))return gn(t,a,n,0),Re===null&&pn(),!1}catch{}finally{}if(s=tr(t,a,n,l),s!==null)return jt(s,t,l),hu(s,a,l),!0}return!1}function zr(t,a,s,l){if(l={lane:2,revertLane:hc(),action:l,hasEagerState:!1,eagerState:null,next:null},qn(t)){if(a)throw Error(o(479))}else a=tr(t,s,l,2),a!==null&&jt(a,t,2)}function qn(t){var a=t.alternate;return t===be||a!==null&&a===be}function xu(t,a){Ns=En=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function hu(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,No(t,s)}}var On={readContext:lt,use:An,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue},fu={readContext:lt,use:An,useCallback:function(t,a){return ot().memoizedState=[t,a===void 0?null:a],t},useContext:lt,useEffect:Wd,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,Rn(4194308,4,au.bind(null,a,t),s)},useLayoutEffect:function(t,a){return Rn(4194308,4,t,a)},useInsertionEffect:function(t,a){Rn(4,2,t,a)},useMemo:function(t,a){var s=ot();a=a===void 0?null:a;var l=t();if(Ja){da(!0);try{t()}finally{da(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=ot();if(s!==void 0){var n=s(a);if(Ja){da(!0);try{s(a)}finally{da(!1)}}}else n=a;return l.memoizedState=l.baseState=n,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=pf.bind(null,be,t),[l.memoizedState,t]},useRef:function(t){var a=ot();return t={current:t},a.memoizedState=t},useState:function(t){t=Ar(t);var a=t.queue,s=mu.bind(null,be,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:Dr,useDeferredValue:function(t,a){var s=ot();return Rr(s,t,a)},useTransition:function(){var t=Ar(!1);return t=ru.bind(null,be,t.queue,!0,!1),ot().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=be,n=ot();if(Ce){if(s===void 0)throw Error(o(407));s=s()}else{if(s=a(),Re===null)throw Error(o(349));(Ne&124)!==0||zd(l,a,s)}n.memoizedState=s;var c={value:s,getSnapshot:a};return n.queue=c,Wd(Ld.bind(null,l,c,t),[t]),l.flags|=2048,ks(9,Dn(),Hd.bind(null,l,c,s,a),null),s},useId:function(){var t=ot(),a=Re.identifierPrefix;if(Ce){var s=Ft,l=Kt;s=(l&~(1<<32-ht(l)-1)).toString(32)+s,a=""+a+"R"+s,s=Mn++,0<s&&(a+="H"+s.toString(32)),a+=""}else s=df++,a=""+a+"r"+s.toString(32)+"";return t.memoizedState=a},useHostTransitionStatus:Or,useFormState:Zd,useActionState:Zd,useOptimistic:function(t){var a=ot();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=zr.bind(null,be,!0,s),s.dispatch=a,[t,a]},useMemoCache:_r,useCacheRefresh:function(){return ot().memoizedState=ff.bind(null,be)}},pu={readContext:lt,use:An,useCallback:lu,useContext:lt,useEffect:Id,useImperativeHandle:su,useInsertionEffect:eu,useLayoutEffect:tu,useMemo:nu,useReducer:Tn,useRef:Pd,useState:function(){return Tn(It)},useDebugValue:Dr,useDeferredValue:function(t,a){var s=Xe();return iu(s,Me.memoizedState,t,a)},useTransition:function(){var t=Tn(It)[0],a=Xe().memoizedState;return[typeof t=="boolean"?t:gl(t),a]},useSyncExternalStore:Od,useId:du,useHostTransitionStatus:Or,useFormState:Jd,useActionState:Jd,useOptimistic:function(t,a){var s=Xe();return $d(s,Me,t,a)},useMemoCache:_r,useCacheRefresh:uu},gf={readContext:lt,use:An,useCallback:lu,useContext:lt,useEffect:Id,useImperativeHandle:su,useInsertionEffect:eu,useLayoutEffect:tu,useMemo:nu,useReducer:Mr,useRef:Pd,useState:function(){return Mr(It)},useDebugValue:Dr,useDeferredValue:function(t,a){var s=Xe();return Me===null?Rr(s,t,a):iu(s,Me.memoizedState,t,a)},useTransition:function(){var t=Mr(It)[0],a=Xe().memoizedState;return[typeof t=="boolean"?t:gl(t),a]},useSyncExternalStore:Od,useId:du,useHostTransitionStatus:Or,useFormState:Fd,useActionState:Fd,useOptimistic:function(t,a){var s=Xe();return Me!==null?$d(s,Me,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:_r,useCacheRefresh:uu},Ss=null,vl=0;function zn(t){var a=vl;return vl+=1,Ss===null&&(Ss=[]),_d(Ss,t,a)}function jl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Hn(t,a){throw a.$$typeof===b?Error(o(525)):(t=Object.prototype.toString.call(a),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function gu(t){var a=t._init;return a(t._payload)}function bu(t){function a(V,Q){if(t){var K=V.deletions;K===null?(V.deletions=[Q],V.flags|=16):K.push(Q)}}function s(V,Q){if(!t)return null;for(;Q!==null;)a(V,Q),Q=Q.sibling;return null}function l(V){for(var Q=new Map;V!==null;)V.key!==null?Q.set(V.key,V):Q.set(V.index,V),V=V.sibling;return Q}function n(V,Q){return V=Jt(V,Q),V.index=0,V.sibling=null,V}function c(V,Q,K){return V.index=K,t?(K=V.alternate,K!==null?(K=K.index,K<Q?(V.flags|=67108866,Q):K):(V.flags|=67108866,Q)):(V.flags|=1048576,Q)}function f(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function _(V,Q,K,te){return Q===null||Q.tag!==6?(Q=sr(K,V.mode,te),Q.return=V,Q):(Q=n(Q,K),Q.return=V,Q)}function $(V,Q,K,te){var de=K.type;return de===C?ee(V,Q,K.props.children,te,K.key):Q!==null&&(Q.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===B&&gu(de)===Q.type)?(Q=n(Q,K.props),jl(Q,K),Q.return=V,Q):(Q=yn(K.type,K.key,K.props,null,V.mode,te),jl(Q,K),Q.return=V,Q)}function F(V,Q,K,te){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==K.containerInfo||Q.stateNode.implementation!==K.implementation?(Q=lr(K,V.mode,te),Q.return=V,Q):(Q=n(Q,K.children||[]),Q.return=V,Q)}function ee(V,Q,K,te,de){return Q===null||Q.tag!==7?(Q=Ua(K,V.mode,te,de),Q.return=V,Q):(Q=n(Q,K),Q.return=V,Q)}function se(V,Q,K){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=sr(""+Q,V.mode,K),Q.return=V,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:return K=yn(Q.type,Q.key,Q.props,null,V.mode,K),jl(K,Q),K.return=V,K;case O:return Q=lr(Q,V.mode,K),Q.return=V,Q;case B:var te=Q._init;return Q=te(Q._payload),se(V,Q,K)}if(q(Q)||E(Q))return Q=Ua(Q,V.mode,K,null),Q.return=V,Q;if(typeof Q.then=="function")return se(V,zn(Q),K);if(Q.$$typeof===T)return se(V,wn(V,Q),K);Hn(V,Q)}return null}function W(V,Q,K,te){var de=Q!==null?Q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return de!==null?null:_(V,Q,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return K.key===de?$(V,Q,K,te):null;case O:return K.key===de?F(V,Q,K,te):null;case B:return de=K._init,K=de(K._payload),W(V,Q,K,te)}if(q(K)||E(K))return de!==null?null:ee(V,Q,K,te,null);if(typeof K.then=="function")return W(V,Q,zn(K),te);if(K.$$typeof===T)return W(V,Q,wn(V,K),te);Hn(V,K)}return null}function I(V,Q,K,te,de){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return V=V.get(K)||null,_(Q,V,""+te,de);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case D:return V=V.get(te.key===null?K:te.key)||null,$(Q,V,te,de);case O:return V=V.get(te.key===null?K:te.key)||null,F(Q,V,te,de);case B:var ye=te._init;return te=ye(te._payload),I(V,Q,K,te,de)}if(q(te)||E(te))return V=V.get(K)||null,ee(Q,V,te,de,null);if(typeof te.then=="function")return I(V,Q,K,zn(te),de);if(te.$$typeof===T)return I(V,Q,K,wn(Q,te),de);Hn(Q,te)}return null}function fe(V,Q,K,te){for(var de=null,ye=null,ue=Q,xe=Q=0,Pe=null;ue!==null&&xe<K.length;xe++){ue.index>xe?(Pe=ue,ue=null):Pe=ue.sibling;var Se=W(V,ue,K[xe],te);if(Se===null){ue===null&&(ue=Pe);break}t&&ue&&Se.alternate===null&&a(V,ue),Q=c(Se,Q,xe),ye===null?de=Se:ye.sibling=Se,ye=Se,ue=Pe}if(xe===K.length)return s(V,ue),Ce&&Ga(V,xe),de;if(ue===null){for(;xe<K.length;xe++)ue=se(V,K[xe],te),ue!==null&&(Q=c(ue,Q,xe),ye===null?de=ue:ye.sibling=ue,ye=ue);return Ce&&Ga(V,xe),de}for(ue=l(ue);xe<K.length;xe++)Pe=I(ue,V,xe,K[xe],te),Pe!==null&&(t&&Pe.alternate!==null&&ue.delete(Pe.key===null?xe:Pe.key),Q=c(Pe,Q,xe),ye===null?de=Pe:ye.sibling=Pe,ye=Pe);return t&&ue.forEach(function(Ra){return a(V,Ra)}),Ce&&Ga(V,xe),de}function me(V,Q,K,te){if(K==null)throw Error(o(151));for(var de=null,ye=null,ue=Q,xe=Q=0,Pe=null,Se=K.next();ue!==null&&!Se.done;xe++,Se=K.next()){ue.index>xe?(Pe=ue,ue=null):Pe=ue.sibling;var Ra=W(V,ue,Se.value,te);if(Ra===null){ue===null&&(ue=Pe);break}t&&ue&&Ra.alternate===null&&a(V,ue),Q=c(Ra,Q,xe),ye===null?de=Ra:ye.sibling=Ra,ye=Ra,ue=Pe}if(Se.done)return s(V,ue),Ce&&Ga(V,xe),de;if(ue===null){for(;!Se.done;xe++,Se=K.next())Se=se(V,Se.value,te),Se!==null&&(Q=c(Se,Q,xe),ye===null?de=Se:ye.sibling=Se,ye=Se);return Ce&&Ga(V,xe),de}for(ue=l(ue);!Se.done;xe++,Se=K.next())Se=I(ue,V,xe,Se.value,te),Se!==null&&(t&&Se.alternate!==null&&ue.delete(Se.key===null?xe:Se.key),Q=c(Se,Q,xe),ye===null?de=Se:ye.sibling=Se,ye=Se);return t&&ue.forEach(function(b0){return a(V,b0)}),Ce&&Ga(V,xe),de}function Te(V,Q,K,te){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case D:e:{for(var de=K.key;Q!==null;){if(Q.key===de){if(de=K.type,de===C){if(Q.tag===7){s(V,Q.sibling),te=n(Q,K.props.children),te.return=V,V=te;break e}}else if(Q.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===B&&gu(de)===Q.type){s(V,Q.sibling),te=n(Q,K.props),jl(te,K),te.return=V,V=te;break e}s(V,Q);break}else a(V,Q);Q=Q.sibling}K.type===C?(te=Ua(K.props.children,V.mode,te,K.key),te.return=V,V=te):(te=yn(K.type,K.key,K.props,null,V.mode,te),jl(te,K),te.return=V,V=te)}return f(V);case O:e:{for(de=K.key;Q!==null;){if(Q.key===de)if(Q.tag===4&&Q.stateNode.containerInfo===K.containerInfo&&Q.stateNode.implementation===K.implementation){s(V,Q.sibling),te=n(Q,K.children||[]),te.return=V,V=te;break e}else{s(V,Q);break}else a(V,Q);Q=Q.sibling}te=lr(K,V.mode,te),te.return=V,V=te}return f(V);case B:return de=K._init,K=de(K._payload),Te(V,Q,K,te)}if(q(K))return fe(V,Q,K,te);if(E(K)){if(de=E(K),typeof de!="function")throw Error(o(150));return K=de.call(K),me(V,Q,K,te)}if(typeof K.then=="function")return Te(V,Q,zn(K),te);if(K.$$typeof===T)return Te(V,Q,wn(V,K),te);Hn(V,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,Q!==null&&Q.tag===6?(s(V,Q.sibling),te=n(Q,K),te.return=V,V=te):(s(V,Q),te=sr(K,V.mode,te),te.return=V,V=te),f(V)):s(V,Q)}return function(V,Q,K,te){try{vl=0;var de=Te(V,Q,K,te);return Ss=null,de}catch(ue){if(ue===ul||ue===Sn)throw ue;var ye=pt(29,ue,null,V.mode);return ye.lanes=te,ye.return=V,ye}finally{}}}var Cs=bu(!0),yu=bu(!1),Et=Z(null),Bt=null;function ba(t){var a=t.alternate;X(Ze,Ze.current&1),X(Et,t),Bt===null&&(a===null||js.current!==null||a.memoizedState!==null)&&(Bt=t)}function vu(t){if(t.tag===22){if(X(Ze,Ze.current),X(Et,t),Bt===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(Bt=t)}}else ya()}function ya(){X(Ze,Ze.current),X(Et,Et.current)}function ea(t){P(Et),Bt===t&&(Bt=null),P(Ze)}var Ze=Z(0);function Ln(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Cc(s)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Hr(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:S({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Lr={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=vt(),n=fa(l);n.payload=a,s!=null&&(n.callback=s),a=pa(t,n,l),a!==null&&(jt(a,t,l),xl(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=vt(),n=fa(l);n.tag=1,n.payload=a,s!=null&&(n.callback=s),a=pa(t,n,l),a!==null&&(jt(a,t,l),xl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=vt(),l=fa(s);l.tag=2,a!=null&&(l.callback=a),a=pa(t,l,s),a!==null&&(jt(a,t,s),xl(a,t,s))}};function ju(t,a,s,l,n,c,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,c,f):a.prototype&&a.prototype.isPureReactComponent?!sl(s,l)||!sl(n,c):!0}function Nu(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&Lr.enqueueReplaceState(a,a.state,null)}function Ka(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=S({},s));for(var n in t)s[n]===void 0&&(s[n]=t[n])}return s}var Bn=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function wu(t){Bn(t)}function ku(t){console.error(t)}function Su(t){Bn(t)}function Un(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Cu(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Br(t,a,s){return s=fa(s),s.tag=3,s.payload={element:null},s.callback=function(){Un(t,a)},s}function _u(t){return t=fa(t),t.tag=3,t}function Eu(t,a,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var c=l.value;t.payload=function(){return n(c)},t.callback=function(){Cu(a,s,l)}}var f=s.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(t.callback=function(){Cu(a,s,l),typeof n!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function bf(t,a,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&cl(a,s,n,!0),s=Et.current,s!==null){switch(s.tag){case 13:return Bt===null?oc():s.alternate===null&&Be===0&&(Be=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===hr?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),uc(t,l,n)),!1;case 22:return s.flags|=65536,l===hr?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),uc(t,l,n)),!1}throw Error(o(435,s.tag))}return uc(t,l,n),oc(),!1}if(Ce)return a=Et.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=n,l!==rr&&(t=Error(o(422),{cause:l}),rl(kt(t,s)))):(l!==rr&&(a=Error(o(423),{cause:l}),rl(kt(a,s))),t=t.current.alternate,t.flags|=65536,n&=-n,t.lanes|=n,l=kt(l,s),n=Br(t.stateNode,l,n),gr(t,n),Be!==4&&(Be=2)),!1;var c=Error(o(520),{cause:l});if(c=kt(c,s),El===null?El=[c]:El.push(c),Be!==4&&(Be=2),a===null)return!0;l=kt(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=n&-n,s.lanes|=t,t=Br(s.stateNode,l,t),gr(s,t),!1;case 1:if(a=s.type,c=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Sa===null||!Sa.has(c))))return s.flags|=65536,n&=-n,s.lanes|=n,n=_u(n),Eu(n,t,s,l),gr(s,n),!1}s=s.return}while(s!==null);return!1}var Mu=Error(o(461)),Ke=!1;function We(t,a,s,l){a.child=t===null?yu(a,null,s,l):Cs(a,t.child,s,l)}function Au(t,a,s,l,n){s=s.render;var c=a.ref;if("ref"in l){var f={};for(var _ in l)_!=="ref"&&(f[_]=l[_])}else f=l;return Va(a),l=Nr(t,a,s,f,c,n),_=wr(),t!==null&&!Ke?(kr(t,a,n),ta(t,a,n)):(Ce&&_&&nr(a),a.flags|=1,We(t,a,l,n),a.child)}function Tu(t,a,s,l,n){if(t===null){var c=s.type;return typeof c=="function"&&!ar(c)&&c.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=c,Du(t,a,c,l,n)):(t=yn(s.type,null,l,a,a.mode,n),t.ref=a.ref,t.return=a,a.child=t)}if(c=t.child,!Zr(t,n)){var f=c.memoizedProps;if(s=s.compare,s=s!==null?s:sl,s(f,l)&&t.ref===a.ref)return ta(t,a,n)}return a.flags|=1,t=Jt(c,l),t.ref=a.ref,t.return=a,a.child=t}function Du(t,a,s,l,n){if(t!==null){var c=t.memoizedProps;if(sl(c,l)&&t.ref===a.ref)if(Ke=!1,a.pendingProps=l=c,Zr(t,n))(t.flags&131072)!==0&&(Ke=!0);else return a.lanes=t.lanes,ta(t,a,n)}return Ur(t,a,s,l,n)}function Ru(t,a,s){var l=a.pendingProps,n=l.children,c=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((a.flags&128)!==0){if(l=c!==null?c.baseLanes|s:s,t!==null){for(n=a.child=t.child,c=0;n!==null;)c=c|n.lanes|n.childLanes,n=n.sibling;a.childLanes=c&~l}else a.childLanes=0,a.child=null;return qu(t,a,l,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&kn(a,c!==null?c.cachePool:null),c!==null?Dd(a,c):yr(),vu(a);else return a.lanes=a.childLanes=536870912,qu(t,a,c!==null?c.baseLanes|s:s,s)}else c!==null?(kn(a,c.cachePool),Dd(a,c),ya(),a.memoizedState=null):(t!==null&&kn(a,null),yr(),ya());return We(t,a,n,s),a.child}function qu(t,a,s,l){var n=xr();return n=n===null?null:{parent:Ve._currentValue,pool:n},a.memoizedState={baseLanes:s,cachePool:n},t!==null&&kn(a,null),yr(),vu(a),t!==null&&cl(t,a,l,!0),null}function $n(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function Ur(t,a,s,l,n){return Va(a),s=Nr(t,a,s,l,void 0,n),l=wr(),t!==null&&!Ke?(kr(t,a,n),ta(t,a,n)):(Ce&&l&&nr(a),a.flags|=1,We(t,a,s,n),a.child)}function Ou(t,a,s,l,n,c){return Va(a),a.updateQueue=null,s=qd(a,l,s,n),Rd(t),l=wr(),t!==null&&!Ke?(kr(t,a,c),ta(t,a,c)):(Ce&&l&&nr(a),a.flags|=1,We(t,a,s,c),a.child)}function zu(t,a,s,l,n){if(Va(a),a.stateNode===null){var c=ps,f=s.contextType;typeof f=="object"&&f!==null&&(c=lt(f)),c=new s(l,c),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Lr,a.stateNode=c,c._reactInternals=a,c=a.stateNode,c.props=l,c.state=a.memoizedState,c.refs={},fr(a),f=s.contextType,c.context=typeof f=="object"&&f!==null?lt(f):ps,c.state=a.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Hr(a,s,f,l),c.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(f=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),f!==c.state&&Lr.enqueueReplaceState(c,c.state,null),fl(a,l,c,n),hl(),c.state=a.memoizedState),typeof c.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){c=a.stateNode;var _=a.memoizedProps,$=Ka(s,_);c.props=$;var F=c.context,ee=s.contextType;f=ps,typeof ee=="object"&&ee!==null&&(f=lt(ee));var se=s.getDerivedStateFromProps;ee=typeof se=="function"||typeof c.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,ee||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(_||F!==f)&&Nu(a,c,l,f),ha=!1;var W=a.memoizedState;c.state=W,fl(a,l,c,n),hl(),F=a.memoizedState,_||W!==F||ha?(typeof se=="function"&&(Hr(a,s,se,l),F=a.memoizedState),($=ha||ju(a,s,$,l,W,F,f))?(ee||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(a.flags|=4194308)):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=F),c.props=l,c.state=F,c.context=f,l=$):(typeof c.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{c=a.stateNode,pr(t,a),f=a.memoizedProps,ee=Ka(s,f),c.props=ee,se=a.pendingProps,W=c.context,F=s.contextType,$=ps,typeof F=="object"&&F!==null&&($=lt(F)),_=s.getDerivedStateFromProps,(F=typeof _=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==se||W!==$)&&Nu(a,c,l,$),ha=!1,W=a.memoizedState,c.state=W,fl(a,l,c,n),hl();var I=a.memoizedState;f!==se||W!==I||ha||t!==null&&t.dependencies!==null&&Nn(t.dependencies)?(typeof _=="function"&&(Hr(a,s,_,l),I=a.memoizedState),(ee=ha||ju(a,s,ee,l,W,I,$)||t!==null&&t.dependencies!==null&&Nn(t.dependencies))?(F||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(l,I,$),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(l,I,$)),typeof c.componentDidUpdate=="function"&&(a.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&W===t.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&W===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=I),c.props=l,c.state=I,c.context=$,l=ee):(typeof c.componentDidUpdate!="function"||f===t.memoizedProps&&W===t.memoizedState||(a.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===t.memoizedProps&&W===t.memoizedState||(a.flags|=1024),l=!1)}return c=l,$n(t,a),l=(a.flags&128)!==0,c||l?(c=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:c.render(),a.flags|=1,t!==null&&l?(a.child=Cs(a,t.child,null,n),a.child=Cs(a,null,s,n)):We(t,a,s,n),a.memoizedState=c.state,t=a.child):t=ta(t,a,n),t}function Hu(t,a,s,l){return il(),a.flags|=256,We(t,a,s,l),a.child}var $r={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gr(t){return{baseLanes:t,cachePool:kd()}}function Yr(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=Mt),t}function Lu(t,a,s){var l=a.pendingProps,n=!1,c=(a.flags&128)!==0,f;if((f=c)||(f=t!==null&&t.memoizedState===null?!1:(Ze.current&2)!==0),f&&(n=!0,a.flags&=-129),f=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ce){if(n?ba(a):ya(),Ce){var _=Le,$;if($=_){e:{for($=_,_=Lt;$.nodeType!==8;){if(!_){_=null;break e}if($=Ot($.nextSibling),$===null){_=null;break e}}_=$}_!==null?(a.memoizedState={dehydrated:_,treeContext:$a!==null?{id:Kt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},$=pt(18,null,null,0),$.stateNode=_,$.return=a,a.child=$,it=a,Le=null,$=!0):$=!1}$||Qa(a)}if(_=a.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return Cc(_)?a.lanes=32:a.lanes=536870912,null;ea(a)}return _=l.children,l=l.fallback,n?(ya(),n=a.mode,_=Gn({mode:"hidden",children:_},n),l=Ua(l,n,s,null),_.return=a,l.return=a,_.sibling=l,a.child=_,n=a.child,n.memoizedState=Gr(s),n.childLanes=Yr(t,f,s),a.memoizedState=$r,l):(ba(a),Qr(a,_))}if($=t.memoizedState,$!==null&&(_=$.dehydrated,_!==null)){if(c)a.flags&256?(ba(a),a.flags&=-257,a=Xr(t,a,s)):a.memoizedState!==null?(ya(),a.child=t.child,a.flags|=128,a=null):(ya(),n=l.fallback,_=a.mode,l=Gn({mode:"visible",children:l.children},_),n=Ua(n,_,s,null),n.flags|=2,l.return=a,n.return=a,l.sibling=n,a.child=l,Cs(a,t.child,null,s),l=a.child,l.memoizedState=Gr(s),l.childLanes=Yr(t,f,s),a.memoizedState=$r,a=n);else if(ba(a),Cc(_)){if(f=_.nextSibling&&_.nextSibling.dataset,f)var F=f.dgst;f=F,l=Error(o(419)),l.stack="",l.digest=f,rl({value:l,source:null,stack:null}),a=Xr(t,a,s)}else if(Ke||cl(t,a,s,!1),f=(s&t.childLanes)!==0,Ke||f){if(f=Re,f!==null&&(l=s&-s,l=(l&42)!==0?1:_i(l),l=(l&(f.suspendedLanes|s))!==0?0:l,l!==0&&l!==$.retryLane))throw $.retryLane=l,fs(t,l),jt(f,t,l),Mu;_.data==="$?"||oc(),a=Xr(t,a,s)}else _.data==="$?"?(a.flags|=192,a.child=t.child,a=null):(t=$.treeContext,Le=Ot(_.nextSibling),it=a,Ce=!0,Ya=null,Lt=!1,t!==null&&(Ct[_t++]=Kt,Ct[_t++]=Ft,Ct[_t++]=$a,Kt=t.id,Ft=t.overflow,$a=a),a=Qr(a,l.children),a.flags|=4096);return a}return n?(ya(),n=l.fallback,_=a.mode,$=t.child,F=$.sibling,l=Jt($,{mode:"hidden",children:l.children}),l.subtreeFlags=$.subtreeFlags&65011712,F!==null?n=Jt(F,n):(n=Ua(n,_,s,null),n.flags|=2),n.return=a,l.return=a,l.sibling=n,a.child=l,l=n,n=a.child,_=t.child.memoizedState,_===null?_=Gr(s):($=_.cachePool,$!==null?(F=Ve._currentValue,$=$.parent!==F?{parent:F,pool:F}:$):$=kd(),_={baseLanes:_.baseLanes|s,cachePool:$}),n.memoizedState=_,n.childLanes=Yr(t,f,s),a.memoizedState=$r,l):(ba(a),s=t.child,t=s.sibling,s=Jt(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(f=a.deletions,f===null?(a.deletions=[t],a.flags|=16):f.push(t)),a.child=s,a.memoizedState=null,s)}function Qr(t,a){return a=Gn({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Gn(t,a){return t=pt(22,t,null,a),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Xr(t,a,s){return Cs(a,t.child,null,s),t=Qr(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Bu(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),or(t.return,a,s)}function Vr(t,a,s,l,n){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n}:(c.isBackwards=a,c.rendering=null,c.renderingStartTime=0,c.last=l,c.tail=s,c.tailMode=n)}function Uu(t,a,s){var l=a.pendingProps,n=l.revealOrder,c=l.tail;if(We(t,a,l.children,s),l=Ze.current,(l&2)!==0)l=l&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bu(t,s,a);else if(t.tag===19)Bu(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(X(Ze,l),n){case"forwards":for(s=a.child,n=null;s!==null;)t=s.alternate,t!==null&&Ln(t)===null&&(n=s),s=s.sibling;s=n,s===null?(n=a.child,a.child=null):(n=s.sibling,s.sibling=null),Vr(a,!1,n,s,c);break;case"backwards":for(s=null,n=a.child,a.child=null;n!==null;){if(t=n.alternate,t!==null&&Ln(t)===null){a.child=n;break}t=n.sibling,n.sibling=s,s=n,n=t}Vr(a,!0,s,null,c);break;case"together":Vr(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ta(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),ka|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(cl(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(o(153));if(a.child!==null){for(t=a.child,s=Jt(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=Jt(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function Zr(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Nn(t)))}function yf(t,a,s){switch(a.tag){case 3:he(a,a.stateNode.containerInfo),xa(a,Ve,t.memoizedState.cache),il();break;case 27:case 5:Qt(a);break;case 4:he(a,a.stateNode.containerInfo);break;case 10:xa(a,a.type,a.memoizedProps.value);break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ba(a),a.flags|=128,null):(s&a.child.childLanes)!==0?Lu(t,a,s):(ba(a),t=ta(t,a,s),t!==null?t.sibling:null);ba(a);break;case 19:var n=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(cl(t,a,s,!1),l=(s&a.childLanes)!==0),n){if(l)return Uu(t,a,s);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),X(Ze,Ze.current),l)break;return null;case 22:case 23:return a.lanes=0,Ru(t,a,s);case 24:xa(a,Ve,t.memoizedState.cache)}return ta(t,a,s)}function $u(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)Ke=!0;else{if(!Zr(t,s)&&(a.flags&128)===0)return Ke=!1,yf(t,a,s);Ke=(t.flags&131072)!==0}else Ke=!1,Ce&&(a.flags&1048576)!==0&&gd(a,jn,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var l=a.elementType,n=l._init;if(l=n(l._payload),a.type=l,typeof l=="function")ar(l)?(t=Ka(l,t),a.tag=1,a=zu(null,a,l,t,s)):(a.tag=0,a=Ur(null,a,l,t,s));else{if(l!=null){if(n=l.$$typeof,n===A){a.tag=11,a=Au(null,a,l,t,s);break e}else if(n===Y){a.tag=14,a=Tu(null,a,l,t,s);break e}}throw a=R(l)||l,Error(o(306,a,""))}}return a;case 0:return Ur(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,n=Ka(l,a.pendingProps),zu(t,a,l,n,s);case 3:e:{if(he(a,a.stateNode.containerInfo),t===null)throw Error(o(387));l=a.pendingProps;var c=a.memoizedState;n=c.element,pr(t,a),fl(a,l,null,s);var f=a.memoizedState;if(l=f.cache,xa(a,Ve,l),l!==c.cache&&dr(a,[Ve],s,!0),hl(),l=f.element,c.isDehydrated)if(c={element:l,isDehydrated:!1,cache:f.cache},a.updateQueue.baseState=c,a.memoizedState=c,a.flags&256){a=Hu(t,a,l,s);break e}else if(l!==n){n=kt(Error(o(424)),a),rl(n),a=Hu(t,a,l,s);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Le=Ot(t.firstChild),it=a,Ce=!0,Ya=null,Lt=!0,s=yu(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(il(),l===n){a=ta(t,a,s);break e}We(t,a,l,s)}a=a.child}return a;case 26:return $n(t,a),t===null?(s=Xm(a.type,null,a.pendingProps,null))?a.memoizedState=s:Ce||(s=a.type,t=a.pendingProps,l=ai(oe.current).createElement(s),l[st]=a,l[rt]=t,et(l,s,t),Je(l),a.stateNode=l):a.memoizedState=Xm(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Qt(a),t===null&&Ce&&(l=a.stateNode=Gm(a.type,a.pendingProps,oe.current),it=a,Lt=!0,n=Le,Ea(a.type)?(_c=n,Le=Ot(l.firstChild)):Le=n),We(t,a,a.pendingProps.children,s),$n(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ce&&((n=l=Le)&&(l=Zf(l,a.type,a.pendingProps,Lt),l!==null?(a.stateNode=l,it=a,Le=Ot(l.firstChild),Lt=!1,n=!0):n=!1),n||Qa(a)),Qt(a),n=a.type,c=a.pendingProps,f=t!==null?t.memoizedProps:null,l=c.children,wc(n,c)?l=null:f!==null&&wc(n,f)&&(a.flags|=32),a.memoizedState!==null&&(n=Nr(t,a,uf,null,null,s),Hl._currentValue=n),$n(t,a),We(t,a,l,s),a.child;case 6:return t===null&&Ce&&((t=s=Le)&&(s=Jf(s,a.pendingProps,Lt),s!==null?(a.stateNode=s,it=a,Le=null,t=!0):t=!1),t||Qa(a)),null;case 13:return Lu(t,a,s);case 4:return he(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Cs(a,null,l,s):We(t,a,l,s),a.child;case 11:return Au(t,a,a.type,a.pendingProps,s);case 7:return We(t,a,a.pendingProps,s),a.child;case 8:return We(t,a,a.pendingProps.children,s),a.child;case 12:return We(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,xa(a,a.type,l.value),We(t,a,l.children,s),a.child;case 9:return n=a.type._context,l=a.pendingProps.children,Va(a),n=lt(n),l=l(n),a.flags|=1,We(t,a,l,s),a.child;case 14:return Tu(t,a,a.type,a.pendingProps,s);case 15:return Du(t,a,a.type,a.pendingProps,s);case 19:return Uu(t,a,s);case 31:return l=a.pendingProps,s=a.mode,l={mode:l.mode,children:l.children},t===null?(s=Gn(l,s),s.ref=a.ref,a.child=s,s.return=a,a=s):(s=Jt(t.child,l),s.ref=a.ref,a.child=s,s.return=a,a=s),a;case 22:return Ru(t,a,s);case 24:return Va(a),l=lt(Ve),t===null?(n=xr(),n===null&&(n=Re,c=ur(),n.pooledCache=c,c.refCount++,c!==null&&(n.pooledCacheLanes|=s),n=c),a.memoizedState={parent:l,cache:n},fr(a),xa(a,Ve,n)):((t.lanes&s)!==0&&(pr(t,a),fl(a,null,null,s),hl()),n=t.memoizedState,c=a.memoizedState,n.parent!==l?(n={parent:l,cache:l},a.memoizedState=n,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=n),xa(a,Ve,l)):(l=c.cache,xa(a,Ve,l),l!==n.cache&&dr(a,[Ve],s,!0))),We(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(o(156,a.tag))}function aa(t){t.flags|=4}function Gu(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Fm(a)){if(a=Et.current,a!==null&&((Ne&4194048)===Ne?Bt!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||a!==Bt))throw ml=hr,Sd;t.flags|=8192}}function Yn(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?vo():536870912,t.lanes|=a,As|=a)}function Nl(t,a){if(!Ce)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function He(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var n=t.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function vf(t,a,s){var l=a.pendingProps;switch(ir(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(a),null;case 1:return He(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Wt(Ve),ze(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(nl(a)?aa(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vd())),He(a),null;case 26:return s=a.memoizedState,t===null?(aa(a),s!==null?(He(a),Gu(a,s)):(He(a),a.flags&=-16777217)):s?s!==t.memoizedState?(aa(a),He(a),Gu(a,s)):(He(a),a.flags&=-16777217):(t.memoizedProps!==l&&aa(a),He(a),a.flags&=-16777217),null;case 27:Dt(a),s=oe.current;var n=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return He(a),null}t=ne.current,nl(a)?bd(a):(t=Gm(n,l,s),a.stateNode=t,aa(a))}return He(a),null;case 5:if(Dt(a),s=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(!l){if(a.stateNode===null)throw Error(o(166));return He(a),null}if(t=ne.current,nl(a))bd(a);else{switch(n=ai(oe.current),t){case 1:t=n.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=n.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=n.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?n.createElement(s,{is:l.is}):n.createElement(s)}}t[st]=a,t[rt]=l;e:for(n=a.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}a.stateNode=t;e:switch(et(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&aa(a)}}return He(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&aa(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(o(166));if(t=oe.current,nl(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,n=it,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}t[st]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Om(t.nodeValue,s)),t||Qa(a)}else t=ai(t).createTextNode(l),t[st]=a,a.stateNode=t}return He(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(n=nl(a),l!==null&&l.dehydrated!==null){if(t===null){if(!n)throw Error(o(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));n[st]=a}else il(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;He(a),n=!1}else n=vd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),n=!0;if(!n)return a.flags&256?(ea(a),a):(ea(a),null)}if(ea(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=a.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var c=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(c=l.memoizedState.cachePool.pool),c!==n&&(l.flags|=2048)}return s!==t&&s&&(a.child.flags|=8192),Yn(a,a.updateQueue),He(a),null;case 4:return ze(),t===null&&bc(a.stateNode.containerInfo),He(a),null;case 10:return Wt(a.type),He(a),null;case 19:if(P(Ze),n=a.memoizedState,n===null)return He(a),null;if(l=(a.flags&128)!==0,c=n.rendering,c===null)if(l)Nl(n,!1);else{if(Be!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(c=Ln(t),c!==null){for(a.flags|=128,Nl(n,!1),t=c.updateQueue,a.updateQueue=t,Yn(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)pd(s,t),s=s.sibling;return X(Ze,Ze.current&1|2),a.child}t=t.sibling}n.tail!==null&&Ht()>Vn&&(a.flags|=128,l=!0,Nl(n,!1),a.lanes=4194304)}else{if(!l)if(t=Ln(c),t!==null){if(a.flags|=128,l=!0,t=t.updateQueue,a.updateQueue=t,Yn(a,t),Nl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!Ce)return He(a),null}else 2*Ht()-n.renderingStartTime>Vn&&s!==536870912&&(a.flags|=128,l=!0,Nl(n,!1),a.lanes=4194304);n.isBackwards?(c.sibling=a.child,a.child=c):(t=n.last,t!==null?t.sibling=c:a.child=c,n.last=c)}return n.tail!==null?(a=n.tail,n.rendering=a,n.tail=a.sibling,n.renderingStartTime=Ht(),a.sibling=null,t=Ze.current,X(Ze,l?t&1|2:t&1),a):(He(a),null);case 22:case 23:return ea(a),vr(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(He(a),a.subtreeFlags&6&&(a.flags|=8192)):He(a),s=a.updateQueue,s!==null&&Yn(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&P(Za),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Wt(Ve),He(a),null;case 25:return null;case 30:return null}throw Error(o(156,a.tag))}function jf(t,a){switch(ir(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Wt(Ve),ze(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Dt(a),null;case 13:if(ea(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(o(340));il()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return P(Ze),null;case 4:return ze(),null;case 10:return Wt(a.type),null;case 22:case 23:return ea(a),vr(),t!==null&&P(Za),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Wt(Ve),null;case 25:return null;default:return null}}function Yu(t,a){switch(ir(a),a.tag){case 3:Wt(Ve),ze();break;case 26:case 27:case 5:Dt(a);break;case 4:ze();break;case 13:ea(a);break;case 19:P(Ze);break;case 10:Wt(a.type);break;case 22:case 23:ea(a),vr(),t!==null&&P(Za);break;case 24:Wt(Ve)}}function wl(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&t)===t){l=void 0;var c=s.create,f=s.inst;l=c(),f.destroy=l}s=s.next}while(s!==n)}}catch(_){De(a,a.return,_)}}function va(t,a,s){try{var l=a.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var c=n.next;l=c;do{if((l.tag&t)===t){var f=l.inst,_=f.destroy;if(_!==void 0){f.destroy=void 0,n=a;var $=s,F=_;try{F()}catch(ee){De(n,$,ee)}}}l=l.next}while(l!==c)}}catch(ee){De(a,a.return,ee)}}function Qu(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Td(a,s)}catch(l){De(t,t.return,l)}}}function Xu(t,a,s){s.props=Ka(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){De(t,a,l)}}function kl(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(n){De(t,a,n)}}function Ut(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){De(t,a,n)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){De(t,a,n)}else s.current=null}function Vu(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){De(t,t.return,n)}}function Jr(t,a,s){try{var l=t.stateNode;Gf(l,t.type,s,a),l[rt]=a}catch(n){De(t,t.return,n)}}function Zu(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ea(t.type)||t.tag===4}function Kr(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ea(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fr(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=ti));else if(l!==4&&(l===27&&Ea(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(Fr(t,a,s),t=t.sibling;t!==null;)Fr(t,a,s),t=t.sibling}function Qn(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&Ea(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Qn(t,a,s),t=t.sibling;t!==null;)Qn(t,a,s),t=t.sibling}function Ju(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);et(a,l,s),a[st]=t,a[rt]=s}catch(c){De(t,t.return,c)}}var sa=!1,$e=!1,Pr=!1,Ku=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Nf(t,a){if(t=t.containerInfo,jc=ci,t=id(t),Ki(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,c=l.focusNode;l=l.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var f=0,_=-1,$=-1,F=0,ee=0,se=t,W=null;t:for(;;){for(var I;se!==s||n!==0&&se.nodeType!==3||(_=f+n),se!==c||l!==0&&se.nodeType!==3||($=f+l),se.nodeType===3&&(f+=se.nodeValue.length),(I=se.firstChild)!==null;)W=se,se=I;for(;;){if(se===t)break t;if(W===s&&++F===n&&(_=f),W===c&&++ee===l&&($=f),(I=se.nextSibling)!==null)break;se=W,W=se.parentNode}se=I}s=_===-1||$===-1?null:{start:_,end:$}}else s=null}s=s||{start:0,end:0}}else s=null;for(Nc={focusedElem:t,selectionRange:s},ci=!1,Fe=a;Fe!==null;)if(a=Fe,t=a.child,(a.subtreeFlags&1024)!==0&&t!==null)t.return=a,Fe=t;else for(;Fe!==null;){switch(a=Fe,c=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&c!==null){t=void 0,s=a,n=c.memoizedProps,c=c.memoizedState,l=s.stateNode;try{var fe=Ka(s.type,n,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(fe,c),l.__reactInternalSnapshotBeforeUpdate=t}catch(me){De(s,s.return,me)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Sc(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Sc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=a.sibling,t!==null){t.return=a.return,Fe=t;break}Fe=a.return}}function Fu(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ja(t,s),l&4&&wl(5,s);break;case 1:if(ja(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(f){De(s,s.return,f)}else{var n=Ka(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(n,a,t.__reactInternalSnapshotBeforeUpdate)}catch(f){De(s,s.return,f)}}l&64&&Qu(s),l&512&&kl(s,s.return);break;case 3:if(ja(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Td(t,a)}catch(f){De(s,s.return,f)}}break;case 27:a===null&&l&4&&Ju(s);case 26:case 5:ja(t,s),a===null&&l&4&&Vu(s),l&512&&kl(s,s.return);break;case 12:ja(t,s);break;case 13:ja(t,s),l&4&&Iu(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Tf.bind(null,s),Kf(t,s))));break;case 22:if(l=s.memoizedState!==null||sa,!l){a=a!==null&&a.memoizedState!==null||$e,n=sa;var c=$e;sa=l,($e=a)&&!c?Na(t,s,(s.subtreeFlags&8772)!==0):ja(t,s),sa=n,$e=c}break;case 30:break;default:ja(t,s)}}function Pu(t){var a=t.alternate;a!==null&&(t.alternate=null,Pu(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ai(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qe=null,dt=!1;function la(t,a,s){for(s=s.child;s!==null;)Wu(t,a,s),s=s.sibling}function Wu(t,a,s){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(Xs,s)}catch{}switch(s.tag){case 26:$e||Ut(s,a),la(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:$e||Ut(s,a);var l=qe,n=dt;Ea(s.type)&&(qe=s.stateNode,dt=!1),la(t,a,s),Rl(s.stateNode),qe=l,dt=n;break;case 5:$e||Ut(s,a);case 6:if(l=qe,n=dt,qe=null,la(t,a,s),qe=l,dt=n,qe!==null)if(dt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(s.stateNode)}catch(c){De(s,a,c)}else try{qe.removeChild(s.stateNode)}catch(c){De(s,a,c)}break;case 18:qe!==null&&(dt?(t=qe,Um(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),$l(t)):Um(qe,s.stateNode));break;case 4:l=qe,n=dt,qe=s.stateNode.containerInfo,dt=!0,la(t,a,s),qe=l,dt=n;break;case 0:case 11:case 14:case 15:$e||va(2,s,a),$e||va(4,s,a),la(t,a,s);break;case 1:$e||(Ut(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Xu(s,a,l)),la(t,a,s);break;case 21:la(t,a,s);break;case 22:$e=(l=$e)||s.memoizedState!==null,la(t,a,s),$e=l;break;default:la(t,a,s)}}function Iu(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$l(t)}catch(s){De(a,a.return,s)}}function wf(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Ku),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Ku),a;default:throw Error(o(435,t.tag))}}function Wr(t,a){var s=wf(t);a.forEach(function(l){var n=Df.bind(null,t,l);s.has(l)||(s.add(l),l.then(n,n))})}function gt(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],c=t,f=a,_=f;e:for(;_!==null;){switch(_.tag){case 27:if(Ea(_.type)){qe=_.stateNode,dt=!1;break e}break;case 5:qe=_.stateNode,dt=!1;break e;case 3:case 4:qe=_.stateNode.containerInfo,dt=!0;break e}_=_.return}if(qe===null)throw Error(o(160));Wu(c,f,n),qe=null,dt=!1,c=n.alternate,c!==null&&(c.return=null),n.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)em(a,t),a=a.sibling}var qt=null;function em(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:gt(a,t),bt(t),l&4&&(va(3,t,t.return),wl(3,t),va(5,t,t.return));break;case 1:gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),l&64&&sa&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=qt;if(gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),l&4){var c=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":c=n.getElementsByTagName("title")[0],(!c||c[Js]||c[st]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=n.createElement(l),n.head.insertBefore(c,n.querySelector("head > title"))),et(c,l,s),c[st]=t,Je(c),l=c;break e;case"link":var f=Jm("link","href",n).get(l+(s.href||""));if(f){for(var _=0;_<f.length;_++)if(c=f[_],c.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&c.getAttribute("rel")===(s.rel==null?null:s.rel)&&c.getAttribute("title")===(s.title==null?null:s.title)&&c.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){f.splice(_,1);break t}}c=n.createElement(l),et(c,l,s),n.head.appendChild(c);break;case"meta":if(f=Jm("meta","content",n).get(l+(s.content||""))){for(_=0;_<f.length;_++)if(c=f[_],c.getAttribute("content")===(s.content==null?null:""+s.content)&&c.getAttribute("name")===(s.name==null?null:s.name)&&c.getAttribute("property")===(s.property==null?null:s.property)&&c.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&c.getAttribute("charset")===(s.charSet==null?null:s.charSet)){f.splice(_,1);break t}}c=n.createElement(l),et(c,l,s),n.head.appendChild(c);break;default:throw Error(o(468,l))}c[st]=t,Je(c),l=c}t.stateNode=l}else Km(n,t.type,t.stateNode);else t.stateNode=Zm(n,l,t.memoizedProps);else c!==l?(c===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):c.count--,l===null?Km(n,t.type,t.stateNode):Zm(n,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Jr(t,t.memoizedProps,s.memoizedProps)}break;case 27:gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),s!==null&&l&4&&Jr(t,t.memoizedProps,s.memoizedProps);break;case 5:if(gt(a,t),bt(t),l&512&&($e||s===null||Ut(s,s.return)),t.flags&32){n=t.stateNode;try{cs(n,"")}catch(I){De(t,t.return,I)}}l&4&&t.stateNode!=null&&(n=t.memoizedProps,Jr(t,n,s!==null?s.memoizedProps:n)),l&1024&&(Pr=!0);break;case 6:if(gt(a,t),bt(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(I){De(t,t.return,I)}}break;case 3:if(ni=null,n=qt,qt=si(a.containerInfo),gt(a,t),qt=n,bt(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{$l(a.containerInfo)}catch(I){De(t,t.return,I)}Pr&&(Pr=!1,tm(t));break;case 4:l=qt,qt=si(t.stateNode.containerInfo),gt(a,t),bt(t),qt=l;break;case 12:gt(a,t),bt(t);break;case 13:gt(a,t),bt(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(lc=Ht()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wr(t,l)));break;case 22:n=t.memoizedState!==null;var $=s!==null&&s.memoizedState!==null,F=sa,ee=$e;if(sa=F||n,$e=ee||$,gt(a,t),$e=ee,sa=F,bt(t),l&8192)e:for(a=t.stateNode,a._visibility=n?a._visibility&-2:a._visibility|1,n&&(s===null||$||sa||$e||Fa(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){$=s=a;try{if(c=$.stateNode,n)f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{_=$.stateNode;var se=$.memoizedProps.style,W=se!=null&&se.hasOwnProperty("display")?se.display:null;_.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(I){De($,$.return,I)}}}else if(a.tag===6){if(s===null){$=a;try{$.stateNode.nodeValue=n?"":$.memoizedProps}catch(I){De($,$.return,I)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Wr(t,s))));break;case 19:gt(a,t),bt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wr(t,l)));break;case 30:break;case 21:break;default:gt(a,t),bt(t)}}function bt(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(Zu(l)){s=l;break}l=l.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var n=s.stateNode,c=Kr(t);Qn(t,c,n);break;case 5:var f=s.stateNode;s.flags&32&&(cs(f,""),s.flags&=-33);var _=Kr(t);Qn(t,_,f);break;case 3:case 4:var $=s.stateNode.containerInfo,F=Kr(t);Fr(t,F,$);break;default:throw Error(o(161))}}catch(ee){De(t,t.return,ee)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function tm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;tm(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ja(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Fu(t,a.alternate,a),a=a.sibling}function Fa(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:va(4,a,a.return),Fa(a);break;case 1:Ut(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&Xu(a,a.return,s),Fa(a);break;case 27:Rl(a.stateNode);case 26:case 5:Ut(a,a.return),Fa(a);break;case 22:a.memoizedState===null&&Fa(a);break;case 30:Fa(a);break;default:Fa(a)}t=t.sibling}}function Na(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,n=t,c=a,f=c.flags;switch(c.tag){case 0:case 11:case 15:Na(n,c,s),wl(4,c);break;case 1:if(Na(n,c,s),l=c,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(F){De(l,l.return,F)}if(l=c,n=l.updateQueue,n!==null){var _=l.stateNode;try{var $=n.shared.hiddenCallbacks;if($!==null)for(n.shared.hiddenCallbacks=null,n=0;n<$.length;n++)Ad($[n],_)}catch(F){De(l,l.return,F)}}s&&f&64&&Qu(c),kl(c,c.return);break;case 27:Ju(c);case 26:case 5:Na(n,c,s),s&&l===null&&f&4&&Vu(c),kl(c,c.return);break;case 12:Na(n,c,s);break;case 13:Na(n,c,s),s&&f&4&&Iu(n,c);break;case 22:c.memoizedState===null&&Na(n,c,s),kl(c,c.return);break;case 30:break;default:Na(n,c,s)}a=a.sibling}}function Ir(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&ol(s))}function ec(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ol(t))}function $t(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)am(t,a,s,l),a=a.sibling}function am(t,a,s,l){var n=a.flags;switch(a.tag){case 0:case 11:case 15:$t(t,a,s,l),n&2048&&wl(9,a);break;case 1:$t(t,a,s,l);break;case 3:$t(t,a,s,l),n&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ol(t)));break;case 12:if(n&2048){$t(t,a,s,l),t=a.stateNode;try{var c=a.memoizedProps,f=c.id,_=c.onPostCommit;typeof _=="function"&&_(f,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch($){De(a,a.return,$)}}else $t(t,a,s,l);break;case 13:$t(t,a,s,l);break;case 23:break;case 22:c=a.stateNode,f=a.alternate,a.memoizedState!==null?c._visibility&2?$t(t,a,s,l):Sl(t,a):c._visibility&2?$t(t,a,s,l):(c._visibility|=2,_s(t,a,s,l,(a.subtreeFlags&10256)!==0)),n&2048&&Ir(f,a);break;case 24:$t(t,a,s,l),n&2048&&ec(a.alternate,a);break;default:$t(t,a,s,l)}}function _s(t,a,s,l,n){for(n=n&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var c=t,f=a,_=s,$=l,F=f.flags;switch(f.tag){case 0:case 11:case 15:_s(c,f,_,$,n),wl(8,f);break;case 23:break;case 22:var ee=f.stateNode;f.memoizedState!==null?ee._visibility&2?_s(c,f,_,$,n):Sl(c,f):(ee._visibility|=2,_s(c,f,_,$,n)),n&&F&2048&&Ir(f.alternate,f);break;case 24:_s(c,f,_,$,n),n&&F&2048&&ec(f.alternate,f);break;default:_s(c,f,_,$,n)}a=a.sibling}}function Sl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,n=l.flags;switch(l.tag){case 22:Sl(s,l),n&2048&&Ir(l.alternate,l);break;case 24:Sl(s,l),n&2048&&ec(l.alternate,l);break;default:Sl(s,l)}a=a.sibling}}var Cl=8192;function Es(t){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)sm(t),t=t.sibling}function sm(t){switch(t.tag){case 26:Es(t),t.flags&Cl&&t.memoizedState!==null&&c0(qt,t.memoizedState,t.memoizedProps);break;case 5:Es(t);break;case 3:case 4:var a=qt;qt=si(t.stateNode.containerInfo),Es(t),qt=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Cl,Cl=16777216,Es(t),Cl=a):Es(t));break;default:Es(t)}}function lm(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function _l(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Fe=l,im(l,t)}lm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nm(t),t=t.sibling}function nm(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&va(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Xn(t)):_l(t);break;default:_l(t)}}function Xn(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Fe=l,im(l,t)}lm(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:va(8,a,a.return),Xn(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Xn(a));break;default:Xn(a)}t=t.sibling}}function im(t,a){for(;Fe!==null;){var s=Fe;switch(s.tag){case 0:case 11:case 15:va(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ol(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Fe=l;else e:for(s=t;Fe!==null;){l=Fe;var n=l.sibling,c=l.return;if(Pu(l),l===s){Fe=null;break e}if(n!==null){n.return=c,Fe=n;break e}Fe=c}}}var kf={getCacheForType:function(t){var a=lt(Ve),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s}},Sf=typeof WeakMap=="function"?WeakMap:Map,_e=0,Re=null,ve=null,Ne=0,Ee=0,yt=null,wa=!1,Ms=!1,tc=!1,na=0,Be=0,ka=0,Pa=0,ac=0,Mt=0,As=0,El=null,ut=null,sc=!1,lc=0,Vn=1/0,Zn=null,Sa=null,Ie=0,Ca=null,Ts=null,Ds=0,nc=0,ic=null,rm=null,Ml=0,rc=null;function vt(){if((_e&2)!==0&&Ne!==0)return Ne&-Ne;if(h.T!==null){var t=ys;return t!==0?t:hc()}return wo()}function cm(){Mt===0&&(Mt=(Ne&536870912)===0||Ce?yo():536870912);var t=Et.current;return t!==null&&(t.flags|=32),Mt}function jt(t,a,s){(t===Re&&(Ee===2||Ee===9)||t.cancelPendingCommit!==null)&&(Rs(t,0),_a(t,Ne,Mt,!1)),Zs(t,s),((_e&2)===0||t!==Re)&&(t===Re&&((_e&2)===0&&(Pa|=s),Be===4&&_a(t,Ne,Mt,!1)),Gt(t))}function om(t,a,s){if((_e&6)!==0)throw Error(o(327));var l=!s&&(a&124)===0&&(a&t.expiredLanes)===0||Vs(t,a),n=l?Ef(t,a):dc(t,a,!0),c=l;do{if(n===0){Ms&&!l&&_a(t,a,0,!1);break}else{if(s=t.current.alternate,c&&!Cf(s)){n=dc(t,a,!1),c=!1;continue}if(n===2){if(c=a,t.errorRecoveryDisabledLanes&c)var f=0;else f=t.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){a=f;e:{var _=t;n=El;var $=_.current.memoizedState.isDehydrated;if($&&(Rs(_,f).flags|=256),f=dc(_,f,!1),f!==2){if(tc&&!$){_.errorRecoveryDisabledLanes|=c,Pa|=c,n=4;break e}c=ut,ut=n,c!==null&&(ut===null?ut=c:ut.push.apply(ut,c))}n=f}if(c=!1,n!==2)continue}}if(n===1){Rs(t,0),_a(t,a,0,!0);break}e:{switch(l=t,c=n,c){case 0:case 1:throw Error(o(345));case 4:if((a&4194048)!==a)break;case 6:_a(l,a,Mt,!wa);break e;case 2:ut=null;break;case 3:case 5:break;default:throw Error(o(329))}if((a&62914560)===a&&(n=lc+300-Ht(),10<n)){if(_a(l,a,Mt,!wa),sn(l,0,!0)!==0)break e;l.timeoutHandle=Lm(dm.bind(null,l,s,ut,Zn,sc,a,Mt,Pa,As,wa,c,2,-0,0),n);break e}dm(l,s,ut,Zn,sc,a,Mt,Pa,As,wa,c,0,-0,0)}}break}while(!0);Gt(t)}function dm(t,a,s,l,n,c,f,_,$,F,ee,se,W,I){if(t.timeoutHandle=-1,se=a.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(zl={stylesheets:null,count:0,unsuspend:r0},sm(a),se=o0(),se!==null)){t.cancelPendingCommit=se(gm.bind(null,t,a,c,s,l,n,f,_,$,ee,1,W,I)),_a(t,c,f,!F);return}gm(t,a,c,s,l,n,f,_,$)}function Cf(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],c=n.getSnapshot;n=n.value;try{if(!ft(c(),n))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function _a(t,a,s,l){a&=~ac,a&=~Pa,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var n=a;0<n;){var c=31-ht(n),f=1<<c;l[c]=-1,n&=~f}s!==0&&jo(t,s,a)}function Jn(){return(_e&6)===0?(Al(0),!1):!0}function cc(){if(ve!==null){if(Ee===0)var t=ve.return;else t=ve,Pt=Xa=null,Sr(t),Ss=null,vl=0,t=ve;for(;t!==null;)Yu(t.alternate,t),t=t.return;ve=null}}function Rs(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,Qf(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),cc(),Re=t,ve=s=Jt(t.current,null),Ne=a,Ee=0,yt=null,wa=!1,Ms=Vs(t,a),tc=!1,As=Mt=ac=Pa=ka=Be=0,ut=El=null,sc=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var n=31-ht(l),c=1<<n;a|=t[n],l&=~c}return na=a,pn(),s}function um(t,a){be=null,h.H=On,a===ul||a===Sn?(a=Ed(),Ee=3):a===Sd?(a=Ed(),Ee=4):Ee=a===Mu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,yt=a,ve===null&&(Be=1,Un(t,kt(a,t.current)))}function mm(){var t=h.H;return h.H=On,t===null?On:t}function xm(){var t=h.A;return h.A=kf,t}function oc(){Be=4,wa||(Ne&4194048)!==Ne&&Et.current!==null||(Ms=!0),(ka&134217727)===0&&(Pa&134217727)===0||Re===null||_a(Re,Ne,Mt,!1)}function dc(t,a,s){var l=_e;_e|=2;var n=mm(),c=xm();(Re!==t||Ne!==a)&&(Zn=null,Rs(t,a)),a=!1;var f=Be;e:do try{if(Ee!==0&&ve!==null){var _=ve,$=yt;switch(Ee){case 8:cc(),f=6;break e;case 3:case 2:case 9:case 6:Et.current===null&&(a=!0);var F=Ee;if(Ee=0,yt=null,qs(t,_,$,F),s&&Ms){f=0;break e}break;default:F=Ee,Ee=0,yt=null,qs(t,_,$,F)}}_f(),f=Be;break}catch(ee){um(t,ee)}while(!0);return a&&t.shellSuspendCounter++,Pt=Xa=null,_e=l,h.H=n,h.A=c,ve===null&&(Re=null,Ne=0,pn()),f}function _f(){for(;ve!==null;)hm(ve)}function Ef(t,a){var s=_e;_e|=2;var l=mm(),n=xm();Re!==t||Ne!==a?(Zn=null,Vn=Ht()+500,Rs(t,a)):Ms=Vs(t,a);e:do try{if(Ee!==0&&ve!==null){a=ve;var c=yt;t:switch(Ee){case 1:Ee=0,yt=null,qs(t,a,c,1);break;case 2:case 9:if(Cd(c)){Ee=0,yt=null,fm(a);break}a=function(){Ee!==2&&Ee!==9||Re!==t||(Ee=7),Gt(t)},c.then(a,a);break e;case 3:Ee=7;break e;case 4:Ee=5;break e;case 7:Cd(c)?(Ee=0,yt=null,fm(a)):(Ee=0,yt=null,qs(t,a,c,7));break;case 5:var f=null;switch(ve.tag){case 26:f=ve.memoizedState;case 5:case 27:var _=ve;if(!f||Fm(f)){Ee=0,yt=null;var $=_.sibling;if($!==null)ve=$;else{var F=_.return;F!==null?(ve=F,Kn(F)):ve=null}break t}}Ee=0,yt=null,qs(t,a,c,5);break;case 6:Ee=0,yt=null,qs(t,a,c,6);break;case 8:cc(),Be=6;break e;default:throw Error(o(462))}}Mf();break}catch(ee){um(t,ee)}while(!0);return Pt=Xa=null,h.H=l,h.A=n,_e=s,ve!==null?0:(Re=null,Ne=0,pn(),Be)}function Mf(){for(;ve!==null&&!Xt();)hm(ve)}function hm(t){var a=$u(t.alternate,t,na);t.memoizedProps=t.pendingProps,a===null?Kn(t):ve=a}function fm(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=Ou(s,a,a.pendingProps,a.type,void 0,Ne);break;case 11:a=Ou(s,a,a.pendingProps,a.type.render,a.ref,Ne);break;case 5:Sr(a);default:Yu(s,a),a=ve=pd(a,na),a=$u(s,a,na)}t.memoizedProps=t.pendingProps,a===null?Kn(t):ve=a}function qs(t,a,s,l){Pt=Xa=null,Sr(a),Ss=null,vl=0;var n=a.return;try{if(bf(t,n,a,s,Ne)){Be=1,Un(t,kt(s,t.current)),ve=null;return}}catch(c){if(n!==null)throw ve=n,c;Be=1,Un(t,kt(s,t.current)),ve=null;return}a.flags&32768?(Ce||l===1?t=!0:Ms||(Ne&536870912)!==0?t=!1:(wa=t=!0,(l===2||l===9||l===3||l===6)&&(l=Et.current,l!==null&&l.tag===13&&(l.flags|=16384))),pm(a,t)):Kn(a)}function Kn(t){var a=t;do{if((a.flags&32768)!==0){pm(a,wa);return}t=a.return;var s=vf(a.alternate,a,na);if(s!==null){ve=s;return}if(a=a.sibling,a!==null){ve=a;return}ve=a=t}while(a!==null);Be===0&&(Be=5)}function pm(t,a){do{var s=jf(t.alternate,t);if(s!==null){s.flags&=32767,ve=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){ve=t;return}ve=t=s}while(t!==null);Be=6,ve=null}function gm(t,a,s,l,n,c,f,_,$){t.cancelPendingCommit=null;do Fn();while(Ie!==0);if((_e&6)!==0)throw Error(o(327));if(a!==null){if(a===t.current)throw Error(o(177));if(c=a.lanes|a.childLanes,c|=er,ih(t,s,c,f,_,$),t===Re&&(ve=Re=null,Ne=0),Ts=a,Ca=t,Ds=s,nc=c,ic=n,rm=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Rf(en,function(){return Nm(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=h.T,h.T=null,n=H.p,H.p=2,f=_e,_e|=4;try{Nf(t,a,s)}finally{_e=f,H.p=n,h.T=l}}Ie=1,bm(),ym(),vm()}}function bm(){if(Ie===1){Ie=0;var t=Ca,a=Ts,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=h.T,h.T=null;var l=H.p;H.p=2;var n=_e;_e|=4;try{em(a,t);var c=Nc,f=id(t.containerInfo),_=c.focusedElem,$=c.selectionRange;if(f!==_&&_&&_.ownerDocument&&nd(_.ownerDocument.documentElement,_)){if($!==null&&Ki(_)){var F=$.start,ee=$.end;if(ee===void 0&&(ee=F),"selectionStart"in _)_.selectionStart=F,_.selectionEnd=Math.min(ee,_.value.length);else{var se=_.ownerDocument||document,W=se&&se.defaultView||window;if(W.getSelection){var I=W.getSelection(),fe=_.textContent.length,me=Math.min($.start,fe),Te=$.end===void 0?me:Math.min($.end,fe);!I.extend&&me>Te&&(f=Te,Te=me,me=f);var V=ld(_,me),Q=ld(_,Te);if(V&&Q&&(I.rangeCount!==1||I.anchorNode!==V.node||I.anchorOffset!==V.offset||I.focusNode!==Q.node||I.focusOffset!==Q.offset)){var K=se.createRange();K.setStart(V.node,V.offset),I.removeAllRanges(),me>Te?(I.addRange(K),I.extend(Q.node,Q.offset)):(K.setEnd(Q.node,Q.offset),I.addRange(K))}}}}for(se=[],I=_;I=I.parentNode;)I.nodeType===1&&se.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<se.length;_++){var te=se[_];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}ci=!!jc,Nc=jc=null}finally{_e=n,H.p=l,h.T=s}}t.current=a,Ie=2}}function ym(){if(Ie===2){Ie=0;var t=Ca,a=Ts,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=h.T,h.T=null;var l=H.p;H.p=2;var n=_e;_e|=4;try{Fu(t,a.alternate,a)}finally{_e=n,H.p=l,h.T=s}}Ie=3}}function vm(){if(Ie===4||Ie===3){Ie=0,Si();var t=Ca,a=Ts,s=Ds,l=rm;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ie=5:(Ie=0,Ts=Ca=null,jm(t,t.pendingLanes));var n=t.pendingLanes;if(n===0&&(Sa=null),Ei(s),a=a.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(Xs,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=h.T,n=H.p,H.p=2,h.T=null;try{for(var c=t.onRecoverableError,f=0;f<l.length;f++){var _=l[f];c(_.value,{componentStack:_.stack})}}finally{h.T=a,H.p=n}}(Ds&3)!==0&&Fn(),Gt(t),n=t.pendingLanes,(s&4194090)!==0&&(n&42)!==0?t===rc?Ml++:(Ml=0,rc=t):Ml=0,Al(0)}}function jm(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,ol(a)))}function Fn(t){return bm(),ym(),vm(),Nm()}function Nm(){if(Ie!==5)return!1;var t=Ca,a=nc;nc=0;var s=Ei(Ds),l=h.T,n=H.p;try{H.p=32>s?32:s,h.T=null,s=ic,ic=null;var c=Ca,f=Ds;if(Ie=0,Ts=Ca=null,Ds=0,(_e&6)!==0)throw Error(o(331));var _=_e;if(_e|=4,nm(c.current),am(c,c.current,f,s),_e=_,Al(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(Xs,c)}catch{}return!0}finally{H.p=n,h.T=l,jm(t,a)}}function wm(t,a,s){a=kt(s,a),a=Br(t.stateNode,a,2),t=pa(t,a,2),t!==null&&(Zs(t,2),Gt(t))}function De(t,a,s){if(t.tag===3)wm(t,t,s);else for(;a!==null;){if(a.tag===3){wm(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Sa===null||!Sa.has(l))){t=kt(s,t),s=_u(2),l=pa(a,s,2),l!==null&&(Eu(s,l,a,t),Zs(l,2),Gt(l));break}}a=a.return}}function uc(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Sf;var n=new Set;l.set(a,n)}else n=l.get(a),n===void 0&&(n=new Set,l.set(a,n));n.has(s)||(tc=!0,n.add(s),t=Af.bind(null,t,a,s),a.then(t,t))}function Af(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Re===t&&(Ne&s)===s&&(Be===4||Be===3&&(Ne&62914560)===Ne&&300>Ht()-lc?(_e&2)===0&&Rs(t,0):ac|=s,As===Ne&&(As=0)),Gt(t)}function km(t,a){a===0&&(a=vo()),t=fs(t,a),t!==null&&(Zs(t,a),Gt(t))}function Tf(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),km(t,s)}function Df(t,a){var s=0;switch(t.tag){case 13:var l=t.stateNode,n=t.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(a),km(t,s)}function Rf(t,a){return Qs(t,a)}var Pn=null,Os=null,mc=!1,Wn=!1,xc=!1,Wa=0;function Gt(t){t!==Os&&t.next===null&&(Os===null?Pn=Os=t:Os=Os.next=t),Wn=!0,mc||(mc=!0,Of())}function Al(t,a){if(!xc&&Wn){xc=!0;do for(var s=!1,l=Pn;l!==null;){if(t!==0){var n=l.pendingLanes;if(n===0)var c=0;else{var f=l.suspendedLanes,_=l.pingedLanes;c=(1<<31-ht(42|t)+1)-1,c&=n&~(f&~_),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(s=!0,Em(l,c))}else c=Ne,c=sn(l,l===Re?c:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(c&3)===0||Vs(l,c)||(s=!0,Em(l,c));l=l.next}while(s);xc=!1}}function qf(){Sm()}function Sm(){Wn=mc=!1;var t=0;Wa!==0&&(Yf()&&(t=Wa),Wa=0);for(var a=Ht(),s=null,l=Pn;l!==null;){var n=l.next,c=Cm(l,a);c===0?(l.next=null,s===null?Pn=n:s.next=n,n===null&&(Os=s)):(s=l,(t!==0||(c&3)!==0)&&(Wn=!0)),l=n}Al(t)}function Cm(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,n=t.expirationTimes,c=t.pendingLanes&-62914561;0<c;){var f=31-ht(c),_=1<<f,$=n[f];$===-1?((_&s)===0||(_&l)!==0)&&(n[f]=nh(_,a)):$<=a&&(t.expiredLanes|=_),c&=~_}if(a=Re,s=Ne,s=sn(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(Ee===2||Ee===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ye(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Vs(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&Ye(l),Ei(s)){case 2:case 8:s=go;break;case 32:s=en;break;case 268435456:s=bo;break;default:s=en}return l=_m.bind(null,t),s=Qs(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&Ye(l),t.callbackPriority=2,t.callbackNode=null,2}function _m(t,a){if(Ie!==0&&Ie!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Fn()&&t.callbackNode!==s)return null;var l=Ne;return l=sn(t,t===Re?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(om(t,l,a),Cm(t,Ht()),t.callbackNode!=null&&t.callbackNode===s?_m.bind(null,t):null)}function Em(t,a){if(Fn())return null;om(t,a,!0)}function Of(){Xf(function(){(_e&6)!==0?Qs(po,qf):Sm()})}function hc(){return Wa===0&&(Wa=yo()),Wa}function Mm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:on(""+t)}function Am(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function zf(t,a,s,l,n){if(a==="submit"&&s&&s.stateNode===n){var c=Mm((n[rt]||null).action),f=l.submitter;f&&(a=(a=f[rt]||null)?Mm(a.formAction):f.getAttribute("formAction"),a!==null&&(c=a,f=null));var _=new xn("action","action",null,l,n);t.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wa!==0){var $=f?Am(n,f):new FormData(n);qr(s,{pending:!0,data:$,method:n.method,action:c},null,$)}}else typeof c=="function"&&(_.preventDefault(),$=f?Am(n,f):new FormData(n),qr(s,{pending:!0,data:$,method:n.method,action:c},c,$))},currentTarget:n}]})}}for(var fc=0;fc<Ii.length;fc++){var pc=Ii[fc],Hf=pc.toLowerCase(),Lf=pc[0].toUpperCase()+pc.slice(1);Rt(Hf,"on"+Lf)}Rt(od,"onAnimationEnd"),Rt(dd,"onAnimationIteration"),Rt(ud,"onAnimationStart"),Rt("dblclick","onDoubleClick"),Rt("focusin","onFocus"),Rt("focusout","onBlur"),Rt(ef,"onTransitionRun"),Rt(tf,"onTransitionStart"),Rt(af,"onTransitionCancel"),Rt(md,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),za("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),za("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),za("onBeforeInput",["compositionend","keypress","textInput","paste"]),za("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),za("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),za("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function Tm(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],n=l.event;l=l.listeners;e:{var c=void 0;if(a)for(var f=l.length-1;0<=f;f--){var _=l[f],$=_.instance,F=_.currentTarget;if(_=_.listener,$!==c&&n.isPropagationStopped())break e;c=_,n.currentTarget=F;try{c(n)}catch(ee){Bn(ee)}n.currentTarget=null,c=$}else for(f=0;f<l.length;f++){if(_=l[f],$=_.instance,F=_.currentTarget,_=_.listener,$!==c&&n.isPropagationStopped())break e;c=_,n.currentTarget=F;try{c(n)}catch(ee){Bn(ee)}n.currentTarget=null,c=$}}}}function je(t,a){var s=a[Mi];s===void 0&&(s=a[Mi]=new Set);var l=t+"__bubble";s.has(l)||(Dm(a,t,2,!1),s.add(l))}function gc(t,a,s){var l=0;a&&(l|=4),Dm(s,t,l,a)}var In="_reactListening"+Math.random().toString(36).slice(2);function bc(t){if(!t[In]){t[In]=!0,So.forEach(function(s){s!=="selectionchange"&&(Bf.has(s)||gc(s,!1,t),gc(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[In]||(a[In]=!0,gc("selectionchange",!1,a))}}function Dm(t,a,s,l){switch(ax(a)){case 2:var n=m0;break;case 8:n=x0;break;default:n=Dc}s=n.bind(null,a,s,t),n=void 0,!Ui||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),l?n!==void 0?t.addEventListener(a,s,{capture:!0,passive:n}):t.addEventListener(a,s,!0):n!==void 0?t.addEventListener(a,s,{passive:n}):t.addEventListener(a,s,!1)}function yc(t,a,s,l,n){var c=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var f=l.tag;if(f===3||f===4){var _=l.stateNode.containerInfo;if(_===n)break;if(f===4)for(f=l.return;f!==null;){var $=f.tag;if(($===3||$===4)&&f.stateNode.containerInfo===n)return;f=f.return}for(;_!==null;){if(f=as(_),f===null)return;if($=f.tag,$===5||$===6||$===26||$===27){l=c=f;continue e}_=_.parentNode}}l=l.return}Bo(function(){var F=c,ee=Li(s),se=[];e:{var W=xd.get(t);if(W!==void 0){var I=xn,fe=t;switch(t){case"keypress":if(un(s)===0)break e;case"keydown":case"keyup":I=Dh;break;case"focusin":fe="focus",I=Qi;break;case"focusout":fe="blur",I=Qi;break;case"beforeblur":case"afterblur":I=Qi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Go;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=Oh;break;case od:case dd:case ud:I=wh;break;case md:I=Hh;break;case"scroll":case"scrollend":I=bh;break;case"wheel":I=Bh;break;case"copy":case"cut":case"paste":I=Sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Qo;break;case"toggle":case"beforetoggle":I=$h}var me=(a&4)!==0,Te=!me&&(t==="scroll"||t==="scrollend"),V=me?W!==null?W+"Capture":null:W;me=[];for(var Q=F,K;Q!==null;){var te=Q;if(K=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||K===null||V===null||(te=Fs(Q,V),te!=null&&me.push(Dl(Q,te,K))),Te)break;Q=Q.return}0<me.length&&(W=new I(W,fe,null,s,ee),se.push({event:W,listeners:me}))}}if((a&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",W&&s!==Hi&&(fe=s.relatedTarget||s.fromElement)&&(as(fe)||fe[ts]))break e;if((I||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,I?(fe=s.relatedTarget||s.toElement,I=F,fe=fe?as(fe):null,fe!==null&&(Te=m(fe),me=fe.tag,fe!==Te||me!==5&&me!==27&&me!==6)&&(fe=null)):(I=null,fe=F),I!==fe)){if(me=Go,te="onMouseLeave",V="onMouseEnter",Q="mouse",(t==="pointerout"||t==="pointerover")&&(me=Qo,te="onPointerLeave",V="onPointerEnter",Q="pointer"),Te=I==null?W:Ks(I),K=fe==null?W:Ks(fe),W=new me(te,Q+"leave",I,s,ee),W.target=Te,W.relatedTarget=K,te=null,as(ee)===F&&(me=new me(V,Q+"enter",fe,s,ee),me.target=K,me.relatedTarget=Te,te=me),Te=te,I&&fe)t:{for(me=I,V=fe,Q=0,K=me;K;K=zs(K))Q++;for(K=0,te=V;te;te=zs(te))K++;for(;0<Q-K;)me=zs(me),Q--;for(;0<K-Q;)V=zs(V),K--;for(;Q--;){if(me===V||V!==null&&me===V.alternate)break t;me=zs(me),V=zs(V)}me=null}else me=null;I!==null&&Rm(se,W,I,me,!1),fe!==null&&Te!==null&&Rm(se,Te,fe,me,!0)}}e:{if(W=F?Ks(F):window,I=W.nodeName&&W.nodeName.toLowerCase(),I==="select"||I==="input"&&W.type==="file")var de=Wo;else if(Fo(W))if(Io)de=Ph;else{de=Kh;var ye=Jh}else I=W.nodeName,!I||I.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?F&&zi(F.elementType)&&(de=Wo):de=Fh;if(de&&(de=de(t,F))){Po(se,de,s,ee);break e}ye&&ye(t,W,F),t==="focusout"&&F&&W.type==="number"&&F.memoizedProps.value!=null&&Oi(W,"number",W.value)}switch(ye=F?Ks(F):window,t){case"focusin":(Fo(ye)||ye.contentEditable==="true")&&(ms=ye,Fi=F,ll=null);break;case"focusout":ll=Fi=ms=null;break;case"mousedown":Pi=!0;break;case"contextmenu":case"mouseup":case"dragend":Pi=!1,rd(se,s,ee);break;case"selectionchange":if(Ih)break;case"keydown":case"keyup":rd(se,s,ee)}var ue;if(Vi)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else us?Jo(t,s)&&(xe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(xe="onCompositionStart");xe&&(Xo&&s.locale!=="ko"&&(us||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&us&&(ue=Uo()):(ma=ee,$i="value"in ma?ma.value:ma.textContent,us=!0)),ye=ei(F,xe),0<ye.length&&(xe=new Yo(xe,t,null,s,ee),se.push({event:xe,listeners:ye}),ue?xe.data=ue:(ue=Ko(s),ue!==null&&(xe.data=ue)))),(ue=Yh?Qh(t,s):Xh(t,s))&&(xe=ei(F,"onBeforeInput"),0<xe.length&&(ye=new Yo("onBeforeInput","beforeinput",null,s,ee),se.push({event:ye,listeners:xe}),ye.data=ue)),zf(se,t,F,s,ee)}Tm(se,a)})}function Dl(t,a,s){return{instance:t,listener:a,currentTarget:s}}function ei(t,a){for(var s=a+"Capture",l=[];t!==null;){var n=t,c=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||c===null||(n=Fs(t,s),n!=null&&l.unshift(Dl(t,n,c)),n=Fs(t,a),n!=null&&l.push(Dl(t,n,c))),t.tag===3)return l;t=t.return}return[]}function zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Rm(t,a,s,l,n){for(var c=a._reactName,f=[];s!==null&&s!==l;){var _=s,$=_.alternate,F=_.stateNode;if(_=_.tag,$!==null&&$===l)break;_!==5&&_!==26&&_!==27||F===null||($=F,n?(F=Fs(s,c),F!=null&&f.unshift(Dl(s,F,$))):n||(F=Fs(s,c),F!=null&&f.push(Dl(s,F,$)))),s=s.return}f.length!==0&&t.push({event:a,listeners:f})}var Uf=/\r\n?/g,$f=/\u0000|\uFFFD/g;function qm(t){return(typeof t=="string"?t:""+t).replace(Uf,`
`).replace($f,"")}function Om(t,a){return a=qm(a),qm(t)===a}function ti(){}function Ae(t,a,s,l,n,c){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||cs(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&cs(t,""+l);break;case"className":nn(t,"class",l);break;case"tabIndex":nn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":nn(t,s,l);break;case"style":Ho(t,l,c);break;case"data":if(a!=="object"){nn(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=on(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(s==="formAction"?(a!=="input"&&Ae(t,a,"name",n.name,n,null),Ae(t,a,"formEncType",n.formEncType,n,null),Ae(t,a,"formMethod",n.formMethod,n,null),Ae(t,a,"formTarget",n.formTarget,n,null)):(Ae(t,a,"encType",n.encType,n,null),Ae(t,a,"method",n.method,n,null),Ae(t,a,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=on(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=ti);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=on(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":je("beforetoggle",t),je("toggle",t),ln(t,"popover",l);break;case"xlinkActuate":Vt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ln(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ph.get(s)||s,ln(t,s,l))}}function vc(t,a,s,l,n,c){switch(s){case"style":Ho(t,l,c);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(o(60));t.innerHTML=s}}break;case"children":typeof l=="string"?cs(t,l):(typeof l=="number"||typeof l=="bigint")&&cs(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Co.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),a=s.slice(2,n?s.length-7:void 0),c=t[rt]||null,c=c!=null?c[s]:null,typeof c=="function"&&t.removeEventListener(a,c,n),typeof l=="function")){typeof c!="function"&&c!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,n);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):ln(t,s,l)}}}function et(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,n=!1,c;for(c in s)if(s.hasOwnProperty(c)){var f=s[c];if(f!=null)switch(c){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Ae(t,a,c,f,s,null)}}n&&Ae(t,a,"srcSet",s.srcSet,s,null),l&&Ae(t,a,"src",s.src,s,null);return;case"input":je("invalid",t);var _=c=f=n=null,$=null,F=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":n=ee;break;case"type":f=ee;break;case"checked":$=ee;break;case"defaultChecked":F=ee;break;case"value":c=ee;break;case"defaultValue":_=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,a));break;default:Ae(t,a,l,ee,s,null)}}Ro(t,c,_,$,F,f,n,!1),rn(t);return;case"select":je("invalid",t),l=f=c=null;for(n in s)if(s.hasOwnProperty(n)&&(_=s[n],_!=null))switch(n){case"value":c=_;break;case"defaultValue":f=_;break;case"multiple":l=_;default:Ae(t,a,n,_,s,null)}a=c,s=f,t.multiple=!!l,a!=null?rs(t,!!l,a,!1):s!=null&&rs(t,!!l,s,!0);return;case"textarea":je("invalid",t),c=n=l=null;for(f in s)if(s.hasOwnProperty(f)&&(_=s[f],_!=null))switch(f){case"value":l=_;break;case"defaultValue":n=_;break;case"children":c=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(o(91));break;default:Ae(t,a,f,_,s,null)}Oo(t,l,n,c),rn(t);return;case"option":for($ in s)if(s.hasOwnProperty($)&&(l=s[$],l!=null))switch($){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ae(t,a,$,l,s,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Tl.length;l++)je(Tl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in s)if(s.hasOwnProperty(F)&&(l=s[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,a));default:Ae(t,a,F,l,s,null)}return;default:if(zi(a)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&vc(t,a,ee,l,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(l=s[_],l!=null&&Ae(t,a,_,l,s,null))}function Gf(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,c=null,f=null,_=null,$=null,F=null,ee=null;for(I in s){var se=s[I];if(s.hasOwnProperty(I)&&se!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":$=se;default:l.hasOwnProperty(I)||Ae(t,a,I,null,l,se)}}for(var W in l){var I=l[W];if(se=s[W],l.hasOwnProperty(W)&&(I!=null||se!=null))switch(W){case"type":c=I;break;case"name":n=I;break;case"checked":F=I;break;case"defaultChecked":ee=I;break;case"value":f=I;break;case"defaultValue":_=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(137,a));break;default:I!==se&&Ae(t,a,W,I,l,se)}}qi(t,f,_,$,F,ee,c,n);return;case"select":I=f=_=W=null;for(c in s)if($=s[c],s.hasOwnProperty(c)&&$!=null)switch(c){case"value":break;case"multiple":I=$;default:l.hasOwnProperty(c)||Ae(t,a,c,null,l,$)}for(n in l)if(c=l[n],$=s[n],l.hasOwnProperty(n)&&(c!=null||$!=null))switch(n){case"value":W=c;break;case"defaultValue":_=c;break;case"multiple":f=c;default:c!==$&&Ae(t,a,n,c,l,$)}a=_,s=f,l=I,W!=null?rs(t,!!s,W,!1):!!l!=!!s&&(a!=null?rs(t,!!s,a,!0):rs(t,!!s,s?[]:"",!1));return;case"textarea":I=W=null;for(_ in s)if(n=s[_],s.hasOwnProperty(_)&&n!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ae(t,a,_,null,l,n)}for(f in l)if(n=l[f],c=s[f],l.hasOwnProperty(f)&&(n!=null||c!=null))switch(f){case"value":W=n;break;case"defaultValue":I=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(o(91));break;default:n!==c&&Ae(t,a,f,n,l,c)}qo(t,W,I);return;case"option":for(var fe in s)if(W=s[fe],s.hasOwnProperty(fe)&&W!=null&&!l.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:Ae(t,a,fe,null,l,W)}for($ in l)if(W=l[$],I=s[$],l.hasOwnProperty($)&&W!==I&&(W!=null||I!=null))switch($){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Ae(t,a,$,W,l,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in s)W=s[me],s.hasOwnProperty(me)&&W!=null&&!l.hasOwnProperty(me)&&Ae(t,a,me,null,l,W);for(F in l)if(W=l[F],I=s[F],l.hasOwnProperty(F)&&W!==I&&(W!=null||I!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,a));break;default:Ae(t,a,F,W,l,I)}return;default:if(zi(a)){for(var Te in s)W=s[Te],s.hasOwnProperty(Te)&&W!==void 0&&!l.hasOwnProperty(Te)&&vc(t,a,Te,void 0,l,W);for(ee in l)W=l[ee],I=s[ee],!l.hasOwnProperty(ee)||W===I||W===void 0&&I===void 0||vc(t,a,ee,W,l,I);return}}for(var V in s)W=s[V],s.hasOwnProperty(V)&&W!=null&&!l.hasOwnProperty(V)&&Ae(t,a,V,null,l,W);for(se in l)W=l[se],I=s[se],!l.hasOwnProperty(se)||W===I||W==null&&I==null||Ae(t,a,se,W,l,I)}var jc=null,Nc=null;function ai(t){return t.nodeType===9?t:t.ownerDocument}function zm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hm(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function wc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var kc=null;function Yf(){var t=window.event;return t&&t.type==="popstate"?t===kc?!1:(kc=t,!0):(kc=null,!1)}var Lm=typeof setTimeout=="function"?setTimeout:void 0,Qf=typeof clearTimeout=="function"?clearTimeout:void 0,Bm=typeof Promise=="function"?Promise:void 0,Xf=typeof queueMicrotask=="function"?queueMicrotask:typeof Bm<"u"?function(t){return Bm.resolve(null).then(t).catch(Vf)}:Lm;function Vf(t){setTimeout(function(){throw t})}function Ea(t){return t==="head"}function Um(t,a){var s=a,l=0,n=0;do{var c=s.nextSibling;if(t.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(0<l&&8>l){s=l;var f=t.ownerDocument;if(s&1&&Rl(f.documentElement),s&2&&Rl(f.body),s&4)for(s=f.head,Rl(s),f=s.firstChild;f;){var _=f.nextSibling,$=f.nodeName;f[Js]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&f.rel.toLowerCase()==="stylesheet"||s.removeChild(f),f=_}}if(n===0){t.removeChild(c),$l(a);return}n--}else s==="$"||s==="$?"||s==="$!"?n++:l=s.charCodeAt(0)-48;else l=0;s=c}while(s);$l(a)}function Sc(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Sc(s),Ai(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Zf(t,a,s,l){for(;t.nodeType===1;){var n=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Js])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(c=t.getAttribute("rel"),c==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(c!==n.rel||t.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||t.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||t.getAttribute("title")!==(n.title==null?null:n.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(c=t.getAttribute("src"),(c!==(n.src==null?null:n.src)||t.getAttribute("type")!==(n.type==null?null:n.type)||t.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&c&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var c=n.name==null?null:""+n.name;if(n.type==="hidden"&&t.getAttribute("name")===c)return t}else return t;if(t=Ot(t.nextSibling),t===null)break}return null}function Jf(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Ot(t.nextSibling),t===null))return null;return t}function Cc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Kf(t,a){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ot(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}var _c=null;function $m(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return t;a--}else s==="/$"&&a++}t=t.previousSibling}return null}function Gm(t,a,s){switch(a=ai(s),t){case"html":if(t=a.documentElement,!t)throw Error(o(452));return t;case"head":if(t=a.head,!t)throw Error(o(453));return t;case"body":if(t=a.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Rl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ai(t)}var At=new Map,Ym=new Set;function si(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ia=H.d;H.d={f:Ff,r:Pf,D:Wf,C:If,L:e0,m:t0,X:s0,S:a0,M:l0};function Ff(){var t=ia.f(),a=Jn();return t||a}function Pf(t){var a=ss(t);a!==null&&a.tag===5&&a.type==="form"?ou(a):ia.r(t)}var Hs=typeof document>"u"?null:document;function Qm(t,a,s){var l=Hs;if(l&&typeof a=="string"&&a){var n=wt(a);n='link[rel="'+t+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),Ym.has(n)||(Ym.add(n),t={rel:t,crossOrigin:s,href:a},l.querySelector(n)===null&&(a=l.createElement("link"),et(a,"link",t),Je(a),l.head.appendChild(a)))}}function Wf(t){ia.D(t),Qm("dns-prefetch",t,null)}function If(t,a){ia.C(t,a),Qm("preconnect",t,a)}function e0(t,a,s){ia.L(t,a,s);var l=Hs;if(l&&t&&a){var n='link[rel="preload"][as="'+wt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+wt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+wt(s.imageSizes)+'"]')):n+='[href="'+wt(t)+'"]';var c=n;switch(a){case"style":c=Ls(t);break;case"script":c=Bs(t)}At.has(c)||(t=S({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),At.set(c,t),l.querySelector(n)!==null||a==="style"&&l.querySelector(ql(c))||a==="script"&&l.querySelector(Ol(c))||(a=l.createElement("link"),et(a,"link",t),Je(a),l.head.appendChild(a)))}}function t0(t,a){ia.m(t,a);var s=Hs;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",n='link[rel="modulepreload"][as="'+wt(l)+'"][href="'+wt(t)+'"]',c=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Bs(t)}if(!At.has(c)&&(t=S({rel:"modulepreload",href:t},a),At.set(c,t),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ol(c)))return}l=s.createElement("link"),et(l,"link",t),Je(l),s.head.appendChild(l)}}}function a0(t,a,s){ia.S(t,a,s);var l=Hs;if(l&&t){var n=ls(l).hoistableStyles,c=Ls(t);a=a||"default";var f=n.get(c);if(!f){var _={loading:0,preload:null};if(f=l.querySelector(ql(c)))_.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":a},s),(s=At.get(c))&&Ec(t,s);var $=f=l.createElement("link");Je($),et($,"link",t),$._p=new Promise(function(F,ee){$.onload=F,$.onerror=ee}),$.addEventListener("load",function(){_.loading|=1}),$.addEventListener("error",function(){_.loading|=2}),_.loading|=4,li(f,a,l)}f={type:"stylesheet",instance:f,count:1,state:_},n.set(c,f)}}}function s0(t,a){ia.X(t,a);var s=Hs;if(s&&t){var l=ls(s).hoistableScripts,n=Bs(t),c=l.get(n);c||(c=s.querySelector(Ol(n)),c||(t=S({src:t,async:!0},a),(a=At.get(n))&&Mc(t,a),c=s.createElement("script"),Je(c),et(c,"link",t),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},l.set(n,c))}}function l0(t,a){ia.M(t,a);var s=Hs;if(s&&t){var l=ls(s).hoistableScripts,n=Bs(t),c=l.get(n);c||(c=s.querySelector(Ol(n)),c||(t=S({src:t,async:!0,type:"module"},a),(a=At.get(n))&&Mc(t,a),c=s.createElement("script"),Je(c),et(c,"link",t),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},l.set(n,c))}}function Xm(t,a,s,l){var n=(n=oe.current)?si(n):null;if(!n)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Ls(s.href),s=ls(n).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ls(s.href);var c=ls(n).hoistableStyles,f=c.get(t);if(f||(n=n.ownerDocument||n,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(t,f),(c=n.querySelector(ql(t)))&&!c._p&&(f.instance=c,f.state.loading=5),At.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},At.set(t,s),c||n0(n,t,s,f.state))),a&&l===null)throw Error(o(528,""));return f}if(a&&l!==null)throw Error(o(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Bs(s),s=ls(n).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Ls(t){return'href="'+wt(t)+'"'}function ql(t){return'link[rel="stylesheet"]['+t+"]"}function Vm(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function n0(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),et(a,"link",s),Je(a),t.head.appendChild(a))}function Bs(t){return'[src="'+wt(t)+'"]'}function Ol(t){return"script[async]"+t}function Zm(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+wt(s.href)+'"]');if(l)return a.instance=l,Je(l),l;var n=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Je(l),et(l,"style",n),li(l,s.precedence,t),a.instance=l;case"stylesheet":n=Ls(s.href);var c=t.querySelector(ql(n));if(c)return a.state.loading|=4,a.instance=c,Je(c),c;l=Vm(s),(n=At.get(n))&&Ec(l,n),c=(t.ownerDocument||t).createElement("link"),Je(c);var f=c;return f._p=new Promise(function(_,$){f.onload=_,f.onerror=$}),et(c,"link",l),a.state.loading|=4,li(c,s.precedence,t),a.instance=c;case"script":return c=Bs(s.src),(n=t.querySelector(Ol(c)))?(a.instance=n,Je(n),n):(l=s,(n=At.get(c))&&(l=S({},s),Mc(l,n)),t=t.ownerDocument||t,n=t.createElement("script"),Je(n),et(n,"link",l),t.head.appendChild(n),a.instance=n);case"void":return null;default:throw Error(o(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,li(l,s.precedence,t));return a.instance}function li(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,c=n,f=0;f<l.length;f++){var _=l[f];if(_.dataset.precedence===a)c=_;else if(c!==n)break}c?c.parentNode.insertBefore(t,c.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Ec(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Mc(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var ni=null;function Jm(t,a,s){if(ni===null){var l=new Map,n=ni=new Map;n.set(s,l)}else n=ni,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),n=0;n<s.length;n++){var c=s[n];if(!(c[Js]||c[st]||t==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var f=c.getAttribute(a)||"";f=t+f;var _=l.get(f);_?_.push(c):l.set(f,[c])}}return l}function Km(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function i0(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Fm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var zl=null;function r0(){}function c0(t,a,s){if(zl===null)throw Error(o(475));var l=zl;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var n=Ls(s.href),c=t.querySelector(ql(n));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=ii.bind(l),t.then(l,l)),a.state.loading|=4,a.instance=c,Je(c);return}c=t.ownerDocument||t,s=Vm(s),(n=At.get(n))&&Ec(s,n),c=c.createElement("link"),Je(c);var f=c;f._p=new Promise(function(_,$){f.onload=_,f.onerror=$}),et(c,"link",s),a.instance=c}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(l.count++,a=ii.bind(l),t.addEventListener("load",a),t.addEventListener("error",a))}}function o0(){if(zl===null)throw Error(o(475));var t=zl;return t.stylesheets&&t.count===0&&Ac(t,t.stylesheets),0<t.count?function(a){var s=setTimeout(function(){if(t.stylesheets&&Ac(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(s)}}:null}function ii(){if(this.count--,this.count===0){if(this.stylesheets)Ac(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ri=null;function Ac(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ri=new Map,a.forEach(d0,t),ri=null,ii.call(t))}function d0(t,a){if(!(a.state.loading&4)){var s=ri.get(t);if(s)var l=s.get(null);else{s=new Map,ri.set(t,s);for(var n=t.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<n.length;c++){var f=n[c];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(s.set(f.dataset.precedence,f),l=f)}l&&s.set(null,l)}n=a.instance,f=n.getAttribute("data-precedence"),c=s.get(f)||l,c===l&&s.set(null,n),s.set(f,n),this.count++,l=ii.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),c?c.parentNode.insertBefore(n,c.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(n,t.firstChild)),a.state.loading|=4}}var Hl={$$typeof:T,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function u0(t,a,s,l,n,c,f,_){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=c,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Pm(t,a,s,l,n,c,f,_,$,F,ee,se){return t=new u0(t,a,s,f,_,$,F,se),a=1,c===!0&&(a|=24),c=pt(3,null,null,a),t.current=c,c.stateNode=t,a=ur(),a.refCount++,t.pooledCache=a,a.refCount++,c.memoizedState={element:l,isDehydrated:s,cache:a},fr(c),t}function Wm(t){return t?(t=ps,t):ps}function Im(t,a,s,l,n,c){n=Wm(n),l.context===null?l.context=n:l.pendingContext=n,l=fa(a),l.payload={element:s},c=c===void 0?null:c,c!==null&&(l.callback=c),s=pa(t,l,a),s!==null&&(jt(s,t,a),xl(s,t,a))}function ex(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Tc(t,a){ex(t,a),(t=t.alternate)&&ex(t,a)}function tx(t){if(t.tag===13){var a=fs(t,67108864);a!==null&&jt(a,t,67108864),Tc(t,67108864)}}var ci=!0;function m0(t,a,s,l){var n=h.T;h.T=null;var c=H.p;try{H.p=2,Dc(t,a,s,l)}finally{H.p=c,h.T=n}}function x0(t,a,s,l){var n=h.T;h.T=null;var c=H.p;try{H.p=8,Dc(t,a,s,l)}finally{H.p=c,h.T=n}}function Dc(t,a,s,l){if(ci){var n=Rc(l);if(n===null)yc(t,a,l,oi,s),sx(t,l);else if(f0(n,t,a,s,l))l.stopPropagation();else if(sx(t,l),a&4&&-1<h0.indexOf(t)){for(;n!==null;){var c=ss(n);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=Oa(c.pendingLanes);if(f!==0){var _=c;for(_.pendingLanes|=2,_.entangledLanes|=2;f;){var $=1<<31-ht(f);_.entanglements[1]|=$,f&=~$}Gt(c),(_e&6)===0&&(Vn=Ht()+500,Al(0))}}break;case 13:_=fs(c,2),_!==null&&jt(_,c,2),Jn(),Tc(c,2)}if(c=Rc(l),c===null&&yc(t,a,l,oi,s),c===n)break;n=c}n!==null&&l.stopPropagation()}else yc(t,a,l,null,s)}}function Rc(t){return t=Li(t),qc(t)}var oi=null;function qc(t){if(oi=null,t=as(t),t!==null){var a=m(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=g(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return oi=t,null}function ax(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wx()){case po:return 2;case go:return 8;case en:case Ix:return 32;case bo:return 268435456;default:return 32}default:return 32}}var Oc=!1,Ma=null,Aa=null,Ta=null,Ll=new Map,Bl=new Map,Da=[],h0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sx(t,a){switch(t){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Ll.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(a.pointerId)}}function Ul(t,a,s,l,n,c){return t===null||t.nativeEvent!==c?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:c,targetContainers:[n]},a!==null&&(a=ss(a),a!==null&&tx(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),t)}function f0(t,a,s,l,n){switch(a){case"focusin":return Ma=Ul(Ma,t,a,s,l,n),!0;case"dragenter":return Aa=Ul(Aa,t,a,s,l,n),!0;case"mouseover":return Ta=Ul(Ta,t,a,s,l,n),!0;case"pointerover":var c=n.pointerId;return Ll.set(c,Ul(Ll.get(c)||null,t,a,s,l,n)),!0;case"gotpointercapture":return c=n.pointerId,Bl.set(c,Ul(Bl.get(c)||null,t,a,s,l,n)),!0}return!1}function lx(t){var a=as(t.target);if(a!==null){var s=m(a);if(s!==null){if(a=s.tag,a===13){if(a=g(s),a!==null){t.blockedOn=a,rh(t.priority,function(){if(s.tag===13){var l=vt();l=_i(l);var n=fs(s,l);n!==null&&jt(n,s,l),Tc(s,l)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function di(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=Rc(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Hi=l,s.target.dispatchEvent(l),Hi=null}else return a=ss(s),a!==null&&tx(a),t.blockedOn=s,!1;a.shift()}return!0}function nx(t,a,s){di(t)&&s.delete(a)}function p0(){Oc=!1,Ma!==null&&di(Ma)&&(Ma=null),Aa!==null&&di(Aa)&&(Aa=null),Ta!==null&&di(Ta)&&(Ta=null),Ll.forEach(nx),Bl.forEach(nx)}function ui(t,a){t.blockedOn===a&&(t.blockedOn=null,Oc||(Oc=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,p0)))}var mi=null;function ix(t){mi!==t&&(mi=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mi===t&&(mi=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],n=t[a+2];if(typeof l!="function"){if(qc(l||s)===null)continue;break}var c=ss(s);c!==null&&(t.splice(a,3),a-=3,qr(c,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function $l(t){function a($){return ui($,t)}Ma!==null&&ui(Ma,t),Aa!==null&&ui(Aa,t),Ta!==null&&ui(Ta,t),Ll.forEach(a),Bl.forEach(a);for(var s=0;s<Da.length;s++){var l=Da[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Da.length&&(s=Da[0],s.blockedOn===null);)lx(s),s.blockedOn===null&&Da.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],c=s[l+1],f=n[rt]||null;if(typeof c=="function")f||ix(s);else if(f){var _=null;if(c&&c.hasAttribute("formAction")){if(n=c,f=c[rt]||null)_=f.formAction;else if(qc(n)!==null)continue}else _=f.action;typeof _=="function"?s[l+1]=_:(s.splice(l,3),l-=3),ix(s)}}}function zc(t){this._internalRoot=t}xi.prototype.render=zc.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(o(409));var s=a.current,l=vt();Im(s,l,t,a,null,null)},xi.prototype.unmount=zc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Im(t.current,2,null,t,null,null),Jn(),a[ts]=null}};function xi(t){this._internalRoot=t}xi.prototype.unstable_scheduleHydration=function(t){if(t){var a=wo();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Da.length&&a!==0&&a<Da[s].priority;s++);Da.splice(s,0,t),s===0&&lx(t)}};var rx=i.version;if(rx!=="19.1.1")throw Error(o(527,rx,"19.1.1"));H.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=p(a),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var g0={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:h,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hi.isDisabled&&hi.supportsFiber)try{Xs=hi.inject(g0),xt=hi}catch{}}return Yl.createRoot=function(t,a){if(!u(t))throw Error(o(299));var s=!1,l="",n=wu,c=ku,f=Su,_=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(n=a.onUncaughtError),a.onCaughtError!==void 0&&(c=a.onCaughtError),a.onRecoverableError!==void 0&&(f=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(_=a.unstable_transitionCallbacks)),a=Pm(t,1,!1,null,null,s,l,n,c,f,_,null),t[ts]=a.current,bc(t),new zc(a)},Yl.hydrateRoot=function(t,a,s){if(!u(t))throw Error(o(299));var l=!1,n="",c=wu,f=ku,_=Su,$=null,F=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(c=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&($=s.unstable_transitionCallbacks),s.formState!==void 0&&(F=s.formState)),a=Pm(t,1,!0,a,s??null,l,n,c,f,_,$,F),a.context=Wm(null),s=a.current,l=vt(),l=_i(l),n=fa(l),n.callback=null,pa(s,n,l),s=l,a.current.lanes=s,Zs(a,s),Gt(a),t[ts]=a.current,bc(t),new xi(a)},Yl.version="19.1.1",Yl}var gx;function E0(){if(gx)return Bc.exports;gx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),Bc.exports=_0(),Bc.exports}var M0=E0();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bx="popstate";function A0(r={}){function i(o,u){let{pathname:m,search:g,hash:y}=o.location;return lo("",{pathname:m,search:g,hash:y},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function d(o,u){return typeof u=="string"?u:Pl(u)}return D0(i,d,null,r)}function Oe(r,i){if(r===!1||r===null||typeof r>"u")throw new Error(i)}function Tt(r,i){if(!r){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function T0(){return Math.random().toString(36).substring(2,10)}function yx(r,i){return{usr:r.state,key:r.key,idx:i}}function lo(r,i,d=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof i=="string"?$s(i):i,state:d,key:i&&i.key||o||T0()}}function Pl({pathname:r="/",search:i="",hash:d=""}){return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),d&&d!=="#"&&(r+=d.charAt(0)==="#"?d:"#"+d),r}function $s(r){let i={};if(r){let d=r.indexOf("#");d>=0&&(i.hash=r.substring(d),r=r.substring(0,d));let o=r.indexOf("?");o>=0&&(i.search=r.substring(o),r=r.substring(0,o)),r&&(i.pathname=r)}return i}function D0(r,i,d,o={}){let{window:u=document.defaultView,v5Compat:m=!1}=o,g=u.history,y="POP",p=null,x=S();x==null&&(x=0,g.replaceState({...g.state,idx:x},""));function S(){return(g.state||{idx:null}).idx}function b(){y="POP";let j=S(),N=j==null?null:j-x;x=j,p&&p({action:y,location:z.location,delta:N})}function D(j,N){y="PUSH";let w=lo(z.location,j,N);x=S()+1;let T=yx(w,x),A=z.createHref(w);try{g.pushState(T,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;u.location.assign(A)}m&&p&&p({action:y,location:z.location,delta:1})}function O(j,N){y="REPLACE";let w=lo(z.location,j,N);x=S();let T=yx(w,x),A=z.createHref(w);g.replaceState(T,"",A),m&&p&&p({action:y,location:z.location,delta:0})}function C(j){return R0(j)}let z={get action(){return y},get location(){return r(u,g)},listen(j){if(p)throw new Error("A history only accepts one active listener");return u.addEventListener(bx,b),p=j,()=>{u.removeEventListener(bx,b),p=null}},createHref(j){return i(u,j)},createURL:C,encodeLocation(j){let N=C(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:D,replace:O,go(j){return g.go(j)}};return z}function R0(r,i=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),Oe(d,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:Pl(r);return o=o.replace(/ $/,"%20"),!i&&o.startsWith("//")&&(o=d+o),new URL(o,d)}function Ax(r,i,d="/"){return q0(r,i,d,!1)}function q0(r,i,d,o){let u=typeof i=="string"?$s(i):i,m=ca(u.pathname||"/",d);if(m==null)return null;let g=Tx(r);O0(g);let y=null;for(let p=0;y==null&&p<g.length;++p){let x=V0(m);y=Q0(g[p],x,o)}return y}function Tx(r,i=[],d=[],o="",u=!1){let m=(g,y,p=u,x)=>{let S={relativePath:x===void 0?g.path||"":x,caseSensitive:g.caseSensitive===!0,childrenIndex:y,route:g};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&p)return;Oe(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let b=ra([o,S.relativePath]),D=d.concat(S);g.children&&g.children.length>0&&(Oe(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Tx(g.children,i,D,b,p)),!(g.path==null&&!g.index)&&i.push({path:b,score:G0(b,g.index),routesMeta:D})};return r.forEach((g,y)=>{if(g.path===""||!g.path?.includes("?"))m(g,y);else for(let p of Dx(g.path))m(g,y,!0,p)}),i}function Dx(r){let i=r.split("/");if(i.length===0)return[];let[d,...o]=i,u=d.endsWith("?"),m=d.replace(/\?$/,"");if(o.length===0)return u?[m,""]:[m];let g=Dx(o.join("/")),y=[];return y.push(...g.map(p=>p===""?m:[m,p].join("/"))),u&&y.push(...g),y.map(p=>r.startsWith("/")&&p===""?"/":p)}function O0(r){r.sort((i,d)=>i.score!==d.score?d.score-i.score:Y0(i.routesMeta.map(o=>o.childrenIndex),d.routesMeta.map(o=>o.childrenIndex)))}var z0=/^:[\w-]+$/,H0=3,L0=2,B0=1,U0=10,$0=-2,vx=r=>r==="*";function G0(r,i){let d=r.split("/"),o=d.length;return d.some(vx)&&(o+=$0),i&&(o+=L0),d.filter(u=>!vx(u)).reduce((u,m)=>u+(z0.test(m)?H0:m===""?B0:U0),o)}function Y0(r,i){return r.length===i.length&&r.slice(0,-1).every((o,u)=>o===i[u])?r[r.length-1]-i[i.length-1]:0}function Q0(r,i,d=!1){let{routesMeta:o}=r,u={},m="/",g=[];for(let y=0;y<o.length;++y){let p=o[y],x=y===o.length-1,S=m==="/"?i:i.slice(m.length)||"/",b=ji({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},S),D=p.route;if(!b&&x&&d&&!o[o.length-1].route.index&&(b=ji({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},S)),!b)return null;Object.assign(u,b.params),g.push({params:u,pathname:ra([m,b.pathname]),pathnameBase:F0(ra([m,b.pathnameBase])),route:D}),b.pathnameBase!=="/"&&(m=ra([m,b.pathnameBase]))}return g}function ji(r,i){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[d,o]=X0(r.path,r.caseSensitive,r.end),u=i.match(d);if(!u)return null;let m=u[0],g=m.replace(/(.)\/+$/,"$1"),y=u.slice(1);return{params:o.reduce((x,{paramName:S,isOptional:b},D)=>{if(S==="*"){let C=y[D]||"";g=m.slice(0,m.length-C.length).replace(/(.)\/+$/,"$1")}const O=y[D];return b&&!O?x[S]=void 0:x[S]=(O||"").replace(/%2F/g,"/"),x},{}),pathname:m,pathnameBase:g,pattern:r}}function X0(r,i=!1,d=!0){Tt(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],u="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,y,p)=>(o.push({paramName:y,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),u+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?u+="\\/*$":r!==""&&r!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,i?void 0:"i"),o]}function V0(r){try{return r.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Tt(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),r}}function ca(r,i){if(i==="/")return r;if(!r.toLowerCase().startsWith(i.toLowerCase()))return null;let d=i.endsWith("/")?i.length-1:i.length,o=r.charAt(d);return o&&o!=="/"?null:r.slice(d)||"/"}function Z0(r,i="/"){let{pathname:d,search:o="",hash:u=""}=typeof r=="string"?$s(r):r;return{pathname:d?d.startsWith("/")?d:J0(d,i):i,search:P0(o),hash:W0(u)}}function J0(r,i){let d=i.replace(/\/+$/,"").split("/");return r.split("/").forEach(u=>{u===".."?d.length>1&&d.pop():u!=="."&&d.push(u)}),d.length>1?d.join("/"):"/"}function Yc(r,i,d,o){return`Cannot include a '${r}' character in a manually specified \`to.${i}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function K0(r){return r.filter((i,d)=>d===0||i.route.path&&i.route.path.length>0)}function co(r){let i=K0(r);return i.map((d,o)=>o===i.length-1?d.pathname:d.pathnameBase)}function oo(r,i,d,o=!1){let u;typeof r=="string"?u=$s(r):(u={...r},Oe(!u.pathname||!u.pathname.includes("?"),Yc("?","pathname","search",u)),Oe(!u.pathname||!u.pathname.includes("#"),Yc("#","pathname","hash",u)),Oe(!u.search||!u.search.includes("#"),Yc("#","search","hash",u)));let m=r===""||u.pathname==="",g=m?"/":u.pathname,y;if(g==null)y=d;else{let b=i.length-1;if(!o&&g.startsWith("..")){let D=g.split("/");for(;D[0]==="..";)D.shift(),b-=1;u.pathname=D.join("/")}y=b>=0?i[b]:"/"}let p=Z0(u,y),x=g&&g!=="/"&&g.endsWith("/"),S=(m||g===".")&&d.endsWith("/");return!p.pathname.endsWith("/")&&(x||S)&&(p.pathname+="/"),p}var ra=r=>r.join("/").replace(/\/\/+/g,"/"),F0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),P0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,W0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function I0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Rx=["POST","PUT","PATCH","DELETE"];new Set(Rx);var ep=["GET",...Rx];new Set(ep);var Gs=v.createContext(null);Gs.displayName="DataRouter";var wi=v.createContext(null);wi.displayName="DataRouterState";v.createContext(!1);var qx=v.createContext({isTransitioning:!1});qx.displayName="ViewTransition";var tp=v.createContext(new Map);tp.displayName="Fetchers";var ap=v.createContext(null);ap.displayName="Await";var zt=v.createContext(null);zt.displayName="Navigation";var Wl=v.createContext(null);Wl.displayName="Location";var Yt=v.createContext({outlet:null,matches:[],isDataRoute:!1});Yt.displayName="Route";var uo=v.createContext(null);uo.displayName="RouteError";function sp(r,{relative:i}={}){Oe(Ys(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:o}=v.useContext(zt),{hash:u,pathname:m,search:g}=Il(r,{relative:i}),y=m;return d!=="/"&&(y=m==="/"?d:ra([d,m])),o.createHref({pathname:y,search:g,hash:u})}function Ys(){return v.useContext(Wl)!=null}function oa(){return Oe(Ys(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Wl).location}var Ox="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zx(r){v.useContext(zt).static||v.useLayoutEffect(r)}function ke(){let{isDataRoute:r}=v.useContext(Yt);return r?pp():lp()}function lp(){Oe(Ys(),"useNavigate() may be used only in the context of a <Router> component.");let r=v.useContext(Gs),{basename:i,navigator:d}=v.useContext(zt),{matches:o}=v.useContext(Yt),{pathname:u}=oa(),m=JSON.stringify(co(o)),g=v.useRef(!1);return zx(()=>{g.current=!0}),v.useCallback((p,x={})=>{if(Tt(g.current,Ox),!g.current)return;if(typeof p=="number"){d.go(p);return}let S=oo(p,JSON.parse(m),u,x.relative==="path");r==null&&i!=="/"&&(S.pathname=S.pathname==="/"?i:ra([i,S.pathname])),(x.replace?d.replace:d.push)(S,x.state,x)},[i,d,m,u,r])}v.createContext(null);function Il(r,{relative:i}={}){let{matches:d}=v.useContext(Yt),{pathname:o}=oa(),u=JSON.stringify(co(d));return v.useMemo(()=>oo(r,JSON.parse(u),o,i==="path"),[r,u,o,i])}function np(r,i){return Hx(r,i)}function Hx(r,i,d,o,u){Oe(Ys(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:m}=v.useContext(zt),{matches:g}=v.useContext(Yt),y=g[g.length-1],p=y?y.params:{},x=y?y.pathname:"/",S=y?y.pathnameBase:"/",b=y&&y.route;{let w=b&&b.path||"";Lx(x,!b||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let D=oa(),O;if(i){let w=typeof i=="string"?$s(i):i;Oe(S==="/"||w.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${w.pathname}" was given in the \`location\` prop.`),O=w}else O=D;let C=O.pathname||"/",z=C;if(S!=="/"){let w=S.replace(/^\//,"").split("/");z="/"+C.replace(/^\//,"").split("/").slice(w.length).join("/")}let j=Ax(r,{pathname:z});Tt(b||j!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Tt(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=dp(j&&j.map(w=>Object.assign({},w,{params:Object.assign({},p,w.params),pathname:ra([S,m.encodeLocation?m.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?S:ra([S,m.encodeLocation?m.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),g,d,o,u);return i&&N?v.createElement(Wl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},N):N}function ip(){let r=fp(),i=I0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),d=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},m={padding:"2px 4px",backgroundColor:o},g=null;return console.error("Error handled by React Router default ErrorBoundary:",r),g=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:m},"ErrorBoundary")," or"," ",v.createElement("code",{style:m},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},i),d?v.createElement("pre",{style:u},d):null,g)}var rp=v.createElement(ip,null),cp=class extends v.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,i){return i.location!==r.location||i.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:i.error,location:i.location,revalidation:r.revalidation||i.revalidation}}componentDidCatch(r,i){this.props.unstable_onError?this.props.unstable_onError(r,i):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?v.createElement(Yt.Provider,{value:this.props.routeContext},v.createElement(uo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function op({routeContext:r,match:i,children:d}){let o=v.useContext(Gs);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),v.createElement(Yt.Provider,{value:r},d)}function dp(r,i=[],d=null,o=null,u=null){if(r==null){if(!d)return null;if(d.errors)r=d.matches;else if(i.length===0&&!d.initialized&&d.matches.length>0)r=d.matches;else return null}let m=r,g=d?.errors;if(g!=null){let x=m.findIndex(S=>S.route.id&&g?.[S.route.id]!==void 0);Oe(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),m=m.slice(0,Math.min(m.length,x+1))}let y=!1,p=-1;if(d)for(let x=0;x<m.length;x++){let S=m[x];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(p=x),S.route.id){let{loaderData:b,errors:D}=d,O=S.route.loader&&!b.hasOwnProperty(S.route.id)&&(!D||D[S.route.id]===void 0);if(S.route.lazy||O){y=!0,p>=0?m=m.slice(0,p+1):m=[m[0]];break}}}return m.reduceRight((x,S,b)=>{let D,O=!1,C=null,z=null;d&&(D=g&&S.route.id?g[S.route.id]:void 0,C=S.route.errorElement||rp,y&&(p<0&&b===0?(Lx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,z=null):p===b&&(O=!0,z=S.route.hydrateFallbackElement||null)));let j=i.concat(m.slice(0,b+1)),N=()=>{let w;return D?w=C:O?w=z:S.route.Component?w=v.createElement(S.route.Component,null):S.route.element?w=S.route.element:w=x,v.createElement(op,{match:S,routeContext:{outlet:x,matches:j,isDataRoute:d!=null},children:w})};return d&&(S.route.ErrorBoundary||S.route.errorElement||b===0)?v.createElement(cp,{location:d.location,revalidation:d.revalidation,component:C,error:D,children:N(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:o}):N()},null)}function mo(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function up(r){let i=v.useContext(Gs);return Oe(i,mo(r)),i}function mp(r){let i=v.useContext(wi);return Oe(i,mo(r)),i}function xp(r){let i=v.useContext(Yt);return Oe(i,mo(r)),i}function xo(r){let i=xp(r),d=i.matches[i.matches.length-1];return Oe(d.route.id,`${r} can only be used on routes that contain a unique "id"`),d.route.id}function hp(){return xo("useRouteId")}function fp(){let r=v.useContext(uo),i=mp("useRouteError"),d=xo("useRouteError");return r!==void 0?r:i.errors?.[d]}function pp(){let{router:r}=up("useNavigate"),i=xo("useNavigate"),d=v.useRef(!1);return zx(()=>{d.current=!0}),v.useCallback(async(u,m={})=>{Tt(d.current,Ox),d.current&&(typeof u=="number"?r.navigate(u):await r.navigate(u,{fromRouteId:i,...m}))},[r,i])}var jx={};function Lx(r,i,d){!i&&!jx[r]&&(jx[r]=!0,Tt(!1,d))}v.memo(gp);function gp({routes:r,future:i,state:d,unstable_onError:o}){return Hx(r,void 0,d,o,i)}function bp({to:r,replace:i,state:d,relative:o}){Oe(Ys(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=v.useContext(zt);Tt(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:m}=v.useContext(Yt),{pathname:g}=oa(),y=ke(),p=oo(r,co(m),g,o==="path"),x=JSON.stringify(p);return v.useEffect(()=>{y(JSON.parse(x),{replace:i,state:d,relative:o})},[y,x,o,i,d]),null}function pe(r){Oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yp({basename:r="/",children:i=null,location:d,navigationType:o="POP",navigator:u,static:m=!1}){Oe(!Ys(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=r.replace(/^\/*/,"/"),y=v.useMemo(()=>({basename:g,navigator:u,static:m,future:{}}),[g,u,m]);typeof d=="string"&&(d=$s(d));let{pathname:p="/",search:x="",hash:S="",state:b=null,key:D="default"}=d,O=v.useMemo(()=>{let C=ca(p,g);return C==null?null:{location:{pathname:C,search:x,hash:S,state:b,key:D},navigationType:o}},[g,p,x,S,b,D,o]);return Tt(O!=null,`<Router basename="${g}"> is not able to match the URL "${p}${x}${S}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:v.createElement(zt.Provider,{value:y},v.createElement(Wl.Provider,{children:i,value:O}))}function vp({children:r,location:i}){return np(no(r),i)}function no(r,i=[]){let d=[];return v.Children.forEach(r,(o,u)=>{if(!v.isValidElement(o))return;let m=[...i,u];if(o.type===v.Fragment){d.push.apply(d,no(o.props.children,m));return}Oe(o.type===pe,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Oe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let g={id:o.props.id||m.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(g.children=no(o.props.children,m)),d.push(g)}),d}var yi="get",vi="application/x-www-form-urlencoded";function ki(r){return r!=null&&typeof r.tagName=="string"}function jp(r){return ki(r)&&r.tagName.toLowerCase()==="button"}function Np(r){return ki(r)&&r.tagName.toLowerCase()==="form"}function wp(r){return ki(r)&&r.tagName.toLowerCase()==="input"}function kp(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Sp(r,i){return r.button===0&&(!i||i==="_self")&&!kp(r)}function io(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((i,d)=>{let o=r[d];return i.concat(Array.isArray(o)?o.map(u=>[d,u]):[[d,o]])},[]))}function Cp(r,i){let d=io(r);return i&&i.forEach((o,u)=>{d.has(u)||i.getAll(u).forEach(m=>{d.append(u,m)})}),d}var fi=null;function _p(){if(fi===null)try{new FormData(document.createElement("form"),0),fi=!1}catch{fi=!0}return fi}var Ep=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qc(r){return r!=null&&!Ep.has(r)?(Tt(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vi}"`),null):r}function Mp(r,i){let d,o,u,m,g;if(Np(r)){let y=r.getAttribute("action");o=y?ca(y,i):null,d=r.getAttribute("method")||yi,u=Qc(r.getAttribute("enctype"))||vi,m=new FormData(r)}else if(jp(r)||wp(r)&&(r.type==="submit"||r.type==="image")){let y=r.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||y.getAttribute("action");if(o=p?ca(p,i):null,d=r.getAttribute("formmethod")||y.getAttribute("method")||yi,u=Qc(r.getAttribute("formenctype"))||Qc(y.getAttribute("enctype"))||vi,m=new FormData(y,r),!_p()){let{name:x,type:S,value:b}=r;if(S==="image"){let D=x?`${x}.`:"";m.append(`${D}x`,"0"),m.append(`${D}y`,"0")}else x&&m.append(x,b)}}else{if(ki(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=yi,o=null,u=vi,g=r}return m&&u==="text/plain"&&(g=m,m=void 0),{action:o,method:d.toLowerCase(),encType:u,formData:m,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ho(r,i){if(r===!1||r===null||typeof r>"u")throw new Error(i)}function Ap(r,i,d){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname=`_root.${d}`:i&&ca(o.pathname,i)==="/"?o.pathname=`${i.replace(/\/$/,"")}/_root.${d}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${d}`,o}async function Tp(r,i){if(r.id in i)return i[r.id];try{let d=await import(r.module);return i[r.id]=d,d}catch(d){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Dp(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Rp(r,i,d){let o=await Promise.all(r.map(async u=>{let m=i.routes[u.route.id];if(m){let g=await Tp(m,d);return g.links?g.links():[]}return[]}));return Hp(o.flat(1).filter(Dp).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Nx(r,i,d,o,u,m){let g=(p,x)=>d[x]?p.route.id!==d[x].route.id:!0,y=(p,x)=>d[x].pathname!==p.pathname||d[x].route.path?.endsWith("*")&&d[x].params["*"]!==p.params["*"];return m==="assets"?i.filter((p,x)=>g(p,x)||y(p,x)):m==="data"?i.filter((p,x)=>{let S=o.routes[p.route.id];if(!S||!S.hasLoader)return!1;if(g(p,x)||y(p,x))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function qp(r,i,{includeHydrateFallback:d}={}){return Op(r.map(o=>{let u=i.routes[o.route.id];if(!u)return[];let m=[u.module];return u.clientActionModule&&(m=m.concat(u.clientActionModule)),u.clientLoaderModule&&(m=m.concat(u.clientLoaderModule)),d&&u.hydrateFallbackModule&&(m=m.concat(u.hydrateFallbackModule)),u.imports&&(m=m.concat(u.imports)),m}).flat(1))}function Op(r){return[...new Set(r)]}function zp(r){let i={},d=Object.keys(r).sort();for(let o of d)i[o]=r[o];return i}function Hp(r,i){let d=new Set;return new Set(i),r.reduce((o,u)=>{let m=JSON.stringify(zp(u));return d.has(m)||(d.add(m),o.push({key:m,link:u})),o},[])}function Bx(){let r=v.useContext(Gs);return ho(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Lp(){let r=v.useContext(wi);return ho(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var fo=v.createContext(void 0);fo.displayName="FrameworkContext";function Ux(){let r=v.useContext(fo);return ho(r,"You must render this element inside a <HydratedRouter> element"),r}function Bp(r,i){let d=v.useContext(fo),[o,u]=v.useState(!1),[m,g]=v.useState(!1),{onFocus:y,onBlur:p,onMouseEnter:x,onMouseLeave:S,onTouchStart:b}=i,D=v.useRef(null);v.useEffect(()=>{if(r==="render"&&g(!0),r==="viewport"){let z=N=>{N.forEach(w=>{g(w.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return D.current&&j.observe(D.current),()=>{j.disconnect()}}},[r]),v.useEffect(()=>{if(o){let z=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(z)}}},[o]);let O=()=>{u(!0)},C=()=>{u(!1),g(!1)};return d?r!=="intent"?[m,D,{}]:[m,D,{onFocus:Ql(y,O),onBlur:Ql(p,C),onMouseEnter:Ql(x,O),onMouseLeave:Ql(S,C),onTouchStart:Ql(b,O)}]:[!1,D,{}]}function Ql(r,i){return d=>{r&&r(d),d.defaultPrevented||i(d)}}function Up({page:r,...i}){let{router:d}=Bx(),o=v.useMemo(()=>Ax(d.routes,r,d.basename),[d.routes,r,d.basename]);return o?v.createElement(Gp,{page:r,matches:o,...i}):null}function $p(r){let{manifest:i,routeModules:d}=Ux(),[o,u]=v.useState([]);return v.useEffect(()=>{let m=!1;return Rp(r,i,d).then(g=>{m||u(g)}),()=>{m=!0}},[r,i,d]),o}function Gp({page:r,matches:i,...d}){let o=oa(),{manifest:u,routeModules:m}=Ux(),{basename:g}=Bx(),{loaderData:y,matches:p}=Lp(),x=v.useMemo(()=>Nx(r,i,p,u,o,"data"),[r,i,p,u,o]),S=v.useMemo(()=>Nx(r,i,p,u,o,"assets"),[r,i,p,u,o]),b=v.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let C=new Set,z=!1;if(i.forEach(N=>{let w=u.routes[N.route.id];!w||!w.hasLoader||(!x.some(T=>T.route.id===N.route.id)&&N.route.id in y&&m[N.route.id]?.shouldRevalidate||w.hasClientLoader?z=!0:C.add(N.route.id))}),C.size===0)return[];let j=Ap(r,g,"data");return z&&C.size>0&&j.searchParams.set("_routes",i.filter(N=>C.has(N.route.id)).map(N=>N.route.id).join(",")),[j.pathname+j.search]},[g,y,o,u,x,i,r,m]),D=v.useMemo(()=>qp(S,u),[S,u]),O=$p(S);return v.createElement(v.Fragment,null,b.map(C=>v.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...d})),D.map(C=>v.createElement("link",{key:C,rel:"modulepreload",href:C,...d})),O.map(({key:C,link:z})=>v.createElement("link",{key:C,nonce:d.nonce,...z})))}function Yp(...r){return i=>{r.forEach(d=>{typeof d=="function"?d(i):d!=null&&(d.current=i)})}}var $x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$x&&(window.__reactRouterVersion="7.9.1")}catch{}function Qp({basename:r,children:i,window:d}){let o=v.useRef();o.current==null&&(o.current=A0({window:d,v5Compat:!0}));let u=o.current,[m,g]=v.useState({action:u.action,location:u.location}),y=v.useCallback(p=>{v.startTransition(()=>g(p))},[g]);return v.useLayoutEffect(()=>u.listen(y),[u,y]),v.createElement(yp,{basename:r,children:i,location:m.location,navigationType:m.action,navigator:u})}var Gx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yx=v.forwardRef(function({onClick:i,discover:d="render",prefetch:o="none",relative:u,reloadDocument:m,replace:g,state:y,target:p,to:x,preventScrollReset:S,viewTransition:b,...D},O){let{basename:C}=v.useContext(zt),z=typeof x=="string"&&Gx.test(x),j,N=!1;if(typeof x=="string"&&z&&(j=x,$x))try{let ae=new URL(window.location.href),G=x.startsWith("//")?new URL(ae.protocol+x):new URL(x),le=ca(G.pathname,C);G.origin===ae.origin&&le!=null?x=le+G.search+G.hash:N=!0}catch{Tt(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=sp(x,{relative:u}),[T,A,k]=Bp(o,D),M=Jp(x,{replace:g,state:y,target:p,preventScrollReset:S,relative:u,viewTransition:b});function Y(ae){i&&i(ae),ae.defaultPrevented||M(ae)}let B=v.createElement("a",{...D,...k,href:j||w,onClick:N||m?i:Y,ref:Yp(O,A),target:p,"data-discover":!z&&d==="render"?"true":void 0});return T&&!z?v.createElement(v.Fragment,null,B,v.createElement(Up,{page:w})):B});Yx.displayName="Link";var Xp=v.forwardRef(function({"aria-current":i="page",caseSensitive:d=!1,className:o="",end:u=!1,style:m,to:g,viewTransition:y,children:p,...x},S){let b=Il(g,{relative:x.relative}),D=oa(),O=v.useContext(wi),{navigator:C,basename:z}=v.useContext(zt),j=O!=null&&eg(b)&&y===!0,N=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,w=D.pathname,T=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;d||(w=w.toLowerCase(),T=T?T.toLowerCase():null,N=N.toLowerCase()),T&&z&&(T=ca(T,z)||T);const A=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let k=w===N||!u&&w.startsWith(N)&&w.charAt(A)==="/",M=T!=null&&(T===N||!u&&T.startsWith(N)&&T.charAt(N.length)==="/"),Y={isActive:k,isPending:M,isTransitioning:j},B=k?i:void 0,ae;typeof o=="function"?ae=o(Y):ae=[o,k?"active":null,M?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let G=typeof m=="function"?m(Y):m;return v.createElement(Yx,{...x,"aria-current":B,className:ae,ref:S,style:G,to:g,viewTransition:y},typeof p=="function"?p(Y):p)});Xp.displayName="NavLink";var Vp=v.forwardRef(({discover:r="render",fetcherKey:i,navigate:d,reloadDocument:o,replace:u,state:m,method:g=yi,action:y,onSubmit:p,relative:x,preventScrollReset:S,viewTransition:b,...D},O)=>{let C=Wp(),z=Ip(y,{relative:x}),j=g.toLowerCase()==="get"?"get":"post",N=typeof y=="string"&&Gx.test(y),w=T=>{if(p&&p(T),T.defaultPrevented)return;T.preventDefault();let A=T.nativeEvent.submitter,k=A?.getAttribute("formmethod")||g;C(A||T.currentTarget,{fetcherKey:i,method:k,navigate:d,replace:u,state:m,relative:x,preventScrollReset:S,viewTransition:b})};return v.createElement("form",{ref:O,method:j,action:z,onSubmit:o?p:w,...D,"data-discover":!N&&r==="render"?"true":void 0})});Vp.displayName="Form";function Zp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qx(r){let i=v.useContext(Gs);return Oe(i,Zp(r)),i}function Jp(r,{target:i,replace:d,state:o,preventScrollReset:u,relative:m,viewTransition:g}={}){let y=ke(),p=oa(),x=Il(r,{relative:m});return v.useCallback(S=>{if(Sp(S,i)){S.preventDefault();let b=d!==void 0?d:Pl(p)===Pl(x);y(r,{replace:b,state:o,preventScrollReset:u,relative:m,viewTransition:g})}},[p,y,x,d,o,i,r,u,m,g])}function Kp(r){Tt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=v.useRef(io(r)),d=v.useRef(!1),o=oa(),u=v.useMemo(()=>Cp(o.search,d.current?null:i.current),[o.search]),m=ke(),g=v.useCallback((y,p)=>{const x=io(typeof y=="function"?y(new URLSearchParams(u)):y);d.current=!0,m("?"+x,p)},[m,u]);return[u,g]}var Fp=0,Pp=()=>`__${String(++Fp)}__`;function Wp(){let{router:r}=Qx("useSubmit"),{basename:i}=v.useContext(zt),d=hp();return v.useCallback(async(o,u={})=>{let{action:m,method:g,encType:y,formData:p,body:x}=Mp(o,i);if(u.navigate===!1){let S=u.fetcherKey||Pp();await r.fetch(S,d,u.action||m,{preventScrollReset:u.preventScrollReset,formData:p,body:x,formMethod:u.method||g,formEncType:u.encType||y,flushSync:u.flushSync})}else await r.navigate(u.action||m,{preventScrollReset:u.preventScrollReset,formData:p,body:x,formMethod:u.method||g,formEncType:u.encType||y,replace:u.replace,state:u.state,fromRouteId:d,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,i,d])}function Ip(r,{relative:i}={}){let{basename:d}=v.useContext(zt),o=v.useContext(Yt);Oe(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),m={...Il(r||".",{relative:i})},g=oa();if(r==null){m.search=g.search;let y=new URLSearchParams(m.search),p=y.getAll("index");if(p.some(S=>S==="")){y.delete("index"),p.filter(b=>b).forEach(b=>y.append("index",b));let S=y.toString();m.search=S?`?${S}`:""}}return(!r||r===".")&&u.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(m.pathname=m.pathname==="/"?d:ra([d,m.pathname])),Pl(m)}function eg(r,{relative:i}={}){let d=v.useContext(qx);Oe(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Qx("useViewTransitionState"),u=Il(r,{relative:i});if(!d.isTransitioning)return!1;let m=ca(d.currentLocation.pathname,o)||d.currentLocation.pathname,g=ca(d.nextLocation.pathname,o)||d.nextLocation.pathname;return ji(u.pathname,g)!=null||ji(u.pathname,m)!=null}const wx=r=>{let i;const d=new Set,o=(x,S)=>{const b=typeof x=="function"?x(i):x;if(!Object.is(b,i)){const D=i;i=S??(typeof b!="object"||b===null)?b:Object.assign({},i,b),d.forEach(O=>O(i,D))}},u=()=>i,y={setState:o,getState:u,getInitialState:()=>p,subscribe:x=>(d.add(x),()=>d.delete(x))},p=i=r(o,u,y);return y},tg=(r=>r?wx(r):wx),ag=r=>r;function sg(r,i=ag){const d=at.useSyncExternalStore(r.subscribe,at.useCallback(()=>i(r.getState()),[r,i]),at.useCallback(()=>i(r.getInitialState()),[r,i]));return at.useDebugValue(d),d}const kx=r=>{const i=tg(r),d=o=>sg(i,o);return Object.assign(d,i),d},lg=(r=>r?kx(r):kx),ng={id:"sakura",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["",""],baseText:"  .    .",dialogues:{0:"...   ?",20:"  .",40:"    .",60:" ...  .",80:"     ...",100:"      ."},sprite:"",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},ig={id:"yuki",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["",""],baseText:"  .    .",dialogues:{0:"... ...",20:" ...  ?",40:"   .",60:" ...   .",80:" ... ?",100:"    ."},sprite:"",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},rg={id:"luna",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["",""],baseText:" .      .",dialogues:{0:"!  ? !",20:"   !",40:"      .",60:"     .",80:"    .",100:"  .  ."},sprite:"",image:"https://images.unsplash.com/photo-1727466443068-779e1f8fe8e8?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjdXRlJTIwYW5pbWUlMjBib3klMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDExOTQyfDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"},cg={id:"mystery",name:"???",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["",""],baseText:" .      .",dialogues:{0:"... ?",20:" .",40:"   .",60:" ...   ?",80:"...   .",100:"   ."},sprite:"",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",unlockCondition:{day:10,totalAffection:150}},og={id:"akane",name:"",role:"",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:[""," ",""],baseText:"  .   .",dialogues:{0:".   ?",20:"   .",40:"  ...   .",60:"      .",80:" ...    ...",100:"  ... ."},sprite:"",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080"},dg={id:"hana",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:[" ","",""],baseText:"   .   .",dialogues:{0:" ?    ?",20:"    .",40:"    .",60:"    .",80:"    .",100:"    ."},sprite:"",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080"},ug={id:"rin",name:"",role:" ",affectionStart:0,affectionMax:100,likes:[""," "," "],dislikes:["  ","",""],baseText:"  .     .",dialogues:{0:"!   ?",20:"     !",40:"     .",60:"   .",80:" ...   .",100:"   ."},sprite:"",image:"https://images.unsplash.com/photo-1727466443068-779e1f8fe8e8?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxjdXRlJTIwYW5pbWUlMjBib3klMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDExOTQyfDA&ixlib=rb-4.1.0&q=80&w=1080"},mg={id:"mei",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:["","","  "],baseText:"   .   .",dialogues:{0:"...  ?",20:"  ?",40:"  .",60:"   .",80:"   .",100:"   ."},sprite:"",image:"https://images.unsplash.com/photo-1673047233994-78df05226bfc?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxrYXdhaWklMjBhbmltZSUyMGdpcmwlMjBjaGFyYWN0ZXJ8ZW58MXx8fHwxNzU3NDA2OTI1fDA&ixlib=rb-4.1.0&q=80&w=1080"},xg={id:"sora",name:"",role:" ",affectionStart:0,affectionMax:100,likes:["","",""],dislikes:[""," ",""],baseText:" .   .",dialogues:{0:"  .",20:"  .",40:"...    .",60:"     .",80:"    .",100:"    ."},sprite:"",image:"https://images.unsplash.com/photo-1663035310226-8203dfbe03d7?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhbmltZSUyMGdpcmwlMjBibHVlJTIwaGFpciUyMGNoYXJhY3RlcnxlbnwxfHx8fDE3NTc0MTE5Mzh8MA&ixlib=rb-4.1.0&q=80&w=1080"},qa={sakura:ng,yuki:ig,luna:rg,mystery:cg,akane:og,hana:dg,rin:ug,mei:mg,sora:xg},hg=[{id:"sakura_training",name:" ",trigger:{location:"training",character:"sakura",minAffection:20,chance:.5},description:"   .",choices:[{text:",  !",effects:{affection:{sakura:10},stats:{stamina:2},text:"    ."}},{text:"  ...",effects:{affection:{sakura:-5},text:"   ."}}]},{id:"yuki_library",name:" ",trigger:{location:"library",character:"yuki",minAffection:30,chance:.4},description:"    .",choices:[{text:" !",effects:{affection:{yuki:15},stats:{intelligence:3},text:"    ."}},{text:",   .",effects:{affection:{yuki:-3},text:"   ."}}]},{id:"luna_magic",name:" ",trigger:{location:"classroom",character:"luna",minAffection:15,chance:.6},description:"    .",choices:[{text:"!  !",effects:{affection:{luna:12},stats:{intelligence:2,charm:1},text:"   ."}},{text:"  ?",effects:{affection:{luna:5},text:"  ."}}]},{id:"random_exam",name:" ",trigger:{location:"classroom",minDay:5,chance:.2},description:"  !",choices:[{text:" ",condition:{minIntelligence:15},effects:{stats:{intelligence:2,charm:1},text:"  !  ."}},{text:" ",effects:{stats:{stamina:-1},text:" ..."}}]},{id:"confession_sakura",name:" ",trigger:{character:"sakura",minAffection:80,minDay:20,once:!0},description:"   ...",choices:[{text:" ",effects:{affection:{sakura:20},flag:"sakura_route",text:"  !"}},{text:",  ",effects:{affection:{sakura:-30},text:"    ."}}]},{id:"mystery_encounter",name:" ",trigger:{minDay:10,totalAffection:150,chance:.1,once:!0},description:"   ...",choices:[{text:"?",effects:{unlockCharacter:"mystery",text:"  !"}}]},{id:"sakura_secret_garden",name:"   ",trigger:{location:"secretGarden",character:"sakura",minAffection:50,chance:.6},description:"       .    .",choices:[{text:"  ?",effects:{affection:{sakura:20},stats:{stamina:3,charm:2},text:"      .     ."}},{text:" ",effects:{affection:{sakura:15},stats:{charm:1},text:"   .    ."}},{text:"  ",effects:{text:"  ."}}]},{id:"yuki_secret_garden",name:"   ",trigger:{location:"secretGarden",character:"yuki",minAffection:50,chance:.6},description:"      .       .",choices:[{text:"   ",effects:{affection:{yuki:20},stats:{intelligence:3,charm:2},text:"     .   ."}},{text:"  ",effects:{affection:{yuki:15},stats:{intelligence:2,charm:1},text:"     .    ."}},{text:"  ",effects:{affection:{yuki:5},text:"      ."}}]},{id:"luna_secret_garden",name:"   ",trigger:{location:"secretGarden",character:"luna",minAffection:50,chance:.6},description:"        .      .",choices:[{text:" ",condition:{minIntelligence:15},effects:{affection:{luna:25},stats:{intelligence:2,charm:3,luck:1},text:"     .       ."}},{text:" ",effects:{affection:{luna:15},stats:{charm:2},text:"    .     ."}},{text:" ",effects:{text:"      ."}}]},{id:"secret_garden_stargazing",name:"  ",trigger:{location:"secretGarden",time:"night",minAffection:30,chance:.4},description:"     ,   .",choices:[{text:"   ",effects:{stats:{charm:2,luck:1},text:"     ."}},{text:"  ",effects:{stats:{intelligence:2,charm:1},text:"     ."}}]},{id:"secret_garden_confession",name:"  ",trigger:{location:"secretGarden",minAffection:80,chance:.3,once:!0},description:"       .      .",choices:[{text:"  ",effects:{flag:"secret_garden_confession",text:"    .   ."}},{text:"    ",effects:{text:"  ,    ."}}]}],fg={events:hg},Ni=qa,pg=fg,gg=Object.keys(Ni).reduce((r,i)=>(r[i]=Ni[i].affectionStart||0,r),{}),pi={name:"",level:1,experience:0,hp:100,maxHp:100,mp:50,maxMp:50,stamina:100,maxStamina:100,stats:{intelligence:10,charm:10,strength:10,agility:10,luck:10},inventory:[],equipment:{},affection:gg,location:"classroom",day:1,timeOfDay:"morning",money:1e3,flags:{},dungeonProgress:{currentFloor:1,maxFloorReached:1,position:{x:0,y:0}},achievements:[],achievementPoints:0,statistics:{monstersDefeated:0,treasuresFound:0,quizStreak:0,bestCardTime:1/0,loginStreak:1},metHeroines:[],defeatedMonsterTypes:[],defeatedBosses:[],collectedItems:[],unlockedEndings:[],participatedEvents:[]},Xc=["morning","noon","afternoon","evening","night"],bg=30,re=lg((r,i)=>({player:pi,unlockedCharacters:["sakura","yuki","luna","mystery","akane","hana","rin","mei","sora"],completedEvents:[],currentEvent:null,gameMessage:"  !",gameEnding:null,gameDate:{year:2024,month:4,day:1},lastActivity:null,dailyActivitiesCount:0,metCharacters:[],actions:{loadInitialGame:()=>{const d=localStorage.getItem("academyDatingSim");if(d){const o=JSON.parse(d);r({player:o.player,unlockedCharacters:o.unlockedCharacters,completedEvents:o.completedEvents})}},saveGame:()=>{const{player:d,unlockedCharacters:o,completedEvents:u}=i(),m={player:d,unlockedCharacters:o,completedEvents:u,timestamp:Date.now(),version:"1.0.0"};localStorage.setItem("academyDatingSim",JSON.stringify(m)),r({gameMessage:" !"})},loadGame:()=>{const d=localStorage.getItem("academyDatingSim");if(d){const o=JSON.parse(d);r({player:o.player,unlockedCharacters:o.unlockedCharacters,completedEvents:o.completedEvents,gameMessage:" !"})}else r({gameMessage:"  ."})},resetGame:d=>{const o={...pi,name:d?.playerName||pi.name,stats:d?.startingStats||{...pi.stats},affection:Object.keys(Ni).reduce((u,m)=>(u[m]=Ni[m].affectionStart||0,u),{})};r({player:o,unlockedCharacters:["sakura","yuki","luna","mystery","akane","hana","rin","mei","sora"],completedEvents:[],currentEvent:null,gameEnding:null,gameMessage:d?`${o.name}   !`:"  !",lastActivity:null}),localStorage.removeItem("academyDatingSim")},updateStats:d=>r(o=>({player:{...o.player,stats:{...o.player.stats,...d}}})),updateHpMp:(d,o)=>r(u=>({player:{...u.player,hp:Math.min(u.player.maxHp,u.player.hp+d),mp:Math.min(u.player.maxMp,u.player.mp+o)}})),updateAffection:(d,o)=>{r(u=>({player:{...u.player,affection:{...u.player.affection,[d]:Math.max(0,Math.min(100,(u.player.affection[d]||0)+o))}}})),o>0&&i().actions.gainExperience(o*2)},moveToLocation:d=>{r(o=>({player:{...o.player,location:d}})),i().actions.checkForEvents(d)},advanceTime:()=>{r(d=>{const u=Xc.indexOf(d.player.timeOfDay)+1;if(u>=Xc.length){const y=d.player.day+1;return y>bg?(i().actions.checkEnding(),{}):{player:{...d.player,day:y,timeOfDay:"morning",location:"dormitory",hp:Math.min(d.player.hp+20,d.player.maxHp),mp:Math.min(d.player.mp+10,d.player.maxMp),stamina:d.player.maxStamina},dailyActivitiesCount:0,gameMessage:"  .  ."}}const m=Xc[u],g=m==="night"&&d.player.location!=="dormitory";return{player:{...d.player,timeOfDay:m,location:g?"dormitory":d.player.location},gameMessage:g?"   .":d.gameMessage}})},checkForEvents:d=>{const{player:o,completedEvents:u}=i(),m=d||o.location,g=pg.events.filter(y=>!(y.trigger.location&&y.trigger.location!==m||y.trigger.once&&u.includes(y.id)||y.trigger.minDay&&o.day<y.trigger.minDay||y.trigger.character&&y.trigger.minAffection&&(o.affection[y.trigger.character]||0)<y.trigger.minAffection||y.trigger.totalAffection&&Object.values(o.affection).reduce((x,S)=>x+S,0)<y.trigger.totalAffection||y.trigger.chance&&Math.random()>y.trigger.chance));if(g.length>0){const y=g[Math.floor(Math.random()*g.length)];r({currentEvent:y})}},handleEventChoice:(d,o)=>{const u=d.choices[o],{player:m,actions:g}=i();if(u.condition?.minIntelligence&&m.stats.intelligence<u.condition.minIntelligence){r({gameMessage:" !"});return}u.effects.affection&&Object.entries(u.effects.affection).forEach(([y,p])=>g.updateAffection(y,p)),u.effects.stats&&g.updateStats(u.effects.stats),u.effects.item&&g.addItem(u.effects.item),u.effects.money&&r(y=>({player:{...y.player,money:y.player.money+u.effects.money}})),u.effects.flag&&r(y=>({player:{...y.player,flags:{...y.player.flags,[u.effects.flag]:!0}}})),u.effects.unlockCharacter&&r(y=>({unlockedCharacters:[...y.unlockedCharacters,u.effects.unlockCharacter]})),r({gameMessage:u.effects.text}),d.trigger.once&&r(y=>({completedEvents:[...y.completedEvents,d.id]})),r({currentEvent:null})},addItem:d=>r(o=>({player:{...o.player,inventory:[...o.player.inventory,d]}})),buyItem:d=>{i().actions.addItem(d)},updateMoney:d=>{r(o=>({player:{...o.player,money:o.player.money+d}}))},sellItem:(d,o)=>{const{player:u}=i(),m=u.inventory.indexOf(d);if(m>-1){const g=[...u.inventory];return g.splice(m,1),r(y=>({player:{...y.player,inventory:g,money:y.player.money+o}})),r({gameMessage:`${d}() .`}),!0}return r({gameMessage:"  ."}),!1},purchaseItem:(d,o)=>{const{player:u}=i();return u.money>=o?(r(m=>({player:{...m.player,inventory:[...m.player.inventory,d],money:m.player.money-o}})),!0):!1},useItem:(d,o)=>{const{player:u}=i(),m=u.inventory.indexOf(d);if(m===-1){r({gameMessage:"   ."});return}switch(d){case"healingPotion":if(u.hp>=u.maxHp){r({gameMessage:"HP  .    ."});return}break;case"manaPotion":if(u.mp>=u.maxMp){r({gameMessage:"MP  .    ."});return}break}const g=[...u.inventory];g.splice(m,1);let y={...u,inventory:g},p=`${d}() .`;switch(d){case"healingPotion":const x=Math.min(50,y.maxHp-y.hp);y.hp=Math.min(y.hp+50,y.maxHp),p=`  . HP +${x}`;break;case"manaPotion":const S=Math.min(30,y.maxMp-y.mp);y.mp=Math.min(y.mp+30,y.maxMp),p=`  . MP +${S}`;break;case"energyDrink":y.stats.stamina+=2,p="  .  +2";break;default:if(o){const b=d.includes("flower")?10:5;y.affection={...y.affection,[o]:Math.min((y.affection[o]||0)+b,100)},p=`${o} ${d}() .  +${b}`}break}r({player:y,gameMessage:p})},performActivity:(d,o)=>{const{player:u,dailyActivitiesCount:m}=i(),g=i().actions;if(m>=2&&![""," ",""," "].includes(d)){r({gameMessage:"     .    ."});return}const p={:20,:30,:15,:25,:10,:15,:10,:25,:5,:5,:0,:5," ":30}[d]||10;if(u.stamina<p&&d!==""){r({gameMessage:` . (: ${p}, : ${u.stamina})`});return}let x={...u},S="",b=!0;switch(d!==""&&(x.stamina=Math.max(0,x.stamina-p)),d){case"":x.stats.intelligence+=2,S=" .  +2",g.gainExperience(15);break;case"":x.stats.strength+=3,x.stats.agility+=1,S=" .  +3,  +1",g.gainExperience(20);break;case"":x.stats.charm+=2,x.stats.luck+=1,S=" .  +2,  +1",g.gainExperience(15);break;case"":x.money+=500,x.stats.strength+=1,S=" . 500 ,  +1",g.gainExperience(10);break;case"":x.mp=Math.min(x.mp+20,x.maxMp),x.stats.intelligence+=1,S=" . MP +20,  +1",g.gainExperience(10);break;case"":x.stats.charm+=1,x.stats.agility+=1,S=" .  +1,  +1",g.gainExperience(10);break;case"":x.stats.intelligence+=3,S=" .  +3",g.gainExperience(12);break;case"":x.stats.agility+=3,x.maxStamina=Math.min(x.maxStamina+2,200),S=" .  +3,   +2",g.gainExperience(15);break;case"":x.stats.luck+=2,S=" .  +2",g.gainExperience(5);break;case"":x.stats.charm+=1,x.hp=Math.min(x.hp+10,x.maxHp),S=" .  +1, HP +10",g.gainExperience(5);break;case"":x.hp=Math.min(x.hp+20,x.maxHp),x.mp=Math.min(x.mp+10,x.maxMp),x.stamina=Math.min(x.stamina+40,x.maxStamina),S=" . HP +20, MP +10,  +40";break;case"":if(o){r({gameMessage:" ..."}),o("/shopping");return}S=" .",b=!1;break;case" ":if(o){r({gameMessage:" ..."}),o("/dungeon");return}S="  .",b=!1;break;default:S=`${d}() .`;break}let D=m;["","","","","","","","","",""].includes(d)&&D++,r({player:x,gameMessage:S,lastActivity:d,dailyActivitiesCount:D}),b&&(g.advanceTime(),g.checkForEvents())},checkEnding:()=>{const{player:d}=i(),o=Object.entries(d.affection).reduce((u,[m,g])=>g>u.value?{char:m,value:g}:u,{char:"",value:0});o.value>=80?d.flags[`${o.char}_route`]?r({gameEnding:o.char}):r({gameEnding:"good"}):o.value>=50?r({gameEnding:"normal"}):r({gameEnding:"solo"})},setCurrentEvent:d=>r({currentEvent:d}),updatePlayer:d=>r(o=>({player:{...o.player,...d}})),goToNextFloor:()=>r(d=>{const o=d.player.dungeonProgress.currentFloor+1;return{player:{...d.player,dungeonProgress:{...d.player.dungeonProgress,currentFloor:o,maxFloorReached:Math.max(d.player.dungeonProgress.maxFloorReached,o),position:{x:1,y:1}}}}}),gainExperience:d=>r(o=>{let u=o.player.experience+d,m=o.player.level,g=!1;for(;u>=m*100;)u-=m*100,m++,g=!0;const y={...o.player,experience:u,level:m};return g&&(y.maxHp=100+(m-1)*10,y.maxMp=50+(m-1)*5,y.hp=y.maxHp,y.mp=y.maxMp,y.stats={...y.stats,intelligence:y.stats.intelligence+1,charm:y.stats.charm+1,strength:y.stats.strength+1,agility:y.stats.agility+1,luck:y.stats.luck+1},y.maxStamina=Math.min(y.maxStamina+5,200),y.stamina=y.maxStamina),{player:y,gameMessage:g?`! Lv.${m} ! HP/MP .   +1`:` ${d} . (${u}/${m*100})`}}),addGold:d=>r(o=>({player:{...o.player,money:o.player.money+d}})),clearLastActivity:()=>r({lastActivity:null}),markCharacterAsMet:d=>{const{metCharacters:o}=i();o.includes(d)||r({metCharacters:[...o,d]})}}})),Xx=at.memo(()=>{const r=re(O=>O.player),i=ke(),d=v.useCallback((O,C=20)=>{const z=O/C*100;return z>=75?"text-green-500":z>=50?"text-yellow-500":z>=25?"text-orange-500":"text-red-500"},[]),o=v.useCallback((O,C=20)=>Math.min(O/C*100,100),[]),u=v.useMemo(()=>({morning:"",noon:"",afternoon:"",evening:"",night:""}),[]),m=v.useCallback(O=>u[O]||O,[u]),g=v.useMemo(()=>({sakura:"",yuki:"",haruka:"",ayumi:"",miku:"",rina:"",luna:"",nova:"",aria:""}),[]),{currentHP:y,maxHP:p,currentMP:x,maxMP:S,hpPercentage:b,mpPercentage:D}=v.useMemo(()=>{const O=r.hp??100,C=r.maxHp??100,z=r.mp??50,j=r.maxMp??50;return{currentHP:O,maxHP:C,currentMP:z,maxMP:j,hpPercentage:O/C*100,mpPercentage:z/j*100}},[r.hp,r.maxHp,r.mp,r.maxMp]);return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border text-text-primary p-6 mb-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 to-red-800/20 p-4 rounded-xl border border-red-500/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:""})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold text-red-400",children:""}),e.jsx("div",{className:"text-xs text-red-300",children:"Health Points"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-3xl font-bold text-red-400",children:y}),e.jsxs("span",{className:"text-red-300 text-xl",children:["/",p]}),e.jsxs("div",{className:"text-xs text-red-300",children:[Math.round(b),"%"]})]})]}),e.jsx("div",{className:"w-full bg-red-950/50 rounded-full h-4 shadow-inner",role:"progressbar","aria-valuenow":y,"aria-valuemin":0,"aria-valuemax":p,"aria-label":"",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 via-red-400 to-red-300 h-4 rounded-full transition-all duration-500 shadow-sm",style:{width:`${b}%`}})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 to-blue-800/20 p-4 rounded-xl border border-blue-500/30 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:""})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold text-blue-400",children:""}),e.jsx("div",{className:"text-xs text-blue-300",children:"Magic Points"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-3xl font-bold text-blue-400",children:x}),e.jsxs("span",{className:"text-blue-300 text-xl",children:["/",S]}),e.jsxs("div",{className:"text-xs text-blue-300",children:[Math.round(D),"%"]})]})]}),e.jsx("div",{className:"w-full bg-blue-950/50 rounded-full h-4 shadow-inner",role:"progressbar","aria-valuenow":x,"aria-valuemin":0,"aria-valuemax":S,"aria-label":"",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-blue-400 to-cyan-400 h-4 rounded-full transition-all duration-500 shadow-sm",style:{width:`${D}%`}})})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-xl font-bold text-pink-200",children:r.name}),e.jsxs("div",{className:"text-sm bg-purple-900/50 px-3 py-1 rounded-full",children:[" ",r.level,"  ",r.day,"  ",m(r.timeOfDay)]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-900/30 px-4 py-2 rounded-lg border border-green-500/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400",children:""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-300",children:""}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-green-950/50 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-400 h-2 rounded-full transition-all duration-300",style:{width:`${r.stamina/r.maxStamina*100}%`}})}),e.jsxs("span",{className:"text-xs font-bold text-green-400",children:[r.stamina,"/",r.maxStamina]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-600/20 px-3 py-1 rounded-full",children:[e.jsx("span",{className:"text-yellow-300",children:""}),e.jsxs("span",{className:"font-semibold text-yellow-200",children:[r.money.toLocaleString(),""]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-purple-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-300",children:""}),e.jsxs("span",{className:"text-sm font-medium text-purple-200",children:[" (Lv.",r.level,")"]})]}),e.jsxs("span",{className:"font-bold text-purple-200",children:[r.experience,"/",r.level*100]})]}),e.jsx("div",{className:"w-full bg-purple-950/50 rounded-full h-2",role:"progressbar","aria-valuenow":r.experience,"aria-valuemin":0,"aria-valuemax":r.level*100,"aria-label":"",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 h-2 rounded-full transition-all duration-300",style:{width:`${r.experience/(r.level*100)*100}%`}})})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mt-4",children:[e.jsxs("div",{className:"bg-blue-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-blue-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.intelligence)}`,children:r.stats.intelligence})]}),e.jsx("div",{className:"w-full bg-blue-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.intelligence,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.intelligence,50)}%`}})})]}),e.jsxs("div",{className:"bg-pink-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-pink-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-pink-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.charm)}`,children:r.stats.charm})]}),e.jsx("div",{className:"w-full bg-pink-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.charm,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-rose-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.charm,50)}%`}})})]}),e.jsxs("div",{className:"bg-green-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-green-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.stamina)}`,children:r.stats.stamina})]}),e.jsx("div",{className:"w-full bg-green-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.stamina,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.stamina,50)}%`}})})]}),e.jsxs("div",{className:"bg-orange-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-orange-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.strength)}`,children:r.stats.strength})]}),e.jsx("div",{className:"w-full bg-orange-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.strength,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.strength,50)}%`}})})]}),e.jsxs("div",{className:"bg-cyan-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-cyan-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-cyan-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.agility)}`,children:r.stats.agility})]}),e.jsx("div",{className:"w-full bg-cyan-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.agility,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-teal-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.agility,50)}%`}})})]}),e.jsxs("div",{className:"bg-yellow-900/30 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-300",children:""}),e.jsx("span",{className:"text-xs font-medium text-yellow-200",children:""})]}),e.jsx("span",{className:`font-bold text-xs ${d(r.stats.luck)}`,children:r.stats.luck})]}),e.jsx("div",{className:"w-full bg-yellow-950/50 rounded-full h-1.5",role:"progressbar","aria-valuenow":r.stats.luck,"aria-valuemin":0,"aria-valuemax":50,"aria-label":" ",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${o(r.stats.luck,50)}%`}})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-purple-300",children:" "}),e.jsx("button",{onClick:()=>i("/heroines"),className:"text-xs text-purple-400 hover:text-purple-300 transition-colors",children:"  "})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-2",children:Object.entries(r.affection).map(([O,C])=>{const z=g[O]||O,j=C>=80?"":C>=60?"":C>=40?"":C>=20?"":"";return e.jsx("button",{onClick:()=>i("/heroines"),className:"bg-gradient-to-br from-purple-900/40 to-pink-900/40 hover:from-purple-800/50 hover:to-pink-800/50 p-2 rounded-lg transition-all transform hover:scale-105 border border-purple-500/20 hover:border-purple-400/40",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg mb-1",children:j}),e.jsx("div",{className:"text-xs font-bold text-purple-200",children:z}),e.jsxs("div",{className:"text-xs text-purple-300",children:[C,"%"]}),e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"w-full bg-purple-950/50 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-1 rounded-full transition-all duration-300",style:{width:`${C}%`}})})})]})},O)})})]})]})});Xx.displayName="StatusBar";const yg=({currentLocation:r,player:i,onPerformActivity:d,onMoveToLocation:o,availableLocations:u,characters:m,onInteractCharacter:g})=>{const y=b=>({:"",:"",:"",:"",:"",:"",:""," ":"",:"",:"",:""," ":""})[b]||"",p=b=>({classroom:"",library:"",cafeteria:"",gym:"",garden:"",shopping:"",secret:""})[b]||"",x=b=>b.time!=="any"&&b.time!==i.timeOfDay?!1:b.name===""||b.name===""||b.name===""||b.name===""||b.name===" "?!0:i.stats.stamina>0,S=b=>b.unlockCondition?!(b.unlockCondition.item&&!i.inventory.includes(b.unlockCondition.item)||b.unlockCondition.flag&&!i.flags[b.unlockCondition.flag]):!0;return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md text-text-primary rounded-lg shadow-lg p-6 border border-border",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:p(r.id)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-secondary",children:r.name}),e.jsx("p",{className:"text-text-secondary text-sm",children:r.description})]})]}),e.jsxs("div",{className:"text-sm text-text-secondary italic",children:[i.timeOfDay==="morning"&&"   .",i.timeOfDay==="noon"&&"  .",i.timeOfDay==="afternoon"&&"    .",i.timeOfDay==="evening"&&"   .",i.timeOfDay==="night"&&"   ."]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-purple-900/40 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-pink-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""}),""]}),r.activities.length>0?e.jsx("div",{className:"space-y-3",children:r.activities.map((b,D)=>{const O=x(b);return e.jsx("button",{onClick:()=>d(b.name),disabled:!O,className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${O?"bg-purple-800/60 hover:bg-purple-700/60 hover:scale-105 cursor-pointer":"bg-gray-800/40 cursor-not-allowed opacity-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:y(b.name)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:b.name}),e.jsx("div",{className:"text-xs text-purple-300",children:b.time!=="any"&&`${b.time} `})]})]}),e.jsx("div",{className:"text-xs space-y-1",children:Object.entries(b.effect).map(([C,z])=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:z>0?"text-green-400":"text-red-400",children:[z>0?"+":"",z]}),e.jsx("span",{className:"text-purple-300 capitalize",children:C})]},C))})]})},D)})}):e.jsx("p",{className:"text-purple-400 text-sm italic",children:"     ."})]}),e.jsxs("div",{className:"bg-purple-900/40 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-pink-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""}),""]}),e.jsx("div",{className:"space-y-3",children:Object.entries(u).filter(([b])=>b!==r.id).map(([b,D])=>{const O=S(D);return e.jsx("button",{onClick:()=>o(b),disabled:!O,className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${O?"bg-purple-800/60 hover:bg-purple-700/60 hover:scale-105 cursor-pointer":"bg-gray-800/40 cursor-not-allowed opacity-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:p(b)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:D.name}),e.jsx("div",{className:"text-xs text-purple-300",children:!O&&D.unlockCondition&&e.jsxs("span",{className:"text-red-400",children:[D.unlockCondition.item&&" ",D.unlockCondition.flag&&" "]})})]})]})},b)})})]})]}),(()=>{const b=r.characterSchedule?r.characterSchedule[i.timeOfDay]||[]:r.characters||[];return b.length>0&&e.jsxs("div",{className:"mt-6 bg-black/20 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-secondary mb-4 flex items-center gap-2",children:[e.jsx("span",{children:""}),"  "]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:b.map(D=>{const O=m[D];return O?e.jsxs("button",{onClick:()=>g?.(D),className:"bg-primary/20 px-4 py-2 rounded-full text-sm font-medium text-text-primary border border-border flex items-center gap-2 hover:bg-primary/30 hover:scale-105 transition-all duration-200 cursor-pointer",children:[e.jsx("span",{className:"text-xl",children:O.sprite}),e.jsx("span",{children:O.name}),e.jsx("span",{className:"text-xs text-pink-300",children:""})]},D):null})})]})})(),e.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs text-text-secondary",children:[e.jsx("div",{children:i.stats.stamina<=2&&e.jsx("span",{className:"text-red-400 font-medium",children:"  !"})}),e.jsx("div",{children:"   "})]})]})},vg=({characters:r,items:i})=>{const{player:d,unlockedCharacters:o}=re(),u=re(A=>A.actions.useItem),m=re(A=>A.actions.updateAffection),[g,y]=v.useState(null),[p,x]=v.useState(!1),[S,b]=v.useState({active:!1,messages:[]}),D=A=>({sakura:"",yuki:"",luna:"",mystery:"",akane:"",hana:"",rin:"",mei:"",sora:""})[A]||"",O=A=>A>=80?{level:" ",color:"text-pink-400",bgColor:"bg-pink-500/20"}:A>=60?{level:"",color:"text-purple-400",bgColor:"bg-purple-500/20"}:A>=40?{level:"",color:"text-blue-400",bgColor:"bg-blue-500/20"}:A>=20?{level:"",color:"text-green-400",bgColor:"bg-green-500/20"}:{level:"",color:"text-gray-400",bgColor:"bg-gray-500/20"},C=(A,k)=>{const M={low:[{heroine:`... ${d.name}?`,choices:[{text:"!   ?",affectionChange:2},{text:"... ",affectionChange:0},{text:" ",affectionChange:-3}]},{heroine:"  ...",choices:[{text:" !  ?",affectionChange:3},{text:",  ",affectionChange:1},{text:"  ?",affectionChange:-2}]}],medium:[{heroine:`${d.name}!  !`,choices:[{text:"   !",affectionChange:4},{text:",  ",affectionChange:2},{text:"  ",affectionChange:-2}]},{heroine:"  ?",choices:[{text:"  !",affectionChange:5},{text:"  ...",affectionChange:2},{text:"   ?",affectionChange:-3}]}],high:[{heroine:`${d.name}...  ...`,choices:[{text:"   . ",affectionChange:6},{text:"  ",affectionChange:3},{text:"... ",affectionChange:-1}]},{heroine:"   ...",choices:[{text:" .  ",affectionChange:5},{text:" ?",affectionChange:2},{text:" ",affectionChange:-2}]}]};let Y;return k<30?Y=M.low:k<70?Y=M.medium:Y=M.high,Y[Math.floor(Math.random()*Y.length)]},z=A=>{const k=d.affection[A.id]||0,M=C(A,k);b({active:!0,messages:[{speaker:A.name,text:M.heroine,isPlayer:!1}],choices:M.choices})},j=A=>{g&&(b(k=>({...k,messages:[...k.messages,{speaker:d.name,text:A.text,isPlayer:!0}],choices:void 0})),A.affectionChange!==0&&m(g.id,A.affectionChange),setTimeout(()=>{let k;A.affectionChange>3?k=" ! ":A.affectionChange>0?k="... ":A.affectionChange<0?k="  ... ":k="... .",b(M=>({...M,messages:[...M.messages,{speaker:g.name,text:k,isPlayer:!1}]})),setTimeout(()=>{b({active:!1,messages:[]})},2e3)},1e3))},N=(A,k)=>{u(k,A.id),x(!1)},w=d.inventory.map(A=>i[A]).filter(A=>A&&A.type==="gift"),T=A=>({sakura:"from-pink-600 via-rose-500 to-pink-600",yuki:"from-blue-600 via-cyan-500 to-blue-600",luna:"from-purple-600 via-indigo-500 to-purple-600",mystery:"from-gray-600 via-slate-500 to-gray-600",akane:"from-red-600 via-orange-500 to-red-600",hana:"from-yellow-500 via-amber-400 to-yellow-500",rin:"from-violet-600 via-purple-500 to-violet-600",mei:"from-emerald-600 via-green-500 to-emerald-600",sora:"from-sky-500 via-blue-400 to-sky-500"})[A]||"from-purple-600 via-pink-500 to-purple-600";return e.jsxs("div",{className:"bg-black/30 backdrop-blur-md text-text-primary rounded-lg shadow-lg p-6 border border-border",children:[e.jsxs("h2",{className:"text-2xl font-bold text-pink-200 mb-6 flex items-center gap-2",children:[e.jsx("span",{children:""})," "]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:o.map(A=>{const k=r[A];if(!k)return null;const M=d.affection[A]||0,Y=O(M);return e.jsx("button",{onClick:()=>y(k),className:`p-4 rounded-lg transition-all duration-200 hover:scale-105 bg-gradient-to-br ${T(A)} hover:brightness-110`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:D(A)}),e.jsx("h3",{className:"font-bold text-lg text-white",children:k.name}),e.jsx("p",{className:"text-xs text-gray-200 mb-2",children:k.role}),e.jsxs("div",{className:`text-xs px-2 py-1 rounded-full ${Y.bgColor} ${Y.color} font-medium`,children:[Y.level," (",M,"/100)"]}),e.jsx("div",{className:"w-full bg-black/20 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-purple-400 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}})})]})},A)})}),S.active&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 rounded-xl p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:" ..."})}),e.jsx("div",{className:"space-y-3 mb-4",children:S.messages.map((A,k)=>e.jsxs("div",{className:`p-3 rounded-lg ${A.isPlayer?"bg-blue-600/50 ml-8 text-right":"bg-purple-600/50 mr-8"}`,children:[e.jsx("div",{className:"font-semibold text-white mb-1",children:A.speaker}),e.jsx("div",{className:"text-gray-100",children:A.text})]},k))}),S.choices&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-gray-300 mb-2",children:" :"}),S.choices.map((A,k)=>e.jsxs("button",{onClick:()=>j(A),className:"w-full p-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white text-left transition-all duration-200 hover:scale-[1.02]",children:[A.text,A.affectionChange>0&&e.jsxs("span",{className:"ml-2 text-xs text-green-300",children:["( +",A.affectionChange,")"]}),A.affectionChange<0&&e.jsxs("span",{className:"ml-2 text-xs text-red-300",children:["( ",A.affectionChange,")"]})]},k))]}),!S.choices&&S.messages.length>1&&e.jsx("button",{onClick:()=>b({active:!1,messages:[]}),className:"mt-4 w-full bg-gray-600 hover:bg-gray-500 p-2 rounded-lg text-white transition-all duration-200",children:" "})]})}),g&&!S.active&&e.jsxs("div",{className:`bg-gradient-to-r ${T(g.id)} rounded-lg p-6 shadow-inner`,children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-3",children:D(g.id)}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:g.name}),e.jsx("p",{className:"text-gray-200",children:g.role})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-sm text-gray-200 mb-3",children:g.baseText}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-300 mb-1",children:" :"}),e.jsx("div",{className:"space-y-1",children:g.likes.map((A,k)=>e.jsxs("div",{className:"text-green-200",children:[" ",A]},k))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-300 mb-1",children:" :"}),e.jsx("div",{className:"space-y-1",children:g.dislikes.map((A,k)=>e.jsxs("div",{className:"text-red-200",children:[" ",A]},k))})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsxs("button",{onClick:()=>z(g),className:"bg-blue-600/80 hover:bg-blue-500/80 px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center gap-2",children:[e.jsx("span",{children:""}),""]}),e.jsxs("button",{onClick:()=>x(!p),disabled:w.length===0,className:`px-6 py-2 rounded-lg font-medium transition-all duration-200 hover:scale-105 flex items-center gap-2 ${w.length>0?"bg-pink-600/80 hover:bg-pink-500/80":"bg-gray-600/50 cursor-not-allowed opacity-50"}`,children:[e.jsx("span",{children:""})," (",w.length,")"]})]}),p&&w.length>0&&e.jsxs("div",{className:"mt-4 bg-black/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-pink-200 mb-3",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:w.map(A=>{const k=A.preferredBy?.includes(g.id);return e.jsx("button",{onClick:()=>N(g,A.id),className:`p-3 rounded-lg text-left transition-all duration-200 hover:scale-105 ${k?"bg-yellow-600/60 hover:bg-yellow-500/60 border border-yellow-400/50":"bg-purple-800/60 hover:bg-purple-700/60"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:A.name}),e.jsx("div",{className:"text-xs text-gray-300",children:A.description}),k&&e.jsx("div",{className:"text-xs text-yellow-300 font-medium mt-1",children:"  !"})]}),e.jsx("div",{className:"text-lg",children:""})]})},A.id)})}),e.jsx("button",{onClick:()=>x(!1),className:"mt-3 w-full bg-gray-600/60 hover:bg-gray-500/60 px-4 py-2 rounded-lg text-sm transition-all duration-200",children:""})]})]}),!g&&e.jsxs("div",{className:"text-center text-purple-300 py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("p",{children:"  "})]})]})},Vx=({event:r,character:i,player:d,onChoice:o,onClose:u})=>{const[m,g]=v.useState(""),[y,p]=v.useState(!0),[x,S]=v.useState(!1);v.useEffect(()=>{g(""),p(!0),S(!1);let C=0;const z=r.description,j=setInterval(()=>{C<z.length?(g(z.substring(0,C+1)),C++):(p(!1),S(!0),clearInterval(j))},30);return()=>clearInterval(j)},[r]);const b=()=>{g(r.description),p(!1),S(!0)},D=C=>{const z=r.choices[C];if(z.condition){if(z.condition.minIntelligence&&d.stats.intelligence<z.condition.minIntelligence){alert(" !");return}if(z.condition.minCharm&&d.stats.charm<z.condition.minCharm){alert(" !");return}if(z.condition.minStamina&&d.stats.stamina<z.condition.minStamina){alert(" !");return}}o(r,C)},O=()=>{const C={classroom:"https://images.unsplash.com/photo-1580582932707-520aed937b7b",library:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570",garden:"https://images.unsplash.com/photo-1585320806297-9794b3e4eeae",dormitory:"https://images.unsplash.com/photo-1555854877-bab0e564b8d5",cafeteria:"https://images.unsplash.com/photo-1567521464027-f127ff144326",training_ground:"https://images.unsplash.com/photo-1569163139394-de4798aa62b6"};return C[r.trigger.location||"classroom"]||C.classroom};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:b,children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-all duration-1000",style:{backgroundImage:`url(${O()})`,filter:"blur(8px) brightness(0.7)"}}),i&&e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 h-full w-full flex items-end justify-center",children:e.jsx("img",{src:i.image,alt:i.name,className:"h-5/6 object-contain"})}),e.jsx("div",{className:"relative w-full max-w-4xl mx-auto mb-4 z-10",children:e.jsxs("div",{className:"bg-background/80 backdrop-blur-md rounded-xl shadow-2xl border border-border",children:[i&&e.jsx("div",{className:"px-6 py-2 bg-primary/50 rounded-t-xl",children:e.jsx("h3",{className:"text-2xl font-bold text-text-primary",children:i.name})}),e.jsxs("div",{className:"p-6 min-h-[120px] text-xl text-text-primary leading-relaxed",children:[m,y&&e.jsx("span",{className:"animate-pulse",children:"|"})]}),x&&r.choices.length>0&&e.jsx("div",{className:"p-4 grid grid-cols-1 gap-3",children:r.choices.map((C,z)=>e.jsxs("button",{onClick:()=>D(z),disabled:!!(C.condition?.minIntelligence&&d.stats.intelligence<C.condition.minIntelligence)||!!(C.condition?.minCharm&&d.stats.charm<C.condition.minCharm)||!!(C.condition?.minStamina&&d.stats.stamina<C.condition.minStamina),className:"w-full text-left p-4 rounded-lg bg-primary/20 hover:bg-primary/40 text-text-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[C.text,C.condition&&e.jsxs("span",{className:"text-xs text-yellow-400 ml-2",children:["(:",C.condition.minIntelligence&&`  ${C.condition.minIntelligence}`,C.condition.minCharm&&`  ${C.condition.minCharm}`,C.condition.minStamina&&`  ${C.condition.minStamina}`,")"]})]},z))})]})})]})},jg=JSON.parse('{"flower":{"id":"flower","name":"","description":"      . , ,       .","detailedDescription":"         .","usage":"     ","useLocation":"   ","usableBy":"   ","lore":"          ,    .","type":"gift","rarity":"common","value":100,"effect":{"affection":10},"preferredBy":["sakura","luna"],"icon":"","category":""},"book":{"id":"book","name":" ","description":"     .            .","detailedDescription":"        .       .","usage":"   ,      ","useLocation":",  ,  ","usableBy":" ,   ","lore":"        ,     .","type":"gift","rarity":"uncommon","value":200,"effect":{"affection":15},"preferredBy":["yuki"],"icon":"","category":""},"charm":{"id":"charm","name":" ","description":"     .        .","detailedDescription":"    ,       .","usage":"  ,        ","useLocation":", ,  ","usableBy":",      ","lore":"     ,  10%    .","type":"gift","rarity":"rare","value":300,"effect":{"affection":12},"preferredBy":["luna","mystery"],"icon":"","category":""},"studyGuide":{"id":"studyGuide","name":" ","description":"       .           .","detailedDescription":"    ,        .","usage":"    ,     ","useLocation":",  , ","usableBy":"  ","lore":"     ,     .","type":"consumable","rarity":"common","value":150,"effect":{"intelligence":5},"icon":"","category":""},"energyDrink":{"id":"energyDrink","name":" ","description":"      .         ,    .","detailedDescription":"        .","usage":" HP       ","useLocation":"  ,  ","usableBy":" ","lore":"    ,       .","type":"consumable","rarity":"common","value":50,"effect":{"stamina":3,"hp":20},"icon":"","category":""},"mirror":{"id":"mirror","name":" ","description":"       .         .","detailedDescription":"   ,       .","usage":"       ","useLocation":", ,  ","usableBy":" ","lore":"      ,    .","type":"consumable","rarity":"uncommon","value":120,"effect":{"charm":3},"icon":"","category":""},"lunchbox":{"id":"lunchbox","name":"","description":"    .              .","detailedDescription":"          .","usage":"   ,    ","useLocation":" ,  ,  ","usableBy":"  ","lore":"     ,       .","type":"gift","rarity":"common","value":80,"effect":{"affection":8,"stamina":2},"preferredBy":["sakura","yuki","luna"],"icon":"","category":""},"trainingGear":{"id":"trainingGear","name":" ","description":"      . , ,    ,     .","detailedDescription":"        .","usage":"     ,    ","useLocation":" , ","usableBy":" ,   ","lore":"     ,   .","type":"gift","rarity":"rare","value":500,"effect":{"affection":20},"preferredBy":["sakura"],"icon":"","category":""},"mysteryKey":{"id":"mysteryKey","name":" ","description":"      .           ,     .","detailedDescription":"  ,      .","usage":"   ,   ,    ","useLocation":" ,  ,  ","usableBy":" ,    ","lore":"       ,    .","type":"special","rarity":"legendary","value":1000,"effect":{"unlockSecret":true},"icon":"","category":""},"basicSword":{"id":"basicSword","name":" ","description":"      .   ,      .      .","detailedDescription":"    ,     .","usage":" ,  ,    ","useLocation":" , , ","usableBy":" 1   ","lore":"       .     .","type":"weapon","rarity":"common","value":200,"effect":{"strength":5,"agility":2},"requirements":{"level":1},"icon":"","category":""},"steelSword":{"id":"steelSword","name":" ","description":"     .     ,     .    .","detailedDescription":"       .","usage":"   ,    ,  ","useLocation":"  , ,   ","usableBy":" 5 ,  15  ","lore":"    ,       .","type":"weapon","rarity":"uncommon","value":800,"effect":{"strength":12,"agility":5},"requirements":{"level":5,"stats":{"strength":15}},"icon":"","category":""},"mysticStaff":{"id":"mysticStaff","name":" ","description":"      .    ,       .      .","detailedDescription":"      .","usage":"   ,  ,    ","useLocation":",  , ","usableBy":" 8 ,  20    ","lore":"    ,    .","type":"weapon","rarity":"rare","value":1200,"effect":{"intelligence":15,"mp":30,"charm":8},"requirements":{"level":8,"stats":{"intelligence":20}},"icon":"","category":""},"leatherArmor":{"id":"leatherArmor","name":" ","description":"       .      ,      .","detailedDescription":"     .","usage":"  ,   ,  ","useLocation":", ,  ","usableBy":" 2   ","lore":"           .","type":"armor","rarity":"common","value":300,"effect":{"hp":20,"agility":3},"requirements":{"level":2},"icon":"","category":""},"plateArmor":{"id":"plateArmor","name":"","description":"    .       ,     .  .","detailedDescription":"    ,   .","usage":" ,  ,  ","useLocation":" ,   ","usableBy":" 6 ,  18    ","lore":"    ,     .","type":"armor","rarity":"uncommon","value":1000,"effect":{"hp":50,"strength":8},"requirements":{"level":6,"stats":{"strength":18}},"icon":"","category":""},"mageRobe":{"id":"mageRobe","name":" ","description":"        .         ,     .","detailedDescription":"       .","usage":"  ,  ,   ","useLocation":",  ,  ","usableBy":" 7 ,  22    ","lore":"    ,     .","type":"armor","rarity":"rare","value":1500,"effect":{"mp":40,"intelligence":12,"charm":10},"requirements":{"level":7,"stats":{"intelligence":22}},"icon":"","category":""},"luckRing":{"id":"luckRing","name":" ","description":"    .    ,    .      .","detailedDescription":"    ,    .","usage":"    ,   ,      ","useLocation":", ,   ","usableBy":" 3   ","lore":"         .","type":"accessory","rarity":"uncommon","value":600,"effect":{"luck":10,"charm":5},"requirements":{"level":3},"icon":"","category":""},"strengthAmulet":{"id":"strengthAmulet","name":" ","description":"    .       ,     .      .","detailedDescription":"    ,      .","usage":" ,   ,   ","useLocation":", ,  ","usableBy":" 5 ,   ","lore":"       ,       .","type":"accessory","rarity":"rare","value":900,"effect":{"strength":8,"stamina":6,"hp":25},"requirements":{"level":5},"icon":"","category":""},"wisdomPendant":{"id":"wisdomPendant","name":" ","description":"       .     ,     .   .","detailedDescription":"       .","usage":"   ,  ,   ","useLocation":" ,   ,  ","usableBy":" 10 ,  25    ","lore":"    ,       .","type":"accessory","rarity":"epic","value":1800,"effect":{"intelligence":15,"mp":35,"experience":50},"requirements":{"level":10,"stats":{"intelligence":25}},"icon":"","category":""},"healingPotion":{"id":"healingPotion","name":" ","description":"     .     ,          .","detailedDescription":"    ,       .","usage":"      ,    ","useLocation":",  ,  ","usableBy":" ","lore":"          .","type":"consumable","rarity":"common","value":100,"effect":{"hp":50},"icon":"","category":""},"manaPotion":{"id":"manaPotion","name":" ","description":"     .     ,      .      .","detailedDescription":"    ,     .","usage":"     ,    ","useLocation":"  ,  ,  ","usableBy":"   ","lore":"    ,     .","type":"consumable","rarity":"common","value":120,"effect":{"mp":40},"icon":"","category":""},"experienceScroll":{"id":"experienceScroll","name":" ","description":"      .          ,    .","detailedDescription":"       .","usage":"    ,     ","useLocation":",  ,  ","usableBy":" ","lore":"         .","type":"consumable","rarity":"uncommon","value":250,"effect":{"experience":100},"icon":"","category":""},"statBooster":{"id":"statBooster","name":" ","description":"     .      ,     .        .","detailedDescription":"   ,   .","usage":"   ,     ","useLocation":"  ,   ,   ","usableBy":"  (,   )","lore":"         ,    .","type":"consumable","rarity":"rare","value":500,"effect":{"intelligence":3,"charm":3,"stamina":3,"strength":3,"agility":3,"luck":3},"icon":"","category":""},"chocolateBox":{"id":"chocolateBox","name":"  ","description":"     .      12     ,     .","detailedDescription":"      .","usage":"    ,    ","useLocation":",  ,  ","usableBy":",     ","lore":"        .","type":"gift","rarity":"uncommon","value":350,"effect":{"affection":18},"preferredBy":["yuki","luna"],"icon":"","category":""},"jewelryBox":{"id":"jewelryBox","name":"","description":"      . , ,              .","detailedDescription":"      ,    .","usage":"       ","useLocation":" ,  ","usableBy":",      ","lore":"        ,       .","type":"gift","rarity":"epic","value":1200,"effect":{"affection":35},"preferredBy":["luna","mystery"],"icon":"","category":""}}'),Zx={items:jg},Ng=({onClose:r})=>{const{player:i,unlockedCharacters:d}=re(),o=re(B=>B.actions.useItem),u=Zx.items,m=qa,[g,y]=v.useState(null),[p,x]=v.useState(null),[S,b]=v.useState(!1),[D,O]=v.useState("all"),[C,z]=v.useState(new Set),j=B=>{const ae={common:{color:"border-gray-400 bg-gray-500/10",text:"text-gray-400",name:""},uncommon:{color:"border-green-400 bg-green-500/10",text:"text-green-400",name:""},rare:{color:"border-blue-400 bg-blue-500/10",text:"text-blue-400",name:""},epic:{color:"border-purple-400 bg-purple-500/10",text:"text-purple-400",name:""},legendary:{color:"border-yellow-400 bg-yellow-500/10",text:"text-yellow-400",name:""}};return B.rarity?ae[B.rarity]:ae.common},N=i.inventory.reduce((B,ae)=>(u[ae]&&(B[ae]?B[ae].count++:B[ae]={item:u[ae],count:1}),B),{}),w=Object.values(N).filter(({item:B})=>D==="all"?!0:B.type===D),T=B=>{B.type==="gift"?(y(B),b(!0)):["weapon","armor","accessory"].includes(B.type)?A(B)?(o(B.id),y(null)):alert("    ."):(o(B.id),y(null))},A=B=>{if(!B.requirements)return!0;if(B.requirements.level&&i.level<B.requirements.level)return!1;if(B.requirements.stats){for(const[ae,G]of Object.entries(B.requirements.stats))if(i.stats[ae]<G)return!1}return!0},k=B=>{g&&(o(g.id,B),y(null),b(!1))},M=B=>({intelligence:"",charm:"",stamina:"",strength:"",agility:"",luck:""})[B]||B,Y=B=>({sakura:"",yuki:"",luna:"",mystery:""})[B]||"";return e.jsxs("div",{className:"bg-background text-text-primary rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-secondary flex items-center gap-2",children:[e.jsx("span",{children:""}),""]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[" ",Object.values(N).reduce((B,{count:ae})=>B+ae,0)," "]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:[{key:"all",label:"",icon:""},{key:"gift",label:"",icon:""},{key:"consumable",label:"",icon:""},{key:"weapon",label:"",icon:""},{key:"armor",label:"",icon:""},{key:"accessory",label:"",icon:""},{key:"special",label:"",icon:""}].map(({key:B,label:ae,icon:G})=>e.jsxs("button",{onClick:()=>O(B),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-2 ${D===B?"bg-primary text-white shadow-lg":"bg-black/30 text-text-secondary hover:bg-primary/50"}`,children:[e.jsx("span",{children:G}),ae]},B))}),Object.keys(N).length===0?e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("p",{children:" "})]}):w.length===0?e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("p",{children:"   "})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(({item:B,count:ae})=>{const G=j(B);return e.jsxs("div",{onClick:()=>{z(le=>new Set(le).add(B.id)),x(B)},className:`bg-black/30 rounded-lg p-4 border transition-all duration-200 hover:scale-105 cursor-pointer ${G.color}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:B.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-text-primary",children:B.name}),e.jsx("p",{className:`text-xs ${G.text} capitalize`,children:B.type})]})]}),ae>1&&e.jsxs("div",{className:"bg-primary text-white text-xs px-2 py-1 rounded-full font-bold",children:["",ae]})]}),C.has(B.id)?e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:B.description}):e.jsx("p",{className:"text-sm text-text-secondary mb-4 italic opacity-60",children:"   ..."}),C.has(B.id)&&e.jsxs("div",{className:"space-y-1 mb-4",children:[B.effect.affection&&e.jsxs("div",{className:"text-xs text-pink-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.affection]})]}),B.effect.hp&&e.jsxs("div",{className:"text-xs text-red-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.hp]})]}),B.effect.mp&&e.jsxs("div",{className:"text-xs text-blue-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.mp]})]}),B.effect.intelligence&&e.jsxs("div",{className:"text-xs text-blue-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.intelligence]})]}),B.effect.charm&&e.jsxs("div",{className:"text-xs text-pink-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.charm]})]}),B.effect.stamina&&e.jsxs("div",{className:"text-xs text-green-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.stamina]})]}),B.effect.strength&&e.jsxs("div",{className:"text-xs text-orange-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.strength]})]}),B.effect.agility&&e.jsxs("div",{className:"text-xs text-cyan-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.agility]})]}),B.effect.luck&&e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.luck]})]}),B.effect.experience&&e.jsxs("div",{className:"text-xs text-purple-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[" +",B.effect.experience]})]}),B.effect.unlockSecret&&e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:[" ",e.jsx("span",{children:" "})]})]}),C.has(B.id)&&B.requirements&&e.jsxs("div",{className:"mb-4 p-2 bg-red-900/20 rounded border border-red-500/30",children:[e.jsx("div",{className:"text-xs text-red-300 font-medium mb-1",children:" :"}),e.jsxs("div",{className:"space-y-1",children:[B.requirements.level&&e.jsxs("div",{className:"text-xs text-red-400",children:[" ",B.requirements.level," "]}),B.requirements.stats&&Object.entries(B.requirements.stats).map(([le,E])=>e.jsxs("div",{className:"text-xs text-red-400",children:[M(le)," ",E," "]},le))]})]}),B.value&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"text-xs text-yellow-300 flex items-center gap-1",children:[" ",e.jsxs("span",{children:[": ",B.value," "]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:`text-xs font-medium ${G.text}`,children:[": ",G.name]})}),B.preferredBy&&B.preferredBy.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-yellow-300 mb-1",children:"  :"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:B.preferredBy.map(le=>e.jsx("span",{className:"text-xs bg-yellow-600/20 text-yellow-200 px-2 py-1 rounded-full",children:m[le]?.name||le},le))})]}),e.jsx("button",{onClick:()=>T(B),disabled:!A(B),className:`w-full py-2 rounded-lg text-sm font-medium transition-all duration-200 ${A(B)?B.type==="gift"?"bg-secondary hover:bg-secondary/80 text-white":B.type==="consumable"?"bg-green-600/80 hover:bg-green-500/80 text-white":["weapon","armor","accessory"].includes(B.type)?"bg-blue-600/80 hover:bg-blue-500/80 text-white":"bg-yellow-600/80 hover:bg-yellow-500/80 text-white":"bg-gray-600/50 text-gray-400 cursor-not-allowed"}`,children:B.type==="gift"?"":B.type==="consumable"?"":["weapon","armor","accessory"].includes(B.type)?"":""})]},B.id)})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsx("div",{className:"bg-background rounded-lg shadow-2xl max-w-md w-full border border-border",onClick:B=>B.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-secondary",children:" "}),e.jsx("button",{onClick:()=>x(null),className:"text-text-secondary hover:text-text-primary text-2xl transition-colors duration-200",children:""})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:p.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-text-primary",children:p.name}),e.jsx("div",{className:"text-sm text-text-secondary",children:p.description})]})]})})]})})}),S&&g&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-background rounded-lg shadow-2xl max-w-md w-full border border-border",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-secondary",children:"  "}),e.jsx("button",{onClick:()=>b(!1),className:"text-text-secondary hover:text-text-primary text-2xl transition-colors duration-200",children:""})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-2xl",children:g.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-text-primary",children:g.name}),e.jsx("div",{className:"text-sm text-text-secondary",children:g.description})]})]})}),e.jsx("div",{className:"space-y-3",children:d.map(B=>{const ae=m[B];if(!ae)return null;const G=g.preferredBy?.includes(B);return e.jsxs("button",{onClick:()=>k(B),className:`w-full p-3 rounded-lg text-left transition-all duration-200 hover:scale-105 flex items-center gap-3 ${G?"bg-accent/60 hover:bg-accent/50 border border-accent/50":"bg-primary/60 hover:bg-primary/50"}`,children:[e.jsx("span",{className:"text-2xl",children:Y(B)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:ae.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:ae.role}),G&&e.jsx("div",{className:"text-xs text-accent font-medium",children:"  !"})]})]},B)})})]})})})]})},wg={conversations:[{id:"sakura_first_meeting",requiredAffection:0,dialogue:["   .         .","    .    .","    .    .","...  . .","    .","  . 2    .","    ...  .","     .","...    ?  .","      .   .","  ."," ... ,    .","   ?    ?"],choices:[{text:"  .    ?",affectionChange:7,response:`  .
? !      .
   .
  .     .
...      .`},{text:"   .   .",affectionChange:5,response:`     .   .
, ?     ...
   .
...   .  ?`},{text:"   ?   .",affectionChange:2,response:`    .
...    .  .
       .
   . ...   .`}]},{id:"sakura_training_together",requiredAffection:15,dialogue:["   .     ."," !  .","    .    .","    .    .","    .      .","   .    ."," ,  ,    .","     .     .","...  , ...","      .","...  ? , !","    .  .","...      .","      ...","   .     ."],choices:[{text:"     .    .",affectionChange:10,response:`  .    .
...  ?
...      .
    .
...  . ,   ...`},{text:"   .  .",affectionChange:6,response:`    .
!   .
       .
      .  .`},{text:"     ?",affectionChange:3,response:`  .
... .  .
   .  ...
     .`}]},{id:"sakura_secret_revealed",requiredAffection:40,dialogue:[" ,    .    .","! !","        .","...    .","    .    .","   .      .","       .","  ."," .   ...   .","  .    ...","  ,      .","....   .","      .","...  .   .","  .   .","     ..."],choices:[{text:"    .  .",affectionChange:15,response:`   .
...    ...
    .
. ...  .
...       .
    .
.   .    .`},{text:" .   .",affectionChange:8,response:`  .
 ... .   .
...    .
.    . .`},{text:" .     .",affectionChange:5,response:`  . ...
      .
  .      .`}]},{id:"sakura_confession",requiredAffection:70,dialogue:["   ,  .    .","     .   .","...       ...","   .       .","    ?    ."," ...    .","   .     .","      ...","       .","    ,    .","      ."," ...       ..."," .","     ."," ...  ?"," , ,     ."],choices:[{text:"  .  .",affectionChange:25,response:`   .    .
... ?  ?
    .
...    ?
    .  ...
    .
... ,  .`},{text:"  .     .",affectionChange:0,response:`   .
...   .
. .    ...
     . .`},{text:"...   .",affectionChange:-20,response:`   .    .
... .  .
    .
...     ...
. ...  .
  .    .`}]}]},kg={conversations:[{id:"yuki_library_encounter",requiredAffection:0,dialogue:["   ,    .     .","         .   .","    .    .","...?     ?","   .   .","     . ?",",   .  .","    .  .","...      .","  .     .","   ' ' .   .","    ."," ...  . ?","   ? ...","   ?"],choices:[{text:"    .",affectionChange:8,response:`  .    .
...?   ...
  .
...    ...
   .
.     .
.     .`},{text:"   .   ?",affectionChange:5,response:`  .
?  .
     .
 ...  .
.   .    .`},{text:" .   .",affectionChange:-2,response:`   .
.   ...
      .
    .
   . .`}]},{id:"yuki_magic_lesson",requiredAffection:20,dialogue:[" .     .    .",".      .","       .","    .","      .","   .     .",", , ...        .","    .    .","    ...  .","  ."," ,    .","  .  ...","  .","  .  ...","     .","    .   ."],choices:[{text:"   .   .",affectionChange:12,response:`  .
...  ?
    .
...        .
   .    .
   . ...   ...`},{text:"  .   .",affectionChange:7,response:`   .
.  .
  .      .
 ...     .`},{text:"    .",affectionChange:-3,response:`   .
....   .
  .
  . .`}]},{id:"yuki_forbidden_magic",requiredAffection:45,dialogue:[",     .     .","     .","      .","...    .","     .   ."," .  ,    ."," ...     .     .","   .","  .   ."," .     ...","    .","  ...  ."," ...      .","     .    ."," ...    .","? ...  ."],choices:[{text:" .   .",affectionChange:18,response:`    .    .
...      ?
... .  .
...    .
    .
  .   .   .`},{text:"  .     .",affectionChange:10,response:`    .
 ...  ?
...     ...
.    .   ...`},{text:" .      .",affectionChange:-5,response:`  .
...  .
.     .
    .`}]},{id:"yuki_true_feelings",requiredAffection:75,dialogue:["   .   ,    .","     .","   .   .","   .   .","    .","5   , 10   .","   ...    .","   ."," .  ,  ,   .","  ...      .","    ."," .      ...","       ...","     .","   .","...  ."," ...  .","      ...   ."],choices:[{text:"  .    .",affectionChange:30,response:`   .    .
  ...   ...
...  .
    .   .
     .
    .
  .      .`},{text:" .     .",affectionChange:5,response:`    .
...   .
         .
.      .`},{text:"...    .",affectionChange:-25,response:`   .   .
....  .
   ...   .
     .
. ...   .
  .    .`}]}]},Sg={conversations:[{id:"luna_moonlight_meeting",requiredAffection:0,dialogue:["  .     .","         .","       .","....","  .    .","   ...   ?","    .",".    ."," .  ."," ... '' .","   .","   .   ...",".     .","   .   ."," . ?","   ...   ."],choices:[{text:"     .",affectionChange:10,response:`     .
...?
     .
...  ?
   .
 .     .
.    '' .`},{text:"  ,   .",affectionChange:6,response:`  .
 ... .  .
     .
    .`},{text:"... ?",affectionChange:3,response:`  .
...  .
.   .   .
   ...  ,  ?`}]},{id:"luna_blood_moon",requiredAffection:30,dialogue:["   .     .","  ...   ?","      .","...    .","     .","    .","500 ...      ."," ...  .","  .    ."," ...  .",".    ...","    .   .","...     ...","...   .","  .","  ...  .","...      ."],choices:[{text:"   .  .",affectionChange:20,response:`   .
...      ?
   ...   .
    .
...     ...
     .
... ...    .
    .   .
...    .`},{text:"  .  ...",affectionChange:8,response:`  .
 ...  .
   ... .
.   .  ...`},{text:"    .",affectionChange:5,response:` ...  .
    .
 .   ...`}]},{id:"luna_past_revealed",requiredAffection:55,dialogue:["     .","...    .","   .    .","300 ,    ."," ,   ...","    .","     ...","  ...   ..."," .    .","   .","   . 300 ."," ,  .","...  .","  ."," ...       .",", , ... .","  .    .","...   ?"],choices:[{text:"  .   .",affectionChange:25,response:`    .
300 ...  .
    ...
   .
  .    ...
   .
   ... ,  ...`},{text:" .   .",affectionChange:15,response:`     .
...   ?
300     ?
 ...  .`},{text:"  .",affectionChange:5,response:`...     .
   ...
 .   .`}]},{id:"luna_eternal_love",requiredAffection:80,dialogue:["  .     .","  .    .","   .       .","...    .","   .   .","' '.       .","  ...    .","     .  ,  ...","    .","500 ...       .","      .","     ."," ...      ..."," .  ,   .","      .","?   ..."],choices:[{text:"   .   .",affectionChange:35,response:`  . 500   .
...    .
 .     .
...  .  !
    .
  .  ...
  .   .
...   60 ...   .`},{text:"  .   .",affectionChange:10,response:`  .
  . ...
      .
   .    .`},{text:"  .   .",affectionChange:-30,response:`  .
... ?
 500   ...
    .
...   ...
   .
...   .`}]}]},Jx={sakura:wg,yuki:kg,luna:Sg},Cg={classroom:{id:"classroom",name:"",description:"  .   .",activities:[{name:" ",effect:{intelligence:2,stamina:-1},time:"morning"},{name:"",effect:{intelligence:1},time:"any"}],characterSchedule:{morning:["luna","yuki"],noon:[],afternoon:["luna"],evening:[],night:[]},sprite:""},library:{id:"library",name:"",description:"  .   .",activities:[{name:" ",effect:{intelligence:3,charm:1},time:"any"},{name:" ",effect:{stamina:2},time:"any"}],characterSchedule:{morning:[],noon:["yuki"],afternoon:["yuki","luna"],evening:["yuki"],night:[]},sprite:""},training:{id:"training",name:"",description:" .    .",activities:[{name:"",effect:{stamina:3,intelligence:-1},time:"any"},{name:" ",effect:{stamina:2,charm:1},time:"afternoon"}],characterSchedule:{morning:["sakura"],noon:[],afternoon:["sakura"],evening:["sakura"],night:[]},sprite:""},cafeteria:{id:"cafeteria",name:"",description:"   .  .",activities:[{name:"",effect:{stamina:3},time:"noon"},{name:" ",effect:{charm:2},time:"any"}],characterSchedule:{morning:[],noon:["luna","yuki","sakura"],afternoon:[],evening:["luna"],night:[]},sprite:""},garden:{id:"garden",name:"",description:"   . .",activities:[{name:"",effect:{stamina:1,charm:1},time:"any"},{name:" ",effect:{charm:2},time:"afternoon"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:["yuki"],night:["luna","sakura"]},sprite:""},dormitory:{id:"dormitory",name:"",description:"  .",activities:[{name:"",effect:{stamina:5},time:"evening"},{name:" ",effect:{charm:1,intelligence:1},time:"night"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:[],night:["yuki","sakura"]},sprite:""},shop:{id:"shop",name:"",description:"      .",activities:[{name:"",effect:{},time:"any",special:"shop"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:[],night:[]},sprite:""},secretGarden:{id:"secretGarden",name:" ",description:"  .      .",activities:[{name:" ",effect:{charm:5},time:"any"}],characterSchedule:{morning:[],noon:[],afternoon:[],evening:["mystery"],night:["mystery"]},sprite:"",unlockCondition:{item:"mysteryKey"}}},_g={locations:Cg},Ia=qa,Sx=_g,Eg=()=>{const r=ke(),i=re(X=>X.player);re(X=>X.unlockedCharacters);const d=re(X=>X.currentEvent),o=re(X=>X.gameMessage),u=re(X=>X.dailyActivitiesCount||0),m=re(X=>X.metCharacters||[]),{saveGame:g,loadGame:y,performActivity:p,moveToLocation:x,advanceTime:S,handleEventChoice:b,updateAffection:D}=re(X=>X.actions),O=v.useMemo(()=>Sx.locations[i.location],[i.location]),[C,z]=at.useState(!1),[j,N]=at.useState("location"),[w,T]=at.useState(!1),[A,k]=at.useState(null),[M,Y]=at.useState(!1),[B,ae]=at.useState(null),[G,le]=at.useState(0),[E,U]=at.useState(null),[R,q]=at.useState(!1),[h,H]=at.useState([]),J=v.useCallback(X=>{if(!Ia[X])return;if(!m.includes(X)){r(`/character-meeting?character=${X}&location=${i.location}`);return}const ce=i.affection[X]||0,oe=Jx[X]?.conversations||[];let we=oe[0];for(const he of oe)if(he.requiredAffection<=ce)we=he;else break;we&&(U(we),H(we.dialogue),le(0),q(!1)),ae(X),Y(!0)},[i.affection]),ie=v.useCallback(()=>{if(!E){Y(!1),ae(null);return}R||(G<h.length-1?le(X=>X+1):E.choices&&E.choices.length>0?q(!0):(E.effects?.affection&&B&&D(B,E.effects.affection),Y(!1),ae(null),le(0),U(null),H([])))},[E,G,h,R,B,D]),L=v.useCallback(X=>{X.effects?.affection&&B&&D(B,X.effects.affection),X.response?(U(null),H([X.response]),le(0),q(!1)):(Y(!1),ae(null),le(0),U(null),H([]))},[B,D]);v.useCallback(X=>{r("/heroines")},[r]);const Z=u<2,P=i.timeOfDay==="evening"||i.timeOfDay==="night";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"Labyrinth Academy"}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsx("button",{onClick:()=>r("/game-menu"),className:"px-4 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"  ",role:"button",children:" "}),e.jsx("button",{onClick:()=>r("/heroines"),className:"px-4 py-2 bg-pink-500 text-white rounded-xl hover:bg-pink-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:"  "}),e.jsx("button",{onClick:()=>r("/quests"),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" "}),e.jsx("button",{onClick:()=>r("/dungeon-selection"),className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" "}),e.jsx("button",{onClick:()=>r("/shopping"),className:"px-4 py-2 bg-yellow-500 text-white rounded-xl hover:bg-yellow-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"",role:"button",children:" "}),e.jsx("button",{onClick:()=>r("/pets"),className:"px-4 py-2 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" "}),e.jsx("button",{onClick:()=>r("/diary"),className:"px-4 py-2 bg-pink-500 text-white rounded-xl hover:bg-pink-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":"",role:"button",children:" "}),e.jsx("button",{onClick:()=>r("/heroine-stories"),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-red-500 text-white rounded-xl hover:from-pink-600 hover:to-red-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" "}),e.jsx("div",{className:"border-l border-border mx-2 h-10","aria-hidden":"true"}),e.jsx("button",{onClick:()=>r("/save-load"),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":" ",role:"button",children:" /"}),e.jsx("button",{onClick:()=>z(!C),className:"px-4 py-2 bg-purple-500 text-white rounded-xl hover:bg-purple-600 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl","aria-label":C?" ":" ","aria-expanded":C,role:"button",children:" "})]})]})}),e.jsx(Xx,{}),e.jsx("div",{className:"bg-black/20 border border-border rounded-2xl p-4 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:""}),e.jsx("p",{className:"font-medium text-text-primary flex-1",children:o})]})}),e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-600/50 rounded-2xl p-4 mb-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-yellow-400 text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-yellow-300",children:" "}),e.jsxs("p",{className:"text-sm text-yellow-200",children:[u,"/2  ",u>=2&&" -     "]})]})]}),e.jsx("div",{className:"text-yellow-400",children:P?" . .":" "})]})}),e.jsxs("div",{className:`grid grid-cols-1 ${C?"lg:grid-cols-5":"lg:grid-cols-3"} gap-6`,children:[e.jsxs("div",{className:"lg:col-span-3 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex gap-3 mb-6",role:"tablist","aria-label":"  ",children:[e.jsx("button",{onClick:()=>N("location"),disabled:!Z&&i.location!=="dormitory",className:`px-6 py-3 rounded-xl transition-all duration-200 font-medium ${j==="location"?"bg-black/50 backdrop-blur-md text-text-primary shadow-lg transform scale-105 border border-primary/50":!Z&&i.location!=="dormitory"?"bg-black/30 backdrop-blur-md text-gray-500 opacity-50 cursor-not-allowed border border-border":"bg-black/30 backdrop-blur-md hover:bg-black/40 text-text-secondary hover:scale-105 border border-border"}`,role:"tab","aria-selected":j==="location","aria-controls":"location-panel",tabIndex:j==="location"?0:-1,children:"  "}),e.jsx("button",{onClick:()=>N("characters"),className:`px-6 py-3 rounded-xl transition-all duration-200 font-medium ${j==="characters"?"bg-black/50 backdrop-blur-md text-text-primary shadow-lg transform scale-105 border border-primary/50":"bg-black/30 backdrop-blur-md hover:bg-black/40 text-text-secondary hover:scale-105 border border-border"}`,role:"tab","aria-selected":j==="characters","aria-controls":"characters-panel",tabIndex:j==="characters"?0:-1,children:" "})]}),e.jsx("div",{id:j==="location"?"location-panel":"characters-panel",role:"tabpanel","aria-labelledby":j==="location"?"location-tab":"characters-tab",children:j==="location"?e.jsx(yg,{currentLocation:O,player:i,onPerformActivity:X=>p(X,r),onMoveToLocation:X=>{!Z&&X!=="dormitory"||x(X)},availableLocations:Sx.locations,characters:Ia,onInteractCharacter:J,canPerformActivity:Z}):e.jsx(vg,{characters:Ia,items:{}})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-sm",children:""}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-black/20 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-text-primary mb-1",children:["Day ",i.day]}),e.jsxs("div",{className:"text-lg text-text-secondary",children:[Mg(i.timeOfDay)," ",Ag(i.timeOfDay)]})]}),e.jsx("button",{onClick:S,className:"w-full px-4 py-3 bg-primary text-white rounded-xl hover:bg-secondary transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl font-medium","aria-label":"    ",role:"button",children:"  "})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-secondary rounded-full flex items-center justify-center text-white text-sm",children:""}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:" "})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:""}),e.jsxs("span",{className:"font-bold text-yellow-400",children:["Lv.",i.level]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:""}),e.jsxs("span",{className:"font-bold text-green-400",children:[i.money,"G"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:""}),e.jsxs("span",{className:"font-bold text-red-400",children:[i.hp,"/",i.maxHp]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:""}),e.jsxs("span",{className:"font-bold text-blue-400",children:[i.mp,"/",i.maxMp]})]})]})]})]})]}),C&&e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl shadow-xl border border-border h-full",children:[e.jsxs("div",{className:"sticky top-0 bg-background/80 backdrop-blur-md border-b border-border p-4 flex justify-between items-center",children:[e.jsx("h2",{id:"inventory-title",className:"text-2xl font-bold text-text-primary",children:" "}),e.jsx("button",{onClick:()=>z(!1),className:"text-text-secondary hover:text-text-primary text-2xl","aria-label":"  ",role:"button",children:""})]}),e.jsx("div",{className:"p-4 max-h-[calc(100vh-120px)] overflow-y-auto",children:e.jsx(Ng,{onClose:()=>z(!1)})})]})})]}),d&&e.jsx(Vx,{event:d,character:d.trigger.character?Ia[d.trigger.character]:void 0,player:i,onChoice:b,onClose:()=>{console.log("Closing event dialog")}}),M&&B&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:e.jsx("div",{className:"max-w-4xl w-full mx-4 bg-background/95 backdrop-blur-lg rounded-2xl shadow-2xl border border-primary/20 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[e.jsx("div",{className:"text-6xl",children:Ia[B]?.sprite||""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:Ia[B]?.name||"Unknown"}),e.jsx("div",{className:"text-text-secondary",children:Ia[B]?.role||""})]})]}),e.jsx("div",{className:"bg-black/30 rounded-xl p-6 mb-6 min-h-[150px]",children:e.jsx("p",{className:"text-lg text-text-primary leading-relaxed",children:h[G]||"..."})}),R&&E?.choices&&e.jsx("div",{className:"space-y-3 mb-6",children:E.choices.map((X,ne)=>e.jsx("button",{onClick:()=>L(X),className:"w-full text-left bg-primary/20 hover:bg-primary/30 border border-primary/30 p-4 rounded-lg transition-all duration-200",children:X.text},ne))}),!R&&E&&e.jsx("button",{onClick:ie,className:"bg-primary hover:bg-secondary px-6 py-2 rounded-full text-white font-medium transition-all duration-200",children:G<h.length-1?"":E?.choices?" ":" "}),!E&&e.jsx("button",{onClick:()=>{Y(!1),ae(null),le(0),H([])},className:"bg-gray-600 hover:bg-gray-700 px-6 py-2 rounded-full text-white font-medium transition-all duration-200",children:""})]})})})]})})},Mg=r=>({morning:"",noon:"",afternoon:"",evening:"",night:""})[r]||"",Ag=r=>({morning:"",noon:"",afternoon:"",evening:"",night:""})[r]||r,Fl=({characterId:r,emotion:i="neutral",size:d="medium",className:o=""})=>{const u={small:"w-16 h-16",medium:"w-24 h-24",large:"w-32 h-32"},m=b=>{const D="#FFE5B4",O="#2C1810";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="2" fill="#000" opacity="0.8"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"sad":C='<circle cx="40" cy="47" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="47" r="2" fill="#000" opacity="0.8"/>',z='<path d="M 45 60 Q 50 55 55 60" stroke="#4A90E2" stroke-width="2" fill="none"/>';break;case"angry":C='<line x1="35" y1="42" x2="45" y2="47" stroke="#000" stroke-width="2"/> <line x1="55" y1="47" x2="65" y2="42" stroke="#000" stroke-width="2"/>',z='<line x1="45" y1="58" x2="55" y2="58" stroke="#FF0000" stroke-width="2"/>';break;case"surprised":C='<circle cx="40" cy="45" r="3" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="3" fill="#000" opacity="0.8"/>',z='<ellipse cx="50" cy="58" rx="3" ry="5" fill="#000" opacity="0.6"/>';break;case"love":C='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#000" opacity="0.8"/> <circle cx="60" cy="45" r="2" fill="#000" opacity="0.8"/>',z='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #FF6B9D, #C44569)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 20 40 Q 50 15 80 40 Q 75 30 50 25 Q 25 30 20 40" fill="${O}"/>
        <path d="M 15 45 Q 20 35 30 40 Q 25 50 15 55 Z" fill="${O}"/>
        <path d="M 70 40 Q 80 35 85 45 Q 75 50 85 55 Z" fill="${O}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="25" ry="30" fill="${D}"/>

        <!-- Eyes -->
        ${C}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${z}

        <!-- Blush -->
        <circle cx="30" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>
        <circle cx="70" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>

        <!-- Hair accessories -->
        <circle cx="25" cy="35" r="2" fill="#FF4757"/>
        <circle cx="75" cy="35" r="2" fill="#FF4757"/>
      </svg>
    `},g=b=>{const D="#FFEEE6",O="#4A4A4A";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#4A90E2"/> <circle cx="60" cy="45" r="2" fill="#4A90E2"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"sad":C='<circle cx="40" cy="47" r="2" fill="#4A90E2"/> <circle cx="60" cy="47" r="2" fill="#4A90E2"/>',z='<path d="M 45 60 Q 50 55 55 60" stroke="#4A90E2" stroke-width="2" fill="none"/>';break;case"love":C='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#4A90E2"/> <circle cx="60" cy="45" r="2" fill="#4A90E2"/>',z='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #A8E6CF, #7FCDCD)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 25 35 Q 50 20 75 35 Q 70 25 50 22 Q 30 25 25 35" fill="${O}"/>
        <rect x="45" y="22" width="10" height="25" fill="${O}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="23" ry="28" fill="${D}"/>

        <!-- Eyes -->
        ${C}

        <!-- Glasses -->
        <circle cx="40" cy="45" r="8" fill="none" stroke="#333" stroke-width="1"/>
        <circle cx="60" cy="45" r="8" fill="none" stroke="#333" stroke-width="1"/>
        <line x1="48" y1="45" x2="52" y2="45" stroke="#333" stroke-width="1"/>

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${z}

        <!-- Blush -->
        <circle cx="28" cy="52" r="2" fill="#FFB6C1" opacity="0.4"/>
        <circle cx="72" cy="52" r="2" fill="#FFB6C1" opacity="0.4"/>

        <!-- Book -->
        <rect x="15" y="70" width="12" height="8" fill="#8B4513" rx="1"/>
        <line x1="21" y1="70" x2="21" y2="78" stroke="#654321" stroke-width="1"/>
      </svg>
    `},y=b=>{const D="#FFE8D6",O="#FFD700";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#9B59B6"/> <circle cx="60" cy="45" r="2" fill="#9B59B6"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"love":C='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#9B59B6"/> <circle cx="60" cy="45" r="2" fill="#9B59B6"/>',z='<path d="M 45 55 Q 50 58 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #FFB347, #FFCC5C)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 20 38 Q 50 18 80 38 Q 75 28 50 23 Q 25 28 20 38" fill="${O}"/>
        <path d="M 15 42 Q 25 32 35 38 Q 30 48 20 52" fill="${O}"/>
        <path d="M 65 38 Q 75 32 85 42 Q 80 48 70 52" fill="${O}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="24" ry="29" fill="${D}"/>

        <!-- Eyes -->
        ${C}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${z}

        <!-- Blush -->
        <circle cx="29" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>
        <circle cx="71" cy="52" r="3" fill="#FFB6C1" opacity="0.6"/>

        <!-- Magic sparkles -->
        <circle cx="20" cy="25" r="1" fill="#FFD700"/>
        <circle cx="80" cy="30" r="1" fill="#FFD700"/>
        <circle cx="85" cy="60" r="1" fill="#FFD700"/>
        <circle cx="15" cy="65" r="1" fill="#FFD700"/>

        <!-- Star accessory -->
        <path d="M 70 30 L 72 35 L 77 35 L 73 38 L 75 43 L 70 40 L 65 43 L 67 38 L 63 35 L 68 35 Z" fill="#9B59B6"/>
      </svg>
    `},p=b=>{const D="#F5F5DC",O="#2C2C2C";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#8E44AD"/> <circle cx="60" cy="45" r="2" fill="#8E44AD"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#666" stroke-width="2" fill="none"/>';break;case"love":C='<path d="M 35 42 L 40 47 L 45 42 L 42.5 39 L 40 40 L 37.5 39 Z" fill="#FF69B4"/> <path d="M 55 42 L 60 47 L 65 42 L 62.5 39 L 60 40 L 57.5 39 Z" fill="#FF69B4"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF1493" stroke-width="2" fill="none"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#8E44AD"/> <circle cx="60" cy="45" r="2" fill="#8E44AD"/>',z='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #2C3E50, #34495E)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 18 40 Q 50 15 82 40 Q 77 25 50 20 Q 23 25 18 40" fill="${O}"/>
        <path d="M 12 48 Q 18 38 28 42 Q 23 52 12 58" fill="${O}"/>
        <path d="M 72 42 Q 82 38 88 48 Q 77 52 88 58" fill="${O}"/>

        <!-- Face (partially in shadow) -->
        <ellipse cx="50" cy="55" rx="25" ry="30" fill="${D}"/>
        <path d="M 25 45 Q 35 40 50 45 L 50 85 Q 35 80 25 75 Z" fill="#000" opacity="0.3"/>

        <!-- Eyes -->
        ${C}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.5"/>

        <!-- Mouth -->
        ${z}

        <!-- Mystery mask -->
        <path d="M 35 35 Q 50 32 65 35 Q 60 42 50 40 Q 40 42 35 35" fill="#000" opacity="0.7"/>

        <!-- Mysterious aura -->
        <circle cx="30" cy="20" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="70" cy="25" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="85" cy="70" r="1" fill="#9B59B6" opacity="0.8"/>
        <circle cx="15" cy="75" r="1" fill="#9B59B6" opacity="0.8"/>
      </svg>
    `},x=b=>{const D="#FDBCB4",O="#8B4513";let C="",z="";switch(b){case"happy":C='<circle cx="40" cy="45" r="2" fill="#654321"/> <circle cx="60" cy="45" r="2" fill="#654321"/>',z='<path d="M 45 55 Q 50 60 55 55" stroke="#FF6B6B" stroke-width="2" fill="none"/>';break;case"determined":C='<line x1="35" y1="42" x2="45" y2="47" stroke="#654321" stroke-width="2"/> <line x1="55" y1="47" x2="65" y2="42" stroke="#654321" stroke-width="2"/>',z='<line x1="45" y1="58" x2="55" y2="58" stroke="#333" stroke-width="2"/>';break;default:C='<circle cx="40" cy="45" r="2" fill="#654321"/> <circle cx="60" cy="45" r="2" fill="#654321"/>',z='<line x1="47" y1="58" x2="53" y2="58" stroke="#666" stroke-width="1"/>'}return`
      <svg viewBox="0 0 100 100" className="w-full h-full">
        <!-- Background circle -->
        <circle cx="50" cy="50" r="48" fill="linear-gradient(135deg, #3498DB, #2980B9)" stroke="#fff" stroke-width="2"/>

        <!-- Hair -->
        <path d="M 22 38 Q 50 18 78 38 Q 73 28 50 23 Q 27 28 22 38" fill="${O}"/>
        <path d="M 18 45 Q 28 35 38 40 Q 33 50 23 55" fill="${O}"/>
        <path d="M 62 40 Q 72 35 82 45 Q 77 50 67 55" fill="${O}"/>

        <!-- Face -->
        <ellipse cx="50" cy="55" rx="24" ry="29" fill="${D}"/>

        <!-- Eyes -->
        ${C}

        <!-- Nose -->
        <circle cx="50" cy="50" r="1" fill="#DEB887" opacity="0.7"/>

        <!-- Mouth -->
        ${z}

        <!-- Sword emblem -->
        <rect x="75" y="15" width="2" height="15" fill="#C0C0C0"/>
        <rect x="73" y="12" width="6" height="3" fill="#FFD700"/>
      </svg>
    `},S=()=>{switch(r){case"sakura":return e.jsx("div",{dangerouslySetInnerHTML:{__html:m(i)}});case"yuki":return e.jsx("div",{dangerouslySetInnerHTML:{__html:g(i)}});case"luna":return e.jsx("div",{dangerouslySetInnerHTML:{__html:y(i)}});case"mystery":return e.jsx("div",{dangerouslySetInnerHTML:{__html:p(i)}});case"hero":return e.jsx("div",{dangerouslySetInnerHTML:{__html:x(i)}});default:return e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center text-white text-2xl",children:"?"})}};return e.jsx("div",{className:`${u[d]} ${o} rounded-full overflow-hidden shadow-lg border-2 border-white/20`,children:S()})},Kx=at.memo(({isLoggedIn:r,user:i,onLogout:d})=>{const o=ke(),{resetGame:u,loadGame:m}=re(N=>N.actions),[g,y]=v.useState(0),[p,x]=v.useState(!1);v.useEffect(()=>{const N=localStorage.getItem("academyDatingSim");x(!!N)},[]);const S=v.useCallback(()=>{d(),window.location.reload()},[d]);v.useEffect(()=>{const N=setInterval(()=>{y(w=>(w+1)%4)},2e3);return()=>clearInterval(N)},[]);const b=v.useCallback(()=>{u(),o("/character-creation")},[u,o]),D=v.useCallback(()=>{m(),o("/game")},[m,o]),O=v.useCallback(()=>{o("/account-creation")},[o]),C=v.useCallback(()=>{o("/login")},[o]),z=v.useCallback(()=>{o("/game-info")},[o]),j=v.useMemo(()=>Array.from({length:20},(N,w)=>e.jsx("div",{className:"absolute animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`},"aria-hidden":"true",children:e.jsx("div",{className:"w-2 h-2 bg-white/20 rounded-full"})},w)),[]);return e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden","aria-hidden":"true",children:j}),e.jsxs("div",{className:"relative z-10 max-w-6xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-gradient mb-4 animate-pulse-glow",children:"Labyrinth Academy"}),e.jsx("h2",{className:"text-2xl md:text-3xl text-text-primary mb-2",children:"  "}),e.jsx("p",{className:"text-lg text-text-secondary",children:"      "})]}),e.jsxs("div",{className:"flex justify-center items-center gap-8 mb-12",children:[e.jsxs("div",{className:`transition-all duration-1000 ${g===0?"scale-110":"scale-100"}`,children:[e.jsx(Fl,{characterId:"sakura",emotion:g===0?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:""}),e.jsx("div",{className:"text-text-secondary text-sm",children:" "})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${g===1?"scale-110":"scale-100"}`,children:[e.jsx(Fl,{characterId:"yuki",emotion:g===1?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:""}),e.jsx("div",{className:"text-text-secondary text-sm",children:" "})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${g===2?"scale-110":"scale-100"}`,children:[e.jsx(Fl,{characterId:"luna",emotion:g===2?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:""}),e.jsx("div",{className:"text-text-secondary text-sm",children:" "})]})]}),e.jsxs("div",{className:`transition-all duration-1000 ${g===3?"scale-110":"scale-100"}`,children:[e.jsx(Fl,{characterId:"mystery",emotion:g===3?"happy":"neutral",size:"large",className:"hover:scale-110 transition-transform cursor-pointer"}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("div",{className:"text-text-primary font-semibold",children:"???"}),e.jsx("div",{className:"text-text-secondary text-sm",children:" "})]})]})]}),e.jsxs("div",{className:"glass-card p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:" "}),r&&i&&e.jsxs("div",{className:"glass-card p-3 mb-4 border-accent/30",children:[e.jsx("div",{className:"text-accent text-sm",children:""}),e.jsx("div",{className:"text-text-primary font-medium",children:i.username})]}),e.jsx("button",{onClick:b,disabled:!r,className:`w-full py-4 px-6 font-bold rounded-xl transition-all duration-300 transform ${r?"btn-primary hover:scale-105":"bg-gray-500 cursor-not-allowed opacity-50 text-gray-300"}`,"aria-label":r?"  ":"    ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:r?"  ":"   "})]})}),p&&e.jsx("button",{onClick:D,className:"w-full py-4 px-6 btn-glass font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"  ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:" "})]})}),e.jsx("button",{onClick:O,className:"w-full py-4 px-6 btn-accent font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"  ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:" "})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:" "}),r?e.jsx("button",{onClick:S,className:"w-full py-4 px-6 btn-secondary font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":" ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:""})]})}):e.jsx("button",{onClick:C,className:"w-full py-4 px-6 btn-secondary font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":" ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:""})]})}),e.jsx("button",{onClick:z,className:"w-full py-4 px-6 btn-glass font-bold rounded-xl transition-all duration-300 transform hover:scale-105","aria-label":"   ",role:"button",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:""}),e.jsx("span",{children:" "})]})})]})]}),e.jsxs("div",{className:"mt-8 border-t border-border pt-6",children:[e.jsx("h4",{className:"text-lg font-bold text-text-primary mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:""}),e.jsx("div",{className:"text-text-primary font-semibold",children:""}),e.jsx("div",{className:"text-text-secondary text-sm",children:"   "})]}),e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:""}),e.jsx("div",{className:"text-text-primary font-semibold",children:" "}),e.jsx("div",{className:"text-text-secondary text-sm",children:"  "})]}),e.jsxs("div",{className:"glass-card p-4 hover:shadow-glow-sm transition-all duration-300",children:[e.jsx("div",{className:"text-2xl mb-2",children:""}),e.jsx("div",{className:"text-text-primary font-semibold",children:" "}),e.jsx("div",{className:"text-text-secondary text-sm",children:"  "})]})]})]})]}),e.jsx("div",{className:"text-center mt-8 text-text-secondary",children:e.jsx("p",{children:" 2024 Labyrinth Academy Dating Sim. Made with "})})]})]})});Kx.displayName="Homepage";const Tg=({onLogin:r})=>{const[i,d]=v.useState(""),[o,u]=v.useState(""),[m,g]=v.useState(!1),[y,p]=v.useState(""),x=ke(),S=async b=>{b.preventDefault(),g(!0),p("");try{await new Promise(O=>setTimeout(O,1e3)),r(i,o)?x("/"):p("   .")}catch{p("   .")}finally{g(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:""}),e.jsx("p",{className:"text-purple-200",children:"   "})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"text",value:i,onChange:b=>d(b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"password",value:o,onChange:b=>u(b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:" ",required:!0})]}),y&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:y})}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:" ..."})]}):""})]}),e.jsxs("div",{className:"mt-6 text-center space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-px bg-white/20"}),e.jsx("span",{className:"text-white/50 text-sm",children:""}),e.jsx("div",{className:"flex-1 h-px bg-white/20"})]}),e.jsx("button",{onClick:()=>x("/character-creation"),className:"w-full py-3 px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105",children:"  "}),e.jsx("button",{onClick:()=>x("/"),className:"w-full py-2 px-4 text-purple-300 hover:text-white transition-colors",children:" "}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{className:"text-purple-300 hover:text-white text-sm transition-colors",children:" ?"})})]}),e.jsxs("div",{className:"mt-6 bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-300 font-semibold mb-2",children:" "}),e.jsxs("div",{className:"text-blue-200 text-sm space-y-1",children:[e.jsx("p",{children:": demo"}),e.jsx("p",{children:": password"})]})]})]})})},Dg=({onCancel:r})=>{const i=ke(),{resetGame:d}=re(k=>k.actions),[o,u]=v.useState(1),[m,g]=v.useState(!1),[y,p]=v.useState(""),[x,S]=v.useState({playerName:"",startingStats:{intelligence:10,charm:10,stamina:10,strength:10,agility:10,luck:10}}),b=Object.values(x.startingStats).reduce((k,M)=>k+M,0),D=80,O=D-b,C=(k,M)=>{S(Y=>({...Y,[k]:M}))},z=(k,M)=>{const Y=Math.max(5,Math.min(20,M));Object.values(x.startingStats).reduce((G,le)=>G+le,0)-x.startingStats[k]+Y<=D&&S(G=>({...G,startingStats:{...G.startingStats,[k]:Y}}))},j=()=>x.playerName.trim()?x.playerName.length<2?"   2  .":null:"  .",N=()=>{if(p(""),o===1){const k=j();if(k){p(k);return}}u(k=>k+1)},w=async()=>{p(""),g(!0);try{await new Promise(k=>setTimeout(k,1e3)),d(x),i("/game")}catch{p("    .")}finally{g(!1)}},T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" "}),e.jsx("p",{className:"text-purple-200",children:"    "})]}),e.jsx("div",{className:"text-center mb-6",children:e.jsx(Fl,{characterId:"hero",size:"large"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:" "}),e.jsx("input",{type:"text",value:x.playerName,onChange:k=>C("playerName",k.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500 text-center",placeholder:"  "})]}),e.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-300 font-semibold mb-2",children:" "}),e.jsxs("div",{className:"text-blue-200 text-sm space-y-1",children:[e.jsx("p",{children:"   "}),e.jsx("p",{children:"       "}),e.jsx("p",{children:"        "})]})]})]}),A=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" "}),e.jsxs("p",{className:"text-purple-200",children:[" ",D,"    ( : ",O,")"]})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(x.startingStats).map(([k,M])=>{const B={intelligence:{name:"",icon:"",color:"blue"},charm:{name:"",icon:"",color:"pink"},stamina:{name:"",icon:"",color:"green"},strength:{name:"",icon:"",color:"orange"},agility:{name:"",icon:"",color:"cyan"},luck:{name:"",icon:"",color:"yellow"}}[k];return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-24",children:[e.jsx("span",{className:"text-lg",children:B.icon}),e.jsx("span",{className:"text-white font-medium",children:B.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("button",{onClick:()=>z(k,M-1),disabled:M<=5,className:"w-8 h-8 bg-red-500/50 hover:bg-red-500/70 disabled:bg-gray-500/30 disabled:cursor-not-allowed text-white rounded-full flex items-center justify-center transition-colors",children:"-"}),e.jsxs("div",{className:"flex-1 mx-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-white",children:M}),e.jsxs("span",{className:"text-gray-400",children:[M,"/20"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`bg-gradient-to-r from-${B.color}-400 to-${B.color}-600 h-2 rounded-full transition-all duration-300`,style:{width:`${M/20*100}%`}})})]}),e.jsx("button",{onClick:()=>z(k,M+1),disabled:M>=20||O<=0,className:"w-8 h-8 bg-green-500/50 hover:bg-green-500/70 disabled:bg-gray-500/30 disabled:cursor-not-allowed text-white rounded-full flex items-center justify-center transition-colors",children:"+"})]})]},k)})}),e.jsxs("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-300 font-semibold mb-2",children:" "}),e.jsxs("div",{className:"text-purple-200 text-sm space-y-1",children:[e.jsx("p",{children:" :      "}),e.jsx("p",{children:" :    "}),e.jsx("p",{children:" :      "}),e.jsx("p",{children:" :    "}),e.jsx("p",{children:" :    "}),e.jsx("p",{children:" :    "})]})]})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-lg w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between text-sm text-purple-300 mb-2",children:[e.jsxs("span",{children:[" ",o,"/2"]}),e.jsxs("span",{children:[Math.round(o/2*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${o/2*100}%`}})})]}),o===1&&T(),o===2&&A(),y&&e.jsx("div",{className:"mt-6 bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:y})}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[o>1&&e.jsx("button",{onClick:()=>u(k=>k-1),className:"flex-1 py-3 px-6 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition-colors",children:""}),o<2?e.jsx("button",{onClick:N,className:"flex-1 py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105",children:""}):e.jsx("button",{onClick:w,disabled:m||O!==0,className:"flex-1 py-3 px-6 bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:" ..."})]}):" "})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>r?r():i("/"),className:"text-purple-300 hover:text-white text-sm transition-colors",children:r?"":" "})})]})})},Rg=[{id:1,name:" ",description:"    .     .",layout:[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,2,0,1,0,3,1],[1,0,0,0,1,0,0,1],[1,1,0,1,1,1,0,1],[1,0,0,0,0,0,0,1],[1,0,4,0,0,0,5,1],[1,1,1,1,1,1,1,1]],enemies:[{id:"dustBunny",name:" ",hp:15,maxHp:15,attack:5,defense:2,agility:8,experience:10,drops:[{itemId:"energyDrink",chance:.3,quantity:1}],sprite:"",description:"     .  ."}],treasures:[{id:"chest1",position:{x:2,y:2},contents:[{itemId:"healingPotion",chance:1,quantity:2},{itemId:"flower",chance:.5,quantity:1}],opened:!1},{id:"chest2",position:{x:6,y:2},contents:[{itemId:"studyGuide",chance:1,quantity:1}],opened:!1}],nextFloorRequirement:{bossDefeated:!1}},{id:2,name:" ",description:"  .    .",layout:[[1,1,1,1,1,1,1,1,1,1],[1,0,0,0,1,1,0,0,0,1],[1,0,2,0,0,0,0,3,0,1],[1,0,0,0,1,1,0,0,0,1],[1,1,0,1,1,1,1,0,1,1],[1,0,0,0,0,0,0,0,0,1],[1,0,4,0,1,1,0,5,0,1],[1,0,0,0,0,0,0,0,0,1],[1,0,0,0,1,1,0,0,6,1],[1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"magicBook",name:"",hp:25,maxHp:25,attack:8,defense:4,agility:6,experience:20,drops:[{itemId:"manaPotion",chance:.4,quantity:1},{itemId:"mirror",chance:.2,quantity:1}],sprite:"",description:"  .   ."}],treasures:[{id:"magicChest1",position:{x:2,y:2},contents:[{itemId:"manaPotion",chance:1,quantity:3},{itemId:"charm",chance:.3,quantity:1}],opened:!1},{id:"magicChest2",position:{x:7,y:2},contents:[{itemId:"mysticStaff",chance:.8,quantity:1}],opened:!1},{id:"secretChest",position:{x:8,y:8},contents:[{itemId:"mysteryKey",chance:1,quantity:1}],opened:!1}],boss:{id:"shadowMage",name:" ",hp:80,maxHp:80,attack:15,defense:8,agility:10,experience:100,drops:[{itemId:"mageRobe",chance:.8,quantity:1},{itemId:"wisdomPendant",chance:.3,quantity:1},{itemId:"experienceScroll",chance:1,quantity:3}],sprite:"",description:"    .    ."},nextFloorRequirement:{bossDefeated:!0}},{id:3,name:" ",description:"     .   .",layout:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,2,0,1,1,1,1,0,3,0,1],[1,0,0,0,1,0,0,1,0,0,0,1],[1,0,1,0,1,0,0,1,0,1,0,1],[1,0,1,0,0,0,0,0,0,1,0,1],[1,0,1,1,1,0,0,1,1,1,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,4,0,1,1,1,1,0,5,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,6,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"ancientGuardian",name:" ",hp:50,maxHp:50,attack:12,defense:10,agility:4,experience:40,drops:[{itemId:"strengthAmulet",chance:.2,quantity:1},{itemId:"plateArmor",chance:.1,quantity:1}],sprite:"",description:"    .  ."}],treasures:[{id:"ancientChest1",position:{x:2,y:2},contents:[{itemId:"steelSword",chance:.7,quantity:1},{itemId:"healingPotion",chance:1,quantity:5}],opened:!1},{id:"ancientChest2",position:{x:9,y:2},contents:[{itemId:"luckRing",chance:.6,quantity:1}],opened:!1},{id:"sacredAltar",position:{x:6,y:10},contents:[{itemId:"jewelryBox",chance:1,quantity:1},{itemId:"statBooster",chance:.5,quantity:1}],opened:!1}],boss:{id:"ancientDragon",name:" ",hp:150,maxHp:150,attack:25,defense:15,agility:8,experience:200,drops:[{itemId:"wisdomPendant",chance:1,quantity:1},{itemId:"jewelryBox",chance:.8,quantity:1},{itemId:"experienceScroll",chance:1,quantity:5}],sprite:"",description:"   .   ."},nextFloorRequirement:{bossDefeated:!0,itemRequired:"mysteryKey"}},{id:4,name:" ",description:"  .    .",layout:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,2,0,0,0,1,1,0,0,0,3,1],[1,0,1,1,0,0,0,0,1,1,0,1],[1,0,0,1,0,5,5,0,1,0,0,1],[1,1,0,1,0,0,0,0,1,0,1,1],[1,0,0,0,0,4,4,0,0,0,0,1],[1,0,1,1,0,0,0,0,1,1,0,1],[1,0,0,1,0,5,5,0,1,0,0,1],[1,1,0,1,0,0,0,0,1,0,1,1],[1,0,0,0,0,1,1,0,0,0,0,1],[1,0,0,0,0,0,6,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"iceGolem",name:" ",hp:80,maxHp:80,attack:18,defense:15,agility:3,experience:60,gold:80,drops:[{itemId:"iceShard",chance:.3,quantity:1}],sprite:"",description:"   "},{id:"frostSprite",name:" ",hp:45,maxHp:45,attack:22,defense:8,agility:12,experience:45,gold:60,sprite:"",description:"   "}],treasures:[{id:"iceChest1",position:{x:5,y:5},contents:[{itemId:"frostArmor",chance:.8,quantity:1}],opened:!1},{id:"iceChest2",position:{x:6,y:5},contents:[{itemId:"healingPotion",chance:1,quantity:10}],opened:!1}],boss:{id:"iceQueen",name:" ",hp:250,maxHp:250,attack:35,defense:20,agility:10,experience:300,gold:500,drops:[{itemId:"iceQueenCrown",chance:.7,quantity:1},{itemId:"experienceScroll",chance:1,quantity:10}],sprite:"",description:"   "},nextFloorRequirement:{bossDefeated:!0}},{id:5,name:" ",description:"    .    .",layout:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,0,0,0,0,1,1,0,0,0,0,3,1],[1,0,1,1,1,0,0,0,0,1,1,1,0,1],[1,0,0,0,0,0,5,5,0,0,0,0,0,1],[1,1,1,0,1,1,0,0,1,1,0,1,1,1],[1,0,0,0,0,0,4,4,0,0,0,0,0,1],[1,0,1,1,1,0,0,0,0,1,1,1,0,1],[1,0,0,0,0,0,5,5,0,0,0,0,0,1],[1,1,1,0,1,1,0,0,1,1,0,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,1,1,6,6,1,1,1,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{id:"lavaSerpent",name:" ",hp:90,maxHp:90,attack:28,defense:10,agility:15,experience:80,gold:100,sprite:"",description:"    "},{id:"fireElemental",name:" ",hp:70,maxHp:70,attack:32,defense:5,agility:8,experience:70,gold:90,sprite:"",description:"   "}],treasures:[{id:"lavaChest1",position:{x:6,y:5},contents:[{itemId:"fireResistRing",chance:.9,quantity:1}],opened:!1},{id:"lavaChest2",position:{x:7,y:5},contents:[{itemId:"phoenixFeather",chance:.5,quantity:1}],opened:!1}],boss:{id:"firedragon",name:" ",hp:400,maxHp:400,attack:45,defense:25,agility:12,experience:500,gold:1e3,drops:[{itemId:"dragonScale",chance:.8,quantity:1},{itemId:"legendaryWeapon",chance:.3,quantity:1}],sprite:"",description:"  ,   "},nextFloorRequirement:{bossDefeated:!0,levelRequired:30}}],Xl={floors:Rg},qg={fireball:{id:"fireball",name:"",description:"   ",icon:"",type:"attack",element:"fire",mpCost:10,damage:30,cooldown:0,level:1,requiredLevel:1,requiredInt:15},heal:{id:"heal",name:"",description:"HP ",icon:"",type:"heal",element:"light",mpCost:15,healAmount:50,cooldown:2,level:1,requiredLevel:1,requiredInt:10},lightning:{id:"lightning",name:"",description:"  ",icon:"",type:"attack",element:"electric",mpCost:25,damage:50,cooldown:1,level:1,requiredLevel:10,requiredInt:25},ice_shard:{id:"ice_shard",name:" ",description:"  ",icon:"",type:"attack",element:"ice",mpCost:20,damage:35,freezeChance:.3,cooldown:1,level:1,requiredLevel:5,requiredInt:20},shield:{id:"shield",name:"",description:"  ",icon:"",type:"buff",element:"neutral",mpCost:20,defenseBoost:20,duration:3,cooldown:3,level:1,requiredLevel:8},berserk:{id:"berserk",name:"",description:" ,  ",icon:"",type:"buff",element:"neutral",mpCost:15,attackBoost:50,defenseReduce:20,duration:5,cooldown:5,level:1,requiredLevel:12,requiredStrength:30},poison_blade:{id:"poison_blade",name:"",description:"  ",icon:"",type:"attack",element:"poison",mpCost:15,damage:25,poisonDamage:5,poisonDuration:5,cooldown:2,level:1,requiredLevel:7},teleport:{id:"teleport",name:"",description:"   ",icon:"",type:"utility",element:"space",mpCost:30,cooldown:10,level:1,requiredLevel:15,requiredInt:35},summon_familiar:{id:"summon_familiar",name:" ",description:"   ",icon:"",type:"summon",element:"spirit",mpCost:40,familiarHp:50,familiarAttack:15,duration:10,cooldown:15,level:1,requiredLevel:20,requiredInt:40},meteor:{id:"meteor",name:"",description:"   ",icon:"",type:"attack",element:"fire",mpCost:50,damage:100,aoe:!0,cooldown:5,level:1,requiredLevel:25,requiredInt:50}},Og={skills:qg},es=Og.skills,zg=({enemy:r,onVictory:i,onDefeat:d,onFlee:o})=>{const u=re(E=>E.player),{updateHpMp:m,gainExperience:g,addItem:y,updateMoney:p}=re(E=>E.actions),[x,S]=v.useState({playerHp:u.hp,playerMp:u.mp,enemyHp:r.hp||r.maxHp,enemyMp:r.mp||50,turn:"player",battleLog:[`${r.name}()  !`],playerEffects:[],enemyEffects:[],turnCount:0,skillCooldowns:{},isAnimating:!1,currentAnimation:null}),[b,D]=v.useState(null),[O,C]=v.useState(!1),z=[es.fireball,es.heal,es.lightning,es.ice_shard,es.shield,es.poison_blade].filter(E=>E&&u.level>=(E.requiredLevel||1)),j=E=>{S(U=>({...U,battleLog:[...U.battleLog.slice(-4),E]}))},N=(E,U)=>{S(R=>{const q=E==="player"?"playerEffects":"enemyEffects";return R[q].find(H=>H.name===U.name)?{...R,[q]:R[q].map(H=>H.name===U.name?{...H,duration:U.duration}:H)}:{...R,[q]:[...R[q],U]}})},w=E=>{S(U=>{const R=E==="player"?"playerEffects":"enemyEffects",q=E==="player"?"playerHp":"enemyHp";let h=U[q],H=[];const J=U[R].reduce((ie,L)=>{if(L.effect.dotDamage&&(h-=L.effect.dotDamage,H.push(`${E==="player"?"":r.name} ${L.name} ${L.effect.dotDamage}  !`)),L.effect.healOverTime){const P=E==="player"?u.maxHp:r.maxHp;h=Math.min(P,h+L.effect.healOverTime),H.push(`${E==="player"?"":r.name} ${L.name} ${L.effect.healOverTime} HP !`)}const Z=L.duration-1;return Z>0?ie.push({...L,duration:Z}):H.push(`${L.name}  .`),ie},[]);return H.forEach(ie=>j(ie)),{...U,[R]:J,[q]:Math.max(0,h)}})},T=(E,U)=>{const R=U==="player"?x.playerEffects:x.enemyEffects,q=U==="player"?x.enemyEffects:x.playerEffects;let h=E;return R.forEach(H=>{H.effect.attack&&(h+=H.effect.attack)}),q.forEach(H=>{H.effect.defense&&(h=Math.max(1,h-H.effect.defense))}),h=Math.floor(h*(.9+Math.random()*.2)),Math.max(1,h)},A=()=>{if(x.isAnimating||O)return;S(R=>({...R,isAnimating:!0,currentAnimation:"attack"}));const E=u.stats?.strength||10,U=T(E,"player");setTimeout(()=>{S(R=>({...R,enemyHp:Math.max(0,R.enemyHp-U),isAnimating:!1,currentAnimation:null})),j(` ! ${r.name} ${U} !`),x.enemyHp-U<=0?ae():Y()},500)},k=E=>{if(x.isAnimating||O)return;const U=es[E];if(U){if(x.playerMp<U.mpCost){j("MP !");return}if(x.skillCooldowns[E]>0){j(`${U.name}()   ! (${x.skillCooldowns[E]})`);return}S(R=>({...R,isAnimating:!0,currentAnimation:`skill-${U.element}`,playerMp:R.playerMp-U.mpCost,skillCooldowns:{...R.skillCooldowns,[E]:U.cooldown||0}})),setTimeout(()=>{let R=`${U.name} !`;if(U.type==="attack"){const q=T(U.damage||20,"player");S(h=>({...h,enemyHp:Math.max(0,h.enemyHp-q)})),R+=` ${r.name} ${q} ${U.element} !`,U.element==="fire"&&Math.random()<.3?(N("enemy",{name:"",icon:"",duration:3,type:"debuff",effect:{dotDamage:5}}),R+="   !"):U.element==="ice"&&Math.random()<.3?(N("enemy",{name:"",icon:"",duration:2,type:"debuff",effect:{speed:-5}}),R+="   !"):U.element==="electric"&&Math.random()<.3&&(N("enemy",{name:"",icon:"",duration:2,type:"debuff",effect:{attack:-3,defense:-3}}),R+="   !")}else if(U.type==="heal"){const q=U.healAmount||30;S(h=>({...h,playerHp:Math.min(u.maxHp,h.playerHp+q)})),R+=` HP ${q} !`}else U.type==="buff"&&(N("player",{name:U.name,icon:U.icon,duration:U.duration||3,type:"buff",effect:U.effect||{}}),R+="   !");j(R),S(q=>({...q,isAnimating:!1,currentAnimation:null})),x.enemyHp<=0?ae():Y()},800)}},M=()=>{x.isAnimating||O||(N("player",{name:" ",icon:"",duration:1,type:"buff",effect:{defense:10}}),S(E=>({...E,playerMp:Math.min(u.maxMp,E.playerMp+5)})),j(" !   MP 5 ."),Y())},Y=()=>{w("player"),S(E=>({...E,skillCooldowns:Object.entries(E.skillCooldowns).reduce((U,[R,q])=>(U[R]=Math.max(0,q-1),U),{}),turn:"enemy",turnCount:E.turnCount+1})),setTimeout(()=>B(),1e3)},B=()=>{if(O)return;S(U=>({...U,isAnimating:!0,currentAnimation:"enemy-attack"}));const E=Math.random();setTimeout(()=>{if(E<.6){const U=T(r.attack||5,"enemy");S(R=>({...R,playerHp:Math.max(0,R.playerHp-U)})),j(`${r.name} ! ${U}  !`)}else if(E<.9&&x.enemyMp>=10){const U=T((r.attack||5)*1.5,"enemy");S(R=>({...R,playerHp:Math.max(0,R.playerHp-U),enemyMp:R.enemyMp-10})),j(`${r.name}  ! ${U}   !`),Math.random()<.3&&(N("player",{name:"",icon:"",duration:2,type:"debuff",effect:{attack:-3}}),j("  !"))}else S(U=>({...U,enemyHp:Math.min(r.maxHp,U.enemyHp+10)})),j(`${r.name}() !`);w("enemy"),S(U=>({...U,isAnimating:!1,currentAnimation:null,turn:"player"})),x.playerHp<=0&&G()},800)},ae=()=>{C(!0),j(`! ${r.name}() !`);const E=r.experience||10,U=r.gold||Math.floor(Math.random()*20)+10;if(g(E),p(U),r.drops&&Math.random()<.5){const R=r.drops[Math.floor(Math.random()*r.drops.length)];R&&(y(R.itemId),j(`${R.itemId}() !`))}j(` +${E},  +${U}`),m(x.playerHp,x.playerMp),setTimeout(()=>{i()},2e3)},G=()=>{C(!0),j("...");const E=Math.floor(u.money*.1);p(-E),m(1,u.mp),j(` ${E} .`),setTimeout(()=>{d()},2e3)},le=()=>{if(x.isAnimating||O)return;const E=.6+(u.stats?.agility||10)*.02;Math.random()<E?(j("!"),m(x.playerHp,x.playerMp),setTimeout(()=>o(),1e3)):(j(" !"),Y())};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:e.jsxs("div",{className:"w-full max-w-6xl h-full max-h-[90vh] glass-card p-6 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-primary mb-2",children:[u.name," (Lv.",u.level,")"]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.playerHp,"/",u.maxHp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${x.playerHp/u.maxHp*100}%`}})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-blue-400",children:"MP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.playerMp,"/",u.maxMp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:`${x.playerMp/u.maxMp*100}%`}})})]}),x.playerEffects.length>0&&e.jsx("div",{className:"flex gap-2 mt-2",children:x.playerEffects.map((E,U)=>e.jsxs("div",{className:`badge ${E.type==="buff"?"badge-success":"badge-error"}`,title:E.name,children:[E.icon," ",E.duration]},U))})]}),e.jsx("div",{className:`h-48 flex items-center justify-center ${x.currentAnimation==="attack"?"animate-pulse":""}`,children:e.jsx("div",{className:"text-8xl",children:""})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-2",children:r.name}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[x.enemyHp,"/",r.maxHp]})]}),e.jsx("div",{className:"w-full h-4 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${x.enemyHp/r.maxHp*100}%`}})})]}),x.enemyEffects.length>0&&e.jsx("div",{className:"flex gap-2 mt-2",children:x.enemyEffects.map((E,U)=>e.jsxs("div",{className:`badge ${E.type==="buff"?"badge-success":"badge-error"}`,title:E.name,children:[E.icon," ",E.duration]},U))})]}),e.jsx("div",{className:`h-48 flex items-center justify-center ${x.currentAnimation==="enemy-attack"?"animate-bounce":""}`,children:e.jsx("div",{className:"text-8xl",children:r.icon||""})})]})]}),e.jsx("div",{className:"glass-card p-3 h-24 mb-4 overflow-y-auto",children:x.battleLog.map((E,U)=>e.jsx("div",{className:"text-sm text-text-secondary",children:E},U))}),e.jsx("div",{className:"glass-card p-4",children:x.turn==="player"&&!O?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("button",{onClick:A,disabled:x.isAnimating,className:"btn-primary px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:" "}),e.jsx("button",{onClick:()=>D(b?null:"skills"),disabled:x.isAnimating,className:"btn-accent px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:" "}),e.jsx("button",{onClick:M,disabled:x.isAnimating,className:"btn-secondary px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:" "}),e.jsx("button",{onClick:le,disabled:x.isAnimating,className:"btn-ghost px-4 py-3 rounded-lg font-semibold disabled:opacity-50",children:" "})]}),b==="skills"&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3 p-3 bg-background-dark rounded-lg",children:z.map(E=>{const U=x.skillCooldowns[E.id]>0,R=x.playerMp<E.mpCost;return e.jsx("button",{onClick:()=>k(E.id),disabled:x.isAnimating||U||R,className:`p-3 rounded-lg text-left transition-all ${U||R?"bg-gray-700 opacity-50 cursor-not-allowed":"bg-primary/20 hover:bg-primary/30"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:E.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-text-primary",children:E.name}),e.jsxs("div",{className:"text-xs text-text-secondary",children:["MP: ",E.mpCost,U&&` (CD: ${x.skillCooldowns[E.id]})`]})]})]})},E.id)})})]}):x.turn==="enemy"&&!O?e.jsx("div",{className:"text-center text-text-secondary py-4",children:e.jsx("div",{className:"animate-pulse",children:" ..."})}):O?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-2xl font-bold text-text-primary mb-2",children:" !"}),e.jsx("button",{onClick:x.playerHp>0?i:d,className:"btn-primary px-6 py-3 rounded-lg font-semibold",children:""})]}):null})]})})},Vc=0,gi=1,Zc=2,Cx=3,_x=4,Jc=5,Kc=6,Hg=()=>{const r=ke(),i=re(Z=>Z.player),{updatePlayer:d,updateHpMp:o,addItem:u,updateMoney:m,gainExperience:g}=re(Z=>Z.actions),y=(i.dungeonProgress?.currentFloor||1)-1,p=Xl.floors[y]||Xl.floors[0],[x,S]=v.useState(!1),[b,D]=v.useState(null),O=Z=>{for(let P=0;P<Z.length;P++)for(let X=0;X<Z[P].length;X++)if(Z[P][X]===Zc)return{x:X,y:P};for(let P=0;P<Z.length;P++)for(let X=0;X<Z[P].length;X++)if(Z[P][X]===Vc)return{x:X,y:P};return{x:1,y:1}},[C,z]=v.useState(()=>p.layout.map(Z=>[...Z])),[j,N]=v.useState(()=>{const Z=i.dungeonProgress?.position;return Z&&Z.x!==void 0&&Z.y!==void 0&&C[Z.y]&&C[Z.y][Z.x]!==gi?Z:O(C)}),[w,T]=v.useState(()=>{const Z=j;return new Set([`${Z.x},${Z.y}`])}),[A,k]=v.useState(" !"),[M,Y]=v.useState(new Set),[B,ae]=v.useState(new Set),[G,le]=v.useState(new Map);v.useEffect(()=>{const Z=new Map;if(p.enemies&&p.enemies.length>0){const P=[];for(let ne=0;ne<C.length;ne++)for(let ce=0;ce<C[ne].length;ce++)if(C[ne][ce]===Vc){const oe={x:ce,y:ne},we=O(C);Math.abs(oe.x-we.x)+Math.abs(oe.y-we.y)>2&&P.push(oe)}const X=Math.min(P.length,3+Math.floor(Math.random()*3));for(let ne=0;ne<X;ne++)if(P.length>0){const ce=Math.floor(Math.random()*P.length),oe=P[ce],we=p.enemies[Math.floor(Math.random()*p.enemies.length)];Z.set(`${oe.x},${oe.y}`,{...we}),P.splice(ce,1)}}le(Z)},[p]),v.useEffect(()=>{d({dungeonProgress:{...i.dungeonProgress,position:j}})},[j]),v.useEffect(()=>{const Z=new Set(w);for(let P=-1;P<=1;P++)for(let X=-1;X<=1;X++){const ne=j.x+X,ce=j.y+P;ne>=0&&ce>=0&&ce<C.length&&ne<C[0].length&&Z.add(`${ne},${ce}`)}T(Z)},[j]);const E=v.useCallback((Z,P)=>{const X=j.x+Z,ne=j.y+P;if(X<0||ne<0||ne>=C.length||X>=C[0].length){k(" !");return}const ce=C[ne][X];if(ce===gi){k(" !");return}N({x:X,y:ne}),U(X,ne,ce)},[j,C]),U=(Z,P,X)=>{const ne=`${Z},${P}`;if(G.has(ne)&&!B.has(ne)){const ce=G.get(ne);D(ce),S(!0),k(`${ce.name}() !`);return}switch(X){case Vc:case Zc:k("  ...");break;case Cx:M.has(ne)?k("  ."):R(Z,P);break;case _x:q();break;case Jc:h();break;case Kc:B.has(ne)?k("  ."):H();break}},R=(Z,P)=>{const X=p.treasures||[{name:" ",effect:"HP +20",value:20},{name:"",effect:"Gold +50",value:50},{name:" ",effect:"MP +10",value:10}],ne=X[Math.floor(Math.random()*X.length)];k(` ! ${ne.name}() !`),ne.effect.includes("HP")?o(Math.min(i.maxHp,i.hp+ne.value),i.mp):ne.effect.includes("MP")?o(i.hp,Math.min(i.maxMp,i.mp+ne.value)):ne.effect.includes("Gold")&&m(ne.value),Y(ce=>new Set(ce).add(`${Z},${P}`))},q=()=>{const Z=Math.floor(Math.random()*10)+5;k(` ! ${Z}  !`),o(Math.max(1,i.hp-Z),i.mp)},h=()=>{y<Xl.floors.length-1?(k("  !"),d({dungeonProgress:{...i.dungeonProgress,currentFloor:y+2,position:{x:1,y:1}}}),z(Xl.floors[y+1].layout),N(O(Xl.floors[y+1].layout)),T(new Set),Y(new Set),ae(new Set)):(k("!  !"),g(100),m(500),r("/game"))},H=(Z,P)=>{const X=p.boss;if(!X){k(" .");return}D(X),S(!0),k(` ${X.name}()  !`)},J=()=>{const Z=`${j.x},${j.y}`;ae(P=>new Set([...P,Z])),S(!1),D(null),k(" !")},ie=()=>{S(!1),D(null);const Z=O(C);N(Z),o(Math.floor(i.maxHp*.5),i.mp),k(" .   .")},L=()=>{S(!1),D(null);const Z=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(const P of Z){const X=j.x+P.dx,ne=j.y+P.dy;if(X>=0&&ne>=0&&ne<C.length&&X<C[0].length&&C[ne][X]!==gi){N({x:X,y:ne});break}}k(" .")};return v.useEffect(()=>{const Z=P=>{if(!x)switch(P.key){case"ArrowUp":case"w":E(0,-1);break;case"ArrowDown":case"s":E(0,1);break;case"ArrowLeft":case"a":E(-1,0);break;case"ArrowRight":case"d":E(1,0);break}};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[E,x]),x&&b?e.jsx(zg,{enemy:b,onVictory:J,onDefeat:ie,onFlee:L}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-4 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:["  - ",p.name]}),e.jsxs("p",{className:"text-text-secondary",children:[": ",p.id," | : (",j.x,", ",j.y,")"]})]}),e.jsx("button",{onClick:()=>r("/game"),className:"btn-secondary px-6 py-3 rounded-xl font-semibold",children:""})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("div",{className:"grid grid-cols-8 gap-1 mb-4",children:C.map((Z,P)=>Z.map((X,ne)=>{const ce=`${ne},${P}`,oe=w.has(ce),we=ne===j.x&&P===j.y,he=G.has(ce)&&!B.has(ce);return e.jsx("div",{className:`
                          aspect-square flex items-center justify-center rounded
                          ${oe?X===gi?"bg-gray-700":X===Zc?"bg-green-800":X===Jc?"bg-yellow-800":X===Kc?"bg-red-900":"bg-gray-600":"bg-gray-800"}
                          ${we?"ring-2 ring-primary animate-pulse":""}
                        `,children:oe&&e.jsx(e.Fragment,{children:we?e.jsx("div",{className:"text-2xl",children:""}):e.jsxs("div",{className:"text-xl",children:[X===Cx&&!M.has(ce)&&"",X===Jc&&"",X===Kc&&!B.has(ce)&&"",X===_x&&"",he&&e.jsx("span",{className:"animate-pulse",children:G.get(ce)?.icon||""})]})})},ce)}))}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("p",{className:"text-text-secondary text-center mb-3",children:"  WASD "}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 max-w-xs mx-auto",children:[e.jsx("div",{}),e.jsx("button",{onClick:()=>E(0,-1),className:"btn-primary p-3 rounded-lg",children:""}),e.jsx("div",{}),e.jsx("button",{onClick:()=>E(-1,0),className:"btn-primary p-3 rounded-lg",children:""}),e.jsx("button",{onClick:()=>E(0,1),className:"btn-primary p-3 rounded-lg",children:""}),e.jsx("button",{onClick:()=>E(1,0),className:"btn-primary p-3 rounded-lg",children:""})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:" "}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-red-400",children:"HP"}),e.jsxs("span",{className:"text-text-secondary",children:[i.hp,"/",i.maxHp]})]}),e.jsx("div",{className:"w-full h-2 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300",style:{width:`${i.hp/i.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-blue-400",children:"MP"}),e.jsxs("span",{className:"text-text-secondary",children:[i.mp,"/",i.maxMp]})]}),e.jsx("div",{className:"w-full h-2 bg-background-dark rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:`${i.mp/i.maxMp*100}%`}})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-background-dark p-2 rounded",children:[e.jsx("span",{className:"text-yellow-400",children:""}),e.jsx("span",{className:"float-right text-text-primary",children:i.level})]}),e.jsxs("div",{className:"bg-background-dark p-2 rounded",children:[e.jsx("span",{className:"text-green-400",children:""}),e.jsx("span",{className:"float-right text-text-primary",children:i.money})]})]})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:""}),e.jsx("div",{className:"bg-background-dark p-3 rounded-lg h-32 overflow-y-auto",children:e.jsx("p",{className:"text-text-secondary",children:A})})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-3",children:""}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("span",{className:"text-text-secondary",children:""})]})]})]})]})]})]})})},Lg=()=>{const r=ke(),i=re(b=>b.player),[d,o]=v.useState(null),[u,m]=v.useState(!1),g=[{id:"forest",name:" ",description:"     .",icon:"",difficulty:1,recommendedLevel:1,rewards:[" "," "," "],unlocked:!0,theme:"nature",boss:" "},{id:"crystal_cave",name:" ",description:"    .",icon:"",difficulty:2,recommendedLevel:5,rewards:[" ",""," "],unlocked:i.level>=3,theme:"crystal",boss:" "},{id:"ancient_ruins",name:" ",description:"    .",icon:"",difficulty:3,recommendedLevel:10,rewards:[" "," "," "],unlocked:i.level>=8,theme:"ancient",boss:" "},{id:"ice_palace",name:" ",description:"    .",icon:"",difficulty:4,recommendedLevel:15,rewards:[" "," "," "],unlocked:i.level>=12,theme:"ice",boss:" "},{id:"volcano",name:" ",description:"    .",icon:"",difficulty:5,recommendedLevel:20,rewards:[""," "," "],unlocked:i.level>=18,theme:"fire",boss:" "},{id:"shadow_realm",name:" ",description:"     .",icon:"",difficulty:6,recommendedLevel:25,rewards:[" "," "," "],unlocked:i.level>=22,theme:"shadow",boss:" "},{id:"celestial_tower",name:" ",description:"    .",icon:"",difficulty:7,recommendedLevel:30,rewards:[" "," "," "],unlocked:i.level>=28,theme:"celestial",boss:" "}],y=b=>{const D=g.find(O=>O.id===b);D&&D.unlocked&&(o(b),m(!0))},p=()=>{d&&(re.setState(b=>({player:{...b.player,currentDungeon:d,dungeonProgress:{...b.player.dungeonProgress,currentFloor:1,position:{x:1,y:1}}}})),r("/dungeon"))},x=b=>"".repeat(b)+"".repeat(7-b),S=b=>{const D=["from-green-500 to-green-700","from-blue-500 to-blue-700","from-purple-500 to-purple-700","from-yellow-500 to-yellow-700","from-orange-500 to-orange-700","from-red-500 to-red-700","from-pink-500 to-pink-700"];return D[b-1]||D[0]};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"  .      ."})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-yellow-400",children:""})," : ",i.level]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-red-400",children:""})," HP: ",i.hp,"/",i.maxHp]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-blue-400",children:""})," MP: ",i.mp,"/",i.maxMp]}),e.jsxs("div",{className:"text-text-primary",children:[e.jsx("span",{className:"text-yellow-400",children:""})," : ",i.gold]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(b=>e.jsxs("div",{className:`relative transform transition-all duration-300 ${b.unlocked?"hover:scale-105":""}`,children:[e.jsxs("div",{onClick:()=>y(b.id),className:`bg-black/50 backdrop-blur-md rounded-xl border-2 overflow-hidden cursor-pointer ${b.unlocked?"border-border hover:border-primary hover:shadow-xl hover:shadow-primary/20":"border-gray-700 opacity-60 cursor-not-allowed"} ${d===b.id?"border-accent shadow-lg shadow-accent/30":""}`,children:[e.jsx("div",{className:`p-4 bg-gradient-to-r ${S(b.difficulty)}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-2",children:b.icon}),e.jsx("h3",{className:"text-xl font-bold text-white",children:b.unlocked?b.name:"???"})]})}),e.jsx("div",{className:"p-4",children:b.unlocked?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-text-secondary mb-3",children:b.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:""}),e.jsx("div",{className:"text-yellow-400",children:x(b.difficulty)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:" "}),e.jsxs("div",{className:`font-bold ${i.level>=b.recommendedLevel?"text-green-400":"text-red-400"}`,children:["Lv.",b.recommendedLevel,"+"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:""}),e.jsx("div",{className:"text-text-primary font-semibold",children:b.boss})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-1",children:b.rewards.map((D,O)=>e.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:D},O))})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsxs("p",{className:"text-gray-400",children:[" ",g.find(D=>D.id===b.id)?.recommendedLevel-2,"  "]})]})}),b.unlocked&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("button",{className:`w-full py-2 rounded-lg font-bold transition ${d===b.id?"bg-accent text-background":"bg-primary hover:bg-secondary text-white"}`,children:d===b.id?" ":""})})]}),!b.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-2",children:""}),e.jsx("div",{className:"text-gray-300 font-bold",children:""})]})})]},b.id))}),u&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-xl p-8 max-w-md w-full border border-border",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"  "}),e.jsxs("p",{className:"text-text-secondary mb-6",children:[g.find(b=>b.id===d)?.name," ?",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-400 text-sm",children:"      ."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:p,className:"flex-1 px-4 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:""}),e.jsx("button",{onClick:()=>{m(!1),o(null)},className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})})]})})},Bg=()=>{const r=ke(),i=re(h=>h.player),[d,o]=v.useState([]),[u,m]=v.useState(!1),[g,y]=v.useState(null),[p,x]=v.useState(""),[S,b]=v.useState(null),[D,O]=v.useState(""),[C,z]=v.useState(""),[j,N]=v.useState(""),[w,T]=v.useState([]),[A,k]=v.useState([]),M=[{id:"happy",label:"",emoji:""},{id:"excited",label:"",emoji:""},{id:"peaceful",label:"",emoji:""},{id:"romantic",label:"",emoji:""},{id:"sad",label:"",emoji:""},{id:"confused",label:"",emoji:""},{id:"determined",label:"",emoji:""},{id:"nostalgic",label:"",emoji:""}],Y=()=>{const h=["","","","",""];return Object.keys(i.affection).forEach(H=>{(i.affection[H]||0)>0&&h.push(H)}),i.location&&h.push(i.location),[...new Set(h)]};v.useEffect(()=>{const h=localStorage.getItem("diaryEntries");h&&o(JSON.parse(h))},[]);const B=h=>{localStorage.setItem("diaryEntries",JSON.stringify(h)),o(h)},ae=()=>{if(!D.trim()||!C.trim()){alert("  !");return}const H=[{id:`diary-${Date.now()}`,date:new Date().toLocaleDateString("ko-KR"),day:i.day,timeOfDay:i.timeOfDay,title:D,content:C,mood:j,tags:w,memories:A,createdAt:Date.now()},...d];B(H),O(""),z(""),N(""),T([]),k([]),m(!1);const{addExperience:J}=re.getState().actions;J(5)},G=h=>{if(confirm("  ?")){const H=d.filter(J=>J.id!==h);B(H),y(null)}},le=h=>{w.includes(h)||T([...w,h])},E=h=>{T(w.filter(H=>H!==h))},U=()=>{const h=[];return i.level>1&&h.push(`  ${i.level} !`),Object.keys(i.affection).forEach(H=>{(i.affection[H]||0)>=20&&h.push(`${H}   .`)}),h},R=d.filter(h=>{const H=!p||h.title.toLowerCase().includes(p.toLowerCase())||h.content.toLowerCase().includes(p.toLowerCase()),J=!S||h.tags.includes(S);return H&&J}),q=[...new Set(d.flatMap(h=>h.tags))];return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"   "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-primary hover:bg-secondary text-white rounded-lg transition font-bold",children:"  "}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-text-primary",children:["  : ",e.jsx("span",{className:"font-bold text-accent",children:d.length}),""]}),e.jsxs("div",{className:"text-text-primary",children:[" Day ",i.day," - ",Ug(i.timeOfDay)]}),e.jsxs("div",{className:"text-text-primary",children:[" ",i.location||""]})]})})}),!u&&!g&&e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:" ...",value:p,onChange:h=>x(h.target.value),className:"flex-1 px-4 py-2 bg-black/50 border border-border rounded-lg text-text-primary"}),e.jsxs("select",{value:S||"",onChange:h=>b(h.target.value||null),className:"px-4 py-2 bg-black/50 border border-border rounded-lg text-text-primary",children:[e.jsx("option",{value:"",children:" "}),q.map(h=>e.jsx("option",{value:h,children:h},h))]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[!u&&!g&&e.jsx(e.Fragment,{children:R.length>0?R.map(h=>e.jsxs("div",{onClick:()=>y(h),className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-border hover:border-primary cursor-pointer transition-all hover:scale-105",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-1",children:h.title}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Day ",h.day," - ",h.date]})]}),e.jsx("span",{className:"text-2xl",children:M.find(H=>H.label===h.mood)?.emoji||""})]}),e.jsx("p",{className:"text-text-secondary line-clamp-3 mb-3",children:h.content}),h.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map((H,J)=>e.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded",children:["#",H]},J))})]},h.id)):e.jsxs("div",{className:"col-span-3 text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-text-secondary text-lg",children:p||S?"  .":"   .   !"})]})}),u&&e.jsxs("div",{className:"lg:col-span-3 bg-black/50 backdrop-blur-md rounded-lg p-8 border border-border",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-6",children:"  "}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:""}),e.jsx("input",{type:"text",value:D,onChange:h=>O(h.target.value),placeholder:"  ...",className:"w-full px-4 py-3 bg-black/50 border border-border rounded-lg text-text-primary"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:" "}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:M.map(h=>e.jsxs("button",{onClick:()=>N(h.label),className:`px-4 py-3 rounded-lg border-2 transition ${j===h.label?"border-primary bg-primary/20":"border-border hover:border-primary/50"}`,children:[e.jsx("span",{className:"text-2xl mr-2",children:h.emoji}),e.jsx("span",{className:"text-text-primary",children:h.label})]},h.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:""}),e.jsx("textarea",{value:C,onChange:h=>z(h.target.value),placeholder:"    ...",rows:10,className:"w-full px-4 py-3 bg-black/50 border border-border rounded-lg text-text-primary"}),U().length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:" :"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:U().map((h,H)=>e.jsxs("button",{onClick:()=>z(J=>J+`
`+h),className:"text-xs bg-purple-600/20 text-purple-400 px-2 py-1 rounded hover:bg-purple-600/30",children:["+ ",h]},H))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-text-secondary mb-2",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:w.map(h=>e.jsxs("span",{className:"bg-primary/20 text-primary px-3 py-1 rounded-full text-sm flex items-center gap-2",children:["#",h,e.jsx("button",{onClick:()=>E(h),className:"text-red-400 hover:text-red-300",children:""})]},h))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Y().map(h=>!w.includes(h)&&e.jsxs("button",{onClick:()=>le(h),className:"text-sm bg-gray-700 text-gray-300 px-3 py-1 rounded-full hover:bg-gray-600",children:["+ ",h]},h))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:ae,className:"flex-1 px-6 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:" "}),e.jsx("button",{onClick:()=>{m(!1),O(""),z(""),N(""),T([])},className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]}),g&&e.jsxs("div",{className:"lg:col-span-3 bg-black/50 backdrop-blur-md rounded-lg p-8 border border-border",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2",children:g.title}),e.jsxs("div",{className:"flex gap-4 text-text-secondary",children:[e.jsxs("span",{children:[" Day ",g.day]}),e.jsxs("span",{children:[" ",g.date]}),e.jsxs("span",{children:[M.find(h=>h.label===g.mood)?.emoji," ",g.mood]})]})]}),e.jsx("button",{onClick:()=>y(null),className:"text-2xl text-text-secondary hover:text-text-primary",children:""})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-6 mb-6",children:e.jsx("p",{className:"text-text-primary whitespace-pre-wrap leading-relaxed",children:g.content})}),g.tags.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:""}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.tags.map((h,H)=>e.jsxs("span",{className:"bg-primary/20 text-primary px-3 py-1 rounded-full",children:["#",h]},H))})]}),g.memories&&g.memories.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:" "}),e.jsx("div",{className:"space-y-2",children:g.memories.map((h,H)=>e.jsxs("div",{className:"bg-purple-600/20 text-purple-300 px-4 py-2 rounded-lg",children:[" ",h]},H))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>G(g.id),className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition",children:" "}),e.jsx("button",{onClick:()=>y(null),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})]})]})})},Ug=r=>({morning:"",noon:"",afternoon:"",evening:"",night:""})[r]||r,$g=()=>{const r=ke(),i=re(M=>M.player),d=re(M=>M.actions.updateAffection),o=re(M=>M.actions.addExperience),u=re(M=>M.actions.addGold),[m,g]=v.useState(null),[y,p]=v.useState(null),[x,S]=v.useState(0),[b,D]=v.useState({}),[O,C]=v.useState(!1),z=[{heroineId:"sakura",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"sakura-1-1",requiredAffection:0,title:" ",description:"  ",dialogue:["(      )",': "...?    ."',': ", . ..."',': ",    ?"'],choices:[{text:"  ",affectionChange:5,response:': "...   ."'},{text:" ",affectionChange:0,response:': "...   ."'}],rewards:{exp:10}},{id:"sakura-1-2",requiredAffection:10,title:" ",description:"    ",dialogue:[': ",   ."',"(   )",': "  ..."',': "? !"',': "...  .  ."'],rewards:{exp:15,gold:50}}]},{id:2,title:" ",requiredAffection:30,events:[{id:"sakura-2-1",requiredAffection:30,title:" ",description:"      ",dialogue:[': "...     ?"',': "   ."',': "...!"',"(  )",': "...     ."',': "  ..."'],choices:[{text:"  ",affectionChange:10,response:': "...  ."'},{text:" ",affectionChange:8,response:': "....     ."'}],rewards:{exp:25,gold:100}}]},{id:3,title:" ",requiredAffection:60,events:[{id:"sakura-3-1",requiredAffection:60,title:"",description:"  ",dialogue:["(  )",': "...   ."',': "    ..."',': "...      ."',': "...  ."'],choices:[{text:" ",affectionChange:20,response:': "? ...  !"'},{text:"()",affectionChange:25,response:': "...! ( )"'}],rewards:{exp:50,gold:200}}]}]},{heroineId:"yuki",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"yuki-1-1",requiredAffection:0,title:" ",description:"   ",dialogue:["(     )",': "... ..."',"(  )",': "  ?"',': "   ...  ?"'],choices:[{text:" ",affectionChange:5,response:': "?  ?"'},{text:" ",affectionChange:2,response:': "  ...   ."'}],rewards:{exp:10}}]},{id:2,title:"  ",requiredAffection:25,events:[{id:"yuki-2-1",requiredAffection:25,title:" ",description:"    ",dialogue:[': " ...  ."',"(    )",': "    ."',': "  ...  ."',': "    ."'],choices:[{text:"",affectionChange:8,response:': " ...  ."'},{text:"    ",affectionChange:12,response:': "....  ."'}],rewards:{exp:20,gold:80}}]}]},{heroineId:"luna",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"luna-1-1",requiredAffection:0,title:" ",description:"   ",dialogue:["(     )",': "!  ? !"',': "...  !"',': ",   !"',': "   ?"'],choices:[{text:"?",affectionChange:5,response:': "!  !"'},{text:"   ",affectionChange:3,response:': "    ! !"'}],rewards:{exp:10}}]}]},{heroineId:"haruka",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"haruka-1-1",requiredAffection:0,title:"  ",description:"   ",dialogue:["(    )",': "!  ?"',': " !  !"',': ", ..."',': " ?   !"'],choices:[{text:", !",affectionChange:5,response:': "! !"'},{text:" ",affectionChange:1,response:': "    !"'}],rewards:{exp:10}}]}]},{heroineId:"miku",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"miku-1-1",requiredAffection:0,title:" ",description:"   ",dialogue:["(   )","(     )",': "!   ?"',': ",  ..."',': "... ."'],choices:[{text:" ?",affectionChange:5,response:': "? !  !"'},{text:" ",affectionChange:2,response:': ".   ."'}],rewards:{exp:10}}]}]},{heroineId:"rina",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"rina-1-1",requiredAffection:0,title:" ",description:"  ",dialogue:["(    )",': "! ! ..."',': " !"',': "!  ?  !"',': "   !"'],choices:[{text:"  ",affectionChange:6,response:': " !  !"'},{text:" ",affectionChange:2,response:': "   !"'}],rewards:{exp:10}}]}]},{heroineId:"ayumi",name:"",sprite:"",currentChapter:1,chapters:[{id:1,title:" ",requiredAffection:0,events:[{id:"ayumi-1-1",requiredAffection:0,title:" ",description:"  ",dialogue:["(       )",': "...   ."',': " ?"',': " .    ..."',': "  ?"'],choices:[{text:"",affectionChange:5,response:': " ...   ."'},{text:"   ",affectionChange:4,response:': " .   ."'}],rewards:{exp:10}}]}]}];v.useEffect(()=>{const M=localStorage.getItem("completedStoryEvents");M&&D(JSON.parse(M))},[]);const j=M=>{localStorage.setItem("completedStoryEvents",JSON.stringify(M)),D(M)},N=()=>{y&&(x<y.dialogue.length-1?S(x+1):y.choices&&y.choices.length>0||T())},w=M=>{!y||!m||(d(m,M.affectionChange),alert(M.response),T())},T=()=>{if(!y||!m)return;const M=b[m]||[];if(!M.includes(y.id)){const Y={...b,[m]:[...M,y.id]};j(Y)}y.rewards&&(y.rewards.exp&&o(y.rewards.exp),y.rewards.gold&&u(y.rewards.gold)),C(!0),setTimeout(()=>{p(null),S(0),C(!1)},2e3)},A=M=>{const Y=z.find(le=>le.heroineId===M);if(!Y)return[];const B=i.affection[M]||0,ae=b[M]||[],G=[];for(const le of Y.chapters)if(B>=le.requiredAffection)for(const E of le.events)B>=E.requiredAffection&&!ae.includes(E.id)&&G.push(E);return G},k=M=>{const Y=z.find(G=>G.heroineId===M);if(!Y)return{completed:0,total:0};const B=b[M]?.length||0,ae=Y.chapters.reduce((G,le)=>G+le.events.length,0);return{completed:B,total:ae}};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-red-500 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"    "})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),!y&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:z.map(M=>{const Y=i.affection[M.heroineId]||0,B=A(M.heroineId),ae=k(M.heroineId),G=Y<=0;return e.jsxs("div",{onClick:()=>!G&&g(M.heroineId),className:`bg-black/50 backdrop-blur-md rounded-lg p-6 border-2 transition-all ${G?"border-gray-700 opacity-60 cursor-not-allowed":"border-border hover:border-primary cursor-pointer hover:scale-105"}`,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:G?"":M.sprite}),e.jsx("h3",{className:"text-xl font-bold text-text-primary",children:G?"???":M.name})]}),!G&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:""}),e.jsx("div",{className:"bg-black/50 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-red-500 h-3 rounded-full",style:{width:`${Math.min(Y,100)}%`}})}),e.jsxs("div",{className:"text-center text-sm text-text-primary mt-1",children:[Y,"/100"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsxs("div",{className:"text-center text-text-primary",children:[ae.completed,"/",ae.total," "]})]}),B.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"text-sm text-accent font-bold",children:["   ",B.length,""]})})]})]},M.heroineId)})}),m&&!y&&e.jsxs("div",{className:"mt-6",children:[e.jsx("button",{onClick:()=>g(null),className:"mb-4 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg",children:" "}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[A(m).map(M=>e.jsxs("div",{onClick:()=>{p(M),S(0)},className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-border hover:border-primary cursor-pointer transition-all hover:scale-[1.02]",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-2",children:M.title}),e.jsx("p",{className:"text-text-secondary",children:M.description}),M.rewards&&e.jsxs("div",{className:"mt-3 flex gap-4 text-sm",children:[M.rewards.exp&&e.jsxs("span",{className:"text-yellow-400",children:[" EXP +",M.rewards.exp]}),M.rewards.gold&&e.jsxs("span",{className:"text-yellow-400",children:[" Gold +",M.rewards.gold]})]})]},M.id)),A(m).length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-text-secondary",children:["    .",e.jsx("br",{}),"  !"]})})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 rounded-xl p-8 max-w-3xl w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:y.title}),e.jsx("div",{className:"bg-black/30 rounded-lg p-6 mb-6 min-h-[200px]",children:e.jsx("p",{className:"text-lg text-white leading-relaxed",children:y.dialogue[x]})}),x===y.dialogue.length-1&&y.choices?e.jsx("div",{className:"space-y-3",children:y.choices.map((M,Y)=>e.jsxs("button",{onClick:()=>w(M),className:"w-full p-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg text-white transition-all hover:scale-[1.02]",children:[M.text,M.affectionChange>0&&e.jsxs("span",{className:"ml-2 text-sm opacity-80",children:["( +",M.affectionChange,")"]})]},Y))}):e.jsx("button",{onClick:N,className:"w-full p-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white font-bold transition-all",children:x<y.dialogue.length-1?" ":""})]})}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-60 pointer-events-none",children:e.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl p-8 animate-bounce",children:e.jsx("h2",{className:"text-3xl font-bold text-white text-center",children:"  ! "})})})]})})},Gg=()=>{const r=ke(),i=re(R=>R.player),d=re(R=>R.unlockedCharacters),o=re(R=>R.completedEvents),{saveGame:u,loadGame:m}=re(R=>R.actions),[g,y]=v.useState([]),[p,x]=v.useState(null),[S,b]=v.useState(null),[D,O]=v.useState(!1),[C,z]=v.useState(()=>{}),[j,N]=v.useState(""),w=6;v.useEffect(()=>{T()},[]);const T=()=>{const R=[];for(let q=1;q<=w;q++){const h=`academyDatingSim_slot${q}`,H=localStorage.getItem(h);if(H){const J=JSON.parse(H);R.push({id:q,isEmpty:!1,data:{playerName:J.player.name,level:J.player.level,day:J.player.day,timeOfDay:J.player.timeOfDay,location:J.player.location,affectionSummary:J.player.affection||{},saveDate:J.saveDate||new Date().toLocaleString(),playTime:J.playTime||0}})}else R.push({id:q,isEmpty:!0})}y(R)},A=R=>{const q=g.find(h=>h.id===R);q&&!q.isEmpty?(N(` ${R}   ?`),z(()=>()=>k(R)),O(!0)):k(R)},k=R=>{const q=`academyDatingSim_slot${R}`,h={player:i,unlockedCharacters:d,completedEvents:o,saveDate:new Date().toLocaleString(),playTime:G()};localStorage.setItem(q,JSON.stringify(h)),localStorage.setItem("currentSaveSlot",R.toString()),T(),O(!1),alert(`  ${R} !`)},M=R=>{const q=g.find(h=>h.id===R);q&&!q.isEmpty&&(N(` ${R}  ?
    .`),z(()=>()=>Y(R)),O(!0))},Y=R=>{const q=`academyDatingSim_slot${R}`,h=localStorage.getItem(q);if(h){const H=JSON.parse(h);localStorage.setItem("academyDatingSim",JSON.stringify({player:H.player,unlockedCharacters:H.unlockedCharacters,completedEvents:H.completedEvents})),localStorage.setItem("currentSaveSlot",R.toString()),m(),O(!1),r("/game")}},B=R=>{N(` ${R}  ?
    .`),z(()=>()=>ae(R)),O(!0)},ae=R=>{const q=`academyDatingSim_slot${R}`;localStorage.removeItem(q),T(),O(!1),alert(` ${R}  .`)},G=()=>i.day*60+(i.timeOfDay==="noon"?30:0),le=R=>{const q=Math.floor(R/60),h=R%60;return`${q} ${h}`},E=R=>({morning:"",noon:"",afternoon:"",evening:"",night:""})[R]||"",U=R=>{const q=Object.entries(R);return q.length===0?null:q.reduce((H,[J,ie])=>ie>H.value?{char:J,value:ie}:H,{char:q[0][0],value:q[0][1]})};return e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent mb-2",children:"  & "}),e.jsxs("p",{className:"text-text-secondary",children:[" ",w,"     "]})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg p-4 mb-6 border border-border",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>b("save"),className:`px-6 py-3 rounded-lg font-bold transition ${S==="save"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:" "}),e.jsx("button",{onClick:()=>b("load"),className:`px-6 py-3 rounded-lg font-bold transition ${S==="load"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:" "})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(R=>e.jsxs("div",{className:`bg-black/50 backdrop-blur-md rounded-lg border-2 transition-all hover:scale-[1.02] ${p===R.id?"border-accent shadow-xl":"border-border hover:border-primary"} ${R.isEmpty?"opacity-60":""}`,children:[e.jsx("div",{className:`p-4 bg-gradient-to-r ${R.isEmpty?"from-gray-700 to-gray-600":"from-purple-700 to-blue-700"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-white",children:[" ",R.id]}),!R.isEmpty&&e.jsx("button",{onClick:()=>B(R.id),className:"text-red-400 hover:text-red-300 text-sm",children:" "})]})}),e.jsxs("div",{className:"p-4",children:[R.isEmpty?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2 opacity-50",children:""}),e.jsx("p",{className:"text-text-secondary",children:" "})]}):R.data&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:":"}),e.jsx("span",{className:"text-text-primary font-bold",children:R.data.playerName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:":"}),e.jsxs("span",{className:"text-yellow-400 font-bold",children:["Lv.",R.data.level]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:":"}),e.jsxs("span",{className:"text-text-primary",children:["Day ",R.data.day," - ",E(R.data.timeOfDay)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:":"}),e.jsx("span",{className:"text-text-primary",children:R.data.location})]}),Object.keys(R.data.affectionSummary).length>0&&e.jsxs("div",{className:"bg-pink-900/20 rounded p-2 border border-pink-500/30",children:[e.jsx("div",{className:"text-xs text-pink-300 mb-1",children:" :"}),(()=>{const q=U(R.data.affectionSummary);return q?e.jsxs("div",{className:"text-sm text-pink-200",children:[q.char," - ",q.value,"%"]}):null})()]}),e.jsxs("div",{className:"pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-text-secondary",children:" :"}),e.jsx("span",{className:"text-text-primary",children:R.data.saveDate})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-text-secondary",children:" :"}),e.jsx("span",{className:"text-text-primary",children:le(R.data.playTime)})]})]})]}),S&&e.jsx("button",{onClick:()=>{S==="save"?A(R.id):S==="load"&&!R.isEmpty&&M(R.id)},disabled:S==="load"&&R.isEmpty,className:`w-full mt-4 py-3 rounded-lg font-bold transition ${S==="save"?"bg-blue-600 hover:bg-blue-700 text-white":S==="load"&&!R.isEmpty?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 text-gray-400 cursor-not-allowed"}`,children:S==="save"?"   ":"   "})]})]},R.id))}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-xl p-8 max-w-md w-full border border-border",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary mb-4",children:""}),e.jsx("p",{className:"text-text-secondary mb-6 whitespace-pre-line",children:j}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:C,className:"flex-1 px-4 py-3 bg-primary hover:bg-secondary text-white rounded-lg font-bold transition",children:""}),e.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})}),!S&&e.jsxs("div",{className:"mt-8 bg-black/30 backdrop-blur-md rounded-lg p-6 border border-border",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-text-secondary",children:[e.jsx("li",{children:'  ""  ""  '}),e.jsx("li",{children:" :      "}),e.jsx("li",{children:" :     "}),e.jsx("li",{children:"    ,    "})]})]})]})})},Fc=Zx.items,Yg=()=>{const r=ke(),i=re(k=>k.player),{buyItem:d,updateMoney:o,sellItem:u}=re(k=>k.actions),[m,g]=v.useState("buy"),[y,p]=v.useState(null),[x,S]=v.useState(""),b=Object.values(Fc).filter(k=>k.type==="gift"||k.type==="consumable"),D=["","","",""],O=b.filter(k=>x===""?!0:x===""?k.category==="":x===""?k.category==="":x===""?k.rarity==="rare"||k.rarity==="legendary":!0),C=re(k=>k.player.inventory),z=v.useMemo(()=>{const k=C.reduce((M,Y)=>(M[Y]=(M[Y]||0)+1,M),{});return Object.entries(k).map(([M,Y])=>({...Fc[M],count:Y}))},[C]),j=k=>{if(i.money<k.value){alert(" !");return}o(-k.value),d(k.id),alert(`${k.name}() !`)},N=k=>{const M=Math.floor(k.value/2);u(k.id,M),alert(`${k.name}() ${M}G !`),p(null)},w=k=>{g(k),p(null)},T=k=>{switch(k){case"common":return"";case"uncommon":return"";case"rare":return"";case"epic":return"";case"legendary":return"";default:return""}},A=y?Fc[y]:null;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 to-purple-200 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"  "}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-yellow-600",children:""}),e.jsxs("span",{className:"font-semibold text-gray-800",children:[i.money," "]})]})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold hover:shadow-lg transition",children:" "})]})}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-1 rounded-xl shadow-md",children:[e.jsxs("button",{onClick:()=>w("buy"),className:`px-8 py-3 text-lg font-bold rounded-lg transition-all duration-300 ${m==="buy"?"bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("span",{role:"img","aria-label":"buy",children:""})," "]}),e.jsxs("button",{onClick:()=>w("sell"),className:`px-8 py-3 text-lg font-bold rounded-lg transition-all duration-300 ${m==="sell"?"bg-gradient-to-r from-green-500 to-teal-600 text-white shadow-lg":"text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("span",{role:"img","aria-label":"sell",children:""})," "]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:m==="buy"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 mb-4",children:D.map(k=>e.jsx("button",{onClick:()=>S(k),className:`px-4 py-2 rounded-lg font-medium transition ${x===k?"bg-gradient-to-r from-pink-500 to-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:k},k))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[600px] overflow-y-auto pr-2",children:O.map(k=>e.jsx("div",{onClick:()=>p(k.id),className:`p-4 rounded-xl cursor-pointer transition border-2 ${y===k.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:k.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:k.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${k.rarity==="legendary"?"bg-yellow-100 text-yellow-800":k.rarity==="epic"?"bg-purple-100 text-purple-800":k.rarity==="rare"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:T(k.rarity)}),e.jsxs("span",{className:"font-bold text-yellow-700",children:[k.value," G"]})]})]})]})},k.id))})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 max-h-[600px] overflow-y-auto pr-2",children:z.length>0?z.map(k=>e.jsx("div",{onClick:()=>p(k.id),className:`p-4 rounded-xl cursor-pointer transition border-2 ${y===k.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:k.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-gray-800",children:[k.name," ",e.jsxs("span",{className:"text-sm text-gray-500",children:["x",k.count]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${k.rarity==="legendary"?"bg-yellow-100 text-yellow-800":k.rarity==="epic"?"bg-purple-100 text-purple-800":k.rarity==="rare"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:T(k.rarity)}),e.jsxs("span",{className:"font-bold text-green-700",children:[": ",Math.floor(k.value/2)," G"]})]})]})]})},k.id)):e.jsxs("div",{className:"col-span-full text-center text-gray-500 py-8",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:""}),e.jsx("p",{children:"  ."})]})})}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:" "}),A?e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:A.icon}),e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:A.name})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:""}),e.jsx("p",{className:"text-sm text-gray-600",children:A.description})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-1",children:""}),e.jsx("div",{className:"space-y-1 text-sm",children:A.effects?.map((k,M)=>e.jsxs("div",{className:"text-gray-600",children:[" ",k.type,": ",k.value]},M))})]})]}),e.jsx("div",{className:"border-t pt-3",children:m==="buy"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium",children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-600",children:""}),e.jsxs("span",{className:"font-bold text-yellow-800",children:[A.value," "]})]})]}),e.jsx("button",{onClick:()=>j(A),disabled:i.money<A.value,className:`w-full py-3 rounded-lg font-bold transition ${i.money>=A.value?"bg-emerald-500 hover:bg-emerald-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i.money>=A.value?"":" "})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-medium",children:" "}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-yellow-600",children:""}),e.jsxs("span",{className:"font-bold text-green-800",children:[Math.floor(A.value/2)," "]})]})]}),e.jsx("button",{onClick:()=>N(A),className:"w-full py-3 rounded-lg font-bold transition bg-red-500 hover:bg-red-600 text-white",children:""})]})})]}):e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:""}),e.jsx("p",{children:"      ."})]})]})]})]})})},Qg={fullName:"  ( )",age:18,birthday:"4 5",height:"165cm",bloodType:"O",hobby:[" ","  "," "],favorite:["",""," "],dislike:["",""," "],background:"   '' . 5   ,     3   .       .",secretStory:"        .       ,       .",personality:"  .       .      .",relationships:{yuki:"  .   .",luna:"    ."},specialSkills:["  "," "," "],weakness:"  .     .",dream:"   ,      "},Xg={fullName:"  ( )",age:17,birthday:"12 24",height:"158cm",bloodType:"AB",hobby:[" "," "," "],favorite:[""," ","  "],dislike:[" ",""," "],background:"     . 10    ,    .       .",secretStory:"       .       ,       .",personality:" .   ,      .",relationships:{sakura:"   .",luna:"    ."},specialSkills:["  "," "," "],weakness:" ,    .     .",dream:"   ,     "},Vg={fullName:"  (Luna Crimson)",age:"???",birthday:"10 31",height:"162cm",bloodType:"",hobby:["  ","  "," "],favorite:[""," "," "],dislike:["","","(?)"],background:"  .   ,    .     ,      .",secretStory:"500     ,    .        .     ,          .",personality:" ,     .         .",relationships:{sakura:"   .",yuki:"      ."},specialSkills:[" "," "," "," "],weakness:"    .   .",dream:"      ,     "},Zg={fullName:"??? ()",age:"",birthday:"",height:"",bloodType:"",hobby:[""," "," "],favorite:["","  "," "],dislike:["  ",""," "],background:"    .  ,  ,   .   .",secretStory:"    .        .      .",personality:"  ,      .",relationships:{all:"   ."},specialSkills:[" "," ","   "],weakness:"    .",dream:"    . ... ?"},Jg={fullName:"  ( )",age:18,birthday:"9 15",height:"168cm",bloodType:"A",hobby:[" "," "," "],favorite:[""," "," "],dislike:["",""," "],background:"  .    ,   .      .",secretStory:"      .        .",personality:"   .       .",relationships:{hana:" .   .",rin:"  .",mei:"   ."},specialSkills:[" ","  "," "],weakness:"  .    .",dream:"         "},Kg={fullName:"  ( )",age:17,birthday:"3 8",height:"160cm",bloodType:"B",hobby:[" "," "," "],favorite:[""," ","  "],dislike:[" "," "," "],background:"       .      .",secretStory:"     ,     .         .",personality:"    .   .",relationships:{akane:"   .   .",rin:"    .",sora:"    ."},specialSkills:["  "," "," "],weakness:"     .    .",dream:"        "},Fg={fullName:"  ( )",age:16,birthday:"7 21",height:"163cm",bloodType:"O",hobby:[" "," "," "],favorite:[""," "," "],dislike:["  ",""," "],background:"   .       .",secretStory:"       .       .     .",personality:"  .    .",relationships:{sakura:"  .",hana:"   .",sora:"   ."},specialSkills:[" "," "," "],weakness:"   .    .",dream:"   ,      "},Pg={fullName:"  ( )",age:17,birthday:"11 3",height:"155cm",bloodType:"AB",hobby:[" "," "," "],favorite:["",""," "],dislike:[" ","","  "],background:"     .     .",secretStory:"     .      .       .",personality:" .      .",relationships:{luna:"   .",akane:"    .",sora:"    ."},specialSkills:["  ","  "," "],weakness:" .     .",dream:"     ,     "},Wg={fullName:"  ( )",age:16,birthday:"2 14",height:"152cm",bloodType:"B",hobby:["",""," "],favorite:["","",""],dislike:["","",""],background:"IQ 180  . 12  , 15  .       .",secretStory:"    ,    .       .",personality:" .      .",relationships:{yuki:"  .",hana:"   .",mei:"    ."},specialSkills:[" ","  "," "],weakness:"   .   .",dream:"   ,     "},Fx={sakura:Qg,yuki:Xg,luna:Vg,mystery:Zg,akane:Jg,hana:Kg,rin:Fg,mei:Pg,sora:Wg},Ig=({currentCharacter:r,onCharacterSelect:i})=>{const d=Fx,o=d[r];if(!o||!o.relationships)return null;const u={sakura:"",yuki:"",luna:"",mystery:"",akane:"",hana:"",rin:"",mei:"",sora:""},m={sakura:"",yuki:"",luna:"",mystery:"",akane:"",hana:"",rin:"",mei:"",sora:""};return e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-3 text-secondary flex items-center gap-2",children:"  "}),e.jsx("div",{className:"space-y-3",children:Object.entries(o.relationships).map(([g,y])=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-black/30 rounded-lg hover:bg-black/40 transition-colors",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br from-primary/20 to-secondary/20 flex items-center justify-center text-xl border-2 border-primary/30 ${i?"cursor-pointer hover:scale-110 transition-transform":""}`,onClick:()=>i?.(g),children:u[g]||""}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-accent",children:m[g]||g}),i&&e.jsx("button",{onClick:()=>i(g),className:"text-xs bg-primary/20 text-primary px-2 py-1 rounded hover:bg-primary/30 transition-colors",children:""})]}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:y})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-pink-400 to-red-400 rounded-full animate-pulse"})})]},g))}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/30",children:[e.jsx("h6",{className:"text-sm font-medium text-text-secondary mb-2",children:"  "}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.keys(o.relationships).map(g=>{const p=d[g]?.relationships?.[r];return p?e.jsxs("div",{className:"flex items-center gap-2 text-xs p-2 bg-black/20 rounded",children:[e.jsxs("span",{className:"text-accent",children:[m[g]," :"]}),e.jsx("span",{className:"text-text-primary flex-1",children:p})]},g):null})})]})]})},Pc=qa,tt=Fx,Px=at.memo(()=>{const r=ke(),i=re(A=>A.player),d=re(A=>A.unlockedCharacters),o=v.useMemo(()=>Object.keys(Pc),[]),u=v.useMemo(()=>o.filter(A=>(i.affection[A]||0)>0),[o,i.affection]),[m,g]=v.useState(u[0]||d[0]||"sakura"),y=v.useMemo(()=>({sakura:"",yuki:"",luna:"",mystery:"???"}),[]),p=v.useMemo(()=>({morning:"  ",noon:"",afternoon:" ",evening:"",night:" "}),[]),x=v.useCallback(A=>{const k=i.affection[A]||0;return{poise:Math.max(60+Math.floor(k/5),0),stress:Math.max(40-Math.floor(k/3),0),arousal:Math.min(20+Math.floor(k/8),100),affection:k}},[i.affection]),S=v.useCallback(A=>y[A]||" ",[y]),b=v.useCallback(A=>(i.affection[A]||0)>=70?"  ":p[i.timeOfDay]||" ",[i.affection,i.timeOfDay,p]),D=v.useCallback(A=>{const k=i.affection[A]||0;return k>=80?" ":k>=60?" ":k>=40?"  ()":" "},[i.affection]),O=v.useCallback(A=>{const k=i.affection[A]||0;return k>=90?"":k>=75?" ":k>=60?" ":k>=40?"":k>=20?"":" "},[i.affection]),C=v.useCallback((A,k)=>{const M=i.affection[k]||0;if(M===0)return"  .  .";const Y=Object.keys(A.dialogues).map(Number).sort((B,ae)=>ae-B);for(const B of Y)if(M>=B)return A.dialogues[B.toString()]||"  .  .";return A.dialogues[0]||"  .  ."},[i.affection]),z=v.useMemo(()=>({morning:"8:30 AM",noon:"12:00 PM",afternoon:"3:00 PM",evening:"6:30 PM",night:"10:00 PM"}),[]),j=v.useCallback(()=>z[i.timeOfDay]||"Unknown",[i.timeOfDay,z]),N=v.useMemo(()=>{const A=new Date,k=A.getMonth()+1,M=A.getDate(),B=["","","","","","",""][A.getDay()];return`${A.getFullYear()}-${k.toString().padStart(2,"0")}-${M.toString().padStart(2,"0")} ${B}`},[]),w=v.useMemo(()=>Pc[m],[m]),T=v.useCallback(()=>{r("/game")},[r]);return e.jsx("div",{className:"min-h-screen bg-background p-4 text-text-primary",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-lg shadow-lg p-4 mb-4 border border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"  "}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-primary hover:bg-secondary text-white rounded-lg transition","aria-label":"   ",role:"button",children:"  "})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:e.jsxs("div",{className:"lg:col-span-4",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-t-lg shadow-lg p-4 border-b border-border",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-text-primary text-center",children:" "}),e.jsx("div",{className:"flex gap-4 justify-center overflow-x-auto pb-2",children:o.map(A=>{const k=Pc[A];if(!k)return null;const Y=!((i.affection[A]||0)>0);return e.jsxs("button",{onClick:()=>{Y||g(A)},disabled:Y,className:`px-6 py-3 rounded-lg transition-all border-2 flex flex-col items-center gap-2 min-w-[120px] relative ${Y?"border-gray-600 bg-gray-900/50 opacity-60 cursor-not-allowed":m===A?"border-primary bg-primary/20 scale-105 shadow-lg":"border-border hover:border-primary hover:bg-primary/10 hover:shadow-md"}`,"aria-label":`${Y?" ":k.name+"  "}`,"aria-pressed":!Y&&m===A,role:"button",children:[Y&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg bg-black/60",children:e.jsx("span",{className:"text-4xl",children:""})}),e.jsx("span",{className:"text-3xl","aria-hidden":"true",children:Y?"":k.sprite}),e.jsx("div",{className:"font-bold text-text-primary text-sm whitespace-nowrap",children:Y?"???":k.name})]},A)})})]}),w&&!((i.affection[m]||0)<=0)?e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-b-2xl shadow-2xl overflow-hidden border border-border border-t-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 min-h-[700px]",children:[e.jsxs("div",{className:"bg-black/20 p-8 flex flex-col items-center justify-center relative",children:["                    ",e.jsx("div",{className:"absolute top-4 right-4 text-6xl opacity-10",children:w.sprite}),e.jsxs("div",{className:"w-56 h-56 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-8xl mb-6 shadow-xl border-4 border-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"}),e.jsx("span",{className:"relative z-10",children:w.sprite})]}),e.jsx("h2",{className:"text-3xl font-bold text-text-primary mb-2 text-center",children:w.name}),e.jsx("p",{className:"text-secondary font-medium text-lg mb-4",children:w.role}),e.jsx("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4 w-full",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-secondary",children:x(m).affection}),e.jsx("div",{className:"text-sm text-text-secondary",children:""})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:O(m)}),e.jsx("div",{className:"text-sm text-text-secondary",children:""})]})]})})]}),e.jsxs("div",{className:"lg:col-span-2 p-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:S(m)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:D(m)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:b(m)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:" "}),e.jsx("div",{className:"font-medium text-lg text-text-primary",children:O(m)})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:" "}),e.jsx("div",{className:"space-y-4",children:Object.entries(x(m)).map(([A,k])=>{const Y={poise:{icon:"",label:"",color:"from-blue-400 to-blue-600"},stress:{icon:"",label:"",color:"from-orange-400 to-orange-600"},arousal:{icon:"",label:"",color:"from-pink-400 to-pink-600"},affection:{icon:"",label:"",color:"from-red-400 to-red-600"}}[A];return Y?e.jsxs("div",{className:"bg-black/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-medium flex items-center gap-2 text-text-primary",children:[e.jsx("span",{className:"text-xl",children:Y.icon}),e.jsx("span",{children:Y.label})]}),e.jsxs("span",{className:"font-bold text-lg text-text-primary",children:[k,"%"]})]}),e.jsx("div",{className:"w-full bg-black/50 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:`h-4 rounded-full bg-gradient-to-r ${Y.color} transition-all duration-1000 ease-out relative`,style:{width:`${Math.max(k,0)}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent rounded-full"})})})]},A):null})})]}),tt[m]&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"  "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:":"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].fullName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:":"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].age})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:":"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].birthday})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary",children:":"})," ",e.jsx("span",{className:"text-text-primary",children:tt[m].bloodType})]})]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:""}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:tt[m].background})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:""}),e.jsx("p",{className:"text-sm text-text-primary leading-relaxed",children:tt[m].personality})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:" & "}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:":"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].hobby?.map((A,k)=>e.jsx("span",{className:"bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs",children:A},k))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:" :"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].favorite?.map((A,k)=>e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs",children:[" ",A]},k))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-text-secondary text-sm",children:" :"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:tt[m].dislike?.map((A,k)=>e.jsxs("span",{className:"bg-red-500/20 text-red-400 px-2 py-1 rounded text-xs",children:[" ",A]},k))})]})]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:tt[m].specialSkills?.map((A,k)=>e.jsxs("span",{className:"bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full text-sm font-medium border border-purple-500/30",children:[" ",A]},k))})]}),tt[m].weakness&&e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:""}),e.jsxs("p",{className:"text-sm text-text-primary leading-relaxed",children:[" ",tt[m].weakness]})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-semibold mb-2 text-secondary",children:" "}),e.jsxs("p",{className:"text-sm text-text-primary leading-relaxed",children:[" ",tt[m].dream]})]}),tt[m].secretStory&&i.affection[m]>=50&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/30 to-pink-900/30 backdrop-blur-sm rounded-lg p-4 border border-purple-500/30",children:[e.jsxs("h5",{className:"text-md font-semibold mb-2 text-purple-300 flex items-center gap-2",children:["  ",e.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-300 px-2 py-1 rounded",children:" 50+ "})]}),e.jsx("p",{className:"text-sm text-purple-100 leading-relaxed",children:tt[m].secretStory})]}),tt[m].secretStory&&i.affection[m]<50&&e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm rounded-lg p-4 border border-gray-600/30",children:[e.jsxs("h5",{className:"text-md font-semibold mb-2 text-gray-400 flex items-center gap-2",children:["  ",e.jsx("span",{className:"text-xs bg-gray-600/20 text-gray-400 px-2 py-1 rounded",children:" 50 "})]}),e.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:"        ..."})]}),e.jsx(Ig,{currentCharacter:m,onCharacterSelect:A=>{d.includes(A)&&g(A)}})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"  "}),e.jsx("div",{className:"bg-black/20 rounded-lg p-6 border-l-4 border-primary",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:w.sprite}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-primary mb-2",children:w.name}),e.jsxs("p",{className:"text-text-secondary italic leading-relaxed",children:['"',C(w,m),'"']})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold mb-4 text-text-primary",children:"  "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.likes?.slice(0,8).map((A,k)=>e.jsx("span",{className:"bg-primary/20 text-primary px-4 py-2 rounded-full text-sm font-medium border border-primary/50",children:A},k))})]}),e.jsxs("div",{className:"border-t border-border pt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:N})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:j()})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"bg-accent text-background px-3 py-1 rounded-full text-sm font-medium",children:["Day ",i.day]})})]})]})]})}):e.jsx("div",{className:"bg-black/30 backdrop-blur-md rounded-b-2xl shadow-2xl overflow-hidden border border-border border-t-0",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-16",children:[e.jsx("div",{className:"text-8xl mb-6",children:""}),e.jsx("h2",{className:"text-3xl font-bold text-gray-400 mb-4",children:" "}),e.jsxs("p",{className:"text-gray-500 text-center max-w-md",children:["       .",e.jsx("br",{}),e.jsx("br",{}),":       ."]})]})})]})})]})})});Px.displayName="CharacterCardPage";const eb=({onCreateAccount:r})=>{const i=ke(),[d,o]=v.useState(!1),[u,m]=v.useState(""),[g,y]=v.useState({username:"",email:"",password:"",confirmPassword:""}),p=(b,D)=>{y(O=>({...O,[b]:D}))},x=()=>g.username.trim()?g.username.length<3?"  3  .":g.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)?g.password.trim()?g.password.length<6?"  6  .":g.password!==g.confirmPassword?"  .":null:" .":"   .":" .":" .",S=async b=>{b.preventDefault(),m("");const D=x();if(D){m(D);return}o(!0);try{await new Promise(C=>setTimeout(C,2e3)),r(g)?(alert("  !"),i("/login")):m("    .")}catch{m("    .")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-2",children:" "}),e.jsx("p",{className:"text-purple-200",children:"Labyrinth Academy   "})]}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"text",value:g.username,onChange:b=>p("username",b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"  (3 )",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"email",value:g.email,onChange:b=>p("email",b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:" ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:""}),e.jsx("input",{type:"password",value:g.password,onChange:b=>p("password",b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"  (6 )",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",children:" "}),e.jsx("input",{type:"password",value:g.confirmPassword,onChange:b=>p("confirmPassword",b.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"  ",required:!0})]}),u&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:u})}),e.jsxs("div",{className:"bg-purple-500/20 border border-purple-500/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-purple-300 font-semibold mb-2",children:" "}),e.jsxs("div",{className:"text-purple-200 text-sm space-y-1",children:[e.jsx("p",{children:"   18   "}),e.jsx("p",{children:"     "}),e.jsx("p",{children:"    "})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full py-3 px-6 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 disabled:scale-100",children:d?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"  ..."})]}):" "})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6 text-sm",children:[e.jsx("button",{onClick:()=>i("/"),className:"text-purple-300 hover:text-white transition-colors",children:"  "}),e.jsx("button",{onClick:()=>i("/login"),className:"text-purple-300 hover:text-white transition-colors",children:"  ?  "})]})]})})},tb=()=>{const r=ke();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:" "}),e.jsx("button",{onClick:()=>r("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:" "})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Labyrinth Academy"}),"         ."]}),e.jsx("p",{children:"       ,  ,    ."}),e.jsx("p",{children:" 30         !"})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"   "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-purple-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:" "}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),"     "]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:" :"}),' " "  ']}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),"    "]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),"     "]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:" "}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"/:"}),"   "]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),"    "]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:":"}),' " "  ']}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:" :"}),"    "]})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-pink-300 mb-3",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-2",children:[e.jsx("p",{children:"      "}),e.jsx("p",{children:"      "}),e.jsx("p",{children:"       "})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-300 mb-3",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-purple-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Intelligence)"}),e.jsx("div",{className:"text-sm",children:"   "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Charm)"}),e.jsx("div",{className:"text-sm",children:"  "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Stamina)"}),e.jsx("div",{className:"text-sm",children:"  "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Strength)"}),e.jsx("div",{className:"text-sm",children:"   "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Agility)"}),e.jsx("div",{className:"text-sm",children:"  "})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:" (Luck)"}),e.jsx("div",{className:"text-sm",children:"  "})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-3",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-2",children:[e.jsx("p",{children:"  5  : , , , , "}),e.jsx("p",{children:"        "}),e.jsx("p",{children:"  30      "})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-pink-500/20 p-4 rounded-lg border border-pink-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:""}),e.jsx("p",{className:"text-pink-300",children:" "})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"    .      ."})]}),e.jsxs("div",{className:"bg-blue-500/20 p-4 rounded-lg border border-blue-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:""}),e.jsx("p",{className:"text-blue-300",children:" "})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"    .      ."})]}),e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg border border-purple-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:""}),e.jsx("p",{className:"text-purple-300",children:" "})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"  .        ."})]}),e.jsxs("div",{className:"bg-gray-500/20 p-4 rounded-lg border border-gray-400/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"???"}),e.jsx("p",{className:"text-gray-300",children:" "})]})]}),e.jsx("p",{className:"text-purple-200 text-sm",children:"     .     ."})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"     .   !"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"         ."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"       ."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"     ,   ."})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"   .   !"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-yellow-400 mt-1",children:""}),e.jsx("p",{children:"       ."})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"text-purple-200 space-y-3",children:[e.jsx("p",{children:"     :"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-pink-500/20 p-3 rounded border border-pink-400/30",children:[e.jsx("div",{className:"font-semibold text-pink-300",children:"  "}),e.jsx("div",{className:"text-sm",children:"    "})]}),e.jsxs("div",{className:"bg-green-500/20 p-3 rounded border border-green-400/30",children:[e.jsx("div",{className:"font-semibold text-green-300",children:"  "}),e.jsx("div",{className:"text-sm",children:"   "})]}),e.jsxs("div",{className:"bg-blue-500/20 p-3 rounded border border-blue-400/30",children:[e.jsx("div",{className:"font-semibold text-blue-300",children:"  "}),e.jsx("div",{className:"text-sm",children:"   "})]}),e.jsxs("div",{className:"bg-gray-500/20 p-3 rounded border border-gray-400/30",children:[e.jsx("div",{className:"font-semibold text-gray-300",children:"  "}),e.jsx("div",{className:"text-sm",children:"   "})]})]})]})]})]})})},bi={masterVolume:80,musicVolume:70,soundVolume:80,voiceVolume:80,difficulty:"normal",autoSave:!0,fastText:!1,skipRead:!1,fullscreen:!1,animations:!0},ab=()=>{const r=ke(),[i,d]=v.useState(bi),[o,u]=v.useState(!1);v.useEffect(()=>{const b=localStorage.getItem("academyDatingSimSettings");if(b)try{const D=JSON.parse(b);d({...bi,...D})}catch(D){console.error("Failed to load settings:",D)}},[]);const m=(b,D)=>{d(O=>({...O,[b]:D})),u(!0)},g=()=>{localStorage.setItem("academyDatingSimSettings",JSON.stringify(i)),u(!1),alert(" !")},y=()=>{confirm("   ?")&&(d(bi),u(!0))},p=()=>{const b=JSON.stringify(i,null,2),D=new Blob([b],{type:"application/json"}),O=URL.createObjectURL(D),C=document.createElement("a");C.href=O,C.download="academy-dating-sim-settings.json",C.click(),URL.revokeObjectURL(O)},x=b=>{const D=b.target.files?.[0];if(D){const O=new FileReader;O.onload=C=>{try{const z=JSON.parse(C.target?.result);d({...bi,...z}),u(!0),alert(" !")}catch{alert("    .")}},O.readAsText(D)}},S=()=>{confirm("    ?     .")&&confirm(" ?  ,     .")&&(localStorage.removeItem("academyDatingSim"),localStorage.removeItem("academyDatingSimSettings"),alert("  ."),r("/"))};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:" "}),e.jsxs("div",{className:"flex gap-2",children:[o&&e.jsx("button",{onClick:g,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition",children:" "}),e.jsx("button",{onClick:()=>r("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition",children:" "})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:[" : ",i.masterVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.masterVolume,onChange:b=>m("masterVolume",parseInt(b.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:[" : ",i.musicVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.musicVolume,onChange:b=>m("musicVolume",parseInt(b.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:[" : ",i.soundVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.soundVolume,onChange:b=>m("soundVolume",parseInt(b.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-white font-medium mb-2",children:[" : ",i.voiceVolume,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:i.voiceVolume,onChange:b=>m("voiceVolume",parseInt(b.target.value)),className:"w-full h-2 bg-purple-700 rounded-lg appearance-none cursor-pointer"})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-white font-medium mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["easy","normal","hard"].map(b=>e.jsxs("button",{onClick:()=>m("difficulty",b),className:`p-3 rounded-lg border transition ${i.difficulty===b?"bg-purple-600 border-purple-400 text-white":"bg-purple-800/30 border-purple-600/30 text-purple-200 hover:bg-purple-700/40"}`,children:[b==="easy"&&" ",b==="normal"&&" ",b==="hard"&&" "]},b))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.autoSave,onChange:b=>m("autoSave",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:" "})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.fastText,onChange:b=>m("fastText",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:" "})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.skipRead,onChange:b=>m("skipRead",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:"  "})]}),e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.animations,onChange:b=>m("animations",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:" "})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"  "}),e.jsx("div",{className:"space-y-4",children:e.jsxs("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.fullscreen,onChange:b=>m("fullscreen",b.target.checked),className:"form-checkbox h-5 w-5 text-purple-600 rounded"}),e.jsx("span",{children:" "})]})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("button",{onClick:p,className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:"  "}),e.jsxs("label",{className:"px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition flex items-center justify-center gap-2 cursor-pointer",children:["  ",e.jsx("input",{type:"file",accept:".json",onChange:x,className:"hidden"})]}),e.jsx("button",{onClick:y,className:"px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:" "}),e.jsx("button",{onClick:S,className:"px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition flex items-center justify-center gap-2",children:"   "})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-2xl p-8 border border-white/20",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:" /"}),e.jsxs("div",{className:"text-purple-200 space-y-4",children:[e.jsx("p",{children:"       ."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:" "}),e.jsx("p",{className:"text-sm",children:"    ."})]}),e.jsxs("div",{className:"bg-purple-500/20 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:" "}),e.jsx("p",{className:"text-sm",children:"        ."})]})]})]})]}),o&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-orange-600 text-white p-4 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsx("span",{children:"   "}),e.jsx("button",{onClick:g,className:"ml-2 px-3 py-1 bg-white text-orange-600 rounded hover:bg-gray-100 transition",children:""})]})})]})})},sb=()=>{const{player:r}=re(),[i,d]=v.useState("heroines"),o={heroines:r.metHeroines||[],monsters:r.defeatedMonsterTypes||[],items:r.collectedItems||[],endings:r.unlockedEndings||[]},u=[{id:"heroines",name:"",icon:""},{id:"monsters",name:"",icon:""},{id:"items",name:"",icon:""},{id:"endings",name:"",icon:""}],m=Object.entries(qa).map(([C,z])=>({id:C,name:z.name,description:z.role||"",icon:z.sprite||"",category:"heroines",unlocked:o.heroines.includes(C),affection:r.affection?.[C]||0})),g=[{id:"slime",name:"",description:" ",icon:""},{id:"goblin",name:"",description:"  ",icon:""},{id:"skeleton",name:"",description:" ",icon:""},{id:"orc",name:"",description:" ",icon:""},{id:"ghost",name:"",description:" ",icon:""},{id:"vampire",name:"",description:"  ",icon:""},{id:"ice_golem",name:" ",description:"  ",icon:""},{id:"frost_spirit",name:" ",description:" ",icon:""},{id:"lava_serpent",name:" ",description:" ",icon:""},{id:"flame_elemental",name:" ",description:" ",icon:""},{id:"dark_knight",name:" ",description:"  ()",icon:""},{id:"lich_king",name:" ",description:"  ()",icon:""},{id:"ice_queen",name:" ",description:"  ()",icon:""},{id:"fire_dragon",name:" ",description:"  ()",icon:""}].map(C=>({...C,category:"monsters",unlocked:o.monsters.includes(C.id)})),y=[{id:"health_potion",name:" ",description:"HP ",icon:"",rarity:"common"},{id:"mana_potion",name:" ",description:"MP ",icon:"",rarity:"common"},{id:"sword",name:"",description:" ",icon:"",rarity:"common"},{id:"shield",name:"",description:"",icon:"",rarity:"common"},{id:"magic_staff",name:" ",description:"  ",icon:"",rarity:"rare"},{id:"dragon_scale",name:" ",description:" ",icon:"",rarity:"legendary"},{id:"phoenix_feather",name:" ",description:" ",icon:"",rarity:"legendary"},{id:"crystal_heart",name:" ",description:"  ",icon:"",rarity:"epic"},{id:"ancient_tome",name:" ",description:" ",icon:"",rarity:"epic"},{id:"golden_apple",name:" ",description:" ",icon:"",rarity:"legendary"}].map(C=>({...C,category:"items",unlocked:o.items.includes(C.id)})),p=[{id:"true_end_luna",name:"  ",description:"  ",icon:""},{id:"true_end_sakura",name:"  ",description:"  ",icon:""},{id:"true_end_ice",name:"  ",description:"  ",icon:""},{id:"true_end_rose",name:"  ",description:"  ",icon:""},{id:"true_end_star",name:"  ",description:"  ",icon:""},{id:"harem_ending",name:" ",description:"  ",icon:""},{id:"normal_ending",name:" ",description:"  ",icon:""},{id:"bad_ending",name:" ",description:" ",icon:""},{id:"secret_ending",name:" ",description:" ",icon:""},{id:"legend_ending",name:" ",description:" ",icon:""}].map(C=>({...C,category:"endings",unlocked:o.endings.includes(C.id)})),S=(()=>{switch(i){case"heroines":return m;case"monsters":return g;case"items":return y;case"endings":return p;default:return[]}})(),b=S.filter(C=>C.unlocked).length,D=Math.floor(b/S.length*100),O=C=>{switch(C){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 text-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"font-bold",children:[b," / ",S.length]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-400 h-full rounded-full transition-all",style:{width:`${D}%`}})}),e.jsxs("div",{className:"text-center mt-2 text-xl font-bold",children:[D,"%"]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(C=>e.jsxs("button",{onClick:()=>d(C.id),className:`px-4 py-2 rounded-lg transition-all ${i===C.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("span",{className:"mr-2",children:C.icon}),C.name]},C.id))})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:S.map(C=>e.jsxs("div",{className:`relative rounded-xl p-4 transition-all ${C.unlocked?"bg-gradient-to-br from-white/20 to-white/10 border-2 border-white/30":"bg-black/30 border-2 border-white/5"}`,children:[C.rarity&&C.unlocked&&e.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-bold text-white bg-gradient-to-r ${O(C.rarity)}`,children:C.rarity.toUpperCase()}),e.jsx("div",{className:`text-5xl text-center mb-3 ${C.unlocked?"":"grayscale opacity-30"}`,children:C.unlocked?C.icon:""}),e.jsx("h3",{className:`font-bold text-center ${C.unlocked?"text-white":"text-white/30"}`,children:C.unlocked?C.name:"???"}),C.unlocked&&e.jsx("p",{className:"text-xs text-white/70 text-center mt-2",children:C.description}),C.category==="heroines"&&C.unlocked&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-white/60 mb-1",children:""}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-red-400 h-full rounded-full",style:{width:`${Math.min(C.affection,100)}%`}})}),e.jsxs("div",{className:"text-xs text-center text-white/80 mt-1",children:[C.affection,"/100"]})]}),!C.unlocked&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"text-3xl opacity-20",children:""})})]},C.id))}),S.length===0&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 text-center text-white",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl",children:"   ."}),e.jsx("p",{className:"text-white/70 mt-2",children:"    !"})]})]})})};class Us{constructor(){this.bgmAudio=null,this.sfxVolume=.5,this.bgmVolume=.3,this.isMuted=!1,this.bgmTracks={menu:"/sounds/bgm/menu.mp3",game:"/sounds/bgm/game.mp3",battle:"/sounds/bgm/battle.mp3",dungeon:"/sounds/bgm/dungeon.mp3",victory:"/sounds/bgm/victory.mp3",romantic:"/sounds/bgm/romantic.mp3"},this.sfxTracks={click:"/sounds/sfx/click.mp3",hover:"/sounds/sfx/hover.mp3",success:"/sounds/sfx/success.mp3",error:"/sounds/sfx/error.mp3",levelUp:"/sounds/sfx/levelup.mp3",attack:"/sounds/sfx/attack.mp3",damage:"/sounds/sfx/damage.mp3",heal:"/sounds/sfx/heal.mp3",coin:"/sounds/sfx/coin.mp3",open:"/sounds/sfx/open.mp3",close:"/sounds/sfx/close.mp3",notification:"/sounds/sfx/notification.mp3"};const i=localStorage.getItem("soundSettings");if(i){const d=JSON.parse(i);this.sfxVolume=d.sfxVolume??.5,this.bgmVolume=d.bgmVolume??.3,this.isMuted=d.isMuted??!1}}static getInstance(){return Us.instance||(Us.instance=new Us),Us.instance}playBGM(i){try{this.bgmAudio&&(this.bgmAudio.pause(),this.bgmAudio.currentTime=0),this.bgmAudio=new Audio(this.bgmTracks[i]),this.bgmAudio.volume=this.isMuted?0:this.bgmVolume,this.bgmAudio.loop=!0;const d=this.bgmAudio.play();d!==void 0&&d.catch(o=>{console.log("BGM autoplay prevented:",o)})}catch(d){console.error("Error playing BGM:",d)}}stopBGM(){this.bgmAudio&&(this.bgmAudio.pause(),this.bgmAudio.currentTime=0)}pauseBGM(){this.bgmAudio&&this.bgmAudio.pause()}resumeBGM(){this.bgmAudio&&!this.isMuted&&this.bgmAudio.play().catch(i=>{console.log("BGM resume prevented:",i)})}playSFX(i){if(!this.isMuted)try{const d=new Audio(this.sfxTracks[i]);d.volume=this.sfxVolume;const o=d.play();o!==void 0&&o.catch(u=>{console.log("SFX play prevented:",u)})}catch(d){console.error("Error playing SFX:",d)}}setSFXVolume(i){this.sfxVolume=Math.max(0,Math.min(1,i)),this.saveSettings()}setBGMVolume(i){this.bgmVolume=Math.max(0,Math.min(1,i)),this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings()}toggleMute(){return this.isMuted=!this.isMuted,this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings(),this.isMuted}setMute(i){this.isMuted=i,this.bgmAudio&&(this.bgmAudio.volume=this.isMuted?0:this.bgmVolume),this.saveSettings()}getSFXVolume(){return this.sfxVolume}getBGMVolume(){return this.bgmVolume}isMutedStatus(){return this.isMuted}saveSettings(){const i={sfxVolume:this.sfxVolume,bgmVolume:this.bgmVolume,isMuted:this.isMuted};localStorage.setItem("soundSettings",JSON.stringify(i))}playClickSound(){this.playSFX("click")}playHoverSound(){this.playSFX("hover")}playSuccessSound(){this.playSFX("success")}playErrorSound(){this.playSFX("error")}playLevelUpSound(){this.playSFX("levelUp")}playCoinSound(){this.playSFX("coin")}playNotificationSound(){this.playSFX("notification")}playAttackSound(){this.playSFX("attack")}playDamageSound(){this.playSFX("damage")}playHealSound(){this.playSFX("heal")}}const Ge=Us.getInstance(),lb=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState([]),[u,m]=v.useState("daily"),[g,y]=v.useState(null),p=[{id:"daily_talk",title:" ",description:" 3 ",icon:"",requirement:{type:"talk",target:3},reward:{gold:500,exp:100}},{id:"daily_battle",title:" ",description:" 5 ",icon:"",requirement:{type:"battle",target:5},reward:{gold:800,exp:150}},{id:"daily_dungeon",title:" ",description:" 1 ",icon:"",requirement:{type:"dungeon",target:1},reward:{gold:1e3,exp:200}},{id:"daily_shop",title:"",description:"  ",icon:"",requirement:{type:"shop",target:1},reward:{gold:300,exp:50}},{id:"daily_minigame",title:" ",description:" 2 ",icon:"",requirement:{type:"minigame",target:2},reward:{gold:600,exp:120}}],x=[{id:"weekly_affection",title:"",description:"  50 ",icon:"",requirement:{type:"affection",target:50},reward:{gold:5e3,exp:1e3,achievementPoints:10}},{id:"weekly_monster",title:" ",description:" 50 ",icon:"",requirement:{type:"monster",target:50},reward:{gold:8e3,exp:1500,items:["rare_weapon"]}},{id:"weekly_level",title:" ",description:" 5 ",icon:"",requirement:{type:"level",target:5},reward:{gold:1e4,exp:2e3,achievementPoints:20}}],S=[{id:"special_boss",title:" ",description:"  ",icon:"",requirement:{type:"boss",target:1},reward:{gold:2e4,exp:5e3,items:["legendary_item"]}},{id:"special_perfect",title:" ",description:"   ",icon:"",requirement:{type:"all_daily",target:5},reward:{gold:15e3,achievementPoints:50}}];v.useEffect(()=>{const j=new Date().toDateString();if(localStorage.getItem("lastQuestDate")!==j){const w=p.map(Y=>({...Y,type:"daily",requirement:{...Y.requirement,current:0},completed:!1,claimed:!1})),A=new Date().getDay()===1?x.map(Y=>({...Y,type:"weekly",requirement:{...Y.requirement,current:0},completed:!1,claimed:!1})):b("weekly"),k=S.map(Y=>({...Y,type:"special",requirement:{...Y.requirement,current:0},completed:!1,claimed:!1})),M=[...w,...A,...k];o(M),localStorage.setItem("lastQuestDate",j),localStorage.setItem("dailyQuests",JSON.stringify(M))}else{const w=localStorage.getItem("dailyQuests");w&&o(JSON.parse(w))}},[]);const b=j=>{const N=localStorage.getItem("dailyQuests");return N?JSON.parse(N).filter(T=>T.type===j):[]},D=j=>{if(!j.completed||j.claimed)return;const N=j.reward;let w={...r};N.gold&&(w.gold=r.gold+N.gold),N.exp&&(w.experience=r.experience+N.exp),N.achievementPoints&&(w.achievementPoints=(r.achievementPoints||0)+N.achievementPoints),i(w);const T=d.map(A=>A.id===j.id?{...A,claimed:!0}:A);o(T),localStorage.setItem("dailyQuests",JSON.stringify(T)),y(j),Ge.playCoinSound(),setTimeout(()=>{y(null)},2e3)},O=d.filter(j=>j.type===u),C=O.filter(j=>j.completed).length,z=O.length;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-800 to-pink-900 p-4",children:[g&&e.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-bounce-in",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white p-4 rounded-lg shadow-2xl",children:[e.jsx("div",{className:"font-bold text-lg mb-2",children:" !"}),e.jsxs("div",{className:"flex items-center gap-3",children:[g.reward.gold&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["+",g.reward.gold]})]}),g.reward.exp&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["+",g.reward.exp," EXP"]})]})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between text-white text-sm mb-2",children:[e.jsx("span",{children:" "}),e.jsxs("span",{children:[C," / ",z]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-400 h-full rounded-full transition-all",style:{width:`${C/z*100}%`}})})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex gap-2",children:["daily","weekly","special"].map(j=>e.jsxs("button",{onClick:()=>m(j),className:`px-4 py-2 rounded-lg transition-all flex-1 ${u===j?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[j==="daily"&&"",j==="weekly"&&"",j==="special"&&""]},j))})}),e.jsx("div",{className:"space-y-4",children:O.map(j=>e.jsx("div",{className:`bg-black/30 backdrop-blur rounded-xl p-4 transition-all ${j.completed?"border-2 border-green-400/50":"border-2 border-white/10"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`text-4xl ${j.completed?"":"opacity-50"}`,children:j.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`font-bold text-lg ${j.completed?"text-green-400":"text-white"}`,children:j.title}),j.completed&&!j.claimed&&e.jsx("span",{className:"bg-green-400 text-black text-xs px-2 py-1 rounded-full font-bold",children:"!"}),j.claimed&&e.jsx("span",{className:"bg-gray-500 text-white text-xs px-2 py-1 rounded-full",children:" "})]}),e.jsx("p",{className:"text-white/70 text-sm mt-1",children:j.description}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[j.requirement.current," / ",j.requirement.target]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-full rounded-full transition-all ${j.completed?"bg-gradient-to-r from-green-400 to-emerald-400":"bg-gradient-to-r from-blue-400 to-purple-400"}`,style:{width:`${j.requirement.current/j.requirement.target*100}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3 text-sm",children:[e.jsx("span",{className:"text-white/60",children:":"}),j.reward.gold&&e.jsxs("span",{className:"text-yellow-400",children:[" ",j.reward.gold]}),j.reward.exp&&e.jsxs("span",{className:"text-blue-400",children:[" ",j.reward.exp," EXP"]}),j.reward.achievementPoints&&e.jsxs("span",{className:"text-purple-400",children:[" ",j.reward.achievementPoints,"P"]})]})]}),j.completed&&!j.claimed&&e.jsx("button",{onClick:()=>D(j),className:"bg-gradient-to-r from-green-400 to-emerald-400 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg transition-all animate-pulse",children:""})]})},j.id))}),O.length===0&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 text-center text-white",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-xl",children:"    ."})]})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes bounce-in {
          0% {
            transform: translateX(-50%) scale(0.5);
            opacity: 0;
          }
          50% {
            transform: translateX(-50%) scale(1.1);
          }
          100% {
            transform: translateX(-50%) scale(1);
            opacity: 1;
          }
        }

        .animate-bounce-in {
          animation: bounce-in 0.5s ease-out;
        }
      `})]})},nb=()=>{const{player:r,gameDate:i,updatePlayer:d}=re(),[o,u]=v.useState(i.month),[m,g]=v.useState(null),[y,p]=v.useState(r.participatedEvents||[]),x=["1","2","3","4","5","6","7","8","9","10","11","12"],S=[{id:"cherry_blossom",name:" ",description:"    !    .",icon:"",type:"festival",date:15,month:4,duration:3,rewards:{affection:{sakura:20,luna:10,ice:10,rose:10,star:10}}},{id:"spring_sports",name:" ",description:"   !   !",icon:"",type:"competition",date:25,month:5,duration:2,rewards:{gold:5e3,exp:1e3,items:["trophy"]},requirements:{level:10}},{id:"summer_festival",name:" ",description:"   !   .",icon:"",type:"festival",date:20,month:7,duration:3,rewards:{affection:{luna:15,sakura:15,ice:15,rose:15,star:15}}},{id:"beach_event",name:" ",description:"  !   .",icon:"",type:"special",date:10,month:8,duration:7,rewards:{gold:3e3,affection:{ice:20,rose:20}}},{id:"harvest_festival",name:" ",description:"   .   !",icon:"",type:"festival",date:15,month:10,duration:3,rewards:{gold:4e3,items:["harvest_basket"]}},{id:"halloween",name:" ",description:"  !   .",icon:"",type:"special",date:31,month:10,duration:1,rewards:{exp:2e3,items:["halloween_costume"],affection:{star:25}}},{id:"culture_festival",name:"",description:"   !     .",icon:"",type:"festival",date:20,month:11,duration:5,rewards:{gold:1e4,exp:3e3,affection:{luna:20,sakura:20,ice:20,rose:20,star:20}},requirements:{level:15}},{id:"christmas",name:"",description:" !   .",icon:"",type:"special",date:24,month:12,duration:2,rewards:{items:["christmas_gift"],affection:{luna:30,sakura:30,ice:30,rose:30,star:30}}},{id:"new_year",name:" ",description:"  !   .",icon:"",type:"seasonal",date:1,month:1,duration:3,rewards:{gold:8888,exp:2e3,items:["lucky_charm"]}},{id:"valentines",name:" ",description:"  !  .",icon:"",type:"special",date:14,month:2,duration:1,rewards:{affection:{luna:50,sakura:50,ice:50,rose:50,star:50},items:["chocolate"]},requirements:{affection:{luna:30}}},{id:"midterm_exam",name:"",description:"   .    !",icon:"",type:"competition",date:15,month:6,duration:3,rewards:{gold:3e3,exp:1500,items:["study_guide"]},requirements:{level:5}},{id:"final_exam",name:"",description:"   .   !",icon:"",type:"competition",date:15,month:12,duration:3,rewards:{gold:5e3,exp:2500,items:["diploma"]},requirements:{level:20}}],b=N=>S.filter(w=>w.month===N),D=N=>{if(N.requirements){if(N.requirements.level&&r.level<N.requirements.level){alert(` ${N.requirements.level}    .`);return}if(N.requirements.affection){for(const[A,k]of Object.entries(N.requirements.affection))if((r.affection?.[A]||0)<k){alert(`${A}  ${k}    .`);return}}}if(y.includes(N.id)){alert("  !");return}let w={...r};if(N.rewards.gold&&(w.gold=r.gold+N.rewards.gold),N.rewards.exp&&(w.experience=r.experience+N.rewards.exp),N.rewards.affection){w.affection={...r.affection};for(const[A,k]of Object.entries(N.rewards.affection))w.affection[A]=(w.affection[A]||0)+k}N.rewards.items&&(w.inventory=[...r.inventory||[],...N.rewards.items.map(A=>({id:A,quantity:1}))]);const T=[...y,N.id];p(T),w.participatedEvents=T,d(w),Ge.playSuccessSound(),alert(`${N.name} !  .`),g(null)},C=(()=>{const N=new Date(i.year,o-1,1).getDay(),w=new Date(i.year,o,0).getDate(),T=[];for(let A=0;A<N;A++)T.push(null);for(let A=1;A<=w;A++)T.push(A);return T})(),z=b(o),j=N=>N?z.find(w=>N>=w.date&&N<w.date+w.duration):null;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-white",children:[e.jsx("div",{className:"text-sm opacity-80",children:" "}),e.jsxs("div",{className:"text-xl font-bold",children:[i.year," ",i.month," ",i.day,""]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsx("button",{onClick:()=>u(o===1?12:o-1),className:"p-2 hover:bg-white/20 rounded-lg transition-all",children:""}),e.jsx("h2",{className:"text-2xl font-bold",children:x[o-1]}),e.jsx("button",{onClick:()=>u(o===12?1:o+1),className:"p-2 hover:bg-white/20 rounded-lg transition-all",children:""})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 text-white mb-2",children:["","","","","","",""].map(N=>e.jsx("div",{className:"text-center font-bold text-sm opacity-80",children:N},N))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:C.map((N,w)=>{const T=j(N),A=N===i.day&&o===i.month;return e.jsx("div",{onClick:()=>T&&g(T),className:`
                      aspect-square rounded-lg p-2 flex flex-col items-center justify-center
                      ${N?"bg-white/10 hover:bg-white/20 cursor-pointer":""}
                      ${A?"ring-2 ring-yellow-400":""}
                      ${T?"bg-gradient-to-br from-purple-500/30 to-pink-500/30":""}
                      transition-all
                    `,children:N&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`text-white ${A?"font-bold":""}`,children:N}),T&&e.jsx("div",{className:"text-2xl mt-1",children:T.icon})]})},w)})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"space-y-3",children:[z.map(N=>{const w=y.includes(N.id);return e.jsx("div",{onClick:()=>g(N),className:`
                      bg-white/10 rounded-lg p-3 cursor-pointer transition-all
                      ${w?"opacity-50":"hover:bg-white/20"}
                    `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:N.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:N.name}),e.jsxs("div",{className:"text-xs text-white/70",children:[N.month," ",N.date," (",N.duration,")"]}),w&&e.jsx("div",{className:"text-xs text-green-400 mt-1",children:"  "})]})]})},N.id)}),z.length===0&&e.jsx("div",{className:"text-white/50 text-center py-4",children:"  ."})]})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full border-2 border-white/20",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-5xl mb-3",children:m.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:m.name}),e.jsxs("div",{className:"text-white/70 text-sm mt-2",children:[m.month," ",m.date," ~ ",m.date+m.duration-1,""]})]}),e.jsx("p",{className:"text-white/90 mb-4",children:m.description}),m.requirements&&e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:" "}),m.requirements.level&&e.jsxs("div",{className:"text-white/70 text-sm",children:[" ",m.requirements.level," "]}),m.requirements.affection&&e.jsx("div",{className:"text-white/70 text-sm",children:"  "})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:""}),e.jsxs("div",{className:"space-y-1",children:[m.rewards.gold&&e.jsxs("div",{className:"text-yellow-400 text-sm",children:[" ",m.rewards.gold," "]}),m.rewards.exp&&e.jsxs("div",{className:"text-blue-400 text-sm",children:[" ",m.rewards.exp," EXP"]}),m.rewards.affection&&e.jsx("div",{className:"text-pink-400 text-sm",children:"  "}),m.rewards.items&&e.jsx("div",{className:"text-green-400 text-sm",children:"  "})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>D(m),disabled:y.includes(m.id),className:`
                    flex-1 py-3 rounded-lg font-bold transition-all
                    ${y.includes(m.id)?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg"}
                  `,children:y.includes(m.id)?" ":""}),e.jsx("button",{onClick:()=>g(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-lg font-bold transition-all",children:""})]})]})})]})})},ib=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState("all"),[u,m]=v.useState(null),g=[{id:"health_potion_large",name:"  ",description:"HP 100 ",result:{id:"health_potion_large",quantity:1},materials:[{id:"health_potion",quantity:3},{id:"herb",quantity:2}],category:"consumable",requiredLevel:5,icon:""},{id:"iron_sword",name:"",description:"  ",result:{id:"iron_sword",quantity:1},materials:[{id:"iron_ore",quantity:5},{id:"wood",quantity:2}],category:"weapon",requiredLevel:3,icon:""},{id:"magic_staff",name:" ",description:"  ",result:{id:"magic_staff",quantity:1},materials:[{id:"magic_crystal",quantity:3},{id:"ancient_wood",quantity:2},{id:"gold",quantity:100}],category:"weapon",requiredLevel:10,icon:""},{id:"leather_armor",name:" ",description:" ",result:{id:"leather_armor",quantity:1},materials:[{id:"leather",quantity:5},{id:"thread",quantity:3}],category:"armor",requiredLevel:5,icon:""},{id:"crystal_ring",name:" ",description:" ",result:{id:"crystal_ring",quantity:1},materials:[{id:"crystal",quantity:2},{id:"silver",quantity:3}],category:"accessory",requiredLevel:8,icon:""},{id:"dragon_scale_armor",name:"  ",description:" ",result:{id:"dragon_scale_armor",quantity:1},materials:[{id:"dragon_scale",quantity:10},{id:"mythril",quantity:5},{id:"gold",quantity:1e3}],category:"armor",requiredLevel:25,icon:""},{id:"phoenix_feather_accessory",name:"  ",description:"    ",result:{id:"phoenix_feather_accessory",quantity:1},materials:[{id:"phoenix_feather",quantity:1},{id:"holy_water",quantity:5}],category:"accessory",requiredLevel:20,icon:""},{id:"elixir",name:"",description:"HP MP  ",result:{id:"elixir",quantity:1},materials:[{id:"health_potion_large",quantity:2},{id:"mana_potion_large",quantity:2},{id:"unicorn_horn",quantity:1}],category:"consumable",requiredLevel:15,icon:""}],y=[{id:"all",name:"",icon:""},{id:"weapon",name:"",icon:""},{id:"armor",name:"",icon:""},{id:"accessory",name:"",icon:""},{id:"consumable",name:"",icon:""}],p=b=>b.materials.every(D=>{const O=r.inventory?.find(C=>C.id===D.id);return O&&O.quantity>=D.quantity}),x=b=>{if(r.level<b.requiredLevel){alert(` ${b.requiredLevel}    .`);return}if(!p(b)){alert(" !");return}let D=[...r.inventory||[]];b.materials.forEach(C=>{const z=D.findIndex(j=>j.id===C.id);z!==-1&&(D[z].quantity-=C.quantity,D[z].quantity<=0&&D.splice(z,1))});const O=D.find(C=>C.id===b.result.id);O?O.quantity+=b.result.quantity:D.push({...b.result}),i({inventory:D}),Ge.playSuccessSound(),alert(`${b.name}() !`)},S=d==="all"?g:g.filter(b=>b.category===d);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 via-brown-800 to-orange-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex gap-4",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("span",{className:"text-sm opacity-80",children:""}),e.jsx("div",{className:"font-bold",children:r.level})]}),e.jsxs("div",{className:"text-yellow-400",children:[e.jsx("span",{className:"text-sm opacity-80",children:""}),e.jsx("div",{className:"font-bold",children:r.gold||0})]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(b=>e.jsxs("button",{onClick:()=>o(b.id),className:`px-4 py-2 rounded-lg transition-all ${d===b.id?"bg-gradient-to-r from-amber-500 to-orange-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("span",{className:"mr-2",children:b.icon}),b.name]},b.id))})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(b=>{const D=r.level>=b.requiredLevel&&p(b);return e.jsxs("div",{className:`bg-black/30 backdrop-blur rounded-xl p-4 transition-all ${D?"border-2 border-amber-400/50 hover:border-amber-400":"border-2 border-white/10 opacity-75"}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"text-4xl",children:b.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-white",children:b.name}),e.jsx("p",{className:"text-sm text-white/70",children:b.description}),e.jsxs("div",{className:"text-xs text-amber-400 mt-1",children:["Lv.",b.requiredLevel," "]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2 mb-3",children:[e.jsx("div",{className:"text-sm font-bold text-white/80 mb-1",children:""}),e.jsx("div",{className:"space-y-1",children:b.materials.map(O=>{const C=r.inventory?.find(j=>j.id===O.id),z=C&&C.quantity>=O.quantity;return e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:z?"text-green-400":"text-red-400",children:O.id}),e.jsxs("span",{className:z?"text-green-400":"text-red-400",children:[C?.quantity||0," / ",O.quantity]})]},O.id)})})]}),e.jsx("button",{onClick:()=>x(b),disabled:!D,className:`w-full py-2 rounded-lg font-bold transition-all ${D?"bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:D?"":r.level<b.requiredLevel?" ":" "})]},b.id)})})]})})},rb=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState("overview"),[u,m]=v.useState(null),[g,y]=v.useState(!1),[p,x]=v.useState(""),S=[{id:"crimson_phoenix",name:" ",description:"  ",icon:"",level:15,exp:8500,maxExp:1e4,members:[],maxMembers:50,benefits:[" +10%","  +20%","  +15%"],treasury:15e4,ranking:1},{id:"azure_dragon",name:" ",description:"   ",icon:"",level:12,exp:6e3,maxExp:8e3,members:[],maxMembers:40,benefits:[" +20%","  -10%","  +25%"],treasury:12e4,ranking:2},{id:"golden_merchant",name:" ",description:"   ",icon:"",level:10,exp:4500,maxExp:6e3,members:[],maxMembers:60,benefits:["  20%","  +15%","  "],treasury:5e5,ranking:3}],b=[{id:"daily_dungeon",name:"  ",description:"  10 ",reward:{guildExp:100,treasury:5e3},requirement:" 10 ",difficulty:"easy",progress:3,maxProgress:10},{id:"boss_raid",name:" ",description:"  ",reward:{guildExp:500,treasury:2e4,items:["legendary_weapon"]},requirement:"  ",difficulty:"hard",progress:0,maxProgress:1},{id:"guild_war",name:"  ",description:"   ",reward:{guildExp:1e3,treasury:5e4},requirement:" ",difficulty:"legendary",progress:0,maxProgress:1},{id:"resource_gathering",name:" ",description:"   ",reward:{guildExp:200,treasury:1e4},requirement:" 100 ",difficulty:"medium",progress:45,maxProgress:100}],D=[{id:"guild_blessing",name:" ",description:"  +10 (24)",cost:1e4,icon:""},{id:"guild_teleport",name:"  ",description:"   ",cost:1e3,icon:""},{id:"guild_exp_boost",name:" ",description:" +50% (1)",cost:5e3,icon:""},{id:"guild_weapon",name:"  ",description:"    ",cost:5e4,icon:""},{id:"guild_mount",name:" ",description:" +100%",cost:1e5,icon:""}],O=()=>{if(!p){alert("  .");return}if((r.gold||0)<5e4){alert("  50,000  .");return}const j={id:`guild_${Date.now()}`,name:p,description:"  ",icon:"",level:1,exp:0,maxExp:1e3,members:[{id:r.id||"player",name:r.name,role:"leader",level:r.level,contribution:0,joinDate:new Date().toISOString(),avatar:""}],maxMembers:20,benefits:["  "],treasury:0,ranking:999};m(j),i({gold:(r.gold||0)-5e4}),Ge.playSuccessSound(),y(!1)},C=j=>{const N={id:r.id||"player",name:r.name,role:"member",level:r.level,contribution:0,joinDate:new Date().toISOString(),avatar:""};j.members.push(N),m(j),Ge.playSuccessSound(),alert(`${j.name}  !`)},z=j=>{switch(j){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";case"legendary":return"text-purple-400";default:return"text-white"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]})}),u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"text-6xl",children:u.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:u.name}),e.jsx("p",{className:"text-white/70",children:u.description}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",u.level]}),e.jsxs("span",{className:"text-blue-400",children:[" #",u.ranking]}),e.jsxs("span",{className:"text-green-400",children:[" ",u.members.length,"/",u.maxMembers]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-white/80",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[u.treasury.toLocaleString()," G"]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:" "}),e.jsxs("span",{children:[u.exp," / ",u.maxExp]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-full rounded-full",style:{width:`${u.exp/u.maxExp*100}%`}})})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:e.jsx("div",{className:"flex gap-2",children:["overview","members","quests","shop"].map(j=>e.jsxs("button",{onClick:()=>o(j),className:`px-4 py-2 rounded-lg transition-all ${d===j?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[j==="overview"&&" ",j==="members"&&" ",j==="quests"&&" ",j==="shop"&&" "]},j))})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[d==="overview"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"grid gap-2",children:u.benefits.map((j,N)=>e.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-3 text-purple-300",children:[" ",j]},N))})]}),d==="members"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"space-y-2",children:u.members.map(j=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:j.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:j.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",j.level," | ",j.role==="leader"?" ":j.role==="officer"?" ":" "]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/60",children:""}),e.jsx("div",{className:"text-yellow-400 font-bold",children:j.contribution})]})]},j.id))})]}),d==="quests"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"grid gap-3",children:b.map(j=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:j.name}),e.jsx("div",{className:"text-sm text-white/70",children:j.description}),e.jsxs("div",{className:`text-sm mt-1 ${z(j.difficulty)}`,children:[": ",j.difficulty.toUpperCase()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/60",children:""}),e.jsxs("div",{className:"text-yellow-400",children:["+",j.reward.guildExp," EXP"]}),e.jsxs("div",{className:"text-green-400",children:["+",j.reward.treasury," G"]})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[j.progress," / ",j.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-cyan-400 h-full rounded-full",style:{width:`${j.progress/j.maxProgress*100}%`}})})]})]},j.id))})]}),d==="shop"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:D.map(j=>e.jsx("div",{className:"bg-white/10 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-3xl",children:j.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:j.name}),e.jsx("div",{className:"text-sm text-white/70",children:j.description}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[j.cost," G"]}),e.jsx("button",{className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg text-sm font-bold hover:shadow-lg transition-all",children:""})]})]})]})},j.id))})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" /"}),e.jsx("button",{onClick:()=>y(!0),className:"w-full mb-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"   (50,000 )"}),e.jsx("div",{className:"grid gap-4",children:S.map(j=>e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-5xl",children:j.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:j.name}),e.jsx("p",{className:"text-white/70 mb-2",children:j.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[e.jsxs("div",{className:"text-white/80",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",j.level]})," |",e.jsxs("span",{className:"text-blue-400",children:["  #",j.ranking]})]}),e.jsxs("div",{className:"text-white/80",children:[": ",j.members.length,"/",j.maxMembers]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:j.benefits.map((N,w)=>e.jsx("span",{className:"bg-purple-500/30 px-2 py-1 rounded text-xs text-purple-300",children:N},w))}),e.jsx("button",{onClick:()=>C(j),className:"px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:""})]})]})},j.id))})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("input",{type:"text",value:p,onChange:j=>x(j.target.value),placeholder:"  ",className:"w-full p-3 rounded-lg bg-black/30 text-white placeholder-white/50 mb-4",maxLength:20}),e.jsxs("div",{className:"text-white/70 mb-4",children:[e.jsx("p",{children:"  : 50,000 "}),e.jsx("p",{children:"   : 20"}),e.jsx("p",{children:"    "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:O,className:"flex-1 py-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold",children:""}),e.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-2 bg-gray-600 text-white rounded-lg font-bold",children:""})]})]})})]})]})})},cb=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState(null),[u,m]=v.useState(!1),[g,y]=v.useState([]),[p,x]=v.useState("care"),S=[{id:"cat_1",name:"",species:" ",icon:"",level:1,exp:0,maxExp:100,happiness:100,hunger:80,stats:{attack:10,defense:8,speed:15,intelligence:12},skills:["",""],rarity:"common"},{id:"dog_1",name:"",species:" ",icon:"",level:1,exp:0,maxExp:100,happiness:100,hunger:70,stats:{attack:12,defense:10,speed:10,intelligence:8},skills:["",""],rarity:"common"},{id:"dragon_1",name:"",species:" ",icon:"",level:1,exp:0,maxExp:150,happiness:80,hunger:60,stats:{attack:20,defense:15,speed:12,intelligence:18},skills:[" ",""],evolution:"adult_dragon",rarity:"legendary"},{id:"fox_1",name:"",species:"",icon:"",level:1,exp:0,maxExp:120,happiness:90,hunger:75,stats:{attack:15,defense:12,speed:18,intelligence:20},skills:["",""],rarity:"epic"},{id:"bird_1",name:"",species:"",icon:"",level:1,exp:0,maxExp:130,happiness:85,hunger:65,stats:{attack:18,defense:10,speed:25,intelligence:15},skills:["",""],rarity:"epic"},{id:"rabbit_1",name:"",species:"",icon:"",level:1,exp:0,maxExp:90,happiness:95,hunger:85,stats:{attack:8,defense:6,speed:20,intelligence:10},skills:["",""],rarity:"rare"}],b=[{id:"basic_food",name:" ",icon:"",hungerRestore:20,happinessBonus:5,cost:50},{id:"premium_food",name:" ",icon:"",hungerRestore:40,happinessBonus:15,cost:200},{id:"treat",name:" ",icon:"",hungerRestore:10,happinessBonus:30,cost:150},{id:"magic_food",name:" ",icon:"",hungerRestore:50,happinessBonus:25,cost:500}],D=[{id:"attack_training",name:" ",stat:"attack",cost:200,expGain:20,icon:""},{id:"defense_training",name:" ",stat:"defense",cost:200,expGain:20,icon:""},{id:"speed_training",name:" ",stat:"speed",cost:200,expGain:20,icon:""},{id:"intelligence_training",name:" ",stat:"intelligence",cost:200,expGain:20,icon:""}];v.useEffect(()=>{const w=localStorage.getItem("myPets");if(w)try{const A=JSON.parse(w);Array.isArray(A)&&y(A)}catch(A){console.error("Failed to load pets:",A)}const T=setInterval(()=>{y(A=>{const k=A.map(M=>({...M,hunger:Math.max(0,M.hunger-1),happiness:Math.max(0,M.happiness-.5)}));return localStorage.setItem("myPets",JSON.stringify(k)),k})},3e4);return()=>clearInterval(T)},[]);const O=w=>{const T=w.rarity==="legendary"?5e3:w.rarity==="epic"?2e3:w.rarity==="rare"?800:300;if((r.money||0)<T){alert(`${T}  !  : ${r.money}`);return}if(g.length>=6){alert(" 6   !");return}const A={...w,id:`${w.id}_${Date.now()}`},k=[...g,A];y(k),localStorage.setItem("myPets",JSON.stringify(k));const M=(r.money||0)-T;i({money:M}),Ge.playSuccessSound(),alert(`${w.name}() ! (${T} )`),m(!1)},C=(w,T)=>{if((r.money||0)<T.cost){alert(" !");return}const A=g.map(k=>k.id===w.id?{...k,hunger:Math.min(100,k.hunger+T.hungerRestore),happiness:Math.min(100,k.happiness+T.happinessBonus)}:k);y(A),i({money:(r.money||0)-T.cost}),Ge.playSuccessSound()},z=(w,T)=>{if((r.money||0)<T.cost){alert(" !");return}const A=g.map(k=>{if(k.id===w.id){const M=k.exp+T.expGain,Y=M>=k.maxExp;return{...k,exp:Y?M-k.maxExp:M,level:Y?k.level+1:k.level,maxExp:Y?k.maxExp*1.5:k.maxExp,stats:{...k.stats,[T.stat]:k.stats[T.stat]+(Y?5:2)}}}return k});y(A),i({money:(r.money||0)-T.cost}),Ge.playSuccessSound()},j=w=>{if(!w.evolution||w.level<10){alert(" 10    !");return}const T={...w,species:" "+w.species,icon:"",stats:{attack:w.stats.attack*2,defense:w.stats.defense*2,speed:w.stats.speed*1.5,intelligence:w.stats.intelligence*2},skills:[...w.skills," "],evolution:void 0},A=g.map(k=>k.id===w.id?T:k);y(A),Ge.playLevelUpSound(),alert(`${w.name}() !`)},N=w=>{switch(w){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-emerald-800 to-teal-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:shadow-lg transition-all",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-white/70",children:"  .   !"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(w=>e.jsx("div",{onClick:()=>o(w),className:`bg-gradient-to-br ${N(w.rarity)} p-0.5 rounded-xl cursor-pointer hover:scale-105 transition-all`,children:e.jsxs("div",{className:"bg-black/80 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-4xl",children:w.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsx("div",{className:"text-sm text-white/70",children:w.species}),e.jsxs("div",{className:"text-xs text-yellow-400",children:["Lv.",w.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/80 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[Math.floor(w.happiness),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-400 to-red-400 h-full rounded-full",style:{width:`${w.happiness}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/80 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[Math.floor(w.hunger),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-400 h-full rounded-full",style:{width:`${w.hunger}%`}})})]})]})]})},w.id))})]}),d&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[e.jsx("div",{className:"text-8xl",children:d.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:d.name}),e.jsx("p",{className:"text-white/70",children:d.species}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("span",{className:"text-yellow-400",children:["Lv.",d.level]}),e.jsxs("span",{className:"text-blue-400",children:["EXP: ",d.exp,"/",d.maxExp]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:""}),e.jsxs("div",{className:"text-white font-bold",children:[" ",d.stats.attack]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:""}),e.jsxs("div",{className:"text-white font-bold",children:[" ",d.stats.defense]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:""}),e.jsxs("div",{className:"text-white font-bold",children:[" ",d.stats.speed]})]}),e.jsxs("div",{className:"bg-white/10 rounded p-2",children:[e.jsx("span",{className:"text-white/60 text-sm",children:""}),e.jsxs("div",{className:"text-white font-bold",children:[" ",d.stats.intelligence]})]})]})]})]}),e.jsx("div",{className:"flex gap-2 mb-4",children:["care","train","battle","evolve"].map(w=>e.jsxs("button",{onClick:()=>x(w),className:`px-4 py-2 rounded-lg transition-all ${p===w?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[w==="care"&&" ",w==="train"&&" ",w==="battle"&&" ",w==="evolve"&&" "]},w))}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4",children:[p==="care"&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(w=>e.jsx("button",{onClick:()=>C(d,w),className:"bg-black/30 rounded-lg p-3 hover:bg-black/40 transition-all text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:w.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsxs("div",{className:"text-xs text-white/60",children:[" +",w.hungerRestore," |  +",w.happinessBonus]}),e.jsxs("div",{className:"text-sm text-yellow-400",children:[w.cost," G"]})]})]})},w.id))}),p==="train"&&e.jsx("div",{className:"grid grid-cols-2 gap-3",children:D.map(w=>e.jsx("button",{onClick:()=>z(d,w),className:"bg-black/30 rounded-lg p-3 hover:bg-black/40 transition-all text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:w.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsxs("div",{className:"text-xs text-white/60",children:["+",w.expGain," EXP"]}),e.jsxs("div",{className:"text-sm text-yellow-400",children:[w.cost," G"]})]})]})},w.id))}),p==="battle"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:""}),e.jsx("p",{className:"text-white/70",children:"    ..."})]}),p==="evolve"&&e.jsx("div",{className:"text-center py-8",children:d.evolution?e.jsxs("div",{children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("p",{className:"text-white mb-4",children:" 10  !"}),e.jsx("button",{onClick:()=>j(d),disabled:d.level<10,className:`px-6 py-3 rounded-lg font-bold ${d.level>=10?"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:""})]}):e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-4",children:""}),e.jsx("p",{className:"text-white/70",children:"    ."})]})})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-green-900 to-emerald-900 rounded-xl p-6 max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>m(!1),className:"text-white hover:text-red-400 text-2xl",children:""})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(w=>{const T=w.rarity==="legendary"?5e3:w.rarity==="epic"?2e3:w.rarity==="rare"?800:300;return e.jsx("div",{className:`bg-gradient-to-br ${N(w.rarity)} p-0.5 rounded-xl`,children:e.jsx("div",{className:"bg-black/80 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-5xl",children:w.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:w.name}),e.jsx("div",{className:"text-sm text-white/70",children:w.species}),e.jsx("div",{className:"text-xs text-yellow-400 uppercase",children:w.rarity}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:w.skills.map(A=>e.jsx("span",{className:"bg-white/20 px-2 py-1 rounded text-xs text-white",children:A},A))}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[T," G"]}),e.jsx("button",{onClick:()=>O(w),className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:""})]})]})]})})},w.id)})})]})})]})})},ob=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState(!1),[u,m]=v.useState(!1),[g,y]=v.useState(null),[p,x]=v.useState(50),[S,b]=v.useState(!1),[D,O]=v.useState(50),[C,z]=v.useState([]),[j,N]=v.useState("basic"),[w,T]=v.useState("wooden");v.useRef(null);const A=[{id:"minnow",name:"",icon:"",rarity:"common",size:5,value:50,difficulty:10},{id:"carp",name:"",icon:"",rarity:"common",size:15,value:100,difficulty:20},{id:"bass",name:"",icon:"",rarity:"common",size:20,value:150,difficulty:25},{id:"salmon",name:"",icon:"",rarity:"rare",size:30,value:300,difficulty:40},{id:"tuna",name:"",icon:"",rarity:"rare",size:40,value:500,difficulty:50},{id:"eel",name:"",icon:"",rarity:"rare",size:25,value:400,difficulty:45},{id:"swordfish",name:"",icon:"",rarity:"epic",size:60,value:1e3,difficulty:70},{id:"shark",name:"",icon:"",rarity:"epic",size:80,value:1500,difficulty:80},{id:"octopus",name:"",icon:"",rarity:"epic",size:35,value:800,difficulty:60},{id:"golden_fish",name:" ",icon:"",rarity:"legendary",size:50,value:5e3,difficulty:90},{id:"dragon_fish",name:" ",icon:"",rarity:"legendary",size:100,value:1e4,difficulty:95},{id:"mermaid_tear",name:" ",icon:"",rarity:"legendary",size:1,value:2e4,difficulty:100}],k={basic:{name:" ",cost:10,bonus:0,icon:""},premium:{name:" ",cost:50,bonus:20,icon:""},special:{name:" ",cost:200,bonus:50,icon:""}},M={wooden:{name:" ",power:1,cost:0,icon:""},iron:{name:" ",power:1.5,cost:1e3,icon:""},golden:{name:" ",power:2,cost:5e3,icon:""}};v.useEffect(()=>{let q;if(d&&!u){const H=20+k[j].bonus;q=setInterval(()=>{if(Math.random()*100<H){const J=Y();y(J),m(!0),Ge.playNotificationSound()}},1e3)}return()=>clearInterval(q)},[d,u,j]),v.useEffect(()=>{let q;return S&&g&&(q=setInterval(()=>{const h=g.difficulty/100;M[w].power,O(H=>{const J=H+(Math.random()-.5)*h*20;return Math.max(0,Math.min(100,J))}),x(H=>{const J=h*2,ie=H-J;return ie<=0?(b(!1),m(!1),y(null),x(50),alert(" !"),50):ie})},100)),()=>clearInterval(q)},[S,g,w]);const Y=()=>{const q=Math.random()*100;let h;return j==="special"?q<10?h=A.filter(H=>H.rarity==="legendary"):q<30?h=A.filter(H=>H.rarity==="epic"):q<60?h=A.filter(H=>H.rarity==="rare"):h=A.filter(H=>H.rarity==="common"):j==="premium"?q<5?h=A.filter(H=>H.rarity==="legendary"):q<20?h=A.filter(H=>H.rarity==="epic"):q<50?h=A.filter(H=>H.rarity==="rare"):h=A.filter(H=>H.rarity==="common"):q<1?h=A.filter(H=>H.rarity==="legendary"):q<10?h=A.filter(H=>H.rarity==="epic"):q<30?h=A.filter(H=>H.rarity==="rare"):h=A.filter(H=>H.rarity==="common"),h[Math.floor(Math.random()*h.length)]},B=()=>{const q=k[j].cost;if((r.gold||0)<q){alert("   !");return}i({gold:(r.gold||0)-q}),o(!0),m(!1),x(50)},ae=()=>{o(!1),m(!1),y(null),b(!1),x(50)},G=()=>{!u||!g||b(!0)},le=()=>{if(!S||!g)return;const h=10*M[w].power;x(H=>Math.min(100,H+h)),p>80&&Math.abs(D-50)<20&&E(g)},E=q=>{z([...C,q]),i({gold:(r.gold||0)+q.value,experience:r.experience+q.size*10}),Ge.playSuccessSound(),alert(`${q.name}() ! +${q.value} `),b(!1),m(!1),y(null),x(50),o(!1)},U=q=>{const h=M[q];if((r.gold||0)<h.cost){alert(" !");return}i({gold:(r.gold||0)-h.cost}),T(q),Ge.playSuccessSound()},R=q=>{switch(q){case"legendary":return"from-orange-400 to-red-500";case"epic":return"from-purple-400 to-pink-500";case"rare":return"from-blue-400 to-indigo-500";default:return"from-gray-400 to-gray-500"}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 via-blue-700 to-cyan-600 p-4",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"relative h-64 bg-gradient-to-b from-cyan-600/50 to-blue-800/50 rounded-xl overflow-hidden mb-4",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"wave wave1"}),e.jsx("div",{className:"wave wave2"})]}),d&&e.jsxs("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2",children:[e.jsx("div",{className:"w-0.5 h-48 bg-white/50"}),e.jsx("div",{className:"text-2xl transform -translate-x-1/2",children:u?"":""})]}),u&&g&&e.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"text-4xl animate-pulse",children:g.icon})})]}),S&&g&&e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"mb-2 text-white font-bold",children:[g.name,"()  !"]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[Math.floor(p),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4 relative",children:e.jsx("div",{className:`h-full rounded-full transition-all ${p>80?"bg-green-500":p>30?"bg-yellow-500":"bg-red-500"}`,style:{width:`${p}%`}})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm text-white/80 mb-1",children:" "}),e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 relative",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-full bg-green-500/30"}),e.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2 text-2xl",style:{left:`${D}%`},children:""})]})]}),e.jsx("button",{onClick:le,className:"w-full py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:"! ()"})]}),d?e.jsxs("div",{className:"space-y-3",children:[u&&!S&&e.jsx("button",{onClick:G,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-bold text-xl hover:shadow-lg transition-all animate-pulse",children:" !"}),e.jsx("button",{onClick:ae,className:"w-full py-3 bg-gray-600 text-white rounded-lg font-bold hover:bg-gray-700 transition-all",children:""})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold mb-2",children:" "}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.keys(k).map(q=>e.jsxs("button",{onClick:()=>N(q),className:`p-3 rounded-lg transition-all ${j===q?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:k[q].icon}),e.jsx("div",{className:"text-sm",children:k[q].name}),e.jsxs("div",{className:"text-xs opacity-80",children:[k[q].cost," G"]})]},q))})]}),e.jsx("button",{onClick:B,className:"w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-bold text-xl hover:shadow-lg transition-all",children:"  "})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${w==="iron"?"border-2 border-green-400":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:" "}),e.jsx("div",{className:"text-sm text-white/70",children:" +50%"}),e.jsx("div",{className:"text-yellow-400",children:"1,000 G"})]}),w!=="iron"&&w!=="golden"&&e.jsx("button",{onClick:()=>U("iron"),className:"px-3 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-bold",children:""})]})}),e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${w==="golden"?"border-2 border-yellow-400":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-white",children:" "}),e.jsx("div",{className:"text-sm text-white/70",children:" +100%"}),e.jsx("div",{className:"text-yellow-400",children:"5,000 G"})]}),w!=="golden"&&e.jsx("button",{onClick:()=>U("golden"),className:"px-3 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg font-bold",children:""})]})})]})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"  "}),C.length===0?e.jsx("p",{className:"text-white/70 text-center py-4",children:"   ."}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:C.map((q,h)=>e.jsx("div",{className:`bg-gradient-to-br ${R(q.rarity)} p-0.5 rounded-lg`,children:e.jsxs("div",{className:"bg-black/80 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-3xl mb-1",children:q.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:q.name}),e.jsxs("div",{className:"text-xs text-yellow-400",children:[q.size,"cm"]})]})},h))}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("div",{className:"text-white/80",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[C.reduce((q,h)=>q+h.value,0)," G"]})]})]})]}),e.jsx("style",{jsx:!0,children:`
        .wave {
          position: absolute;
          width: 200%;
          height: 100%;
          background: linear-gradient(180deg, transparent, rgba(255, 255, 255, 0.1), transparent);
          animation: wave 3s linear infinite;
        }

        .wave1 {
          animation-delay: 0s;
        }

        .wave2 {
          animation-delay: 1.5s;
        }

        @keyframes wave {
          0% {
            transform: translateX(-50%);
          }
          100% {
            transform: translateX(0);
          }
        }
      `})]})},db=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState(()=>{const N=[];for(let w=0;w<12;w++)N.push({id:w,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null,isUnlocked:w<4});return N}),[u,m]=v.useState(null),[g,y]=v.useState(Date.now()),p=[{id:"wheat",name:"",icon:"",seedCost:50,growthTime:60,sellPrice:150,waterNeeded:2},{id:"carrot",name:"",icon:"",seedCost:100,growthTime:120,sellPrice:350,waterNeeded:3},{id:"tomato",name:"",icon:"",seedCost:150,growthTime:180,sellPrice:500,waterNeeded:4},{id:"corn",name:"",icon:"",seedCost:200,growthTime:240,sellPrice:700,waterNeeded:5},{id:"pumpkin",name:"",icon:"",seedCost:300,growthTime:300,sellPrice:1e3,waterNeeded:6},{id:"watermelon",name:"",icon:"",seedCost:400,growthTime:360,sellPrice:1500,waterNeeded:7},{id:"strawberry",name:"",icon:"",seedCost:500,growthTime:150,sellPrice:800,waterNeeded:4},{id:"grapes",name:"",icon:"",seedCost:600,growthTime:400,sellPrice:2e3,waterNeeded:8},{id:"apple",name:"",icon:"",seedCost:800,growthTime:600,sellPrice:3e3,waterNeeded:10},{id:"golden_apple",name:"",icon:"",seedCost:5e3,growthTime:1200,sellPrice:2e4,waterNeeded:20}];v.useEffect(()=>{const N=setInterval(()=>{y(Date.now()),x()},1e3);return()=>clearInterval(N)},[d]);const x=()=>{o(N=>N.map(w=>{if(!w.crop||!w.plantedAt)return w;const A=(Date.now()-w.plantedAt)/1e3/w.crop.growthTime,k=w.lastWateredAt?(Date.now()-w.lastWateredAt)/1e3:1/0;let M=w.crop.stage;return k>120&&w.crop.stage!=="dead"?M="dead":A>=1&&w.wateredTimes>=w.crop.waterNeeded?M="mature":A>=.66?M="growing":A>=.33&&(M="sprout"),{...w,crop:{...w.crop,stage:M}}}))},S=N=>{if(!u){alert("  !");return}const w=p.find(A=>A.id===u);if(!w)return;if((r.gold||0)<w.seedCost){alert(" !");return}const T={...w,stage:"seed"};o(A=>A.map(k=>k.id===N?{...k,crop:T,plantedAt:Date.now(),wateredTimes:0,lastWateredAt:null}:k)),i({gold:(r.gold||0)-w.seedCost}),Ge.playSuccessSound()},b=N=>{const w=d.find(A=>A.id===N);if(!w||!w.crop)return;if(w.crop.stage==="dead"){alert("     !");return}if(w.crop.stage==="mature"){alert("  !");return}if((w.lastWateredAt?(Date.now()-w.lastWateredAt)/1e3:1/0)<30){alert("    ! 30   .");return}o(A=>A.map(k=>k.id===N?{...k,wateredTimes:k.wateredTimes+1,lastWateredAt:Date.now()}:k)),Ge.playSuccessSound()},D=N=>{const w=d.find(A=>A.id===N);if(!w||!w.crop)return;if(w.crop.stage!=="mature"){alert("   !");return}const T=w.crop.sellPrice;i({gold:(r.gold||0)+T,experience:r.experience+Math.floor(T/10)}),o(A=>A.map(k=>k.id===N?{...k,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null}:k)),Ge.playSuccessSound(),alert(`${w.crop.name}() ! +${T} `)},O=N=>{o(w=>w.map(T=>T.id===N?{...T,crop:null,plantedAt:null,wateredTimes:0,lastWateredAt:null}:T))},C=N=>{const w=1e3*(N-2);if((r.gold||0)<w){alert(`${w}  !`);return}o(T=>T.map(A=>A.id===N?{...A,isUnlocked:!0}:A)),i({gold:(r.gold||0)-w}),Ge.playSuccessSound()},z=N=>{if(!N.crop)return"";switch(N.crop.stage){case"seed":return"";case"sprout":return"";case"growing":return"";case"mature":return N.crop.icon;case"dead":return"";default:return""}},j=N=>{if(!N.crop||!N.plantedAt)return 0;const w=(g-N.plantedAt)/1e3;return Math.min(100,w/N.crop.growthTime*100)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-green-700 via-green-600 to-yellow-600 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" "}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("span",{className:"text-yellow-400",children:""})," ",r.gold||0," G"]}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]})]})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"  "}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:p.map(N=>e.jsxs("button",{onClick:()=>m(N.id),className:`p-3 rounded-lg transition-all ${u===N.id?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:N.icon}),e.jsx("div",{className:"text-sm font-bold",children:N.name}),e.jsxs("div",{className:"text-xs",children:[": ",N.seedCost,"G"]}),e.jsxs("div",{className:"text-xs",children:[": ",N.sellPrice,"G"]}),e.jsxs("div",{className:"text-xs opacity-70",children:[N.growthTime,""]})]},N.id))})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"  "}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4",children:d.map(N=>e.jsx("div",{className:`relative aspect-square rounded-lg p-4 ${N.isUnlocked?"bg-gradient-to-b from-amber-700 to-amber-900":"bg-gray-800"}`,children:N.isUnlocked?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-5xl text-center mb-2",children:z(N)}),N.crop&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-white font-bold",children:N.crop.name}),N.crop.stage!=="dead"&&N.crop.stage!=="mature"&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-400 h-full rounded-full",style:{width:`${j(N)}%`}})})}),N.crop.stage!=="dead"&&N.crop.stage!=="mature"&&e.jsxs("div",{className:"text-xs text-blue-300 mt-1",children:[" ",N.wateredTimes,"/",N.crop.waterNeeded]}),N.crop.stage==="mature"&&e.jsx("div",{className:"text-xs text-green-400 font-bold mt-1",children:" !"}),N.crop.stage==="dead"&&e.jsx("div",{className:"text-xs text-red-400 font-bold mt-1",children:""})]}),e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 flex gap-1",children:[!N.crop&&e.jsx("button",{onClick:()=>S(N.id),className:"flex-1 py-1 px-2 bg-green-500 text-white text-xs rounded hover:bg-green-600",children:""}),N.crop&&N.crop.stage!=="mature"&&N.crop.stage!=="dead"&&e.jsx("button",{onClick:()=>b(N.id),className:"flex-1 py-1 px-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",children:""}),N.crop&&N.crop.stage==="mature"&&e.jsx("button",{onClick:()=>D(N.id),className:"flex-1 py-1 px-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600",children:""}),N.crop&&N.crop.stage==="dead"&&e.jsx("button",{onClick:()=>O(N.id),className:"flex-1 py-1 px-2 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:""})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsxs("button",{onClick:()=>C(N.id),className:"px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600",children:[" (",1e3*(N.id-2),"G)"]})]})},N.id))}),e.jsxs("div",{className:"mt-6 bg-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-2",children:" "}),e.jsxs("ul",{className:"text-sm text-white/80 space-y-1",children:[e.jsx("li",{children:"      (30)"}),e.jsx("li",{children:"  2     "}),e.jsx("li",{children:"      "}),e.jsx("li",{children:"    !"})]})]})]})]})})},ub=()=>{const{player:r,updatePlayer:i}=re(),[d,o]=v.useState({id:"starter_room",name:" ",size:"small",furniture:[],wallpaper:"basic",flooring:"wood",comfort:0,style:0,maxFurniture:10}),[u,m]=v.useState("room"),[g,y]=v.useState(null),p=[{id:"basic_bed",name:" ",icon:"",category:"bed",cost:500,comfort:10,style:5},{id:"luxury_bed",name:" ",icon:"",category:"bed",cost:2e3,comfort:30,style:20},{id:"royal_bed",name:" ",icon:"",category:"bed",cost:1e4,comfort:100,style:80},{id:"wooden_chair",name:" ",icon:"",category:"chair",cost:200,comfort:5,style:3},{id:"gaming_chair",name:" ",icon:"",category:"chair",cost:1500,comfort:25,style:15},{id:"throne",name:"",icon:"",category:"chair",cost:8e3,comfort:50,style:70},{id:"study_desk",name:"",icon:"",category:"table",cost:300,comfort:5,style:5},{id:"dining_table",name:"",icon:"",category:"table",cost:800,comfort:10,style:10},{id:"magic_table",name:" ",icon:"",category:"table",cost:5e3,comfort:20,style:50},{id:"plant",name:"",icon:"",category:"decoration",cost:100,comfort:3,style:5},{id:"painting",name:"",icon:"",category:"decoration",cost:500,comfort:5,style:15},{id:"chandelier",name:"",icon:"",category:"decoration",cost:3e3,comfort:15,style:40},{id:"aquarium",name:"",icon:"",category:"decoration",cost:1200,comfort:20,style:25},{id:"fireplace",name:"",icon:"",category:"decoration",cost:2500,comfort:35,style:30},{id:"bookshelf",name:"",icon:"",category:"storage",cost:600,comfort:8,style:12},{id:"wardrobe",name:"",icon:"",category:"storage",cost:900,comfort:10,style:10},{id:"treasure_chest",name:"",icon:"",category:"storage",cost:4e3,comfort:5,style:35},{id:"piano",name:"",icon:"",category:"special",cost:7e3,comfort:40,style:60},{id:"telescope",name:"",icon:"",category:"special",cost:3500,comfort:15,style:30},{id:"gaming_setup",name:" ",icon:"",category:"special",cost:1e4,comfort:60,style:45},{id:"magic_crystal",name:" ",icon:"",category:"special",cost:15e3,comfort:50,style:100}],x=[{id:"basic",name:" ",cost:0,style:0,icon:""},{id:"floral",name:" ",cost:500,style:10,icon:""},{id:"starry",name:" ",cost:1e3,style:20,icon:""},{id:"royal",name:" ",cost:3e3,style:50,icon:""},{id:"magical",name:" ",cost:5e3,style:80,icon:""}],S=[{id:"wood",name:" ",cost:0,style:5,icon:""},{id:"carpet",name:"",cost:800,style:15,icon:""},{id:"marble",name:"",cost:2e3,style:35,icon:""},{id:"crystal",name:" ",cost:6e3,style:70,icon:""}],b=[{size:"medium",name:" ",cost:5e3,maxFurniture:20},{size:"large",name:" ",cost:15e3,maxFurniture:35},{size:"mansion",name:"",cost:5e4,maxFurniture:50}],D=T=>{if((r.gold||0)<T.cost){alert(" !");return}if(d.furniture.length>=d.maxFurniture){alert("      !");return}const A={...T,position:{x:50,y:50}};o(k=>({...k,furniture:[...k.furniture,A],comfort:k.comfort+T.comfort,style:k.style+T.style})),i({gold:(r.gold||0)-T.cost}),Ge.playSuccessSound()},O=T=>{const A=d.furniture.find(M=>M.id===T);if(!A)return;const k=Math.floor(A.cost*.5);o(M=>({...M,furniture:M.furniture.filter(Y=>Y.id!==T),comfort:M.comfort-A.comfort,style:M.style-A.style})),i({gold:(r.gold||0)+k}),Ge.playCoinSound()},C=T=>{const A=x.find(k=>k.id===T);if(A){if((r.gold||0)<A.cost){alert(" !");return}o(k=>({...k,wallpaper:T,style:k.style+A.style})),i({gold:(r.gold||0)-A.cost}),Ge.playSuccessSound()}},z=T=>{const A=S.find(k=>k.id===T);if(A){if((r.gold||0)<A.cost){alert(" !");return}o(k=>({...k,flooring:T,style:k.style+A.style})),i({gold:(r.gold||0)-A.cost}),Ge.playSuccessSound()}},j=T=>{const A=b.find(k=>k.size===T);if(A){if((r.gold||0)<A.cost){alert(" !");return}o(k=>({...k,size:T,maxFurniture:A.maxFurniture})),i({gold:(r.gold||0)-A.cost}),Ge.playLevelUpSound()}},w=(()=>{const T=Math.floor(d.comfort/10),A=Math.floor(d.style/10);return{happiness:T*2,charm:A,dailyGold:(T+A)*10}})();return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all",children:""})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[" ",d.comfort]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[" ",d.style]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[" ",d.furniture.length,"/",d.maxFurniture]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[" ",d.size]})]})]})]}),e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 mb-6",children:e.jsx("div",{className:"flex gap-2",children:["room","furniture","customize","upgrade"].map(T=>e.jsxs("button",{onClick:()=>m(T),className:`px-4 py-2 rounded-lg transition-all ${u===T?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[T==="room"&&"  ",T==="furniture"&&"  ",T==="customize"&&" ",T==="upgrade"&&" "]},T))})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[u==="room"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"bg-gradient-to-b from-gray-700 to-gray-800 rounded-xl h-64 mb-4 relative overflow-hidden",children:[d.furniture.map((T,A)=>e.jsx("div",{className:"absolute text-4xl cursor-pointer hover:scale-110 transition-all",style:{left:`${T.position?.x||50}%`,top:`${T.position?.y||50}%`,transform:"translate(-50%, -50%)"},onClick:()=>O(T.id),title:`${T.name} ( )`,children:T.icon},A)),d.furniture.length===0&&e.jsx("div",{className:"flex items-center justify-center h-full text-white/50",children:"   !"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"font-bold text-white mb-2",children:"  "}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-pink-400",children:[" +",w.happiness]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-purple-400",children:[" +",w.charm]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"text-yellow-400",children:["  +",w.dailyGold]})})]})]})]}),u==="furniture"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:p.map(T=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl text-center mb-2",children:T.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:T.name}),e.jsx("div",{className:"text-xs text-white/70",children:T.category}),e.jsxs("div",{className:"flex justify-between text-xs mt-2",children:[e.jsxs("span",{className:"text-blue-400",children:[" +",T.comfort]}),e.jsxs("span",{className:"text-purple-400",children:[" +",T.style]})]}),e.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[e.jsxs("span",{className:"text-yellow-400 font-bold",children:[T.cost," G"]}),e.jsx("button",{onClick:()=>D(T),className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded text-sm font-bold hover:shadow-lg transition-all",children:""})]})]},T.id))})]}),u==="customize"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:x.map(T=>e.jsxs("button",{onClick:()=>C(T.id),className:`p-3 rounded-lg transition-all ${d.wallpaper===T.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:T.icon}),e.jsx("div",{className:"text-xs",children:T.name}),e.jsxs("div",{className:"text-xs",children:[T.cost," G"]})]},T.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:""}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:S.map(T=>e.jsxs("button",{onClick:()=>z(T.id),className:`p-3 rounded-lg transition-all ${d.flooring===T.id?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:T.icon}),e.jsx("div",{className:"text-xs",children:T.name}),e.jsxs("div",{className:"text-xs",children:[T.cost," G"]})]},T.id))})]})]}),u==="upgrade"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"grid gap-4",children:b.map(T=>e.jsx("div",{className:`bg-white/10 rounded-lg p-4 ${d.size===T.size?"border-2 border-green-400":""}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white",children:T.name}),e.jsxs("div",{className:"text-sm text-white/70",children:[" : ",T.maxFurniture,""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-yellow-400 font-bold text-xl",children:[T.cost," G"]}),d.size!==T.size&&e.jsx("button",{onClick:()=>j(T.size),className:"mt-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:""})]})]})},T.size))})]})]})]})})},mb=()=>{const r=ke(),i=re(o=>o.player),d=[{title:"  ",items:[{name:" ",icon:"",path:"/dungeon",color:"from-red-500 to-red-600"},{name:"",icon:"",path:"/shopping",color:"from-yellow-500 to-yellow-600"},{name:" ",icon:"",path:"/characters",color:"from-blue-500 to-blue-600"},{name:" ",icon:"",path:"/heroines",color:"from-pink-500 to-pink-600"}]},{title:"  & ",items:[{name:"",icon:"",path:"/achievements",color:"from-yellow-500 to-orange-500"},{name:"",icon:"",path:"/collection",color:"from-purple-500 to-purple-600"},{name:" ",icon:"",path:"/quests",color:"from-green-500 to-green-600"},{name:" ",icon:"",path:"/calendar",color:"from-pink-500 to-pink-600"}]},{title:"  & ",items:[{name:"",icon:"",path:"/clubs",color:"from-purple-500 to-indigo-600"},{name:"",icon:"",path:"/guild",color:"from-indigo-500 to-indigo-600"},{name:" ",icon:"",path:"/pets",color:"from-emerald-500 to-emerald-600"}]},{title:"  & ",items:[{name:"",icon:"",path:"/fishing",color:"from-cyan-500 to-cyan-600"},{name:"",icon:"",path:"/farming",color:"from-green-600 to-green-700"},{name:" ",icon:"",path:"/card-matching",color:"from-purple-600 to-pink-600"},{name:" ",icon:"",path:"/quiz-game",color:"from-orange-500 to-red-500"}]},{title:"  ",items:[{name:"",icon:"",path:"/housing",color:"from-purple-600 to-pink-600"},{name:"",icon:"",path:"/crafting",color:"from-amber-500 to-amber-600"}]}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"  "}),e.jsx("button",{onClick:()=>r("/game"),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-lg font-bold hover:shadow-lg transition-all",children:" "})]})}),e.jsx("div",{className:"space-y-6",children:d.map((o,u)=>e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:o.title}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.items.map((m,g)=>e.jsxs("button",{onClick:()=>r(m.path),className:`bg-gradient-to-r ${m.color} p-4 rounded-xl hover:scale-105 transition-all shadow-lg hover:shadow-xl`,children:[e.jsx("div",{className:"text-4xl mb-2",children:m.icon}),e.jsx("div",{className:"text-white font-bold",children:m.name})]},g))})]},u))}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mt-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:" "}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["Day ",i.day]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["Lv.",i.level]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:""}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[i.money||0," G"]})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-white/70",children:" "}),e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:i.achievementPoints||0})]})]})]})]})})},xb=({onComplete:r,onSkip:i})=>{const d=ke(),[o,u]=v.useState(0),[m,g]=v.useState(!1),y=[{id:1,title:"    !",content:"     .    .",image:""},{id:2,title:" ",content:"   . , ,       .",image:"",highlightElement:".character-creation"},{id:3,title:" ",content:"(HP), (MP), , , ,     .      .",image:""},{id:4,title:" ",content:"5     .      .",image:""},{id:5,title:" ",content:", ,       .     .",image:""},{id:6,title:" ",content:" , ,   .       .",image:""},{id:7,title:" ",content:"        .    .",image:""},{id:8,title:" ",content:"    .    !",image:"",highlightElement:".dungeon-button"},{id:9,title:" ",content:"       .    .",image:""},{id:10,title:"",content:"    . , ,       .",image:"",highlightElement:".shop-button"},{id:11,title:"",content:" ,       .    !",image:""},{id:12,title:"",content:"       .      .",image:""},{id:13,title:" & ",content:"       .    .",image:""},{id:14,title:"",content:`   
   
    
   `,image:""},{id:15,title:" !",content:"      .  !",image:"",action:()=>{r(),d("/character-creation")}}],p=()=>{o<y.length-1?(g(!0),setTimeout(()=>{u(o+1),g(!1)},300)):y[o].action?.()},x=()=>{o>0&&(g(!0),setTimeout(()=>{u(o-1),g(!1)},300))},S=()=>{window.confirm(" ?      .")&&(i(),d("/character-creation"))};return v.useEffect(()=>{const b=y[o];if(b.highlightElement){const D=document.querySelector(b.highlightElement);if(D)return D.classList.add("tutorial-highlight"),()=>{D.classList.remove("tutorial-highlight")}}},[o]),e.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gray-200 h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-full transition-all duration-500",style:{width:`${(o+1)/y.length*100}%`}})}),e.jsxs("div",{className:`p-8 transition-opacity duration-300 ${m?"opacity-0":"opacity-100"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-500",children:[" ",o+1," / ",y.length]}),e.jsx("button",{onClick:S,className:"text-sm text-gray-500 hover:text-gray-700 underline",children:""})]}),e.jsxs("div",{className:"text-center mb-8",children:[y[o].image&&e.jsx("div",{className:"text-6xl mb-6 animate-bounce",children:y[o].image}),e.jsx("h2",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:y[o].title}),e.jsx("p",{className:"text-lg text-gray-700 whitespace-pre-line leading-relaxed",children:y[o].content})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:x,disabled:o===0,className:`
                px-6 py-3 rounded-lg font-semibold transition-all
                ${o===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}
              `,children:""}),e.jsx("div",{className:"flex gap-2",children:y.map((b,D)=>e.jsx("button",{onClick:()=>{D<=o&&u(D)},className:`
                    w-2 h-2 rounded-full transition-all
                    ${D===o?"w-8 bg-gradient-to-r from-purple-500 to-pink-500":D<o?"bg-purple-300 cursor-pointer hover:bg-purple-400":"bg-gray-300"}
                  `},D))}),e.jsx("button",{onClick:p,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all transform hover:scale-105",children:o===y.length-1?"":""})]})]})]}),e.jsx("style",{children:`
        .tutorial-highlight {
          position: relative;
          z-index: 51;
          box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          animation: pulse 2s infinite;
        }

        @keyframes pulse {
          0% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          }
          50% {
            box-shadow: 0 0 20px 9999px rgba(0, 0, 0, 0.3);
          }
          100% {
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
          }
        }
      `})]})},hb=()=>{const[r,i]=v.useState([]),[d,o]=v.useState([]),[u,m]=v.useState(0),[g,y]=v.useState(0),[p,x]=v.useState(!1),S=["","","","","","","",""];v.useEffect(()=>{b()},[]);const b=()=>{const O=[...S,...S].map((C,z)=>({id:z,value:C,isFlipped:!1,isMatched:!1})).sort(()=>Math.random()-.5);i(O),o([]),m(0),y(0),x(!1)},D=O=>{if(d.length===2||d.includes(O)||r[O].isMatched)return;const C=[...d,O];if(o(C),C.length===2){y(g+1);const[z,j]=C;r[z].value===r[j].value?setTimeout(()=>{i(w=>w.map(T=>T.id===z||T.id===j?{...T,isMatched:!0}:T)),o([]),m(u+10),r.map(w=>w.id===z||w.id===j?{...w,isMatched:!0}:w).every(w=>w.isMatched)&&x(!0)},1e3):setTimeout(()=>{o([])},1e3)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-900 via-purple-900 to-indigo-900 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-xl p-8 border border-white/20",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6 text-center",children:"   "}),e.jsxs("div",{className:"flex justify-center gap-8 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:u}),e.jsx("div",{className:"text-sm text-gray-300",children:""})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:g}),e.jsx("div",{className:"text-sm text-gray-300",children:" "})]})]}),p&&e.jsxs("div",{className:"bg-green-600/20 border border-green-500 rounded-lg p-4 mb-6 text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-green-400 mb-2",children:"  !"}),e.jsxs("p",{className:"text-green-200",children:[g,"  ",u," !"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6 max-w-md mx-auto",children:r.map(O=>e.jsx("div",{onClick:()=>D(O.id),className:`
                  aspect-square bg-white/10 rounded-lg border-2 border-white/20 
                  flex items-center justify-center text-3xl cursor-pointer
                  transition-all duration-300 hover:scale-105
                  ${d.includes(O.id)||O.isMatched?"bg-white/20 border-yellow-400":"hover:bg-white/15"}
                  ${O.isMatched?"opacity-50":""}
                `,children:d.includes(O.id)||O.isMatched?O.value:""},O.id))}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("button",{onClick:b,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-all transform hover:scale-105",children:" "}),e.jsx("div",{className:"text-gray-300 text-sm",children:"    !"}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-all",children:""})]})]})})})},fb=({onComplete:r})=>{const{updateStats:i,updateMoney:d,gainExperience:o}=re(M=>M.actions),u=[{id:1,question:"   ?",options:["1850","1900","1925","1950"],correctAnswer:2,category:" "},{id:2,question:"  ?",options:["","","",""],correctAnswer:2,category:""},{id:3,question:"  ?",options:[" "," "," "," "],correctAnswer:2,category:""},{id:4,question:"    ?",options:["","","",""],correctAnswer:1,category:""},{id:5,question:"    ?",options:["","","",""],correctAnswer:0,category:""}],[m,g]=v.useState(0),[y,p]=v.useState(null),[x,S]=v.useState(0),[b,D]=v.useState(15),[O,C]=v.useState(!1),[z,j]=v.useState(!1);v.useEffect(()=>{if(b>0&&!z&&!O){const M=setTimeout(()=>D(b-1),1e3);return()=>clearTimeout(M)}else b===0&&!z&&N()},[b,z,O]);const N=()=>{j(!0),setTimeout(()=>T(),2e3)},w=M=>{if(!z){if(p(M),j(!0),M===u[m].correctAnswer){const Y=Math.max(50,100-(15-b)*5);S(x+Y)}setTimeout(()=>T(),2e3)}},T=()=>{m+1<u.length?(g(m+1),p(null),j(!1),D(15)):A()},A=()=>{C(!0);const M=Math.floor(x/20),Y=Math.floor(x/10),B=Math.floor(x/100);d(M),o(Y),B>0&&i({intelligence:B}),r(x)},k=M=>z?M===u[m].correctAnswer?"bg-green-500 text-white border-2 border-green-600":y===M&&M!==u[m].correctAnswer?"bg-red-500 text-white border-2 border-red-600":"bg-gray-200 text-gray-500 border-2 border-gray-300":"bg-white hover:bg-purple-50 border-2 border-purple-300 text-gray-800";return O?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-6",children:"  !"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-6xl mb-4",children:x>=400?"":x>=300?"":x>=200?"":""}),e.jsx("p",{className:"text-2xl font-bold mb-2",children:" "}),e.jsx("p",{className:"text-4xl font-bold text-purple-600 mb-6",children:x}),e.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:" :"}),e.jsxs("p",{className:"font-semibold",children:[" ",Math.floor(x/20)," "]}),e.jsxs("p",{className:"font-semibold",children:[" ",Math.floor(x/10)," "]}),Math.floor(x/100)>0&&e.jsxs("p",{className:"font-semibold",children:["  +",Math.floor(x/100)]})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-bold hover:shadow-lg transition",children:" "})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 max-w-2xl w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-600",children:[" ",m+1," / ",u.length]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-600",children:[": ",x]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${(m+1)/u.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("span",{className:"text-xs px-3 py-1 bg-purple-100 text-purple-700 rounded-full font-semibold",children:u[m].category}),e.jsxs("div",{className:`text-2xl font-bold ${b<=5?"text-red-500 animate-pulse":"text-gray-700"}`,children:[" ",b,""]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:u[m].question}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:u[m].options.map((M,Y)=>e.jsxs("button",{onClick:()=>w(Y),disabled:z,className:`
                  p-4 rounded-lg font-semibold text-left transition-all
                  ${k(Y)}
                  ${z?"":"hover:scale-102 active:scale-98"}
                `,children:[e.jsxs("span",{className:"mr-3",children:[String.fromCharCode(65+Y),"."]}),M,z&&Y===u[m].correctAnswer&&e.jsx("span",{className:"ml-2",children:""}),z&&y===Y&&Y!==u[m].correctAnswer&&e.jsx("span",{className:"ml-2",children:""})]},Y))})]}),z&&e.jsx("div",{className:`text-center font-bold text-lg ${y===u[m].correctAnswer?"text-green-600":"text-red-600"}`,children:y===u[m].correctAnswer?`! +${Math.max(50,100-(15-b)*5)} `:"!"})]})})},pb=()=>{re(P=>P.player);const{updateStats:r,addItem:i,updateAffection:d}=re(P=>P.actions),[o,u]=v.useState(null),[m,g]=v.useState("menu"),[y,p]=v.useState(0),[x,S]=v.useState(0),[b,D]=v.useState(0),[O,C]=v.useState(100),[z,j]=v.useState(0),[N,w]=v.useState(0),[T,A]=v.useState(0),[k,M]=v.useState(0),[Y,B]=v.useState([]),[ae,G]=v.useState(0),[le,E]=v.useState([]),U=v.useRef(null),R=v.useRef(),q=v.useRef(0),h=[{id:"sakura_theme",name:" ",artist:"",difficulty:3,bpm:128,duration:120,notes:H(120,128,3),perfectScore:1e4},{id:"yuki_theme",name:"  ",artist:"",difficulty:2,bpm:100,duration:90,notes:H(90,100,2),perfectScore:7500},{id:"luna_theme",name:" ",artist:"",difficulty:4,bpm:140,duration:150,notes:H(150,140,4),perfectScore:15e3},{id:"school_festival",name:" ",artist:"Various",difficulty:1,bpm:120,duration:60,notes:H(60,120,1),perfectScore:5e3}];function H(P,X,ne){const ce=[],oe=6e4/X,we=ne*.5;let he=0;for(let ze=2e3;ze<P*1e3;ze+=oe/we){const Qt=Math.floor(Math.random()*4),Dt=Math.random()<.1?"special":Math.random()<.2?"long":"normal";if(ce.push({id:he++,lane:Qt,time:ze,hit:!1,type:Dt}),ne>2&&Math.random()<(ne-2)*.1){const mt=(Qt+Math.floor(Math.random()*3)+1)%4;ce.push({id:he++,lane:mt,time:ze,hit:!1,type:"normal"})}}return ce}const J=v.useCallback(P=>{if(m!=="playing")return;const ne=["d","f","j","k"].indexOf(P.key.toLowerCase());if(ne===-1)return;const ce=150,oe=50,we=100,he=Y.filter(ze=>ze.lane===ne&&!ze.hit&&Math.abs(ze.time-ae)<ce);if(he.length>0){const ze=he.reduce((Ye,Xt)=>Math.abs(Xt.time-ae)<Math.abs(Ye.time-ae)?Xt:Ye),Qt=Math.abs(ze.time-ae);ze.hit=!0;let Dt="miss",mt=0;Qt<oe?(Dt="perfect",mt=100,j(Ye=>Ye+1)):Qt<we?(Dt="great",mt=75,w(Ye=>Ye+1)):(Dt="good",mt=50,A(Ye=>Ye+1)),ze.type==="special"&&(mt*=2);const Qs=Math.min(1+x*.01,2);mt=Math.floor(mt*Qs),p(Ye=>Ye+mt),S(Ye=>{const Xt=Ye+1;return D(Si=>Math.max(Si,Xt)),Xt}),E(Ye=>[...Ye,{id:ze.id,type:Dt,lane:ne}]),setTimeout(()=>{E(Ye=>Ye.filter(Xt=>Xt.id!==ze.id))},500)}},[Y,ae,x,m]),ie=v.useCallback(()=>{if(m!=="playing"||!o)return;const X=Date.now()-q.current;G(X);const ne=3e3,ce=o.notes.filter(he=>he.time>=X-200&&he.time<=X+ne);B(ce);const oe=ce.filter(he=>!he.hit&&he.time<X-150);oe.length>0&&(M(he=>he+oe.length),S(0),oe.forEach(he=>he.hit=!0));const we=z+N+T+k;if(we>0){const he=(z*100+N*75+T*50)/(we*100)*100;C(Math.round(he))}if(X>=o.duration*1e3){Z();return}R.current=requestAnimationFrame(ie)},[m,o,z,N,T,k]),L=P=>{u(P),g("playing"),p(0),S(0),D(0),C(100),j(0),w(0),A(0),M(0),B([]),G(0),q.current=Date.now(),P.notes.forEach(X=>X.hit=!1)},Z=()=>{if(g("results"),R.current&&cancelAnimationFrame(R.current),o&&y>0){const P=y/o.perfectScore;r({agility:Math.floor(P*5)}),O===100&&k===0&&(i("musicNote"),d(o.artist,10))}};return v.useEffect(()=>(m==="playing"&&(window.addEventListener("keydown",J),R.current=requestAnimationFrame(ie)),()=>{window.removeEventListener("keydown",J),R.current&&cancelAnimationFrame(R.current)}),[m,J,ie]),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-black p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-4 mb-4 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-pink-500 to-purple-500 bg-clip-text text-transparent",children:"  "}),m==="playing"&&e.jsxs("div",{className:"flex gap-6 text-white",children:[e.jsxs("div",{children:[": ",y]}),e.jsxs("div",{children:[": ",x,"x"]}),e.jsxs("div",{children:[": ",O,"%"]})]})]})}),m==="menu"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map(P=>e.jsxs("button",{onClick:()=>L(P),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg p-6 text-left transition-all hover:scale-[1.02]",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:P.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:["by ",P.artist]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-yellow-400",children:["".repeat(P.difficulty),"".repeat(5-P.difficulty)]}),e.jsxs("div",{className:"text-sm text-gray-300",children:[Math.floor(P.duration/60),":",(P.duration%60).toString().padStart(2,"0")]})]})]},P.id))}),e.jsxs("div",{className:"mt-8 bg-purple-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:""}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"D"}),e.jsx("div",{className:"text-xs",children:"Lane 1"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"F"}),e.jsx("div",{className:"text-xs",children:"Lane 2"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"J"}),e.jsx("div",{className:"text-xs",children:"Lane 3"})]}),e.jsxs("div",{className:"bg-purple-800 rounded p-2 text-white",children:[e.jsx("div",{className:"font-bold",children:"K"}),e.jsx("div",{className:"text-xs",children:"Lane 4"})]})]})]})]}),m==="playing"&&o&&e.jsxs("div",{className:"relative bg-black/70 backdrop-blur-md rounded-lg border border-purple-500 overflow-hidden",style:{height:"600px"},children:[e.jsxs("div",{className:"absolute inset-0",ref:U,children:[e.jsx("div",{className:"absolute inset-0 flex",children:[0,1,2,3].map(P=>e.jsxs("div",{className:"flex-1 border-x border-purple-500/30 relative",children:[e.jsx("div",{className:"absolute bottom-20 left-0 right-0 h-2 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-50"}),Y.filter(X=>X.lane===P&&!X.hit).map(X=>{const ce=(1-(X.time-ae)/3e3)*100;return e.jsx("div",{className:`absolute left-2 right-2 h-8 rounded transition-all ${X.type==="special"?"bg-yellow-500":X.type==="long"?"bg-blue-500":"bg-purple-500"}`,style:{top:`${ce}%`,transform:"translateY(-50%)"}},X.id)}),le.filter(X=>X.lane===P).map(X=>e.jsx("div",{className:"absolute bottom-20 left-1/2 -translate-x-1/2 animate-ping",children:e.jsx("div",{className:`text-2xl font-bold ${X.type==="perfect"?"text-yellow-400":X.type==="great"?"text-green-400":X.type==="good"?"text-blue-400":"text-red-400"}`,children:X.type==="perfect"?"PERFECT!":X.type==="great"?"GREAT!":X.type==="good"?"GOOD":"MISS"})},X.id)),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2",children:e.jsx("div",{className:"w-12 h-12 bg-purple-700 rounded-lg flex items-center justify-center text-white font-bold text-xl border-2 border-purple-400",children:["D","F","J","K"][P]})})]},P))}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-black/50",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500",style:{width:`${ae/(o.duration*1e3)*100}%`}})})]}),e.jsx("button",{onClick:()=>g("paused"),className:"absolute top-4 right-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg",children:" "})]}),m==="results"&&o&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-6 text-center",children:""}),e.jsxs("div",{className:"bg-purple-900/50 rounded-lg p-6 mb-6",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("div",{className:"text-6xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:y>=o.perfectScore*.95?"S":y>=o.perfectScore*.85?"A":y>=o.perfectScore*.75?"B":y>=o.perfectScore*.6?"C":y>=o.perfectScore*.4?"D":"F"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsx("div",{className:"text-2xl font-bold",children:y})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-2xl font-bold",children:[b,"x"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:""}),e.jsxs("div",{className:"text-2xl font-bold",children:[O,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Perfect/Great/Good/Miss"}),e.jsxs("div",{className:"text-lg font-bold",children:[z,"/",N,"/",T,"/",k]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>L(o),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:" "}),e.jsx("button",{onClick:()=>g("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:" "})]})]}),m==="paused"&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-purple-900 rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:""}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>g("playing"),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:""}),e.jsx("button",{onClick:()=>{g("menu"),R.current&&cancelAnimationFrame(R.current)},className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:""})]})]})})]})})},gb=()=>{const{updateStats:r,addItem:i,gainExperience:d,addGold:o}=re(R=>R.actions),[u,m]=v.useState(null),[g,y]=v.useState([]),[p,x]=v.useState(0),[S,b]=v.useState(0),[D,O]=v.useState("menu"),[C,z]=v.useState(null),[j,N]=v.useState(!1),[w,T]=v.useState(0),[A,k]=v.useState(0),M=[{id:"sakura_portrait",name:" ",image:"",gridSize:3,timeLimit:180,difficulty:1,rewards:{exp:50,money:30,item:"puzzlePiece"}},{id:"school_emblem",name:" ",image:"",gridSize:4,timeLimit:240,difficulty:2,rewards:{exp:100,money:50}},{id:"magical_artifact",name:" ",image:"",gridSize:5,timeLimit:300,difficulty:3,rewards:{exp:150,money:75,item:"magicGem"}},{id:"heroines_group",name:" ",image:"",gridSize:6,timeLimit:360,difficulty:4,rewards:{exp:200,money:100,item:"memoryAlbum"}}],Y=R=>{const q=R.gridSize*R.gridSize,h=[];for(let J=0;J<q;J++)h.push({id:J,currentPos:J,correctPos:J,isCorrect:!0});let H=[...h];for(let J=0;J<q*10;J++){const ie=H.findIndex(Z=>Z.id===q-1),L=B(ie,R.gridSize);if(L.length>0){const Z=L[Math.floor(Math.random()*L.length)];ae(H,ie,Z)}}H=H.map((J,ie)=>({...J,currentPos:ie,isCorrect:ie===J.correctPos})),y(H)},B=(R,q)=>{const h=[],H=Math.floor(R/q),J=R%q;return H>0&&h.push(R-q),H<q-1&&h.push(R+q),J>0&&h.push(R-1),J<q-1&&h.push(R+1),h},ae=(R,q,h)=>{const H=R[q];R[q]=R[h],R[h]=H},G=R=>{if(D!=="playing"||!u)return;const q=g.find(J=>J.id===u.gridSize*u.gridSize-1);if(!q)return;const h=q.currentPos;if(B(h,u.gridSize).includes(R)){const J=[...g],ie=J[R],L=J.findIndex(P=>P.id===q.id);J[R]=q,J[L]=ie;const Z=J.map((P,X)=>({...P,currentPos:X,isCorrect:P.correctPos===X}));y(Z),x(P=>P+1),Z.every(P=>P.isCorrect)&&E()}},le=R=>{m(R),O("playing"),x(0),b(R.timeLimit),T(0),N(!1),Y(R)},E=()=>{if(!u)return;O("completed");const R=Math.max(0,S*10),q=Math.max(0,(100-p)*5),h=w*50,H=Math.max(0,1e3+R+q-h);k(H),d(u.rewards.exp),o(u.rewards.money),u.rewards.item&&i(u.rewards.item),w===0&&p<u.gridSize*u.gridSize*3&&r({intelligence:2})};v.useEffect(()=>{if(D==="playing"&&S>0){const R=setTimeout(()=>{b(q=>q-1)},1e3);return()=>clearTimeout(R)}else D==="playing"&&S===0&&O("failed")},[D,S]);const U=(R,q)=>{if(!u)return null;const h=R.id===u.gridSize*u.gridSize-1,H=Math.floor(R.correctPos/u.gridSize),J=R.correctPos%u.gridSize,ie=(H*u.gridSize+J)*(360/(u.gridSize*u.gridSize));return e.jsx("button",{onClick:()=>G(q),className:`
          aspect-square rounded-lg transition-all duration-200
          ${h?"bg-gray-800 cursor-default":"hover:scale-105 cursor-pointer"}
          ${R.isCorrect&&!h?"ring-2 ring-green-500":""}
          ${j&&!R.isCorrect&&!h?"animate-pulse":""}
        `,style:{backgroundColor:h?void 0:`hsl(${ie}, 70%, 50%)`,opacity:h?.3:1},children:!h&&e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("span",{className:"text-2xl font-bold text-white drop-shadow-lg",children:R.id+1})})},R.id)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-4 mb-4 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"  "}),D==="playing"&&e.jsxs("div",{className:"flex gap-4 text-white",children:[e.jsxs("div",{children:[": ",p]}),e.jsxs("div",{children:[": ",Math.floor(S/60),":",(S%60).toString().padStart(2,"0")]}),e.jsxs("div",{children:[": ",w,"/3"]})]})]})}),D==="menu"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.map(R=>e.jsxs("button",{onClick:()=>le(R),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg p-6 text-left transition-all hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:R.image}),e.jsx("div",{className:"text-xl font-bold text-white",children:R.name}),e.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[R.gridSize,"x",R.gridSize," "]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-yellow-400",children:"".repeat(R.difficulty)}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Math.floor(R.timeLimit/60),""]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/20",children:e.jsxs("div",{className:"text-sm text-gray-300",children:[": ",R.rewards.exp," EXP, ",R.rewards.money," Gold",R.rewards.item&&`, ${R.rewards.item}`]})})]},R.id))}),e.jsxs("div",{className:"mt-8 bg-blue-900/50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:" "}),e.jsxs("ul",{className:"text-gray-300 space-y-1",children:[e.jsx("li",{children:"      "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"  3   ( )"})]})]})]}),D==="playing"&&u&&e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("div",{className:"grid gap-2 mb-6 mx-auto",style:{gridTemplateColumns:`repeat(${u.gridSize}, 1fr)`,maxWidth:`${u.gridSize*100}px`},children:g.map((R,q)=>U(R,q))}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{onClick:()=>{w<3&&(N(!0),T(R=>R+1),setTimeout(()=>N(!1),3e3))},disabled:w>=3,className:"px-6 py-3 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 text-white rounded-lg font-bold transition",children:["  (",3-w,"/3)"]}),e.jsx("button",{onClick:()=>Y(u),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition",children:" "}),e.jsx("button",{onClick:()=>O("menu"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:" "})]})]}),D==="completed"&&u&&e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:" !"}),e.jsxs("div",{className:"bg-purple-900/50 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"text-4xl font-bold text-yellow-400 mb-4",children:[": ",A]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsx("div",{className:"text-xl font-bold",children:p})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold",children:[Math.floor(S/60),":",(S%60).toString().padStart(2,"0")]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold",children:[w,"/3"]})]})]})]}),e.jsxs("div",{className:"bg-green-900/50 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"text-lg text-white",children:" "}),e.jsxs("div",{className:"text-sm text-gray-300 mt-2",children:[u.rewards.exp," EXP | ",u.rewards.money," Gold",u.rewards.item&&` | ${u.rewards.item}`]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>le(u),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:" "}),e.jsx("button",{onClick:()=>O("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:""})]})]})}),D==="failed"&&e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-8 border border-purple-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:" !"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"     ."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>u&&le(u),className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold",children:" "}),e.jsx("button",{onClick:()=>O("menu"),className:"flex-1 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold",children:""})]})]})})]})})},bb=()=>{const{player:r}=re(),[i,d]=v.useState(null),[o,u]=v.useState(!1),[m,g]=v.useState(null),[y,p]=v.useState([]),[x,S]=v.useState("ranked"),b=[{id:"opponent1",name:"Shadow Knight",level:15,hp:200,maxHp:200,mp:50,maxMp:50,attack:40,defense:30,speed:25,skills:["slash","shadowstrike"],ranking:1500,wins:45,losses:12,streak:5,avatar:""},{id:"opponent2",name:"Fire Mage",level:14,hp:150,maxHp:150,mp:100,maxMp:100,attack:50,defense:20,speed:30,skills:["fireball","meteor"],ranking:1450,wins:38,losses:15,streak:3,avatar:""},{id:"opponent3",name:"Holy Priest",level:16,hp:180,maxHp:180,mp:80,maxMp:80,attack:30,defense:40,speed:20,skills:["heal","holylight"],ranking:1600,wins:52,losses:8,streak:8,avatar:""},{id:"opponent4",name:"Assassin",level:13,hp:140,maxHp:140,mp:40,maxMp:40,attack:55,defense:15,speed:40,skills:["backstab","poisondagger"],ranking:1400,wins:30,losses:20,streak:1,avatar:""},{id:"opponent5",name:"Tank Warrior",level:17,hp:250,maxHp:250,mp:30,maxMp:30,attack:35,defense:50,speed:15,skills:["shieldbash","ironwall"],ranking:1550,wins:40,losses:10,streak:4,avatar:""}],D={slash:{name:"",damage:35,mpCost:5,description:" "},fireball:{name:"",damage:45,mpCost:10,description:" "},heal:{name:"",damage:-40,mpCost:15,description:"HP "},backstab:{name:"",damage:60,mpCost:8,description:" "},shieldbash:{name:" ",damage:25,mpCost:5,description:" "},shadowstrike:{name:" ",damage:50,mpCost:12,description:" "},meteor:{name:"",damage:70,mpCost:20,description:" "},holylight:{name:" ",damage:40,mpCost:10,description:" "},poisondagger:{name:"",damage:30,mpCost:6,description:" "},ironwall:{name:"",damage:0,mpCost:10,description:" "}};v.useEffect(()=>{const j=[...b].sort((N,w)=>w.ranking-N.ranking);p(j)},[]);const O=()=>{u(!0),setTimeout(()=>{const j=b[Math.floor(Math.random()*b.length)],N={id:"player",name:r.name,level:r.level||10,hp:100+(r.level||10)*10,maxHp:100+(r.level||10)*10,mp:50+(r.level||10)*5,maxMp:50+(r.level||10)*5,attack:20+(r.level||10)*2,defense:15+(r.level||10),speed:20+Math.floor((r.level||10)/2),skills:["slash","fireball","heal"],ranking:1200,wins:0,losses:0,streak:0,avatar:""};d({player:N,opponent:{...j},turn:N.speed>=j.speed?"player":"opponent",logs:[],status:"preparing"}),u(!1),setTimeout(()=>{d(w=>w?{...w,status:"battling"}:null)},2e3)},2e3)},C=j=>{if(!i||i.status!=="battling"||i.turn!=="player")return;const N=D[j];if(!N||N.mpCost>i.player.mp)return;let w=N.damage;w>0&&(w=Math.max(1,w+i.player.attack-i.opponent.defense));const T=w>0?Math.max(0,i.opponent.hp-w):i.opponent.hp,A=w<0?Math.min(i.player.maxHp,i.player.hp-w):i.player.hp,k={attacker:r.name,action:N.name,damage:Math.abs(w),effect:w<0?"heal":"damage",timestamp:Date.now()};if(d({...i,player:{...i.player,mp:i.player.mp-N.mpCost,hp:A},opponent:{...i.opponent,hp:T},turn:"opponent",logs:[...i.logs,k]}),T<=0){setTimeout(()=>{d(M=>M?{...M,status:"victory"}:null)},1e3);return}setTimeout(()=>{z()},1500)},z=()=>{if(!i||i.status!=="battling")return;const j=i.opponent.skills.filter(Y=>{const B=D[Y];return B&&B.mpCost<=i.opponent.mp});if(j.length===0)return;const N=j[Math.floor(Math.random()*j.length)],w=D[N];let T=w.damage;T>0&&(T=Math.max(1,T+i.opponent.attack-i.player.defense));const A=T>0?Math.max(0,i.player.hp-T):i.player.hp,k=T<0?Math.min(i.opponent.maxHp,i.opponent.hp-T):i.opponent.hp,M={attacker:i.opponent.name,action:w.name,damage:Math.abs(T),effect:T<0?"heal":"damage",timestamp:Date.now()};d({...i,opponent:{...i.opponent,mp:i.opponent.mp-w.mpCost,hp:k},player:{...i.player,hp:A},turn:"player",logs:[...i.logs,M]}),A<=0&&setTimeout(()=>{d(Y=>Y?{...Y,status:"defeat"}:null)},1e3)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-purple-800 to-blue-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:" PvP  "}),e.jsx("div",{className:"flex gap-2",children:["ranked","casual","tournament"].map(j=>e.jsx("button",{onClick:()=>S(j),className:`px-4 py-2 rounded-lg font-bold transition-all ${x===j?"bg-gradient-to-r from-red-500 to-orange-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:j==="ranked"?"":j==="casual"?"":""},j))})]})}),i?e.jsx(e.Fragment,{children:i.status==="preparing"?e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),e.jsx("div",{className:"text-3xl font-bold text-white mb-4",children:"VS"}),e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:i.player.avatar}),e.jsx("div",{className:"text-xl font-bold text-white",children:i.player.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",i.player.level]})]}),e.jsx("div",{className:"text-4xl text-yellow-400",children:"VS"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-4xl mb-2",children:i.opponent.avatar}),e.jsx("div",{className:"text-xl font-bold text-white",children:i.opponent.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",i.opponent.level]})]})]})]})}):i.status==="battling"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:`${i.turn==="player"?"ring-4 ring-green-400":""} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-3xl",children:i.player.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-bold",children:i.player.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",i.player.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"HP"}),e.jsxs("span",{children:[i.player.hp,"/",i.player.maxHp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-400 h-full transition-all",style:{width:`${i.player.hp/i.player.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"MP"}),e.jsxs("span",{children:[i.player.mp,"/",i.player.maxMp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-full transition-all",style:{width:`${i.player.mp/i.player.maxMp*100}%`}})})]})]})]}),e.jsxs("div",{className:`${i.turn==="opponent"?"ring-4 ring-red-400":""} rounded-xl p-4`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-3xl",children:i.opponent.avatar}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-bold",children:i.opponent.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",i.opponent.level]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"HP"}),e.jsxs("span",{children:[i.opponent.hp,"/",i.opponent.maxHp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-400 h-full transition-all",style:{width:`${i.opponent.hp/i.opponent.maxHp*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white mb-1",children:[e.jsx("span",{children:"MP"}),e.jsxs("span",{children:[i.opponent.mp,"/",i.opponent.maxMp]})]}),e.jsx("div",{className:"bg-gray-700 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 h-full transition-all",style:{width:`${i.opponent.mp/i.opponent.maxMp*100}%`}})})]})]})]})]}),i.turn==="player"&&e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:" !"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:i.player.skills.map(j=>{const N=D[j],w=N&&N.mpCost<=i.player.mp;return e.jsxs("button",{onClick:()=>w&&C(j),disabled:!w,className:`p-3 rounded-lg font-bold transition-all ${w?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("div",{children:N?.name}),e.jsxs("div",{className:"text-xs",children:["MP: ",N?.mpCost]})]},j)})})]}),i.turn==="opponent"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("div",{className:"text-white/70",children:" ..."})})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:" "}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:i.logs.slice(-5).map((j,N)=>e.jsxs("div",{className:"text-sm text-white/80",children:[e.jsx("span",{className:"font-bold",children:j.attacker}),"",e.jsxs("span",{className:"text-yellow-400",children:[" ",j.action]}),"!",j.effect==="damage"&&e.jsxs("span",{className:"text-red-400",children:[" -",j.damage," "]}),j.effect==="heal"&&e.jsxs("span",{className:"text-green-400",children:[" +",j.damage," "]})]},N))})]})]}):e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:i.status==="victory"?"":""}),e.jsx("div",{className:"text-4xl font-bold text-white mb-4",children:i.status==="victory"?"VICTORY!":"DEFEAT"}),e.jsx("div",{className:"text-white/70 mb-6",children:i.status==="victory"?`${i.opponent.name}() !`:`${i.opponent.name} ...`}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"text-white font-bold mb-2",children:" "}),e.jsx("div",{className:"space-y-1 text-white/80",children:i.status==="victory"?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"  : +25 RP"}),e.jsx("div",{children:" : +100 G"}),e.jsx("div",{children:" : +50 EXP"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"  : -10 RP"}),e.jsx("div",{children:" : +25 G"}),e.jsx("div",{children:" : +10 EXP"})]})})]}),e.jsx("button",{onClick:()=>d(null),className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-bold hover:scale-105 transition-all",children:" "})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8 mb-6",children:e.jsx("div",{className:"text-center",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:""}),e.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:" ..."}),e.jsx("div",{className:"text-white/70",children:"  "})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("div",{className:"text-2xl font-bold text-white mb-4",children:"  !"}),e.jsx("button",{onClick:O,className:"bg-gradient-to-r from-red-500 to-orange-500 text-white px-8 py-4 rounded-xl text-xl font-bold hover:scale-105 transition-all",children:" "}),e.jsxs("div",{className:"mt-4 text-white/70",children:[" : #",r.pvpRanking||1e3," | : ",r.pvpWins||0,"W ",r.pvpLosses||0,"L"]})]})})}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:y.map((j,N)=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:N===0?"":N===1?"":N===2?"":`#${N+1}`}),e.jsx("div",{className:"text-2xl",children:j.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:j.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Lv.",j.level]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-white font-bold",children:[j.ranking," RP"]}),e.jsxs("div",{className:"text-sm text-white/70",children:[j.wins,"W ",j.losses,"L"]}),j.streak>0&&e.jsxs("div",{className:"text-sm text-orange-400",children:[" ",j.streak," "]})]})]},j.id))})]})]})]})})},yb=()=>{const{player:r}=re(),[i,d]=v.useState("friends"),[o,u]=v.useState([]),[m,g]=v.useState([]),[y,p]=v.useState(null),[x,S]=v.useState([]),[b,D]=v.useState(""),[O,C]=v.useState(""),[z,j]=v.useState(!1),N=[{id:"flower",name:"",icon:"",friendshipPoints:10,cost:50},{id:"chocolate",name:"",icon:"",friendshipPoints:15,cost:75},{id:"gem",name:"",icon:"",friendshipPoints:30,cost:150},{id:"letter",name:"",icon:"",friendshipPoints:20,cost:100},{id:"trophy",name:"",icon:"",friendshipPoints:50,cost:300}],w=[{id:"1",name:"Luna",level:15,status:"online",lastSeen:new Date,friendshipLevel:85,avatar:"",mutualGuilds:["Starlight"],achievements:24,message:"   ~"},{id:"2",name:"Phoenix",level:22,status:"busy",lastSeen:new Date,friendshipLevel:70,avatar:"",mutualGuilds:["Blaze","Starlight"],achievements:45,message:" "},{id:"3",name:"Crystal",level:18,status:"offline",lastSeen:new Date(Date.now()-36e5),friendshipLevel:60,avatar:"",mutualGuilds:[],achievements:31},{id:"4",name:"Shadow",level:25,status:"away",lastSeen:new Date,friendshipLevel:45,avatar:"",mutualGuilds:["DarkKnights"],achievements:67,message:"AFK"},{id:"5",name:"Aurora",level:20,status:"online",lastSeen:new Date,friendshipLevel:92,avatar:"",mutualGuilds:["Starlight"],achievements:38,message:"  "}],T=[{id:"6",name:"Blade",level:30,status:"online",lastSeen:new Date,friendshipLevel:0,avatar:"",mutualGuilds:[],achievements:89},{id:"7",name:"Rose",level:16,status:"online",lastSeen:new Date,friendshipLevel:0,avatar:"",mutualGuilds:[],achievements:22}];v.useEffect(()=>{u(w.slice(0,3)),g(w.slice(3,4))},[]);const A=()=>{if(!b.trim()||!y)return;const G={id:Date.now().toString(),sender:r.name,content:b,timestamp:new Date,type:"text"};S([...x,G]),D("")},k=G=>{if(!y)return;const le={id:Date.now().toString(),sender:r.name,content:`${G.icon} ${G.name}() !`,timestamp:new Date,type:"gift"};S([...x,le]),u(o.map(E=>E.id===y.id?{...E,friendshipLevel:Math.min(100,E.friendshipLevel+G.friendshipPoints/5)}:E)),j(!1)},M=G=>{u([...o,G]),g(m.filter(le=>le.id!==G.id))},Y=G=>{alert(`${G.name}   !`)},B=G=>{switch(G){case"online":return"bg-green-500";case"busy":return"bg-red-500";case"away":return"bg-yellow-500";default:return"bg-gray-500"}},ae=G=>G>=90?"":G>=70?" ":G>=50?"":G>=30?" ":" ";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"  "}),e.jsx("div",{className:"flex gap-2 mt-4",children:["friends","chat","search","requests"].map(G=>e.jsxs("button",{onClick:()=>d(G),className:`px-4 py-2 rounded-lg font-bold transition-all ${i===G?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[G==="friends"&&" ",G==="chat"&&"",G==="search"&&" ",G==="requests"&&`  ${m.length>0?`(${m.length})`:""}`]},G))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[i==="friends"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:["  (",o.length,")"]}),e.jsx("div",{className:"space-y-2",children:o.map(G=>e.jsx("div",{onClick:()=>p(G),className:`bg-white/10 rounded-lg p-3 cursor-pointer hover:bg-white/20 transition-all ${y?.id===G.id?"ring-2 ring-pink-500":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-2xl",children:G.avatar}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 ${B(G.status)} rounded-full border-2 border-black`})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:G.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",G.level]}),G.message&&e.jsx("div",{className:"text-xs text-white/50 italic",children:G.message})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-white/70",children:ae(G.friendshipLevel)}),e.jsx("div",{className:"w-16 bg-gray-700 rounded-full h-1 mt-1",children:e.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-full rounded-full",style:{width:`${G.friendshipLevel}%`}})})]})]})},G.id))})]}),i==="search"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("input",{type:"text",value:O,onChange:G=>C(G.target.value),placeholder:"  ...",className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 mb-4"}),e.jsx("div",{className:"space-y-2",children:T.filter(G=>G.name.toLowerCase().includes(O.toLowerCase())).map(G=>e.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:G.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:G.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",G.level,"  ",G.achievements," "]})]})]}),e.jsx("button",{onClick:()=>Y(G),className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-3 py-1 rounded text-sm font-bold hover:scale-105 transition-all",children:" "})]})},G.id))})]}),i==="requests"&&e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),m.length>0?e.jsx("div",{className:"space-y-2",children:m.map(G=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:G.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:G.name}),e.jsxs("div",{className:"text-xs text-white/70",children:["Lv.",G.level]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M(G),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white py-1 rounded text-sm font-bold",children:""}),e.jsx("button",{onClick:()=>g(m.filter(le=>le.id!==G.id)),className:"flex-1 bg-red-500/20 text-red-400 py-1 rounded text-sm font-bold",children:""})]})]},G.id))}):e.jsx("div",{className:"text-center text-white/50 py-8",children:"   "})]})]}),e.jsx("div",{className:"lg:col-span-2",children:(i==="friends"||i==="chat")&&y?e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4 h-[600px] flex flex-col",children:[e.jsx("div",{className:"bg-white/10 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-4xl",children:y.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-white",children:y.name}),e.jsxs("div",{className:"text-white/70",children:["Lv.",y.level,"  ",ae(y.friendshipLevel)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:`w-2 h-2 ${B(y.status)} rounded-full`}),e.jsx("span",{className:"text-sm text-white/50",children:y.status})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(!0),className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 py-2 rounded-lg font-bold hover:scale-105 transition-all",children:" "}),e.jsx("button",{className:"bg-white/10 text-white px-4 py-2 rounded-lg font-bold hover:bg-white/20 transition-all",children:" "})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto mb-4 space-y-2",children:x.map(G=>e.jsx("div",{className:`flex ${G.sender===r.name?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-lg ${G.sender===r.name?"bg-gradient-to-r from-purple-500 to-pink-500 text-white":"bg-white/10 text-white"}`,children:[G.type==="gift"&&e.jsx("div",{className:"text-2xl mb-1 text-center",children:""}),e.jsx("div",{className:"text-sm",children:G.content}),e.jsx("div",{className:"text-xs opacity-70 mt-1",children:new Date(G.timestamp).toLocaleTimeString()})]})},G.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:G=>D(G.target.value),onKeyPress:G=>G.key==="Enter"&&A(),placeholder:" ...",className:"flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50"}),e.jsx("button",{onClick:A,className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-2 rounded-lg font-bold hover:scale-105 transition-all",children:""})]})]}):e.jsx("div",{className:"bg-black/30 backdrop-blur rounded-xl p-8",children:e.jsxs("div",{className:"text-center text-white/50",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("div",{className:"text-xl",children:"   "})]})})})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:N.map(G=>e.jsxs("button",{onClick:()=>k(G),className:"bg-white/10 rounded-lg p-4 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-3xl mb-2",children:G.icon}),e.jsx("div",{className:"text-sm text-white font-bold",children:G.name}),e.jsxs("div",{className:"text-xs text-white/70",children:[G.cost," G"]}),e.jsxs("div",{className:"text-xs text-green-400",children:["+",G.friendshipPoints," "]})]},G.id))}),e.jsx("button",{onClick:()=>j(!1),className:"w-full mt-4 bg-white/10 text-white py-2 rounded-lg font-bold hover:bg-white/20 transition-all",children:""})]})})]})})},vb=()=>{const{player:r}=re(),[i,d]=v.useState(null),[o,u]=v.useState([]),[m,g]=v.useState(!1),[y,p]=v.useState(null),x=[{id:"1",name:" ",type:"weapon",icon:"",level:0,maxLevel:15,rarity:"common",baseStats:{attack:10},enhancedStats:{attack:10},enhancementCost:100,successRate:95},{id:"2",name:" ",type:"armor",icon:"",level:3,maxLevel:15,rarity:"rare",baseStats:{defense:15,hp:50},enhancedStats:{defense:20,hp:65},enhancementCost:200,successRate:80},{id:"3",name:" ",type:"accessory",icon:"",level:5,maxLevel:20,rarity:"epic",baseStats:{mp:30,speed:5},enhancedStats:{mp:45,speed:8},enhancementCost:500,successRate:65},{id:"4",name:" ",type:"weapon",icon:"",level:7,maxLevel:25,rarity:"legendary",baseStats:{attack:50,speed:10},enhancedStats:{attack:85,speed:17},enhancementCost:1e3,successRate:45},{id:"5",name:" ",type:"accessory",icon:"",level:1,maxLevel:15,rarity:"rare",baseStats:{hp:30,mp:20},enhancedStats:{hp:35,mp:23},enhancementCost:150,successRate:88}],S=[{id:"blessing",name:" ",icon:"",successBonus:10,protectItem:!1,quantity:5},{id:"protection",name:" ",icon:"",successBonus:0,protectItem:!0,quantity:3},{id:"lucky",name:" ",icon:"",successBonus:20,protectItem:!1,quantity:2},{id:"master",name:" ",icon:"",successBonus:30,protectItem:!0,quantity:1}],b=()=>{if(!i)return 0;let j=i.successRate-i.level*5;j=Math.max(10,j);const N=o.reduce((w,T)=>w+T.successBonus,0);return Math.min(100,j+N)},D=()=>i?i.enhancementCost*(i.level+1):0,O=()=>{!i||m||(g(!0),p(null),setTimeout(()=>{const j=b();if(Math.random()*100<j){const T=i.level+1,A=Math.floor(T/3+1);d({...i,level:T,enhancedStats:{attack:i.baseStats.attack?i.baseStats.attack+A*3:void 0,defense:i.baseStats.defense?i.baseStats.defense+A*2:void 0,hp:i.baseStats.hp?i.baseStats.hp+A*10:void 0,mp:i.baseStats.mp?i.baseStats.mp+A*5:void 0,speed:i.baseStats.speed?i.baseStats.speed+A:void 0}}),p({success:!0,newLevel:T})}else{const T=o.some(A=>A.protectItem);!T&&i.level>=10?(p({success:!1,destroyed:!0}),d(null)):!T&&i.level>=5?(d({...i,level:Math.max(0,i.level-1)}),p({success:!1,newLevel:Math.max(0,i.level-1)})):p({success:!1})}g(!1),u([])},2e3))},C=j=>{switch(j){case"legendary":return"from-yellow-500 to-orange-500";case"epic":return"from-purple-500 to-pink-500";case"rare":return"from-blue-500 to-cyan-500";default:return"from-gray-500 to-gray-600"}},z=j=>{switch(j){case"legendary":return"text-yellow-400";case"epic":return"text-purple-400";case"rare":return"text-blue-400";default:return"text-gray-400"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-800 to-pink-900 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-6 mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"  "}),e.jsx("div",{className:"mt-2 text-white/70",children:"    !      ."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:x.map(j=>e.jsx("button",{onClick:()=>d(j),className:`w-full bg-white/10 rounded-lg p-3 hover:bg-white/20 transition-all text-left ${i?.id===j.id?"ring-2 ring-yellow-400":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:j.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:`font-bold ${z(j.rarity)}`,children:[j.name," ",j.level>0&&`+${j.level}`]}),e.jsx("div",{className:"text-xs text-white/60",children:j.type==="weapon"?"":j.type==="armor"?"":""})]})]}),j.level===j.maxLevel&&e.jsx("div",{className:"text-xs text-yellow-400 font-bold",children:"MAX"})]})},j.id))})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),i?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`bg-gradient-to-r ${C(i.rarity)} p-4 rounded-lg`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:i.icon}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[i.name," +",i.level]}),e.jsxs("div",{className:"text-white/80",children:[i.level," / ",i.maxLevel]})]})}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:" "}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(i.enhancedStats).map(([j,N])=>N&&e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:j==="attack"?"":j==="defense"?"":j.toUpperCase()}),e.jsxs("span",{className:"text-green-400",children:["+",N]})]},j))})]}),i.level<i.maxLevel&&e.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[e.jsxs("div",{className:"text-sm font-bold text-white mb-2",children:["  (+",i.level+1,")"]}),e.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(i.enhancedStats).map(([j,N])=>{if(!N)return null;const w=Math.floor((i.level+1)/3+1)*(j==="attack"?3:j==="defense"?2:j==="hp"?10:j==="mp"?5:1);return e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:j==="attack"?"":j==="defense"?"":j.toUpperCase()}),e.jsxs("span",{className:"text-yellow-400",children:["+",N+w-N," ( ",N+w-N,")"]})]},j)})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:" "}),e.jsxs("span",{className:`font-bold ${b()>=70?"text-green-400":b()>=40?"text-yellow-400":"text-red-400"}`,children:[b(),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:" "}),e.jsxs("span",{className:"text-yellow-400",children:[D()," G"]})]}),i.level>=5&&e.jsxs("div",{className:"text-xs text-red-400",children:["   ",i.level>=10?"   ":"    "]})]})]}):e.jsx("div",{className:"text-center text-white/50 py-8",children:"  "})]}),e.jsxs("div",{className:"bg-black/30 backdrop-blur rounded-xl p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2 mb-4",children:S.map(j=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:j.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-sm",children:j.name}),e.jsxs("div",{className:"text-xs text-white/60",children:[j.successBonus>0&&` +${j.successBonus}%`,j.protectItem&&" "]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white/70 text-sm",children:["x",j.quantity]}),j.quantity>0&&e.jsx("button",{onClick:()=>{o.find(N=>N.id===j.id)?u(o.filter(N=>N.id!==j.id)):u([...o,j])},className:`px-2 py-1 rounded text-xs font-bold transition-all ${o.find(N=>N.id===j.id)?"bg-green-500 text-white":"bg-white/20 text-white/70 hover:bg-white/30"}`,children:o.find(N=>N.id===j.id)?"":""})]})]},j.id))}),o.length>0&&e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:" "}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:o.map(j=>e.jsxs("div",{className:"bg-white/20 rounded px-2 py-1 text-xs text-white flex items-center gap-1",children:[e.jsx("span",{children:j.icon}),e.jsx("span",{children:j.name})]},j.id))})]}),i&&i.level<i.maxLevel&&e.jsx("button",{onClick:O,disabled:m||(r.gold||0)<D(),className:`w-full py-4 rounded-lg font-bold text-lg transition-all ${m?"bg-gray-600 text-gray-400 cursor-not-allowed":(r.gold||0)<D()?"bg-red-600/50 text-red-300 cursor-not-allowed":"bg-gradient-to-r from-yellow-500 to-orange-500 text-white hover:scale-105"}`,children:m?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin",children:""})," ..."]}):(r.gold||0)<D()?" ":" "}),y&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg text-center ${y.success?"bg-green-500/20":"bg-red-500/20"}`,children:[e.jsx("div",{className:"text-3xl mb-2",children:y.success?"":y.destroyed?"":""}),e.jsx("div",{className:"text-white font-bold",children:y.success?` ! (+${y.newLevel})`:y.destroyed?" ...":y.newLevel!==void 0?` ... (+${y.newLevel})`:" "})]})]})]})]})})},jb="http://localhost:9000";class Nb{constructor(i=jb){this.baseUrl=i}async healthCheck(){try{return await(await fetch(`${this.baseUrl}/health`)).json()}catch(i){throw console.error("Health check failed:",i),i}}async testApi(){try{return await(await fetch(`${this.baseUrl}/api/test`)).json()}catch(i){throw console.error("API test failed:",i),i}}async login(i,d){try{return await(await fetch(`${this.baseUrl}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:d})})).json()}catch(o){throw console.error("Login failed:",o),o}}async register(i,d,o){try{return await(await fetch(`${this.baseUrl}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,username:d,password:o})})).json()}catch(u){throw console.error("Registration failed:",u),u}}async saveGame(i){try{return await(await fetch(`${this.baseUrl}/api/game/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`},body:JSON.stringify(i)})).json()}catch(d){throw console.error("Save game failed:",d),d}}async loadGame(){try{return await(await fetch(`${this.baseUrl}/api/game/load`,{headers:{Authorization:`Bearer ${this.getToken()}`}})).json()}catch(i){throw console.error("Load game failed:",i),i}}getToken(){return localStorage.getItem("authToken")}setToken(i){localStorage.setItem("authToken",i)}removeToken(){localStorage.removeItem("authToken")}}const Wc=new Nb,wb=()=>{const[r,i]=v.useState(null),[d,o]=v.useState(null),[u,m]=v.useState(!1),[g,y]=v.useState(null);v.useEffect(()=>{p()},[]);const p=async()=>{m(!0),y(null);try{const b=await Wc.healthCheck();i(b)}catch(b){y("  : "+b.message)}finally{m(!1)}},x=async()=>{m(!0),y(null);try{const b=await Wc.testApi();o(b)}catch(b){y("API  : "+b.message)}finally{m(!1)}},S=async()=>{m(!0),y(null);try{const b=await Wc.login("demo@academy-dating-sim.com","demo123");console.log("Login result:",b),alert("    ")}catch(b){y("  : "+b.message)}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-black/30 backdrop-blur-md rounded-xl p-8 border border-white/20",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-8 text-center",children:"  API  "}),g&&e.jsxs("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6 text-red-200",children:[e.jsx("strong",{children:":"})," ",g]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:" Health Check"}),e.jsx("button",{onClick:p,disabled:u,className:"w-full mb-4 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?" ...":"  "}),r&&e.jsx("div",{className:"bg-black/50 rounded p-3 text-sm",children:e.jsx("pre",{className:"text-green-300 whitespace-pre-wrap",children:JSON.stringify(r,null,2)})})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:" API "}),e.jsx("button",{onClick:x,disabled:u,className:"w-full mb-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?" ...":"API  "}),d&&e.jsx("div",{className:"bg-black/50 rounded p-3 text-sm",children:e.jsx("pre",{className:"text-blue-300 whitespace-pre-wrap",children:JSON.stringify(d,null,2)})})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"  "}),e.jsx("button",{onClick:S,disabled:u,className:"w-full mb-4 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white rounded-lg transition-all",children:u?" ...":"  (demo )"}),e.jsx("p",{className:"text-gray-300 text-xs",children:" : demo@academy-dating-sim.com / demo123"})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"  "}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:":"}),e.jsx("span",{className:"text-green-400",children:" http://localhost:5173"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:":"}),e.jsxs("span",{className:r?"text-green-400":"text-red-400",children:[r?"":""," http://localhost:3001"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:":"}),e.jsx("span",{className:"text-green-400",children:" Supabase PostgreSQL"})]})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-all",children:" "})})]})})})},kb=[{id:"kendo",name:"",description:"    ",leader:"sakura",members:["sakura","npc_kendo_1","npc_kendo_2"],maxMembers:20,requirements:{stats:{strength:15,stamina:10},level:5},schedule:{monday:{time:"afternoon",activity:"training"},wednesday:{time:"afternoon",activity:"training"},friday:{time:"afternoon",activity:"sparring"},saturday:{time:"morning",activity:"tournament"}},benefits:{daily:{stats:{strength:1,stamina:1},exp:50},weekly:{items:["training_sword"],money:500},rank:{beginner:{title:"",bonus:{strength:5}},intermediate:{title:"",bonus:{strength:10,stamina:5}},advanced:{title:"",bonus:{strength:15,stamina:10,agility:5}},master:{title:"",bonus:{strength:25,stamina:15,agility:10}}}},activities:[{id:"daily_training",name:" ",description:"  ",rewards:{exp:30,stats:{strength:1}}},{id:"sparring_match",name:"",description:"  ",rewards:{exp:50,stats:{strength:2,agility:1}}},{id:"tournament",name:"",description:"  ",rewards:{exp:100,money:1e3,item:"trophy"}}],events:[{id:"kendo_festival",name:" ",description:"  ",date:{month:6,day:15},rewards:{affinity:{sakura:20},item:"special_sword"}}],reputation:0,level:1,exp:0},{id:"library",name:"",description:"   ",leader:"yuki",members:["yuki","npc_library_1","npc_library_2"],maxMembers:15,requirements:{stats:{intelligence:20},level:3},schedule:{tuesday:{time:"afternoon",activity:"reading"},thursday:{time:"afternoon",activity:"discussion"},saturday:{time:"noon",activity:"book_club"}},benefits:{daily:{stats:{intelligence:2},exp:40},weekly:{items:["rare_book"],money:300},rank:{member:{title:"",bonus:{intelligence:5}},librarian:{title:"",bonus:{intelligence:10,exp_gain:10}},scholar:{title:"",bonus:{intelligence:20,exp_gain:20}},sage:{title:"",bonus:{intelligence:30,all_stats:5}}}},activities:[{id:"quiet_reading",name:" ",description:"  ",rewards:{exp:25,stats:{intelligence:1}}},{id:"book_discussion",name:" ",description:"  ",rewards:{exp:40,stats:{intelligence:2,charm:1}}},{id:"write_review",name:" ",description:"   ",rewards:{exp:60,money:200}}],events:[{id:"book_fair",name:" ",description:"  ",date:{month:9,day:20},rewards:{affinity:{yuki:15},item:"ancient_tome"}}],reputation:0,level:1,exp:0},{id:"magic",name:" ",description:"   ",leader:"luna",members:["luna","npc_magic_1","npc_magic_2","npc_magic_3"],maxMembers:12,requirements:{stats:{intelligence:25,luck:10},level:10},schedule:{monday:{time:"evening",activity:"theory"},wednesday:{time:"evening",activity:"practice"},friday:{time:"night",activity:"ritual"}},benefits:{daily:{stats:{intelligence:1,luck:1},mp:5,exp:60},weekly:{items:["mana_potion","spell_scroll"],money:800},rank:{apprentice:{title:" ",bonus:{mp:10,intelligence:5}},adept:{title:" ",bonus:{mp:20,intelligence:10,luck:5}},wizard:{title:"",bonus:{mp:40,intelligence:20,luck:10}},archmage:{title:"",bonus:{mp:60,all_stats:10}}}},activities:[{id:"spell_practice",name:" ",description:"  ",rewards:{exp:40,mp:5}},{id:"enchantment",name:" ",description:"  ",rewards:{exp:70,item:"enchanted_item"}},{id:"summoning",name:"",description:"  ",rewards:{exp:100,stats:{luck:2}}}],reputation:0,level:1,exp:0},{id:"track",name:"",description:"    ",leader:"rin",members:["rin","npc_track_1","npc_track_2"],maxMembers:25,requirements:{stats:{stamina:20,agility:15},level:5},schedule:{daily:{time:"morning",activity:"morning_run"},weekend:{time:"afternoon",activity:"competition"}},benefits:{daily:{stats:{stamina:2,agility:1},exp:45},weekly:{items:["energy_drink","running_shoes"],money:400}},activities:[{id:"morning_jog",name:" ",description:"  ",rewards:{exp:30,stats:{stamina:2}}},{id:"sprint_training",name:" ",description:"  ",rewards:{exp:50,stats:{agility:2,stamina:1}}}],reputation:0,level:1,exp:0},{id:"art",name:"",description:"   ",leader:"mei",members:["mei","npc_art_1","npc_art_2"],maxMembers:18,requirements:{stats:{charm:15},level:4},schedule:{tuesday:{time:"afternoon",activity:"sketching"},thursday:{time:"afternoon",activity:"painting"},sunday:{time:"noon",activity:"exhibition"}},benefits:{daily:{stats:{charm:2},exp:35},weekly:{items:["art_supplies","canvas"],money:600}},activities:[{id:"sketching",name:"",description:"  ",rewards:{exp:30,stats:{charm:1}}},{id:"painting",name:" ",description:"  ",rewards:{exp:50,item:"painting",money:300}}],reputation:0,level:1,exp:0},{id:"cooking",name:"",description:"   ",leader:"hana",members:["hana","npc_cooking_1","npc_cooking_2"],maxMembers:20,requirements:{stats:{stamina:10},level:2},schedule:{monday:{time:"noon",activity:"basic_cooking"},wednesday:{time:"noon",activity:"baking"},friday:{time:"noon",activity:"special_menu"}},benefits:{daily:{stats:{stamina:1,charm:1},exp:30,items:["lunch_box"]},weekly:{items:["special_recipe","ingredients"],money:350}},activities:[{id:"cooking_practice",name:" ",description:"  ",rewards:{exp:25,item:"homemade_meal"}},{id:"bake_dessert",name:" ",description:"  ",rewards:{exp:40,item:"dessert",affinity_all:2}}],reputation:0,level:1,exp:0},{id:"science",name:"",description:"    ",leader:"sora",members:["sora","npc_science_1","npc_science_2"],maxMembers:16,requirements:{stats:{intelligence:30},level:8},schedule:{tuesday:{time:"evening",activity:"experiment"},thursday:{time:"evening",activity:"research"},saturday:{time:"afternoon",activity:"invention"}},benefits:{daily:{stats:{intelligence:3},exp:55},weekly:{items:["research_notes","invention"],money:1e3}},activities:[{id:"experiment",name:"",description:"  ",rewards:{exp:45,stats:{intelligence:2}}},{id:"invention",name:"",description:"  ",rewards:{exp:80,item:"invention",money:500}}],reputation:0,level:1,exp:0},{id:"student_council",name:"",description:"   ",leader:"akane",members:["akane","npc_council_1","npc_council_2","npc_council_3"],maxMembers:10,requirements:{stats:{intelligence:25,charm:20},level:15,reputation:500},schedule:{daily:{time:"afternoon",activity:"meeting"},friday:{time:"evening",activity:"event_planning"}},benefits:{daily:{stats:{charm:2,intelligence:1},exp:70,reputation:5},weekly:{money:1500,items:["council_badge"]},rank:{member:{title:" ",bonus:{charm:5,reputation_gain:10}},secretary:{title:"",bonus:{charm:10,intelligence:5,reputation_gain:20}},vice_president:{title:"",bonus:{all_stats:10,reputation_gain:30}},president:{title:"",bonus:{all_stats:20,reputation_gain:50}}}},activities:[{id:"council_meeting",name:"",description:"  ",rewards:{exp:50,reputation:10}},{id:"event_organization",name:" ",description:"  ",rewards:{exp:100,reputation:20,money:500}}],reputation:0,level:1,exp:0},{id:"occult",name:" ",description:"     ",leader:"mystery",members:["mystery","npc_occult_1"],maxMembers:7,requirements:{stats:{intelligence:20,luck:20},level:20,flags:["discovered_secret"],affinity:{mystery:50}},secret:!0,schedule:{midnight:{time:"night",activity:"ritual"}},benefits:{daily:{stats:{luck:3,intelligence:2},exp:100},weekly:{items:["mysterious_artifact","forbidden_knowledge"],money:2e3}},activities:[{id:"sance",name:"",description:" ",rewards:{exp:100,stats:{luck:5}}},{id:"dimension_research",name:" ",description:"  ",rewards:{exp:200,unlock:"special_ending"}}],reputation:0,level:1,exp:0}],Sb={clubs:kb},Vl=Sb.clubs,Ex=qa,Cb=()=>{const r=ke(),i=re(N=>N.player),{updateStats:d,updatePlayer:o,addItem:u,updateMoney:m}=re(N=>N.actions),[g,y]=v.useState(null),[p,x]=v.useState(i.currentClub||null),[S,b]=v.useState({}),D=N=>{if(p||N.requirements.level&&i.level<N.requirements.level)return!1;if(N.requirements.stats){for(const[w,T]of Object.entries(N.requirements.stats))if(i.stats[w]<T)return!1}return!0},O=N=>{const w=Vl.find(T=>T.id===N);!w||!D(w)||(x(N),o({currentClub:N,clubJoinDate:i.day}),alert(`${w.name} !`))},C=()=>{p&&confirm("  ?")&&(x(null),o({currentClub:null,clubJoinDate:null}),alert(" ."))},z=(N,w)=>{const T=Vl.find(M=>M.id===N),A=T?.activities.find(M=>M.id===w);if(!T||!A)return;const k=`${N}_${w}_${i.day}`;if(S[k]){alert("    !");return}A.rewards.exp&&o({experience:i.experience+A.rewards.exp}),A.rewards.stats&&d(A.rewards.stats),A.rewards.money&&m(A.rewards.money),A.rewards.item&&u(A.rewards.item),b(M=>({...M,[k]:!0})),alert(`${A.name}  !`)},j=N=>{const w=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],T=(i.day-1)%7,A=w[T],k=N.schedule[A];return k?`${k.time} ${k.activity}`:null};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 to-indigo-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"    !"}),p&&e.jsxs("div",{className:"mt-2 badge badge-primary",children:[" : ",Vl.find(N=>N.id===p)?.name]})]}),e.jsx("button",{onClick:()=>r("/game"),className:"btn-ghost px-6 py-3 rounded-xl font-semibold",children:""})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:" "}),Vl.map(N=>{const w=p===N.id,T=D(N),A=Ex[N.leader];return e.jsxs("div",{className:`glass-card p-6 cursor-pointer transition-all duration-300 ${g===N.id?"ring-2 ring-primary":""} ${w?"border-2 border-accent":""}`,onClick:()=>y(N.id),children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:[N.name,w&&e.jsx("span",{className:"badge badge-accent",children:" "})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:N.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-text-secondary",children:""}),e.jsx("div",{className:"font-medium text-text-primary",children:A?.name||N.leader})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:" "}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.requirements.level&&e.jsxs("span",{className:`badge ${i.level>=N.requirements.level?"badge-success":"badge-error"}`,children:[" ",N.requirements.level]}),N.requirements.stats&&Object.entries(N.requirements.stats).map(([k,M])=>e.jsxs("span",{className:`badge ${i.stats[k]>=M?"badge-success":"badge-error"}`,children:[k," ",M]},k))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-sm text-text-secondary",children:[": ",N.members.length,"/",N.maxMembers,""]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[N.members.slice(0,5).map(k=>{const M=Ex[k];return M?e.jsx("span",{className:"badge badge-primary",children:M.name},k):null}),N.members.length>5&&e.jsxs("span",{className:"badge",children:["+",N.members.length-5]})]})]}),j(N)&&e.jsxs("div",{className:"mb-4 p-3 bg-primary/20 rounded-lg",children:[e.jsx("div",{className:"text-sm font-semibold text-primary",children:" "}),e.jsx("div",{className:"text-text-primary",children:j(N)})]}),e.jsxs("div",{className:"flex gap-2",children:[!p&&e.jsx("button",{onClick:k=>{k.stopPropagation(),O(N.id)},disabled:!T,className:`btn ${T?"btn-primary":"btn-ghost opacity-50"} px-4 py-2`,children:""}),w&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:k=>{k.stopPropagation(),C()},className:"btn btn-secondary px-4 py-2",children:""})})]})]},N.id)})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-4",children:" "}),g?(()=>{const N=Vl.find(w=>w.id===g);return N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:""}),e.jsxs("div",{className:"space-y-2 text-sm",children:[N.benefits.daily&&e.jsxs("div",{className:"p-2 bg-surface/50 rounded",children:[e.jsx("div",{className:"font-medium text-accent",children:" "}),N.benefits.daily.exp&&e.jsxs("div",{children:[" +",N.benefits.daily.exp]}),N.benefits.daily.stats&&Object.entries(N.benefits.daily.stats).map(([w,T])=>e.jsxs("div",{children:[w," +",T]},w))]}),N.benefits.weekly&&e.jsxs("div",{className:"p-2 bg-surface/50 rounded",children:[e.jsx("div",{className:"font-medium text-accent",children:" "}),N.benefits.weekly.money&&e.jsxs("div",{children:[" +",N.benefits.weekly.money]}),N.benefits.weekly.items&&N.benefits.weekly.items.map(w=>e.jsx("div",{children:w},w))]})]})]}),p===g&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:""}),e.jsx("div",{className:"space-y-2",children:N.activities.map(w=>{const T=S[`${N.id}_${w.id}_${i.day}`];return e.jsxs("div",{className:"p-3 bg-surface/50 rounded",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:w.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:w.description})]}),T&&e.jsx("span",{className:"badge badge-success",children:""})]}),!T&&e.jsx("button",{onClick:()=>z(N.id,w.id),className:"btn btn-primary btn-sm w-full",children:""})]},w.id)})})]})]}):null})():e.jsx("p",{className:"text-text-secondary",children:" "})]})]})]})})},Ic=qa,_b=Jx,Eb=()=>{const r=ke(),i=re(C=>C.player),d=re(C=>C.unlockedCharacters),[o,u]=v.useState(null),[m,g]=v.useState("gallery"),y=C=>({sakura:"",yuki:"",luna:"",mystery:"",akane:"",hana:"",rin:"",mei:"",sora:""})[C]||"",p=C=>({sakura:"from-pink-600 via-rose-500 to-pink-600",yuki:"from-blue-600 via-cyan-500 to-blue-600",luna:"from-purple-600 via-indigo-500 to-purple-600",mystery:"from-gray-600 via-slate-500 to-gray-600",akane:"from-red-600 via-orange-500 to-red-600",hana:"from-yellow-500 via-amber-400 to-yellow-500",rin:"from-violet-600 via-purple-500 to-violet-600",mei:"from-emerald-600 via-green-500 to-emerald-600",sora:"from-sky-500 via-blue-400 to-sky-500"})[C]||"from-purple-600 via-pink-500 to-purple-600",x=C=>C>=80?{level:"",color:"text-pink-400",stars:""}:C>=60?{level:"",color:"text-purple-400",stars:""}:C>=40?{level:"",color:"text-blue-400",stars:""}:C>=20?{level:"",color:"text-green-400",stars:""}:{level:"",color:"text-gray-400",stars:""},S=C=>{if(!d.includes(C)){const z=Ic[C];return z?.unlockCondition?{locked:!0,reason:`Day ${z.unlockCondition.day||0} ,   ${z.unlockCondition.totalAffection||0} `}:{locked:!0,reason:"  "}}return{locked:!1}},b=o?Ic[o]:null,D=o&&i.affection[o]||0,O=o?_b[o]?.conversations:[];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"glass-card p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gradient mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"    "})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g(m==="gallery"?"detail":"gallery"),className:"btn-secondary px-6 py-3 rounded-xl font-semibold",children:m==="gallery"?" ":" "}),e.jsx("button",{onClick:()=>r("/game"),className:"btn-primary px-6 py-3 rounded-xl font-semibold",children:" "})]})]})}),m==="gallery"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.values(Ic).map(C=>{const z=i.affection[C.id]||0,j=x(z),N=S(C.id),w=d.includes(C.id);return e.jsxs("div",{onClick:()=>{w&&(u(C.id),g("detail"))},className:`glass-card p-6 transition-all duration-300 ${w?"hover:scale-105 cursor-pointer":"opacity-50"}`,children:[e.jsx("div",{className:`bg-gradient-to-br ${p(C.id)} p-4 rounded-xl mb-4`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-2",children:y(C.id)}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:C.name}),e.jsx("p",{className:"text-white/80",children:C.role})]})}),w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:""}),e.jsx("span",{className:`font-bold ${j.color}`,children:j.level})]}),e.jsx("div",{className:"w-full bg-background-dark rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-500",style:{width:`${z}%`}})}),e.jsx("div",{className:"text-center mt-2 text-yellow-400 text-lg",children:j.stars})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-background-dark p-2 rounded-lg",children:[e.jsx("div",{className:"text-xs text-text-secondary",children:" "}),e.jsx("div",{className:"text-lg font-bold text-text-primary",children:i.metHeroines?.filter(T=>T===C.id).length||0})]}),e.jsxs("div",{className:"bg-background-dark p-2 rounded-lg",children:[e.jsx("div",{className:"text-xs text-text-secondary",children:""}),e.jsxs("div",{className:"text-lg font-bold text-text-primary",children:[z,"/100"]})]})]}),e.jsx("p",{className:"text-sm text-text-secondary mb-4 line-clamp-2",children:C.baseText}),e.jsx("button",{className:"w-full btn-primary py-2 rounded-lg font-semibold",children:"  "})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("p",{className:"text-text-secondary font-semibold",children:" "}),e.jsx("p",{className:"text-xs text-text-secondary mt-2",children:N.reason})]})]},C.id)})}):b&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-card p-6 sticky top-4",children:[e.jsx("div",{className:`bg-gradient-to-br ${p(o)} p-6 rounded-xl mb-6`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-8xl mb-3",children:y(o)}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:b.name}),e.jsx("p",{className:"text-xl text-white/90",children:b.role})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-3",children:""}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:" "}),e.jsxs("span",{className:"text-sm font-bold text-text-primary",children:[D,"/100"]})]}),e.jsx("div",{className:"w-full bg-background-dark rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all duration-500",style:{width:`${D}%`}})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:`text-2xl font-bold ${x(D).color}`,children:x(D).level}),e.jsx("div",{className:"text-yellow-400 text-xl mt-1",children:x(D).stars})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.likes.map((C,z)=>e.jsx("span",{className:"badge badge-success",children:C},z))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-400 mb-2",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.dislikes.map((C,z)=>e.jsx("span",{className:"badge badge-error",children:C},z))})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:" "}),e.jsxs("div",{className:"prose prose-invert max-w-none",children:[e.jsx("p",{className:"text-text-secondary leading-relaxed",children:b.baseText}),b.backstory&&e.jsxs("div",{className:"mt-4 p-4 bg-background-dark rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-text-primary mb-2",children:" "}),e.jsx("p",{className:"text-text-secondary",children:b.backstory})]})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:" "}),e.jsx("div",{className:"space-y-3",children:b.dialogues&&Object.entries(b.dialogues).map(([C,z])=>{const j=parseInt(C),N=D>=j;return e.jsxs("div",{className:`p-4 rounded-lg transition-all ${N?"bg-background-dark border border-primary/30":"bg-background-dark/50 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-primary",children:[" ",C]}),N?e.jsx("span",{className:"badge badge-success",children:""}):e.jsx("span",{className:"badge",children:" "})]}),e.jsxs("p",{className:`text-text-secondary ${!N&&"blur-sm"}`,children:['"',N?z:"???",'"']})]},C)})})]}),O&&O.length>0&&e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-text-primary mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map((C,z)=>{const j=D>=(C.requiredAffection||0);return e.jsxs("div",{className:`p-4 rounded-lg border ${j?"bg-gradient-to-br from-primary/20 to-accent/20 border-primary/50":"bg-background-dark/50 border-border opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:C.title||` ${z+1}`}),j?e.jsx("span",{className:"text-green-400",children:""}):e.jsx("span",{className:"text-gray-400",children:""})]}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[" : ",C.requiredAffection||0]})]},z)})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>{r("/game")},className:"flex-1 btn-primary px-6 py-3 rounded-xl font-semibold",children:"  "}),e.jsx("button",{onClick:()=>g("gallery"),className:"flex-1 btn-secondary px-6 py-3 rounded-xl font-semibold",children:" "})]})]})]})]})})},Mb=()=>{const r=ke(),i=re(p=>p.player),[d,o]=v.useState(0),u=[{title:" ",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg",children:"   ''  ."}),e.jsx("p",{className:"text-lg",children:"      ,      ."}),e.jsxs("div",{className:"bg-purple-900/30 p-4 rounded-lg mt-4",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" : 100 "}),e.jsx("li",{children:" :   "}),e.jsx("li",{children:"  :  1,000"}),e.jsx("li",{children:" :    "})]})]})]}),emoji:""},{title:" ",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg font-bold text-yellow-300",children:"30       :"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-pink-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" 9  "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"  80  "}),e.jsx("li",{children:"   "})]})]}),e.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"  "}),e.jsx("li",{children:"  20 "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "})]})]}),e.jsxs("div",{className:"bg-green-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"  "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"  "})]})]}),e.jsxs("div",{className:"bg-yellow-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"   "}),e.jsx("li",{children:"  "}),e.jsx("li",{children:" 10,000 "}),e.jsx("li",{children:"   "})]})]})]})]}),emoji:""},{title:" ",content:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"  30  "}),e.jsx("li",{children:"  2  "}),e.jsx("li",{children:" /  "}),e.jsx("li",{children:"   "})]})]}),e.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"    "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "})]})]}),e.jsxs("div",{className:"bg-green-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" :  "}),e.jsx("li",{children:" : "}),e.jsx("li",{children:" :  "}),e.jsx("li",{children:" :  "}),e.jsx("li",{children:" :  "})]})]}),e.jsxs("div",{className:"bg-pink-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:"   "}),e.jsx("li",{children:"  "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"   "})]})]})]})}),emoji:""},{title:" ",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-lg",children:"9    !"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "},{name:"",emoji:"",type:" "}].map(p=>e.jsxs("div",{className:"bg-pink-900/30 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-3xl mb-1",children:p.emoji}),e.jsx("div",{className:"font-bold",children:p.name}),e.jsx("div",{className:"text-xs text-pink-300",children:p.type})]},p.name))}),e.jsx("p",{className:"text-sm text-yellow-300 text-center",children:"     !"})]}),emoji:""},{title:" ",content:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:"  "}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:"    "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"    "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"     "})]})]}),e.jsxs("div",{className:"bg-red-900/30 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:" "}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" 30   "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"       "})]})]})]}),emoji:""}],m=()=>{d<u.length-1?o(d+1):r("/game")},g=()=>{d>0&&o(d-1)},y=()=>{r("/game")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-800 to-purple-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-4xl w-full",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-lg rounded-2xl p-8 shadow-2xl",children:[e.jsx("div",{className:"flex justify-between mb-6",children:u.map((p,x)=>e.jsx("div",{className:`flex-1 h-2 mx-1 rounded-full transition-all ${x<=d?"bg-gradient-to-r from-purple-400 to-pink-400":"bg-gray-600"}`},x))}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:u[d].emoji}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:u[d].title}),e.jsx("div",{className:"text-gray-100",children:u[d].content})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:g,disabled:d===0,className:`px-6 py-3 rounded-lg font-bold transition-all ${d===0?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-lg"}`,children:""}),e.jsx("button",{onClick:y,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:""}),e.jsx("button",{onClick:m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-bold hover:shadow-lg transition-all",children:d===u.length-1?" !":""})]})]}),e.jsx("div",{className:"mt-4 text-center text-white/70",children:e.jsxs("p",{children:[": ",i.name," | Day ",i.day,"/30"]})})]})})},Ab=()=>{const r=ke(),[i]=Kp();re(j=>j.player);const{updateAffection:d,markCharacterAsMet:o}=re(j=>j.actions),[u,m]=v.useState(null),[g,y]=v.useState(0),[p,x]=v.useState(!1),[S,b]=v.useState(!1),D=[{id:"sakura_training",characterId:"sakura",title:" ",description:"    ",location:"gym",dialogue:["(      )","   .",'???: "?    ."',"(   )",'???: " .  ."'],initialAffection:5,initialState:{mood:"cautious",relationship:"stranger",specialFlag:"met_at_training"},choices:[{text:",  ...",affectionBonus:3,response:': "...    ?"',stateChange:{mood:"curious"}},{text:"  ",affectionBonus:5,response:': "....   ."',stateChange:{mood:"pleased"}},{text:"   ",affectionBonus:7,response:': "...   ."',stateChange:{relationship:"potential_student"}}]},{id:"sakura_accident",characterId:"sakura",title:" ",description:"  ",location:"classroom",dialogue:["(    )","  .",'???: "! !"',"(     )",'???: " ... ?"'],initialAffection:0,initialState:{mood:"annoyed",relationship:"accident_meet"},choices:[{text:"!  ",affectionBonus:5,response:': ".... ."',stateChange:{mood:"neutral"}},{text:" ?",affectionBonus:8,response:': "...  .   ."',stateChange:{mood:"surprised",relationship:"caring_stranger"}}]},{id:"yuki_library",characterId:"yuki",title:"  ",description:"    ",location:"library",dialogue:["(     )","     .","(    )",'???: "... ..."','???: " . ."'],initialAffection:3,initialState:{mood:"shy",relationship:"library_acquaintance"},choices:[{text:"   ?",affectionBonus:4,response:': "   ...  ?"',stateChange:{mood:"hopeful"}},{text:" ",affectionBonus:2,response:': "...   ."',stateChange:{mood:"gentle"}},{text:"  ?",affectionBonus:6,response:': "? ...  ."',stateChange:{relationship:"reading_partner"}}]},{id:"luna_magic_show",characterId:"luna",title:" ",description:"    ",location:"classroom",dialogue:["(     )","     .",'???: "? ?"',"(    )",'???: " !  !"'],initialAffection:5,initialState:{mood:"excited",relationship:"impressed_viewer",specialFlag:"saw_magic_show"},choices:[{text:" !",affectionBonus:5,response:': ", !  ?"',stateChange:{mood:"happy"}},{text:"    ?",affectionBonus:7,response:': "!  !"',stateChange:{relationship:"magic_student"}}]},{id:"haruka_welcome",characterId:"haruka",title:" ",description:"   ",location:"classroom",dialogue:["(    )",'???: "! !"',"(    )",'???: " ! !"',': " ?   !"'],initialAffection:10,initialState:{mood:"cheerful",relationship:"friendly_guide"},choices:[{text:"! ",affectionBonus:5,response:': "! !  !"',stateChange:{relationship:"tour_guide"}},{text:"  ",affectionBonus:7,response:': "~  !"',stateChange:{mood:"delighted"}}]},{id:"miku_concert",characterId:"miku",title:" ",description:"   ",location:"classroom",dialogue:["(   )","     .","(    )",'???: "!  ?"','???: " ... ."'],initialAffection:4,initialState:{mood:"embarrassed",relationship:"secret_listener"},choices:[{text:"  ",affectionBonus:8,response:': "?  !"',stateChange:{mood:"happy"}},{text:",  ",affectionBonus:3,response:': ".   ."',stateChange:{mood:"understanding"}},{text:"   ?",affectionBonus:6,response:': "!  !"',stateChange:{relationship:"regular_listener"}}]},{id:"rina_sparring",characterId:"rina",title:" ",description:"  ",location:"gym",dialogue:["(    )",'???: "!   ?"',"(   )",'???: " !  ?"'],initialAffection:5,initialState:{mood:"energetic",relationship:"sparring_partner"},choices:[{text:"!  ",affectionBonus:8,response:': "!   !"',stateChange:{relationship:"rival"}},{text:" ...",affectionBonus:4,response:': "!  !"',stateChange:{relationship:"trainer"}}]},{id:"ayumi_fortune",characterId:"ayumi",title:" ",description:"   ",location:"classroom",dialogue:["(    )",'???: "."',"(     )",'???: "...    ."','???: " .   ."'],initialAffection:6,initialState:{mood:"mysterious",relationship:"fated_meeting",specialFlag:"destiny_revealed"},choices:[{text:"  ?",affectionBonus:5,response:': "...    ."',stateChange:{mood:"prophetic"}},{text:"   ",affectionBonus:7,response:': " ...   ."',stateChange:{mood:"intrigued"}}]}];v.useEffect(()=>{const j=i.get("character"),N=i.get("location");if(j&&N){const w=D.find(T=>T.characterId===j&&T.location===N);if(w)m(w),y(0);else{const T={id:`${j}_default`,characterId:j,title:" ",description:"  ",location:N,dialogue:["(  )",'???: "?"',`???: " ${j}."`],initialAffection:5,initialState:{mood:"neutral",relationship:"just_met"},choices:[{text:"",affectionBonus:3,response:"  .",stateChange:{mood:"friendly"}},{text:" ",affectionBonus:2,response:"  .",stateChange:{mood:"neutral"}}]};m(T),y(0)}}},[i]);const O=()=>{u&&(g<u.dialogue.length-1?y(g+1):p||x(!0))},C=j=>{if(!u||S)return;const N=u.choices[j];if(!N)return;const w=u.initialAffection+N.affectionBonus;d(u.characterId,w);const T=JSON.parse(localStorage.getItem("characterStates")||"{}");T[u.characterId]={...u.initialState,...N.stateChange,meetingScenario:u.id,firstChoice:N.text},localStorage.setItem("characterStates",JSON.stringify(T)),o(u.characterId),b(!0),setTimeout(()=>{r("/game")},2e3)};if(!u)return e.jsx("div",{className:"min-h-screen bg-background p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-4",children:"Loading..."}),e.jsx("p",{className:"text-text-secondary",children:"    ..."})]})});const z=p?u.choices.map((j,N)=>({text:j.text,callback:()=>C(N)})):void 0;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Vx,{character:u.characterId,dialogue:u.dialogue,onNext:O,choices:z,showSpeaker:!1}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-800 rounded-xl p-6 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-white mb-2",children:[" ",u.characterId,"() !"]}),e.jsx("div",{className:"text-lg text-gray-200",children:" "})]})})]})},Tb=()=>{const r=ke(),i=re(p=>p.player),[d,o]=v.useState(null),u=[{id:"card_matching",name:" ",description:"     .   !",icon:"",route:"/card-matching",difficulty:2,rewards:"EXP +50, Gold +30,  ",unlocked:!0,dailyLimit:5,playsToday:i.statistics?.cardMatchingPlays||0,highScore:i.statistics?.cardMatchingHighScore||0},{id:"quiz",name:" ",description:"    .   !",icon:"",route:"/quiz",difficulty:3,rewards:"EXP +75, Intelligence +2,  ",unlocked:!0,dailyLimit:3,playsToday:i.statistics?.quizPlays||0,highScore:i.statistics?.quizHighScore||0},{id:"fishing",name:"",description:"      .",icon:"",route:"/fishing",difficulty:1,rewards:" , Gold,  ",unlocked:!0,dailyLimit:10,playsToday:i.statistics?.fishingPlays||0},{id:"rhythm",name:" ",description:"   .    !",icon:"",route:"/rhythm",difficulty:4,rewards:"EXP +100, Agility +3,  ",unlocked:i.level>=5,requiredLevel:5,dailyLimit:5,playsToday:i.statistics?.rhythmPlays||0,highScore:i.statistics?.rhythmHighScore||0},{id:"puzzle",name:"",description:"   .   !",icon:"",route:"/puzzle",difficulty:3,rewards:"EXP +80, Intelligence +2,  ",unlocked:i.level>=3,requiredLevel:3,dailyLimit:5,playsToday:i.statistics?.puzzlePlays||0},{id:"farming",name:" ",description:"    .     !",icon:"",route:"/farming",difficulty:2,rewards:", Gold,  ",unlocked:i.level>=7,requiredLevel:7}],m=[{id:"rhythm_tournament",name:"  ",game:"rhythm",endDate:"3 ",prize:" , 1000 Gold",participants:234,yourRank:45},{id:"quiz_tournament",name:" ",game:"quiz",endDate:"5 ",prize:" , 500 Gold",participants:156,yourRank:12}],g=[{id:"daily_card",name:"  10",game:"card_matching",progress:3,target:10,reward:"EXP +200"},{id:"daily_fish",name:"  3 ",game:"fishing",progress:1,target:3,reward:" "},{id:"daily_combo",name:"  100 ",game:"rhythm",progress:0,target:100,reward:"  x5"}],y=p=>{if(!p.unlocked){alert(` ${p.requiredLevel}  !`);return}if(p.dailyLimit&&p.playsToday&&p.playsToday>=p.dailyLimit){alert(`    ! (${p.playsToday}/${p.dailyLimit})`);return}r(p.route)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-pink-500 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"    !"})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(p=>e.jsxs("div",{className:`bg-gradient-to-br ${p.unlocked?"from-purple-800 to-blue-800 hover:from-purple-700 hover:to-blue-700":"from-gray-800 to-gray-700"} rounded-lg p-4 transition-all ${p.unlocked?"hover:scale-[1.02] cursor-pointer":"opacity-60"}`,onClick:()=>p.unlocked&&o(p),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"text-4xl",children:p.icon}),e.jsx("div",{className:"text-yellow-400 text-sm",children:"".repeat(p.difficulty)})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:p.name}),e.jsx("p",{className:"text-xs text-gray-300 mb-3",children:p.description}),!p.unlocked&&p.requiredLevel&&e.jsxs("div",{className:"text-red-400 text-sm mb-2",children:[" Lv.",p.requiredLevel," "]}),p.dailyLimit&&e.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[" : ",p.playsToday||0,"/",p.dailyLimit]}),p.highScore!==void 0&&p.highScore>0&&e.jsxs("div",{className:"text-xs text-yellow-300",children:[" : ",p.highScore]}),e.jsx("button",{onClick:x=>{x.stopPropagation(),y(p)},disabled:!p.unlocked,className:`w-full mt-3 py-2 rounded font-bold transition ${p.unlocked?"bg-purple-600 hover:bg-purple-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:p.unlocked?"":""})]},p.id))})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-yellow-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:g.map(p=>e.jsxs("div",{className:"bg-yellow-900/20 rounded-lg p-4 border border-yellow-600/30",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:p.name}),e.jsx("p",{className:"text-xs text-gray-400",children:u.find(x=>x.id===p.game)?.name})]}),e.jsxs("div",{className:"text-xs text-yellow-400",children:[": ",p.reward]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-2 rounded-full transition-all",style:{width:`${p.progress/p.target*100}%`}})}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1 text-right",children:[p.progress,"/",p.target]})]},p.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-green-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:m.map(p=>e.jsxs("div",{className:"bg-green-900/20 rounded-lg p-4 border border-green-600/30",children:[e.jsx("h3",{className:"font-bold text-white mb-1",children:p.name}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("div",{children:[": ",p.endDate]}),e.jsxs("div",{children:[": ",p.participants,""]}),e.jsxs("div",{className:"text-green-400",children:[" : ",p.yourRank,""]})]}),e.jsxs("div",{className:"mt-2 text-xs text-yellow-300",children:[" ",p.prize]})]},p.id))})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-400 mb-4",children:"  "}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"  "}),e.jsxs("span",{children:[i.statistics?.totalMinigameTime||0,""]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"  EXP"}),e.jsxs("span",{className:"text-yellow-400",children:["+",i.statistics?.todayMinigameExp||0]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:"  Gold"}),e.jsxs("span",{className:"text-yellow-400",children:["+",i.statistics?.todayMinigameGold||0]})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:" "}),e.jsxs("span",{className:"text-green-400",children:[i.statistics?.minigameStreak||0,""]})]})]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-600/30",children:[e.jsx("h3",{className:"text-sm font-bold text-purple-300 mb-2",children:" "}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[e.jsx("li",{children:"        !"}),e.jsx("li",{children:"     "}),e.jsx("li",{children:"        "}),e.jsx("li",{children:"      "})]})]})]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-xl p-6 max-w-md w-full border border-purple-500",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:d.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:d.name})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:d.description}),e.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{className:"text-yellow-400",children:"".repeat(d.difficulty)})]}),e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{className:"text-green-400 text-xs",children:d.rewards})]}),d.dailyLimit&&e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:" "}),e.jsxs("span",{children:[d.playsToday||0,"/",d.dailyLimit]})]}),d.highScore!==void 0&&e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{className:"text-gray-400",children:" "}),e.jsx("span",{className:"text-yellow-300",children:d.highScore})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>y(d),className:"flex-1 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded-lg font-bold transition",children:" "}),e.jsx("button",{onClick:()=>o(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})})]})})},Db=()=>{const r=ke(),i=re(q=>q.player),d=re(q=>q.gameDate),{updateStats:o,advanceTime:u,updateAffection:m,addItem:g,gainExperience:y,addGold:p}=re(q=>q.actions),[x,S]=v.useState(null),[b,D]=v.useState([]),[O,C]=v.useState([]),[z,j]=v.useState(null),[N,w]=v.useState({type:"",count:0}),[T,A]=v.useState(!0),k={sunny:{id:"sunny",name:"",icon:"",description:" .    .",effects:{moodModifier:10,staminaDrain:-5,encounterRate:1.2,combatModifier:5},activities:["","","","",""],bgFilter:"brightness(1.1) contrast(1.05) saturate(1.1)"},cloudy:{id:"cloudy",name:"",icon:"",description:"  .   .",effects:{moodModifier:0,staminaDrain:0},activities:["","","",""],bgFilter:"brightness(0.9) contrast(0.95)"},rainy:{id:"rainy",name:"",icon:"",description:"  .   .",effects:{movementSpeed:-20,moodModifier:-5,encounterRate:.7,cropGrowth:1.5,combatModifier:-10},particleEffect:"rain",activities:[""," ","","",""],blockedActivities:["","",""],bgFilter:"brightness(0.7) contrast(1.1) saturate(0.8)"},stormy:{id:"stormy",name:"",icon:"",description:"   .  .",effects:{movementSpeed:-50,moodModifier:-15,staminaDrain:20,encounterRate:.3,combatModifier:-25},particleEffect:"rain",activities:["","","",""],blockedActivities:["","","","",""],specialEvents:["",""],bgFilter:"brightness(0.5) contrast(1.2) saturate(0.6)"},snowy:{id:"snowy",name:"",icon:"",description:"  .   .",effects:{movementSpeed:-15,moodModifier:15,encounterRate:.8,cropGrowth:.3,fishingBonus:-20},particleEffect:"snow",activities:[" ",""," ","",""],specialEvents:[" ",""],bgFilter:"brightness(1.2) contrast(0.9) saturate(0.7)"},foggy:{id:"foggy",name:"",icon:"",description:"  .  .",effects:{movementSpeed:-10,encounterRate:1.5,moodModifier:5,combatModifier:-15},particleEffect:"fog",activities:[" "," ",""],specialEvents:[" "],bgFilter:"brightness(0.8) contrast(0.7) blur(0.5px)"},windy:{id:"windy",name:"",icon:"",description:"   .",effects:{staminaDrain:10,fishingBonus:-20,movementSpeed:-5},particleEffect:"leaves",activities:["","",""],bgFilter:"contrast(1.05)"},rainbow:{id:"rainbow",name:"",icon:"",description:"     !",effects:{moodModifier:25,encounterRate:2,fishingBonus:30},activities:["","","",""],specialEvents:[" "],bgFilter:"brightness(1.15) contrast(1.1) saturate(1.3)"},sakura:{id:"sakura",name:"",icon:"",description:" .     .",effects:{moodModifier:20,encounterRate:1.5},particleEffect:"petals",activities:[" ","","",""],specialEvents:[""," "],bgFilter:"brightness(1.1) saturate(1.2) hue-rotate(5deg)"},meteor:{id:"meteor",name:"",icon:"",description:"  .  !",effects:{moodModifier:30,encounterRate:3},activities:[" ",""," "," "],specialEvents:[" "," "],bgFilter:"brightness(0.6) contrast(1.3) saturate(1.5)"},heatwave:{id:"heatwave",name:"",icon:"",description:"  .    !",effects:{staminaDrain:25,moodModifier:-10,combatModifier:-20},activities:["",""," ",""],blockedActivities:["",""],bgFilter:"brightness(1.2) contrast(1.1) saturate(0.9) sepia(0.1)"},aurora:{id:"aurora",name:"",icon:"",description:"   .",effects:{moodModifier:35,encounterRate:2.5},activities:[" ",""," "],specialEvents:[" "," "],bgFilter:"brightness(0.7) contrast(1.2) saturate(1.5) hue-rotate(180deg)"}},M={rainbowBlessing:{id:"rainbowBlessing",name:" ",description:"     !",duration:1,effects:{luck:10},rewards:{exp:100,money:200,affection:[{character:"sakura",amount:5},{character:"luna",amount:5}]}},sakuraFestival:{id:"sakuraFestival",name:" ",description:"   !",duration:3,effects:{charm:5},rewards:{exp:200,items:["sakuraPetal","festivalTicket"],affection:[{character:"sakura",amount:10},{character:"yuki",amount:7}]}},meteorShower:{id:"meteorShower",name:" ",description:"  ?",duration:1,effects:{luck:15,intelligence:3},rewards:{exp:150,items:["starFragment"],affection:[{character:"luna",amount:15}]}},snowFestival:{id:"snowFestival",name:" ",description:"  !",duration:2,effects:{agility:3},rewards:{exp:180,money:150,items:["snowflake"],affection:[{character:"yuki",amount:12}]}}},Y={spring:{season:"spring",commonWeathers:["sunny","cloudy","rainy","windy"],rareWeathers:["rainbow","sakura","foggy"],specialEvents:[""," "],seasonalBonus:{stat:"charm",value:2}},summer:{season:"summer",commonWeathers:["sunny","heatwave","cloudy","stormy"],rareWeathers:["rainbow","meteor"],specialEvents:["",""," "],seasonalBonus:{stat:"stamina",value:5}},autumn:{season:"autumn",commonWeathers:["cloudy","windy","foggy","rainy"],rareWeathers:["rainbow","aurora"],specialEvents:["","",""],seasonalBonus:{stat:"intelligence",value:2}},winter:{season:"winter",commonWeathers:["snowy","cloudy","foggy","stormy"],rareWeathers:["sunny","meteor","aurora"],specialEvents:["","",""],seasonalBonus:{stat:"defense",value:3}}},B=()=>{const q=d?.month||4;return q>=3&&q<=5?"spring":q>=6&&q<=8?"summer":q>=9&&q<=11?"autumn":"winter"},ae=v.useCallback(()=>{const q=B(),h=Y[q];if(N.count>=3&&Math.random()<.7){const J=Object.keys(k).filter(L=>L!==N.type),ie=J[Math.floor(Math.random()*J.length)];return k[ie]}if(Math.random()<.1){const J=h.rareWeathers[Math.floor(Math.random()*h.rareWeathers.length)];return k[J]}const H=h.commonWeathers[Math.floor(Math.random()*h.commonWeathers.length)];return k[H]},[N,B]),G=v.useCallback(()=>{const q=[];x?.id;for(let h=0;h<7;h++){const H=ae();q.push(H),H.id}D(q)},[x,ae]),le=v.useCallback(q=>{const h=q.effects;if(h.moodModifier&&h.moodModifier>0){const H=["sakura","yuki","luna","akane","hana","rin","mei","sora"],J=H[Math.floor(Math.random()*H.length)];m(J,Math.floor(h.moodModifier/5))}q.specialEvents&&q.specialEvents.forEach(H=>{if(Math.random()<.3){const J=Object.values(M).find(ie=>ie.name===H);J&&j(J)}}),w(H=>({type:q.id,count:H.type===q.id?H.count+1:1})),C(H=>[...H.slice(-6),q.id])},[m]),E=v.useCallback(q=>{if(!x)return;let h={},H=[];switch(q){case" ":h={charm:2,intelligence:1},H=[{character:"sakura",amount:10}];break;case" ":h={agility:1,strength:1},H=[{character:"yuki",amount:8}];break;case" ":h={intelligence:3},H=[{character:"luna",amount:12}];break;case"":h={luck:5};break;case"":h={stamina:3,agility:2};break;case"":h={intelligence:2,maxMp:5};break;case"":h={charm:2},H=[{character:"mei",amount:5}];break;default:h={charm:1}}const J=Y[B()];J.seasonalBonus&&(h[J.seasonalBonus.stat]=(h[J.seasonalBonus.stat]||0)+J.seasonalBonus.value),o(h),H.forEach(ie=>m(ie.character,ie.amount)),y(20+Math.floor(Math.random()*30)),u()},[x,B,o,m,y,u]),U=v.useCallback(()=>{z&&(z.rewards&&(z.rewards.exp&&y(z.rewards.exp),z.rewards.money&&p(z.rewards.money),z.rewards.items&&z.rewards.items.forEach(q=>g(q)),z.rewards.affection&&z.rewards.affection.forEach(q=>m(q.character,q.amount))),z.effects&&o(z.effects),j(null))},[z,y,p,g,m,o]);v.useEffect(()=>{const q=ae();S(q),G(),le(q)},[i.day]);const R=()=>{if(!x?.particleEffect||!T)return null;const q=50,h=[];for(let H=0;H<q;H++){const J=Math.random()*5,ie=3+Math.random()*2,L=Math.random()*20+10,P={position:"absolute",left:`${Math.random()*100}%`,top:"-20px",animation:`fall ${ie}s linear ${J}s infinite`};switch(x.particleEffect){case"rain":h.push(e.jsx("div",{style:{...P,width:"2px",height:`${L}px`,background:"linear-gradient(to bottom, transparent, #6B7FD7)",opacity:.3}},H));break;case"snow":h.push(e.jsx("div",{style:{...P,fontSize:`${L}px`,opacity:.7,animation:`fall ${ie*2}s linear ${J}s infinite`},children:""},H));break;case"petals":h.push(e.jsx("div",{style:{...P,fontSize:`${L}px`,color:"#FFC0CB",opacity:.6,animation:`fall-rotate ${ie*1.5}s linear ${J}s infinite`},children:""},H));break;case"leaves":h.push(e.jsx("div",{style:{...P,fontSize:`${L}px`,color:"#FF8C00",opacity:.5,animation:`fall-rotate ${ie*1.5}s linear ${J}s infinite`},children:""},H));break}}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none z-40 overflow-hidden",children:h}),e.jsx("style",{children:`
          @keyframes fall {
            to {
              transform: translateY(100vh);
            }
          }
          @keyframes fall-rotate {
            to {
              transform: translateY(100vh) rotate(360deg);
            }
          }
        `})]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 via-blue-800 to-background p-4",style:{filter:x?.bgFilter},children:[R(),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-blue-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-2",children:"  &  "}),e.jsx("p",{className:"text-text-secondary",children:"     !"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>A(!T),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition",children:T?"  ON":"  OFF"}),e.jsx("button",{onClick:()=>r("/game"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})]})}),z&&e.jsx("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 rounded-lg p-4 mb-6 animate-pulse",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("h2",{className:"text-2xl font-bold",children:z.name}),e.jsx("p",{children:z.description})]}),e.jsx("button",{onClick:U,className:"px-6 py-3 bg-white text-orange-600 rounded-lg font-bold hover:bg-yellow-100 transition",children:""})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[x&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-800/50 to-purple-800/50 backdrop-blur-md rounded-xl p-6 border border-blue-400",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-7xl",children:x.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:x.name}),e.jsx("p",{className:"text-gray-300",children:x.description}),e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[B()==="spring"&&" ",B()==="summer"&&" ",B()==="autumn"&&" ",B()==="winter"&&" ","  Day ",i.day]})]})]}),N.count>=3&&e.jsx("div",{className:"bg-purple-500/20 rounded-lg px-3 py-1 border border-purple-500/50",children:e.jsxs("span",{className:"text-purple-300 text-sm",children:[N.count," "]})})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:" "}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:Object.entries(x.effects).map(([q,h])=>{const H={moodModifier:" ",movementSpeed:" ",staminaDrain:" ",encounterRate:"  ",cropGrowth:"  ",fishingBonus:" ",combatModifier:" "};return e.jsxs("div",{className:"flex items-center justify-between bg-blue-900/30 rounded px-2 py-1",children:[e.jsx("span",{className:"text-gray-300",children:H[q]}),e.jsxs("span",{className:h>0?"text-green-400 font-bold":h<0?"text-red-400 font-bold":"text-gray-400",children:[h>0?"+":"",typeof h=="number"?h:`x${h}`,q.includes("Bonus")||q.includes("Speed")||q.includes("Rate")?"%":""]})]},q)})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"  "}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:x.activities.map(q=>e.jsx("button",{onClick:()=>E(q),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 rounded-lg text-white transition-all hover:scale-105",children:q},q))})]}),x.blockedActivities&&x.blockedActivities.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"  "}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.blockedActivities.map(q=>e.jsx("div",{className:"px-4 py-2 bg-red-900/30 rounded-lg text-red-400 line-through",children:q},q))})]})]})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[O.filter(q=>q==="sunny").length,""]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[O.filter(q=>q==="rainy").length,""]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-white",children:[O.filter(q=>["rainbow","sakura","meteor","aurora"].includes(q)).length,""]})]}),e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-gray-400",children:" "}),e.jsxs("div",{className:"text-xl font-bold text-yellow-400",children:[N.count,""]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/50 backdrop-blur-md rounded-lg p-6 border border-blue-500",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-400 mb-4",children:"  "}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:b.map((q,h)=>e.jsxs("div",{className:`flex items-center justify-between bg-blue-900/30 rounded-lg p-2 ${["rainbow","sakura","meteor","aurora"].includes(q.id)?"ring-2 ring-yellow-400":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:q.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white",children:q.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Day ",i.day+h+1]})]})]}),["rainbow","sakura","meteor","aurora"].includes(q.id)&&e.jsx("span",{className:"text-xs bg-yellow-500/20 px-2 py-1 rounded text-yellow-300",children:""})]},h))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/50 to-pink-900/50 rounded-lg p-6 border border-purple-400",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:[B()==="spring"&&" ",B()==="summer"&&" ",B()==="autumn"&&" ",B()==="winter"&&" "]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("div",{className:"font-bold text-white mb-1",children:" "}),e.jsxs("div",{className:"bg-black/30 rounded px-2 py-1",children:[Y[B()].seasonalBonus.stat," +",Y[B()].seasonalBonus.value]})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("div",{className:"font-bold text-white mb-1",children:" "}),Y[B()].specialEvents.map(q=>e.jsxs("div",{className:"bg-black/30 rounded px-2 py-1 mb-1",children:[" ",q]},q))]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-900/50 to-blue-900/50 rounded-lg p-4 border border-green-400",children:[e.jsx("h3",{className:"text-lg font-bold text-green-400 mb-3",children:"  "}),e.jsxs("ul",{className:"text-xs text-gray-300 space-y-2",children:[e.jsx("li",{children:"       "}),e.jsx("li",{children:"         "}),e.jsx("li",{children:"   3     "}),e.jsx("li",{children:"      "}),e.jsx("li",{children:" , ,    "})]})]})]})]})]})]})},Rb=()=>{const r=ke(),i=re(U=>U.player),{updateStats:d,addItem:o,gainExperience:u,addGold:m,updatePlayer:g}=re(U=>U.actions),[y,p]=v.useState([]),[x,S]=v.useState("all"),[b,D]=v.useState(null),[O,C]=v.useState(!1),[z,j]=v.useState(0),[N,w]=v.useState(""),[T,A]=v.useState([]),[k,M]=v.useState("all"),Y=[{id:"first_meeting",name:" ",description:"  ",icon:"",category:"story",tier:"bronze",progress:i.metHeroines?.length||0,maxProgress:1,completed:(i.metHeroines?.length||0)>=1,claimedReward:!1,reward:{exp:50,points:10},condition:{type:"meet_heroine",value:1}},{id:"all_heroines_met",name:" ",description:"  ",icon:"",category:"story",tier:"gold",progress:i.metHeroines?.length||0,maxProgress:9,completed:(i.metHeroines?.length||0)>=9,claimedReward:!1,reward:{exp:500,money:1e3,title:"",points:100},condition:{type:"meet_heroine",value:9}},{id:"true_love",name:" ",description:"     ",icon:"",category:"story",tier:"platinum",progress:Math.max(...Object.values(i.affection||{})),maxProgress:100,completed:Math.max(...Object.values(i.affection||{}))>=100,claimedReward:!1,reward:{exp:1e3,items:["loveRing"],title:"",points:200},condition:{type:"max_affection",value:100}},{id:"harem_master",name:" ",description:"5   80 ",icon:"",category:"story",tier:"diamond",progress:Object.values(i.affection||{}).filter(U=>U>=80).length,maxProgress:5,completed:Object.values(i.affection||{}).filter(U=>U>=80).length>=5,claimedReward:!1,reward:{exp:2e3,money:5e3,title:"",skin:"golden_uniform",points:500},condition:{type:"multiple_affection",value:5},hiddenUntilProgress:3},{id:"first_victory",name:" ",description:"  ",icon:"",category:"combat",tier:"bronze",progress:i.statistics?.monstersDefeated||0,maxProgress:1,completed:(i.statistics?.monstersDefeated||0)>=1,claimedReward:!1,reward:{exp:30,money:50,points:10},condition:{type:"defeat_monster",value:1}},{id:"monster_hunter",name:" ",description:"100  ",icon:"",category:"combat",tier:"silver",progress:i.statistics?.monstersDefeated||0,maxProgress:100,completed:(i.statistics?.monstersDefeated||0)>=100,claimedReward:!1,reward:{exp:300,items:["hunterBadge"],points:50},condition:{type:"defeat_monster",value:100}},{id:"boss_slayer",name:" ",description:"10   ",icon:"",category:"combat",tier:"gold",progress:i.defeatedBosses?.length||0,maxProgress:10,completed:(i.defeatedBosses?.length||0)>=10,claimedReward:!1,reward:{exp:800,items:["legendaryWeapon"],title:"",points:100},condition:{type:"defeat_boss",value:10}},{id:"undefeated",name:" ",description:" 50",icon:"",category:"combat",tier:"platinum",progress:i.statistics?.winStreak||0,maxProgress:50,completed:(i.statistics?.winStreak||0)>=50,claimedReward:!1,reward:{exp:1500,stats:{strength:10,defense:10},title:"",points:200},condition:{type:"win_streak",value:50}},{id:"popular",name:"",description:"  300 ",icon:"",category:"social",tier:"silver",progress:Object.values(i.affection||{}).reduce((U,R)=>U+R,0),maxProgress:300,completed:Object.values(i.affection||{}).reduce((U,R)=>U+R,0)>=300,claimedReward:!1,reward:{exp:200,stats:{charm:5},points:50},condition:{type:"total_affection",value:300}},{id:"gift_giver",name:" ",description:"50  ",icon:"",category:"social",tier:"silver",progress:i.statistics?.giftsGiven||0,maxProgress:50,completed:(i.statistics?.giftsGiven||0)>=50,claimedReward:!1,reward:{exp:250,money:500,points:50},condition:{type:"give_gifts",value:50}},{id:"club_president",name:" ",description:"3  ",icon:"",category:"social",tier:"gold",progress:i.joinedClubs?.length||0,maxProgress:3,completed:(i.joinedClubs?.length||0)>=3,claimedReward:!1,reward:{exp:400,stats:{intelligence:5,charm:3},points:100},condition:{type:"join_clubs",value:3}},{id:"explorer",name:"",description:"  ",icon:"",category:"exploration",tier:"silver",progress:i.visitedLocations?.length||0,maxProgress:15,completed:(i.visitedLocations?.length||0)>=15,claimedReward:!1,reward:{exp:300,items:["explorerMap"],points:50},condition:{type:"visit_locations",value:15}},{id:"dungeon_master",name:" ",description:"  ",icon:"",category:"exploration",tier:"gold",progress:i.dungeonProgress?.maxFloorReached||1,maxProgress:50,completed:(i.dungeonProgress?.maxFloorReached||1)>=50,claimedReward:!1,reward:{exp:1e3,items:["dungeonKey"],title:" ",points:100},condition:{type:"dungeon_floor",value:50}},{id:"treasure_hunter",name:" ",description:"30   ",icon:"",category:"exploration",tier:"silver",progress:i.statistics?.treasuresFound||0,maxProgress:30,completed:(i.statistics?.treasuresFound||0)>=30,claimedReward:!1,reward:{exp:400,money:1e3,points:50},condition:{type:"find_treasure",value:30}},{id:"collector",name:"",description:"50  ",icon:"",category:"collection",tier:"silver",progress:i.collectedItems?.length||0,maxProgress:50,completed:(i.collectedItems?.length||0)>=50,claimedReward:!1,reward:{exp:350,items:["collectorBadge"],points:50},condition:{type:"collect_items",value:50}},{id:"fashion_master",name:" ",description:"10  ",icon:"",category:"collection",tier:"gold",progress:i.collectedOutfits?.length||0,maxProgress:10,completed:(i.collectedOutfits?.length||0)>=10,claimedReward:!1,reward:{exp:500,skin:"designer_outfit",points:100},condition:{type:"collect_outfits",value:10}},{id:"card_master",name:" ",description:"   ",icon:"",category:"collection",tier:"platinum",progress:i.collectedCards?.length||0,maxProgress:45,completed:(i.collectedCards?.length||0)>=45,claimedReward:!1,reward:{exp:1200,items:["goldenCard"],title:" ",points:200},condition:{type:"collect_cards",value:45}},{id:"perfect_day",name:" ",description:"   ",icon:"",category:"special",tier:"gold",progress:i.statistics?.perfectDays||0,maxProgress:1,completed:(i.statistics?.perfectDays||0)>=1,claimedReward:!1,reward:{exp:600,stats:{luck:10},points:100},condition:{type:"perfect_day",value:1}},{id:"minigame_champion",name:" ",description:"    ",icon:"",category:"special",tier:"platinum",progress:i.statistics?.minigameHighScores||0,maxProgress:6,completed:(i.statistics?.minigameHighScores||0)>=6,claimedReward:!1,reward:{exp:1500,money:2e3,title:" ",points:200},condition:{type:"minigame_master",value:6}},{id:"true_ending",name:"",description:"  ",icon:"",category:"special",tier:"diamond",progress:i.unlockedEndings?.includes("true")?1:0,maxProgress:1,completed:i.unlockedEndings?.includes("true")||!1,claimedReward:!1,reward:{exp:5e3,items:["infinityGem"],title:"",skin:"legendary_outfit",points:500},condition:{type:"true_ending",value:1},hiddenUntilProgress:1},{id:"all_endings",name:" ",description:"  ",icon:"",category:"special",tier:"diamond",progress:i.unlockedEndings?.length||0,maxProgress:10,completed:(i.unlockedEndings?.length||0)>=10,claimedReward:!1,reward:{exp:3e3,items:["memoryBook"],title:"",points:500},condition:{type:"all_endings",value:10},hiddenUntilProgress:5},{id:"speedrun",name:"",description:"15   ",icon:"",category:"special",tier:"platinum",progress:i.speedrunDays||999,maxProgress:15,completed:(i.speedrunDays||999)<=15,claimedReward:!1,reward:{exp:2e3,stats:{agility:20},title:"",points:200},condition:{type:"speedrun",value:15}}],B=[{id:"all",name:"",icon:"",color:"gray",achievements:Y},{id:"story",name:"",icon:"",color:"purple",achievements:Y.filter(U=>U.category==="story")},{id:"combat",name:"",icon:"",color:"red",achievements:Y.filter(U=>U.category==="combat")},{id:"social",name:"",icon:"",color:"pink",achievements:Y.filter(U=>U.category==="social")},{id:"exploration",name:"",icon:"",color:"blue",achievements:Y.filter(U=>U.category==="exploration")},{id:"collection",name:"",icon:"",color:"yellow",achievements:Y.filter(U=>U.category==="collection")},{id:"special",name:"",icon:"",color:"orange",achievements:Y.filter(U=>U.category==="special")}],ae=U=>U>=5e3?"":U>=3e3?"":U>=2e3?"":U>=1e3?"":U>=500?"":U>=200?"":U>=50?"":"",G=U=>{switch(U){case"bronze":return"from-orange-600 to-orange-400";case"silver":return"from-gray-400 to-gray-300";case"gold":return"from-yellow-500 to-yellow-400";case"platinum":return"from-blue-400 to-blue-300";case"diamond":return"from-purple-500 to-pink-500";default:return"from-gray-600 to-gray-500"}},le=U=>{if(!U.completed||U.claimedReward)return;C(!0);const R=U.reward;R.exp&&u(R.exp),R.money&&m(R.money),R.items&&R.items.forEach(h=>o(h)),R.stats&&d(R.stats),R.title&&g({currentTitle:R.title}),R.skin&&g({unlockedSkins:[...i.unlockedSkins||[],R.skin]});const q=y.map(h=>h.id===U.id?{...h,claimedReward:!0}:h);p(q),j(h=>h+R.points),setTimeout(()=>{C(!1),D(null)},2e3)};v.useEffect(()=>{const U=[];Y.forEach(q=>{q.completed&&!i.achievements?.includes(q.id)&&U.push(q.id)}),A(U),p(Y);const R=Y.filter(q=>q.completed&&q.claimedReward).reduce((q,h)=>q+h.reward.points,0);j(i.achievementPoints||R),w(ae(i.achievementPoints||R))},[i]);const E=()=>{let R=B.find(q=>q.id===x)?.achievements||[];return k==="completed"?R=R.filter(q=>q.completed):k==="incomplete"&&(R=R.filter(q=>!q.completed)),R=R.filter(q=>q.hiddenUntilProgress?q.progress>=q.hiddenUntilProgress:!0),R};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-purple-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent mb-2",children:"  & "}),e.jsx("p",{className:"text-text-secondary",children:"     !"})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-800/50 to-blue-800/50 backdrop-blur-md rounded-lg p-6 mb-6 border border-purple-400",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:z}),e.jsx("div",{className:"text-sm text-gray-300",children:" "})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:N}),e.jsx("div",{className:"text-sm text-gray-300",children:" "})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:[y.filter(U=>U.completed).length,"/",y.length]}),e.jsx("div",{className:"text-sm text-gray-300",children:" "})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:[Math.round(y.filter(U=>U.completed).length/y.length*100),"%"]}),e.jsx("div",{className:"text-sm text-gray-300",children:""})]})]})}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-4 mb-6 border border-purple-500",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:B.map(U=>e.jsxs("button",{onClick:()=>S(U.id),className:`px-4 py-2 rounded-lg font-bold transition ${x===U.id?"bg-purple-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[U.icon," ",U.name,e.jsxs("span",{className:"ml-2 text-xs",children:["(",U.achievements.filter(R=>R.completed).length,"/",U.achievements.length,")"]})]},U.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>M("all"),className:`px-3 py-1 rounded text-sm ${k==="all"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>M("completed"),className:`px-3 py-1 rounded text-sm ${k==="completed"?"bg-green-600 text-white":"bg-gray-700 text-gray-300"}`,children:""}),e.jsx("button",{onClick:()=>M("incomplete"),className:`px-3 py-1 rounded text-sm ${k==="incomplete"?"bg-red-600 text-white":"bg-gray-700 text-gray-300"}`,children:""})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E().map(U=>e.jsxs("div",{className:`bg-gradient-to-br ${U.completed?"from-green-900/50 to-blue-900/50":"from-gray-900/50 to-gray-800/50"} backdrop-blur-md rounded-lg p-4 border ${U.completed?"border-green-500":"border-gray-600"} ${T.includes(U.id)?"animate-pulse ring-2 ring-yellow-400":""}
              hover:scale-[1.02] transition-all cursor-pointer`,onClick:()=>D(U),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"text-4xl",children:U.icon}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-bold bg-gradient-to-r ${G(U.tier)} text-white`,children:U.tier.toUpperCase()})]}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:U.name}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:U.description}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[U.progress,"/",U.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${U.completed?"bg-gradient-to-r from-green-500 to-blue-500":"bg-gradient-to-r from-yellow-500 to-orange-500"}`,style:{width:`${Math.min(U.progress/U.maxProgress*100,100)}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["+",U.reward.points," pts"]}),U.completed&&!U.claimedReward&&e.jsx("button",{onClick:R=>{R.stopPropagation(),le(U)},className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-500 text-white text-xs rounded font-bold animate-bounce",children:" "}),U.completed&&U.claimedReward&&e.jsx("span",{className:"text-xs text-green-400",children:"  "})]})]},U.id))}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:`bg-gradient-to-br from-purple-900 to-blue-900 rounded-xl p-6 max-w-md w-full border-2 ${b.completed?"border-green-500":"border-gray-500"}`,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:b.icon}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:b.name}),e.jsx("div",{className:`inline-block px-3 py-1 rounded text-sm font-bold bg-gradient-to-r ${G(b.tier)} text-white mt-2`,children:b.tier.toUpperCase()})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:b.description}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-white mb-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"font-bold",children:[b.progress,"/",b.maxProgress]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${b.completed?"bg-gradient-to-r from-green-500 to-blue-500":"bg-gradient-to-r from-yellow-500 to-orange-500"}`,style:{width:`${Math.min(b.progress/b.maxProgress*100,100)}%`}})})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:""}),e.jsxs("div",{className:"space-y-1 text-sm",children:[b.reward.exp&&e.jsxs("div",{className:"text-yellow-300",children:["  +",b.reward.exp]}),b.reward.money&&e.jsxs("div",{className:"text-green-300",children:["  +",b.reward.money]}),b.reward.items&&e.jsxs("div",{className:"text-blue-300",children:[" : ",b.reward.items.join(", ")]}),b.reward.stats&&e.jsxs("div",{className:"text-purple-300",children:["  : ",Object.entries(b.reward.stats).map(([U,R])=>`${U} +${R}`).join(", ")]}),b.reward.title&&e.jsxs("div",{className:"text-pink-300",children:[" : ",b.reward.title]}),b.reward.skin&&e.jsxs("div",{className:"text-orange-300",children:[" : ",b.reward.skin]}),e.jsxs("div",{className:"text-white font-bold",children:["   +",b.reward.points]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[b.completed&&!b.claimedReward?e.jsx("button",{onClick:()=>le(b),className:"flex-1 py-3 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white rounded-lg font-bold transition animate-pulse",children:" "}):b.completed?e.jsx("div",{className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-bold text-center",children:"  "}):e.jsx("div",{className:"flex-1 py-3 bg-gray-600 text-gray-400 rounded-lg font-bold text-center",children:""}),e.jsx("button",{onClick:()=>D(null),className:"flex-1 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-bold transition",children:""})]})]})}),O&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[60] pointer-events-none",children:e.jsx("div",{className:"text-6xl animate-bounce",children:""})})]})})},qb={greetings:{morning:[" !    ."," , ?"," ?     .","  .   ?"],afternoon:["  .  ?"," ?   .","   ...   ."],evening:[" .  .","  .","  ... ,  !"],night:["    ?"," ?  .","  .  ?"]},mood_dialogues:{happy:["   !  .","   !","    !"],sad:["...   .","    .","  ..."],angry:["   .","  !","   ?"],shy:["...   ?"," ...","   !"],love:["  .","   .","...    ?"]},activity_responses:{study:["    !","   .","   ?"],training:["!   !","    .","  !"],date:[", ...?  ... , .","   . .","...     ."],gift:["...   ? !","  .   ."," .  ."]},special_events:{birthday:"    ... .",festival:" ...   .",confession:"...   . , .",first_kiss:"...  ...   ."}},Ob={greetings:{morning:[" ~    ?","  . ?"," !    .","  .    ."],afternoon:["  ...   .","  ?  ~","   ..."],evening:["  .","  .","      ."],night:["  . ?"," .   ?","  ...  ?"]},mood_dialogues:{happy:["     !","   !","  ~"],sad:["    ...","    ...","...?"],angry:["   !"," ... ...","   ?"],shy:[", ...    .","  ...?","    !"],love:["    .","  .","    ."]},activity_responses:{study:["  ?  !","   !","   ."],training:[" ? ! !","  !","   !"],date:["   !","  ... .","    ."],gift:["!  ! !","     ?"," !  !"]},special_events:{birthday:"    !",festival:"    . ?",confession:"  ... .",first_kiss:"...  ?"}},zb={greetings:{morning:["...  ... ..."," ... ...","...  ...","   ..."],afternoon:["  ...","   ...","  ... Zzz..."],evening:["    .","   .","  ... ."],night:["  ."," ...  ?","  .  ?"]},mood_dialogues:{happy:["  ...  .","     .","...   ."],sad:[" ...","...   .","   ..."],angry:["... .","     ?","  ..."],shy:[", ...  ...","   ...?","   ..."],love:[" ...   .","...  .","...   ."]},activity_responses:{study:["... ...  ...","  .","  ..."],training:[" ... .","  ."," ..."],date:["...  ...","  .","     ."],gift:["... .  .","...  ."," ... ."]},special_events:{birthday:"...   .",festival:"...   .",confession:"...   .",first_kiss:"...  ..."}},Hb={greetings:{morning:[" !  !","  !","   ?","    !"],afternoon:[" ?  !"," !","?   !"],evening:["   !","  ?"," !"],night:["   !","  ?","  !"]},mood_dialogues:{happy:[" ! !","   !","  !"],sad:["...  .","   .","...?"],angry:[" !","  !","  !"],shy:[", ... !"," ?","    ?"],love:["   !","   ?"," !"]}},Lb={greetings:{morning:[" ~   ?","   ."," .","   ."]},mood_dialogues:{happy:["   .","   ."," ."]}},Bb={greetings:{morning:[",  .","   .","    ?"]},mood_dialogues:{happy:["   . .","  ?"," ,  ."]}},Ub={greetings:{morning:[" !   ?"," !","  ?"]},mood_dialogues:{happy:["    !","     !","  !"]}},$b={greetings:{morning:["    ."," ... .","   ?"]},mood_dialogues:{happy:["  !","   ."," ."]}},Gb={weather_reactions:{sunny:["  !","   !"," ."],rainy:["     ."," ?","   ."],snowy:["! !","   ."," ?"]},item_reactions:{flower:"!  !",chocolate:"!  !",book:"!  ?",accessory:"?  !",food:" !  !"},relationship_milestones:{10:"  . .",25:"  .",50:"    .",75:"  .",90:"...  .",100:".  ."}},Zl={sakura:qb,yuki:Ob,luna:zb,akane:Hb,hana:Lb,rin:Bb,mei:Ub,sora:$b,common:Gb},Yb=()=>{const r=ke(),i=re(h=>h.player),d=re(h=>h.currentWeather),{updateAffection:o,advanceTime:u,addItem:m,updateStats:g}=re(h=>h.actions),[y,p]=v.useState(null),[x,S]=v.useState(""),[b,D]=v.useState([]),[O,C]=v.useState("neutral"),[z,j]=v.useState([]),[N,w]=v.useState(null),[T,A]=v.useState(""),[k,M]=v.useState(!1),Y=qa,B=v.useCallback(h=>{const H=i.affection[h]||0,J=z.filter(L=>L.characterId===h&&L.dialogue.includes("")).slice(-1)[0],ie=z.filter(L=>L.characterId===h&&new Date().getTime()-new Date(L.timestamp).getTime()<864e5);return H>=80?"love":H>=60&&ie.length>3?"happy":J&&new Date().getTime()-new Date(J.timestamp).getTime()<36e5?"shy":ie.length===0?"sad":H>=40?"happy":(H<20,"neutral")},[i.affection,z]),ae=v.useCallback(h=>{const H=Zl[h.characterId];if(!H)return"...";let J=[];if(h.specialEvent&&H.special_events?.[h.specialEvent])return H.special_events[h.specialEvent];h.mood&&H.mood_dialogues?.[h.mood]&&(J=[...H.mood_dialogues[h.mood]]),H.greetings?.[h.timeOfDay]&&(J=[...J,...H.greetings[h.timeOfDay]]),h.weather&&Zl.common?.weather_reactions?.[h.weather]&&(J=[...J,...Zl.common.weather_reactions[h.weather]]);const ie=Zl.common?.relationship_milestones;if(ie){const L=Object.keys(ie).map(Number).sort((Z,P)=>P-Z);for(const Z of L)if(h.affection>=Z){J.push(ie[Z]);break}}return J.length===0&&(J=Object.values(H.greetings||{}).flat()),J[Math.floor(Math.random()*J.length)]||"..."},[]),G=v.useCallback((h,H)=>{const J=[];return J.push({text:",  ?",response:",   .",affectionChange:1}),J.push({text:"  ?",response:"  .",affectionChange:2}),H>=20&&J.push({text:" ?",response:",  .",affectionChange:3,unlockCondition:{minAffection:20}}),H>=40&&J.push({text:"  .",response:",   ?",affectionChange:5,moodChange:"shy",unlockCondition:{minAffection:40}}),H>=60&&J.push({text:"!",response:",  ?",affectionChange:7,moodChange:"happy",unlockCondition:{minAffection:60}}),H>=80&&J.push({text:"",response:"... .",affectionChange:10,moodChange:"love",unlockCondition:{minAffection:80}}),i.inventory?.includes("flower")&&J.push({text:"  ",response:",  ! !",affectionChange:8,moodChange:"happy",unlockCondition:{item:"flower"}}),i.inventory?.includes("chocolate")&&J.push({text:"  ",response:"  !  ?",affectionChange:10,moodChange:"love",unlockCondition:{item:"chocolate"}}),i.stats?.charm>=30&&J.push({text:"() ",response:",    ?",affectionChange:6,moodChange:"shy",unlockCondition:{minStat:{stat:"charm",value:30}}}),i.stats?.intelligence>=30&&J.push({text:"()  ",response:"...  .",affectionChange:7,moodChange:"happy",unlockCondition:{minStat:{stat:"intelligence",value:30}}}),J},[i]),le=v.useCallback(h=>{if(!y)return;if(h.unlockCondition){if(h.unlockCondition.minAffection&&(i.affection[y]||0)<h.unlockCondition.minAffection){S("(  )");return}if(h.unlockCondition.minStat&&i.stats[h.unlockCondition.minStat.stat]<h.unlockCondition.minStat.value){S(`(${h.unlockCondition.minStat.stat}() )`);return}if(h.unlockCondition.item&&!i.inventory?.includes(h.unlockCondition.item)){S("(  )");return}}o(y,h.affectionChange),h.moodChange&&(C(h.moodChange),w(h.moodChange),setTimeout(()=>w(null),2e3)),h.unlockCondition?.item;const H={characterId:y,dialogue:h.text,response:h.response,timestamp:new Date,affectionChange:h.affectionChange};j(ie=>[...ie,H]),S(h.response);const J=(i.affection[y]||0)+h.affectionChange;E(y,J),u()},[y,i,o,u]),E=v.useCallback((h,H)=>{const J=[10,25,50,75,90,100],ie=i.affection[h]||0;for(const L of J)if(ie<L&&H>=L){M(!0),S(Zl.common.relationship_milestones[L]),L===50?m(`${h}_photo`):L===100&&(m(`${h}_ring`),g({charm:10,luck:10}));break}},[i.affection,m,g]),U=v.useCallback(h=>h>=100?" ":h>=90?"  ":h>=75?" ":h>=50?"  ":h>=25?" ":h>=10?"  ":"  ",[]),R=v.useCallback(h=>{p(h);const H={characterId:h,timeOfDay:i.timeOfDay,weather:d,location:i.location,affection:i.affection[h]||0,mood:B(h),playerStats:i.stats},J=ae(H);S(J),C(H.mood||"neutral"),A(U(H.affection)),D(G(h,H.affection))},[i,d,B,ae,U,G]),q=({emotion:h})=>{const H={happy:"",sad:"",angry:"",shy:"",love:"",neutral:""};return e.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 text-5xl animate-bounce",children:H[h]})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-900 via-purple-900 to-background p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-pink-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent",children:"  "}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-pink-500",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.entries(Y).map(([h,H])=>{const J=i.affection[h]||0;return i.unlockedCharacters?.includes(h)?e.jsx("button",{onClick:()=>R(h),className:`w-full p-3 rounded-lg transition ${y===h?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:H.icon}),e.jsx("span",{className:"font-bold",children:H.name})]}),e.jsx("div",{className:"text-sm",children:e.jsxs("div",{className:"text-pink-300",children:[" ",J]})})]})},h):null})})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:" "}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:z.slice(-5).reverse().map((h,H)=>e.jsxs("div",{className:"text-sm bg-purple-900/30 rounded p-2",children:[e.jsxs("div",{className:"text-gray-400 text-xs",children:[Y[h.characterId]?.name," - ",new Date(h.timestamp).toLocaleTimeString()]}),e.jsx("div",{className:"text-white",children:h.dialogue}),h.affectionChange&&e.jsxs("div",{className:"text-pink-300 text-xs",children:[" +",h.affectionChange]})]},H))})]})]}),e.jsx("div",{className:"lg:col-span-2",children:y?e.jsxs("div",{className:"bg-gradient-to-br from-pink-800/50 to-purple-800/50 backdrop-blur-md rounded-lg p-6 border border-pink-400",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-6xl",children:Y[y].icon}),N&&e.jsx(q,{emotion:N})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:Y[y].name}),e.jsx("div",{className:"text-sm text-gray-300",children:Y[y].title}),e.jsx("div",{className:"text-sm text-pink-300 mt-1",children:T})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg text-pink-400",children:[" ",i.affection[y]||0,"/100"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[": ",O]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-6 mb-6 min-h-[150px]",children:[e.jsx("p",{className:"text-lg text-white leading-relaxed",children:x}),k&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-500/20 rounded border border-yellow-500",children:e.jsx("span",{className:"text-yellow-300 font-bold",children:"  !"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:""}),b.map((h,H)=>{const J=h.unlockCondition&&(h.unlockCondition.minAffection&&(i.affection[y]||0)<h.unlockCondition.minAffection||h.unlockCondition.minStat&&i.stats[h.unlockCondition.minStat.stat]<h.unlockCondition.minStat.value||h.unlockCondition.item&&!i.inventory?.includes(h.unlockCondition.item));return e.jsx("button",{onClick:()=>!J&&le(h),className:`w-full p-3 rounded-lg text-left transition ${J?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white"}`,disabled:J,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:h.text}),e.jsxs("div",{className:"text-sm",children:[h.unlockCondition&&e.jsxs("span",{className:"text-xs",children:[h.unlockCondition.minAffection&&` ${h.unlockCondition.minAffection}`,h.unlockCondition.minStat&&` ${h.unlockCondition.minStat.stat} ${h.unlockCondition.minStat.value}`,h.unlockCondition.item&&` ${h.unlockCondition.item}`]}),e.jsxs("span",{className:"ml-2 text-pink-300",children:["+",h.affectionChange]})]})]})},H)})]})]}):e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-12 border border-pink-500 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" "}),e.jsx("p",{className:"text-gray-400",children:"       ."})]})})]})]})})},Qb=()=>{const r=ke(),i=re(M=>M.player),{updateAffection:d,updateMoney:o,advanceTime:u,addItem:m}=re(M=>M.actions),[g,y]=v.useState(null),[p,x]=v.useState(null),[S,b]=v.useState([]),[D,O]=v.useState(null),[C,z]=v.useState({}),j=[{id:"rose",name:"",icon:"",description:" ",category:"flower",price:50,rarity:"common"},{id:"sakura_petal",name:"",icon:"",description:" ",category:"flower",price:60,rarity:"uncommon"},{id:"sunflower",name:"",icon:"",description:" ",category:"flower",price:40,rarity:"common"},{id:"blue_rose",name:" ",icon:"",description:" ",category:"flower",price:200,rarity:"rare"},{id:"rainbow_flower",name:" ",icon:"",description:"  ",category:"flower",price:500,rarity:"legendary"},{id:"chocolate",name:"",icon:"",description:" ",category:"food",price:30,rarity:"common"},{id:"cake",name:"",icon:"",description:"  ",category:"food",price:80,rarity:"uncommon"},{id:"cookies",name:"",icon:"",description:" ",category:"food",price:25,rarity:"common"},{id:"tea_set",name:" ",icon:"",description:"  ",category:"food",price:150,rarity:"uncommon"},{id:"bento",name:"",icon:"",description:" ",category:"food",price:45,rarity:"common"},{id:"rare_wine",name:" ",icon:"",description:"100 ",category:"food",price:1e3,rarity:"legendary"},{id:"necklace",name:"",icon:"",description:" ",category:"accessory",price:200,rarity:"uncommon"},{id:"bracelet",name:"",icon:"",description:" ",category:"accessory",price:150,rarity:"uncommon"},{id:"earrings",name:"",icon:"",description:" ",category:"accessory",price:180,rarity:"uncommon"},{id:"hair_pin",name:"",icon:"",description:" ",category:"accessory",price:60,rarity:"common"},{id:"ring",name:"",icon:"",description:"  ",category:"accessory",price:500,rarity:"rare"},{id:"crown",name:"",icon:"",description:" ",category:"accessory",price:2e3,rarity:"legendary"},{id:"novel",name:"",icon:"",description:" ",category:"book",price:40,rarity:"common"},{id:"manga",name:"",icon:"",description:" ",category:"book",price:35,rarity:"common"},{id:"poetry",name:"",icon:"",description:" ",category:"book",price:45,rarity:"common"},{id:"magic_tome",name:"",icon:"",description:" ",category:"book",price:300,rarity:"rare"},{id:"diary",name:"",icon:"",description:"  ",category:"book",price:70,rarity:"uncommon"},{id:"teddy_bear",name:"",icon:"",description:" ",category:"toy",price:50,rarity:"common"},{id:"doll",name:"",icon:"",description:" ",category:"toy",price:80,rarity:"uncommon"},{id:"puzzle",name:"",icon:"",description:"1000 ",category:"toy",price:60,rarity:"common"},{id:"music_box",name:"",icon:"",description:"  ",category:"toy",price:150,rarity:"uncommon"},{id:"crystal_ball",name:"",icon:"",description:" ",category:"toy",price:250,rarity:"rare"},{id:"love_letter",name:"",icon:"",description:"  ",category:"special",price:0,rarity:"uncommon",obtainMethod:" "},{id:"photo_album",name:"",icon:"",description:"  ",category:"special",price:100,rarity:"uncommon"},{id:"handmade_gift",name:" ",icon:"",description:"  ",category:"special",price:0,rarity:"rare",obtainMethod:""},{id:"promise_ring",name:" ",icon:"",description:"  ",category:"special",price:1e3,rarity:"legendary"},{id:"star_fragment",name:"",icon:"",description:"  ",category:"special",price:0,rarity:"legendary",obtainMethod:" "}],N=[{characterId:"sakura",loves:["rose","ring","promise_ring","handmade_gift"],likes:["sunflower","chocolate","hair_pin","teddy_bear"],neutral:["novel","cookies","bracelet"],dislikes:["magic_tome","crystal_ball","rare_wine"],hates:["doll","poetry"],specialReactions:{sakura_petal:"...?   .    ?",blue_rose:" ...    ?",love_letter:"...  ? ... ."},birthdayGift:"cake"},{characterId:"yuki",loves:["magic_tome","crystal_ball","blue_rose","star_fragment"],likes:["chocolate","music_box","necklace","tea_set"],neutral:["novel","puzzle","earrings"],dislikes:["sunflower","bento","teddy_bear"],hates:["rare_wine","crown"],specialReactions:{rainbow_flower:" !   !",diary:"?    !",handmade_gift:"  ?   ..."},birthdayGift:"magic_tome"},{characterId:"luna",loves:["poetry","music_box","star_fragment","diary"],likes:["tea_set","novel","earrings","blue_rose"],neutral:["chocolate","necklace","doll"],dislikes:["sunflower","bento","puzzle"],hates:["rare_wine","crown"],specialReactions:{teddy_bear:"...    .",love_letter:"...  .  .",photo_album:"...   . ."},birthdayGift:"poetry"},{characterId:"akane",loves:["sunflower","cookies","teddy_bear","photo_album"],likes:["chocolate","cake","hair_pin","puzzle"],neutral:["novel","bracelet","rose"],dislikes:["poetry","rare_wine","crown"],hates:["magic_tome","crystal_ball"],specialReactions:{bento:"!  !  !",handmade_gift:"!   ? !",promise_ring:"...   ?"},birthdayGift:"cake"},{characterId:"hana",loves:["sakura_petal","sunflower","rainbow_flower","tea_set"],likes:["rose","poetry","music_box","diary"],neutral:["chocolate","necklace","novel"],dislikes:["rare_wine","crown","puzzle"],hates:["doll","crystal_ball"],specialReactions:{blue_rose:" ...   . .",handmade_gift:" .  .",star_fragment:"       ."},birthdayGift:"rainbow_flower"},{characterId:"rin",loves:["crystal_ball","magic_tome","crown","star_fragment"],likes:["rare_wine","necklace","poetry","blue_rose"],neutral:["chocolate","novel","earrings"],dislikes:["sunflower","cookies","teddy_bear"],hates:["bento","puzzle"],specialReactions:{promise_ring:"...  .",diary:"  ...    ?",love_letter:"...   ."},birthdayGift:"crystal_ball"},{characterId:"mei",loves:["bento","cake","cookies","chocolate"],likes:["tea_set","recipe_book","hair_pin","photo_album"],neutral:["rose","bracelet","novel"],dislikes:["magic_tome","crystal_ball","crown"],hates:["rare_wine","poetry"],specialReactions:{handmade_gift:"!   !",rare_wine:" ...  ...",love_letter:"   ?"},birthdayGift:"cake"},{characterId:"sora",loves:["novel","poetry","diary","magic_tome"],likes:["tea_set","music_box","earrings","blue_rose"],neutral:["chocolate","necklace","puzzle"],dislikes:["sunflower","bento","teddy_bear"],hates:["crown","rare_wine"],specialReactions:{manga:"  .",photo_album:"  ... .",love_letter:"...   ."},birthdayGift:"novel"}],w=(M,Y)=>{const B=N.find(ae=>ae.characterId===M);return B?B.specialReactions[Y]?{change:15,reaction:B.specialReactions[Y]}:B.loves.includes(Y)?{change:20,reaction:"!   !  ?"}:B.likes.includes(Y)?{change:10,reaction:"!  !"}:B.dislikes.includes(Y)?{change:-5,reaction:"...  ..."}:B.hates.includes(Y)?{change:-10,reaction:"... ..."}:{change:5,reaction:".  ."}:{change:5,reaction:"."}},T=()=>{if(!g||!p)return;if(!i.inventory?.includes(p.id)){if(p.price>0&&i.money<p.price){O(" !");return}p.price>0&&o(-p.price)}const{change:M,reaction:Y}=w(g,p.id);d(g,M),O(Y);const B={characterId:g,giftId:p.id,date:Date.now(),reaction:Y,affectionChange:M};b(G=>[...G,B]),N.find(G=>G.characterId===g)&&z(G=>({...G,[g]:new Set([...G[g]||[],p.id])})),setTimeout(()=>{O(null),x(null)},3e3),u()},A=(M,Y)=>{const B=N.find(ae=>ae.characterId===M);return B?B.loves.includes(Y)?"":B.likes.includes(Y)?"":B.dislikes.includes(Y)?"":B.hates.includes(Y)?"":"":""},k=M=>{switch(M){case"common":return"from-gray-600 to-gray-500";case"uncommon":return"from-green-600 to-green-500";case"rare":return"from-blue-600 to-blue-500";case"legendary":return"from-purple-600 to-pink-600";default:return"from-gray-600 to-gray-500"}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-pink-900 via-purple-900 to-background p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-black/50 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6 border border-pink-500",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent mb-2",children:"  "}),e.jsx("p",{className:"text-text-secondary",children:"      !"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl text-yellow-400",children:[" ",i.money]}),e.jsx("button",{onClick:()=>r("/game"),className:"mt-2 px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:""})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:["all","flower","food","accessory","book","toy","special"].map(M=>e.jsx("button",{className:"px-3 py-1 bg-purple-700 hover:bg-purple-600 rounded text-white text-sm",children:M==="all"?"":M==="flower"?" ":M==="food"?" ":M==="accessory"?" ":M==="book"?" ":M==="toy"?" ":" "},M))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-[600px] overflow-y-auto",children:j.map(M=>e.jsxs("button",{onClick:()=>x(M),className:`relative p-4 rounded-lg border transition-all hover:scale-105 ${p?.id===M.id?"border-pink-500 bg-pink-900/50":"border-gray-600 bg-gray-800/50 hover:border-purple-500"}`,children:[e.jsx("div",{className:`absolute top-1 right-1 px-2 py-1 rounded text-xs text-white bg-gradient-to-r ${k(M.rarity)}`,children:M.rarity}),e.jsx("div",{className:"text-3xl mb-2",children:M.icon}),e.jsx("div",{className:"text-sm font-bold text-white",children:M.name}),e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:M.description}),e.jsx("div",{className:"text-sm text-yellow-400",children:M.price>0?` ${M.price}`:M.obtainMethod}),g&&C[g]?.has(M.id)&&e.jsx("div",{className:"absolute bottom-1 left-1 text-lg",children:A(g,M.id)})]},M.id))})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-pink-500",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsx("div",{className:"space-y-2",children:Object.keys(i.affection||{}).map(M=>e.jsx("button",{onClick:()=>y(M),className:`w-full p-3 rounded-lg transition ${g===M?"bg-gradient-to-r from-pink-600 to-purple-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:M}),e.jsxs("span",{className:"text-pink-300",children:[" ",i.affection[M]]})]})},M))})]}),g&&p&&e.jsxs("div",{className:"bg-gradient-to-br from-pink-800/50 to-purple-800/50 backdrop-blur-md rounded-lg p-6 border border-pink-400",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-4xl mb-2",children:p.icon}),e.jsx("div",{className:"text-white font-bold",children:p.name}),e.jsxs("div",{className:"text-sm text-gray-300",children:[" ",g]})]}),e.jsx("button",{onClick:T,className:"w-full py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white rounded-lg font-bold transition",children:""})]}),D&&e.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500 rounded-lg p-4 animate-bounce",children:e.jsx("div",{className:"text-yellow-300 text-center font-bold",children:D})}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-3",children:" "}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:S.slice(-5).reverse().map((M,Y)=>e.jsxs("div",{className:"text-sm bg-purple-900/30 rounded p-2",children:[e.jsxs("div",{className:"flex justify-between text-white",children:[e.jsx("span",{children:M.characterId}),e.jsxs("span",{className:M.affectionChange>0?"text-green-400":"text-red-400",children:[M.affectionChange>0?"+":"",M.affectionChange]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:j.find(B=>B.id===M.giftId)?.name})]},Y))})]})]})]}),e.jsxs("div",{className:"mt-6 bg-black/40 backdrop-blur-md rounded-lg p-6 border border-purple-500",children:[e.jsx("h2",{className:"text-xl font-bold text-purple-400 mb-4",children:"  "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:" "}),e.jsx("div",{className:"text-xs text-green-400",children:"+20"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:""}),e.jsx("div",{className:"text-xs text-green-400",children:"+10"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:""}),e.jsx("div",{className:"text-xs text-gray-400",children:"+5"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:""}),e.jsx("div",{className:"text-xs text-red-400",children:"-5"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("div",{className:"text-sm text-white",children:" "}),e.jsx("div",{className:"text-xs text-red-400",children:"-10"})]})]})]})]})})},Xb=()=>{const r=ke(),i=re(E=>E.player);re(E=>E.gameDate);const{updateAffection:d,gainExperience:o,addGold:u,addItem:m,advanceTime:g,updateStats:y}=re(E=>E.actions),[p,x]=v.useState("spring"),[S,b]=v.useState(null),[D,O]=v.useState({}),[C,z]=v.useState(null),[j,N]=v.useState(!1),[w,T]=v.useState(null),[A,k]=v.useState([]),M=[{id:"sakura_festival",name:"  ",season:"spring",icon:"",description:"     !     .",startDay:5,duration:3,activities:[{id:"hanami",name:" ",icon:"",description:"       .",stamina:10,rewards:{exp:50,affection:[{character:"sakura",amount:10},{character:"hana",amount:8}]},dialogues:["  !","   .","   !"]},{id:"photo_contest",name:" ",icon:"",description:"    !",stamina:15,rewards:{exp:75,money:200,items:["sakura_photo"]},minigame:"photo_snap",successRate:70},{id:"spring_confession",name:" ",icon:"",description:"    .",stamina:20,rewards:{affection:[{character:"any",amount:20}],items:["confession_letter"]},requiredAffection:{character:"any",amount:60}},{id:"food_stall",name:" ",icon:"",description:"   .",stamina:5,rewards:{exp:30,money:-50,affection:[{character:"mei",amount:10}]}}],specialRewards:[{id:"sakura_crown",name:" ",icon:"",type:"item",requirement:{participations:5}},{id:"spring_memory",name:" ",icon:"",type:"memory",requirement:{character:"sakura",affection:80}}]},{id:"spring_sports",name:"  ",season:"spring",icon:"",description:"  !    .",startDay:15,duration:2,activities:[{id:"relay_race",name:" ",icon:"",description:"   ",stamina:25,rewards:{exp:100,money:300,affection:[{character:"akane",amount:15}]},minigame:"running",successRate:60},{id:"tug_of_war",name:"",icon:"",description:"   !",stamina:20,rewards:{exp:80,items:["victory_flag"]}},{id:"cheering",name:"",icon:"",description:"  .",stamina:10,rewards:{exp:40,affection:[{character:"all",amount:5}]}}],specialRewards:[{id:"champion_medal",name:" ",icon:"",type:"item",requirement:{score:500}}]},{id:"summer_festival",name:"  ",season:"summer",icon:"",description:"   !    .",startDay:35,duration:3,activities:[{id:"fireworks",name:" ",icon:"",description:"   .",stamina:10,rewards:{exp:60,affection:[{character:"yuki",amount:12}]},dialogues:["  !","    .","  ."]},{id:"goldfish_scooping",name:" ",icon:"",description:"    !",stamina:15,rewards:{exp:50,items:["goldfish"],money:-30},minigame:"scooping",successRate:40},{id:"yukata_date",name:" ",icon:"",description:"   .",stamina:20,rewards:{affection:[{character:"luna",amount:15}],items:["yukata_photo"]},requiredAffection:{character:"any",amount:50}},{id:"shaved_ice",name:" ",icon:"",description:"   .",stamina:5,rewards:{exp:25,money:-20,affection:[{character:"mei",amount:8}]}}],specialRewards:[{id:"festival_mask",name:" ",icon:"",type:"item",requirement:{participations:4}},{id:"summer_night_memory",name:" ",icon:"",type:"memory",requirement:{character:"yuki",affection:75}}]},{id:"beach_trip",name:"  ",season:"summer",icon:"",description:"     !     .",startDay:45,duration:2,activities:[{id:"swimming",name:"",icon:"",description:"   .",stamina:20,rewards:{exp:70,affection:[{character:"akane",amount:10}]}},{id:"sandcastle",name:" ",icon:"",description:"  .",stamina:15,rewards:{exp:60,items:["sandcastle_trophy"],affection:[{character:"hana",amount:10}]},minigame:"building"},{id:"beach_volleyball",name:"",icon:"",description:"  !",stamina:25,rewards:{exp:90,money:150,affection:[{character:"sakura",amount:12}]}},{id:"sunset_walk",name:" ",icon:"",description:"   ",stamina:10,rewards:{affection:[{character:"any",amount:18}],items:["sunset_photo"]},requiredAffection:{character:"any",amount:65}}],specialRewards:[{id:"summer_swimsuit",name:" ",icon:"",type:"skin",requirement:{participations:6}}]},{id:"harvest_festival",name:" ",season:"autumn",icon:"",description:"    !      .",startDay:65,duration:3,activities:[{id:"harvest_crops",name:" ",icon:"",description:"  .",stamina:15,rewards:{exp:65,items:["autumn_crops"],money:100}},{id:"cooking_contest",name:" ",icon:"",description:"    !",stamina:20,rewards:{exp:85,money:250,affection:[{character:"mei",amount:20}]},minigame:"cooking"},{id:"autumn_leaves",name:" ",icon:"",description:"  .",stamina:10,rewards:{exp:45,affection:[{character:"sora",amount:12}]}},{id:"harvest_dance",name:" ",icon:"",description:"   .",stamina:15,rewards:{exp:70,affection:[{character:"all",amount:8}]}}],specialRewards:[{id:"harvest_crown",name:" ",icon:"",type:"item",requirement:{score:400}}]},{id:"halloween",name:"  ",season:"autumn",icon:"",description:"   !     .",startDay:75,duration:2,activities:[{id:"costume_party",name:" ",icon:"",description:"    !",stamina:15,rewards:{exp:80,items:["halloween_costume"],affection:[{character:"rin",amount:15}]}},{id:"trick_or_treat",name:"  ",icon:"",description:"  .",stamina:20,rewards:{exp:60,items:["candy_bag"],money:80}},{id:"haunted_house",name:" ",icon:"",description:"   !",stamina:25,rewards:{exp:100,affection:[{character:"luna",amount:18}],items:["courage_badge"]},successRate:50},{id:"pumpkin_carving",name:" ",icon:"",description:"   .",stamina:10,rewards:{exp:50,items:["jack_o_lantern"]}}],specialRewards:[{id:"vampire_cape",name:" ",icon:"",type:"skin",requirement:{participations:5}}]},{id:"christmas",name:" ",season:"winter",icon:"",description:"  !    .",startDay:85,duration:3,activities:[{id:"christmas_date",name:" ",icon:"",description:"  ",stamina:20,rewards:{affection:[{character:"any",amount:25}],items:["christmas_gift"]},requiredAffection:{character:"any",amount:70}},{id:"gift_exchange",name:" ",icon:"",description:"  .",stamina:10,rewards:{exp:60,items:["mystery_gift"],affection:[{character:"all",amount:10}]}},{id:"christmas_tree",name:" ",icon:"",description:"  .",stamina:15,rewards:{exp:70,affection:[{character:"hana",amount:12}]}},{id:"carol_singing",name:" ",icon:"",description:"  .",stamina:10,rewards:{exp:50,affection:[{character:"all",amount:6}]}}],specialRewards:[{id:"santa_hat",name:" ",icon:"",type:"item",requirement:{participations:4}},{id:"white_christmas_memory",name:" ",icon:"",type:"memory",requirement:{character:"any",affection:90}}]},{id:"new_year",name:"  ",season:"winter",icon:"",description:"   !     .",startDay:95,duration:2,activities:[{id:"shrine_visit",name:" ",icon:"",description:"    .",stamina:15,rewards:{exp:75,items:["fortune_charm"],affection:[{character:"sakura",amount:14}]}},{id:"mochi_making",name:" ",icon:"",description:"  .",stamina:20,rewards:{exp:65,items:["mochi"],affection:[{character:"mei",amount:12}]}},{id:"sunrise_viewing",name:" ",icon:"",description:"   .",stamina:10,rewards:{exp:80,affection:[{character:"any",amount:20}],items:["sunrise_photo"]},requiredAffection:{character:"any",amount:60}},{id:"fortune_telling",name:" ",icon:"",description:"  .",stamina:5,rewards:{exp:30,items:["fortune_paper"]}}],specialRewards:[{id:"kimono",name:" ",icon:"",type:"skin",requirement:{participations:4}}]},{id:"snow_festival",name:"  ",season:"winter",icon:"",description:"    !       .",startDay:105,duration:3,activities:[{id:"snowman_building",name:" ",icon:"",description:"  !",stamina:15,rewards:{exp:60,items:["snowman_trophy"],affection:[{character:"yuki",amount:20}]},minigame:"snowman"},{id:"snowball_fight",name:"",icon:"",description:" !",stamina:20,rewards:{exp:70,affection:[{character:"akane",amount:14}]}},{id:"ice_skating",name:" ",icon:"",description:"   .",stamina:18,rewards:{exp:80,affection:[{character:"luna",amount:16}]},requiredLevel:10},{id:"hot_chocolate",name:" ",icon:"",description:"   .",stamina:5,rewards:{exp:25,money:-30,affection:[{character:"all",amount:4}]}}],specialRewards:[{id:"snow_queen_crown",name:"  ",icon:"",type:"item",requirement:{score:500}},{id:"winter_love_memory",name:" ",icon:"",type:"memory",requirement:{character:"yuki",affection:85}}]}],Y=v.useCallback(()=>{const E=i.day;return E<=30?"spring":E<=60?"summer":E<=90?"autumn":"winter"},[i.day]),B=v.useCallback(()=>{const E=Y(),U=i.day,R=M.find(q=>q.season===E&&U>=q.startDay&&U<q.startDay+q.duration);b(R||null)},[i.day,Y]),ae=v.useCallback(E=>{if(!S)return;if(i.stamina<E.stamina){T({success:!1,message:" !"}),N(!0);return}if(E.requiredAffection&&!Object.values(i.affection).some(q=>q>=E.requiredAffection.amount)){T({success:!1,message:" !"}),N(!0);return}if(!E.successRate||Math.random()*100<E.successRate){E.rewards.exp&&o(E.rewards.exp),E.rewards.money&&u(E.rewards.money),E.rewards.items&&E.rewards.items.forEach(q=>m(q)),E.rewards.affection&&E.rewards.affection.forEach(q=>{if(q.character==="all")Object.keys(i.affection).forEach(h=>d(h,q.amount));else if(q.character==="any"){const h=Object.entries(i.affection).sort((H,J)=>J[1]-H[1])[0][0];d(h,q.amount)}else d(q.character,q.amount)});const R=D[S.id]||{eventId:S.id,participations:0,completedActivities:[],earnedRewards:[],specialMoments:[],totalScore:0};R.participations++,R.completedActivities.includes(E.id)||R.completedActivities.push(E.id),R.totalScore+=E.rewards.exp||0,O(q=>({...q,[S.id]:R})),G(S,R),T({success:!0,message:"  !",rewards:E.rewards})}else T({success:!1,message:" .  !"});y({stamina:-E.stamina}),g(),N(!0)},[S,i,D,o,u,m,d,y,g]),G=v.useCallback((E,U)=>{E.specialRewards.forEach(R=>{if(U.earnedRewards.includes(R.id))return;let q=!1;R.requirement.participations&&U.participations>=R.requirement.participations&&(q=!0),R.requirement.score&&U.totalScore>=R.requirement.score&&(q=!0),R.requirement.character&&R.requirement.affection&&(i.affection[R.requirement.character]||0)>=R.requirement.affection&&(q=!0),q&&(U.earnedRewards.push(R.id),R.type==="item"?m(R.id):R.type==="memory"&&k(h=>[...h,R.id]),T(h=>({...h,specialReward:R})))})},[i.affection,m]);v.useEffect(()=>{x(Y()),B()},[Y,B]);const le=()=>{switch(p){case"spring":return"from-pink-400 via-pink-300 to-blue-300";case"summer":return"from-blue-400 via-cyan-300 to-yellow-300";case"autumn":return"from-orange-400 via-red-400 to-yellow-500";case"winter":return"from-blue-200 via-gray-200 to-white";default:return"from-purple-400 to-pink-400"}};return e.jsx("div",{className:`min-h-screen bg-gradient-to-b ${le()} p-4`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:[p==="spring"&&" ",p==="summer"&&" ",p==="autumn"&&" ",p==="winter"&&" "," "]}),e.jsx("p",{className:"text-gray-600",children:"    !"})]}),e.jsx("button",{onClick:()=>r("/game"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition",children:" "})]})}),S?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("span",{className:"text-6xl",children:S.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:S.name}),e.jsx("p",{className:"text-gray-600 mt-2",children:S.description}),e.jsxs("div",{className:"flex gap-4 mt-3 text-sm text-gray-500",children:[e.jsxs("span",{children:[" Day ",i.day," / ",S.startDay+S.duration-1]}),e.jsxs("span",{children:[" ",S.startDay+S.duration-i.day," "]})]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-4",children:"  "}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.activities.map(E=>e.jsx("button",{onClick:()=>z(E),className:"bg-gradient-to-r from-white to-gray-50 rounded-lg p-4 border-2 border-gray-200 hover:border-blue-400 transition-all hover:scale-[1.02] text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-3xl",children:E.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-800",children:E.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.description}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-blue-600",children:[" ",E.stamina]}),e.jsxs("span",{className:"text-green-600",children:[E.rewards.exp&&`EXP +${E.rewards.exp}`,E.rewards.money&&`  ${E.rewards.money>0?"+":""}${E.rewards.money}`]})]})]})]})},E.id))})]}),C&&e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-700 mb-4",children:[C.icon," ",C.name]}),e.jsx("p",{className:"text-gray-600 mb-4",children:C.description}),C.requiredAffection&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-300 rounded-lg p-3 mb-4",children:e.jsxs("span",{className:"text-yellow-800",children:[" :  ",C.requiredAffection.amount," "]})}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"font-bold text-green-800 mb-2",children:""}),e.jsxs("div",{className:"space-y-1 text-sm text-green-700",children:[C.rewards.exp&&e.jsxs("div",{children:["  +",C.rewards.exp]}),C.rewards.money&&e.jsxs("div",{children:["  ",C.rewards.money>0?"+":"",C.rewards.money]}),C.rewards.items&&e.jsxs("div",{children:[" : ",C.rewards.items.join(", ")]}),C.rewards.affection&&e.jsxs("div",{children:[" : ",C.rewards.affection.map(E=>`${E.character} +${E.amount}`).join(", ")]})]})]}),e.jsxs("button",{onClick:()=>ae(C),className:"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg font-bold transition",children:[" ( ",C.stamina,")"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"  "}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:" "}),e.jsxs("span",{children:[D[S.id]?.participations||0,""]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:`${Math.min((D[S.id]?.participations||0)/10*100,100)}%`}})})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{children:[" : ",D[S.id]?.completedActivities?.length||0,"/",S.activities.length]}),e.jsxs("div",{children:[" : ",D[S.id]?.totalScore||0]})]})]})]}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"  "}),e.jsx("div",{className:"space-y-3",children:S.specialRewards.map(E=>{const U=D[S.id]?.earnedRewards?.includes(E.id);return e.jsx("div",{className:`p-3 rounded-lg border ${U?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:E.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-sm text-gray-700",children:E.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.requirement.participations&&` ${E.requirement.participations}`,E.requirement.score&&` ${E.requirement.score}`,E.requirement.affection&&` ${E.requirement.affection}`]})]}),U&&e.jsx("span",{className:"text-green-500",children:""})]})},E.id)})})]}),A.length>0&&e.jsxs("div",{className:"bg-gradient-to-r from-pink-100 to-purple-100 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-3",children:"  "}),e.jsx("div",{className:"space-y-2",children:A.map(E=>e.jsxs("div",{className:"text-sm text-purple-700",children:[" ",E]},E))})]})]})]}):e.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-lg shadow-lg p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"    "}),e.jsx("p",{className:"text-gray-600 mb-6",children:"  !"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:" "}),e.jsx("div",{className:"space-y-3",children:M.filter(E=>E.season===p&&E.startDay>i.day).slice(0,3).map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:E.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-gray-700",children:E.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Day ",E.startDay,""]})]})]}),e.jsxs("div",{className:"text-sm text-blue-600",children:[E.startDay-i.day," "]})]},E.id))})]})]}),j&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:w.success?"":""}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:w.success?"!":""}),e.jsx("p",{className:"text-gray-600 mb-4",children:w.message}),w.rewards&&e.jsx("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-sm text-green-700",children:[w.rewards.exp&&e.jsxs("div",{children:[" +",w.rewards.exp]}),w.rewards.money&&e.jsxs("div",{children:[" +",w.rewards.money]}),w.rewards.items&&e.jsx("div",{children:" !"})]})}),w.specialReward&&e.jsx("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-purple-700",children:[e.jsx("div",{className:"font-bold",children:"   !"}),e.jsxs("div",{children:[w.specialReward.icon," ",w.specialReward.name]})]})}),e.jsx("button",{onClick:()=>{N(!1),T(null),z(null)},className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-bold",children:""})]})})})]})})},Jl=[{id:"sakura_true",name:" ",type:"true",priority:10,characterId:"sakura",conditions:[{type:"affection",target:"sakura",value:100,comparison:"greater"},{type:"quest",target:"sakura_final",value:1,comparison:"equal"},{type:"item",target:"promise_ring",value:1,comparison:"greater"}],title:" ",description:["  ,      .",'"   ?   ..."',"      .",'"     .  ."'],epilogue:["  ,       ."," ,       .","   ,   ."],unlockables:{achievements:["true_love_sakura","perfect_ending"],titles:[" "," "],costumes:["wedding_dress_sakura","tuxedo"],gallery:["sakura_wedding","sakura_epilogue"]},bgm:"sakura_true_ending",specialEffects:["sakura_petals","golden_light"]},{id:"yuki_true",name:" ",type:"true",priority:10,characterId:"yuki",conditions:[{type:"affection",target:"yuki",value:100,comparison:"greater"},{type:"quest",target:"yuki_final",value:1,comparison:"equal"},{type:"achievement",target:"ice_queen_heart",value:1,comparison:"equal"}],title:" ",description:[",     .",'"  ...     ."',"   ,    .",'"     .  ."'],epilogue:["   ,    .","        .","        ."],unlockables:{achievements:["true_love_yuki","melted_heart"],titles:[" "," "],costumes:["winter_formal_yuki","winter_coat"],gallery:["yuki_confession","yuki_epilogue"]},bgm:"yuki_true_ending",specialEffects:["snow_fall","aurora"]},{id:"normal_sakura",name:" ",type:"normal",priority:5,characterId:"sakura",conditions:[{type:"affection",target:"sakura",value:70,comparison:"greater"},{type:"affection",target:"sakura",value:100,comparison:"less"}],title:" ",description:[" ,    .",'"   .   !"',"    ."," ,    ."],epilogue:["     .","  ,   ."],unlockables:{achievements:["normal_ending_sakura"],titles:[" "],gallery:["sakura_normal_ending"]},bgm:"graduation_theme"},{id:"bad_general",name:" ",type:"bad",priority:1,conditions:[{type:"stat",target:"max_affection",value:30,comparison:"less"}],title:" ",description:[" ,    .","     .","     ...","   ."],epilogue:["  ,   .","   ."],unlockables:{achievements:["lonely_ending"],titles:[" "]},bgm:"sad_theme"},{id:"harem_ending",name:" ",type:"secret",priority:15,conditions:[{type:"affection",target:"sakura",value:80,comparison:"greater"},{type:"affection",target:"yuki",value:80,comparison:"greater"},{type:"affection",target:"hikari",value:80,comparison:"greater"},{type:"affection",target:"luna",value:80,comparison:"greater"},{type:"achievement",target:"popular_guy",value:1,comparison:"equal"}],title:" ",description:["     .",'"   !"   .',"    .",'"!    !"'],epilogue:["     .","     (?) ...","      ."],unlockables:{achievements:["harem_master","popular_ending"],titles:[""," "],gallery:["harem_ending_cg"]},bgm:"comedy_theme",specialEffects:["heart_explosion","rainbow"]},{id:"villain_ending",name:" ",type:"secret",priority:20,conditions:[{type:"achievement",target:"defeat_all_bosses",value:1,comparison:"equal"},{type:"item",target:"dark_crown",value:1,comparison:"greater"},{type:"stat",target:"dark_points",value:100,comparison:"greater"}],title:" ",description:["       .",'"   !"',"    .","   ."],epilogue:["      .","     .","    ."],unlockables:{achievements:["dark_lord","villain_ending"],titles:[" "," "],costumes:["dark_armor","demon_wings"],gallery:["villain_coronation","dark_kingdom"]},bgm:"epic_villain_theme",specialEffects:["dark_aura","lightning"]},{id:"friendship_all",name:" ",type:"friendship",priority:7,conditions:[{type:"affection",target:"sakura",value:50,comparison:"greater"},{type:"affection",target:"yuki",value:50,comparison:"greater"},{type:"affection",target:"hikari",value:50,comparison:"greater"},{type:"affection",target:"luna",value:50,comparison:"greater"},{type:"affection",target:"max",value:70,comparison:"less"}],title:" ",description:[" ,    .",'"  !"   .',"  ,   .","   ."],epilogue:["10 ,    .","    ."," ."],unlockables:{achievements:["friendship_forever"],titles:[" "," "],gallery:["friendship_party"]},bgm:"friendship_theme"}],Mx=()=>{const r=ke(),i=re(),[d,o]=v.useState(null),[u,m]=v.useState("intro"),[g,y]=v.useState(0),[p,x]=v.useState([]),[S,b]=v.useState(!1);v.useEffect(()=>{j(),D()},[]);const D=()=>{const M=localStorage.getItem("unlockedEndings");M&&x(JSON.parse(M))},O=M=>{const Y=[...new Set([...p,M])];x(Y),localStorage.setItem("unlockedEndings",JSON.stringify(Y))},C=M=>{switch(M.type){case"affection":if(M.target==="max"){const le=Math.max(...Object.values(i.characterStates).map(E=>E.affection));return z(le,M.value,M.comparison)}if(M.target==="max_affection"){const le=Math.max(...Object.values(i.characterStates).map(E=>E.affection));return z(le,M.value,M.comparison)}const Y=i.characterStates[M.target];return Y?z(Y.affection,M.value,M.comparison):!1;case"achievement":const B=i.achievements?.includes(M.target)||!1;return M.comparison==="equal"?B:!B;case"item":const ae=i.inventory.find(le=>le.id===M.target)?.quantity||0;return z(ae,M.value,M.comparison);case"quest":const G=i.completedQuests?.includes(M.target)?1:0;return z(G,M.value,M.comparison);case"stat":if(M.target==="dark_points")return z(i.darkPoints||0,M.value,M.comparison);if(M.target==="max_affection"){const le=Math.max(...Object.values(i.characterStates).map(E=>E.affection));return z(le,M.value,M.comparison)}return!1;default:return!1}},z=(M,Y,B)=>{switch(B){case"greater":return M>=Y;case"less":return M<Y;case"equal":return M===Y;default:return!1}},j=()=>{const Y=Jl.filter(B=>B.conditions.every(C)).sort((B,ae)=>ae.priority-B.priority)[0]||Jl.find(B=>B.id==="bad_general");o(Y),O(Y.id),Y.unlockables&&Y.unlockables.achievements&&i.unlockAchievements?.(Y.unlockables.achievements)},N=()=>{if(d)switch(u){case"intro":m("main"),y(0);break;case"main":g<d.description.length-1?y(g+1):(m("epilogue"),y(0));break;case"epilogue":g<d.epilogue.length-1?y(g+1):m("credits");break;case"credits":b(!0);break}},w=()=>{i.resetGame(),r("/")},T=()=>{const M={unlockedEndings:p,achievements:i.achievements,gallery:i.gallery};localStorage.setItem("newGamePlusData",JSON.stringify(M)),i.resetGame(),r("/character-creation")},A=M=>{switch(M){case"true":return"text-yellow-400 bg-yellow-900/20";case"normal":return"text-blue-400 bg-blue-900/20";case"bad":return"text-red-400 bg-red-900/20";case"secret":return"text-purple-400 bg-purple-900/20";case"friendship":return"text-green-400 bg-green-900/20";default:return"text-gray-400 bg-gray-900/20"}},k=()=>d?.specialEffects?d.specialEffects.map(M=>{switch(M){case"sakura_petals":return e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:[...Array(20)].map((Y,B)=>e.jsx("div",{className:"absolute animate-float",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*10}s`,animationDuration:`${10+Math.random()*10}s`},children:""},B))},M);case"snow_fall":return e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:[...Array(30)].map((Y,B)=>e.jsx("div",{className:"absolute animate-fall",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*5}s`},children:""},B))},M);case"golden_light":return e.jsx("div",{className:"fixed inset-0 pointer-events-none",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-yellow-900/20 to-transparent animate-pulse"})},M);default:return null}}):null;return S?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:" "}),e.jsx("div",{className:"grid gap-4 mb-8",children:Jl.map(M=>{const Y=p.includes(M.id);return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${Y?`${A(M.type)} border-current`:"bg-gray-800 border-gray-700 text-gray-500"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-1",children:Y?M.name:"???"}),e.jsx("p",{className:"text-sm opacity-75",children:Y?M.title:"   "})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${A(M.type)}`,children:M.type.toUpperCase()})]}),Y&&M.unlockables&&e.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[M.unlockables.achievements?.map(B=>e.jsxs("span",{className:"text-xs bg-yellow-900/30 px-2 py-1 rounded",children:[" ",B]},B)),M.unlockables.titles?.map(B=>e.jsxs("span",{className:"text-xs bg-blue-900/30 px-2 py-1 rounded",children:[" ",B]},B))]})]},M.id)})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("p",{className:"text-lg mb-4",children:[": ",p.length," / ",Jl.length," (",Math.round(p.length/Jl.length*100),"%)"]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:w,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold",children:"  "}),p.length>0&&e.jsx("button",{onClick:T,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold",children:" + "}),e.jsx("button",{onClick:()=>r("/"),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-semibold",children:" "})]})]})]})}):d?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white relative overflow-hidden",children:[k(),e.jsx("div",{className:"min-h-screen flex items-center justify-center p-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl w-full",children:[u==="intro"&&e.jsxs("div",{className:"text-center animate-fade-in",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4",children:"ENDING"}),e.jsx("h2",{className:`text-3xl mb-8 ${A(d.type)}`,children:d.name}),e.jsx("button",{onClick:N,className:"px-6 py-3 bg-white/10 hover:bg-white/20 rounded-lg",children:""})]}),u==="main"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:d.title}),e.jsx("p",{className:"text-lg leading-relaxed mb-6",children:d.description[g]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm opacity-50",children:[g+1," / ",d.description.length]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded",children:" "})]})]}),u==="epilogue"&&e.jsxs("div",{className:"bg-black/50 backdrop-blur p-8 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:""}),e.jsx("p",{className:"text-lg leading-relaxed mb-6 italic",children:d.epilogue[g]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm opacity-50",children:[g+1," / ",d.epilogue.length]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded",children:" "})]})]}),u==="credits"&&e.jsxs("div",{className:"text-center animate-fade-in",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8",children:"The End"}),d.unlockables&&e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"  "}),d.unlockables.achievements&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-75 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:d.unlockables.achievements.map(M=>e.jsxs("span",{className:"px-3 py-1 bg-yellow-900/30 rounded",children:[" ",M]},M))})]}),d.unlockables.titles&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-75 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:d.unlockables.titles.map(M=>e.jsxs("span",{className:"px-3 py-1 bg-blue-900/30 rounded",children:[" ",M]},M))})]}),d.unlockables.costumes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-75 mb-2",children:""}),e.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:d.unlockables.costumes.map(M=>e.jsxs("span",{className:"px-3 py-1 bg-purple-900/30 rounded",children:[" ",M]},M))})]})]}),e.jsx("button",{onClick:N,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 rounded-lg text-lg font-semibold",children:"  "})]})]})})]}):null},eo=[{id:"sakura_first_date",characterId:"sakura",name:" ",icon:"",requiredAffection:30,location:"park",timeOfDay:"afternoon",season:"spring",description:"   ",dialogue:["    .",'"...   .  ?"',"    .",'"...     ."'],choices:[{text:"  ",affectionChange:10,response:"       .",flag:"sakura_held_hands"},{text:"  ",affectionChange:5,response:'"...     ."  .'},{text:"   ?",affectionChange:-5,response:'"... ,   ."     .'}],rewards:{memory:"sakura_first_date_memory",achievement:"first_date"},priority:10},{id:"sakura_confession",characterId:"sakura",name:"  ",icon:"",requiredAffection:70,requiredFlags:["sakura_held_hands"],location:"school_rooftop",timeOfDay:"evening",season:"spring",description:"     ",dialogue:["  ,     .",'"...   ..."',"     .",'"...   !   !"','"   ...  ."'],choices:[{text:"  ",affectionChange:20,response:'    . "...  !"',flag:"sakura_lovers",unlocks:"sakura_true_route"},{text:"   ",affectionChange:0,response:'"... .    ."   .',flag:"sakura_pending"},{text:",  ",affectionChange:-30,response:'   . "... . ..."',flag:"sakura_rejected"}],rewards:{achievement:"love_confession",title:" "},cg:"sakura_confession_cg",bgm:"romantic_theme",priority:20},{id:"yuki_library_encounter",characterId:"yuki",name:" ",icon:"",requiredAffection:25,location:"library",timeOfDay:"evening",description:"    ",dialogue:[" ,     .",'"?    ?"',"     .",'" ? ...   ."'],choices:[{text:",  ",affectionChange:8,response:'   . ".      ."',flag:"yuki_study_buddy"},{text:"  ?",affectionChange:10,response:'" .   ?"     .',flag:"yuki_book_interest"},{text:"   ",affectionChange:-3,response:'"... ."     .'}],rewards:{items:[{id:"bookmark",quantity:1}],memory:"yuki_library_memory"},isRepeatable:!1,priority:8},{id:"yuki_snow_walk",characterId:"yuki",name:"   ",icon:"",requiredAffection:60,requiredFlags:["yuki_study_buddy"],season:"winter",timeOfDay:"evening",description:"     ",dialogue:["    ,    .",'"...  .    ."',"     .",'"...   ?"',"   .",'"...      ."'],choices:[{text:" ",affectionChange:15,response:'     . "... ."',flag:"yuki_held_hands",unlocks:"yuki_romance_route"},{text:" ",affectionChange:12,response:'"... ."    . "  ... ."',flag:"yuki_scarf_given"},{text:" ",affectionChange:-5,response:'"...? , ."    .'}],rewards:{achievement:"winter_romance",memory:"yuki_snow_walk_memory"},cg:"yuki_snow_scene",bgm:"winter_melody",priority:15},{id:"hikari_sports_festival",characterId:"hikari",name:" ",icon:"",requiredAffection:20,location:"sports_field",timeOfDay:"afternoon",season:"autumn",description:"    ",dialogue:['"!   2 3 ?"    .','"   1!"'," ,    .",'" !  !"'],choices:[{text:"  ",affectionChange:10,response:'"!  1!  !"    .',flag:"hikari_sports_win"},{text:"  ",affectionChange:7,response:'"!   !"   .'},{text:"",affectionChange:5,response:'"?  ?"    .',flag:"hikari_cared"}],rewards:{items:[{id:"sports_medal",quantity:1}],achievement:"sports_partner"},priority:7},{id:"hikari_training_together",characterId:"hikari",name:" ",icon:"",requiredAffection:50,requiredFlags:["hikari_sports_win"],location:"training_ground",timeOfDay:"morning",description:"   ",dialogue:[" ,    .",'"!    !"',"  ,      .",'"...  .    ."',"     .",'"...    . ... ."'],choices:[{text:"  ",affectionChange:18,response:'  . "... ?  ... ?"',flag:"hikari_confession",unlocks:"hikari_romance_route"},{text:"  ",affectionChange:5,response:'"... . , !"      .'},{text:"  ?",affectionChange:-10,response:'"...  !  !"   .',flag:"hikari_embarrassed"}],rewards:{achievement:"training_bond",title:" "},cg:"hikari_training_cg",priority:12},{id:"luna_moonlight_magic",characterId:"luna",name:" ",icon:"",requiredAffection:35,location:"magic_tower",timeOfDay:"night",description:"    ",dialogue:["  ,      .",'".      ."',"      .",'"?     ."'],choices:[{text:" ",affectionChange:12,response:'",   ."    .',flag:"luna_magic_appreciation"},{text:"   ",affectionChange:10,response:'"?   .  ."    .',flag:"luna_magic_student"},{text:" ?",affectionChange:-2,response:'" .    ."    .'}],rewards:{items:[{id:"moon_charm",quantity:1}],memory:"luna_moonlight_memory"},cg:"luna_magic_scene",bgm:"mystical_night",priority:9},{id:"luna_stargazing",characterId:"luna",name:"  ",icon:"",requiredAffection:65,requiredFlags:["luna_magic_appreciation"],location:"observatory",timeOfDay:"night",season:"summer",description:"   ",dialogue:["     .",'"  ?     ."','" ,      ."',"   .",'"...     ."','"     .   ."'],choices:[{text:"",affectionChange:25,response:'   . "...  ."',flag:"luna_first_kiss",unlocks:"luna_true_route"},{text:"  ",affectionChange:20,response:'"...?     ."   .',flag:"luna_mutual_love"},{text:"  ",affectionChange:0,response:'"...  ."     .'}],rewards:{achievement:"star_crossed_lovers",title:" ",memory:"luna_confession_memory"},cg:"luna_stargazing_cg",bgm:"romantic_stars",priority:18},{id:"aria_music_lesson",characterId:"aria",name:" ",icon:"",requiredAffection:30,location:"music_room",timeOfDay:"afternoon",description:"   ",dialogue:["     .",'"!      ."',"      .",'"... .    ."'],choices:[{text:"   ",affectionChange:12,response:'   "... ."  .',flag:"aria_hand_touch"},{text:" ",affectionChange:8,response:'" !    !"  .'},{text:" ",affectionChange:-3,response:'",  ."     .'}],rewards:{items:[{id:"music_sheet",quantity:1}],memory:"aria_lesson_memory"},priority:8},{id:"aria_concert",characterId:"aria",name:"  ",icon:"",requiredAffection:75,requiredFlags:["aria_hand_touch"],location:"concert_hall",timeOfDay:"evening",description:"   ",dialogue:["  ,     .",'"...   ."',"   .    .","    .",`" ...    .  ' '."`],choices:[{text:"  ",affectionChange:25,response:'     . "... !"',flag:"aria_lovers",unlocks:"aria_true_route"},{text:", ",affectionChange:10,response:'"  ."   .'},{text:"",affectionChange:-20,response:'  . "... .   ..."',flag:"aria_rejected"}],rewards:{achievement:"melody_of_love",title:" ",items:[{id:"love_song_cd",quantity:1}]},cg:"aria_concert_cg",bgm:"aria_love_theme",priority:20},{id:"beach_episode",characterId:"all",name:"  ",icon:"",requiredAffection:40,season:"summer",location:"beach",description:"   ",dialogue:[" ,     .",'"! !"   .','"  ..."   .','" ?"  .','" !"    .'],choices:[{text:" ",affectionChange:8,response:"   .",flag:"beach_hikari"},{text:"  ",affectionChange:8,response:"     .",flag:"beach_yuki"},{text:"  ",affectionChange:5,response:"    .",flag:"beach_all"}],rewards:{memory:"summer_beach_memory",achievement:"beach_episode",items:[{id:"beach_photo",quantity:1}]},cg:"beach_episode_cg",isRepeatable:!1,priority:15},{id:"festival_fireworks",characterId:"all",name:" ",icon:"",requiredAffection:50,season:"summer",location:"festival",timeOfDay:"night",description:"    ",dialogue:[" ,    .",'"  !"  .','"    ?"'],choices:[{text:" ",affectionChange:10,response:'    . " ..."',flag:"fireworks_sakura"},{text:" ",affectionChange:10,response:'    . "  ..."',flag:"fireworks_yuki"},{text:" ",affectionChange:-5,response:"    .",flag:"fireworks_alone"}],rewards:{memory:"festival_memory",achievement:"summer_festival"},cg:"fireworks_cg",bgm:"festival_theme",priority:14},{id:"midnight_encounter",characterId:"mystery",name:" ",icon:"",requiredAffection:80,requiredFlags:["explored_hidden_area"],location:"secret_garden",timeOfDay:"night",description:"   ",dialogue:["   ,    .",'" ...  ."','"     ...     ."','"  ?   ..."'],choices:[{text:" ",affectionChange:20,response:"      .   .",flag:"mystery_route_start",unlocks:"hidden_character_route"},{text:" ",affectionChange:5,response:'"    . ...   ."',flag:"mystery_curious"},{text:"",affectionChange:-10,response:'"...    ."  .',flag:"mystery_declined"}],rewards:{achievement:"hidden_encounter",memory:"mystery_meeting",title:" "},cg:"mystery_garden_cg",bgm:"mysterious_theme",priority:25}],Vb=()=>{const r=ke(),i=re(),[d,o]=v.useState(null),[u,m]=v.useState(0),[g,y]=v.useState(!1),[p,x]=v.useState([]),[S,b]=v.useState([]),[D,O]=v.useState([]),[C,z]=v.useState(null);v.useEffect(()=>{j(),A()},[i.characterStates]);const j=()=>{const G=localStorage.getItem("completedRomanceEvents");G&&x(JSON.parse(G));const le=localStorage.getItem("eventGallery");le&&O(JSON.parse(le))},N=G=>{const le=[...p,G];x(le),localStorage.setItem("completedRomanceEvents",JSON.stringify(le))},w=G=>{const le=[...new Set([...D,G])];O(le),localStorage.setItem("eventGallery",JSON.stringify(le))},T=G=>{if(p.includes(G.id)&&!G.isRepeatable)return!1;if(G.characterId==="all"||G.characterId==="mystery"){if(Math.max(...Object.values(i.characterStates).map(E=>E.affection||0))<G.requiredAffection)return!1}else{const le=i.characterStates[G.characterId];if(!le||(le.affection||0)<G.requiredAffection)return!1}if(G.requiredFlags){const le=i.eventFlags||[];if(!G.requiredFlags.every(E=>le.includes(E)))return!1}if(G.excludeFlags){const le=i.eventFlags||[];if(G.excludeFlags.some(E=>le.includes(E)))return!1}return!(G.location&&i.currentLocation!==G.location||G.timeOfDay&&i.timeOfDay!==G.timeOfDay||G.season&&i.season!==G.season)},A=()=>{const G=eo.filter(T).sort((le,E)=>(E.priority||0)-(le.priority||0));b(G)},k=G=>{o(G),m(0),y(!1),z(null),G.bgm},M=()=>{if(d){if(C){B();return}u<d.dialogue.length-1?m(u+1):y(!0)}},Y=G=>{if(d){if(d.characterId==="all"?Object.keys(i.characterStates).forEach(le=>{i.updateCharacterState(le,{affection:Math.min(100,(i.characterStates[le].affection||0)+G.affectionChange)})}):d.characterId!=="mystery"&&i.updateCharacterState(d.characterId,{affection:Math.min(100,(i.characterStates[d.characterId].affection||0)+G.affectionChange)}),G.flag){const le=i.eventFlags||[];i.setEventFlags?.([...le,G.flag])}G.unlocks&&console.log("Unlocked:",G.unlocks),z(G.response)}},B=()=>{if(d){if(d.isRepeatable||N(d.id),d.cg&&w(d.cg),d.rewards){if(d.rewards.items&&d.rewards.items.forEach(G=>{i.addToInventory(G.id,G.quantity)}),d.rewards.achievement,d.rewards.memory){const G=i.memories||[];i.setMemories?.([...G,d.rewards.memory])}if(d.rewards.title){const G=i.unlockedTitles||[];i.setUnlockedTitles?.([...G,d.rewards.title])}}o(null),m(0),y(!1),z(null),A()}},ae=()=>d?e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-b from-pink-900/90 to-purple-900/90 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-black/30 p-4 border-b border-white/20",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:d.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:d.name}),e.jsx("p",{className:"text-pink-200 text-sm",children:d.description})]})]})})}),e.jsxs("div",{className:"p-6",children:[d.cg&&e.jsx("div",{className:"mb-4 rounded-lg overflow-hidden bg-black/20 p-2",children:e.jsx("div",{className:"aspect-video bg-gradient-to-br from-pink-600/20 to-purple-600/20 rounded flex items-center justify-center",children:e.jsxs("span",{className:"text-white/50 text-lg",children:["[CG: ",d.cg,"]"]})})}),!g&&!C&&e.jsxs("div",{className:"bg-black/30 rounded-lg p-6 mb-4",children:[e.jsx("p",{className:"text-white text-lg leading-relaxed",children:d.dialogue[u]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-white/50 text-sm",children:[u+1," / ",d.dialogue.length]}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-white transition-colors",children:" "})]})]}),C&&e.jsxs("div",{className:"bg-gradient-to-r from-pink-500/30 to-purple-500/30 rounded-lg p-6 mb-4",children:[e.jsx("p",{className:"text-white text-lg italic",children:C}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:B,className:"px-6 py-2 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 rounded-lg text-white font-semibold transition-all transform hover:scale-105",children:""})})]}),g&&!C&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white/80 text-center mb-4",children:" ?"}),d.choices.map((G,le)=>e.jsx("button",{onClick:()=>Y(G),className:"w-full p-4 bg-gradient-to-r from-pink-600/30 to-purple-600/30 hover:from-pink-600/50 hover:to-purple-600/50 rounded-lg text-white text-left transition-all transform hover:scale-[1.02] border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:G.text}),e.jsxs("span",{className:`text-sm ${G.affectionChange>0?"text-pink-300":G.affectionChange<0?"text-red-300":"text-gray-300"}`,children:[G.affectionChange>0&&"+",G.affectionChange!==0&&`${G.affectionChange} `]})]})},le))]})]})]})}):null;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-pink-900 to-purple-900 p-4",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-white flex items-center gap-3",children:" Romance Events"}),e.jsx("button",{onClick:()=>r("/game"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-white",children:""})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Available Events"}),S.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.slice(0,6).map(G=>e.jsx("button",{onClick:()=>k(G),className:"bg-gradient-to-br from-pink-600/30 to-purple-600/30 hover:from-pink-600/50 hover:to-purple-600/50 p-4 rounded-lg text-left transition-all transform hover:scale-105 border border-white/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-3xl",children:G.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-white",children:G.name}),e.jsx("p",{className:"text-sm text-pink-200 mt-1",children:G.description}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"px-2 py-1 bg-pink-500/30 rounded text-pink-200",children:[G.requiredAffection," "]}),G.season&&e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-blue-200",children:G.season})]})]})]})},G.id))}):e.jsx("p",{className:"text-white/60 text-center py-8",children:"    .      !"})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Event Gallery"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[p.map(G=>{const le=eo.find(E=>E.id===G);return le?e.jsx("div",{className:"bg-black/30 rounded-lg p-3 border border-white/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-2xl",children:le.icon}),e.jsx("p",{className:"text-sm text-white mt-2",children:le.name}),e.jsx("p",{className:"text-xs text-pink-200 mt-1",children:le.characterId==="all"?"":le.characterId})]})},G):null}),p.length===0&&e.jsx("div",{className:"col-span-full text-center text-white/40 py-8",children:"   "})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-white/60",children:["Completed: ",p.length," / ",eo.length]})})]})]}),ae()]})},to=[{id:"secret_garden",name:" ",description:"    ",icon:"",unlockCondition:{type:"puzzle",requirement:{puzzle:"moonlight_puzzle",solution:["moon","star","sun","moon"]}},rewards:{items:[{id:"eternal_flower",quantity:1}],achievement:"secret_garden_found",memory:"garden_discovery"},discovered:!1},{id:"underground_library",name:" ",description:"     ",icon:"",unlockCondition:{type:"item",requirement:{item:"ancient_key",quantity:1}},rewards:{items:[{id:"forbidden_tome",quantity:1},{id:"wisdom_crystal",quantity:3}],achievement:"forbidden_knowledge"},discovered:!1},{id:"crystal_cavern",name:" ",description:"    ",icon:"",unlockCondition:{type:"sequence",requirement:{locations:["waterfall","cave_entrance","hidden_path"],timeLimit:300}},rewards:{items:[{id:"rainbow_crystal",quantity:5},{id:"crystal_armor",quantity:1}],achievement:"crystal_explorer"},discovered:!1},{id:"sky_palace",name:" ",description:"     ",icon:"",unlockCondition:{type:"achievement",requirement:{achievements:["master_of_sky","wind_walker"]}},rewards:{items:[{id:"wings_of_heaven",quantity:1}],characterUnlock:"celestia",achievement:"sky_ruler"},discovered:!1},{id:"time_rift",name:" ",description:"    ",icon:"",unlockCondition:{type:"time",requirement:{realTime:"03:33:33",gameTime:"night"}},rewards:{items:[{id:"chronos_watch",quantity:1}],achievement:"time_traveler",memory:"time_rift_experience"},discovered:!1}],ao=[{id:"celestia",name:"",title:" ",description:"   ",portrait:"",unlockCondition:{type:"hidden_area",requirement:{area:"sky_palace"}},initialAffection:50,specialAbility:"  -   +20%",backstory:["     ","    ","   "]},{id:"shadow",name:"",title:"  ",description:"    ",portrait:"",unlockCondition:{type:"special",requirement:{condition:"defeat_shadow_boss_without_light"}},initialAffection:30,specialAbility:"  -  +50%",backstory:["    ","    ","     "]},{id:"alice",name:"",title:" ",description:"     ",portrait:"",unlockCondition:{type:"quest",requirement:{quest:"wonderland_mystery"}},initialAffection:40,specialAbility:" -    +100%",backstory:["   ","     ","    "]},{id:"phoenix",name:"",title:" ",description:"   ",portrait:"",unlockCondition:{type:"affection",requirement:{character:"hikari",affection:100,specialItem:"phoenix_feather"}},initialAffection:60,specialAbility:" -    1 ",backstory:["    ","    ","     "]}],so=[{id:"eternal_flower",name:" ",description:"   ",rarity:"mythic",icon:"",location:"secret_garden",hint:"   ",effects:[{type:"affection_boost",value:20},{type:"immortality",value:1}],lore:"    .        ."},{id:"dragon_heart",name:" ",description:"    ",rarity:"legendary",icon:"",location:"dragon_lair",hint:"    ",effects:[{type:"attack_power",value:100},{type:"fire_immunity",value:1}],lore:"   .   ,      ."},{id:"chronos_watch",name:" ",description:"     ",rarity:"unique",icon:"",location:"time_rift",hint:"  ",effects:[{type:"time_control",value:1},{type:"speed",value:50}],lore:"     .      ."},{id:"soul_gem",name:" ",description:"     ",rarity:"mythic",icon:"",location:"soul_altar",hint:"  100   ",effects:[{type:"resurrection",value:1},{type:"soul_link",value:1}],lore:"      .     ."},{id:"void_blade",name:" ",description:"  ",rarity:"legendary",icon:"",location:"dimension_rift",hint:"  1000  ",effects:[{type:"dimension_slash",value:1},{type:"critical_rate",value:100}],lore:"   .      ."}],Kl=[{id:"konami",code:"BA",hint:"   ",reward:"infinite_lives",used:!1},{id:"developer",code:"DEVMODE2025",hint:"  ",reward:"debug_menu",used:!1},{id:"true_love",code:"LOVEETERNAL",hint:"  ",reward:"all_affection_max",used:!1},{id:"matrix",code:"THEREISNOSP00N",hint:"  ",reward:"bullet_time",used:!1}],Zb=()=>{const r=ke(),i=re(),[d,o]=v.useState([]),[u,m]=v.useState([]),[g,y]=v.useState([]),[p,x]=v.useState([]),[S,b]=v.useState("areas"),[D,O]=v.useState(""),[C,z]=v.useState(null),[j,N]=v.useState(null);v.useEffect(()=>{w()},[]);const w=()=>{const E=localStorage.getItem("discoveredHiddenAreas"),U=localStorage.getItem("unlockedHiddenCharacters"),R=localStorage.getItem("foundHiddenItems"),q=localStorage.getItem("usedSecretCodes");E&&o(JSON.parse(E)),U&&m(JSON.parse(U)),R&&y(JSON.parse(R)),q&&x(JSON.parse(q))},T=(E,U)=>{switch(E){case"area":const R=[...d,U];o(R),localStorage.setItem("discoveredHiddenAreas",JSON.stringify(R));break;case"character":const q=[...u,U];m(q),localStorage.setItem("unlockedHiddenCharacters",JSON.stringify(q));break;case"item":const h=[...g,U];y(h),localStorage.setItem("foundHiddenItems",JSON.stringify(h));break;case"code":const H=[...p,U];x(H),localStorage.setItem("usedSecretCodes",JSON.stringify(H));break}},A=E=>{const U=E.unlockCondition;switch(U.type){case"item":const R=i.inventory.find(H=>H.id===U.requirement.item);return R?R.quantity>=U.requirement.quantity:!1;case"achievement":return U.requirement.achievements.every(H=>i.achievements?.includes(H));case"puzzle":return d.includes(E.id);case"time":const q=new Date;return`${String(q.getHours()).padStart(2,"0")}:${String(q.getMinutes()).padStart(2,"0")}:${String(q.getSeconds()).padStart(2,"0")}`===U.requirement.realTime&&i.timeOfDay===U.requirement.gameTime;case"sequence":return!1;default:return!1}},k=E=>{if(d.includes(E.id)){alert("  !");return}if(E.unlockCondition.type==="puzzle"){N({area:E,puzzle:E.unlockCondition.requirement});return}A(E)?M(E):(alert("   ."),z(E.id))},M=E=>{T("area",E.id),E.rewards.items&&E.rewards.items.forEach(U=>{i.addToInventory(U.id,U.quantity)}),E.rewards.achievement,E.rewards.characterUnlock&&T("character",E.rewards.characterUnlock),alert(` ${E.name} !  !`)},Y=E=>{const U=E.unlockCondition;switch(U.type){case"hidden_area":return d.includes(U.requirement.area);case"quest":return i.completedQuests?.includes(U.requirement.quest)||!1;case"affection":const R=i.characterStates[U.requirement.character],q=i.inventory.find(h=>h.id===U.requirement.specialItem);return R&&R.affection>=U.requirement.affection&&!!q;case"special":return u.includes(E.id);default:return!1}},B=E=>{if(u.includes(E.id)){alert("  !");return}Y(E)?(T("character",E.id),i.updateCharacterState(E.id,{name:E.name,affection:E.initialAffection,mood:"neutral"}),alert(`   ${E.name} !`)):(alert("   ."),z(E.id))},ae=()=>{const E=Kl.find(U=>U.code===D.toUpperCase());if(!E){alert(" .");return}if(p.includes(E.id)){alert("  .");return}switch(T("code",E.id),E.reward){case"infinite_lives":i.setLives?.(99999);break;case"all_affection_max":Object.keys(i.characterStates).forEach(U=>{i.updateCharacterState(U,{affection:100})});break;case"debug_menu":i.setDebugMode?.(!0);break;case"bullet_time":i.setTimeScale?.(.5);break}alert(`   ! ${E.hint}`),O("")},G=E=>{if(!j)return;const U=j.puzzle.solution.join(","),R=E.join(",");U===R?(M(j.area),N(null)):alert(" .  .")},le=()=>j?e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-b from-purple-900 to-black rounded-xl max-w-2xl w-full p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"  !"}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-6 mb-6",children:[e.jsx("p",{className:"text-white mb-4",children:" :    "}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:["moon","star","sun","cloud"].map(E=>e.jsx("button",{className:"p-4 bg-purple-600/50 hover:bg-purple-600/70 rounded-lg text-white text-2xl transition-all",onClick:()=>{},children:E==="moon"?"":E==="star"?"":E==="sun"?"":""},E))}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:()=>G(["moon","star","sun","moon"]),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg text-white font-semibold mr-4",children:""}),e.jsx("button",{onClick:()=>N(null),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg text-white font-semibold",children:""})]})]})]})}):null;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-black to-purple-900 p-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-purple-300 flex items-center gap-3",children:" Hidden Content"}),e.jsx("button",{onClick:()=>r("/game"),className:"px-4 py-2 bg-purple-600/30 hover:bg-purple-600/50 rounded-lg text-white",children:""})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["areas","characters","items","codes"].map(E=>e.jsx("button",{onClick:()=>b(E),className:`px-6 py-3 rounded-lg font-semibold transition-all ${S===E?"bg-purple-600 text-white":"bg-purple-900/30 text-purple-300 hover:bg-purple-900/50"}`,children:E==="areas"?"  ":E==="characters"?"  ":E==="items"?"  ":"  "},E))}),S==="areas"&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:to.map(E=>{const U=d.includes(E.id);return e.jsxs("div",{className:`relative rounded-xl p-6 transition-all transform hover:scale-105 ${U?"bg-gradient-to-br from-purple-600/50 to-pink-600/50 border-2 border-purple-400":"bg-gray-800/50 border-2 border-gray-700"}`,children:[U&&e.jsx("div",{className:"absolute top-2 right-2 text-yellow-400",children:" Discovered"}),e.jsx("div",{className:"text-4xl mb-3",children:E.icon}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:U?E.name:"???"}),e.jsx("p",{className:"text-purple-200 text-sm mb-4",children:U?E.description:" "}),!U&&e.jsx("button",{onClick:()=>k(E),className:"w-full px-4 py-2 bg-purple-600/50 hover:bg-purple-600/70 rounded-lg text-white",children:""}),C===E.id&&!U&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-900/30 rounded text-yellow-300 text-xs",children:[" : ",E.unlockCondition.type==="item"?"  ":E.unlockCondition.type==="puzzle"?"  ":E.unlockCondition.type==="time"?"  ":"  "]}),U&&E.rewards&&e.jsxs("div",{className:"mt-4 p-3 bg-black/30 rounded",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-2",children:" :"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.rewards.items?.map(R=>e.jsxs("span",{className:"text-xs bg-purple-600/30 px-2 py-1 rounded",children:[R.id," x",R.quantity]},R.id)),E.rewards.achievement&&e.jsxs("span",{className:"text-xs bg-yellow-600/30 px-2 py-1 rounded",children:[" ",E.rewards.achievement]})]})]})]},E.id)})}),S==="characters"&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:ao.map(E=>{const U=u.includes(E.id);return e.jsxs("div",{className:`relative rounded-xl p-6 transition-all ${U?"bg-gradient-to-br from-pink-600/50 to-purple-600/50 border-2 border-pink-400":"bg-gray-800/50 border-2 border-gray-700"}`,children:[U&&e.jsx("div",{className:"absolute top-2 right-2 text-yellow-400",children:" Unlocked"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"text-6xl mb-2",children:E.portrait}),e.jsx("h3",{className:"text-xl font-bold text-white",children:U?E.name:"???"}),e.jsx("p",{className:"text-purple-300 text-sm",children:U?E.title:" "})]}),U&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-white text-sm mb-3",children:E.description}),e.jsxs("div",{className:"p-3 bg-black/30 rounded mb-3",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-1",children:" :"}),e.jsx("p",{className:"text-white text-sm",children:E.specialAbility})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-pink-300",children:[" : ",E.initialAffection]}),e.jsx("button",{onClick:()=>r(`/character/${E.id}`),className:"px-3 py-1 bg-pink-600/50 hover:bg-pink-600/70 rounded text-white text-sm",children:""})]})]}),!U&&e.jsx("button",{onClick:()=>B(E),className:"w-full px-4 py-2 bg-purple-600/50 hover:bg-purple-600/70 rounded-lg text-white",children:" "}),C===E.id&&!U&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-900/30 rounded text-yellow-300 text-xs",children:" :    "})]},E.id)})}),S==="items"&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:so.map(E=>{const U=g.includes(E.id);return e.jsxs("div",{className:`rounded-xl p-6 transition-all ${U?`bg-gradient-to-br ${E.rarity==="mythic"?"from-red-600/50 to-orange-600/50":E.rarity==="legendary"?"from-yellow-600/50 to-amber-600/50":"from-blue-600/50 to-cyan-600/50"} border-2 ${E.rarity==="mythic"?"border-red-400":E.rarity==="legendary"?"border-yellow-400":"border-blue-400"}`:"bg-gray-800/50 border-2 border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"text-4xl",children:E.icon}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${E.rarity==="mythic"?"bg-red-900/50 text-red-300":E.rarity==="legendary"?"bg-yellow-900/50 text-yellow-300":"bg-blue-900/50 text-blue-300"}`,children:E.rarity.toUpperCase()})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:U?E.name:"???"}),U?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-purple-200 text-sm mb-3",children:E.description}),e.jsxs("div",{className:"p-3 bg-black/30 rounded mb-3",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-2",children:":"}),E.effects.map((R,q)=>e.jsxs("p",{className:"text-white text-sm",children:[" ",R.type,": +",R.value]},q))]}),e.jsxs("div",{className:"p-3 bg-purple-900/30 rounded",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-1",children:":"}),e.jsx("p",{className:"text-white text-xs italic",children:E.lore})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-3",children:" "}),e.jsx("div",{className:"p-3 bg-yellow-900/30 rounded",children:e.jsxs("p",{className:"text-yellow-300 text-xs",children:[" : ",E.hint]})})]})]},E.id)})}),S==="codes"&&e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-purple-900/30 rounded-xl p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"  "}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("input",{type:"text",value:D,onChange:E=>O(E.target.value),placeholder:"  ...",className:"flex-1 px-4 py-3 bg-black/50 border border-purple-500 rounded-lg text-white placeholder-gray-400",onKeyPress:E=>E.key==="Enter"&&ae()}),e.jsx("button",{onClick:ae,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg text-white font-semibold",children:""})]}),e.jsx("div",{className:"text-center text-purple-300 text-sm",children:":    "})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:" "}),Kl.map(E=>{const U=p.includes(E.id);return e.jsx("div",{className:`p-4 rounded-lg ${U?"bg-green-900/30 border border-green-500":"bg-gray-800/30 border border-gray-700"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:U?E.code:"???"}),e.jsx("p",{className:"text-purple-300 text-sm mt-1",children:E.hint})]}),U&&e.jsx("span",{className:"text-green-400",children:" "})]})},E.id)})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-purple-300",children:[" : ",p.length," / ",Kl.length]})})]}),e.jsxs("div",{className:"mt-8 bg-black/30 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:" "}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("p",{className:"text-purple-300",children:" "}),e.jsxs("p",{className:"text-white font-bold",children:[d.length," / ",to.length]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("p",{className:"text-purple-300",children:" "}),e.jsxs("p",{className:"text-white font-bold",children:[u.length," / ",ao.length]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("p",{className:"text-purple-300",children:" "}),e.jsxs("p",{className:"text-white font-bold",children:[g.length," / ",so.length]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("p",{className:"text-purple-300",children:" "}),e.jsxs("p",{className:"text-white font-bold",children:[p.length," / ",Kl.length]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"h-4 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-pink-600 transition-all duration-1000",style:{width:`${(d.length+u.length+g.length+p.length)/(to.length+ao.length+so.length+Kl.length)*100}%`}})})})]})]}),le()]})};function Jb(){const[r,i]=v.useState(!1),[d,o]=v.useState(null),u=re(p=>p.gameEnding);v.useEffect(()=>{const p=localStorage.getItem("user");p&&(o(JSON.parse(p)),i(!0))},[]);const m=(p,x)=>{if(p==="demo"&&x==="password"){const S={username:p,email:"demo@example.com"};return i(!0),o(S),localStorage.setItem("user",JSON.stringify(S)),!0}return!1},g=p=>{const x={username:p.username,email:p.email};return i(!0),o(x),localStorage.setItem("user",JSON.stringify(x)),!0},y=()=>{i(!1),o(null),localStorage.removeItem("user")};return e.jsx(Qp,{children:e.jsx("div",{className:"min-h-screen",children:e.jsxs(vp,{children:[e.jsx(pe,{path:"/",element:e.jsx(Kx,{isLoggedIn:r,user:d,onLogout:y})}),e.jsx(pe,{path:"/login",element:e.jsx(Tg,{onLogin:m})}),e.jsx(pe,{path:"/account-creation",element:e.jsx(eb,{onCreateAccount:g})}),e.jsx(pe,{path:"/character-creation",element:e.jsx(Dg,{})}),e.jsx(pe,{path:"/game-info",element:e.jsx(tb,{})}),e.jsx(pe,{path:"/game-intro",element:e.jsx(Mb,{})}),e.jsx(pe,{path:"/settings",element:e.jsx(ab,{})}),e.jsx(pe,{path:"/api-test",element:e.jsx(wb,{})}),e.jsx(pe,{path:"/dungeon-selection",element:e.jsx(Lg,{})}),e.jsx(pe,{path:"/dungeon",element:e.jsx(Hg,{})}),e.jsx(pe,{path:"/diary",element:e.jsx(Bg,{})}),e.jsx(pe,{path:"/heroine-stories",element:e.jsx($g,{})}),e.jsx(pe,{path:"/save-load",element:e.jsx(Gg,{})}),e.jsx(pe,{path:"/shopping",element:e.jsx(Yg,{})}),e.jsx(pe,{path:"/characters",element:e.jsx(Px,{})}),e.jsx(pe,{path:"/achievements",element:e.jsx(Rb,{})}),e.jsx(pe,{path:"/collection",element:e.jsx(sb,{})}),e.jsx(pe,{path:"/quests",element:e.jsx(lb,{})}),e.jsx(pe,{path:"/calendar",element:e.jsx(nb,{})}),e.jsx(pe,{path:"/crafting",element:e.jsx(ib,{})}),e.jsx(pe,{path:"/guild",element:e.jsx(rb,{})}),e.jsx(pe,{path:"/pets",element:e.jsx(cb,{})}),e.jsx(pe,{path:"/fishing",element:e.jsx(ob,{})}),e.jsx(pe,{path:"/farming",element:e.jsx(db,{})}),e.jsx(pe,{path:"/housing",element:e.jsx(ub,{})}),e.jsx(pe,{path:"/game-menu",element:e.jsx(mb,{})}),e.jsx(pe,{path:"/tutorial",element:e.jsx(xb,{onComplete:()=>{},onSkip:()=>{}})}),e.jsx(pe,{path:"/card-matching",element:e.jsx(hb,{})}),e.jsx(pe,{path:"/quiz",element:e.jsx(fb,{onComplete:p=>console.log("Quiz completed with score:",p)})}),e.jsx(pe,{path:"/rhythm",element:e.jsx(pb,{})}),e.jsx(pe,{path:"/puzzle",element:e.jsx(gb,{})}),e.jsx(pe,{path:"/pvp",element:e.jsx(bb,{})}),e.jsx(pe,{path:"/social",element:e.jsx(yb,{})}),e.jsx(pe,{path:"/enhancement",element:e.jsx(vb,{})}),e.jsx(pe,{path:"/clubs",element:e.jsx(Cb,{})}),e.jsx(pe,{path:"/heroines",element:e.jsx(Eb,{})}),e.jsx(pe,{path:"/character-meeting",element:e.jsx(Ab,{})}),e.jsx(pe,{path:"/minigames",element:e.jsx(Tb,{})}),e.jsx(pe,{path:"/weather",element:e.jsx(Db,{})}),e.jsx(pe,{path:"/dialogue",element:e.jsx(Yb,{})}),e.jsx(pe,{path:"/gifts",element:e.jsx(Qb,{})}),e.jsx(pe,{path:"/seasonal-events",element:e.jsx(Xb,{})}),e.jsx(pe,{path:"/ending",element:e.jsx(Mx,{})}),e.jsx(pe,{path:"/romance-events",element:e.jsx(Vb,{})}),e.jsx(pe,{path:"/hidden-content",element:e.jsx(Zb,{})}),e.jsx(pe,{path:"/game",element:u?e.jsx(Mx,{}):e.jsx(Eg,{})}),e.jsx(pe,{path:"*",element:e.jsx(bp,{to:"/",replace:!0})})]})})})}M0.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(Jb,{})}));
